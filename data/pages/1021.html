<html><body><div><div class="entry-content">
        
      <h1 class="post-title entry-title">Python for Android Tutorial #1 - Using the Accelerometer</h1>
      <h3 id="welcome">Welcome!</h3>

<p>I’m going to write a simple tutorial series about Mobile development with Python. I’ll be using Android, but feel free to use Android or iOS. It’s a short tutorial, just to help you to understand and learn how to work with Python for Mobile.</p>

<p>This post will be a simple example of accelerometer usage, so let’s start.</p>

<figure class="center ">
  <a href="/images/python-mobile.png"><img src="/images/python-mobile.png" alt=""/></a>
  <figcaption>Python Mobile development course</figcaption>
</figure>




<p><ins class="adsbygoogle" data-ad-client="ca-pub-7559770887681599" data-ad-slot="6312284669" data-ad-format="auto"/>
</p>

<h2 id="i---about-the-tutorials">I - About the Tutorials</h2>

<p>I’ll show you how to use each mobile API, like compass, camera, sensors, sound, and others. After the API, we will start to test some Python libs, as PyGame and OpenCV.
I’m using Android with buildozer, but major part are compatible with iOS as well.</p>

<p>Must read:</p>



<h3 id="source-code">Source code</h3>



<h2 id="ii---index">II - Index</h2>

<p>Available tutorials:</p>



<h2 id="iii---creating-the-app">III - Creating the app</h2>

<p><a href="https://github.com/kivy/plyer#support">As you can see</a>, this tutorial is compatible with Android, iOS, OSX and Linux. So you will be able to build this Python app to Android and iOS. Create a new folder and create a new file named <strong>main.py</strong>. Now, open your terminal and run the command bellow to create Buildozer spec file.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>buildozer init</code></pre></figure>

<p>Open your <strong>buildozer.spec</strong> and edit it. In this tutorial we are going to use Plyer, so make sure to have the following line:</p>

<blockquote>requirements = kivy, plyer</blockquote>

<p>You can check my version here:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="p">[</span><span class="n">app</span><span class="p">]</span>
<span class="n">title</span> <span class="o">=</span> <span class="n">Python</span> <span class="n">Accelerometer</span>
<span class="n">package</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">accelerometer</span>
<span class="n">package</span><span class="o">.</span><span class="n">domain</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">wordpress</span><span class="o">.</span><span class="n">bytedebugger</span>
<span class="n">source</span><span class="o">.</span><span class="nb">dir</span> <span class="o">=</span> <span class="o">.</span>
<span class="n">source</span><span class="o">.</span><span class="n">include_exts</span> <span class="o">=</span> <span class="n">py</span><span class="p">,</span><span class="n">png</span><span class="p">,</span><span class="n">jpg</span><span class="p">,</span><span class="n">kv</span><span class="p">,</span><span class="n">atlas</span>
<span class="n">version</span> <span class="o">=</span> <span class="s">'1.0'</span>
<span class="n">requirements</span> <span class="o">=</span> <span class="n">kivy</span><span class="p">,</span> <span class="n">plyer</span>
<span class="n">fullscreen</span> <span class="o">=</span> <span class="mi">1</span>
<span class="p">[</span><span class="n">buildozer</span><span class="p">]</span>
<span class="n">log_level</span> <span class="o">=</span> <span class="mi">1</span>  </code></pre></figure>

<h2 id="iv---lets-code-it">IV - Let’s code it</h2>

<p>Now, add all imports:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span> <span class="c">#for the main app</span>
<span class="kn">from</span> <span class="nn">kivy.uix.floatlayout</span> <span class="kn">import</span> <span class="n">FloatLayout</span> <span class="c">#the UI layout</span>
<span class="kn">from</span> <span class="nn">kivy.uix.label</span> <span class="kn">import</span> <span class="n">Label</span> <span class="c">#a label to show information</span>
<span class="kn">from</span> <span class="nn">plyer</span> <span class="kn">import</span> <span class="n">accelerometer</span> <span class="c">#object to read the accelerometer</span>
<span class="kn">from</span> <span class="nn">kivy.clock</span> <span class="kn">import</span> <span class="n">Clock</span> <span class="c">#clock to schedule a method  </span></code></pre></figure>

<p>Create the UI:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">UI</span><span class="p">(</span><span class="n">FloatLayout</span><span class="p">):</span><span class="c">#the app ui</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">UI</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">lblAcce</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s">"Accelerometer: "</span><span class="p">)</span> <span class="c">#create a label at the center</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lblAcce</span><span class="p">)</span> <span class="c">#add the label at the screen</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">accelerometer</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span> <span class="c">#enable the accelerometer</span>
			<span class="c">#if you want do disable it, just run: accelerometer.disable()</span>
			<span class="n">Clock</span><span class="o">.</span><span class="n">schedule_interval</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="mi">24</span><span class="p">)</span> <span class="c">#24 calls per second</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">lblAcce</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"Failed to start accelerometer"</span> <span class="c">#error</span>

	<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dt</span><span class="p">):</span>
		<span class="n">txt</span> <span class="o">=</span> <span class="s">""</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">txt</span> <span class="o">=</span> <span class="s">"Accelerometer:</span><span class="se">\n</span><span class="s">X = </span><span class="si">%.2</span><span class="s">f</span><span class="se">\n</span><span class="s">Y = </span><span class="si">%.2</span><span class="s">f</span><span class="se">\n</span><span class="s">Z = </span><span class="si">%2</span><span class="s">.f "</span> <span class="o">%</span><span class="p">(</span>
				<span class="n">accelerometer</span><span class="o">.</span><span class="n">acceleration</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="c">#read the X value</span>
				<span class="n">accelerometer</span><span class="o">.</span><span class="n">acceleration</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="c"># Y</span>
				<span class="n">accelerometer</span><span class="o">.</span><span class="n">acceleration</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c"># Z</span>
		<span class="k">except</span><span class="p">:</span>
			<span class="n">txt</span> <span class="o">=</span> <span class="s">"Cannot read accelerometer!"</span> <span class="c">#error</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">lblAcce</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">txt</span> <span class="c">#add the correct text</span></code></pre></figure>

<p>This code is self explanatory. We extend the default Kivy Float Layout, and then add an Label widget with the text Accelerometer.</p>

<p>Then the accelerometer is enabled and an update method is scheduled.</p>

<p>Create the main app:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Accelerometer</span><span class="p">(</span><span class="n">App</span><span class="p">):</span> <span class="c">#our app</span>
	<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="n">ui</span> <span class="o">=</span> <span class="n">UI</span><span class="p">()</span><span class="c"># create the UI</span>
		<span class="k">return</span> <span class="n">ui</span> <span class="c">#show it</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">Accelerometer</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span> <span class="c">#start our app</span></code></pre></figure>

<p>That’s it! This is the output:</p>
<figure class="center ">
  <a href="/images/p4a1.png"><img src="/images/p4a1.png" alt=""/></a>
  <figcaption>Accelerometer running on Android</figcaption>
</figure>

<p>To build and run it, use the command bellow:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">buildozer android debug deploy run</code></pre></figure>

<p>Ok, the first tutorial is right here.</p>

<p>This is simple, but it is my objective. I’ll write a lot of simple tutorials as this one, so, when you need to work with a specific functionality, you will be able to find it here.</p>

<p>Thx for reading!</p>


<center>
  <ins class="adsbygoogle" data-ad-client="ca-pub-7559770887681599" data-ad-slot="1350374663">
  </ins>
</center>



      <footer class="entry-meta">
        <span class="entry-tags"><a href="/tags#accelerometer" title="Pages tagged accelerometer" class="tag"><span class="term">accelerometer</span></a><a href="/tags#Android" title="Pages tagged Android" class="tag"><span class="term">Android</span></a><a href="/tags#application" title="Pages tagged application" class="tag"><span class="term">application</span></a><a href="/tags#build" title="Pages tagged build" class="tag"><span class="term">build</span></a><a href="/tags#buildozer" title="Pages tagged buildozer" class="tag"><span class="term">buildozer</span></a><a href="/tags#example" title="Pages tagged example" class="tag"><span class="term">example</span></a><a href="/tags#ios" title="Pages tagged ios" class="tag"><span class="term">ios</span></a><a href="/tags#mac" title="Pages tagged mac" class="tag"><span class="term">mac</span></a><a href="/tags#osx" title="Pages tagged osx" class="tag"><span class="term">osx</span></a><a href="/tags#programming" title="Pages tagged programming" class="tag"><span class="term">programming</span></a><a href="/tags#publish" title="Pages tagged publish" class="tag"><span class="term">publish</span></a><a href="/tags#python" title="Pages tagged python" class="tag"><span class="term">python</span></a><a href="/tags#Tutorial" title="Pages tagged Tutorial" class="tag"><span class="term">Tutorial</span></a><a href="/tags#windows" title="Pages tagged windows" class="tag"><span class="term">windows</span></a></span>
        
        <span class="author vcard"><span class="fn">Aron Bordin</span></span>
        

      </footer>
    </div>
    </div></body></html>