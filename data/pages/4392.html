<html><body><div><div class="body-text">
                                                <figure data-orig-width="1002" data-orig-height="404" class="tmblr-full"><img src="http://41.media.tumblr.com/2d5c0f1b161ab9c6f2e293812e226b30/tumblr_inline_nnrz4koI5v1ttxonq_1280.png" alt="image" data-orig-width="1002" data-orig-height="404"/></figure><p>Every season of Game of Thrones seems to spark two debates. The prevalence and motivation behind piracy, and spoilers. How soon after a show airs is it appropriate to post publicly about what happens? What about when episodes leak? What about when <a href="http://t.umblr.com/redirect?z=http%3A%2F%2Fundergroundmgzn.com%2F2014%2F04%2F15%2Fman-ruins-game-thrones-series-novels-full-spoilers%2F&amp;t=MDQzMzJlZTQ5MGMzZmQ0ZGMyMjI3YzExNzYzMWIzODc4YjAwZWY5ZCxQMlU1ektIQg%3D%3D" target="_blank">a man releases a series of novels full of spoilers</a>?</p><p>I had the idea that if we flooded the internet with fake spoilers, people would have no idea. Coming up with spoilers sounds like a lot of work, especially when most of them are just “X kills Y”. Surely, this process could be automated! This lead me to create the <a href="http://t.umblr.com/redirect?z=http%3A%2F%2Fgot-spoilers.mens.ly&amp;t=ZjQ0NGE2NDQyZDMyOTAyMGE2NTQwZWViYTJmM2FhYzY2MzBlNjFhMyxQMlU1ektIQg%3D%3D" target="_blank">Game of Thrones Spoiler Generator</a>.</p><p>If you’re not into computer programming, this is where I leave you because this post is going full nerd from here on.</p><p>I have often applied proper programming to silly projects, but more often I prefer to apply silly programming when the stakes are low. Reflection is particularly fun for doing silly things, since despite being very useful it is easily abused. Duck typing is also like this, it works on the idea that if an object quacks like a duck (responds to a ducky functions), it may as well be a duck. This line of thinking, along with python’s flexible string formatting, gave me a great idea for simple templating.</p><p>I wanted to take a template, such as “X kills Y”, and fill it with random Game of Thrones character. Just having the single pattern would get boring fast, so I needed to support other templates, such as “X and Y finally give into temptation”. However, it wouldn’t be Game of Thrones if two random characters of OPPOSITE genders gave into temptation, it also makes less sense if a character that is already dead gets killed. (I am a little lazy at updating which characters have died, though, and dead characters can definitely kill other characters!)</p><p>I needed to limit the characters that could be chosen for a template using appropriate tags. It was also useful to ensure that main characters show up more often. A list of tags is basically a key, and a character name is a value. A mapping between a keys and values is a Dictionary, or the Mapping interface in python. I explicitly implemented the Mapping interface out of habit, but did not enough have to since anything that quacks like a Mapping (contains a __getitem__ method) <b>is </b>a Mapping. My class would take a dictionary key, treat it as a comma separated list of tags, and return a random Game of Thrones character that met the criteria. Sure, returning random values isn’t what the Mapping interface was meant for, but it sounds similar enough to use with format strings.</p><figure data-orig-width="500" data-orig-height="250" class="tmblr-full"><img src="http://31.media.tumblr.com/d62363843be9ae816a30d4657b424eda/tumblr_inline_nns0dtLLUT1ttxonq_500.gif" alt="image" data-orig-width="500" data-orig-height="250"/></figure><p>My list of templates also have a weighting, this allows a higher chance of choosing the “X kills Y” template without having to add it multiple times. Each time the page it loaded, a template is chosen at random from the list and filled with character names by passing it the “dictionary” of characters. Extra care is taken to prevent the same character appearing twice in the same spoiler.</p><p>Writing such silly code meant I never wanted to touch it again, but obviously as the show progresses I occasionally need to add new characters or cross off recently deceased ones. I still need to catch up with the latest episodes when I’m not so busy with antics. To make it easier to do so without editing the source code, I used a <a href="http://t.umblr.com/redirect?z=http%3A%2F%2Fen.wikipedia.org%2Fwiki%2FYAML&amp;t=ZmMwNWExMmIwMzA1YTRhNDAxODk4NDdjZmQ5YWEwODg2ODk1NjU2MSxQMlU1ektIQg%3D%3D" target="_blank">simple YAML file</a> much like I had for some serious projects. This allowed me to add characters easily:</p><blockquote>characters:<br/>  - name:   Arya<br/>    tags:<br/>      - female<br/>      - alive<br/>      - main<br/></blockquote><p>Templates for spoilers, can be similarly added:</p><blockquote>templates:<br/>  - text:   ’%()s kills %(alive)s’<br/>    weight: 10<br/>  - ’%()s kills Beric Dondarrion’<br/>  - ’%(alive)s hosts a wedding for %(alive)s’<br/></blockquote><p>Once I had a working script for generating spoilers, it was a convenient matter of setting up a <a href="http://t.umblr.com/redirect?z=http%3A%2F%2Fwww.pylonsproject.org%2F&amp;t=YmE3MjI2YzQxMzY2OTM1OWU1ZjYwMGNmZTk1MzRhYTYzNmIxYmYxMyxQMlU1ektIQg%3D%3D" target="_blank">Pyramid project</a> and throwing in an HTML template in order to expose my work to the web. I like Pyramid as it is very straightforward for simple applications compared to more “batteries included” frameworks, it is also my platform of choice for implementing RESTful JSON APIs. I highly recommend giving Pyramid a go if you’re looking to try out web programming.</p><p>Full source code is <a href="http://t.umblr.com/redirect?z=https%3A%2F%2Fbitbucket.org%2Fmensly%2Fgot-spoilers&amp;t=ZDBkNmQ5OWI3NGNlZDEyYTQzYzJmZWRhNzBiNjQxZGMyYzExMzNkYyxQMlU1ektIQg%3D%3D" target="_blank">available on BitBucket</a>, so you can make your own version for your favourite show very easily!</p>
                                            </div>
                                            
                                        </div></body></html>