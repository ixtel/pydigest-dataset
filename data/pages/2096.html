<html><body><div><article class="markdown-body entry-content" itemprop="text"><a name="user-content-first-the-function-you-always-missed-in-python"/>
<h2><a id="user-content-first-the-function-you-always-missed-in-python" class="anchor" href="#first-the-function-you-always-missed-in-python" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>first: The function you always missed in Python</h2>
<a href="https://secure.travis-ci.org/hynek/first"><img alt="https://secure.travis-ci.org/hynek/first.png" src="https://camo.githubusercontent.com/a354e2e305370949dcec02dd330f9258f85f72c4/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f68796e656b2f66697273742e706e67" data-canonical-src="https://secure.travis-ci.org/hynek/first.png"/></a>
<p><em>first</em> is an MIT licensed Python package with a simple function that returns
the first true value from an iterable, or <code>None</code> if there is none.  If you
need more power, you can also supply a <code>key</code> function that is used to judge
the truth value of the element or a <code>default</code> value if <code>None</code> doesn’t fit
your use case.</p>
<blockquote>
I’m using the term “true” consistently with Python docs for <code>any()</code> and
<code>all()</code> — it means that the value evaluates to true like: <code>True</code>, <code>1</code>,
<code>"foo"</code> or <code>[None]</code>.  But <strong>not</strong>: <code>None</code>, <code>False</code> or <code>0</code>.  In
JavaScript, they call this “truthy”.</blockquote>
<a name="user-content-examples"/>
<h2><a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Examples</h2>
<p>A simple example to get started:</p>
<pre lang="pycon">&gt;&gt;&gt; from first import first
&gt;&gt;&gt; first([0, None, False, [], (), 42])
42
</pre>
<p>However, it’s especially useful for dealing with regular expressions in
<code>if/elif/else</code> branches:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> re

<span class="pl-k">from</span> first <span class="pl-k">import</span> first


re1 <span class="pl-k">=</span> re.compile(<span class="pl-s"><span class="pl-pds">'</span>b(.*)<span class="pl-pds">'</span></span>)
re2 <span class="pl-k">=</span> re.compile(<span class="pl-s"><span class="pl-pds">'</span>a(.*)<span class="pl-pds">'</span></span>)

m <span class="pl-k">=</span> first(regexp.match(<span class="pl-s"><span class="pl-pds">'</span>abc<span class="pl-pds">'</span></span>) <span class="pl-k">for</span> regexp <span class="pl-k">in</span> [re1, re2])
<span class="pl-k">if</span> <span class="pl-k">not</span> m:
   <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">'</span>no match!<span class="pl-pds">'</span></span>)
<span class="pl-k">elif</span> m.re <span class="pl-k">is</span> re1:
   <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">'</span>re1<span class="pl-pds">'</span></span>, m.group(<span class="pl-c1">1</span>))
<span class="pl-k">elif</span> m.re <span class="pl-k">is</span> re2:
   <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">'</span>re2<span class="pl-pds">'</span></span>, m.group(<span class="pl-c1">1</span>))</pre></div>
<p>The optional <code>key</code> function gives you even <em>more</em> selection power.  If you
want to return the first even number from a list, just do the following:</p>
<pre lang="pycon">&gt;&gt;&gt; from first import first
&gt;&gt;&gt; first([1, 1, 3, 4, 5], key=lambda x: x % 2 == 0)
4
</pre>
<p><code>default</code> on the other hand allows you to specify a value that is returned
if none of the elements is true:</p>
<pre lang="pycon">&gt;&gt;&gt; from first import first
&gt;&gt;&gt; first([0, None, False, [], ()], default=42)
42
</pre>
<a name="user-content-usage"/>
<h2><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Usage</h2>
<p>The package consists of one module consisting of one function:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> first <span class="pl-k">import</span> first

first(iterable, <span class="pl-v">default</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-v">key</span><span class="pl-k">=</span><span class="pl-c1">None</span>)</pre></div>
<p>This function returns the first element of <code>iterable</code> that is true if
<code>key</code> is <code>None</code>.  If there is no true element, the value of <code>default</code> is
returned, which is <code>None</code> by default.</p>
<p>If a callable is supplied in <code>key</code>, the result of <code>key(element)</code> is
used to judge the truth value of the element, but the element itself is
returned.</p>
<p><em>first</em> has no dependencies and should work with any Python available.  Of
course, it works with the awesome <a href="http://getpython3.com/">Python 3</a> everybody should be using.</p>
<a name="user-content-alternatives"/>
<h2><a id="user-content-alternatives" class="anchor" href="#alternatives" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Alternatives</h2>
<p><em>first</em> brings nothing to the table that wasn’t possible before. However the
existing solutions aren’t very idiomatic for such a common and simple problem.</p>
<p>The following constructs are equivalent to <code>first(seq)</code> and work since Python
2.6:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">next</span>(itertools.ifilter(<span class="pl-c1">None</span>, seq), <span class="pl-c1">None</span>)
<span class="pl-c1">next</span>(itertools.ifilter(<span class="pl-c1">bool</span>, seq), <span class="pl-c1">None</span>)
<span class="pl-c1">next</span>((x <span class="pl-k">for</span> x <span class="pl-k">in</span> seq <span class="pl-k">if</span> x), <span class="pl-c1">None</span>)</pre></div>
<p>None of them is as pretty as I’d like them to be. The <code>re</code> example from
above would look like the following:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">next</span>(itertools.ifilter(<span class="pl-c1">None</span>, (regexp.match(<span class="pl-s"><span class="pl-pds">'</span>abc<span class="pl-pds">'</span></span>) <span class="pl-k">for</span> regexp <span class="pl-k">in</span> [re1, re2])), <span class="pl-c1">None</span>)
<span class="pl-c1">next</span>((regexp.match(<span class="pl-s"><span class="pl-pds">'</span>abc<span class="pl-pds">'</span></span>) <span class="pl-k">for</span> regexp <span class="pl-k">in</span> [re1, re2] <span class="pl-k">if</span> regexp.match(<span class="pl-s"><span class="pl-pds">'</span>abc<span class="pl-pds">'</span></span>)), <span class="pl-c1">None</span>)</pre></div>
<p>Note that in the second case you have to call <code>regexp.match()</code> <em>twice</em>.  For
comparison, one more time the <em>first</em>-version:</p>
<div class="highlight highlight-source-python"><pre>first(regexp.match(<span class="pl-s"><span class="pl-pds">'</span>abc<span class="pl-pds">'</span></span>) <span class="pl-k">for</span> regexp <span class="pl-k">in</span> [re1, re2])</pre></div>
<p>Idiomatic, clear and readable. Pythonic. :)</p>
<a name="user-content-background"/>
<h2><a id="user-content-background" class="anchor" href="#background" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Background</h2>
<p>The idea for <em>first</em> goes back to a discussion I had with <a href="https://github.com/ambv">Łukasz Langa</a> about
how the <code>re</code> example above is painful in Python.  We figured such a function
is missing Python, however it’s rather unlikely we’d get it in and even if, it
wouldn’t get in before 3.4 anyway, which is years away as of yours truly is
writing this.</p>
<p>So I decided to release it as a package for now.  If it proves popular enough,
it may even make it into Python’s stdlib in the end.</p>
<a href="https://bitdeli.com/free"><img alt="Bitdeli badge" src="https://camo.githubusercontent.com/712c7763ba9bc033556aeb73e34e0a643cd4d6a3/68747470733a2f2f64327765637a68766c38323376302e636c6f756466726f6e742e6e65742f68796e656b2f66697273742f7472656e642e706e67" data-canonical-src="https://d2weczhvl823v0.cloudfront.net/hynek/first/trend.png"/></a>

</article>
  </div></body></html>