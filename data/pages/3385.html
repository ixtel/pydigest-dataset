<html><body><div><p>Packaging is currently too hard in Python, and while there's effort to improve it, it's still largely focused on the problem of installing. The current approach is to just throw docs and specs at the building part: <a class="footnote-reference" href="#docs-and-specs" id="id1">[2]</a></p><p>Why do we need a damn mountain of docs? Because when building a distribution the user experience is like this:</p><p>We don't need a goddamn mountain of docs, we need something that's so simple even a monkey could publish a decent distribution on PyPI. But that means cutting down features ...</p><div class="section" id="the-perspective-problem"><h2>The perspective problem<a class="headerlink" href="#the-perspective-problem" title="Permalink to this headline"> *</a></h2><p>There are lots of improvements made in <a class="reference external" href="https://www.python.org/dev/peps/pep-0376/">PEP-376</a>, <a class="reference external" href="https://www.python.org/dev/peps/pep-0345/">PEP-345</a>, <a class="reference external" href="https://www.python.org/dev/peps/pep-0425/">PEP-425</a>, <a class="reference external" href="https://www.python.org/dev/peps/pep-0427/">PEP-427</a> and <a class="reference external" href="https://www.python.org/dev/peps/pep-0426/">PEP-426</a>, but they are all improvements that allow tools like <cite>pip</cite> to work better. They still don't make my life easier, as a packager - the user of setuptools or distutils.</p><p>Don't get me wrong, it's good that we got those but I think there should be some focus on making a simpler packaging tool. An alternative to setuptools/distutils that has less features, more constraints but way easier to use. Sure, anyone can try to make something like that, but if it's not officially sanctioned it's going to have very limited success.</p><div class="section" id="it-has-been-tried-before"><h3>It has been tried before<a class="headerlink" href="#it-has-been-tried-before" title="Permalink to this headline"> *</a></h3><p>There have been attempts to replace the <em>unholy duo</em> <a class="footnote-reference" href="#unholy-duo" id="id2">[1]</a> we have now but alas, the focus was wrong. There have been two directions of improvement:</p><ul class="simple"><li>Internals: better architecture to make the build tools more maintainable/extensible/whatever. Distutils2 was the champion of this approach.</li><li>Metadata as configuration: the "avoid code" mantra. Move the metadata in a configuration file, and avoid the crazy problems usually happen when you let users put code in <tt class="docutils literal">setup.py</tt>. Distutils2 championed this idea and it lives today through <a class="reference external" href="https://pypi.python.org/pypi/d2to1">d2to1</a>.</li></ul><p>However, the way code and data files are collected didn't change. As a packager, you still have to deal with the dozen confusing <em>buttons</em>. <a class="footnote-reference" href="#distutils2" id="id3">[3]</a></p><p><tt class="docutils literal">d2to1</tt> is not better in this regard. In fact, it's worse because you have to hardcode metadata and there's no automatic discovery for whatever you're trying to package. <a class="footnote-reference" href="#dry-configuration" id="id4">[4]</a></p></div><div class="section" id="the-current-course"><h3>The current course<a class="headerlink" href="#the-current-course" title="Permalink to this headline"> *</a></h3><p><a class="reference external" href="https://www.python.org/dev/peps/pep-0426/">PEP-426</a> will open up possibilities of custom build systems, something else than setuptools, that could hypothetically solve all sorts of niche problems like C extensions with unusual dependencies.</p></div><div class="section" id="what-i-dream-of"><h3>What I dream of<a class="headerlink" href="#what-i-dream-of" title="Permalink to this headline"> *</a></h3><p>What if there would be a build system just for pure-Python distributions (and maybe some C extension with no dependencies)? Something that has some strong conventions: code in <em>this</em> place, docs in <em>that</em> place - no exceptions. Something like <a class="reference external" href="http://doc.crates.io/guide.html#cargo-conventions">cargo</a> has. Maybe with a nice project scaffold generator.</p><p>Of course, anyone can say: <a class="reference external" href="https://www.python.org/dev/peps/pep-0426/">PEP-426</a> lets you build whatever you want, just do it! However, to make something really simple to use some conventions need to be broken, and if you want to convert your project some effort would be needed. You see, if it's not officially sanctioned it's not going to pick up. Death by lack of interest.</p><p>And if it doesn't pick up, then the vast majority of packagers are going to stick with the complicated <tt class="docutils literal">setup.py</tt> we have now.</p><p>In a way, packaging in Python is a victim of bad habits - complex conventions, and feature bloat. It's hard to simplify things, because all the historical baggage people want to carry around. But it there's some official sanctioning then it's easier to accept the hard changes.</p><p>Concretely what I want is along these lines:</p><ul class="simple"><li>Get rid of <tt class="docutils literal">py_modules</tt>, <tt class="docutils literal">packages</tt> and <tt class="docutils literal">package_dir</tt>. Just discover automatically whatever you have in a <tt class="docutils literal">src</tt> dir.</li><li>Get rid of <tt class="docutils literal">MANIFEST</tt>, <tt class="docutils literal">MANIFEST.in</tt> and the baffling trio of <tt class="docutils literal">package_data</tt>, <tt class="docutils literal">data_files</tt> and <tt class="docutils literal">include_package_data</tt>. Just take all the files are inside packages. Use <tt class="docutils literal">.gitignore</tt> to exclude files.</li><li>Have a single way to store and retrieve metadata like the version in your code. Not a <a class="reference external" href="https://packaging.python.org/en/latest/single_source_version.html#single-sourcing-the-version">handful of ways</a>.</li></ul><p>In other words, one way to do it. Not one <em>clear</em> way, cause we document the hell out of it, but <em>one, and only one, way to do it</em>. What do you think, could it work? Would it improve anything?</p></div></div></div></body></html>