<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-pytest-plugin-to-check-import-ordering-using-isort" class="anchor" href="#pytest-plugin-to-check-import-ordering-using-isort" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>py.test plugin to check import ordering using isort</h1>
<a href="http://badge.fury.io/py/pytest-isort"><img alt="https://badge.fury.io/py/pytest-isort.png" src="https://camo.githubusercontent.com/2e564894ffee8ad2e336857f535e129349d899d6/68747470733a2f2f62616467652e667572792e696f2f70792f7079746573742d69736f72742e706e67" data-canonical-src="https://badge.fury.io/py/pytest-isort.png"/></a>
<a href="https://travis-ci.org/moccu/pytest-isort"><img alt="https://travis-ci.org/moccu/pytest-isort.svg?branch=master" src="https://camo.githubusercontent.com/6dcbe9382c56afce70d78caa371c994c56de3be8/68747470733a2f2f7472617669732d63692e6f72672f6d6f6363752f7079746573742d69736f72742e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/moccu/pytest-isort.svg?branch=master"/></a>
<a name="user-content-usage"/>
<h2><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Usage</h2>
<p>install using <code>pip</code>:</p>
<pre>pip install pytest-isort
</pre>
<p>Activate isort checks when calling <code>py.test</code>:</p>
<pre>py.test --isort
</pre>
<p>This will execute an isort check against every <code>.py</code> file (if its not ignored).</p>
<a name="user-content-example"/>
<h2><a id="user-content-example" class="anchor" href="#example" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Example</h2>
<p>Given you have some files with incorrect sorted imports:</p>
<pre># content of file1.py

import os
import sys
import random

# content of file2.py

import json
import sys
import os
</pre>
<p>If you run <code>py.test</code> and activate the isort plugin you'll se something like this:</p>
<pre>$ py.test --isort
========================= test session starts ==========================
platform darwin -- Python 2.7.9 -- py-1.4.26 -- pytest-2.6.4
plugins: isort, cache
collected 2 items

file1.py F
file2.py F

=============================== FAILURES ===============================
_____________________________ isort-check ______________________________
ERROR: file1.py Imports are incorrectly sorted.

 import os
+import random
 import sys
-import random
_____________________________ isort-check ______________________________
ERROR: file2.py Imports are incorrectly sorted.

 import json
+import os
 import sys
-import os
======================= 2 failed in 0.02 seconds =======================
</pre>
<p>If you can't change the import ordering for <code>file2.py</code>, you have the option to
exclude <code>file2.py</code> from isort checks.</p>
<p>Simply add the <code>isort_ignore</code> setting to your <code>py.test</code> configuration file:</p>
<pre>[pytest]
isort_ignore =
    file2.py
</pre>
<p>Then re-run the tests:</p>
<pre>$ py.test --isort
========================= test session starts ==========================
platform darwin -- Python 2.7.9 -- py-1.4.26 -- pytest-2.6.4
plugins: isort, cache
collected 1 items

file1.py F

=============================== FAILURES ===============================
_____________________________ isort-check ______________________________
ERROR: file1.py Imports are incorrectly sorted.

 import os
+import random
 import sys
-import random
======================= 1 failed in 0.02 seconds =======================
</pre>
<p>As you can see, <code>file2.py</code> is ignored and not checked. Now fix the
import ordering in <code>file1.py</code> and re-run the tests:</p>
<pre>$ py.test --isort
========================= test session starts ==========================
platform darwin -- Python 2.7.9 -- py-1.4.26 -- pytest-2.6.4
plugins: isort, cache
collected 1 items

file1.py .

======================= 1 passed in 0.01 seconds ======================
</pre>
<p>Everything is properly again. Congratulations!</p>
<p>If you run your testsuite again and again, <code>py.test</code> will only check changed
files to speed up. You see this by adding <code>-rs</code> to your <code>py.test</code> options:</p>
<pre>$ py.test --isort -rs
========================= test session starts ==========================
platform darwin -- Python 2.7.9 -- py-1.4.26 -- pytest-2.6.4
plugins: isort, cache
collected 1 items

file1.py s
======================= short test summary info ========================
SKIP [1] pytest_isort.py:145: file(s) previously passed isort checks

====================== 1 skipped in 0.01 seconds ======================
</pre>
<a name="user-content-configuration"/>
<h2><a id="user-content-configuration" class="anchor" href="#configuration" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Configuration</h2>
<p>You can exclude files from isort checks by using the <code>isort_ignore</code>
setting in your <code>py.test</code> configuration file (e.g. <code>pytest.ini</code>):</p>
<pre># content of setup.cfg
[pytest]
isort_ignore =
    docs/conf.py
    *migrations/*.py
</pre>
<p>This will ignore the <code>conf.py</code> python file inside the <code>docs</code> folder and
also ignore any python file in <code>migrations</code> folders.</p>
<a name="user-content-notes"/>
<h2><a id="user-content-notes" class="anchor" href="#notes" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Notes</h2>
<p>You can use <code>isort</code> to rewrite your python files and re-order the imports but
this is not part of this plugin.</p>

</article>
  </div></body></html>