<html><body><div><div id="getting-started">
<h2>Getting Started</h2>
<p>The first snippet below checks that an object is a list of tuples, each tuple with an int and a string.
The second snippet shows how to decorate a function</p>
<pre><span class="n">activate_checktype</span><span class="p">()</span> <span class="c1"># by default, checktype is deactivated</span>

<span class="n">o</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'world'</span><span class="p">)</span>
<span class="n">checktype</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="s1">'[(int, str)..]'</span><span class="p">)</span>


<span class="nd">@check</span><span class="p">(</span><span class="s1">'str, {str:int} -&gt; [int..]'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">myfunction</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>

<span class="n">myfunction</span><span class="p">(</span><span class="s2">"say"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"hello"</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
</pre>
</div>
<div id="introduction">
<h2>Introduction</h2>
<p>Python is strongly, dynamically typed. This is fine, but at times when  objects get too complicated, it can be a good thing to check for types.</p>
<p>Checktype allows simple checking of Python object formats. It has a very intuitive type system that mimics the way you define your own Python objects.</p>
<p>It can be particularily helpful when refactoring programs. Its performance has not been optimized and it is intended as a development-time type checking utility (disabled by default, and should probably be activated in tests only).</p>
</div>
<div id="usage-examples">
<h2>Usage examples:</h2>
<pre><span class="kn">from</span> <span class="nn">checktype</span> <span class="kn">import</span> <span class="n">checktype</span><span class="p">,</span> <span class="n">activate_checktype</span><span class="p">,</span> <span class="n">check</span>

<span class="c1"># 'activates' checktype. You need to explicitly call this,</span>
<span class="c1"># else it will do nothing (by default, to save cpu time).</span>
<span class="c1"># It is common to specify it in tests</span>
<span class="n">activate_checktype</span><span class="p">()</span>

<span class="c1"># checktype only provides a single function, that takes two arguments.</span>
<span class="c1"># the first one is the python object you want to test;</span>
<span class="c1"># the second one is an 'object specification' (spec), that mimics the way</span>
<span class="c1"># objects are represented in Python. This spec is a string representation of</span>
<span class="c1"># a python object. For example, to check that 12 is an int or 'hello' is a str:</span>
<span class="n">checktype</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="s1">'int'</span><span class="p">)</span>
<span class="n">checktype</span><span class="p">(</span><span class="s1">'hello'</span><span class="p">,</span> <span class="s1">'str'</span><span class="p">)</span>

<span class="c1"># A list of exactly 3 floats is specified as [float,float,float]</span>
<span class="n">checktype</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">2.0</span><span class="p">,</span><span class="mf">3.0</span><span class="p">],</span> <span class="s1">'[float,float,float]'</span><span class="p">)</span>

<span class="c1"># To match a variable-length list of ints, use [int..]</span>
<span class="n">checktype</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">'[int..]'</span><span class="p">)</span>

<span class="c1"># To only check that it is a list (but not its content), use []</span>
<span class="n">checktype</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"deux"</span><span class="p">],</span> <span class="s1">'[]'</span><span class="p">)</span>

<span class="c1"># And so on for tuples,</span>
<span class="n">checktype</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s1">'(int,int,int)'</span><span class="p">)</span>
<span class="n">checktype</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="s1">'(int..)'</span><span class="p">)</span>
<span class="n">checktype</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="s2">"deux"</span><span class="p">),</span> <span class="s1">'()'</span><span class="p">)</span>
<span class="c1"># dictionnaries,</span>
<span class="n">checktype</span><span class="p">({</span><span class="mi">11</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>  <span class="s1">'{int:int}'</span><span class="p">)</span>
<span class="n">checktype</span><span class="p">({</span><span class="mi">11</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>  <span class="s1">'{}'</span><span class="p">)</span>
<span class="c1"># and sets.</span>
<span class="n">checktype</span><span class="p">({</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">},</span>  <span class="s1">'{int}'</span><span class="p">)</span>

<span class="c1"># Use the ? wildcard if you don't want to check for a specific part</span>
<span class="n">checktype</span><span class="p">({</span><span class="mi">11</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">:</span> <span class="s2">"a"</span><span class="p">,</span> <span class="mi">13</span><span class="p">:(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)},</span>  <span class="s1">'{int:?}'</span><span class="p">)</span>

<span class="c1"># Further examples</span>
<span class="n">checktype</span><span class="p">({</span><span class="mi">11</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="mi">12</span><span class="p">:</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="s2">"5"</span><span class="p">)},</span> <span class="s1">'{ int: (int,?)}'</span><span class="p">)</span>
<span class="n">checktype</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="s2">"asdf"</span><span class="p">),(</span><span class="o">-</span><span class="mi">12</span><span class="p">,</span> <span class="s2">"asfwe"</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="s2">""</span><span class="p">)],</span> <span class="s2">"[(int,str)..]"</span><span class="p">)</span>
<span class="n">checktype</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)],</span> <span class="s2">"[(int, str, float)]"</span><span class="p">)</span>

<span class="c1"># Decorator examples</span>
<span class="nd">@check</span><span class="p">(</span><span class="s2">"str.. -&gt; int"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fn_1</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="n">fn_1</span><span class="p">(</span><span class="s2">"say"</span><span class="p">,</span> <span class="s2">"hello"</span><span class="p">)</span>


<span class="nd">@check</span><span class="p">(</span><span class="s2">"str, {str:int} -&gt; [int..]"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fn_3</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>

<span class="n">fn_3</span><span class="p">(</span><span class="s2">"say"</span><span class="p">,</span> <span class="p">{</span><span class="s2">"hello"</span><span class="p">:</span><span class="mi">1</span><span class="p">})</span>
</pre>
</div>


</div></body></html>