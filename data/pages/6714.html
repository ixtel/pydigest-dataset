<html><body><div><div class="blogcontent">
<p class="leftblogcontent">
</p>
<meta itemprop="datePublished" content="2015-09-15"/>
<p class="name vcard author" itemprop="author"><span class="fn"><a href="http://www.turingfinance.com/author/StuartReid/" title="Posts by StuartReid" rel="author">StuartReid</a></span> | On <span class="updated">September 15, 2015</span></p>
 
<p><span>Hackers would make great traders. At a meta level, hackers and traders do the same thing: they find and exploit the weaknesses of a system. The difference is that hackers hack computers, networks, and even people for various good and bad reasons whereas traders hack financial markets to make profits. </span><span>One <a href="https://en.wikipedia.org/wiki/Random_number_generator_attack" target="_blank">type of exploit</a> which has always fascinated me are those on random number generators. You see, random number generators are used everyday to encrypt data and communications but if the random number generators are flawed then they stop being <a href="https://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator" target="_blank">cryptographically secure</a> and hackers can exploit those vulnerabilities to decrypt the encrypted data and communications. For this reason random number generators need to pass robust sets of statistical tests for randomness, such as the <a href="http://csrc.nist.gov/groups/ST/toolkit/rng/documentation_software.html" target="_blank">NIST suite</a> of cryptographic tests for randomness, to determine whether they are sufficient for cryptographic uses. In this post we are going to subject various financial market returns to the NIST suite of tests and see whether or not we should be able to, in theory, hack the market.</span></p>
<h1><span><a id="outline"/>Article Outline</span></h1>
<p><span>This article is broken up into three sections. The first section will present background information about the random walk hypothesis and compares the statistical definition of randomness to the algorithmic definition. The second section will outline my Python implementation of the NIST test suite, including a brief explanation and source code for each test. The third and final section will subject a number of financial markets to these tests and end off by concluding whether or not the market are random and, if they are random, comment on the nature of that randomness. Depending on your familiarity with the subject matter and time constraints, you may wish to skip some sections. All of the code included below can be found in my repository, <a href="https://github.com/StuartGordonReid/r4nd0m" target="_blank">r4nd0m</a>, on GitHub. </span></p>
<ol>
<li><span><a href="#background">Background Information</a></span>
<ol>
<li><a href="#hypothesis">The Random Walk Hypothesis</a></li>
<li><a href="#randomness">Statistical vs. Algorithmic Randomness</a></li>
</ol>
</li>
<li><span><a href="#PyNIST">NIST Python Implementation</a></span>
<ol>
<li><a href="#structure">Project Structure</a></li>
<li><a href="#encoding">Binary Encoding Approach</a></li>
<li><a href="#monobit-test">Test 01 - Frequency (Monobit)</a></li>
<li><a href="#block-frequency-test">Test 02 - Block Frequency Test</a></li>
<li><a href="#runs-test">Test 03 - Runs Test</a></li>
<li><a href="#longest-runs-test">Test 04 - Longest Runs Test</a></li>
<li><a href="#binary-matrix-rank-test">Test 05 - Binary Matrix Rank Test</a></li>
<li><a href="#spectral-test">Test 06 - Discrete Fourier Transform Test</a></li>
<li><a href="#non-overlapping-patterns-test">Test 07 - Non-overlapping Patterns Test</a></li>
<li><a href="#overlapping-patterns-test">Test 08 - Overlapping Patterns Test</a></li>
<li><a href="#universal-test">Test 09 - Universal Test</a></li>
<li><a href="#linear-complexity-test">Test 10 - Linear Complexity Test</a></li>
<li><a href="#serial-test">Test 11 - Serial Test</a></li>
<li><a href="#approximate-entropy-test">Test 12 - Approximate Entropy</a></li>
<li><a href="#cumulative-sums">Test 13 - Cumulative Sums</a></li>
<li><a href="#random-excursions-test">Test 14 - Random Excursions</a></li>
<li><a href="#random-excursions-variant-test">Test 15 - Random Excursions Variant</a></li>
<li><a href="#qar">Walsh–Hadamard Transform</a> (<a href="http://www.quantatrisk.com/" target="_blank">QuantAtRisk.com</a>)</li>
</ol>
</li>
<li><span><a href="#hacking">Hacking the Market</a></span>
<ol>
<li><a href="#experiment-design">Experiment Set-up and Markets Considered</a></li>
<li><a href="#experiment-flaws">Problems with these experiments</a></li>
<li><a href="#results">Summary of Results</a></li>
<li><a href="#conclusion">Conclusions and Further Research</a></li>
</ol>
</li>
<li><span><a href="#personal">A Personal Update on my New Job and Home</a></span></li>
<li><span><a href="#disclaimer">Software Disclaimer</a></span></li>
</ol>
<p><span>On another note I am thrilled to report that this Python implementation passes all of the unit tests specified in the NIST C documentation and, as a bonus, includes tonnes of comments. Given this fact, I hope that the code will be useful to real security researchers as well as as quantitative analysts and traders. That said, my Python implementation carries the same disclaimer as NIST, so please take a moment to view the <a href="https://github.com/StuartGordonReid/r4nd0m" target="_blank">README file</a>.</span></p>
<h3><span><a id="background"/>Background Information</span></h3>
<p><span>This section introduces the random walk hypothesis and it's importance to quantitative finance. It also discusses the two definitions of randomness namely, statistical and algorithmic. </span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="hypothesis"/>The Random Walk Hypothesis</span></h5>
<p><span>Many systems in the real world demonstrate the properties of randomness including, for example, the <a href="http://www.sciencedirect.com/science/article/pii/0040580977900041" target="_blank">spread of epidemics</a> such as Ebola, the behaviour of <a href="http://iopscience.iop.org/0004-637X/513/1/409" target="_blank">cosmic radiation</a>, the movement of <a href="https://en.wikipedia.org/wiki/Brownian_motion" target="_blank">particles suspended in liquid</a>, luck at the roulette table, and supposedly even the movement of financial markets as per the <a href="https://en.wikipedia.org/wiki/Random_walk_hypothesis" target="_blank">random walk hypothesis</a> ... but b</span><span>efore we get into the details of the random walk hypothesis, let's discuss a famous test by Professor Burton G. Malkiel. The following extract is take from <a href="https://en.wikipedia.org/wiki/Random_walk_hypothesis" target="_blank">the Wikipedia page on the random walk hypothesis</a>. It very succinctly describes the test that Professor Malkiel performed and the conclusions he drew from this test.</span></p>
<p>
</p><div class="wc-shortcodes-box wc-shortcodes-item wc-shortcodes-content wc-shortcodes-clearfix wc-shortcodes-box-secondary ">
<p><span><em>"<a title="Burton Malkiel" href="https://en.wikipedia.org/wiki/Burton_Malkiel">Burton G. Malkiel</a>, an economics professor at Princeton University and writer of A Random Walk Down Wall Street, performed a test where his students were given a hypothetical stock that was initially worth fifty dollars. The closing stock price for each day was determined by a coin flip. If the result was heads, the price would close a half point higher, but if the result was tails, it would close a half point lower. Thus, each time, the price had a fifty-fifty chance of closing higher or lower than the previous day. Cycles or trends were determined from the tests. Malkiel then took the results in a chart and graph form to a chartist, a person who “seeks to predict future movements by seeking to interpret past patterns on the assumption that ‘history tends to repeat itself’”. The chartist told Malkiel that they needed to immediately buy the stock. Since the coin flips were random, the fictitious stock had no overall trend. Malkiel argued that this indicates that the market and stocks could be just as random as flipping a coin." - Wikipedia</em></span></p>
</div>
<p><span>In effect this is similar to "<a href="http://arxiv.org/abs/1002.4592" target="_blank">financial Turing tests</a>" in which people familiar with the markets are asked to take a look at time-series below and identify which one(s) are real market returns data, and which one(s) are simulated using some random process. Have a go with the following three images. Either image may either be a real market return series, or just the output from a calibrated <a href="http://www.turingfinance.com/random-walks-down-wall-street-stochastic-processes-in-python/#heston-model" target="_blank">Heston stochastic volatility model</a>. Good luck guessing!</span></p>

<p><span>It's quite difficult, isn't it? This observation lead early quantitative researchers to investigate whether or not stock market returns evolve randomly. The theory that market returns so evolve randomly is called the random walk hypothesis. This theory dates </span><span>back to the early 1800's when Jules Regnault and Louis Bachelier observed the characteristics of randomness in the returns of stock options. The theory was later formalized by Maurice Kendall and popularized in 1965 by Eugene Fama in his seminal paper, <em><a href="http://www.cfapubs.org/doi/abs/10.2469/faj.v51.n1.1861" target="_blank">Random Walks In Stock Market Prices</a></em>. </span></p>
<p><span>Despite the entertainment value of these tests, they really don't prove that markets are random at all. All they do is prove that <span>to the human eye</span> market returns, in the absence of any additional information, are indistinguishable from random processes. This conclusion does not, in and of itself, provide any useful information about the random characteristics of markets. Furthermore, the random walk hypothesis itself </span><span>suffers from some shortcomings:</span></p>
<ol>
<li><strong><span><span>It lumps all markets into one </span><span>homogeneous</span><span> bucket and does not differentiate between them.</span></span></strong></li>
<li><strong><span><span>It cannot explain many empirical examples of people who have consistently beaten the market.</span></span></strong></li>
<li><strong><span>It is based on the statistical definition of randomness not the algorithmic definition meaning that,</span></strong>
<ol>
<li><strong><span>It does not distinguish between local and global randomness.</span></strong></li>
<li><strong><span>It does not deal with the idea of the relativity of randomness.</span></strong></li>
</ol>
</li>
</ol>
<p><span>The remainder of this article will explain how elements of the algorithmic definition of randomness namely local versus global randomness and the relativity of randomness could potentially explain the anomaly between the implications of the random walk hypothesis and empirically observed long-term investor market out-performance. It will also compare different markets using the NIST suite of statistical tests for randomness.</span></p>
<p><span>Whether we love it or hate it and regardless of whether it is right or wrong, we cannot deny that the widespread adoption of the random walk hypothesis by quantitative analysts in the industry has lead to major advances in the field of quantitative finance especially for derivative security and structured product valuations.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="randomness"/>Algorithmic vs. Statistical Definitions of Randomness</span></h5>
<p><span>Any function whose outputs are unpredictable is said to be stochastic (random). Similarly, any function whose outputs are</span><span> predictable is said to be deterministic (non-random). To complicate matters, many deterministic functions can appear to be stochastic. For example, most of the random number generators we use when programming are actually deterministic functions whose outputs appear to be stochastic. Most random number generators are not truly random which is why they are labelled either <a href="https://en.wikipedia.org/wiki/Pseudorandom_number_generator" target="_blank">pseudo</a> or <a href="https://en.wikipedia.org/wiki/Low-discrepancy_sequence" target="_blank">quasi random number generators</a>.</span></p>
<p><span>In order to test the validity of the random walk hypothesis we need to determine whether or not the outputs generated by the market (our function) are stochastic or deterministic. In theory there is an algorithmic and a statistical approach to this problem, </span><span>but in practice only the statistical approach is ever used (for good reasons).</span></p>
<p><span>.<em><a href="#outline">Back to the article outline</a></em></span></p>
<h5><span>The Algorithmic Approach</span></h5>
<p><span><a href="https://en.wikipedia.org/wiki/Computability_theory" target="_blank">Computability theory</a>, also known as recursion theory or Turing computability after the late Alan Turing, is a branch of theoretical computer science which deals with the concept of computable and non-computable functions. <a href="https://en.wikipedia.org/wiki/Computable_function" target="_blank">Computable functions</a> can be reasoned about in terms of algorithms, in the sense that a function is computable if, and only if, there exists an algorithm which can replicate that function. In other words there is an algorithm that when given any valid input to the function will always return the correct corresponding output.</span></p>
<p><span>If randomness is the property of unpredictability this means that the output from the function can never be accurately predicted. Logically this then implies that all random processes are non-computable functions because no algorithm which accurately replicates that function could exist. The famous <a href="https://en.wikipedia.org/wiki/Church%E2%80%93Turing_thesis" target="_blank">Church-Turing</a> thesis states that a function is computable if and only if it is computable by a <a href="https://en.wikipedia.org/wiki/Turing_machine" target="_blank">Turing machine</a> (other methods also exist). </span></p>
<p><span>Turing machines are hypothetical devices which work by manipulating an alphabet of symbols on an infinite strip of tape according to a table of rules. Turing machines are able to simulate any algorithm and are therefore, when given an infinite amount of time, are theoretically able to compute any and all computable functions.</span></p>
<p><a href="https://upload.wikimedia.org/wikipedia/en/b/bb/Turing_machine_1.JPG" target="_blank"><img class="aligncenter wp-image-6517 size-full" src="http://www.turingfinance.com/wp-content/uploads/2015/08/1358x830xTuring-Machine.jpg.pagespeed.ic.ZLElnSRsJs.jpg" alt="Turing Machine" srcset="http://www.turingfinance.com/wp-content/uploads/2015/08/Turing-Machine-300x183.jpg 300w, http://www.turingfinance.com/wp-content/uploads/2015/08/Turing-Machine-1024x626.jpg 1024w, http://www.turingfinance.com/wp-content/uploads/2015/08/Turing-Machine-700x428.jpg 700w, http://www.turingfinance.com/wp-content/uploads/2015/08/Turing-Machine.jpg 1358w" sizes="(max-width: 1358px) 100vw, 1358px" pagespeed_url_hash="2986550143"/></a></p>
<p><span>So what? Well, because of <a href="http://www-2.dc.uba.ar/materias/azar/bibliografia/NiesBookWithErrata.pdf" target="_blank">the link between computability and randomness</a> in order to prove or disprove the random walk hypothesis all one would need to do is use a Turing machine to determine whether or not an algorithm which replicates the market (our function) exists. In other words, an algorithm exists for which, when given any valid input, will always return the correct corresponding output ... Alas, nothing in this world is simple because this approach to proving (or disproving) the random walk hypothesis runs headlong into the <a href="https://en.wikipedia.org/wiki/Halting_problem" target="_blank">halting problem</a>. </span></p>
<p><span>The halting problem basically involves determining whether or not a program will halt or if it will continue to run indefinitely. This problem has been proven to be unsolvable, meaning that it is not possible to know up-front whether or not a program will halt. As such, the challenge with using a Turing machine to try and find an algorithm which replicates the stock market is that if the market is actually random no replicating algorithm exists. </span></p>
<p><span>This implies that the Turing machine would need to try every possible algorithm before halting which would literally take forever. As such it is, for all intents and purposes, impossible to prove that the market is truly random. </span></p>
<p><span>Despite this fact these observations</span><span> have given rise to a very interesting field called algorithmic information theory. <a href="https://en.wikipedia.org/wiki/Algorithmic_information_theory" target="_blank">Algorithmic information theory</a> concerns itself with the relationship between computability theory and information theory. Algorithmic information theory defines different types of randomness, the most popular definition is Martin-Löf randomness which asserts that in order for a sequence to be truly random it must,</span></p>
<ul>
<li><span><span><em>Be incompressible</em></span>. Compression involves finding some loss-less representation of the information which uses less information. For example, the infinitely long binary string, 01010101 ..., can be expressed more concisely as 01 repeated infinitely, whereas the infinitely long binary string, 0110000101110110101 ..., has no apparent pattern and therefore cannot be compressed to anything less than the exact same binary string, 0110000101110110101 .... This is equivalent to saying that if the <a href="https://en.wikipedia.org/wiki/Kolmogorov_complexity" target="_blank">Kolmogorov complexity</a> of the string is greater than or equal to the length of the string, then the sequence is algorithmically random. </span></li>
<li><span><span><em>Pass statistical tests for randomness</em></span>. There are many statistical tests for randomness which deal with testing the difference between the distribution of the sequence versus the expected distribution of any sequence which was assumed to be random. This is discussed in more detail in the statistical approach section below. </span></li>
<li><span><span><em>And be impossible to make money off of</em></span>. This is an interesting concept which simply argues that if a set of martingales can be constructed on a sequence which is always expected to succeed, then the sequence is not random. A <a href="https://en.wikipedia.org/wiki/Martingale_(probability_theory)" target="_blank">martingale</a> is a model of a fair game where knowledge of past events never helps predict the mean of the future winnings. One might be tempted to think that the existence of the momentum and mean-reversion anomalies in financial markets must therefore disprove the random walk hypothesis ... well, sort of. The problem with these anomalies is that they are not persistent and tend to break down or exhibit cyclical behaviour. As such, if anything they disprove the local random walk hypothesis (this is introduced below).</span></li>
</ul>
<p><span>Another interesting differentiation made by both the statistical and algorithmic definitions of randomness is local versus global randomness. If a sequence appears random in the long-run it is said to be globally random, despite the fact that finite blocks of the sequence the sequence may appear to be non-random at times. </span></p>
<p><span>For example, the sequence 01010100011010101110000000001... appears to be random, but if we break the sequence up into four blocks [010101][0001101010111][000000000][1...] the first and third blocks do not appear random. As such, the sequence is said to exhibit global randomness but only partial local randomness.</span></p>
<p><span>Relating this distinction back to the random walk hypothesis, we should be able to distinguish between the local and the global random walk hypothesis. The global random walk hypothesis would state that <span><em>in the long run</em></span> markets appear to be random whereas the local random walk hypothesis would state that <span><em>for some minimum period time</em></span> the market will appear to be random. This view of the world is, at least in my opinion, consistent with the empirical observations of anomalies such as the value, momentum, and mean-reversion factors especially when we acknowledge that these factors tend to exhibit cyclical behaviour. In other words, as with the sequence shown earlier, <span><em>markets exhibit global randomness but during finite periods of time local randomness breaks down</em>.</span></span></p>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dashed "/>
<blockquote>
<p><span>Markets exhibit global randomness but local randomness tends to breakdown in some dimensions of time; these breakdowns manifest themselves as anomalies e.g. the value, momentum, and reversion factors.</span></p>
</blockquote>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dashed "/>
<p><span>Unfortunately I have not seen this distinction made anywhere, it is my own opinion on how the empirical observations of individuals beating the market and the random walk hypothesis could be reconciled. Another distinction made by the algorithmic definition of randomness is that  <span>randomness is relative to information</span>. </span></p>
<p><span>In the absence of information many systems may appear random, despite the fact that they are deterministic. In statistics this is known as a confounding variable. A good example of this is a random number generator which only appear random in the absence of the seed being used to produce that random sequence. Another, more interesting example is that market returns might appear to be random on their own, but in the presence of earnings reports and other fundamental indicators, that apparent randomness could break down and become non-random. </span></p>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dashed "/>
<blockquote>
<p><span>In the absence or presence of information markets may appear less or more random i.e. the global and local randomness of the markets is relative to the quality and quantity of available information about the markets. </span></p>
</blockquote>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dashed "/>
<p><span>These two theories are impossible to prove but they are what I personally believe about the markets (in addition to my belief that they are not random, but rather appear random just like many other <a href="https://en.wikipedia.org/wiki/Adaptive_market_hypothesis" target="_blank">complex adaptive systems</a>). The remainder of this article leaves the world of theoretical computer science, information theory, and economics behind and focuses instead on what can realistically be achieved, namely the application of statistical tests for randomness to markets in order to identify potential trading opportunities / attractive markets.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em>.</span></p>
<h5><span>The Statistical Approach</span></h5>
<p><span>A sequence is said to be <a href="https://en.wikipedia.org/wiki/Statistical_randomness" target="_blank">statistically random</a> when it does not exhibit any observable patterns. This does not imply true randomness i.e. unpredictability because most pseudo random number generators, whose output are completely predictable (when given a seed), are said to be statistically random. Generally speaking a sequence is labelled statistically random if it is able to pass a battery of tests for randomness such as the NIST suite. Most of these tests involve testing whether the distribution of outputs produced by the supposedly random system is close enough to the distribution expected from a truly random sequence. Most of these tests are specifically designed to test for uniform randomness, as such they are almost always applied to binary sequences (bit strings).</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<p><span><a id="PyNIST"/>NIST Python Implementation</span></p>
<p><span>This section provides implementation-level details on the Python implementation of the NIST suite of tests for randomness. All of the code can be found in my GitHub repository, <a href="https://github.com/StuartGordonReid/r4nd0m" target="_blank">r4nd0m</a>. In the development process much help was derived from the <a href="http://csrc.nist.gov/groups/ST/toolkit/rng/documents/sts-2.1.2.zip" target="_blank">C implementation of the NIST test suite by NIST</a> as well as an earlier implementation of the NIST test suite in <a href="http://gerhardt.ch/random.php" target="_blank">Python 2.66 by Ilja Gerhardt</a>. Unfortunately I struggled to get Ilja's code to run because of all the changes made between Python 2.66 and Python 3.4 which is another reason why I decided to reimplement.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="structure"/>Project Structure</span></h5>
<p><span>The whole project is broken up into six classes and a main script which pulls everything together. Each class contains standalone code for performing one or more of the functions required to actually apply the NIST suite to historical market returns. The classes in the project include:</span></p>
<ol>
<li><span><a href="https://github.com/StuartGordonReid/r4nd0m/blob/master/r4nd0m.py" target="_blank">r4nd0m</a> - this is the main script which is used to pull everything together.</span></li>
<li><span><a href="https://github.com/StuartGordonReid/r4nd0m/blob/master/SourceCode/RandomnessTests.py" target="_blank">RandomnessTester</a> - this class contains all of the NIST tests. Each test has been implemented in such a way that it is static and can, therefore, be copied out of the class and used elsewhere. Note, however, that some of the tests, depend on the scipy.special, scipy.fftpack, scipy.stats, numpy, os, and copy packages in Python. Also note that the binary matrix rank transformation test depends on the BinaryMatrix class.</span></li>
<li><span>BinaryMatrix - this class encapsulates the algorithm specified in the NIST documentation for calculating the rank of a binary matrix. This is not the same as the SVD method used to compute the rank of a matrix which is why the scipy.linalg package couldn't be used. This class could be more pythonic (pull requests welcome).</span></li>
<li><span><a href="https://github.com/StuartGordonReid/r4nd0m/blob/master/SourceCode/BinaryFrame.py" target="_blank">BinaryFrame</a> - this class, as the name suggests, is just a way of converting a pandas DataFrame to a dictionary of binary strings with the same column names. This dictionary and the decimal to binary conversion methods are encapsulated in this class. RandomnessTester simply takes in a BinaryFrame object and applies all of the NIST tests to each one of the binary strings contained in the dictionary.</span></li>
<li><span><a href="https://github.com/StuartGordonReid/r4nd0m/blob/master/SourceCode/DataDownloader.py" target="_blank">QuandlInterface and Argument</a> - these two classes work together to allow you to interface with the Quandl.com API and download and join lists of datasets. Interesting dataset lists can be found in the MetaData folder of the project and your personal auth token can be stored in a .private.csv local file on your computer. You can find out more about this in the README.MD file for the GitHub repository online.</span></li>
<li><span>Colours - this class just makes things look cool in the console.</span></li>
</ol>
<p><span>The UML diagram below shows how the project is structured (as of 13/09/2015).</span></p>
<p><a href="http://www.turingfinance.com/wp-content/uploads/2015/09/r4nd0m-architecture.png" target="_blank"><img class="aligncenter wp-image-6770 size-large" src="http://www.turingfinance.com/wp-content/uploads/2015/09/620x564xr4nd0m-architecture-1024x932.png.pagespeed.ic.t35aLzC1VP.png" alt="r4nd0m architecture" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/r4nd0m-architecture-300x273.png 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/r4nd0m-architecture-1024x932.png 1024w, http://www.turingfinance.com/wp-content/uploads/2015/09/r4nd0m-architecture-700x637.png 700w" sizes="(max-width: 620px) 100vw, 620px" pagespeed_url_hash="3670793338"/></a></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="encoding"/>Binary Encoding Approach</span></h5>
<p><span><a href="https://en.wikipedia.org/wiki/Discretization_of_continuous_features" target="_blank">Discretization</a> involves converting continuous variables into discrete variables. The most popular discretization approach is binning. <a href="https://en.wikipedia.org/wiki/Data_binning" target="_blank">Binning</a> involves classifying the output from continuous variables into a mutually exclusive set of "bins" each of which represent a possible interval within which the random variable may fall.</span></p>
<p><span>Since we don't know the range of market returns (our continuous variable), we simply bin them into positive returns and negative returns which are represented as a 1 and 0 bit respectively. To avoid bias we add a special case for returns equal to exactly 0.0%, these returns are represented at as both 0 and 1 i.e. 01 bit strings:</span></p>
<p><span><span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM0AAAA9CAAAAAArRbKsAAAKJUlEQVRo3s2b6VtUxxKH/Ys4B8FBNiEkLCoSEFTAJUpEIUzAweAOTxSFiEZQIKiIEEWNBo0xgGAiChii4sY1iriFoIARiLLv894P58ycGZhhhntvzqU+8PRS3ad/U9XVVdXNLNSh8T41vjJLHSyn/DzsYuwenPloGkMdP2kEKLlmBe3OYoBrn2744ILN2Z5tSyweNVSGshN3/qUqmno3x+N66MxIcDxkmeOO6A48dLlcJ26xNdsln6vd0RFy5d3C5IGz3vdURPPazbEIoPvumHO2ZRZ95kUgxRPqLKja73dMKmO+GdDj+r1US/PTQ1yEimiWO6w1FJ0OTcWYPM9ye3XAcgVPnUM9ELZSqvnFAyec21RD84fo+KcRjRXZ/F1bCO1JHq2t4wD05D7iTW6Tsf/E/OW35WKuwztgvY+kaJo0oNqhUjU0hcJHxrI1TSsOcoNdoS7Jyd0AbDzutC+pwLXVhGN+UMkYQKLwDogRALgv7AFqhCzV0OQKoTbRkOYGpBg0rSe+XUgg06vblKVmaWDJOOjM0aSpjOYbYbFtNOlupvumvvSc0CWXexVItcsWVZAovAfWS2geyGgOqodGNJFNzlRoUhQrsNFPL5ei4o2ND6P8z6MT3wMxoiQbMR2oEdXUtDA7ZOMOJHsa6ws+N5Se9xuwrPE/PAKFwhtg7XwABl13AT8LN1VDk2O6bw4BfV93Wd43yV5GGzf75ASGyyEBR0YA2h1PAz5JcKEKIsOB3R5D6slG0bQup3Rgh7h6EtNO12HY4mFwWErEDqnQdjIWoCIkpMLAGrVGT63zS17OdoGyuc0MBaagohWQ0bzUfhoeqS2iITxsIs/mVeGxbbpV4Z8VSfWvI+Vtk//KFeqDFSzQtSw2fWExjOh2A/sXZayIGeL/YgVk5yTG7sG/f/kJ3K4wb3za0KtUOhv+VNOHNrUCEv1y0P7RfmdmVkQwSTbtKwbsHvyz9/tz/ySa/tyJLU9KphyQJ0zUtB77v5aVUPlkWmgep648bAdjc0z4fqA/um1S177TdlmB/4Ta9v02PU3rvyd+ZZtvyP+M/wogoXhy32jY79OyAv9oXuA7wQ78FU7tP/wJtwMsdZZE/I9k82hnwch/iSbBddQ23w7pnF6XZalzzOeBXT70T0u0y45Z4mn3WQ6gW12p2WFzKWMpy2MjjMFzRZh2Wa4JmoCIjur3tqaICgXomyvpVM1b9NWdSm/sNntkc2NuE90eJy3wvNAsBIrmtLzyL7aJZsuSQUrc5BXfc2mg54N8I5ouMTgp68N7CndtlUJjUtNxrcsCbQ7cdAUgI8XlXFya1yvF9EhYTQbWG/t0Dglyac1KIGmBpRV29U0RSZvEqCkH6NOcgnGvvVJLzFIgxc+I5ozDMYiKAAZSewFioxQynAyts88AHJGGrcdh2fhRp0bjV773AHhuMtAorCFP8Ue5qNkPXBRarK01xQaarhSfTR2cc+gCoj6W2txSgSvCEwOaeNdhiA4CngZ1WJvostgIkB4J0JR7y+EWw10A+nGAR05Wl5DvEGhw6R2zgFKH85OZvl0XCSkhmq1bpdjsatTWwUztbvM0WrLPprdAikMfEO0iOTmO6UCVQ7EBTUAksCDIhnsiLXdvpOzAexgSRVvXAjx2tprKmzvnuiEUFg4CZYIFO9Cz0RU6t3h2dOgBxuKahcjaQrHJxDeL/ij5LQAbhF4gWgrX7gh7gCpBjptm9TnnwRunTdBbITmupRcVkvcN0cESmhCpGm40yTdbAH51Bug2GSgnNZ95a64aE0lCpjU0pLmaRmsvtj8WTnNtq+JurPXNHpbLZmjuCmlAlSBntmb1Op+FA5q/6C/eK3mDujiFDCLw2yAZCMkK4JJhvphDIQDNJgN3AowVus+/r6TFhCzraMzyAq9eH3Q2/I4XvoMTc1KGjazx5rJJM5MNwUdo8i6Ayqalmdb0pVMjOT8tLq8B6gQ5uzVweoseYLNlH/+kuEFZBfdFSTbnbOZsYI3xjNqUD8PZvuuMJmebhEbaN42z04CrwrcGNM2R8St+AUafufxtDU2d41Op8PF3AHm+sswK/547ChBoORc+VuixwORcdf8CyHFqt4ZmhxHNiNeX5v0j2b7RNdJGuCzUA8HhUoe3Fjg2u9l4eo71SwnG1BUvrRoBb0OSLgJg3PCL3ywI1AO3/MetDHzqpewbtGFAXCikL5z4pT2uZufNIwfDqLp/GZzBnODQSj0w5P4NDLrn0bssFjYGIf+ZEBF8ePGoxRUNRuRHGSJv/ZK7Zn2hmQCxZ7HDpvHCo4BKt2oIEzebc52KcM7tPrFkTl6tVD+okd21Kw1+Suq9LHhxpR7yvJ/rkwL0tDh5QqtXLtUeFjK3gbeqLHvlc/JDjTr4YPWYSVejW/t5uKSbwrbnC4sUB0arjbkDvL0Sb850tby8vP9KeXn5Q6l+3eD+FP3iacKmLwtOBX6I/mx7J9DwAvgjXhvzq4VorfW+lQVd2GayoR6km27zlbdv8GTXlKGEp3BxUuOPR+10ivVR2yc0/IORdNuun23y6ISEiU0Da+y9EHzv1tA0s/ICk+Obi9X2Dj4S0vLDjEKTa5JVnzad3naqb6bLZhp0Z1o38zMdzbQjaRWzg5UHSkYB+ksnMJ2tA3imiw29be+8PYcPmCRXLh84P6buHcFgZEx9StBf/LFvoZ85z33RE3g172St8Lmd097wL6gJ2Wk84OPqdwR1qJrrzPIdhqU6im4l+E9wN+L2A6keIxx+Y9+sowvS4LFGTgDs9x+BsE2q3nsGJAD73Xoh0d8Sp+28gEI14j3AN1EOWHTAXvcBFWUz6HwQKBMbQec3MeR4bIZmvKGX0YapzFmOI8AqKXoccM4GLonPVURTK2YBZeKxybLJ83MD3SKNVvsOgN1fzCuPS/ZV4Ly9r1ArQLSERgNAlZgN/CgeV9FC1wqZQKlQYEHTzG9x+7VvhJVkOCsprrORCh0BWCeaoLkmZAOXhAI1ZBNmUHVFNn5TRtK3jlaIz+l5NcWs60xlc0092RitgPRIoVTIt7Bv0syjNbZ7GZxlneVww1zTVJSNAc0bJynL8Svo/KeUDQQbHxqVNgO01SnUDJAmaZqUOG2bnQNcEurV9GwCooBktz4Dmhct1vICPZo880m+X6VQAcAN8QrgmQiN7eAfDWxzH1TzvMn5aBBCk5CtQKeL23srmlYpPJOt+pkMy7OOBabCQ81Dmpz9IMt3CBZvVfUN1Mjq5dc/D+5ib5yP9xrt8EDYvDK5Z/PH3uvbdIu8Y+Qb9jRfOW1S2GbtPWj9BzkVAV9BZ2AsDK9acV27+J0KaJodZxvvwKtzy0yzO5nXrYwZNFyNXssNtjbvQFHuM6V2PbdsXO23gxPNrO3BgcdmVkTAa3exyGLHHtu5jrseb3+aWWgMb24n0WPbQ7NibtTPMDTKe+hpU8OOy8w0NPa/VZ/xkbSMR5X/I/g3TpY9bfZbYpcAAAAASUVORK5CYII=" class="tex" alt="b_i=f(r_i)=\begin{cases}1,&amp;\text{if }r_i&gt;0.0\\0,&amp;\text{if }r_i&lt;0.0\\01,&amp;\text{if }r_i=0.0\end{cases}" pagespeed_url_hash="1892925743"/></span></span></p>
<p><span>where <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAAAAABON7DtAAAAqklEQVQY02P4////1x//YYDh/5kss0Ik7v/b+lOQuVP1byFzk+3/IHH/2CcuK14C597W91323mMSjDtV/+j//3keQPYPvzMMEK25riBu5U+G/y4pQJa7G1TxR/3FIKvb//9/MOnef4YflkBT2+y//v8xf0o+0KjEln8bHbf9/3/yblgHkPszPyP/EUjfbdOPIFfBQFvE2R9IXI/Nc/4gcRMXHUVW/Ofr//8Am8zTV12EAh8AAAAASUVORK5CYII=" class="tex" alt="b_i" pagespeed_url_hash="940743474"/></span> represents the bit in the bit string at index <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAOCAAAAAAp9DL5AAAAVElEQVQI12P4DwS/fjOAKO8CMDX9Lpj6/x9O/eqOngikKh922v5n+FH0PygdyPt3z3wTSEmTE0jJb+e2/80M/x8bnl6+kuH/t8Dc9r9Aud9f/v8HAK2URNPQQau2AAAAAElFTkSuQmCC" class="tex" alt="i" pagespeed_url_hash="1988917858"/></span> and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAAAAAAevcqWAAAAiElEQVQI12P4///rDwgGA4b/x2I99tcUBhyD8bO/ulreuK3fBeX/yPlh2fr/z8qfMPkfJ/RPQDWf8v/B8P9/uyXMsLNTgfL/w8P/IwBQvWUblH1y6k8g/5QBVPupw8nLgPyfO6DSGz9ZnQDph4Ppvv9R+GEdR5H5H00/zkTm/4hY+gBF/Q+guwCHm8W9H1aPnQAAAABJRU5ErkJggg==" class="tex" alt="r_i" pagespeed_url_hash="114145593"/></span> represents the return generated by the security being discretized at time <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAOCAAAAAAp9DL5AAAAVElEQVQI12P4DwS/fjOAKO8CMDX9Lpj6/x9O/eqOngikKh922v5n+FH0PygdyPt3z3wTSEmTE0jJb+e2/80M/x8bnl6+kuH/t8Dc9r9Aud9f/v8HAK2URNPQQau2AAAAAElFTkSuQmCC" class="tex" alt="i" pagespeed_url_hash="1988917858"/></span>. If the security goes up as often as it goes down, then the number of zeros and ones in the resulting bit string should be uniformly distributed. This is discussed in more detail in the next section.</span></p>
<p><span>Two additional conversion methods were implemented and tested which involved converting basis points and floating point returns into binary respectively. The problem with these is that they introduce biases which result in even strong cryptographic random number generators failing numerous tests in the suite.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="monobit-test"/>Test 01 - Frequency (Monobit)</span></h5>
<p><span>This test looks at the proportion of 0 bits to 1 bits in a given binary sequence. Assuming the sequence is uniformly distributed this proportion should be close to 1 meaning that the number of 1 bits was approximately equal to the number of 0 bits. In this context, because a 0 bit represents a down day and a 1 bit represents an up day, this test checks whether down and up days on the market are uniformly distributed over time i.e. equally probable.</span></p>
<p><span>A failure of the monobit test may indicate something about the relative profitability of simple buy and hold strategies because, if the market is more likely to go up than down, then simply buying and holding the market is likely to be a profitable trading strategy. This assumes, however, that the average size of an up-day in percentage terms is greater than or equal to the average size of a down-day in percentage terms.</span></p>
<p><span>The Gist below contains a standalone Python method which realizes the monobit test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="https://books.google.co.za/books?hl=en&amp;lr=&amp;id=EnzlBwAAQBAJ&amp;oi=fnd&amp;pg=PR10&amp;dq=Kai+Lai+Chung,+Elementary+Probability+Theory+with+Stochastic+Processes&amp;ots=Dv_CR4QeWx&amp;sig=7v4Nrw2aMLKQth5AAI533YXW8n4" target="_blank">2</a>] Chung, Kai Lai, and Farid AitSahlia. <i>Elementary probability theory: with stochastic processes and an introduction to mathematical finance</i>. Springer Science &amp; Business Media, 2012.</span></p>
<p><span>[<a href="http://siva.bgk.uni-obuda.hu/jegyzetek/Matematika/Fejezetek_a_matematikabol/Erasmus/Probability/SpringerTextsinStatistics.pdf" target="_blank">3</a>] Jim Pitman, Probability. New York: Springer-Verlag, 1993 (especially pp. 93-108). </span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="block-frequency-test"/>Test 02 - Block Frequency Test</span></h5>
<p><span>This test is a generalization of the Monobit test which looks the proportion of 0 bits to 1 bits in <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAAAAAADRMNWAAAArUlEQVQI12P4////38+fPwOp/7+A9HcGIONZRYDhYiC9I8oodR5I4P//ZItwEHUt4f9/sMD3lCLDh0B6yiKowI7+K4b5IIVPoQLV5/4F23z6/z/iH1Qg4e//ZXpz/1/P+g8ReJf2//8PG5f/E+dDBbZMAhLNRntSnkEFai8AiSemWWCrQQKJYLfEm+ZBBS7HgQV2G84HC/yocLapeA1ietyHqAD66PM/EPMnWCEAiZ251tXsJJcAAAAASUVORK5CYII=" class="tex" alt="N" pagespeed_url_hash="110864658"/></span> blocks of size <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAOCAAAAADoc3hVAAAA00lEQVQY02P4////38+fP/+Hgq+fP/9kANLPKhwNd0CELpjZVaxjADOTLKaB6b9ZZi3//4PFvqf4lILFJvcaHoSK7ehPiQTRLyoaLX9AxarPlXiB6JJ3oaH/oWIJfxcbAKklyz6aNUDF3qX9X6X36/+r0n+79fdBxbZM+v/BcPP/mnv/G8z+Q8VqL/z/ajFv84L//0PCYWKJQOxemQ/0hEUzVOxyHJCOt7v0//9+g/1gsR8VzjYVr/+XNf1/UBFuUDEPrA4YAJ///f/zFxwUn78DxQA8U9aZWXdyngAAAABJRU5ErkJggg==" class="tex" alt="M" pagespeed_url_hash="3724288480"/></span> extracted from a given binary sequence. Assuming uniform randomness the number of 0 bits and 1 bits should be approximately <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAAAAAD8VdTPAAABJ0lEQVQoz6XPP0vDQBjH8byjSCwWpWA7FKcKgqCdRETBWqpQh9pVa+nc9gVIi3C4aSPdHfyDmL2ZFHwBORKw8MDXISFyZhJ/yx0fuN/znAUgWkfEibQWLACvWSp8AeDnN5tejMiOHQBwWHAhQf90+Qlg1MuFKQ7d8hiIjgYVUqyHW13gzN9rpygHNBow6cuqm6LfZrDOvCZ+Lkxx6DIu03lkWCHFeshs8a0FcSVWXElg70cklVgwrRWvRYojpn37yotRbpRSwnN88X72/JU/YLiWydQSlcnnfwcl57x7VG19mCgtn2i79G6gu3IPM7tr4MtSHwL7xOyMgNuFu8x02djNrtSpzjPYuZDM8g+XEPRMnJwrpY5HBr7mHcdxnJn5I6211jp59g2sojn6eggUIQAAAABJRU5ErkJggg==" class="tex" alt="\frac{M}{2}" pagespeed_url_hash="3540076078"/></span> per block i.e. each block is filled with, on average, as many 1 bits and 0 bits. In our context this test looks at the probability of up and down days occurring over finite "windows" or periods of time. </span></p>
<p><span>The Gist below contains a standalone Python method which realizes the block frequency test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="http://link.springer.com/chapter/10.1007/3-540-58108-1_23" target="_blank">2</a>] Maclaren, Nick. "Cryptographic Pseudo-random Numbers in Simulation." <i>Fast Software Encryption</i>. Springer Berlin Heidelberg, 1994.</span></p>
<p><span>[3] Knuth, Donald E. "Seminumerical Algorithms, The art of computer programming, Vol. 2." (1981).</span></p>
<p><span>[<a href="https://books.google.co.za/books?id=MtU8uP7XMvoC&amp;lpg=PR5&amp;ots=-ESIOpR6Cl&amp;dq=Milton%20Abramowitz%20and%20Irene%20Stegun%2C%20Handbook%20of%20Mathematical%20Functions%3A%20&amp;lr&amp;pg=PR5#v=onepage&amp;q=Milton%20Abramowitz%20and%20Irene%20Stegun,%20Handbook%20of%20Mathematical%20Functions:&amp;f=false" target="_blank">4</a>] Abramowitz, Milton, and Irene A. Stegun. <i>Handbook of mathematical functions: with formulas, graphs, and mathematical tables</i>. No. 55. Courier Corporation, 1964.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="runs-test"/>Test 03 - Runs Test</span></h5>
<p><span>Arguably the most well known test for randomness, the runs test focusses on the number of runs which appear in a binary sequence. A run is defined as an uninterrupted sequence of identical bits. A run of length <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAOCAAAAAAzyNJ3AAAAfElEQVQI12P4////38//QYDh//8F4YafoMz/tW5/YczgDJiCzyYzYMwd+vf+Lslr+wdk1jn/6zhZZ/kdyAxK77z0/+QWoIL3Zja5FyFqtxteWmu2BMysdf7/373pfxeQGZwOZM7YvuA/w08boGRnSv5foOg3kJav//7/BwB5rW+i2TWDFAAAAABJRU5ErkJggg==" class="tex" alt="k" pagespeed_url_hash="2856509047"/></span> is an uninterrupted sequence of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAOCAAAAAAzyNJ3AAAAfElEQVQI12P4////38//QYDh//8F4YafoMz/tW5/YczgDJiCzyYzYMwd+vf+Lslr+wdk1jn/6zhZZ/kdyAxK77z0/+QWoIL3Zja5FyFqtxteWmu2BMysdf7/373pfxeQGZwOZM7YvuA/w08boGRnSv5foOg3kJav//7/BwB5rW+i2TWDFAAAAABJRU5ErkJggg==" class="tex" alt="k" pagespeed_url_hash="2856509047"/></span> identical bits. The runs test checks whether the number of runs in the sequence is significantly different from what is expected from a sequence under the assumption of uniform randomness. The number of runs also indicates the frequency with which the sequence oscillates between 0 and 1 bits.</span></p>
<p><span>In this context, a run is a sequence of consecutive trading days wherein the market was up or down. As such, performance on this test may imply something about either the momentum or mean reversion anomalies. <a href="http://people.stern.nyu.edu/adamodar/pdfiles/valn2ed/ch6.pdf" target="_blank">Previous academic studies</a> have shown that the market has more runs than expected and therefore the market is said to oscillate more quickly between "up runs" and "down runs" than would be expected from a random sequence. </span></p>
<p><span>The Gist below contains a standalone Python method which realizes the runs test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="ftp://nozdr.ru/biblioteka/kolxo3/M_Mathematics/MV_Probability/MVsa_Statistics%20and%20applications/Gibbons%20J.%20Nonparametric%20statistical%20inference%20(Dekker,%202003)(ISBN%200824740521)(O)(672s)_MVsa_.pdf" target="_blank">2</a>] Gibbons, Jean Dickinson, and Subhabrata Chakraborti. <i>Nonparametric statistical inference</i>. Springer Berlin Heidelberg, 2011.</span></p>
<p><span>[<a href="https://books.google.co.za/books?id=3JSY35Ulig8C&amp;lpg=PR11&amp;ots=re2OWVarHA&amp;dq=Anant%20P.%20Godbole%20and%20Stavros%20G.%20Papastavridis%2C%20(ed)%2C%20Runs%20and%20patterns%20in%20probability&amp;lr&amp;pg=PR11#v=onepage&amp;q=Anant%20P.%20Godbole%20and%20Stavros%20G.%20Papastavridis,%20(ed),%20Runs%20and%20patterns%20in%20probability&amp;f=false" target="_blank">3</a>] Godbole, Anant P., and Stavros G. Papastavridis. <i>Runs and patterns in probability: Selected papers</i>. Vol. 283. Springer Science &amp; Business Media, 1994.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="longest-runs-test"/>Test 04 - Longest Runs (in a block) Test</span></h5>
<p><span>As mentioned in the independent runs test (test 03) a run is any uninterrupted sequence of identical bits. The previous tests looks at the <em>number of runs</em> and checks whether this is statistically significantly different from the expected number of runs from a true random binary sequence. The longest run (of ones in a block) test checks whether the longest run of 1 bits in M-bit blocks is statistically significantly longer (or shorter) than what would be expected from a true random binary sequence. Since a significant difference in the length of the longest run of 1's implies a significant difference in the length of the longest run of 0's only one test is run. </span></p>
<p><span>In this context, this test measures whether or not the number of subsequent up-days in a certain window of time is consistent with what would be produced if market returns were random and generated by a coin flip. A failure of this test may indicate the presence of either momentum or strong mean reversion. Momentum is a property of financial markets which makes the probability of the market having an up day (or down day), given a previous run of up days (or down days) <span>higher</span>. Mean reversion is the opposite - it is a property of financial markets which makes the probability of the market having an up day (or down day), given a previous run of up days (or down days) <span>lower</span>.</span></p>
<p><span>The Gist below contains a standalone Python method which realizes the longest runs test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="binary-matrix-rank-test"/>Test 05 - Binary Matrix Rank Test</span></h5>
<p><span>The Binary Matrix Rank test is quite interesting because it takes the binary sequence and transforms it into a sequence of matrices. The test then works by testing the <a href="https://en.wikipedia.org/wiki/Linear_independence" target="_blank">linear dependence</a> between those matrices. A set of vectors is said to be linearly dependent if one or more of the vectors in the set can be defined as a linear combination of the other vectors. This is related to the concept of dimension, in that if a linearly <em>dependent</em> matrix were added to the set it would not result in any increased dimensionality because it would fall within the span of the previous matrices. For more information on this concept check out the <a href="https://www.khanacademy.org/math/linear-algebra/vectors_and_spaces/linear_independence/v/linear-algebra-introduction-to-linear-independence" target="_blank">Khan Academy videos</a>.</span></p>
<p><span>Relating the concept of linear dependence back to the financial markets context is quite difficult, but let me give it a shot anyway. Each matrix represents a window of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAOCAAAAABrt0FuAAABKElEQVQY022QS0sCYRSGv18UDgxIY4taRTUoJCHZ0IUuormQbqCFQSZEt1VbN21aNZG1cNMi25Xt+gMSNLNuZqpRx6fF50LQd3MO53kPvLyCPvlydFt9NwHg2UHgAssmQDd/KVnH/uVbQPtoY/d4+wKwo1WgkJH8dv4wXTEEbC5BUWkAWLFHDtIBANfjHnWlLDDVdyhr8usrtpruAGBHTqGh1AWzk0BioZepoD3IpRT6hPPRH+GqWUA9kfn315ozVQDiE0ByDuGqBXgaeZP5UwG2fgcQn4Z2uIRgMU9TH/MBihkAO1oDrqZoZZUXBJaR29MNAO5lU9YzEOykttYjriyK8BnDZCR6TdaU12Hc00rSUNZDuY9BfrMSSpoIwHMcpzNo+HMcx+cfA3F1V7zD6B8AAAAASUVORK5CYII=" class="tex" alt="q \times q" pagespeed_url_hash="1079662051"/></span> days wherein the first row of each matrix represents <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAANCAAAAABeaxvaAAAAd0lEQVQI12P4DwS/Pv//94vh//8/rSl5XSUTgKzc+P//ywzPMfzfaHL6//8mm/8M/4PcgCrD4v4zfDHNAWox6wGyjKv+/9+tdx4oG13x/4G3zR8g61lUQZkXUDsDyOT/pv1Q1haD8xBWq7dh8Q0w68unT5/+/AcAMN1YxVuaNNUAAAAASUVORK5CYII=" class="tex" alt="q" pagespeed_url_hash="2234780709"/></span> days. If the first matrix, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAARCAAAAAAN0VjSAAAA70lEQVQY02P4////38+fP/+HAiDzF4TFAMSPK+0Nj0C4ew3dKw8gZP7/j7dYCKZ/pBgugOkGy3zJ8KwD85pbDZ+jyKyZGZ8Eoi+3Z7v9Q5Epup8dADKr4LdT1n8Umfh/s02BVNeJO4bzUGRe5P5fYv7z/+3G//ONnoEEvx6KgsisnvX/keGx/2Xv/+e4g5VP7raAyFTc/v/OYtX8rf//u0KteWQOkUkAYvvq4v//7xnNhcqYgmUOxALZEY5Aj8w1uo8k87PQ1bnw4/+qJf8vFgbZFa4Ayzw2h4UOOnhkgVMGl55pGcZFy7HKfAPG0g8AfMZrIY56Ct8AAAAASUVORK5CYII=" class="tex" alt="M_1" pagespeed_url_hash="586617937"/></span>, were linearly dependent on the next matrix, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAARCAAAAADm5uPRAAABEElEQVQY02P4////38+fP/+HAiDzF5TJAMSPK+0Nj0C4ew3dKw8gSf3/H2+xEEz/SDFcANMPkfqS4VkH5jW3Gj5HlVozMz4JRF9uz3b7hypVdD87AGRcwW+nrP+oUvH/ZpsCqa4TdwznoUq9yP2/xPzn/9uN/+cbPQMJ/ptbGLEKLLV61v9Hhsf+l73/n+MOVj/nxv9zphtAUhW3/7+zWDV/6///rhCr/IP+//fMBUklALF9dfH///eM5oKljhz5/9ekASh1IBbIi3AEemiu0X2YG+a6fmP4WejqXPjxf9WS/xcLg+wKV0BkbifdgwYUOnhR9+3/e6xSf1u///8/H6tUvqmZmdlurFLfgLH2+R8AV0528QabspAAAAAASUVORK5CYII=" class="tex" alt="M_{2}" pagespeed_url_hash="742816356"/></span>, then we would be saying that the returns in the second window can be expressed as a function of the returns in the first window meaning that whether the markets went up or down in <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAARCAAAAAAN0VjSAAAA70lEQVQY02P4////38+fP/+HAiDzF4TFAMSPK+0Nj0C4ew3dKw8gZP7/j7dYCKZ/pBgugOkGy3zJ8KwD85pbDZ+jyKyZGZ8Eoi+3Z7v9Q5Epup8dADKr4LdT1n8Umfh/s02BVNeJO4bzUGRe5P5fYv7z/+3G//ONnoEEvx6KgsisnvX/keGx/2Xv/+e4g5VP7raAyFTc/v/OYtX8rf//u0KteWQOkUkAYvvq4v//7xnNhcqYgmUOxALZEY5Aj8w1uo8k87PQ1bnw4/+qJf8vFgbZFa4Ayzw2h4UOOnhkgVMGl55pGcZFy7HKfAPG0g8AfMZrIY56Ct8AAAAASUVORK5CYII=" class="tex" alt="M_1" pagespeed_url_hash="586617937"/></span> would determine whether or not they went up or down in <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAARCAAAAADm5uPRAAABEElEQVQY02P4////38+fP/+HAiDzF5TJAMSPK+0Nj0C4ew3dKw8gSf3/H2+xEEz/SDFcANMPkfqS4VkH5jW3Gj5HlVozMz4JRF9uz3b7hypVdD87AGRcwW+nrP+oUvH/ZpsCqa4TdwznoUq9yP2/xPzn/9uN/+cbPQMJ/ptbGLEKLLV61v9Hhsf+l73/n+MOVj/nxv9zphtAUhW3/7+zWDV/6///rhCr/IP+//fMBUklALF9dfH///eM5oKljhz5/9ekASh1IBbIi3AEemiu0X2YG+a6fmP4WejqXPjxf9WS/xcLg+wKV0BkbifdgwYUOnhR9+3/e6xSf1u///8/H6tUvqmZmdlurFLfgLH2+R8AV0528QabspAAAAAASUVORK5CYII=" class="tex" alt="M_2" pagespeed_url_hash="2413259746"/></span>. Again this can either relate back to mean-reversion or momentum albeit in a more challenging way.</span></p>
<p><span>The Gist below contains a standalone Python method which realizes the binary matrix rank test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>The Gist below contains a standalone Python class for computing the binary rank of a matrix. It is very similar to the C implementation of the NIST suite and could probably be numpy-fied with some help from my readers.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="http://www.stat.fsu.edu/pub/diehard/" target="_blank" rel="nofollow">2</a>] George Marsaglia, DIEHARD: a battery of tests of randomness. </span></p>
<p><span>[<a href="http://epubs.siam.org/doi/abs/10.1137/1117037?journalCode=tprbau" target="_blank">3</a>] Kovalenko, I. N. "Distribution of the linear rank of a random matrix." <i>Theory of Probability &amp; Its Applications</i> 17.2 (1973): 342-346.</span></p>
<p><span>[<a href="http://www.sciencedirect.com/science/article/pii/0024379585901922" target="_blank">4</a>] Marsaglia, George, and Liang-Huei Tsay. "Matrices and the structure of random number sequences." <i>Linear algebra and its applications</i> 67 (1985): 147-156.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="spectral-test"/>Test 06 - Discrete Fourier Transform Test</span></h5>
<p><span>The Discrete Fourier Transform test, more widely known as the <a href="http://random.mat.sbg.ac.at/tests/theory/spectral/" target="_blank">Spectral test</a>, is one of the best known tests for random number generators. The test was developed by Donald Knuth and was used to identify some of the biggest shortcomings of the popular linear congruential family of pseudo random number generators. This test works by transforming the binary sequence from the time dimension to the frequency dimension using the <a href="https://en.wikipedia.org/wiki/Discrete_Fourier_transform" target="_blank">discrete Fourier transform</a>. Once this has been done the test looks for periodic features (patterns which are near to each other) whose presence would indicate a deviation from true randomness. The image below shows how this test can be used to expose the shortcomings of the aforementioned linear congruential generator family:</span></p>
<div id="attachment_6805" class="wp-caption aligncenter"><a href="https://en.wikipedia.org/wiki/Spectral_test#/media/File:Randu.png" target="_blank"><img class="wp-image-6805 size-large" src="http://www.turingfinance.com/wp-content/uploads/2015/09/620x341xRANDU-LCG-Fail-1024x564.png.pagespeed.ic.s8PS8AQUES.png" alt="RANDU LCG Fail" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/RANDU-LCG-Fail-300x165.png 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/RANDU-LCG-Fail-1024x564.png 1024w, http://www.turingfinance.com/wp-content/uploads/2015/09/RANDU-LCG-Fail-700x386.png 700w, http://www.turingfinance.com/wp-content/uploads/2015/09/RANDU-LCG-Fail.png 1280w" sizes="(max-width: 620px) 100vw, 620px" pagespeed_url_hash="3832235696"/></a><p class="wp-caption-text">The image above shows the hidden lattice structure which existed in the RANDU LCG suite. This suite of random number generators was widely used in the 1960's - https://en.wikipedia.org/wiki/RANDU</p></div>
<p><span>The Gist below contains a standalone Python method which realizes the discrete Fourier transform test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[2] Knuth, D. "The Art of Computer Programming 1: Fundamental Algorithms 2: Seminumerical Algorithms 3: Sorting and Searching." (1968).</span></p>
<p><span>[<a href="http://en.cnki.com.cn/Article_en/CJFDTotal-GDGC2004S1000.htm" target="_blank">3</a>] Yang, Li-juan, Bai-hua Zhang, and Xu-zhen Ye. "Fast Fourier transform and its applications." <i>Opto-Electronic Engineering</i> 31 (2004): 1-7.</span></p>
<p><span>[<a href="http://arxiv.org/pdf/nlin/0401040.pdf" target="_blank">4</a>] Kim, Song-Ju, Ken Umeno, and Akio Hasegawa. "Corrections of the NIST statistical test suite for randomness." <i>arXiv preprint nlin/0401040</i> (2004)</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="non-overlapping-patterns-test"/>Test 07 - Non-overlapping Patterns Test</span></h5>
<p><span>Unlike the previous two tests, the non overlapping and the overlapping patterns tests (tests 07 and 08), are highly applicable to quantitative finance and, in particular, the development of trading strategies. The non-overlapping patterns test concerns itself with the frequency of pre-specified patterns in the binary string. If this frequency is statistically significantly different from what is expected from a true random sequence, this would indicate that the sequence is non-random and the probability of the pattern we are testing for occurring is too high or too low. </span></p>
<p><span>For example lets assume that we believed the market was more likely than a true random sequence to exhibit the following pattern 101100011111 ... namely the <a href="http://www.investopedia.com/articles/technical/04/033104.asp" target="_blank">Fibonacci pattern</a>. We would then use this test and the next test to either accept or reject our hypothesis within a given level of confidence. Fantastic! The reason why I like these two tests is that they give us quantitative analysts a solid theoretical way of testing the significance of presupposed patterns in market returns. These test can be applied to concepts such as the <a href="https://en.wikipedia.org/wiki/Elliott_wave_principle" target="_blank">Elliott Wave Theory</a> and the <a href="http://arxiv.org/abs/1203.4979" target="_blank">Fractal Market Hypothesis</a>. I'm not saying I believe in these things, what I'm saying is we can test for them.</span></p>
<div id="attachment_6814" class="wp-caption aligncenter"><img class="wp-image-6814 size-full" src="http://www.turingfinance.com/wp-content/uploads/2015/09/Fractal-Wave.jpg.pagespeed.ce.joYWLrI5me.jpg" alt="Fractal Wave" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/Fractal-Wave-300x251.jpg 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/Fractal-Wave-700x586.jpg 700w, http://www.turingfinance.com/wp-content/uploads/2015/09/Fractal-Wave.jpg 801w" sizes="(max-width: 801px) 100vw, 801px" pagespeed_url_hash="3492577180"/><p class="wp-caption-text">Testing for "Fractal Waves" just became a whole lot easier.</p></div>
<p><span>The Gist below contains a standalone Python method which realizes the non overlapping patterns test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="http://www.stat.nus.edu.sg/opencms/events/conference/2010_louischen_documents/Barbour.pdf" target="_blank">2</a>] Barbour, Andrew D., Lars Holst, and Svante Janson. <i>Poisson approximation</i>. Oxford: Clarendon Press, 1992.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="overlapping-patterns-test"/>Test 08 - Overlapping Patterns Test</span></h5>
<p><span>The difference between the overlapping patterns test and the non-overlapping patterns test, apart from some of the calculations as can be seen in the NIST suite documentation, is the way that the patterns are tested. In the non overlapping patterns test once a pattern of length <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAAAAACY1YFAAAAAo0lEQVQI1wXBvUpCARgA0O+RgvwpIZdEaGmIhkCjWoOcLnR3h4bId7hBU0s9geAgQRAEGTQ1OVQa4U+WpKdzgumc2Rg/4wWhfVTtNZOT3a+L5HBnJBz/lTefLCt7dyb5azFL3wstFqUzXnNdwe1qn/uVR7LiQJBWcb7xS22fYLuB+gEfxezhMnzmMqy3uMkPT/uhs/bGS+GZ0VZyJSy/YQrzCf9S4nuSPnypgwAAAABJRU5ErkJggg==" class="tex" alt="m" pagespeed_url_hash="1339527553"/></span> has been matched, you skip to the end of the pattern and continue searching, whereas with the overlapping patterns test you continue searching from the next bit. For more of my thoughts on this test, please see the previous test, the <a href="#non-overlapping-patterns-test">non-overlapping patterns test</a>.</span></p>
<p><span>The Gist below contains a standalone Python method which realizes the overlapping patterns test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[2] Chrysaphinou, O., and S. Papastavridis. "A limit theorem on the number of overlapping appearances of a pattern in a sequence of independent trials."<i>Probability Theory and Related Fields</i> 79.1 (1988): 129-143.</span></p>
<p><span>[<a href="http://www.researchgate.net/profile/Toshinobu_Kaneko/publication/220241122_Correction_of_Overlapping_Template_Matching_Test_Included_in_NIST_Randomness_Test_Suite/links/0f31753aad78287b36000000.pdf" target="_blank">3</a>] Hamano, Kenji, and Toshinobu Kaneko. "Correction of overlapping template matching test included in NIST randomness test suite." <i>IEICE transactions on fundamentals of electronics, communications and computer sciences</i> 90.9 (2007): 1788-1792.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="universal-test"/>Test 09 - Universal Test</span></h5>
<p><span>Maurer's universal statistical test is an interesting statistical test which checks whether the distance (measured in bits) between repeating patterns is as would be expected from a uniform random sequence. The theoretical idea behind this test and the linear complexity test is that non-random sequences are not supposed to be compressible. To explain this concept, consider the fact that most pseudo-random number generators <a href="https://en.wikipedia.org/wiki/Linear_congruential_generator#Period_length" target="_blank">have a period</a> and when that period is exhausted the bits in the sequence begin to repeat. When this happens, the distance between matching patterns would decrease and eventually the universal test would deem the sequence non-random. Unfortunately, the test requires a very significant amount of data to be statistically significant. In fact, working with daily returns data we would need about 1500 years worth of daily data before we could apply this test!</span></p>
<p><span>The Gist below contains a standalone Python method which realizes the universal test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="http://lanethames.com/dataStore/ECE/InfoTheory/0337ziv.pdf" target="_blank">2</a>] Ziv, Jacob, and Abraham Lempel. "A universal algorithm for sequential data compression." <i>IEEE Transactions on information theory</i> 23.3 (1977): 337-343.</span></p>
<p><span>[3] Maurer, Ueli M. "A universal statistical test for random bit generators."<i>Advances in Cryptology-CRYPT0’90</i>. Springer Berlin Heidelberg, 1991. 409-420.</span></p>
<p><span>[<a href="http://coron.github.io/jscoron_fr/publications/universal.pdf" target="_blank">4</a>] ebastien Coron, Jean-S., and David Naccache. "AN ACCURATE EVALUATION OF MAURER'S UNIVERSAL TEST."</span></p>
<p><span>[4] Gustafson, Helen, et al. "A computer package for measuring the strength of encryption algorithms." <i>Computers &amp; Security</i> 13.8 (1994): 687-697.</span></p>
<p><span>[5] Ziv, J. "Compression, tests for randomness and estimating the statistical model of an individual sequence." <i>Sequences</i>. Springer New York, 1990.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="linear-complexity-test"/>Test 10 - Linear Complexity Test</span></h5>
<p><span>The linear complexity test is one of the most interesting tests in the NIST suite from a pure Computer Science point of view. Like the universal test, the linear complexity test is concerned with the compressibility of the binary sequence. The linear complexity test aims to check this by approximating a <a href="https://en.wikipedia.org/wiki/Linear_feedback_shift_register" target="_blank">linear feedback shift register</a> (LSFR) for the binary sequence. A <a href="https://en.wikipedia.org/wiki/Shift_register" target="_blank">shift register</a> is a cascade of flip-flops which can be used to store state information. A LSFR is a shift register whose input bit is a linear function of the previous state. </span></p>
<p><span>The linear complexity test works as follows. Firstly, the shortest LSFR is approximated using the <a href="https://en.wikipedia.org/wiki/Berlekamp%E2%80%93Massey_algorithm" target="_blank">Berlekamp–Massey algorithm</a> and then the length of that LSFR is compared against what would be expected from a true uniform random sequence. The thinking here is that if the LSFR is significantly shorter than expected, then the sequence is compressible and therefore non random. The image below shows an LSFR at work.</span></p>
<p><img class="aligncenter size-full wp-image-6826" src="http://www.turingfinance.com/wp-content/uploads/2015/09/LFSR-F4.gif.pagespeed.ce.zz0C6sLmtX.gif" alt="LFSR-F4" pagespeed_url_hash="2622739144"/></p>
<p><span>The Gist below contains a standalone Python method which realizes the linear complexity test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[2] Gustafson, Helen, et al. "A computer package for measuring the strength of encryption algorithms." <i>Computers &amp; Security</i> 13.8 (1994): 687-697.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="serial-test"/>Test 11 - Serial Test</span></h5>
<p><span>The serial test is similar to the overlapping patterns test, except that instead of test for one <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAAAAACY1YFAAAAAo0lEQVQI1wXBvUpCARgA0O+RgvwpIZdEaGmIhkCjWoOcLnR3h4bId7hBU0s9geAgQRAEGTQ1OVQa4U+WpKdzgumc2Rg/4wWhfVTtNZOT3a+L5HBnJBz/lTefLCt7dyb5azFL3wstFqUzXnNdwe1qn/uVR7LiQJBWcb7xS22fYLuB+gEfxezhMnzmMqy3uMkPT/uhs/bGS+GZ0VZyJSy/YQrzCf9S4nuSPnypgwAAAABJRU5ErkJggg==" class="tex" alt="m" pagespeed_url_hash="1339527553"/></span>-bit long sequence it computes every possible <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAAAAACY1YFAAAAAo0lEQVQI1wXBvUpCARgA0O+RgvwpIZdEaGmIhkCjWoOcLnR3h4bId7hBU0s9geAgQRAEGTQ1OVQa4U+WpKdzgumc2Rg/4wWhfVTtNZOT3a+L5HBnJBz/lTefLCt7dyb5azFL3wstFqUzXnNdwe1qn/uVR7LiQJBWcb7xS22fYLuB+gEfxezhMnzmMqy3uMkPT/uhs/bGS+GZ0VZyJSy/YQrzCf9S4nuSPnypgwAAAABJRU5ErkJggg==" class="tex" alt="m" pagespeed_url_hash="1339527553"/></span>-bit long sequence (of which there are <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAAAAAD4L9NiAAAA2klEQVQY02P4DwO/v///9fnf/2/f//9ngIn9m5e0bsWE8k0bUg8hBC8eDGv/f9Xi7v/KeoTgu082l/4v9vv/P3IiSHBRVXzs8f//j9j+/59f8f+dxaMPDP/nrvv/v8b8zP+2+P//3Tf+nxPwZjXDTx+g4E/jtP8RE/4/sXr1v61i4U+G9/pGQBPdnP/v/fn/957///+ufQo0c/5KoKBF8H8kALF9k8FCDMFf7rn/MQSri35iCPa0/f+PLri3D0iXoAqezNq1a9eqTBTBH66GINCDqvITGPxGFgQA6WwiI4dFkX8AAAAASUVORK5CYII=" class="tex" alt="2^{m}" pagespeed_url_hash="3161548702"/></span>), and computes their frequencies. The idea behind this test is that random sequences exhibit uniformity meaning that each pattern should appear approximately as many times as every other pattern. If this is not the case, and some of the patterns appear significantly too few or too many times, then the sequence is deemed non random. In this context we could use the test to identify those patterns which appear "too frequently" and bet on them occurring again.</span></p>
<p><span>The Gist below contains a standalone Python method which realizes the serial test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="https://1988c0fbd715ddc21e4eab393a153f2278df184c.googledrive.com/host/0B8_joYJa2eNzfkNIQ2ZiY1hxS0FlMTI4ZC1IYnRUZ0ttd0NrQlYxcEdMZnFSMnpYZ3ltbUE/v49/2/S030500410002836X.pdf">2</a>] Good, I. J. "The serial test for sampling numbers and other tests for randomness." <i>Mathematical Proceedings of the Cambridge Philosophical Society</i>. Vol. 49. No. 02. Cambridge University Press, 1953.</span></p>
<p><span>[3] Knuth, D. "The Art of Computer Programming 1: Fundamental Algorithms 2: Seminumerical Algorithms 3: Sorting and Searching." (1968).</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="approximate-entropy-test"/>Test 12 - Approximate Entropy</span></h5>
<p><span>Generally speaking, <a href="https://en.wikipedia.org/wiki/Approximate_entropy" target="_blank">an approximate entropy</a> is a statistical technique used to determine how unpredictable (random) fluctuations over time-series data are. The approximate entropy test is similar to the serial test (test 11) in that it also focusses on the frequency of all possible overlapping <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAAAAACY1YFAAAAAo0lEQVQI1wXBvUpCARgA0O+RgvwpIZdEaGmIhkCjWoOcLnR3h4bId7hBU0s9geAgQRAEGTQ1OVQa4U+WpKdzgumc2Rg/4wWhfVTtNZOT3a+L5HBnJBz/lTefLCt7dyb5azFL3wstFqUzXnNdwe1qn/uVR7LiQJBWcb7xS22fYLuB+gEfxezhMnzmMqy3uMkPT/uhs/bGS+GZ0VZyJSy/YQrzCf9S4nuSPnypgwAAAABJRU5ErkJggg==" class="tex" alt="m" pagespeed_url_hash="1339527553"/></span>-bit patterns across the binary sequence. The difference is that this test compares the frequency of overlapping blocks of two consecutive or adjacent lengths (<span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAAAAACY1YFAAAAAo0lEQVQI1wXBvUpCARgA0O+RgvwpIZdEaGmIhkCjWoOcLnR3h4bId7hBU0s9geAgQRAEGTQ1OVQa4U+WpKdzgumc2Rg/4wWhfVTtNZOT3a+L5HBnJBz/lTefLCt7dyb5azFL3wstFqUzXnNdwe1qn/uVR7LiQJBWcb7xS22fYLuB+gEfxezhMnzmMqy3uMkPT/uhs/bGS+GZ0VZyJSy/YQrzCf9S4nuSPnypgwAAAABJRU5ErkJggg==" class="tex" alt="m" pagespeed_url_hash="1339527553"/></span> and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAPCAAAAABc/rkBAAAA/0lEQVQoz2P4Twz4CcQMRKh72+aGT+WZazDW0uosO3wqm6Yj2N32+FQ2I6nsgag8Gx/yfGJhSvb/qYURBX8RZk7DMDPvu6334f8/bdMP/n+kfwYu24CksssWpPJH4SvT9v//v1h0/P9/Vf8WSOL9OyCo6gORX8AqO2zAZv7ZaPzk//8DBnf//++3/gGSCA4CAidXENmAZOb//xWeIA84gpRk4fe7XyGQDk/7//+p8Y7de2CyjZh+f2u+/P//XxZAiXk2Xws/YzOzF6LyoPnz///PmwCd+dytYj1ctnEqPI4KvJ2SCr4z/P/3HsR9ByK+vkMK+RloUYEzjn79RhMAAMcJHYzp0Y4gAAAAAElFTkSuQmCC" class="tex" alt="m+1" pagespeed_url_hash="1558096651"/></span>) against the expected result for a random sequence. To be more specific, the frequencies of all possible <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAKCAAAAACY1YFAAAAAo0lEQVQI1wXBvUpCARgA0O+RgvwpIZdEaGmIhkCjWoOcLnR3h4bId7hBU0s9geAgQRAEGTQ1OVQa4U+WpKdzgumc2Rg/4wWhfVTtNZOT3a+L5HBnJBz/lTefLCt7dyb5azFL3wstFqUzXnNdwe1qn/uVR7LiQJBWcb7xS22fYLuB+gEfxezhMnzmMqy3uMkPT/uhs/bGS+GZ0VZyJSy/YQrzCf9S4nuSPnypgwAAAABJRU5ErkJggg==" class="tex" alt="m" pagespeed_url_hash="1339527553"/></span>-bit and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAATCAAAAAD6unG5AAABgUlEQVQoz2P4DwS//v0nFvz+CyQYgPhF7XeiNd2p/w3W9CH6JTHK/8wsBFF7ssGayubiVvn0G4zVkecTA2YUrABqeuCKx3Hp+xDspGgwdc77F8P/tlw8bkrbg6QpEkJ7HGL477MQxLqZlvVpVWHapP+LiqLnIRQm70aw4yMgdG4pwy+77SBW4WuryKV/X5nXbPi7zwgRMClImhKhNtXFMnwwBDF+FLyzqPz//6NV2///J0yeIPy0F8lWiJ/+b/ZgeA/W9OfZNtOH///vM771/3+nPTjcvEDA2gVETkfRtMWd4YMBhFnrBiSanIFEUC720EuBafJg+GUD9tN//xwgEZz+//89/d3bbsMV7sHipxiG/77g0Htjuuj//0/ms///77b5X/ARpjAVKSASIuGh9781G8TaBfL9IaP7wMhza12DiCe4pu4cO9vsNhDL7SAwRbiBUsSvG6AkfA0k+OD6f6yhBwXgFPG/bD4xaQ8OwGmP2FQOBXuzoPmphvT8RHrOBQDStXH4tkknUAAAAABJRU5ErkJggg==" class="tex" alt="(m+1)" pagespeed_url_hash="1102558981"/></span>-bit frequencies are computed and the Chi-squared statistic is then used to determine whether or not the difference between these two observations implies that the sequence is non-random.</span></p>
<p><span>The Gist below contains a standalone Python method which realizes the approximate entropy test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="http://www.pnas.org/content/93/5/2083.full.pdf" target="_blank">2</a>] Pincus, Steve, and Burton H. Singer. "Randomness and degrees of irregularity."<i>Proceedings of the National Academy of Sciences</i> 93.5 (1996): 2083-2088.</span></p>
<p><span>[<a href="http://www.pnas.org/content/94/8/3513.full?terms" target="_blank">3</a>] Pincus, Steve, and Rudolf E. Kalman. "Not all (possibly)“random” sequences are created equal." <i>Proceedings of the National Academy of Sciences</i> 94.8 (1997): 3513-3518.</span></p>
<p><span>[<a href="http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.45.6174&amp;rep=rep1&amp;type=pdf" target="_blank">4</a>] Rukhin, Andrew L. "Approximate entropy for testing randomness." <i>Journal of Applied Probability</i> 37.1 (2000): 88-100.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="cumulative-sums"/>Test 13 - Cumulative Sums</span></h5>
<p><span>The next three tests (the cumulative sums test, random excursions test, and random excursions variant test) are my personal favourites from the NIST suite because they deal directly with the concept of a random walk. As some of you will know random walks (stochastic processes) are a topic which I <a href="http://www.turingfinance.com/random-walks-down-wall-street-stochastic-processes-in-python/" target="_blank">have written about previously</a> and plan to continue writing about over the next few years as I develop the Mzansi stochastic processes R package.</span></p>
<p><span>The cumulative sums test turns the supposedly random binary sequence into a random walk by replacing each 0-bit with (-1) and each 1-but with (+1) and them calculating the cumulative sum at each point along the sequence. The test then checks whether the absolute maximum cumulative sum at any point along this sequence is within the range of what would be expected from a true uniform random sequence. This process is illustrated below,</span></p>
<p><img class="aligncenter size-full wp-image-6840" src="http://www.turingfinance.com/wp-content/uploads/2015/09/840x538xCumulative-Sums.png.pagespeed.ic.KUdE4_gF26.png" alt="Cumulative Sums" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/Cumulative-Sums-300x192.png 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/Cumulative-Sums-700x448.png 700w, http://www.turingfinance.com/wp-content/uploads/2015/09/Cumulative-Sums.png 840w" sizes="(max-width: 840px) 100vw, 840px" pagespeed_url_hash="4235135093"/></p>
<p><span>Relating this idea back to the markets, if the absolute peaks (which may represent the bottom of bull markets or bear markets) are significantly higher or lower than what would be expected, then this could indicate the presence of various market phenomena including bull and bear markets, cycles, mean-reversion, or momentum. </span></p>
<p><span>The Gist below contains a standalone Python method which realizes the cumulative sums test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[<a href="https://books.google.co.za/books?id=hcveBwAAQBAJ&amp;lpg=PA1&amp;ots=l0om_2PH_D&amp;dq=Principles%20of%20Random%20Walk.%20Princeton&amp;lr&amp;pg=PA1#v=onepage&amp;q=Principles%20of%20Random%20Walk.%20Princeton&amp;f=false" target="_blank">2</a>] Spitzer, Frank. <i>Principles of random walk</i>. Vol. 34. Springer Science &amp; Business Media, 2013.</span></p>
<p><span>[3] Révész, Pál. <i>Random walk in random and non-random environments</i>. Singapore: World Scientific, 2005.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="random-excursions-test"/>Test 14 - Random Excursions</span></h5>
<p><span>As with the <a href="#cumulative-sums" target="_blank">cumulative sums test</a> the random excursions test deals with the concept of a random walk. The difference however, is that the random excursions test introduces the concept of cycles, and states. A cycle is any sub-sequence which starts and ends at 0, and a state is the level of the random walk at each step. The states considered in this test include -4, -3, ..., +3, +4. The test determines whether or not the number of times each state is visited, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAOCAAAAAAzyNJ3AAAAfElEQVQI12P4////38//QYDh//8F4YafoMz/tW5/YczgDJiCzyYzYMwd+vf+Lslr+wdk1jn/6zhZZ/kdyAxK77z0/+QWoIL3Zja5FyFqtxteWmu2BMysdf7/373pfxeQGZwOZM7YvuA/w08boGRnSv5foOg3kJav//7/BwB5rW+i2TWDFAAAAABJRU5ErkJggg==" class="tex" alt="k" pagespeed_url_hash="2856509047"/></span>, in each cycle is as would be expected from a uniform binary sequence. This is illustrated below,</span></p>
<p><a href="http://www.turingfinance.com/wp-content/uploads/2015/09/Random-Excursions-Exaplanation-V.jpeg" target="_blank"><img class="aligncenter wp-image-6847 size-full" src="http://www.turingfinance.com/wp-content/uploads/2015/09/845x344xRandom-Excursions-Exaplanation-V.jpeg.pagespeed.ic.d8r1NbWS_V.jpg" alt="Random Excursions Exaplanation V" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/Random-Excursions-Exaplanation-V-300x122.jpeg 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/Random-Excursions-Exaplanation-V-700x285.jpeg 700w, http://www.turingfinance.com/wp-content/uploads/2015/09/Random-Excursions-Exaplanation-V.jpeg 845w" sizes="(max-width: 845px) 100vw, 845px" pagespeed_url_hash="1505836585"/></a></p>
<p><span>The Gist below contains a standalone Python method which realizes the random excursions test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[2] Baron, Michael, and Andrew L. Rukhin. "Distribution of the number of visits of a random walk." <i>Stochastic Models</i> 15.3 (1999): 593-597.</span></p>
<p><span>[<a href="https://books.google.co.za/books?id=hcveBwAAQBAJ&amp;lpg=PA1&amp;ots=l0om_2PH_D&amp;dq=Principles%20of%20Random%20Walk.%20Princeton&amp;lr&amp;pg=PA1#v=onepage&amp;q=Principles%20of%20Random%20Walk.%20Princeton&amp;f=false" target="_blank">3</a>] Spitzer, Frank. <i>Principles of random walk</i>. Vol. 34. Springer Science &amp; Business Media, 2013.</span></p>
<p><span>[4] Révész, Pál. <i>Random walk in random and non-random environments</i>. Singapore: World Scientific, 2005.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="random-excursions-variant-test"/>Test 15 - Random Excursions Variant</span></h5>
<p><span>The random excursions variant test, as the name suggests, is a variant of the random excursions test which differs in that it does not partition the random walk, and it computes the total number of times the random walk visits a wider random of states extending from -9, -8, ... to ..., +8, +9. As with the previous test, which returns 8 P-values (one for each state), the random excursions variant test returns 18 P-values. </span></p>
<p><span>The Gist below contains a standalone Python method which realizes the random excursions variant test for randomness. It has been tested to 1,000,000 bits on the binary expansions of <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAAAAACsrEBcAAAAXklEQVQI12P4DwS/P//+z/D//4eKhPLo/Qz/P/pl//+/LZ3hf77Vp/8fUpcyfLXwyM+v2PGf4b3hLJD6/wwfDDaC6CMM/4Kn/P//vvwMw/9roXklZVdB5vz79B0oBwC3dT2oJQjzsAAAAABJRU5ErkJggg==" class="tex" alt="e" pagespeed_url_hash="3722999490"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAZUlEQVQI12P4////109g8JXh//9WSxNjIDQJYfg/per9yomfkt9/+sHwe9L//ym3vvgC1QLV/P/h++dEEpS9OOn/kmQo23fa/yWuEPYRg3f/lxh/BLNrE///v2t1Bsz+8wekH4gByPtXvHID7OIAAAAASUVORK5CYII=" class="tex" alt="\pi" pagespeed_url_hash="3421867292"/></span>, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAAA9klEQVQY02P4Dwd/P0HADwaE2MqwUjBYjiSWchnKQIi99/uPIbasDlMs9QqG2PsAEPnoCbLYCqDWhyVNMV7HEWJAW1+Vff//P83iCQOS1nkee/7/36rfBhNbWfv/f79+4v//XwzSGf7P2wNz8Pdlb///32vQxvDXOR4o9MEfZm6e5SOGn0W2f/7/X10PFTpqsgZo7wX9l///J12CCH0JWgVy3w+bhXCtX+IPQ9wcm/N/DVRrG1DoQzlQrNf1X+JFsFD7xH379tXPAoqd17sN0brNSB8EjgPFftikQbR+ewkGf0H+CNK//B8ZgMSa3P5jiP3+hioGADFEd1gi0RHMAAAAAElFTkSuQmCC" class="tex" alt="\sqrt{2}" pagespeed_url_hash="3336385829"/></span>, and <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAXCAAAAADMqisGAAABBklEQVQY02P4Dwf/PkPAVwaE2KrwcjBoRBJLuwplIMQ+Bv3HEFvbgymW9hRD7HMiyOpTu98gia3v/f//ZFF/j1MtQiz82f//oc3//y/V3wUTex0JJBxsf/w/qN8GE5s8AUg8vfv//0Sj0wz/5x4AiUVDbX3pCjTvr3MakPkuHCxyNd89G2jvrxJPIGdqN9SMr7lBnxj+nzN4+/9/7BOY/a9M8hn+/7Be/v9lCIh7wn0ZkLSxANobnP9/ej9IrEu/7P//PzZeQLFGz/+xz0BizyK//v+/w3AqUGyv6b0wiFm78xuqXKaA/PbRMmcizIaHN75CwiDQ+NF/ZAASKwn4jyH26zuqGADjHnc4s2XQAQAAAABJRU5ErkJggg==" class="tex" alt="\sqrt{3}" pagespeed_url_hash="728901071"/></span>.</span></p>

<p><span>For more information about this test, including a fantastic mathematical description of how to calculate it, worked examples, and recommendations on minimum input sizes please see the following references:</span></p>
<p><span>[<a href="http://csrc.nist.gov/publications/nistpubs/800-22-rev1a/SP800-22rev1a.pdf" target="_blank">1</a>] Rukhin, Andrew, et al. <i>A statistical test suite for random and pseudorandom number generators for cryptographic applications</i>. Booz-Allen and Hamilton Inc Mclean Va, 2001.</span></p>
<p><span>[2] Baron, Michael, and Andrew L. Rukhin. "Distribution of the number of visits of a random walk." <i>Stochastic Models</i> 15.3 (1999): 593-597.</span></p>
<p><span>[<a href="https://books.google.co.za/books?id=hcveBwAAQBAJ&amp;lpg=PA1&amp;ots=l0om_2PH_D&amp;dq=Principles%20of%20Random%20Walk.%20Princeton&amp;lr&amp;pg=PA1#v=onepage&amp;q=Principles%20of%20Random%20Walk.%20Princeton&amp;f=false" target="_blank">3</a>] Spitzer, Frank. <i>Principles of random walk</i>. Vol. 34. Springer Science &amp; Business Media, 2013.</span></p>
<p><span>[4] Révész, Pál. <i>Random walk in random and non-random environments</i>. Singapore: World Scientific, 2005.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="qar"/>Walsh–Hadamard Transform</span></h5>
<p><span>Another interesting test not covered by the NIST suite is the Walsh–Hadamard Transform. This test for randomness was written about previously by friend and fellow quant, Pawel Lachowicz, over at <a href="http://www.quantatrisk.com/" target="_blank">QuantAtRisk.com</a>. For more information on this test please see his posts (below) and upcoming book, <em>Python for Quants</em>.</span></p>
<ol>
<li><span><a href="http://www.quantatrisk.com/2015/04/07/walsh-hadamard-transform-python-tests-for-randomness-of-financial-return-series/" target="_blank">Walsh–Hadamard Transform and Tests for Randomness of Financial Return-Series</a></span></li>
<li><span><a href="http://www.quantatrisk.com/2015/04/10/fast-walsh-hadamard-transform-python-matlab/" target="_blank">Fast Walsh–Hadamard Transform in Python</a></span></li>
</ol>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<h3><span><a id="hacking"/>Hacking the Market</span></h3>
<p><span>At this point in this article we have accomplished two things. Firstly, we have touched on the theory of randomness and the random walk hypothesis and, secondly, we have introduced a set of fifteen cryptographic tests which seek to identify non-randomness in binary sequences. These tests look either for biases, runs, patterns, or some combination thereof. Put simply, each one of these characteristics improves the <em>predictability</em> of the sequence and reduces the <em>randomness</em> of the sequence. In information security terms this makes the random number generator being tested less cryptographically secure; and in quantitative finance terms this makes the market more attractive. The final part of this article will see whether or not our tests can do better than humans at picking up random versus non-random sequences and hopefully conclude whether or not markets are really random.</span></p>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="experiment-design"/>Experiment Set-up and Markets Considered</span></h5>
<p><em><span>Whilst many considerations went into the experiments I have run for this blog post, no experiment is perfect and leaves a margin for an incorrect conclusion to be drawn. These issues are discussed in the next section.</span></em></p>
<p><span>Firstly, here are the stock exchange indices I looked at:</span></p>
<ol>
<li><span><a href="https://www.quandl.com/data/BCB/UDJIAD1-Dow-Jones-Industrial-Average" target="_blank">The DJIA Index from 1900 to 2015 (daily) ~ 115 Years</a></span></li>
<li><span><a href="https://www.quandl.com/data/YAHOO/INDEX_GSPC-S-P-500-Index" target="_blank">The S&amp;P 500 Index from 1950 to 2015 (daily) ~ 65 Years</a></span></li>
<li><span><a href="https://www.quandl.com/data/YAHOO/INDEX_HSI-Hang-Seng-Index-Hong-Kong" target="_blank">The Hang Seng Index from 1970 to 2015 (daily) ~ 45 Years</a></span></li>
<li><span><a href="https://www.quandl.com/data/YAHOO/INDEX_SSEC-Shanghai-Composite-Index-China" target="_blank">The Shanghai Composite Index from 1990 to 2015 (daily) ~ 25 Years</a></span></li>
</ol>
<p><span>And in addition to these I looked at some other interesting asset classes:</span></p>
<ol>
<li><span><a href="https://www.quandl.com/data/BUNDESBANK/BBK01_WT5511-Gold-Price-USD?utm_medium=graph&amp;utm_source=quandl" target="_blank">Gold Prices in US Dollars from 1970 to 2015 (daily) ~ 45 Years</a></span></li>
<li><span><a href="https://www.quandl.com/data/CURRFX/USDGBP-Currency-Exchange-Rates-USD-vs-GBP" target="_blank">The Currency Exchange Rates of USD vs GBP from 1990 to 2015 (daily) ~ 25 Years</a></span></li>
<li><span><a href="https://www.quandl.com/data/DOE/RBRTE-Europe-Brent-Crude-Oil-Spot-Price-FOB?utm_medium=graph&amp;utm_source=quandl" target="_blank">Europe Brent Crude Oil Spot Price FOB from 1990 to 2015 (daily) ~ 25 Years</a></span></li>
</ol>
<p><span>Secondly, the NIST test suite works on samples of the original data. As such These returns are discretized and then sliced up into periods. The window period I considered were <strong>3, 5, 7, and 10 year windows</strong>.</span></p>
<p><span>Thirdly there are two ways to produce the windows namely, as overlapping windows or non-overlapping windows. Whilst the former is better because it shows the walk-forward randomness of the market it also affects the quality of the aggregate P-values computed because the windows are not independent. The general procedure used to produce the windows, is shown below and can also be found here in the code:</span></p>
<ol>
<li><span>Download the data from Quandl.com starting on 01-01-YYYY and ending on 01-01-2015</span></li>
<li><span>Use discretization to turn the returns data, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAAAAAAevcqWAAAAoklEQVQI12P4DwSfIADEZADiH8U+hrHFxTEBSyD8//9z9W8ByQX6i6F8d/s/QPKdfiKE/04/CURN16+C8BfrTwGSP90dHkL4efrnP33aGpz4CGqeu2Vxcbr1fJh9EO2tJvegfIj2qfpLoPw8sO3J+luhfIjtrvof/8/8wfD/02X9hE9AAV/9j/di/zP8KC7KLSg+////Tve0pHtQ94LBH5AqAM6Mr+egNP5lAAAAAElFTkSuQmCC" class="tex" alt="R" pagespeed_url_hash="1411967037"/></span>, into a binary sequence, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAAAAAA6I3INAAAAnklEQVQI12P4////388Q8Pv/fwYg91mFo2FpRUWBQ/s/EPf//wCnv0Cy33A/mPvdJB1EbTGsAnN3GM4AUdUmR8DcaoO7QHKFWSXYqP9+5uUVFX42myAmvzNNBlpzzSfgI5i7xXAWSM1Wwx4wt9roFoi707AOzA1wBFseb3waxH1jkQbidZvMBBr1oyLFILyioiI0cP1/kMlQ938HawAAImOWzI1bdRMAAAAASUVORK5CYII=" class="tex" alt="B" pagespeed_url_hash="2870117949"/></span></span></li>
<li><span>Calculate the number of binary digits in the sequence, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAAAAACy3qJfAAAAv0lEQVQY02P4//U/FvDnB8NHTyjzEwT8APOWFTJ8dIVInC+2NSwoLi50yvkJ5C3Jg0v8/+9i/wdIbtJvQ5N4p58Eoj7qe6JJLNaf8h+sowpNIk//FpC85+j4FU3C3Wr5ypUVDjlg5yNJvNOPWrly5XSnxJ9oElArjupXoklArIA6ClnCHewLoEY0HTBfODg8RJb482myfh8woJY4ud/7jyxxvrggt6i4uLh6x5////+jhxUyIE/CA5sEMKJwRS0A80iOrS+qUDUAAAAASUVORK5CYII=" class="tex" alt="|B|" pagespeed_url_hash="2712232114"/></span>.</span></li>
<li><span>Determine the number of years in the sequence (<span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAKCAAAAABHm/tfAAAAdklEQVQI1wXBMQoBABQA0H8kRZLBgGQyuYBVYVGsslFKmZUjOIGyGAxSDA5gYKAIJTzvBY83rzvColba99uN6k2of3KFnV9xIl7dc3rENzsVzJNH1omtoFtCp/wVVJrI966DcEnNOCQ2w1VYZk6otsbC7wmfG3+2bVUhQEJgugAAAABJRU5ErkJggg==" class="tex" alt="n" pagespeed_url_hash="2261237118"/></span>) e.g. <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAKCAAAAABgNXq3AAAAkUlEQVQY02P4///rr///v3/+jwkY/u9PdLvaXJIb8gnM//gaDt4w/M/6Y+d85f8/lylgueIgOAhh+F7xyqzv//+/VvOwmPl/o/HT//9PG1zEJlfhBqTLPf6C+TfPwMFZoJxfHlDMqfF9F0iuMR4Okhj+vzNZCFRucL77OKaZhyxeAumQ/IlY7Pv3DUT/+YTpdwCVPuHuwntIUQAAAABJRU5ErkJggg==" class="tex" alt="n=" pagespeed_url_hash="2736743590"/></span>45 Years</span></li>
<li><span>Specify the length of each window, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAASCAAAAACI8iRUAAADQ0lEQVQ4y52V/U9TVxjH+x9xLbcSlUUqRqZRcFVkogKWKraFblp8Kbqoy8yorwypVkRMvL5sWI2aKZo4JL7E15HolplBSKQTqnHagjdIy20/++H00gurkfj89Hyf85zzOc855z7XxKctFedzTRsHMH0acaChF+L+2grPm3TofPVRpXX9VSF+2KMoiqJ0p8dGnDeBZEt1je8d/BusG5sO5GBFEnDdT2lVVlWEgrkzzPlHUkKUybIsy+a9APz5rUcKATtKoymfLQn47R+BvGp2OByOZiFqvUCveQVcyDktQkd/7e7X9EKrxhKJxIPKtEpGc0IQsVyBYfNF4MyX2SFnijZd6urq+kuoOi8wun4f+HNC6UquZ5LVw4BWGdZ1NOcCnMwdAYpdwNmFYIJf1vUBVxM0nRCMkrARWVeve2sXxnXIveZuY86PxyfcqBSCLRaA5YsnIOeUllLoMf+OtQBgrPBvskBifVuKBtKhoK3pvmddJqXHnvFjUgiqBaRAhyRdKdcyaJwDnYUAv309+fAqxJU+3LOx+lE61PkzfJhzaiJldTuGSjrAYQEoLQBuzdMwxW/G8lph5RoY9QAoheXC/ACDvp0pff6xWY8N8PKluvdAVo2Q82C3ACyzArR5npqgPVclPvsAXGkDUBx/CPtHQHalgPgzYFReBcD47g6gPF9ftyGfKRCnqGQ+wIlvnprAXQzPpLuwdRDgZWFy8nHtA+pntAOyFYABqQwoL9AzFpRMhbTnDgILnECXVcMEbjccyYuj+kSa/afJF+8FvF/cggGzk7eVbahf9QHzvmfE3gJEZ4qDe152Q7/4Ics1UOUQcE484cDc8Gv3rMtqQ396LyW+4amvq98+CJtm93BNykuwV4H9RW+5Lc2MQkQSleyXFhG70yp574TZvFRl85LxzHeSvFSz7cUT18Yn+rKj2+cvttlsu4Xy1AMMbHevdrwEzq76gHaq1l4/BHRUDcFw8VYAEsEqwoFAIBB4iNZYWeN5TQaSrXlGIpFIzNBWDOY0XlntmLGVbsiy1MchRju0ZtJD6PQbxN2dxqGmi1mmN9qn1eoP7eg11LjNuHffe4N4913yf5PfBD3TavWQSnz+T0sD+A8mmhC5W/jUBgAAAABJRU5ErkJggg==" class="tex" alt="w \in \{3, 5, 7, 10\}" pagespeed_url_hash="1990091950"/></span></span></li>
<li><span>Determine how many binary digits are in each window <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAAAiCAAAAACbqrMwAAADuElEQVRIx72W7VNUZRTA71/kuou1FMq+ALEBgUvCAgnrAqLMuEsLWBBkCkOlsxWEGS/mZFb4IcMxNULZCIdhcCQpDSJyJsem0XTZF7aWLnB/fbh7F0122WZ2PV+eM+ec+/zmnOc59zwCCZfV0GOmvxRFSDzOXQ2Az+PxeDweESAzibhLNgAOW9T1zc32584ChiTiRqrktcUA4ErxQ0Yyi1kpr+Y9AKdUV5KLC2fn1fYC0o7clSeS3ZBmDn61li7wRHCt6QMDAy35kyQbJxezcDdAU/o/ycRJCs77dA9At8obbgQpCbjZQzBiAxjaPAdgzRRl3IPXQgnHzZfdh5FKgBY9sNK55Rzh7Nw2McE4qeQicNkGl50Gg9PpLHppAgVHgyt+XLDT3iX9ebU3ZtDF7YRxq6IoiqK4HHYYAP7QB+LF3ck6eUx15mhRSsyoF4+CUsxHxAhA+Zvx4moL+L78Hn0xcfc0c1FwciO8kxcvrqwCgN6YuBPpEsC44zFPPgDTm/3/DxfO7pcpn2yenlp+KKguJ/YmXtWgwHS5+XaffXeV7zOHtTSwbtxdu8FoPwj0pwAz1gZXaQdwydLaZvkcr13n6q7J+Z0ddRuM+czDAo6AwXQesitPEUrrB2Bv9pp4ACi1RrILZr8PPlMX82lumE27AhV7T8/qL2Bq2KBGWU3C0j5/aiNgrIVg6okogSXl8tlpoFvrB46kSrV5ALZCsMpnk10PEBhaR74FIPMVQQq6VT/DLfVXMKa6EQ23U8apoSQN4CPV8NYSgJdVS1iLATDVA1zLWEcKZNyrAhzQAcef8kBjlrz5ondNJAAscnZ9GijeCnBc9XWaBaBOFcJaBEDBBmdHRrsAhVXAnnwQt7Xd7QdwFKzJgoyTb2aPBlpSFwGX2mPJA6jKkNglZ+fY8GZ+KRDQHgOMzTCxafbd0SjFrIhkF9jWDYHnDzKlHYW5ZwdRcL06KSbu5qb7AmOaefhtyzAs6Y68FaUR9Ab7OHSYtTXfcDOn4b3t+4EzuW90vPABXrsh3e4GbqtvrX0zdg7wLXN9JmLqNEkCKzMANwAWrsY51Sa9snJtUnzYbu6JqCdnq78A4wRFZRHbrvbEDqDBYkVbaiL3U2ae8fGxU7F59A8Si1sxjym40e/0IT4shNNdivf1Q4me5td3Lirq/n1QfQDaflJ8ZUsJf6uMdyha7iegG4bW8G31Ny4k4SXmV5SCC9zRTPOj8lsUQ0l6Z8ryQ8359rebzg4+2opJw7EcWOXv4H+M/wJi5lxxcoiewwAAAABJRU5ErkJggg==" class="tex" alt="m = \text{floor}\big(\frac{|B|}{w}\big)" pagespeed_url_hash="841920034"/></span></span></li>
<li><span>Calculate the number of samples, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAAAAACoWZBhAAAAc0lEQVQI12P4////789////8/J/h//9LBQXhG4rTshj+vy779z/c/XuaPcP/npv//7vU/H/wAKjg//97JtuAJJg53/wtmHnvw/8s////961n+GLe+tU1+v+f/M8Mf6JL6i6FFeVfAyr49+nv/7+f/v3/DwDVVE5RsNsaRAAAAABJRU5ErkJggg==" class="tex" alt="x" pagespeed_url_hash="3918029868"/></span>, where:</span>
<ol>
<li><span> <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAAAKCAAAAADDHRxxAAABX0lEQVQoz3WSvUtCYRTG3/8oi8iWSipx6QMKNVKMKCQk0MoKIVIrhyiDoAZdWqIhiprChj7AVQgcsuiDhmhIpPJ2K73e+2sodHn9TQcezvMczjkC0BSdkoKc0hdoiibVdMX4K8qagGwg4Dye8foAtHwNFeDHPZjcD8z3XchsYp4p+HHn6LUL8nMGTtu3t0MHMgM1kgAb6cnWBASHJT7x9EE7nJnumW4XrN9C9wJPT9LRQ6rdAYyNAnzcVVGAGcbtEO2EZ4cAeGw+oR5qawKwrAAcDlU5BXht2YPBCchFBcCOufDf9Zmp8QLAZeMDnDXdyDJ2zAVUcxKSKcHjO75+OD8CyI7U2AVgyWLAVA9hic+aDa5MGZgvi09zTLW6qPjrHN4+Blgj1xGJttUF8YYcqW1ExRVczDqm/ddyG71tF1h1hWQxbx7X7GbYEVyuIDCKOnrRqLtnAOo8IooKqgL8As6lXM3aMqSQAAAAAElFTkSuQmCC" class="tex" alt="x = n - w" pagespeed_url_hash="5130621"/></span> for overlapping samples and</span></li>
<li><span> <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAaCAAAAADtOTFQAAABSElEQVQ4y42TsUsCYRiH7z8qUBpsuKXARZsihJY0206hofAkabmQ1u7KIYRIAoeICh3aIyOkUVA8Q/APUO7gjj54GiQMUnx/8G4P3/fw8ns1licIwPcB0JbTbiXbubgv2ULcGGe2fWpxIV5S+i04CSFOL+pBxpTiTgL8WOtTyfCMCVcJjgIRrvQGlHP9qkxGWQpCp/nrPqgPGNYHAi00aJp38fO8s+4CvNRnGc3D3WPIxfzLtT6AZczSnoc7fUimUf7878+Mvw9oAF7EXmhr/ccbK134RuTeHlLQFeMiEncvehJubaAKPdEi1V7e7KQPcs2FyLvtQthmZCk0mKjpLEjzsZaCYpbW6pugBIfqeB+SNmyOBfhHEHvFi3RhV0kq1tAVDV3hGaJGFtLTeXoW4WUDdgw4lV1TaFxXqqmHmy/hrTIJUNNV/wBzTkAicPQh7wAAAABJRU5ErkJggg==" class="tex" alt="x = \frac{n}{w}" pagespeed_url_hash="1616155193"/></span> for independent samples</span></li>
</ol>
</li>
<li><span>Partition the binary sequence into <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAAAAACoWZBhAAAAc0lEQVQI12P4////789////8/J/h//9LBQXhG4rTshj+vy779z/c/XuaPcP/npv//7vU/H/wAKjg//97JtuAJJg53/wtmHnvw/8s////961n+GLe+tU1+v+f/M8Mf6JL6i6FFeVfAyr49+nv/7+f/v3/DwDVVE5RsNsaRAAAAABJRU5ErkJggg==" class="tex" alt="x" pagespeed_url_hash="3918029868"/></span> samples, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAPCAAAAAD1inGVAAAAlklEQVQI12P4DwY/P//8//83A4j5u6ygonDW9M0gzu+cTUCy1OIliNNUDpI+7vMfxPHqAXEuloI59gnfgeS7s2BOgb5dwuSXQAaI8zbXwkDf9RmE8///r2OlBvkgztfjYH5kKIizcjWYk1kP4hTNArG/uzwBcTzDPv7//yd3Psi0j6nn8ksrUjb8Bxv95///L5//gfUBAE9Lk9q6vAieAAAAAElFTkSuQmCC" class="tex" alt="S" pagespeed_url_hash="944976392"/></span></span></li>
<li><span>Apply each test (40 tests) to each sample, <span class="MathJax_Preview"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAAATCAAAAAASOsSSAAACVklEQVQ4y2P4TwL4+xuHxE8QwQBm3m4t7Pn2+AQBk3433MMhs3M6zKjtydf+no13fQCX2uv+EYuGrP1A4tekSixSE/ohRh2IBjlwjjNCZnspFq8sLQQSjYXuqdh8GH4NbFRMH4h3OBOLkqu14UCwEMT85XURLBSBzaj/s9PBRtk0gzhnF2IqmOjddeXhw4dg3+7xhIhFJmMz6rXtO5BRXuYNJ74jCV+syf4KZsyM/IIQLc6H0OGJcKGTRWk79hfkXQWxvZeDjNpqqadv2QFX8LLsn+liMMv5PpIFUY0QOiwJJnKm/c99k8yP1uB4CG8Bx+DTKQnWRsvA0qXt/7tPnzC+AGIfiUT2gtsuqAfhYVX45f8Nw+P/u8Ex35TOABV+bhsPptc8/v/kfwUkWHZae0EAKNX8d90JdV0KzKjH//9PtfwL5TQCjTo+B8xMyYbb/8N2Ipg+EoHNVQijQLrgSkCuat4AZgaALP2yog2UgEzfLXmHGVYN0GAHh9X3f0Ar//+3a/3/fzokjQDDKjQXxFoEDoH5D+1BVoX9z/kB4s6K+IoUgwUQOgKUGNYbt/7fZ3b5iv7S/w+rwcLeKxi+edfVXntQk/8exD/fCorpvoiq7bB01Q1PV3s9QGRrlo1dbt//HRae/495Ta+bEDEl5xM4Xdm8Y/h59v/tzpZzUKu91oBT60vU1L4AObXDMuT//6/O/v//4BpKakeAA87vNuAsGJYUInEeV6PmwdBraEbNLNr4DHchk3UAzvyS/ABryYAA7yZfIK68+n0dtbya9h/dKIpKUQAZT9wyLKRjTQAAAABJRU5ErkJggg==" class="tex" alt="S_i i \in (1, x)" pagespeed_url_hash="386511824"/></span> and calculate the P-value</span></li>
<li><span>Determine which samples passed. If P-value &lt; 0.005 (99.5% confident) then the sequence is <span>non-random</span></span></li>
<li><span>If the number of samples passed is greater than or equal to 90% then pass the test **</span></li>
<li><span>Calculate the aggregate P-value over all samples using Chi-square test (this isn't used)</span></li>
<li><span>Calculate a "score" for each data set for each window. The score equals the percentage of <span>tests</span> which passed.</span></li>
</ol>
<p><span>** Note that the NIST documentation recommends that 96% of all samples pass in order to pass the test, not 90%. I lowered this requirement (meaning it was easier for the market to look random) because of the relatively low number of samples producible when using the non-overlapping sampling method on the shorter data sets.</span></p>
<p><span>Last, but not least, I included two comparison simulated data-sets. The first data-set is binary numbers produced using the same discretization strategy on the output from the Numpy Mersenne Twister algorithm. The Mersenne Twister is one of the best pseudo-random number generators out there but it is still <span>not cryptographically secure</span>! The second data-set is a binary numbers produced from the SIN function. This really exemplifies how a truly predictable, non-random sequence would perform. These are just benchmarks.</span></p>
<p><span>The results section just includes a tabulated summary of the results for each data set using the two sampling methods. For more detailed outputs go open the code up and play around with it. The output when running the tests in PyCharms (my preferred Python IDE) looks like this (warning spoiler alert!!).</span></p>
<p><span>
<div class="wc-shortcodes-accordion wc-shortcodes-item wc-shortcodes-accordion-default wc-shortcodes-accordion-layout-box" data-behavior="leaveopen" data-start-state="default">
<p><span>

<div class="wc-shortcodes-accordion-content wc-shortcodes-content">
<p><span>Each number represents a P-value. Red P-values are below the threshold 0.005, and green values are above. Each column represents approximately one window in this image of 5 years. The first column after the test name indicates whether the test has passed (PASS!) or failed (FAIL!). The number of tests passed tells us how random a sequence is whereas the types of test failed tell us about potential biases in those sequences.</span></p>
<p><span>As can be seen below almost all of the samples passed all of the tests and the conclusion for each test was a pass because &gt; 90% of the samples passed each test.</span></p>
<p><a href="http://www.turingfinance.com/wp-content/uploads/2015/09/Mersenne.png" target="_blank"><img class="aligncenter wp-image-6878 size-large" src="http://www.turingfinance.com/wp-content/uploads/2015/09/620x334xMersenne-1024x551.png.pagespeed.ic.cir3lMuQIO.jpg" alt="Hacking the Random Walk Hypothesis" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/Mersenne-1024x551.png 1024w, http://www.turingfinance.com/wp-content/uploads/2015/09/Mersenne-700x377.png 700w" sizes="(max-width: 620px) 100vw, 620px" pagespeed_url_hash="3096077321"/></a></p>
<p><span/></p></div>
<p/></span></p>
<p><span>

<div class="wc-shortcodes-accordion-content wc-shortcodes-content">
<p><span>Each number represents a P-value. Red P-values are below the threshold 0.005, and green values are above. Each column represents approximately one window in this image of 5 years. The first column after the test name indicates whether the test has passed (PASS!) or failed (FAIL!). The number of tests passed tells us how random a sequence is whereas the types of test failed tell us about potential biases in those sequences.</span></p>
<p><span>As can be seen below almost all of the samples failed all of the tests and the conclusion for many of the tests was a fail because &lt; 90% of the samples passed each test.</span></p>
<p><a href="http://www.turingfinance.com/wp-content/uploads/2015/09/SIN-Function.png" target="_blank"><img class="aligncenter wp-image-6879 size-large" src="http://www.turingfinance.com/wp-content/uploads/2015/09/620x334xSIN-Function-1024x552.png.pagespeed.ic.Ckqfv7fSIG.jpg" alt="Hacking The Random Walk Hypothesis" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/SIN-Function-300x162.png 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/SIN-Function-1024x552.png 1024w, http://www.turingfinance.com/wp-content/uploads/2015/09/SIN-Function-700x377.png 700w" sizes="(max-width: 620px) 100vw, 620px" pagespeed_url_hash="2729336198"/></a></p>
<p><span/></p></div>
<p/></span></p>
<p><span>

<div class="wc-shortcodes-accordion-content wc-shortcodes-content">
<p><span>Each number represents a P-value. Red P-values are below the threshold 0.005, and green values are above. Each column represents approximately one window in this image of 5 years. The first column after the test name indicates whether the test has passed (PASS!) or failed (FAIL!). The number of tests passed tells us how random a sequence is whereas the types of test failed tell us about potential biases in those sequences.</span></p>
<p><span>As can be seen below quite a few of the samples failed some of the tests and the conclusion for some of the tests was a fail because &lt; 90% of the samples passed each test.</span></p>
<p><a href="http://www.turingfinance.com/wp-content/uploads/2015/09/SP-500.png" target="_blank"><img class="aligncenter wp-image-6880 size-large" src="http://www.turingfinance.com/wp-content/uploads/2015/09/620x343xSP-500-1024x566.png.pagespeed.ic.3qcSmmFZLV.jpg" alt="Hacking The Random Walk Hypthesis" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/SP-500-300x166.png 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/SP-500-1024x566.png 1024w, http://www.turingfinance.com/wp-content/uploads/2015/09/SP-500-700x387.png 700w" sizes="(max-width: 620px) 100vw, 620px" pagespeed_url_hash="3704433701"/></a></p>
<p><span/></p></div>
<p/></span></p>
<p><span/></p></div>
<p/></span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="experiment-flaws"/>Problems with these experiments</span></h5>
<p><span>As I mentioned previously, no experiment is without its flaws. The best we can do as researchers is be transparent, open-source, and honest. So here are some of the problems I have with my own research:</span></p>
<ol>
<li><span>Some of these tests require a lot more data than the market has produced (unless minute or tick data were used) meaning that their statistical significance is less than ideal. More data should be used! - I wish I had more data. If somebody out there has tick data please further my research and <a href="http://www.turingfinance.com/about/contact-details/" target="_blank">get in touch</a>!</span></li>
<li><span>The NIST suite tests only for <span>uniform randomness</span> this does not mean the markets are not normally, or otherwise distributed and still random. This is to some extent true and for die-hard efficient market and random walk hypothesis junkies this argument will certainly help you sleep tonight ;). Personally, I think that these hypotheses are ideological and not real at all. Markets exhibit patterns which these tests are identifying. The simplest of such patterns is a general propensity to go up rather than down.</span></li>
<li><span>Arbitrarily chosen time-periods (starting on the 1st of January of each year) and significance level (0.005). The tests should be applied over a much more robust set of samples which start every month, or quarter (not year) into the future. The P-value didn't have too any impact on the conclusions because whether set to 0.001, 0.005, or 0.05, the market still failed some of the tests during interesting periods e.g. 1954 - 1959.</span></li>
</ol>
<p><span>Now that that is out of the way, let's wrap this up with a summary of results, some conclusions, a list of further research efforts which I would like to see come out of this little project, and my personal news.</span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="results"/>Summary of Results</span></h5>
<p><span><strong>Results obtained for when using non-overlapping samples</strong></span></p>
<p><span>The table below shows the scores computed for each data set, against the scores obtained by the two benchmarks. When the number of samples dropped below 5, no results were recorded. </span></p>
<p><a href="http://www.turingfinance.com/wp-content/uploads/2015/09/Non-Overlapping-Sample-Results.png" target="_blank"><img class="aligncenter wp-image-6898 size-full" src="http://www.turingfinance.com/wp-content/uploads/2015/09/1481x772xNon-Overlapping-Sample-Results.png.pagespeed.ic.vbU2B5yk0U.png" alt="Non Overlapping Sample Results" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/Non-Overlapping-Sample-Results-300x156.png 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/Non-Overlapping-Sample-Results-1024x534.png 1024w, http://www.turingfinance.com/wp-content/uploads/2015/09/Non-Overlapping-Sample-Results-700x365.png 700w, http://www.turingfinance.com/wp-content/uploads/2015/09/Non-Overlapping-Sample-Results.png 1481w" sizes="(max-width: 1481px) 100vw, 1481px" pagespeed_url_hash="2344073930"/></a></p>
<p><span><strong>Results obtained when using overlapping samples</strong></span></p>
<p><span>The table below shows the scores computed for each data set, against the scores obtained by the two benchmarks. </span></p>
<p><a href="http://www.turingfinance.com/wp-content/uploads/2015/09/Overlapping-Results.png" target="_blank"><img class="aligncenter wp-image-6899 size-full" src="http://www.turingfinance.com/wp-content/uploads/2015/09/1482x772xOverlapping-Results.png.pagespeed.ic.K9X54DLEJ5.png" alt="Overlapping Results" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/Overlapping-Results-300x156.png 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/Overlapping-Results-1024x533.png 1024w, http://www.turingfinance.com/wp-content/uploads/2015/09/Overlapping-Results-700x365.png 700w, http://www.turingfinance.com/wp-content/uploads/2015/09/Overlapping-Results.png 1482w" sizes="(max-width: 1482px) 100vw, 1482px" pagespeed_url_hash="4121473473"/></a></p>
<p><span><strong>Observations made from the tables</strong></span></p>
<ol>
<li><span>The scores for the data sets lie between the scores of the two benchmarks meaning that markets are less random than a Mersenne twister and more random than a SIN function, but still not random.</span></li>
<li><span>The scores for the data sets vary quite a lot with,</span>
<ol>
<li><span>Dimension - the size of the window has a big impact in some cases, and</span></li>
<li><span>Uniqueness - markets are not equally random, some appear more random than others.</span></li>
</ol>
</li>
<li><span>The scores for the benchmarks are consistently good for the Mersenne Twister (&gt;90% of tests passed on average) and poor for the SIN graph (10 - 30% of tests passed on average).</span></li>
</ol>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dotted "/>
<h5><span><a id="conclusion"/>Conclusions and Further Research</span></h5>
<p><span>At the beginning of this article I recounted a story of how Professor Burton Malkiel (the author of one of my all-time favourite books, <a href="https://en.wikipedia.org/wiki/A_Random_Walk_Down_Wall_Street" target="_blank">A Random Walk Down Wall Street</a>) presented a random walk constructed from successive coin flips to an unlucky chartist. When the chartist responded with the information that the "stock" was a good buy Professor Malkiel likened the stock market to a coin-flipping contest and advocated a passive buy-and-hold investment strategy. Whilst I have the utmost respect for the professor, I believe that this conclusion was erroneous because all his test really tells us is that, in the eyes of a chartist, there is no distinction between a coin-flipping contest and the market. However, that does not imply that to the eyes, or rather the algorithms, of a Quantitative Trader that there is no distinction between a coin-flipping contest and the market. In this article I have shown that whilst I may not personally (with my own two eyes) be able to tell the difference, the NIST suite of cryptographic tests for randomness sure as hell can. This is because <strong>markets are, quite simply, not random</strong>.</span></p>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dashed "/>
<blockquote>
<p><span>Markets are, quite simply, not random.</span></p>
</blockquote>
<p/><hr class="wc-shortcodes-divider wc-shortcodes-item wc-shortcodes-divider-line-single wc-shortcodes-divider-style-dashed "/>
<p><span>Additionally two slightly more sophisticated conclusions from these results can be drawn:</span></p>
<ol>
<li><span>Assuming randomness is not binary, one could conclude that not all markets are made equally "random". Some of the markets, namely the foreign exchange rate between the USD and GBP currencies and the S&amp;P 500 Index, exhibit much lower levels of randomness than others such as the Hang Seng Index.</span></li>
<li><span>The apparent randomness of the markets, unlike a strong pseudo-random number generator, appear to be affected by time dimension. In other words, certain window sizes cause markets to appear less random. This may indicate the presence of cyclical non-random behaviours in the markets e.g. regimes.</span></li>
</ol>
<p><span>Furthermore, the theoretical discussion and commentary has highlighted some major flaws in the random walk hypothesis; most notably that randomness is <em>relative</em> and in the presence of new or additional information (e.g. fundamental or economic data) the apparent randomness of the market may break down. </span></p>
<p><span>Another positive point about these conclusions is that they are consistent with the empirical evidence of individuals and firms who have been able to consistently beat the market over decades, a feat which would not be possible if markets were in fact random walks. On that high note, allow me end off this article with a link to a much better, <a href="http://www.tilsonfunds.com/superinvestors.html" target="_blank">anecdotal argument by Warren Buffet</a> about the supposed coin-flipping contest he has been winning. </span></p>
<p><span><em><a href="#outline">Back to the article outline</a></em></span></p>
<h3><span><a id="personal"/>A Personal Update</span></h3>
<p><span>As some of you will already know, I have been awarded a fantastic opportunity to work as a Quantitative Strategist at a young Hedge Fund called NMRQL which focusses on applying cutting-edge quantitative and machine learning models to the markets. The fund is being run by <a href="https://www.linkedin.com/profile/view?id=AAkAAAQt3SsBDggptKnpNDgqV50sQJCTP_pS2Cw" target="_blank">Thomas Schlebusch</a> (ex CIO of Sanlam International Investments) and is chaired by Michael Jordaan (ex CEO of First National Bank). I am lucky to be their first code-monkey / quant. Please <a href="http://www.turingfinance.com/about/contact-details/" target="_blank">get in touch</a> with Thomas or myself should you wish to invest in the fund, the minimum investment amount is R1m (one-million-rand). I also now live in Stellenbosch in the heart of the Western Cape winelands.</span></p>
<p><img class="aligncenter wp-image-6889 size-full" src="http://www.turingfinance.com/wp-content/uploads/2015/09/2432x1952xStellenbosch.jpg.pagespeed.ic.Wtk_kf4vm2.jpg" alt="Stellenbosch" srcset="http://www.turingfinance.com/wp-content/uploads/2015/09/Stellenbosch-300x241.jpg 300w, http://www.turingfinance.com/wp-content/uploads/2015/09/Stellenbosch-1024x822.jpg 1024w, http://www.turingfinance.com/wp-content/uploads/2015/09/Stellenbosch-700x562.jpg 700w, http://www.turingfinance.com/wp-content/uploads/2015/09/Stellenbosch.jpg 2432w" sizes="(max-width: 2432px) 100vw, 2432px" pagespeed_url_hash="1789604829"/></p>
<h3><span><a id="disclaimer"/>Software Disclaimer</span></h3>
<p><em>This software was developed by Stuart Reid. Stuart Reid assumes no responsibility whatsoever for its use by other parties, and makes no guarantees, expressed or implied, about its quality, readibility, or any other characteristic. Usage of this implementation should acknowledge this repository, and the original NIST implementation.</em></p>
<p class="clear"/>
 
<p class="clear"/>
<p class="clear"/>
</div>  
</div></body></html>