<html><body><div><div id="content">

            

            
        


            <div class="section">
              <h1>django-database-view 0.1.3</h1>

              


<p>A simple Django app to handle database views.</p>








<p>A simple pluggable application that allows to work with database views.</p>
<p>So far only MySQL is supported as backend, but more could be added if
necessary.</p>
<div id="quick-start">
<h2>Quick start</h2>
<ol>
<li><p>Add “dbview” to your INSTALLED_APPS settings like this:</p>
<pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="o">...</span>
    <span class="s1">'dbview'</span><span class="p">,</span>
<span class="p">)</span>
</pre>
</li>
<li><p>In your models.py create classes which extend dbview.DbView like
this:</p>
<pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">dbview</span> <span class="kn">import</span> <span class="n">DbView</span>

<span class="k">class</span> <span class="nc">ModelA</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">fielda</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">()</span>
    <span class="n">fieldc</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">DbView</span><span class="p">):</span>
    <span class="n">fieldA</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">ModelA</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">db_column</span><span class="o">=</span><span class="s1">'fielda__id'</span><span class="p">)</span>
    <span class="n">fieldB</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">db_column</span><span class="o">=</span><span class="s1">'fieldb'</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">klass</span><span class="p">):</span>
        <span class="sd">'''
        This method returns the SQL string that creates the view, in this
        example fieldB is the result of annotating another column
        '''</span>
        <span class="n">qs</span> <span class="o">=</span> <span class="n">modelA</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span>\
             <span class="n">annotate</span><span class="p">(</span><span class="n">fieldb</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="s1">'fieldc'</span><span class="p">))</span> <span class="o">.</span>\
             <span class="n">annotate</span><span class="p">(</span><span class="n">fielda__id</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">F</span><span class="p">(</span><span class="s1">'pk'</span><span class="p">))</span> <span class="o">.</span>\
             <span class="n">order_by</span><span class="p">(</span><span class="s1">'fielda__id'</span><span class="p">)</span> <span class="o">.</span>\
             <span class="n">values</span><span class="p">(</span><span class="s1">'fielda__id'</span><span class="p">,</span> <span class="s1">'fieldb'</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">qs</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
</pre>
</li>
<li><p>Then create a migration point for your view generation, edit that
migration and modify it, add: <tt>from dbview import CreateView</tt> and
replace the line the call to <tt>migrations.CreateModel</tt> with
<tt>CreateView</tt>.</p>
</li>
<li><p>Migrate your database and start using your database views.</p>
</li>
</ol>
</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>64</span> downloads in the last week
  </li>
  <li>
    <span>464</span> downloads in the last month
  </li>
</ul>









            </div>


          </div>
          </div></body></html>