<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-ipystata" class="anchor" href="#ipystata" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>IPyStata</h1>

<p>Enables the use of Stata together with Python via Jupyter (IPython) notebooks.</p>

<p>Allows the user to write and execute Stata code from within a Jupyter (IPython) Notebook.  See the example notebook below for an illustration of the functionality.</p>

<p><strong>Author:</strong>   Ties de Kok <em>(<a href="mailto:t.c.j.dekok@tilburguniversity.edu">t.c.j.dekok@tilburguniversity.edu</a>)</em><br/>
<strong>Twitter:</strong> <a href="https://twitter.com/TiesdeKok/">@TiesdeKok</a><br/>
<strong>Homepage:</strong>    <a href="https://github.com/TiesdeKok/ipystata">https://github.com/TiesdeKok/ipystata</a><br/>
<strong>PyPi:</strong> <a href="https://pypi.python.org/pypi/ipystata">https://pypi.python.org/pypi/ipystata</a><br/>
<strong>Documentation:</strong> <a href="#basic-instructions"><strong>basic instructions</strong></a> or <a href="http://nbviewer.ipython.org/github/TiesdeKok/ipystata/blob/master/ipystata/Example.ipynb"><strong>example notebook</strong></a><br/>
<a href="https://gitter.im/TiesdeKok/ipystata?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/TiesdeKok/ipystata" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg"/></a></p>

<h4><a id="user-content-want-an-easy-guitool-to-open-these-notebooks-check-out-my-notebook-opener" class="anchor" href="#want-an-easy-guitool-to-open-these-notebooks-check-out-my-notebook-opener" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><strong>Want an easy GUI/Tool to open these notebooks? Check out my <a href="https://github.com/TiesdeKok/NotebookOpener">Notebook Opener</a>!</strong></h4>

<h2><a id="user-content-practical-information" class="anchor" href="#practical-information" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Practical information:</h2>

<h4><a id="user-content-you-can-install-ipystata-023-using" class="anchor" href="#you-can-install-ipystata-023-using" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><strong>You can install IPyStata 0.2.3 using:</strong></h4>

<pre><code>pip install ipystata
</code></pre>

<p><strong>or</strong></p>

<pre><code>pip install git+https://github.com/TiesdeKok/ipystata
</code></pre>

<h4><a id="user-content-you-can-update-a-previous-installation-to-023-using" class="anchor" href="#you-can-update-a-previous-installation-to-023-using" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><strong>You can update a previous installation to 0.2.3 using:</strong></h4>

<pre><code>pip install ipystata --upgrade --force-reinstall
</code></pre>

<h4><a id="user-content-or-you-can-install-ipystata-014-does-not-use-stata-automation-using" class="anchor" href="#or-you-can-install-ipystata-014-does-not-use-stata-automation-using" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><strong>Or you can install IPyStata 0.1.4 (does not use Stata Automation) using:</strong></h4>

<pre><code>pip install ipystata==0.1.4
</code></pre>

<h4><a id="user-content-register-your-stata-instance" class="anchor" href="#register-your-stata-instance" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><strong>Register your Stata instance</strong></h4>

<p>Go to your Stata installation directory and either:</p>

<ul>
<li> Shift + Right-Click --&gt; click "<em>Open command window here</em>"
<strong>or</strong></li>
<li>Open command window (search for "<em>cmd</em>") and type:<br/>
<code>cd C:\Program Files (x86)\Stata14</code>      (Obviously change it to your Stata directory)<br/></li>
</ul>

<p>Look up the name of your Stata executable (e.g. <code>StataMP-64.exe</code>) and in your command window type:<br/>
<code>StataMP-64.exe /Register</code></p>

<p><strong>If you get a com error when using IPyStata it means that the registration was unsuccesful.</strong><br/>
<strong>A potential solution is to run the CMD window as administrator.</strong><br/>
Note that this is independent of IPyStata, if you have done it before there is no need to do it again.<br/>
For more detailed instructions see <a href="http://www.stata.com/automation/#createmsapp">this page</a>.</p>

<h4><a id="user-content-dependencies" class="anchor" href="#dependencies" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><strong>Dependencies</strong></h4>

<p>IPython 3 or 4 (<a href="http://ipython.org/">http://ipython.org/</a>)<br/>
Pandas <strong>0.17.x +</strong> (<a href="http://pandas.pydata.org/">http://pandas.pydata.org/</a>) (I recommend to use a distribution like Anaconda)<br/>
Recent version of Stata (13 / 14 preferably) (<a href="http://www.stata.com/">http://www.stata.com/</a>)  </p>

<h4><a id="user-content-how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><strong>How to use?</strong></h4>

<p>Make sure that you have a registered Stata instance (<a href="#register-your-stata-instance">instructions</a>)!</p>

<p>You can use IPyStata using the <code>%%stata</code> cell magic.
See the <a href="#basic-instructions"><strong>basic instructions</strong></a> below or the <a href="http://nbviewer.ipython.org/github/TiesdeKok/ipystata/blob/master/ipystata/Example.ipynb"><strong>example notebook</strong></a>.</p>

<p>Note that all intermediate files are stored in the ‘.ipython/stata’ directory.
Several options are included to manage your sessions, see the <a href="#session-manager"><strong>session manager</strong></a> section.</p>

<h2><a id="user-content-what-is-new-in-02" class="anchor" href="#what-is-new-in-02" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>What is new in 0.2:</h2>

<p>After a discussion with James Fielder I decided to overhaul my initial code to have it interact with Stata using Automation instead of the batch mode. This approach is inspired by James his Stata-Kernel, check out the awesome early development version here: <a href="https://github.com/jrfiedler/stata-kernel">https://github.com/jrfiedler/stata-kernel</a>.</p>

<blockquote>
<p><strong>Pros:</strong></p>

<ul>
<li>Extra functionality:

<ul>
<li>Persistent Stata sessions. (<em>Just as-if you were using Stata directly!</em>)</li>
<li>Multiple Stata sessions in one notebook.</li>
<li>Allows IPystata to  retrieve macros directly from Stata into Python.</li>
</ul></li>
<li>This approach is more idiomatic as it allows for direct interaction with Stata.</li>
<li>Keeps my Stata magic functionality consistent with the Stata kernel by James Fiedler.</li>
</ul>

<p><strong>Cons:</strong></p>

<ul>
<li>Windows only (Stata Automation is Windows only).</li>
<li>Requires the user to register their Stata client.</li>
<li>Requires recent Stata version (13 / 14).</li>
</ul>

<p><strong>Bug fixes and other improvements:</strong></p>

<ul>
<li>Improved the output display functionality:

<ul>
<li>Loops should now be displayed correctly.</li>
<li>Fixed inconsistent white spaces at the begin / end of output.</li>
</ul></li>
<li>Internal file-handling changed to using absolute paths, working directory functionality is now explicitly included in the -cwd argument.</li>
<li>Package is compatible for both Python 2.7.x and Python 3.x.</li>
<li><strong>Plots are now supported using the <code>-gr</code> or <code>--graph</code> arguments (added in 0.2.1)</strong></li>
<li><strong>Both IPython 3 and IPython 4 are now supported (added in 0.2.2)</strong></li>
<li><strong>Fixed error when replacing dataset in Stata + single item to macro now possible (added in 0.2.3)</strong></li>
</ul>

<p><strong>Todo:</strong></p>

<ul>
<li>Add an option for non-Windows users that uses the batch mode functionality.</li>
<li>Explore the possibilities of asynchronous Stata code execution using different sessions.</li>
<li>Improve Stata syntax highlighting.</li>
</ul>
</blockquote>

<h2><a id="user-content-basic-instructions" class="anchor" href="#basic-instructions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Basic instructions</h2>

<p>For an example of the functionality see the <a href="http://nbviewer.ipython.org/github/TiesdeKok/ipystata/blob/master/ipystata/Example.ipynb"><strong>example notebook</strong></a>.
If you have never done it before, make sure to register your Stata instance (<a href="#register-your-stata-instance"><strong>instructions</strong></a>).</p>

<p>IPyStata is imported and loaded using <code>import ipystata</code>.
A cell with Stata code is defined by the cell magic <code>%%stata</code>.</p>

<p>For example:</p>

<pre><code>In[1]: import ipystata  
In[2]: %%stata  
       display "Hello, I am printed in Stata."  
</code></pre>

<h2><a id="user-content-arguments" class="anchor" href="#arguments" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Arguments</h2>

<p>Define a session to execute the code with (<strong>New in 0.2</strong>):</p>

<pre><code>-s --session
In[1]: %%stata -s session_name
</code></pre>

<p>(Note: if no <code>session</code> argument is provided the main session is used.)</p>

<p>Set your Python working directory to the Stata session (<strong>New in 0.2</strong>):</p>

<pre><code>-cwd --changewd
In[1]: %%stata -cwd
</code></pre>

<p>Send a Pandas dataframe to be used in the Stata session:  </p>

<pre><code>-d --data  
In[1]: %%stata -d dataframe  
</code></pre>

<p>Return the dataset from Stata after code execution and load it into a Pandas dataframe:  </p>

<pre><code>-o --output  
In[1]: %%stata -o dataframe  
</code></pre>

<p>Input Python lists and load them into Stata as macros:  </p>

<pre><code>-i --input  
In[1]: example_list = ['var_1', 'var_2']  
In[2]: %%stata -i example_list  
       display "`example_list'"
</code></pre>

<p>If you want a Stata graph as an output of a IPyStata cell you can use the following argument (<strong>New in 0.2.1</strong>):</p>

<pre><code>-gr --graph  
In[1]: %%stata -gr
</code></pre>

<p>Retrieve user-defined macros from Stata into the following Python dictionary <code>macro_dict</code> (<strong>New in 0.2</strong>):</p>

<pre><code>-gm --getmacro    
In[1]: %%stata -gm macro_1 -gm macro_2  
       local macro_1 item1 item2
       local macro_2 item3 item4
In[2]: macro_dict['macro_1']
In[3]: macro_dict['macro_2']
</code></pre>

<p>Prevents any output from being shown below the cell:  </p>

<pre><code>-np --noprint  
In[1]: %%stata -np  
</code></pre>

<p>For debugging or inspection purposes it is possible to open the Stata window instead of running it quietly:</p>

<pre><code>-os --openstata  
In[1]: %%stata -os  
</code></pre>

<h2><a id="user-content-session-manager" class="anchor" href="#session-manager" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Session manager</h2>

<p>IPyStata 0.2 introduces the possibility to use many different Stata sessions that by default run in the background. In order to avoid using unnecessary system resources several tools and automatic cleanup routines are included.</p>

<h3><a id="user-content-tools" class="anchor" href="#tools" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Tools:</h3>

<p>Display all active Stata sessions:</p>

<pre><code>In[1]: %%stata
       sessions
</code></pre>

<p>Reveal all Stata sessions:</p>

<pre><code>In[1]: %%stata
       reveal all        
</code></pre>

<p>Hide all Stata sessions:</p>

<pre><code>In[1]: %%stata
       hide all      
</code></pre>

<p>Close all Stata sessions initiated by IPyStata:</p>

<pre><code>In[1]: %%stata
       close
</code></pre>

<p>Close all Stata sessions (<strong>Warning! This closes all Stata windows</strong>):</p>

<pre><code>In[1]: %%stata
       close all
</code></pre>

<h3><a id="user-content-automatic-clean-up-routines" class="anchor" href="#automatic-clean-up-routines" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Automatic clean-up routines:</h3>

<ul>
<li>At import/load all Stata sessions initiated by a previous IPyStata import are terminated.</li>
<li>When IPyStata is unloaded it tries to close all Stata sessions that it created.</li>
</ul>

<h2><a id="user-content-syntax-highlighting" class="anchor" href="#syntax-highlighting" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Syntax Highlighting</h2>

<p>Experimental support for Stata syntax highlighting is included. CodeMirror does not have a Stata mode, hence the R mode is modified to accomodate Stata code. Setup instructions are below:</p>

<p>Find your notebook package installation folder. For example:</p>

<p>If you are using IPython 3 go to the folder <code>IPython</code>, for IPython 4 go to the folder <code>notebook</code>:</p>

<pre><code>C:\Users\*User*\AppData\Local\Enthought\Canopy\User\Lib\site-packages\IPython
C:\Users\*User*\Anaconda\Lib\site-packages\IPython

C:\Users\*User*\AppData\Local\Enthought\Canopy\User\Lib\site-packages\notebook
C:\Users\*User*\Anaconda\Lib\site-packages\notebook
</code></pre>

<p>In the <code>IPython</code> folder <strong>(IPython 3 users)</strong> go to the following directory:</p>

<pre><code>\IPython\html\static\components\codemirror\mode
</code></pre>

<p>In the <code>notebook</code> folder <strong>(IPython 4 users)</strong> go to the following directory:</p>

<pre><code>\notebook\static\components\codemirror\mode\
</code></pre>

<p>Create a new folder in the "mode" folder called 'stata'</p>

<pre><code>\IPython\html\static\components\codemirror\mode\stata
</code></pre>

<p><strong>or</strong></p>

<pre><code>\notebook\static\components\codemirror\mode\stata
</code></pre>

<p>Copy <strong>stata.js</strong> from the ipystata folder (see Github) into the newly created 'stata' folder.</p>

<h2><a id="user-content-special-mentions" class="anchor" href="#special-mentions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Special mentions</h2>

<p>This project is inspired by and based on the excelent work of:  </p>



<h2><a id="user-content-disclaimer" class="anchor" href="#disclaimer" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Disclaimer</h2>

<p>This project is not affiliated with or endorsed by Statacorp.</p>
</article>
  </div></body></html>