<html><body><div><div class="post-body entry-content" id="post-body-4494112358752548483" itemprop="articleBody">
<a href="http://1.bp.blogspot.com/-m2zr7uz3jZg/VORThqzDMBI/AAAAAAAACNI/7tEC4Rg9jgA/s1600/elo_alpha.png" imageanchor="1"><img border="0" src="http://1.bp.blogspot.com/-m2zr7uz3jZg/VORThqzDMBI/AAAAAAAACNI/7tEC4Rg9jgA/s1600/elo_alpha.png"/></a><p>If you've ever watched a professional football game (and this is probably true for most professional sports) then you have seen these little portraits of players that appear at the bottom of the screen. On some TV networks they are actually short video clips where the players announce their </p><a href="http://www.palmbeachpost.com/news/sports/football/nfl-players-get-creative-when-they-introduce-thems/nMBHB/#__federated=1" rel="nofollow" target="_blank">alma mater</a><p>, on some networks they are animations where the players each raise their heads and occasionally blink (these creep me out), and for other networks these head-shots are just still photos. Some players </p><a href="http://en.wikipedia.org/wiki/Smile" rel="nofollow" target="_blank">smile</a><p> in their photos, some do not.
</p><p>
Key &amp; Peele have a </p><a href="https://www.youtube.com/watch?v=mDp-ABzpRX8" rel="nofollow" target="_blank">recurring bit</a><p> about this player introduction phenomenon.
</p><p>
While watching a Seahawks game this past year, my mother in law posed an amusing question: </p><b>Do players who smile in their photos play better football?</b>
<b><br/></b><p>
The question is simple and whimsical, in other words perfect. I don't know anything about how often these photos are taken, what the player's mindset is when they're shot, or if there is any prior expectation about attitude/persona and player record. I set out to find some answers...
</p><p>
For this study I am only focusing on </p><a href="http://en.wikipedia.org/wiki/Quarterback" rel="nofollow" target="_blank">Quarter Backs</a><p> (QBs) in American professional footbal (NFL), though it would be easy to extend to all positions if anyone can help me get the data! Right away I know I'll need a few ingredients: photos of each player, some classification of their smiles, and some real stats on their records in the NFL.


</p><a name="more"/>
<h2>
<span>Gathering Data</span></h2><p>
For player stats I used the 2013 season data for all 63 QBs in the NFL </p><a href="http://www.nfl.com/stats/categorystats?tabSeq=1&amp;season=2013&amp;seasonType=REG&amp;d-447263-p=1&amp;statisticPositionCategory=QUARTERBACK&amp;qualified=true" rel="nofollow" target="_blank">here</a><p>. For each player I </p><i>manually</i><p> clicked on their profile and saved their headshot images. This was a bit tedious, as image filenames had to be matched up to player records, and was the main reason I didn't extend this analysis to other positions. With 63 player's images and stats in hand, it was time to write some code!


</p><h2>
<span>Ranking Smiles</span></h2><p>
How do you quantify who is smiling most or least in photos? There are certainly computer vision or machine learning approaches to this problem, but I am not a master of either, and 63 images is not a good training set for such a study. Instead I decided to manually decide who was smiling most/least.
</p><p>
At first I decided to try and sort all 63 photos at once. Sorting 63 things at once turns out to be fairly difficult, and the best approach is to print all the images on paper, lay them on a table, and sort them by hand. This approach is entirely arbitrary, and I don't have a color printer. Plus, humans are much better at "A or B" choices, rather than "rank A thru Z".
</p><p>
Instead, since "Who is smiling more?" is a fairly subjective question, I decided to try an "A or B" approach. I would compare two randomly chosen players, look at their photos side-by-side, and choose who I thought was smiling more. Simple A versus B choices! If these random trails are repeated enough, a total ranking should emerge.
</p><p>
With these "A or B" trials, I could use the </p><a href="http://en.wikipedia.org/wiki/Elo_rating_system" rel="nofollow" target="_blank">Elo rating system</a><p> to assign each player a total score. This rating system is a classic algorithm, and was developed for rating chess player match-ups of different ranks (experts versus novices). In this rating system, when a top-ranked player (or in my case, top-ranked smile) is matched up against a low-ranked player (frown) and wins, the top-rank player only gains a few points. However, if the low-ranked player were to win (an upset), they would gain a lot of points and visa versa.  Variations of this system have been used in sports, video games, and even in choosing baby names.

</p><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container"><tbody>
<tr><td><a href="http://i.imgur.com/jvrvK5W.png" imageanchor="1"><img border="0" src="http://i.imgur.com/jvrvK5W.png"/></a></td></tr>
<tr><td class="tr-caption">One example match-up from my Python script. I would say "B" is smiling more in this case</td></tr>
</tbody></table>
<p>
With my 63 photos in hand, I wrote a small bit of Python code to display random match-ups and save the results. I gathered just over 1000 random match-ups of these 63 QBs. Here is the sorted Elo scores, as a function of win rate. You can see that players who "win" (smiling more) a larger fraction of their "games" (match-ups) generally have a higher Elo rank. This makes good sense!
</p>

<p>
A subtle detail of Elo ranking is that the ranked result depends on the order of match-ups. Thus the player's rating and rank would be different even if each "game" played had the exact same outcome, simply due to the order the games were played.
</p><p>
To explore this, I took the 1000 QB trials and did 1000 re-samplings, randomly shuffling the match-up order, but keeping the outcome of each match the same. For each player I then calculated their median Elo score among all 1k resamples. This median defines their ranking in my analysis. This also produces a </p><a href="http://en.wikipedia.org/wiki/Bootstrapping_(statistics)" rel="nofollow" target="_blank">bootstrapping</a><p>-like uncertainty for the player's Elo score. The average uncertainty is Elo score is +/- 10.5, while the average difference between Elo scores is 9.1. This means that the total ranking should be good to about 1 position for each player.
</p><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container"><tbody>
<tr><td><a href="http://i.imgur.com/m97welh.png" imageanchor="1"><img border="0" src="http://i.imgur.com/m97welh.png"/></a></td></tr>
<tr><td class="tr-caption">Elo score versus final QB rank, with 1000 resamples (blue) and final median score (red).</td></tr>
</tbody></table>


<h2>
<span>The 2013 NFL QB's, Sorted by Smile</span></h2><p>
This is a terrifying and yet beautiful animation.
</p><p>
Watch it while focusing on their mouths, and it's amusing how they transition quickly from Pissed Off grimaces to Indifferent smirks, then to Pleasant smiles, and finally to Thrilled grins. Watch it while focusing on their eyes, which are closely aligned in the photos, and it will haunt your dreams. I am also fascinated by the incredible variety of their head shapes... I'll let you pick your own outliers in that field
</p>


<b>The grumpiest QBs in this dataset were:</b><p> Matt Barkley (Eagles) and Matt Schaub (who played for the Texans in 2013, now for the Raiders).

</p><b>The happiest QBs in this dataset were:</b><p> RG3 (Washington) and Thad Lewis (in 2013 for the Bills, now for the Texans). My boy, Russell Wilson (Seattle) placed a respectable 3rd!
</p><h2>
</h2>
<h2>
<span>Smiles versus QB Records</span></h2><p>
The </p><b>tl;dr</b><p> is that no strong trends appear between smile rating and player statistics. In the next figure you can see some very low-signal "trends", but nothing is significant.  In each panel the smile Elo score goes from left to right, with the happiest person on the right. This shouldn't surprise you, since as I said from the outset this idea is silly.
</p><p>
What is </p><i>more</i><p> interesting are the correlations between the various QB statistics. Here is the "scatter matrix" for these stats. The general trend is that if you're a good QB you're a lot better at most all of these stats. There are also some bimodal or non-linear trends, which are probably due to starting QBs having an opportunity to get, for example, more yards per game (yardsG in this figure).
</p><a href="http://i.imgur.com/Q5CC0H9.png" imageanchor="1"><img border="0" src="http://i.imgur.com/Q5CC0H9.png"/></a>


<h2>
<span>Rolling Out the Big Guns</span></h2><p>
I'll admit, I was a bit disappointed that no obvious trends showed up in the Smiles vs Stats plots. So in a last-ditch attempt to find some correlation I decided to employ a machine learning algorithm. The data were set up perfectly to dump straight in to some pre-fab ML code, where features were the QB stats and the quantity to predict was the smile (Elo) rating.
</p><p>
I'm not a ML expert, so I drew wisdom from an intro to ML that Josh Bloom provided at the </p><a href="http://astrohackweek.github.io/" rel="nofollow" target="_blank">AstroData Hack Week</a><p> last fall. There are many types of ML algorithms, and I don't usually know how to decide between them. Paraphrasing his advice: for most problems, </p><a href="http://en.wikipedia.org/wiki/Random_forest" rel="nofollow" target="_blank">Random Forest</a><p> is the best. (I used RF to do </p><a href="http://astrohackweek.github.io/blog/time-series-rf.html" rel="nofollow" target="_blank">time series forecasting</a><p> as part of the Hack Week in 2014!) So by borrowing liberally from the example Python code that Josh Bloom provided in his ML introduction, I trained a RF on these QB stats and Elo smile ratings.
</p><p>
Here's the resulting residual between the RF </p><i>prediction</i><p> and the Elo smile rating:
</p><p>
Note with so few QBs I didn't split my sample in to train vs test data (tsk tsk), so this is just the prediction based on the exact same data I trained on. The Elo scores span from 1300–1900, while the residuals span -150–100. You can see we're missing a big component here. For clarity, lets just show the prediction versus the median score:
</p><p>
In blue is the 1-to-1 trend of Elo score versus itself. What is interesting is that, despite getting incorrect values for Elo rating, the RF does appear to be able to predict a </p><i>rough </i><p>ordering of smiles based on the stats at all! Of course, the accuracy is not so good, and would only be good to about 40%. Also interesting: the two highest rated (by me) smiles are definitely the highest in the predicted Elo score by the RF!
</p><p>
Another property of the RF is that it tells you how important each feature was in the resulting fit. Here I'm showing the feature importance for all 15 features used in the solution above.
</p>
<p>
The winner was Feature 14, labeled as "rate" in the scatter matrix, also known as </p><a href="http://en.wikipedia.org/wiki/Passer_rating" rel="nofollow" target="_blank">passer rating</a><p>.
</p><p>
So a possible conclusion here:
</p><b>Guys who have a better passer rating might smile more in their picture. </b>
<p>
Perhaps if you have a rookie who is smiling a lot in their official photo, draft them up for fantasy football points!
</p><p>
Now for total honesty: I am deeply skeptical that these features (QB stats) having </p><i>anything </i><p>to do with the labels (smile score). There is a lot machine learning can tell us about football that is useful and interesting. This project is a reminder that machine learning might be able to find subtle and complex correlations, but it cannot guarantee meaning. I would, however, be very interested to see how the smile ratings compare to salary and endorsements...

</p><p>
<b>- - -</b></p>
<p>
If you'd like to check my work, I'll putting some of the code and data for this project on </p><a href="https://github.com/jradavenport/faceball" rel="nofollow" target="_blank">GitHub</a><p>, and I can provide more data on my Elo rankings if anyone is interested! If you are interested in helping me expand this project, or might know how spin up an "A vs B as a Service" app on AWS or Heroku or something, drop me a line!
</p><p>
Thanks to </p><a href="https://jakevdp.github.io/" rel="nofollow" target="_blank">Jake Vanderplas</a><p> and </p><a href="http://treycausey.com/" rel="nofollow" target="_blank">Trey Causey</a><p> who convinced me over beers to finally write this post up!
</p><p/>
</div>
</div></body></html>