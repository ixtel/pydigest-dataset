<html><body><div><div class="content html_format"><p>
      Привет уважаемому сообществу!</p>
<p>
В какой-то момент времени встала потребность перенести базу приложения на django с mysql на postgresql. Первые два захода на эту проблему были неудачными, но позволили разобраться с целостностью данных, искоренить проблемы для </p><code>manage.py syncdb</code><p> и </p><code>manage.py migrate</code><p>.
</p><a name="habracut"/><p>
На первом заходе мы попытались перенести базу через конвертацию sql-простыни в диалект postgresql.</p><p>
На втором заходе мы попытались перенести через </p><code>./manage.py dumpdata</code><p>, но постоянно вылезали ошибки с ключами, невалидными данными (в базе было много ручных правок).
</p><p>
Между вторым и третьим заходом прошло много времени, и последние гугление по проблеме навело меня на </p><a href="http://www.tryolabs.com/Blog/2012/02/10/django-migrating-mysql-postgresql/">эту статью</a><p>. Морально я был уже готов анализировать и разбирать построчно портянки sql/yml весом под гигабайт, были заготовки для этого процесса… и все же я решил попробовать и повестись на простоту процесса. 
</p><p>
Ну и пошло-поехло (все выполнялось в virtualenv, в postgresql была создана пустая база):
</p><pre><code class="bash">$ pip install py-mysql2pgsql
$ py-mysql2pgsql
No configuration file found.
A new file has been initialized at: mysql2pgsql.yml
Please review the configuration and retry...

$ vim mysql2pgsql.yml

$ py-mysql2pgsql -v -f mysql2pgsql.yml

</code></pre>
<p>
Дальше минут 5 ожидания (все делалось в виртуалке, с не очень продвинутой конфигурацией). Пару раз вылетали, с ошибкой </p><i><code>ОШИБКА: нулевое значение в колонке "created" нарушает ограничение NOT NULL</code></i><p>, в моем случае это можно было решить удалением записи в мускульной таблице. 
</p><p>
После проверяем с новой конфигурацией БД: </p><code>manage.py run_gunicorn</code><p> — все запускается без ошибок. Теперь настала пора оптимизации. 
</p><p>
Надеюсь это описание поможет столкнувшимся с похожей проблемой.

      
      </p><p class="clear"/>
    </div>

    
  </div></body></html>