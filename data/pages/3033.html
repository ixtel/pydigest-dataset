<html><body><div><div class="content html_format"><p>
      Начну с пиара другого проекта, который мне очень нравится использовать — pyenv. Это порт rbenv для python, который служит для установки нужных версий python в папку пользователя в недра ~/.pyenv, и активации нужной версии руками или, что более грамотно, через файл .pyenv-version в папке проекта.</p>
<p>
Следуя этой старой доброй традиции обмениваться здравыми идеями с ruby сообществом, я решил портировать идею Bundler (http://bundler.io/), и назвал его Pundle. Это вторая часть рабочего процесса связанного с версиями интерпретаторов и пакетов в руби, и как и первая, достаточно разумна.
</p><p>
Главная идея pundle в том, чтобы не создавать отдельную директорию на каждую комбинацию версий пакетов как в virtualenv, а вместо этого поставить все пакеты в директории типа .pundlerdir/python-version-variant/package-name-2.3.4, и при старте проекта, взяв информацию из frozen.txt, активировать нужные версии пакетов

</p><a name="habracut"/>
<p>
Это плохо работает с пакетами которые пытаются делать всякие хитрости с раскладыванием .pth файлов в site-packages, но отлично работает с нормальными вариантами. А их подавляющее большинство, ну про хитрые есть время придумать как с ними быть.
</p><p>
Итак, поиграемся:

</p><pre>
  &gt; brew install pyenv
  &gt; pyenv install 3.4.1
  &gt; pyenv shell 3.4.1
  &gt; python --version
  Python 3.4.1
</pre>
<p>
Отлично, нужная версия интерпретатора! Вы же уже начали переходить на третью версию чтобы переломить тенденцию к медленному умиранию языка? Тогда следуем дальше, вдохнем больше новизны и создадим файл requirements.txt с содержимым:

</p><pre>
  trafaret &gt; 0.5
  nomad &gt; 1.8
</pre>
<p>
Ну а теперь запустим pundle:

</p><pre>
  &gt; pip install pundle
  ...
  &gt; python -m pundle
  Install some packages
  ... много буков, символов, междометий, медитация
</pre>
<p>
На данном этапе мы поставили пакеты и получили файл frozen.txt.

</p><pre>
  nomad==1.9           # nomad &lt;&lt; requirements file
  opster==4.1          # opster&gt;=4.0 &lt;&lt; nomad &lt;&lt; requirements file
  termcolor==1.1.0     # termcolor &lt;&lt; nomad &lt;&lt; requirements file
  trafaret==0.5.3      # trafaret &lt;&lt; requirements file
</pre>
<p>
Получили два пакета, которые хотели, и пару в нагрузку как зависимости nomad (тоже хорошая </p><a href="http://nomad.readthedocs.org/en/latest/">штука</a><p>, но Саша про нее лучше жгет сам).
</p><p>
Дальше у нас есть два варианта — первый это в файле, которым мы планируем запускать наш проект руками импортировать pundle и попросить его активировать нужные версии проектов.
</p><p>
Я же предпочитаю команду fixate чтобы добавить активацию нужных версий пакетов в usercustomize.py:
</p><pre>
  &gt; python -m pundle fixate
</pre>
<p>
С этого момента мы можем запускать интерпретатор и автоматически иметь доступ к нужным версиям пакетов:

</p><pre>
  &gt; python
  &gt;&gt;&gt; import nomad
  &gt;&gt;&gt; nomad.__version__
  '1.9'
</pre>
<p>
pyenv тут </p><a href="https://github.com/yyuu/pyenv">github.com/yyuu/pyenv</a><p>
pundle тут </p><a href="https://github.com/Deepwalker/pundler">github.com/Deepwalker/pundler</a>
<p>
Использовать надо на машине разработчика, а не при деплоее. На сервере смысла нет в пяти питонах и в семи джанго.
</p><p>
Я с удовольствием использую оба проекта в реальной работе, и мне очень нравится не возиться с virtualenv и версиями интерпретатора. Но мне немного скучно использовать pundle одному, поэтому я взялся за пиар и приглашаю всех изменить рабочий процесс современного питонера на новый и продвинутый.

      
      </p><p class="clear"/>
    </div>

    
  </div></body></html>