<html><body><div><div class="section">
              <h1>django-tree 0.1.0</h1>

              


<p>Fast and easy tree structures.</p>








<p>Fast and easy tree structures.</p>
<p><strong>In alpha, it can’t be used yet in production.</strong></p>
<p>This tool works in a very similar way to <strong>django-mptt</strong>
and <strong>django-treebeard</strong>, however it’s so different in conception
that it was better and faster to start from scratch
than to rewrite the existing solutions.</p>
<p>Compared to these solutions, django-tree aims to have these advantages
(some of them are already there):</p>
<ul>
<li>less intrusive (no more inheriting issues
due to Model, Manager &amp; Queryset subclasses)</li>
<li>easier to install</li>
<li>easier to use</li>
<li>more complete</li>
<li>minimalist (less code, less database fields)</li>
<li>bug-free</li>
<li>safe (thanks to database constraints)</li>
<li>faster for all operations</li>
</ul>
<p>However, there is nothing groundbreaking here: this is only the result of
a proper use of the latest Django improvements, combined with a good knowledge
of SQL.</p>
<div id="installation">
<h2>Installation</h2>
<p>Django-tree requires Django 1.8 or 1.9 and Python 3.
For the moment, django-tree is only for PostgreSQL because it uses a specific
data type not available in other databases. It will be adapted to also use
a standard text field in the future for other databases, but it will be slower.</p>
<p>After installing the module, you need to add <cite>‘tree’,</cite> to your
<cite>INSTALLED_APPS</cite>, then add a <cite>PathField</cite> to a model with a
<cite>ForeignKey(‘self’)</cite>, typically named <cite>parent</cite> (use the <cite>parent_field</cite>
argument of <cite>PathField</cite> if the field has another name).
This should give you something like this:</p>
<pre><span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Model</span><span class="p">,</span> <span class="n">CharField</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">BooleanField</span>
<span class="kn">from</span> <span class="nn">tree.fields</span> <span class="kn">import</span> <span class="n">PathField</span>

<span class="k">class</span> <span class="nc">YourModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">'self'</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">PathField</span><span class="p">(</span><span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">public</span> <span class="o">=</span> <span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre>
<p>However, the model above is not ordered. The children of a same parent will be
ordered by primary key. You can specify how children are ordered using the
<cite>order_by</cite> argument of <cite>PathField</cite>. If needed, you can add a field for users
to explicitly order these objects. Example:</p>
<pre><span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Model</span><span class="p">,</span> <span class="n">CharField</span><span class="p">,</span> <span class="n">ForeignKey</span><span class="p">,</span> <span class="n">IntegerField</span><span class="p">,</span> <span class="n">BooleanField</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">tree.fields</span> <span class="kn">import</span> <span class="n">PathField</span>

<span class="k">class</span> <span class="nc">YourModel</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">parent</span> <span class="o">=</span> <span class="n">ForeignKey</span><span class="p">(</span><span class="s1">'self'</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">position</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">PathField</span><span class="p">(</span><span class="n">order_by</span><span class="o">=</span><span class="p">(</span><span class="s1">'position'</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">),</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">public</span> <span class="o">=</span> <span class="n">BooleanField</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre>
<p>Here, the children of a same parent will be ordered by position, and then
by name if the position is the same.</p>
</div>
<div id="usage">
<h2>Usage</h2>
<p>A <cite>PathField</cite> is an automatic field, you don’t need to set, modify, or even see
its value once it is installed. But you can use the <cite>Path</cite> object it returns to
get tree information about the current instance, or make complex queries
on the whole tree structure. Example to show you most of the possibilities:</p>
<pre><span class="n">obj</span> <span class="o">=</span> <span class="n">YourModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">rebuild_tree</span><span class="p">()</span>  <span class="c1"># Rebuilds the whole tree,</span>
                         <span class="c1"># typically useful after a major migration.</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">level</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">is_root</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">is_leaf</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_children</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">public</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_ancestors</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_ancestors</span><span class="p">(</span><span class="n">include_self</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_descendants</span><span class="p">(</span><span class="n">include_self</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_siblings</span><span class="p">()</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_prev_sibling</span><span class="p">()</span>  <span class="c1"># Fetches the previous sibling.</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_next_sibling</span><span class="p">()</span>
<span class="c1"># Same as `get_prev_sibling`, except that we get the first public one.</span>
<span class="n">obj</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">get_prev_siblings</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">public</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</pre>
<p>There is also a bunch of less useful lookups, transforms and functions
available. They will be documented with examples in the future.</p>
</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>0</span> downloads in the last week
  </li>
  <li>
    <span>0</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>