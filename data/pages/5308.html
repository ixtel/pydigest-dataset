<html><body><div><div class="content html_format"><p>
      Я хотел бы рассказать вам об утилите, с которой вы сможете забыть о боли создания документации для Web API. О том как это сделать прошу всех под кат.</p>

<img src="https://habrastorage.org/files/7ae/9e5/4df/7ae9e54df92d431baa27e54d77bd64f3.png"/>
<a name="habracut"/><p>
Итак, добро пожаловать под кат, {username}! Ты возможно спросишь с помощью чего так красиво получается? Ответ: apiDoc. Что еще за apiDoc? apiDoc — это утилита для генерации документации основываясь на комментариях в коде. Но с одной оговоркой, эти комментарии должны быть определенного вида. Можно создавать документацию для проектов на: C#, Dart, Erlang, Go, Java, Javascript, PHP, Python, Ruby, Perl и прочих. Но в этой статье я расскажу как сделать такую красивую документацию на основе проекта на Python.
</p><p>
Для этого вам понадобится:

</p><ul>
<li>Node.js(с npm)</li>
<li>Проект который нужно задокументировать</li>
<li>Немного свободного времени</li>
</ul>
<h2>Установка Node.js</h2><p>
Те у кого установлен пакет с Node.js, пропустите данный пункт но убедитесь что у вас работает npm. А остальные должны скачать с сайта </p><a href="https://nodejs.org">nodejs.org</a><p> инсталлятор и установить его. Проследите чтобы Node.js попал в переменную $PATH. Пример установщика для Mac OS X:

</p><img src="https://habrastorage.org/files/974/1ff/9e3/9741ff9e316a416da34a6891c847d9fd.png"/>

<h2>Установка apiDoc</h2><p>
Надеюсь все справились с установкой Node.JS и мы можем перейти далее. Для установки apiDoc откройте терминал (командную строку в Windows) и запустите команду:

</p><pre><code class="bash">sudo npm install -g apidoc</code></pre><p>
И на выходе вы должны получить что-то вроде этого.

</p><img src="https://habrastorage.org/files/f51/212/468/f512124685db4fffbc81c55c14978d26.png"/>

<h2>Подготовка к созданию документации</h2> <p>
Ну вот мы и добрались до создания документации. Для того чтобы сгенерировать документацию необходимо сделать комментарии в коде. Вот пример комментария в коде.

</p><pre><code class="python">"""
@api {get} /2/get_news?offset=:offset&amp;count=:count Получение новостей
@apiName GetNews
@apiGroup News
@apiVersion 0.2.0

@apiParam {String} [count=5] Количество новостей
@apiParam {String} [offset=0] Кол-во пропущенных новостей с начала

"""
</code></pre><p>
Что есть что? Приведу описание некоторых основных «тегов» для генерирования документации. Все теги можно посмотреть </p><a href="http://apidocjs.com">здесь</a><p>.

</p><h4>@api</h4><p>
Обязательный тег для генерации документации.

</p><div class="spoiler"><b class="spoiler_title">Использование</b><div class="spoiler_text"><pre><code>@api {method} path [title]</code></pre><p>
method — типа запроса (GET,POST,PUT и т.д.)</p><p>
path — путь до метода например /2/get_news</p><p>
title — название метода которое будет отображаться в документации

</p><h4>Пример использования:</h4>
<pre><code class="python">"""
@api {get} /user/:id
"""
</code></pre>
</div></div>

<h4>@apiName</h4><p>
Тег определяющий название блока документации. Рекомендуется всегда использовать.

</p><div class="spoiler"><b class="spoiler_title">Использование</b><div class="spoiler_text"><pre><code>@apiName name</code></pre><p>
name — название метода

</p><h4>Пример использования:</h4>
<pre><code class="python">"""
@apiName GetNews
"""
</code></pre>
</div></div>
<h4>@apiGroup</h4><p>
Тег связывающий блоки документации в одну группу на сайте документации.

</p><div class="spoiler"><b class="spoiler_title">Использование</b><div class="spoiler_text"><pre><code>@apiGroup name</code></pre><p>
name — название группы

</p><h4>Пример использования:</h4>
<pre><code class="python">"""
@apiGroup News
"""
</code></pre>
</div></div>

<h4>@apiVersion</h4><p>
Тег используется для определения версии метода.
</p><div class="spoiler"><b class="spoiler_title">Результат версионирования:</b></div>
<div class="spoiler"><b class="spoiler_title">Использование</b><div class="spoiler_text"><pre><code>@apiVersion version</code></pre><p>
version — версия метода согласно семантическому версионированию подробнее по ссылке </p><a href="http://semver.org">здесь</a><p>.

</p><h4>Пример использования:</h4>
<pre><code class="python">"""
@apiVersion 0.2.0
"""
</code></pre>
</div></div>
<h4>@apiSuccess </h4><p>
Тег используется для описания параметра передаваемого в метод

</p><div class="spoiler"><b class="spoiler_title">Использование</b><div class="spoiler_text"><pre><code>@apiSuccess [{type}] field [description]</code></pre><p>
type — тип объекта({Boolean}, {Number}, {String}, {Object}, {String[]} и прочие)</p><p>
field — название объекта который будет получен после запроса</p><p>
description — описание этого объекта

</p><h4>Пример использования:</h4>
<pre><code class="python">"""
@api {get} /user/:id
@apiSuccess {String} firstname Firstname of the User.
@apiSuccess {String} lastname  Lastname of the User.
"""
</code></pre>
</div></div>
<h2>Изготовление документации</h2><p>
Итак, после краткого введения в теги apiDoc можно попробовать создать документацию, для этого нужно подготовить поле действий. Для этого положите в корень файл конфигурации apidoc.json.

</p><div class="spoiler"><b class="spoiler_title">Пример acidoc.json</b><div class="spoiler_text"><pre><code>{
  "name": "Мой НГТУ", //Название проекта
  "version": "0.2.0", //Текущая версия API(будет сравниваться с предыдущими)
  "description": "Мой НГТУ - облачная студенческая платформа", //Описание проекта
  "title": "Документация API Мой НГТУ", //Название страницы API
  "url" : "https://api.mynstu.me", //Расположение Web API
  "sampleUrl": "https://api.mynstu.me", //Расположение Web API
  "template": { //Конфигурация шаблона
  	"withCompare": true, //Включаем сравнение
  	"withGenerator": true // Ну и то что будет генерировать apiDoc
  }
}
</code></pre>
</div></div><p>
Далее для генерации следует запустить команду:

</p><pre><code class="bash">apidoc</code></pre><p>
На выходе вы получите это:

</p><img src="https://habrastorage.org/files/9e9/c9c/b3e/9e9c9cb3efa5482798b2810729d3e5e4.png"/>
<p>
Документацию можно забрать в папке doc которая лежит в корне вашего проекта. Чтобы посмотреть результат откройте index.html.

</p><h2>Итоги</h2><p>
У нас получилось сделать практичную и красивую документацию. Вот как она выглядит:

</p><img src="https://habrastorage.org/files/446/3ab/9b2/4463ab9b2a054e48a9b9273d0b639ba5.png"/>
<p>
Посмотреть как она выглядит полностью и понажимать на кнопочки можно </p><a href="https://api.mynstu.me/docs">здесь</a><p>.
      </p><p class="clear"/>
    </div>

    
  </div></body></html>