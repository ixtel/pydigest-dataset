<html><body><div><div class="post-text" itemprop="text">
<p>There is a possibility to get closer to <a href="https://github.com/axemclion/browser-perf/wiki/Architecture" rel="nofollow">what <code>browser-perf</code> is doing</a> by collecting the <a href="https://sites.google.com/a/chromium.org/chromedriver/logging/performance-log" rel="nofollow">chrome performance logs</a> and analyzing them.</p>

<p>To <a href="http://stackoverflow.com/questions/27644615/getting-chrome-performance-and-tracing-logs">get performance logs</a>, turn on <code>performance</code> logs by tweaking <code>loggingPrefs</code> desired capability:</p>

<pre><code>from selenium import webdriver
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

caps = DesiredCapabilities.CHROME
caps['loggingPrefs'] = {'performance': 'ALL'}
driver = webdriver.Chrome(desired_capabilities=caps)

driver.get('https://stackoverflow.com')

logs = [json.loads(log['message'])['message'] for log in driver.get_log('performance')]

with open('devtools.json', 'wb') as f:
    json.dump(logs, f)

driver.close()
</code></pre>

<p>At this point, <code>devtools.json</code> file would contain a bunch of trace records:</p>

<pre><code>[
  {
    "params": {
      "timestamp": 1419571233.19293,
      "frameId": "16639.1",
      "requestId": "16639.1",
      "loaderId": "16639.2",
      "type": "Document",
      "response": {
        "mimeType": "text/plain",
        "status": 200,
        "fromServiceWorker": false,
        "encodedDataLength": -1,
        "headers": {
          "Access-Control-Allow-Origin": "*",
          "Content-Type": "text/plain;charset=US-ASCII"
        },
        "url": "data:,",
        "statusText": "OK",
        "connectionId": 0,
        "connectionReused": false,
        "fromDiskCache": false
      }
    },
    "method": "Network.responseReceived"
  },
  {
    "params": {
      "timestamp": 1419571233.19294,
      "encodedDataLength": 0,
      "requestId": "16639.1"
    },
    "method": "Network.loadingFinished"
  },
  ..
]
</code></pre>

<p>Now, the question is, what to do with it.</p>

<p>One option that was initially suggested <a href="https://www.youtube.com/watch?v=0_kAPWSZNY4" rel="nofollow">during the Google Test Automation Conference</a> is to submit the logs to <a href="http://www.webpagetest.org/" rel="nofollow">webpagetest.org</a>. There is an example <em>in java</em> available <a href="https://gist.github.com/klepikov/5457750" rel="nofollow">here</a>, but, at the moment, I had no luck implementing it in Python.</p>

<p>In theory, the UI report generated by webpagetest.org would look like this:</p>

<p><img src="http://i.stack.imgur.com/I3gJg.jpg" alt="enter image description here"/></p>

<p>They also provide the metrics in JSON/XML and other formats that can be further analyzed.</p>

<p>This is really something, thanks to Vivek Singh for the pointing comment.</p>

<hr/>

<p>browser-perf also uses the logging functionality to pick up the tracing logs, and analyzes the data. </p>
    </div>
    </div></body></html>