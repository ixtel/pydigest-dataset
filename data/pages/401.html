<html><body><div><div class="pf-content"><p>Python has a neat little concept called a <strong>property</strong> that can do several useful things. In this article, we will be looking into how to do the following:</p>
<ul>
<li>Convert class methods into read-only attributes</li>
<li>Reimplement setters and getters into an attribute</li>
</ul>
<p>In this article, you will learn how to use the builtin class <strong>property</strong> in several different ways. Hopefully by the end of the article, you will see how useful it is.<span id="more-3689"/></p>
<h3>Getting Started</h3>
<p>
</p><p>One of the simplest ways to use a property is to use it as a decorator of a method. This allows you to turn a class method into a class attribute. I find this useful when I need to do some kind of combination of values. Others have found it useful for writing conversion methods that they want to have access to as methods. Let’s take a look at a simple example:</p>
<pre class="python"><span>########################################################################</span>
<span>class</span> Person<span>(</span><span>object</span><span>)</span>:
    <span>""</span><span>""</span><span>""</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span>, first_name, last_name<span>)</span>:
        <span>""</span><span>"Constructor"</span><span>""</span>
        <span>self</span>.<span>first_name</span> = first_name
        <span>self</span>.<span>last_name</span> = last_name
 
    <span>#----------------------------------------------------------------------</span>
    @<span>property</span>
    <span>def</span> full_name<span>(</span><span>self</span><span>)</span>:
        <span>""</span><span>"
        Return the full name
        "</span><span>""</span>
        <span>return</span> <span>"%s %s"</span> <span>%</span> <span>(</span><span>self</span>.<span>first_name</span>, <span>self</span>.<span>last_name</span><span>)</span></pre>
<p>In the code above, we create two class attributes or properties: <strong>self.first_name</strong> and <strong>self.last_name</strong>. Next we create a <strong>full_name</strong> method that has a <strong>@property</strong> decorator attached to it. This allows us to the following in an interpreter session:</p>
<pre class="python"><span>&gt;&gt;&gt;</span> person = Person<span>(</span><span>"Mike"</span>, <span>"Driscoll"</span><span>)</span>
<span>&gt;&gt;&gt;</span> person.<span>full_name</span>
<span>'Mike Driscoll'</span>
<span>&gt;&gt;&gt;</span> person.<span>first_name</span>
<span>'Mike'</span>
<span>&gt;&gt;&gt;</span> person.<span>full_name</span> = <span>"Jackalope"</span>
Traceback <span>(</span>most recent call last<span>)</span>:
  File <span>"&lt;string&gt;"</span>, line <span>1</span>, <span>in</span> <span>&lt;</span>fragment<span>&gt;</span>
<span>AttributeError</span>: can<span>'t set attribute</span></pre>
<p>As you can see, because we turned the method into a property, we can access it using normal dot notation. However, if we try to set the property to something different, we will cause an <strong>AttributeError</strong> to be raised. The only way to change the <strong>full_name</strong> property is to do so indirectly:</p>
<pre class="python"><span>&gt;&gt;&gt;</span> person.<span>first_name</span> = <span>"Dan"</span>
<span>&gt;&gt;&gt;</span> person.<span>full_name</span>
<span>'Dan Driscoll'</span></pre>
<p>This is kind of limiting, so let’s look at another example where we can make a property that <strong>does</strong> allow us to set it.</p>
<h3>Replacing Setters and Getters with a Python property</h3>
<p>
</p><p>Let’s pretend that we have some legacy code that someone wrote who didn’t understand Python very well. If you’re like me, you’ve already seen this kind of code before:</p>
<pre class="python"><span>from</span> <span>decimal</span> <span>import</span> Decimal
 
<span>########################################################################</span>
<span>class</span> Fees<span>(</span><span>object</span><span>)</span>:
    <span>""</span><span>""</span><span>""</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>)</span>:
        <span>""</span><span>"Constructor"</span><span>""</span>
        <span>self</span>._fee = <span>None</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> get_fee<span>(</span><span>self</span><span>)</span>:
        <span>""</span><span>"
        Return the current fee
        "</span><span>""</span>
        <span>return</span> <span>self</span>._fee
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> set_fee<span>(</span><span>self</span>, value<span>)</span>:
        <span>""</span><span>"
        Set the fee
        "</span><span>""</span>
        <span>if</span> <span>isinstance</span><span>(</span>value, <span>str</span><span>)</span>:
            <span>self</span>._fee = Decimal<span>(</span>value<span>)</span>
        <span>elif</span> <span>isinstance</span><span>(</span>value, Decimal<span>)</span>:
            <span>self</span>._fee = value</pre>
<p>To use this class, we have to use the setters and getters that are defined:</p>
<pre class="python"><span>&gt;&gt;&gt;</span> f = Fees<span>(</span><span>)</span>
<span>&gt;&gt;&gt;</span> f.<span>set_fee</span><span>(</span><span>"1"</span><span>)</span>
<span>&gt;&gt;&gt;</span> f.<span>get_fee</span><span>(</span><span>)</span>
Decimal<span>(</span><span>'1'</span><span>)</span></pre>
<p>If you want to add the normal dot notation access of attributes to this code without breaking all the applications that depend on this piece of code, you can change it very simply by adding a property:</p>
<pre class="python"><span>from</span> <span>decimal</span> <span>import</span> Decimal
 
<span>########################################################################</span>
<span>class</span> Fees<span>(</span><span>object</span><span>)</span>:
    <span>""</span><span>""</span><span>""</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>)</span>:
        <span>""</span><span>"Constructor"</span><span>""</span>
        <span>self</span>._fee = <span>None</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> get_fee<span>(</span><span>self</span><span>)</span>:
        <span>""</span><span>"
        Return the current fee
        "</span><span>""</span>
        <span>return</span> <span>self</span>._fee
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> set_fee<span>(</span><span>self</span>, value<span>)</span>:
        <span>""</span><span>"
        Set the fee
        "</span><span>""</span>
        <span>if</span> <span>isinstance</span><span>(</span>value, <span>str</span><span>)</span>:
            <span>self</span>._fee = Decimal<span>(</span>value<span>)</span>
        <span>elif</span> <span>isinstance</span><span>(</span>value, Decimal<span>)</span>:
            <span>self</span>._fee = value
 
    fee = <span>property</span><span>(</span>get_fee, set_fee<span>)</span></pre>
<p>We added one line to the end of this code. Now we can do stuff like this:</p>
<pre class="python"><span>&gt;&gt;&gt;</span> f = Fees<span>(</span><span>)</span>
<span>&gt;&gt;&gt;</span> f.<span>set_fee</span><span>(</span><span>"1"</span><span>)</span>
<span>&gt;&gt;&gt;</span> f.<span>fee</span>
Decimal<span>(</span><span>'1'</span><span>)</span>
<span>&gt;&gt;&gt;</span> f.<span>fee</span> = <span>"2"</span>
<span>&gt;&gt;&gt;</span> f.<span>get_fee</span><span>(</span><span>)</span>
Decimal<span>(</span><span>'2'</span><span>)</span></pre>
<p>As you can see, when we use <strong>property</strong> in this manner, it allows the fee property to set and get the value itself without breaking the legacy code. Let’s rewrite this code using the property decorator and see if we can get it to allow setting.</p>
<pre class="python"><span>from</span> <span>decimal</span> <span>import</span> Decimal
 
<span>########################################################################</span>
<span>class</span> Fees<span>(</span><span>object</span><span>)</span>:
    <span>""</span><span>""</span><span>""</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>)</span>:
        <span>""</span><span>"Constructor"</span><span>""</span>
        <span>self</span>._fee = <span>None</span>
 
    <span>#----------------------------------------------------------------------</span>
    @<span>property</span>
    <span>def</span> fee<span>(</span><span>self</span><span>)</span>:
        <span>""</span><span>"
        The fee property - the getter
        "</span><span>""</span>
        <span>return</span> <span>self</span>._fee
 
    <span>#----------------------------------------------------------------------</span>
    @fee.<span>setter</span>
    <span>def</span> fee<span>(</span><span>self</span>, value<span>)</span>:
        <span>""</span><span>"
        The setter of the fee property
        "</span><span>""</span>
        <span>if</span> <span>isinstance</span><span>(</span>value, <span>str</span><span>)</span>:
            <span>self</span>._fee = Decimal<span>(</span>value<span>)</span>
        <span>elif</span> <span>isinstance</span><span>(</span>value, Decimal<span>)</span>:
            <span>self</span>._fee = value
 
<span>#----------------------------------------------------------------------</span>
<span>if</span> __name__ == <span>"__main__"</span>:
    f = Fees<span>(</span><span>)</span></pre>
<p>The code above demonstrates how to create a “setter” for the <strong>fee</strong> property. You can do this by decorating a second method that is also called <strong>fee</strong> with a decorator called <strong>@fee.setter</strong>. The setter is invoked when you do something like this:</p>
<pre class="python"><span>&gt;&gt;&gt;</span> f = Fees<span>(</span><span>)</span>
<span>&gt;&gt;&gt;</span> f.<span>fee</span> = <span>"1"</span></pre>
<p>If you look at the signature for <strong>property</strong>, it has fget, fset, fdel and doc as “arguments”. You can create another decorated method using the same name to correspond to a delete function using <strong>@fee.deleter</strong> if you want to catch the <strong>del</strong> command against the attribute.</p>
<h3>Wrapping Up</h3>
<p>
</p><p>Now you know how to use Python properties in your own classes. Hopefully you can find even more useful ways to use them in your own code. </p>
<h3>Additional Reading</h3>
<p>
</p>
</div>	</div></body></html>