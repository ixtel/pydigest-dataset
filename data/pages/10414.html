<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-thank-you-follow-me---谢谢你关注我呀" class="anchor" href="#thank-you-follow-me---谢谢你关注我呀" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Thank you follow me - 谢谢你关注我呀！</h1>

<h2><a id="user-content-简介" class="anchor" href="#简介" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>简介</h2>

<p>这是一个用于自动给知乎里你的新关注者发送一条信息的后台服务。</p>

<p>技术栈什么的非常简单：</p>

<ul>
<li>以前写的 <code>zhihu-py3</code> 用于获取知乎信息</li>
<li>用 <code>sqlite</code> 数据库保存老的关注者</li>
<li><code>daemon.py</code> 用于在 *unix 环境下创建 daemon proc</li>
</ul>

<h2><a id="user-content-使用" class="anchor" href="#使用" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>使用</h2>

<h3><a id="user-content-安装" class="anchor" href="#安装" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>安装</h3>

<div class="highlight highlight-source-shell"><pre>sudo pip3 install qqqfome</pre></div>

<h3><a id="user-content-创建工作目录" class="anchor" href="#创建工作目录" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>创建工作目录</h3>

<div class="highlight highlight-source-shell"><pre><span class="pl-c1">cd</span> /path/that/you/want
mkdir qqqfome_work
<span class="pl-c1">cd</span> qqqfome_work</pre></div>

<h3><a id="user-content-初始化数据库" class="anchor" href="#初始化数据库" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>初始化数据库</h3>



<p>然后根据提示登录知乎。</p>

<p>过程中需要验证码……如果你是在VPS上部署的话，你得想办法把 <code>captcha.gif</code> 文件从远程服务器弄到本地来查看验证码…… </p>

<p>其实我更建议在本地用 <code>zhihu-py3</code> 生成 cookies 再弄到 VPS 上，这样就可以使用：</p>

<div class="highlight highlight-source-shell"><pre>qqqfome -c /path/to/cookie -v init</pre></div>

<p>来省略登录步骤。</p>

<p>如果一切正常的话，你会得到一个 sqlite 数据库文件。名字是 <code>&lt;your-zhihu-id&gt;.sqlite3</code></p>

<h3><a id="user-content-启动" class="anchor" href="#启动" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>启动</h3>

<div class="highlight highlight-source-shell"><pre>qqqfome -m <span class="pl-s"><span class="pl-pds">$'</span>I<span class="pl-cce">\'</span>m {my_name}:<span class="pl-cce">\n</span>Thank you follow me.<span class="pl-pds">'</span></span> -d start <span class="pl-k">&lt;</span>your-zhihu-id<span class="pl-k">&gt;</span>.sqlite3</pre></div>

<p>（如果只是测试的话，可以去掉 <code>-d</code> 参数，让他在前台模式运行。）</p>

<p><code>-m</code> 参数后跟需要发送的信息。注意，如果你在消息内部使用了转义字符，那么单引号前的<code>$</code>符号是必需的。</p>

<p>或者你可以将信息写在一个文件里，然后使用 <code>-M</code> 参数指定此文件。</p>

<p>两个都没有指定的话，默认的消息是：</p>

<pre lang="text"><code>你好{your_name}，我是{my_name}，谢谢你关注我，你是我的第{follower_num}号关注者哟！

本消息由qqqfome项目自动发送。
项目地址：https://github.com/7sDream/qqqfome
{now}
</code></pre>

<p>程序支持的也就是例子里的这几个宏了……</p>

<h2><a id="user-content-查看log" class="anchor" href="#查看log" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>查看Log</h2>

<div class="highlight highlight-source-shell"><pre>tail -f <span class="pl-k">&lt;</span>your-zhihu-id<span class="pl-k">&gt;</span>.sqlite3.log</pre></div>

<p>默认的 log 文件名是 <code>&lt;your-zhihu-id&gt;.sqlite3.log</code></p>

<p>还有一个是 <code>&lt;your-zhihu-id&gt;.sqlite3.pid</code> 这个文件不要删。</p>

<h3><a id="user-content-停止" class="anchor" href="#停止" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>停止</h3>

<p>如果不是后台模式，<code>Ctrl-C</code> 即可停止。</p>

<p>如果是 Daemon 模式，则：</p>

<div class="highlight highlight-source-shell"><pre>qqqfome stop <span class="pl-k">&lt;</span>sqlite_file_name<span class="pl-k">&gt;</span></pre></div>

<h2><a id="user-content-文档" class="anchor" href="#文档" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>文档</h2>

<p>还没写，暂时用 <code>qqqfome -h</code> 凑合看吧。</p>

<pre lang="text"><code>usage: qqqfome [-h] [-v] [-c FILE] [-p FILE] [-l FILE] [-t INTERVAL]
               [-m MESSAGE | -M FILE] [-s NUM] [-d]
               {init,start,stop} [file]

Thank-you-follow-me cli.

positional arguments:
  {init,start,stop}     command that you want exec
  file                  database file that you want run on.

optional arguments:
  -h, --help            show this help message and exit
  -v, --verbose         turn on this to print info
  -c FILE, --cookies FILE
                        provide cookies file if you have to skip login
  -p FILE, --pid-file FILE
                        pid file location
  -l FILE, --log-file FILE
                        log file location
  -t INTERVAL, --time INTERVAL
                        set the interval time
  -m MESSAGE, --message MESSAGE
                        the message that you want to send to your new follower
  -M FILE, --message-file FILE
                        the message that you want to send to your new follower
  -s NUM, --stop-at NUM
                        found NUM continuously old followers will stop pass
  -d, --daemon          work in daemon mode
</code></pre>

<h2><a id="user-content-todo" class="anchor" href="#todo" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>TODO</h2>

<ul>
<li>增加 update 命令，用于更新数据库里的 cookies</li>
<li>选项 <code>--mc</code> 或者类似的东西，用于随机从文件中选取一段文本（一行，或者以特定分隔符分隔的一段）用作 message。</li>
<li>写个教程</li>
<li>完善 readme 和 文档</li>
<li>重构代码</li>
<li>写测试</li>
</ul>

<h2><a id="user-content-licensee" class="anchor" href="#licensee" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>LICENSEE</h2>

<p>MIT.</p>
</article>
  </div></body></html>