<html><body><div><div class="section">
              <h1>pluserable 0.1.0</h1>

              


<p>Generic user registration for the Pyramid web framework</p>








<p><em>pluserable</em> provides generic user registration for the Pyramid web framework,
if your web app uses SQLAlchemy.</p>
<p>It is a pluggable web application that provides user registration, login,
logout and change password functionality. <em>pluserable</em> follows a policy of
minimal interference, so your app can mostly keep its existing models.</p>
<p><strong>The current release of pluserable has a security issue inherited from horus.
Do not use it in production.  The next release will fix this situation.</strong></p>
<div id="minimal-integration">
<h2>Minimal integration</h2>
<ul>
<li><p>Create a virtualenv and activate it. Install pyramid and create
your pyramid project.</p>
</li>
<li><p>Edit your <em>setup.py</em> to add “pluserable” to the dependencies in the
<em>install_requires</em> list.</p>
</li>
<li><p>Run <tt>python setup.py develop</tt> on your project to install all dependencies
into your virtualenv.</p>
</li>
<li><p>Create your SQLAlchemy declarative initialization.</p>
</li>
<li><p>Create models inheriting from pluserable’ abstract models.
Find an example in the file <a href="https://github.com/nandoflorestan/pluserable/blob/master/pluserable/tests/models.py" rel="nofollow">pluserable/tests/models.py</a>.</p>
<p>Then all you need to do is tell the class where to find your declarative
base you and are good to go!</p>
</li>
<li><p>Include pluserable inside your <tt>main()</tt> function like this:</p>
<pre># Tell pluserable which SQLAlchemy scoped session to use:
from hem.interfaces import IDBSession
registry = config.registry
registry.registerUtility(my_sqlalchemy_scoped_session, IDBSession)

config.include('pluserable')
config.scan_pluserable(auth_models_package_or_module)
</pre>
<p>With the above <tt>config.scan_pluserable()</tt> call, you need to edit your .ini
configuration file and tell pluserable which model classes to use like this:</p>
<pre>pluserable.user_class = my_app.models:User
pluserable.activation_class = my_app.models:Activation
</pre>
<p>As an alternative to <tt>config.scan_pluserable()</tt> plus that configuration,
you can register the classes explicitly if you so prefer. This must be
done above <tt><span class="pre">config.include('pluserable')</span></tt>:</p>
<pre># Tell pluserable which models to use:
from pluserable.interfaces import IUserClass, IActivationClass
registry.registerUtility(User, IUserClass)
registry.registerUtility(Activation, IActivationClass)

config.include('pluserable')
</pre>
</li>
<li><p>Configure <tt>pluserable.login_redirect</tt> and <tt>pluserable.logout_redirect</tt>
(in your .ini configuration file) to set the redirection routes.</p>
</li>
<li><p>If you haven’t done so yet, configure an HTTP session factory according to
the Sessions chapter of the Pyramid documentation.</p>
</li>
<li><p>Create your database and tables. Maybe even an initial user.</p>
</li>
<li><p>Be sure to pass an <tt>authentication_policy</tt> argument in the
<tt>config = <span class="pre">Configurator(...)</span></tt> call. Refer to Pyramid docs for details.</p>
</li>
<li><p>By now the login form should appear at /login, but /register shouldn’t.</p>
</li>
<li><p>Include the package pyramid_mailer for the validation e-mail and
“forgot password” e-mail:</p>
<pre>config.include('pyramid_mailer')
</pre>
</li>
<li><p>The /register form should appear, though ugly. Now you have a choice
regarding user activation by email:</p>
<ul>
<li><p>You may just disable it by setting, in your .ini file:</p>
<pre>pluserable.require_activation = False
</pre>
</li>
<li><p>Otherwise, configure pyramid_mailer <a href="http://docs.pylonsproject.org/projects/pyramid_mailer/en/latest/" rel="nofollow">according to its documentation</a>
and test the registration page.</p>
</li>
</ul>
</li>
<li><p>If you are using pyramid_tm or the ZopeTransactionManager, your minimal
integration is done. (The pages are ugly, but working. Keep reading…)</p>
</li>
</ul>
</div>
<div id="need-to-session-commit">
<h2>Need to session.commit()?</h2>
<p><em>pluserable</em> does not require pyramid_tm or the ZopeTransactionManager with your
session but if you do not use them you do have to take one extra step.
We don’t commit transactions for you because that just wouldn’t be nice!</p>
<p>All you have to do is subscribe to the extension events and
commit the session yourself. This also gives you the chance to
do some extra processing:</p>
<pre>from pluserable.events import (
    PasswordResetEvent, NewRegistrationEvent,
    RegistrationActivatedEvent, ProfileUpdatedEvent)

def handle_request(event):
    request = event.request
    session = request.registry.getUtility(IDBSession)
    session.commit()

self.config.add_subscriber(handle_request, PasswordResetEvent)
self.config.add_subscriber(handle_request, NewRegistrationEvent)
self.config.add_subscriber(handle_request, RegistrationActivatedEvent)
self.config.add_subscriber(handle_request, ProfileUpdatedEvent)
</pre>
</div>
<div id="whether-or-not-to-have-a-username-field">
<h2>Whether or not to have a “username” field</h2>
<p>It is important that you analyze the characteristics of your web application and decide whether you need a <tt>username</tt> field for users to log in with. pluserable provides 2 modes of operation:</p>

<p>If you make this change and want to keep your data you must deal with the existing (or missing) “username” column yourself.</p>
</div>
<div id="changing-the-forms">
<h2>Changing the forms</h2>
<p>If you would like to modify any of the forms, you just need
to register the new deform class to be used.</p>
<p>The interfaces you have available to override from pluserable.interfaces are:</p>
<ul>
<li>IPluserableLoginForm</li>
<li>IPluserableRegisterForm</li>
<li>IPluserableForgotPasswordForm</li>
<li>IPluserableResetPasswordForm</li>
<li>IPluserableProfileForm</li>
</ul>
<p>This is how you would do it (<em>MyForm</em> being a custom deform Form class):</p>
<pre>config.registry.registerUtility(MyForm, IPluserableLoginForm)
</pre>
</div>
<div id="changing-the-templates">
<h2>Changing the templates</h2>
<p>If you would like to substitute the templates you can use pyramid’s
<a href="http://pyramid.readthedocs.org/en/latest/narr/assets.html#overriding-assets-section" rel="nofollow">override_asset</a>:</p>
<pre>config.override_asset(to_override='pluserable:templates/template.mako',
    override_with='your_package:templates/anothertemplate.mako')
</pre>
<p>The templates you have available to override are:</p>
<ul>
<li>login.mako</li>
<li>register.mako</li>
<li>forgot_password.mako</li>
<li>reset_password.mako</li>
<li>profile.mako</li>
</ul>
<p>If you would like to override the templates with Jinja2, or any other
templating language, just override the view configuration:</p>
<pre>config.add_view('pluserable.views.AuthController', attr='login',
    route_name='login', renderer='yourapp:templates/login.jinja2')
config.add_view('pluserable.views.ForgotPasswordController',
    attr='forgot_password', route_name='forgot_password',
    renderer='yourapp:templates/forgot_password.jinja2')
config.add_view('pluserable.views.ForgotPasswordController',
    attr='reset_password', route_name='reset_password',
    renderer='yourapp:templates/reset_password.jinja2')
config.add_view('pluserable.views.RegisterController', attr='register',
    route_name='register', renderer='yourapp:templates/register.jinja2')
config.add_view('pluserable.views.ProfileController', attr='profile',
    route_name='profile', renderer='yourapp:templates/profile.jinja2')
</pre>
</div>
<div id="changing-strings">
<h2>Changing strings</h2>
<p>Take a look at <a href="https://github.com/nandoflorestan/pluserable/blob/master/pluserable/strings.py" rel="nofollow">this class</a>.
This is where we store all the strings in <em>pluserable</em>.
If you’d like to change one or two messages, simply subclass this, then do:</p>
<pre>from pluserable.interfaces import IUIStrings
config.registry.registerUtility(MyStringsClass, IUIStrings)
</pre>
</div>
<div id="changing-the-primary-key-column-name">
<h2>Changing the primary key column name</h2>
<p>If you wish to override the primary key attribute name, you can do so
by creating a new mixin class:</p>
<pre>class NullPkMixin(Base):
    abstract = True
    _idAttribute = 'pk'

    @declared_attr
    def pk(self):
        return Base.pk

    @declared_attr
    def id(self):
        return None

class User(NullPkMixin, UserMixin):
    pass
</pre>
</div>

<div id="origin-of-the-project">
<h2>Origin of the project</h2>
<p><em>pluserable</em> is a fork of <em>horus</em>, a project started by John Anderson:
<a href="https://github.com/eventray/horus" rel="nofollow">https://github.com/eventray/horus</a></p>
<p>The differences are:</p>
<ul>
<li><em>pluserable</em> lets you log in with an email (or a username);
<em>horus</em> only lets you log in with a username.</li>
<li><em>pluserable</em> does not have horus’ admin views – they were rarely used.</li>
<li><em>pluserable</em> allows you to pick a subset of the views for your project;
<em>horus</em> always registers all of the routes and views.</li>
<li><em>pluserable</em> does not include an outdated version of <em>bootstrap</em>.</li>
<li><em>pluserable</em> does not have a scaffolding script.</li>
<li><em>pluserable</em> uses pyramid.compat rather than the <em>six</em> library.</li>
<li><em>pluserable</em> uses the bag library for a maintained version of FlashMessage.</li>
</ul>
</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>98</span> downloads in the last week
  </li>
  <li>
    <span>98</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>