<html><body><div><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-1"><span class="crayon-c">#!/usr/bin/env python</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-2"><span class="crayon-c"># -*- coding: utf-8 -*-</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-4"><span class="crayon-s">'''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-5"><span class="crayon-s">#######################################################################################################</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-6"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-7"><span class="crayon-s">AUTHOR:             Adam Dynamic</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-8"><span class="crayon-s">CONTACT:            helloadamdynamic@gmail.com / www.adamdynamic.com</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-9"><span class="crayon-s">LAST REVISION:      14 December 2014</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-10"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-11"><span class="crayon-s">PROJECT:            War and Peace</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-12"><span class="crayon-s">DESCRIPTION:        Parses an input file of raw text and divides it intp sections no longer than</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-13"><span class="crayon-s">                    140 characters</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-14"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-15"><span class="crayon-s">#######################################################################################################</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-16"><span class="crayon-s">'''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-17"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-18"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-19"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">logging</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-20"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-21"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">nltk </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">tokenize</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-22"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">nltk</span><span class="crayon-sy">.</span><span class="crayon-e">data</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-23"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">nltk</span><span class="crayon-sy">.</span><span class="crayon-k ">tokenize</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">word_tokenize</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-24"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-25"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">divide_sentence_by_brackets</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-26"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-27"><span class="crayon-s">    :param input_string: A sentence input that is thought to contain a pair of brackets</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-28"><span class="crayon-s">    :return: A list of strings comprising of the sentence with the bracketed section as a seperate section</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-29"><span class="crayon-s">    '''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-30"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-31"><span class="crayon-h">    </span><span class="crayon-v">FN_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"divide_sentence_by_brackets"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-32"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-33"><span class="crayon-h">    </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">input_string</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-34"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-35"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-36"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-37"><span class="crayon-h">        </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-o">:</span><span class="crayon-h">     </span><span class="crayon-c"># Continue the iteration until the final section does not contain a pair of brackets or an error is thrown</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-38"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-39"><span class="crayon-h">            </span><span class="crayon-v">temp_string</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-40"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-41"><span class="crayon-h">            </span><span class="crayon-c"># Check that the number of opening and closing brackets are the same</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-42"><span class="crayon-h">            </span><span class="crayon-v">number_of_opening_brackets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">.</span><span class="crayon-e">count</span><span class="crayon-sy">(</span><span class="crayon-s">"("</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-43"><span class="crayon-h">            </span><span class="crayon-v">number_of_closing_brackets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">.</span><span class="crayon-e">count</span><span class="crayon-sy">(</span><span class="crayon-s">")"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-44"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-45"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">number_of_opening_brackets</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">number_of_closing_brackets</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-46"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-47"><span class="crayon-h">                </span><span class="crayon-c"># Check that the file contains brackets, otherwise ignore and finish</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-48"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">number_of_opening_brackets</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-49"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-50"><span class="crayon-h">                    </span><span class="crayon-c"># Determine the position of both the opening and closing brackets</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-51"><span class="crayon-h">                    </span><span class="crayon-v">opening_bracket</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-s">"("</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-52"><span class="crayon-h">                    </span><span class="crayon-v">closing_bracket</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-s">")"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-53"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-54"><span class="crayon-h">                    </span><span class="crayon-c"># Determine if the closing bracket is followed by punctuation, in which case include it in the section</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-55"><span class="crayon-h">                    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">closing_bracket</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_string</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-c"># Check that the closing bracket isn't the last character</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-56"><span class="crayon-h">                        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">[</span><span class="crayon-v">closing_bracket</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">isalpha</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-57"><span class="crayon-h">                            </span><span class="crayon-v">closing_bracket</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">closing_bracket</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-58"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-59"><span class="crayon-h">                    </span><span class="crayon-c"># Split the sentence and append to the end of the output</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-60"><span class="crayon-h">                    </span><span class="crayon-v">section_before_brackets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-v">opening_bracket</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-61"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-62"><span class="crayon-h">                    </span><span class="crayon-v">section_with_brackets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">[</span><span class="crayon-v">opening_bracket</span><span class="crayon-o">:</span><span class="crayon-v">closing_bracket</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-63"><span class="crayon-h">                    </span><span class="crayon-v">section_with_brackets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">section_with_brackets</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">section_with_brackets</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h">   </span><span class="crayon-c"># Remove any spaces that follow the opening bracket</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-64"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-65"><span class="crayon-h">                    </span><span class="crayon-v">section_after_brackets</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">[</span><span class="crayon-v">closing_bracket</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-66"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-67"><span class="crayon-h">                    </span><span class="crayon-c"># Replace the last section in the list with the newly divided section</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-68"><span class="crayon-h">                    </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">output</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">section_before_brackets</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-69"><span class="crayon-h">                    </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">section_with_brackets</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-70"><span class="crayon-h">                    </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">section_after_brackets</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-71"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-72"><span class="crayon-h">                </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-73"><span class="crayon-h">                    </span><span class="crayon-c"># Final section of the sentence does not contain any bracketed sections so the process is finished</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-74"><span class="crayon-h">                    </span><span class="crayon-st">break</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-75"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-76"><span class="crayon-h">            </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-77"><span class="crayon-h">                </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-e">input_string</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-78"><span class="crayon-e">                </span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">ValueError</span><span class="crayon-sy">(</span><span class="crayon-s">"Input string does not contain equal number of opening and closing brackets"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-79"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-80"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">Exception</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-81"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-82"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-e">error</span><span class="crayon-sy">(</span><span class="crayon-s">'%s Unable to divide sentence into sections split by brackets'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FN_NAME</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-83"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-k ">exception</span><span class="crayon-sy">(</span><span class="crayon-s">'Traceback message: \n%s'</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-84"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-85"><span class="crayon-h">    </span><span class="crayon-st">finally</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-86"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-87"><span class="crayon-h">        </span><span class="crayon-c"># Remove the last item if it is blank</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-88"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-89"><span class="crayon-h">            </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">pop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-90"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-91"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">output</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-92"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-93"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-94"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">divide_sentence_by_hyphens</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-95"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-96"><span class="crayon-s">    :param input_string: A sentence input that is thought to contain a section seperated by hyphens</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-97"><span class="crayon-s">    :return: A list of strings comprising of the sentence with the hyphenated section as a seperate section</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-98"><span class="crayon-s">    '''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-99"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-100"><span class="crayon-h">    </span><span class="crayon-v">FN_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"divide_sentence_by_hyphens"</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-101"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-102"><span class="crayon-h">    </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">input_string</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-103"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-104"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-105"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-106"><span class="crayon-h">        </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-o">:</span><span class="crayon-h">     </span><span class="crayon-c"># Continue the iteration until the final section does not contain a pair of brackets or an error is thrown</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-107"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-108"><span class="crayon-h">            </span><span class="crayon-v">temp_string</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-109"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-110"><span class="crayon-h">            </span><span class="crayon-v">number_of_hyphens</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">.</span><span class="crayon-e">count</span><span class="crayon-sy">(</span><span class="crayon-s">"--"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-111"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-112"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">number_of_hyphens</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-113"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-114"><span class="crayon-h">                </span><span class="crayon-v">first_hyphen</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-s">"--"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-115"><span class="crayon-h">                </span><span class="crayon-v">second_hyphen</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-s">"--"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">first_hyphen</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-116"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-117"><span class="crayon-h">                </span><span class="crayon-v">section_before_hyphens</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">first_hyphen</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-118"><span class="crayon-h">                </span><span class="crayon-v">section_with_hyphens</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">[</span><span class="crayon-v">first_hyphen</span><span class="crayon-o">:</span><span class="crayon-v">second_hyphen</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-119"><span class="crayon-h">                </span><span class="crayon-v">section_after_hyphens</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_string</span><span class="crayon-sy">[</span><span class="crayon-v">second_hyphen</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-120"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-121"><span class="crayon-h">                </span><span class="crayon-c"># Replace the last section in the list with the newly divided section</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-122"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">output</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">section_before_hyphens</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-123"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">section_with_hyphens</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-124"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">section_after_hyphens</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-125"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-126"><span class="crayon-h">            </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-127"><span class="crayon-h">                </span><span class="crayon-c"># Section does not contain a pair of hyphens and the process is complete</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-128"><span class="crayon-h">                </span><span class="crayon-st">break</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-129"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-130"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">Exception</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-131"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-132"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-e">error</span><span class="crayon-sy">(</span><span class="crayon-s">'%s Unable to divide sentence into sections split by hyphens'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FN_NAME</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-133"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-k ">exception</span><span class="crayon-sy">(</span><span class="crayon-s">'Traceback message: \n%s'</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-134"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-135"><span class="crayon-h">    </span><span class="crayon-st">finally</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-136"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-137"><span class="crayon-h">        </span><span class="crayon-c"># Remove the last item if it is blank</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-138"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-139"><span class="crayon-h">            </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">pop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-140"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-141"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">output</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-142"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-143"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-144"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">split_using_nltk</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-145"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-146"><span class="crayon-s">    :param input_string: A sentence input from the story</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-147"><span class="crayon-s">    :return: A list of strings divided using the NLTK algorithm</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-148"><span class="crayon-s">    '''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-149"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-150"><span class="crayon-h">    </span><span class="crayon-c"># Split the sentence into tokens using the NLTK took kit</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-151"><span class="crayon-h">    </span><span class="crayon-v">split_lines</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">tokenize</span><span class="crayon-sy">.</span><span class="crayon-e">sent_tokenize</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-152"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-153"><span class="crayon-h">    </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">recombine_split_quotations</span><span class="crayon-sy">(</span><span class="crayon-v">split_lines</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-154"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-155"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">output</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-156"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-157"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-158"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">recombine_split_quotations</span><span class="crayon-sy">(</span><span class="crayon-v">input_list</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-159"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-160"><span class="crayon-s">    :param input_string: list of strings containing segments of text</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-161"><span class="crayon-s">    :return: a list of strings where quotation marks followed by a lower case letter are re-combined</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-162"><span class="crayon-s">    '''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-163"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-164"><span class="crayon-h">    </span><span class="crayon-c"># e.g. ["This is the sentence," , " said the person"] becomes ["This is the sentence," said the person"]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-165"><span class="crayon-h">    </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-166"><span class="crayon-h">    </span><span class="crayon-v">temp_input</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">input_list</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-167"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-168"><span class="crayon-h">    </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-v">temp_input</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-169"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-170"><span class="crayon-h">        </span><span class="crayon-c"># If there is only one element of the input, then append it and break out of the loop</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-171"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_input</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-172"><span class="crayon-h">            </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-173"><span class="crayon-h">            </span><span class="crayon-v">temp_input</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-174"><span class="crayon-h">            </span><span class="crayon-st">break</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-175"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-176"><span class="crayon-h">        </span><span class="crayon-c"># Else if there are two or more elements in the list:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-177"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">chr</span><span class="crayon-sy">(</span><span class="crayon-cn">34</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-178"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-179"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">islower</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-180"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-181"><span class="crayon-h">                </span><span class="crayon-v">temp_string</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-182"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">temp_string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-183"><span class="crayon-h">                </span><span class="crayon-v">temp_input</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-184"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-185"><span class="crayon-h">            </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-186"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-187"><span class="crayon-h">                </span><span class="crayon-v">temp_input</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-188"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-189"><span class="crayon-h">        </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-190"><span class="crayon-h">            </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-191"><span class="crayon-h">            </span><span class="crayon-v">temp_input</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_input</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-192"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-193"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">output</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-194"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-195"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-196"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">divide_sentence_by_puncutation</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">split_punctuation</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-197"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-198"><span class="crayon-s">    :param input_string: A sentence input that is thought to contain a section seperated by punctuation</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-199"><span class="crayon-s">    :param split_punctuation: The punctuation that will be used to sub-divide the sentnence</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-200"><span class="crayon-s">    :return: A list of strings each ends with the split_punctuation character</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-201"><span class="crayon-s">    '''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-202"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-203"><span class="crayon-h">    </span><span class="crayon-v">FN_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"divide_sentence_by_punctuation"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-204"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-205"><span class="crayon-h">    </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-206"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-207"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-208"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-209"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">split_punctuation </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">input_string</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-210"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-211"><span class="crayon-h">            </span><span class="crayon-c"># Get all the positions of the punctuation in the input string</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-212"><span class="crayon-h">            </span><span class="crayon-c"># Can't use input_string.split() because I need to capture the quotation marks</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-213"><span class="crayon-h">            </span><span class="crayon-v">punctuation_positions</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">ltr </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">enumerate</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">ltr</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">split_punctuation</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-214"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-215"><span class="crayon-h">            </span><span class="crayon-c"># Check whether the following character is a quotation mark, and if so include it.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-216"><span class="crayon-h">            </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">punctuation_positions</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-217"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-218"><span class="crayon-h">                    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">input_string</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">chr</span><span class="crayon-sy">(</span><span class="crayon-cn">34</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-219"><span class="crayon-h">                        </span><span class="crayon-v">punctuation_positions</span><span class="crayon-sy">[</span><span class="crayon-v">punctuation_positions</span><span class="crayon-sy">.</span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-220"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-221"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">punctuation_positions</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-222"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-223"><span class="crayon-h">                </span><span class="crayon-c"># Append the first section of the sentence to the output list</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-224"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">punctuation_positions</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-225"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-226"><span class="crayon-h">                </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">range</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">punctuation_positions</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-227"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-228"><span class="crayon-h">                    </span><span class="crayon-v">temp_string</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">input_string</span><span class="crayon-sy">[</span><span class="crayon-v">punctuation_positions</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-v">punctuation_positions</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-229"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-230"><span class="crayon-h">                    </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">temp_string</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-231"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-232"><span class="crayon-h">                </span><span class="crayon-c"># Append the final section of the sentence to the end</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-233"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">[</span><span class="crayon-v">punctuation_positions</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-234"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-235"><span class="crayon-h">        </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-236"><span class="crayon-h">            </span><span class="crayon-c"># If the split punctuation is not in the input string, just return the whole string</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-237"><span class="crayon-h">            </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-238"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-239"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">Exception</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-240"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-241"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-e">error</span><span class="crayon-sy">(</span><span class="crayon-s">'%s Unable to divide sentence into sections split by the input punctuation'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FN_NAME</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-242"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-k ">exception</span><span class="crayon-sy">(</span><span class="crayon-s">'Traceback message: \n%s'</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-243"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-244"><span class="crayon-h">    </span><span class="crayon-st">finally</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-245"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-246"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-247"><span class="crayon-h">            </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-248"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">output</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-249"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-250"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-251"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">split_nouns_and_commas</span><span class="crayon-sy">(</span><span class="crayon-v">input_text</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-252"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-253"><span class="crayon-s">    :param input_text: text to be split into segments</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-254"><span class="crayon-s">    :return: a list of sentences, split by nouns followed by commas</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-255"><span class="crayon-s">    '''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-256"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-257"><span class="crayon-h">    </span><span class="crayon-v">FN_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"split_nouns_with_commas"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-258"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-259"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-260"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-261"><span class="crayon-h">        </span><span class="crayon-v">text</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">word_tokenize</span><span class="crayon-sy">(</span><span class="crayon-v">input_text</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-262"><span class="crayon-h">        </span><span class="crayon-v">split_sentence</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">nltk</span><span class="crayon-sy">.</span><span class="crayon-e">pos_tag</span><span class="crayon-sy">(</span><span class="crayon-v">text</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-263"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-264"><span class="crayon-h">        </span><span class="crayon-v">nouns_with_commas</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-265"><span class="crayon-h">        </span><span class="crayon-v">output_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-266"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-267"><span class="crayon-h">        </span><span class="crayon-c"># Identify all of the nouns that are immediately followed by a comma</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-268"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">range</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">split_sentence</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-269"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-270"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">split_sentence</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'NN'</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-271"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">split_sentence</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">","</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">split_sentence</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-k ">chr</span><span class="crayon-sy">(</span><span class="crayon-cn">34</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-v">split_sentence</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">chr</span><span class="crayon-sy">(</span><span class="crayon-cn">39</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-272"><span class="crayon-h">                    </span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-273"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-274"><span class="crayon-h">                </span><span class="crayon-st">elif</span><span class="crayon-h"> </span><span class="crayon-v">split_sentence</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">","</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-275"><span class="crayon-h">                    </span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-o">+</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-276"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-277"><span class="crayon-h">        </span><span class="crayon-c"># Create the sentence segments</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-278"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-279"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-280"><span class="crayon-h">            </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">j</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">range</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-281"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-282"><span class="crayon-h">                </span><span class="crayon-v">start_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-283"><span class="crayon-h">                </span><span class="crayon-v">end_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">input_text</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-284"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-285"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-286"><span class="crayon-h">                </span><span class="crayon-c"># Identify the start and end points of each slice based on the split points identified</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-287"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-288"><span class="crayon-h">                    </span><span class="crayon-v">end_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-289"><span class="crayon-h">                </span><span class="crayon-st">elif</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h">               </span><span class="crayon-c"># i,e.if the comma the last in the list</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-290"><span class="crayon-h">                    </span><span class="crayon-v">start_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-291"><span class="crayon-h">                </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-292"><span class="crayon-h">                    </span><span class="crayon-v">start_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">[</span><span class="crayon-v">j</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-293"><span class="crayon-h">                    </span><span class="crayon-v">end_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">nouns_with_commas</span><span class="crayon-sy">[</span><span class="crayon-v">j</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-294"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-295"><span class="crayon-h">                </span><span class="crayon-c"># Create an ordered list of words based on the split points</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-296"><span class="crayon-h">                </span><span class="crayon-v">sentence_segment</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">word</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">word </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">split_sentence</span><span class="crayon-sy">[</span><span class="crayon-v">start_position</span><span class="crayon-o">:</span><span class="crayon-v">end_position</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-297"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-298"><span class="crayon-h">                </span><span class="crayon-c"># Join the sentence together based on</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-299"><span class="crayon-h">                </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">word </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">sentence_segment</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-300"><span class="crayon-h">                    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">word</span><span class="crayon-sy">.</span><span class="crayon-e">isalnum</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-v">word</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"--"</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-301"><span class="crayon-h">                        </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">word</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-302"><span class="crayon-e">                    </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-303"><span class="crayon-h">                        </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">word</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-304"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-305"><span class="crayon-e">                </span><span class="crayon-v">output_list</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">output</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-306"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-307"><span class="crayon-h">        </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-308"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-309"><span class="crayon-h">            </span><span class="crayon-v">output_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">input_text</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-310"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-311"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">Exception</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-312"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-313"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-e">error</span><span class="crayon-sy">(</span><span class="crayon-s">'%s Unable to split text by "nouns with commas"'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FN_NAME</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-314"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-k ">exception</span><span class="crayon-sy">(</span><span class="crayon-s">'Traceback message: \n%s'</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-315"><span class="crayon-h">        </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-e">split_sentence</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-316"><span class="crayon-e">        </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-e">nouns_with_commas</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-317"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-318"><span class="crayon-e">        </span><span class="crayon-v">output_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-319"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-320"><span class="crayon-h">    </span><span class="crayon-st">finally</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-321"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-322"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">output_list</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-323"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-324"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">consolidate_sentence</span><span class="crayon-sy">(</span><span class="crayon-v">input_list</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-325"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-326"><span class="crayon-s">    :param input_list: A list of sentence segments split by punctuation</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-327"><span class="crayon-s">    :return: The same sentences, recombined where possible to maximise the length of each sentence</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-328"><span class="crayon-s">    '''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-329"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-330"><span class="crayon-h">    </span><span class="crayon-v">FN_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"consolidate_sentence"</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-331"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-332"><span class="crayon-h">    </span><span class="crayon-v">temp_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">input_list</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-333"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-334"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-335"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-336"><span class="crayon-h">        </span><span class="crayon-v">number_of_iterations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">input_list</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-337"><span class="crayon-h">        </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-338"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-339"><span class="crayon-h">        </span><span class="crayon-c"># Iterate until all of the segments are shorter than 138 characters</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-340"><span class="crayon-h">        </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">number_of_iterations</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-341"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-342"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-343"><span class="crayon-h">                </span><span class="crayon-st">break</span><span class="crayon-h">   </span><span class="crayon-c"># Can't consolidate a list of length one</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-344"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-345"><span class="crayon-h">            </span><span class="crayon-c"># Identify the smallest segment in the input_list</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-346"><span class="crayon-h">            </span><span class="crayon-v">list_of_sentence_lengths</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-347"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-348"><span class="crayon-h">            </span><span class="crayon-c"># Create a list of the indexes of the minumum sentence lengths in the temp_list</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-349"><span class="crayon-h">            </span><span class="crayon-v">min_sentence_positions</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">enumerate</span><span class="crayon-sy">(</span><span class="crayon-v">list_of_sentence_lengths</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">min</span><span class="crayon-sy">(</span><span class="crayon-v">list_of_sentence_lengths</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-350"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-351"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">min</span><span class="crayon-sy">(</span><span class="crayon-v">min_sentence_positions</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-352"><span class="crayon-h">                </span><span class="crayon-st">break</span><span class="crayon-h">   </span><span class="crayon-c"># The minimum sentence segment is already too long to be concatenated</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-353"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-354"><span class="crayon-h">            </span><span class="crayon-c">### Doesn't capture the case where the first section can't be concatenated but a segment of equal min length elsewhere can be?</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-355"><span class="crayon-h">            </span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">min_sentence_positions</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-356"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-357"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span><span class="crayon-h">                     </span><span class="crayon-c"># If the minimum sentence is the first section, there is no left-hand section to test</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-358"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-359"><span class="crayon-h">                </span><span class="crayon-c"># Concatenate the strings if their total length is sufficiently short</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-360"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-361"><span class="crayon-h">                    </span><span class="crayon-v">temp_string</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-362"><span class="crayon-h">                    </span><span class="crayon-v">temp_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">temp_string</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-363"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-364"><span class="crayon-h">            </span><span class="crayon-st">elif</span><span class="crayon-h"> </span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-h">  </span><span class="crayon-c"># The test sentence is the last sentence, there is no right-hand section to test</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-365"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-366"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-367"><span class="crayon-h">                    </span><span class="crayon-v">temp_string</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-368"><span class="crayon-h">                    </span><span class="crayon-v">temp_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">temp_string</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-369"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-370"><span class="crayon-h">            </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-371"><span class="crayon-h">                </span><span class="crayon-v">adjacent_sentence_left</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-372"><span class="crayon-h">                </span><span class="crayon-v">adjacent_sentence_right</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-373"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-374"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">adjacent_sentence_left</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">adjacent_sentence_right</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-375"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-376"><span class="crayon-h">                    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-377"><span class="crayon-h">                        </span><span class="crayon-v">temp_string</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-378"><span class="crayon-h">                        </span><span class="crayon-v">temp_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">temp_string</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-379"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-380"><span class="crayon-h">                </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-381"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-382"><span class="crayon-h">                    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-383"><span class="crayon-h">                        </span><span class="crayon-v">temp_string</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">" "</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-384"><span class="crayon-h">                        </span><span class="crayon-v">temp_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">sentence_index</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">temp_string</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-v">sentence_index</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-385"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-386"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-387"><span class="crayon-h">            </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">j</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-388"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-389"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">Exception</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-390"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-391"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-e">error</span><span class="crayon-sy">(</span><span class="crayon-s">'%s Unable to consolidate input sentence into &lt;138 length sections'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FN_NAME</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-392"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-k ">exception</span><span class="crayon-sy">(</span><span class="crayon-s">'Traceback message: \n%s'</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-393"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-394"><span class="crayon-h">    </span><span class="crayon-st">finally</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-395"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-396"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">temp_list</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-397"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-398"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-399"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">close_quotation_marks</span><span class="crayon-sy">(</span><span class="crayon-v">input_list</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-400"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-401"><span class="crayon-s">    :param input_list: a list of strings containing the consolidated text of the paragraph</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-402"><span class="crayon-s">    :return: a list of strings where quotation marks have been opened and closed in each individual string</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-403"><span class="crayon-s">    '''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-404"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-405"><span class="crayon-h">    </span><span class="crayon-v">FN_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"close_quotation_marks"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-406"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-407"><span class="crayon-h">    </span><span class="crayon-v">temp_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">input_list</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-408"><span class="crayon-h">    </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-409"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-410"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-411"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-412"><span class="crayon-h">        </span><span class="crayon-c"># To check whether there are open quotation marks, determine whether the string contains an even number</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-413"><span class="crayon-h">        </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-414"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-415"><span class="crayon-h">            </span><span class="crayon-c"># chr(34) = "</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-416"><span class="crayon-h">            </span><span class="crayon-v">number_of_quotations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">count</span><span class="crayon-sy">(</span><span class="crayon-k ">chr</span><span class="crayon-sy">(</span><span class="crayon-cn">34</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-417"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-418"><span class="crayon-h">            </span><span class="crayon-c"># Hack fix to solve issue of chr(34) being replaced with chr(96)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-419"><span class="crayon-h">            </span><span class="crayon-c">#if temp_list[0][0] == chr(96):</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-420"><span class="crayon-h">             </span><span class="crayon-c">#   temp_list[0] = chr(34) + temp_list[0][3:]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-421"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-422"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">number_of_quotations</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-423"><span class="crayon-h">                </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-k ">chr</span><span class="crayon-sy">(</span><span class="crayon-cn">34</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-424"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-425"><span class="crayon-h">                </span><span class="crayon-c"># Only append a quotation mark to the start of the sentence if one isn't already there</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-426"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-k ">chr</span><span class="crayon-sy">(</span><span class="crayon-cn">34</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-427"><span class="crayon-h">                    </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">chr</span><span class="crayon-sy">(</span><span class="crayon-cn">34</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-428"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-429"><span class="crayon-h">            </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-430"><span class="crayon-h">            </span><span class="crayon-v">temp_list</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">temp_list</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-431"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-432"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">Exception</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-433"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-434"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-e">error</span><span class="crayon-sy">(</span><span class="crayon-s">'%s Unable to close quotation marks'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FN_NAME</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-435"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-k ">exception</span><span class="crayon-sy">(</span><span class="crayon-s">'Traceback message: \n%s'</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-436"><span class="crayon-h">        </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"temp_list"</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-437"><span class="crayon-h">        </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-e">temp_list</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-438"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-439"><span class="crayon-e">    </span><span class="crayon-st">finally</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-440"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-441"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">output</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-442"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-443"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-444"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-445"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">split_sentence</span><span class="crayon-sy">(</span><span class="crayon-v">input_string</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-446"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-447"><span class="crayon-s">    :param input_string: A sentence that requires reducing in size</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-448"><span class="crayon-s">    :return: A list of strings comprising of the sentence split into smaller sections</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-449"><span class="crayon-s">    '''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-450"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-451"><span class="crayon-h">    </span><span class="crayon-v">FN_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"split_sentence"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-452"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-453"><span class="crayon-h">    </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">input_string</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-454"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-455"><span class="crayon-h">    </span><span class="crayon-c"># The sentences are divided according to the following hierarchy:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-456"><span class="crayon-h">    </span><span class="crayon-c"># 1) Full stops, question marks, exclamation marks (using NLTK)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-457"><span class="crayon-h">    </span><span class="crayon-c"># 2) Semi-colons</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-458"><span class="crayon-h">    </span><span class="crayon-c"># 3) Colons</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-459"><span class="crayon-h">    </span><span class="crayon-c"># 4) Hyphens</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-460"><span class="crayon-h">    </span><span class="crayon-c"># 5) Brackets</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-461"><span class="crayon-h">    </span><span class="crayon-c"># 6) Commas</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-462"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-463"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-464"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-465"><span class="crayon-h">        </span><span class="crayon-c"># Set the sentence length to 138 in order to accommodate quotation marks where necessary</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-466"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-467"><span class="crayon-h">        </span><span class="crayon-c"># 1) Full stops etc</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-468"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_string </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-469"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-470"><span class="crayon-h">                </span><span class="crayon-c"># Create the new sub-strings and insert them into the output list where the old sentence was</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-471"><span class="crayon-h">                </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">split_using_nltk</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-472"><span class="crayon-h">                </span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-473"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">string_position</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-474"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-475"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-476"><span class="crayon-h">        </span><span class="crayon-c"># 2) Semi-colons</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-477"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_string </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-478"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-479"><span class="crayon-h">                </span><span class="crayon-c"># Create the new sub-strings and insert them into the output list where the old sentence was</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-480"><span class="crayon-h">                </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">divide_sentence_by_puncutation</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">";"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-481"><span class="crayon-h">                </span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-482"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">string_position</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-483"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-484"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-485"><span class="crayon-h">        </span><span class="crayon-c"># 3) Colons</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-486"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_string </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-487"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-488"><span class="crayon-h">                </span><span class="crayon-c"># Create the new sub-strings and insert them into the output list where the old sentence was</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-489"><span class="crayon-h">                </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">divide_sentence_by_puncutation</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">":"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-490"><span class="crayon-h">                </span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-491"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">string_position</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-492"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-493"><span class="crayon-h">        </span><span class="crayon-c"># 4) Hyphens</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-494"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_string </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-495"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-496"><span class="crayon-h">                </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">divide_sentence_by_hyphens</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-497"><span class="crayon-h">                </span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-498"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">string_position</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-499"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-500"><span class="crayon-h">        </span><span class="crayon-c"># 5) Brackets</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-501"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_string </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-502"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-503"><span class="crayon-h">                </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">divide_sentence_by_brackets</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-504"><span class="crayon-h">                </span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-505"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">string_position</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-506"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-507"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-508"><span class="crayon-h">        </span><span class="crayon-c"># 5) #### Nouns with commas ###</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-509"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_string </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-510"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-511"><span class="crayon-h">                </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">split_nouns_and_commas</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-512"><span class="crayon-h">                </span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-513"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">string_position</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-514"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-515"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-516"><span class="crayon-h">        </span><span class="crayon-c">#6) Commas</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-517"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sub_string </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-518"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">138</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-519"><span class="crayon-h">                </span><span class="crayon-c"># Create the new sub-strings and insert them into the output list where the old sentence was</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-520"><span class="crayon-h">                </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">divide_sentence_by_puncutation</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">","</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-521"><span class="crayon-h">                </span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-e">index</span><span class="crayon-sy">(</span><span class="crayon-v">sub_string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-522"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-v">string_position</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">temp_output</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-sy">[</span><span class="crayon-v">string_position</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-523"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-524"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-525"><span class="crayon-h">        </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">consolidate_sentence</span><span class="crayon-sy">(</span><span class="crayon-v">output</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-526"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-527"><span class="crayon-h">        </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">close_quotation_marks</span><span class="crayon-sy">(</span><span class="crayon-v">output</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-528"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-529"><span class="crayon-h">        </span><span class="crayon-c"># Add quotation marks where necessary</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-530"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-531"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">Exception</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-532"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-533"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-e">error</span><span class="crayon-sy">(</span><span class="crayon-s">'%s Unable to split the input sentence'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FN_NAME</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-534"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-k ">exception</span><span class="crayon-sy">(</span><span class="crayon-s">'Traceback message: \n%s'</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-535"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-536"><span class="crayon-h">    </span><span class="crayon-st">finally</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-537"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-538"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-539"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">output</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-540"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-541"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-542"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-543"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-544"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">output_to_text_file</span><span class="crayon-sy">(</span><span class="crayon-v">input_line</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-545"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-546"><span class="crayon-s">    :param input_line: Line to enter into the output text file</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-547"><span class="crayon-s">    :return: nothing</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-548"><span class="crayon-s">    '''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-549"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-550"><span class="crayon-h">    </span><span class="crayon-v">file_name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"/home/User/FolderLocation/Output_WarAndPeace.txt"</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-551"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-552"><span class="crayon-h">    </span><span class="crayon-c"># Append the new lines to the existing file</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-553"><span class="crayon-h">    </span><span class="crayon-k ">file</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">open</span><span class="crayon-sy">(</span><span class="crayon-v">file_name</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"a"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-554"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-555"><span class="crayon-h">    </span><span class="crayon-v">line_length</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">input_line</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-556"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-557"><span class="crayon-h">    </span><span class="crayon-c"># If the line is longer than 140 characters, seperate using blank lines</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-558"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">line_length</span><span class="crayon-h"> </span><span class="crayon-o">&lt;=</span><span class="crayon-h"> </span><span class="crayon-cn">140</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-559"><span class="crayon-h">        </span><span class="crayon-k ">file</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">input_line</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">"\n"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-560"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-561"><span class="crayon-h">    </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-562"><span class="crayon-h">        </span><span class="crayon-k ">file</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-s">"\n"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-563"><span class="crayon-h">        </span><span class="crayon-k ">file</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">input_line</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">"\n"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-564"><span class="crayon-h">        </span><span class="crayon-k ">file</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-s">"\n"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-565"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-566"><span class="crayon-h">    </span><span class="crayon-k ">file</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-567"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-568"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-569"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">import_text_file</span><span class="crayon-sy">(</span><span class="crayon-v">text_file_location</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-570"><span class="crayon-h">    </span><span class="crayon-s">'''</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-571"><span class="crayon-s">    :param text_file_location: The file location of the text file to import into the story database</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-572"><span class="crayon-s">    :return: nothing</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-573"><span class="crayon-s">    '''</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-574"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-575"><span class="crayon-h">    </span><span class="crayon-v">FN_NAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"import_text_file"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-576"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-577"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-578"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-579"><span class="crayon-h">        </span><span class="crayon-v">story</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">open</span><span class="crayon-sy">(</span><span class="crayon-v">text_file_location</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'r'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-580"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-581"><span class="crayon-h">        </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">line </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">story</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-582"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-583"><span class="crayon-h">            </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">line</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-584"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-585"><span class="crayon-h">                </span><span class="crayon-v">line</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">line</span><span class="crayon-sy">.</span><span class="crayon-e">strip</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-586"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-587"><span class="crayon-h">                </span><span class="crayon-c"># Divide the sentence into sections smaller than 140 characters</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-588"><span class="crayon-h">                </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">split_sentence</span><span class="crayon-sy">(</span><span class="crayon-v">line</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-589"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-590"><span class="crayon-h">                </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">''</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-591"><span class="crayon-h">                    </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"Output"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-592"><span class="crayon-h">                    </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-e">output</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-593"><span class="crayon-e">                    </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">output_line </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-594"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-595"><span class="crayon-h">                        </span><span class="crayon-e">output_to_text_file</span><span class="crayon-sy">(</span><span class="crayon-v">output_line</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-596"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-597"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-k ">Exception</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-598"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-599"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-e">error</span><span class="crayon-sy">(</span><span class="crayon-s">'%s Unable to import text file'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">FN_NAME</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-600"><span class="crayon-h">        </span><span class="crayon-k ">logging</span><span class="crayon-sy">.</span><span class="crayon-k ">exception</span><span class="crayon-sy">(</span><span class="crayon-s">'Traceback message: \n%s'</span><span class="crayon-sy">,</span><span class="crayon-v">e</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-601"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-602"><span class="crayon-h">    </span><span class="crayon-st">finally</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-603"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-604"><span class="crayon-h">        </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"Process complete"</span></p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-605"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-606"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-607"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0aaa5657677219941-608"> </p><p class="crayon-line" id="crayon-56d5a0aaa5657677219941-609"><span class="crayon-e">import_text_file</span><span class="crayon-sy">(</span><span class="crayon-s">"/home/User/FolderLocation/WarAndPeace.txt"</span><span class="crayon-sy">)</span></p></div></div></body></html>