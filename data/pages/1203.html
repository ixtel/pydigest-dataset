<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-virtualenv-api---an-api-for-virtualenv" class="anchor" href="#virtualenv-api---an-api-for-virtualenv" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>virtualenv-api - an API for virtualenv</h1>

<p><a href="https://travis-ci.org/sjkingo/virtualenv-api"><img src="https://camo.githubusercontent.com/f4842ed565fde6ccaacc6722508117cedd6d864e/68747470733a2f2f7472617669732d63692e6f72672f736a6b696e676f2f7669727475616c656e762d6170692e737667" alt="Build Status" data-canonical-src="https://travis-ci.org/sjkingo/virtualenv-api.svg"/></a>
<a href="https://pypi.python.org/pypi/virtualenv-api"><img src="https://camo.githubusercontent.com/2d575e9eb9da69c7e1c304a077def3ef700a9f07/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7669727475616c656e762d6170692e737667" alt="Latest version" data-canonical-src="https://img.shields.io/pypi/v/virtualenv-api.svg"/></a>
<a href="https://github.com/sjkingo/virtualenv-api/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/d4e7052cfa36aabf3cd0d4c780ef98dd9e1a38b5/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f7669727475616c656e762d6170692e737667" alt="BSD License" data-canonical-src="https://img.shields.io/pypi/l/virtualenv-api.svg"/></a>
<a href="https://waffle.io/sjkingo/virtualenv-api"><img src="https://camo.githubusercontent.com/899ae7b217a1d7543cb51067980345d99a3af159/68747470733a2f2f62616467652e776166666c652e696f2f736a6b696e676f2f7669727475616c656e762d6170692e706e673f6c6162656c3d7265616479267469746c653d5265616479" alt="Stories in Ready" data-canonical-src="https://badge.waffle.io/sjkingo/virtualenv-api.png?label=ready&amp;title=Ready"/></a></p>

<p><a href="http://www.virtualenv.org/">virtualenv</a> is a tool to create isolated Python
environments.  Unfortunately, it does not expose a native Python API. This
package aims to provide an API in the form of a wrapper around virtualenv.</p>

<p>It can be used to create and delete environments and perform package management
inside the environment.</p>

<p>Full support is provided for Python 2.7 and Python 3.3+.</p>

<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>

<p>The latest stable release is available on <a href="https://pypi.python.org/pypi/virtualenv-api">PyPi</a>:</p>

<pre><code>$ pip install virtualenv-api
</code></pre>

<p>Please note that the distribution is named <code>virtualenv-api</code>, yet the Python package
is named <code>virtualenvapi</code>.</p>

<p>Alternatively, you may fetch the latest version from git:</p>

<pre><code>$ pip install git+https://github.com/sjkingo/virtualenv-api.git
</code></pre>

<h2><a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Examples</h2>

<ul>
<li>To begin managing an environment (it will be created if it does not exist):</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> virtualenvapi.manage <span class="pl-k">import</span> VirtualEnvironment
env <span class="pl-k">=</span> VirtualEnvironment(<span class="pl-s"><span class="pl-pds">'</span>/path/to/environment/name<span class="pl-pds">'</span></span>)</pre></div>

<p>You may also specify the Python interpreter to use in this environment by
passing the <code>python</code> argument to the class constructor (new in 2.1.3):</p>

<div class="highlight highlight-source-python"><pre>env <span class="pl-k">=</span> VirtualEnvironment(<span class="pl-s"><span class="pl-pds">'</span>/path/to/environment/name<span class="pl-pds">'</span></span>, <span class="pl-v">python</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>python3<span class="pl-pds">'</span></span>)</pre></div>

<p>If you have already activated a virtualenv and wish to operate on it, simply call
<code>VirtualEnvironment</code> with no arguments:</p>

<div class="highlight highlight-source-python"><pre>env <span class="pl-k">=</span> VirtualEnvironment()</pre></div>

<p><em>New in 2.1.7:</em></p>

<p>An optional argument <code>readonly</code> may be provided (defaults to <code>False</code>) that 
will prevent all operations that could potentially modify the environment.</p>

<ul>
<li>Check if the <code>mezzanine</code> package is installed:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.is_installed(<span class="pl-s"><span class="pl-pds">'</span>mezzanine<span class="pl-pds">'</span></span>)
<span class="pl-c1">False</span></pre></div>

<ul>
<li>Install the latest version of the <code>mezzanine</code> package:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.install(<span class="pl-s"><span class="pl-pds">'</span>mezzanine<span class="pl-pds">'</span></span>)</pre></div>

<ul>
<li>A wheel of the latest version of the <code>mezzanine</code> package (new in 2.1.4):</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.wheel(<span class="pl-s"><span class="pl-pds">'</span>mezzanine<span class="pl-pds">'</span></span>)</pre></div>

<ul>
<li>Install version 1.4 of the <code>django</code> package (this is pip's syntax):</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.install(<span class="pl-s"><span class="pl-pds">'</span>django==1.4<span class="pl-pds">'</span></span>)</pre></div>

<ul>
<li>Upgrade the <code>django</code> package to the latest version:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.upgrade(<span class="pl-s"><span class="pl-pds">'</span>django<span class="pl-pds">'</span></span>)</pre></div>

<ul>
<li>Upgrade all packages to their latest versions (new in 2.1.7):</li>
</ul>



<ul>
<li>Uninstall the <code>mezzanine</code> package:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.uninstall(<span class="pl-s"><span class="pl-pds">'</span>mezzanine<span class="pl-pds">'</span></span>)</pre></div>

<p>Packages may be specified as name only (to work on the latest version),
using pip's package syntax (e.g. <code>django==1.4</code>) or as a tuple of <code>('name', 'ver')</code>
(e.g. <code>('django', '1.4')</code>).</p>

<ul>
<li>A package may be installed directly from a git repository (must end with <code>.git</code>):</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.install(<span class="pl-s"><span class="pl-pds">'</span>git+git://github.com/sjkingo/cartridge-payments.git<span class="pl-pds">'</span></span>)</pre></div>

<ul>
<li>Instances of the environment provide an <code>installed_packages</code> property:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.installed_packages
[(<span class="pl-s"><span class="pl-pds">'</span>django<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>1.5<span class="pl-pds">'</span></span>), (<span class="pl-s"><span class="pl-pds">'</span>wsgiref<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>0.1.2<span class="pl-pds">'</span></span>)]</pre></div>

<ul>
<li>A list of package names is also available in the same manner:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.installed_package_names
[<span class="pl-s"><span class="pl-pds">'</span>django<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>wsgiref<span class="pl-pds">'</span></span>]</pre></div>

<ul>
<li>Search for a package on PyPI (changed in 2.1.5: this now returns a dictionary instead of list):</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> env.search(<span class="pl-s"><span class="pl-pds">'</span>virtualenv-api<span class="pl-pds">'</span></span>)
{<span class="pl-s"><span class="pl-pds">'</span>virtualenv-api<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>An API for virtualenv/pip<span class="pl-pds">'</span></span>}
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">len</span>(env.search(<span class="pl-s"><span class="pl-pds">'</span>requests<span class="pl-pds">'</span></span>))
<span class="pl-c1">231</span></pre></div>

<ul>
<li>The old functionality (pre 2.1.5) of <code>env.search</code> may be used:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">list</span>(env.search(<span class="pl-s"><span class="pl-pds">'</span>requests<span class="pl-pds">'</span></span>).items())
[(<span class="pl-s"><span class="pl-pds">'</span>virtualenv-api<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>An API for virtualenv/pip<span class="pl-pds">'</span></span>)]</pre></div>

<p>Verbose output from each command is available in the environment's <code>build.log</code>
file, which is appended to with each operation. Any errors are logged to <code>build.err</code>.</p>
</article>
  </div></body></html>