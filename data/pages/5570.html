<html><body><div><div id="usage">
<h2>Usage</h2>
<p>Add your sentry DSN and optional client configuration to your nameko config file:</p>
<pre><span class="c1"># config.yaml</span>
<span class="l-Scalar-Plain">SENTRY</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">DSN</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">...</span>
    <span class="l-Scalar-Plain">CLIENT_CONFIG</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">site</span><span class="p-Indicator">:</span> <span class="s">"my</span><span class="nv"> </span><span class="s">site</span><span class="nv"> </span><span class="s">name"</span>
        <span class="l-Scalar-Plain">processors</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">myapp.processors.SanitizePasswordsProcessor</span>
<span class="nn">...</span>
</pre>
<p>Include the <tt>SentryReporter</tt> dependency in your service class:</p>
<pre><span class="c1"># service.py</span>
<span class="kn">from</span> <span class="nn">nameko.web.handlers</span> <span class="kn">import</span> <span class="n">http</span>
<span class="kn">from</span> <span class="nn">nameko_sentry</span> <span class="kn">import</span> <span class="n">SentryReporter</span>

<span class="k">class</span> <span class="nc">Service</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s2">"demo"</span>

    <span class="n">sentry</span> <span class="o">=</span> <span class="n">SentryReporter</span><span class="p">()</span>

    <span class="nd">@http</span><span class="p">(</span><span class="s2">"GET"</span><span class="p">,</span> <span class="s2">"/broken"</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">broken</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">SomeException</span><span class="p">(</span><span class="s2">"boom"</span><span class="p">)</span>
</pre>
<p>Run your service, providing the config file:</p>
<pre>$ nameko run service --config config.yaml
</pre>
<p>Exceptions in entrypoints will be sent to your sentry server:</p>
<pre>$ curl -i http://localhost:8000/broken
HTTP/1.1 <span class="m">500</span> INTERNAL SERVER ERROR
Content-Type: text/plain<span class="p">;</span> <span class="nv">charset</span><span class="o">=</span>utf-8
Content-Length: 23
Date: Tue, <span class="m">28</span> Jul <span class="m">2015</span> 13:34:06 GMT

Error: SomeException: boom
</pre>
<img src="screenshot.png"/>
</div>


</div></body></html>