<html><body><div><div class="article--content">

            <blockquote>
                <strong>
                We are available for Go/Python/Haskell/Data Science projects. Drop us a mail at <a href="mailto:team@wearewizards.io">team@wearewizards.io</a>!
                </strong>
            </blockquote>

            <p><em>Reading time: ~25 minutes.</em></p>
<p>I have lived in 4 countries on 3 continents (so far).<br/>
When people ask me about these places, the first thing that comes to my mind is the weather.
Having lived in these places I knew roughly how they compared but was curious about the exact numbers. What better way than to visualize data than a ipython notebook!
 </p>
<p>We're going to look at the following four places:</p>
<ul>
<li>Nice, France (my hometown)</li>
<li>London, England</li>
<li>Montreal, Canada</li>
<li>Naha, Japan: in Okinawa, see <a href="https://goo.gl/maps/s520D">Google Maps</a> for exact location</li>
</ul>
<blockquote>
<p>I lived in Uruma, not in Naha but Naha being the capital city of Okinawa, the data is coming from there. Okinawa is not really big though so it's ok to use that data.</p>
</blockquote>
<h2>Getting the data</h2>
<p>There are weather stations all over the world but finding their data can be a bit tricky. Also, Nice is a very hard term to google surprisingly enough.<br/>
I managed to find data for all the cities but Nice on various local websites when Tom linked <a href="http://en.tutiempo.net/climate">TuTiempo.net</a> which aggregates that data in a single place. Great, only one website to scrape!<br/>
The <a href="https://gist.github.com/Keats/0ba9be4e514b2a90e59f">script</a> is quite simple and only depends on <a href="https://pypi.python.org/pypi/requests">requests</a> and <a href="https://pypi.python.org/pypi/beautifulsoup4">BeautifulSoup4</a>. You can run it if you want but there are some limitations like requiring folders to exist or having to delete the CSV before running it again. 
The four CSV and the following notebook are available on this <a href="https://github.com/Keats/cities-article">repo</a>.</p>
<h2>Looking at the data</h2>
<p>You can see the notebook below.</p>
<p>
</p><div class="cell border-box-sizing code_cell rendered">
<div class="input">
<p class="prompt input_prompt">In [1]:</p>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span>  <span class="c"># make charts prettier and more readable</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<p class="prompt input_prompt">In [2]:</p>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Let's load one of the CSV to see what they look like</span>
<span class="n">nice</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'nice.csv'</span><span class="p">)</span>
<span class="n">nice</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><p class="prompt output_prompt">Out[2]:</p>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th/>
      <th>month</th>
      <th>avg_temp</th>
      <th>min_temp</th>
      <th>max_temp</th>
      <th>humidity</th>
      <th>rainfall</th>
      <th>raindays</th>
      <th>snowdays</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-2011</td>
      <td>8.6</td>
      <td>4.8</td>
      <td>12.4</td>
      <td>67.0</td>
      <td>2.9</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02-2011</td>
      <td>9.3</td>
      <td>7.1</td>
      <td>11.1</td>
      <td>69.1</td>
      <td>2.9</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>03-2011</td>
      <td>11.7</td>
      <td>7.8</td>
      <td>14.3</td>
      <td>67.0</td>
      <td>3.9</td>
      <td>5</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>04-2011</td>
      <td>15.6</td>
      <td>13.3</td>
      <td>18.5</td>
      <td>67.4</td>
      <td>0.4</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>05-2011</td>
      <td>19.7</td>
      <td>16.6</td>
      <td>24.8</td>
      <td>60.6</td>
      <td>0.0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<p class="prompt input_prompt">
</p>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see the shape of our CSV files.<br/>
There are 8 columns, all pretty explicit and containing the average for the month in column month except for raindays and snowdays which contains the number of days in that month where it rained and snowed respectively.</p>
<p>Note: I currently count raindays as the number of days where the rainfall is above 5mm (which is completely arbitrary).<br/>
If you look at the website I scraped it does contain a column for rain days  but some days are marked as rain days when there is no rainfall and the reverse.<br/>
Even then it's not really accurate as I'm only interested in quality of life and rain at 4am is not annoying lots of people.</p>
<p>Cool. Let's try plotting something first to see if everything is okay and load the other cities.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<p class="prompt input_prompt">In [3]:</p>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">_</span> <span class="o">=</span> <span class="n">nice</span><span class="p">[</span><span class="s">'avg_temp'</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>



</div>
<div class="cell border-box-sizing text_cell rendered">
<p class="prompt input_prompt">
</p>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>While we could continue having one <code>DataFrame</code> per city, it is more convenient to have one <code>DataFrame</code> containing all the data as this allows us to use plotting directly from it like we did above.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<p class="prompt input_prompt">In [4]:</p>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">locations</span> <span class="o">=</span> <span class="p">[</span><span class="s">'nice'</span><span class="p">,</span> <span class="s">'montreal'</span><span class="p">,</span> <span class="s">'okinawa'</span><span class="p">,</span> <span class="s">'london'</span><span class="p">]</span>
<span class="n">weather</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">:</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s">'%s.csv'</span> <span class="o">%</span> <span class="n">location</span><span class="p">)</span>
    <span class="c"># We need to keep track of where it's coming from obviously</span>
    <span class="n">frame</span><span class="p">[</span><span class="s">'location'</span><span class="p">]</span> <span class="o">=</span> <span class="n">location</span>
    <span class="n">weather</span> <span class="o">=</span> <span class="n">weather</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

<span class="c"># Alternative to using slicing</span>
<span class="n">weather</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><p class="prompt output_prompt">Out[4]:</p>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th/>
      <th>month</th>
      <th>avg_temp</th>
      <th>min_temp</th>
      <th>max_temp</th>
      <th>humidity</th>
      <th>rainfall</th>
      <th>raindays</th>
      <th>snowdays</th>
      <th>location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>01-2011</td>
      <td>8.6</td>
      <td>4.8</td>
      <td>12.4</td>
      <td>67.0</td>
      <td>2.9</td>
      <td>5</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>1</th>
      <td>02-2011</td>
      <td>9.3</td>
      <td>7.1</td>
      <td>11.1</td>
      <td>69.1</td>
      <td>2.9</td>
      <td>5</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>2</th>
      <td>03-2011</td>
      <td>11.7</td>
      <td>7.8</td>
      <td>14.3</td>
      <td>67.0</td>
      <td>3.9</td>
      <td>5</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>3</th>
      <td>04-2011</td>
      <td>15.6</td>
      <td>13.3</td>
      <td>18.5</td>
      <td>67.4</td>
      <td>0.4</td>
      <td>1</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>4</th>
      <td>05-2011</td>
      <td>19.7</td>
      <td>16.6</td>
      <td>24.8</td>
      <td>60.6</td>
      <td>0.0</td>
      <td>0</td>
      <td>0</td>
      <td>nice</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<p class="prompt input_prompt">
</p>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also use <code>.describe()</code> on a <code>DataFrame</code> instead of doing <code>.median()</code>, <code>.sum()</code> etc on every single column to have a quick overview of all the variables.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">


<div class="output_wrapper">
<div class="output">


<div class="output_area"><p class="prompt output_prompt">Out[5]:</p>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th/>
      <th>avg_temp</th>
      <th>min_temp</th>
      <th>max_temp</th>
      <th>humidity</th>
      <th>rainfall</th>
      <th>raindays</th>
      <th>snowdays</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
      <td>192.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>14.698437</td>
      <td>9.718750</td>
      <td>19.635937</td>
      <td>70.260937</td>
      <td>3.507292</td>
      <td>4.843750</td>
      <td>2.114583</td>
    </tr>
    <tr>
      <th>std</th>
      <td>9.001405</td>
      <td>11.141769</td>
      <td>7.269971</td>
      <td>7.409749</td>
      <td>3.491553</td>
      <td>3.241834</td>
      <td>5.640857</td>
    </tr>
    <tr>
      <th>min</th>
      <td>-10.000000</td>
      <td>-24.900000</td>
      <td>1.600000</td>
      <td>54.200000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>9.150000</td>
      <td>4.650000</td>
      <td>13.950000</td>
      <td>65.300000</td>
      <td>1.400000</td>
      <td>2.750000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>16.250000</td>
      <td>11.950000</td>
      <td>20.950000</td>
      <td>69.750000</td>
      <td>2.700000</td>
      <td>5.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>21.025000</td>
      <td>16.600000</td>
      <td>25.225000</td>
      <td>74.800000</td>
      <td>3.900000</td>
      <td>7.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>29.600000</td>
      <td>28.400000</td>
      <td>30.700000</td>
      <td>87.500000</td>
      <td>22.000000</td>
      <td>15.000000</td>
      <td>25.000000</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<p class="prompt input_prompt">In [11]:</p>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Define some styles that we will reuse for all line graphs</span>
<span class="n">styles</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'london'</span><span class="p">:</span> <span class="s">'go-'</span><span class="p">,</span>
    <span class="s">'nice'</span><span class="p">:</span> <span class="s">'ro-'</span><span class="p">,</span>
    <span class="s">'montreal'</span><span class="p">:</span> <span class="s">'bo-'</span><span class="p">,</span>
    <span class="s">'okinawa'</span><span class="p">:</span> <span class="s">'co-'</span><span class="p">,</span>
<span class="p">}</span>

<span class="c"># we define a method since we will need to do that pretty often</span>
<span class="k">def</span> <span class="nf">plot_grouped_by</span><span class="p">(</span><span class="n">dataframe</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
    <span class="sd">"""Plots the dataframe grouped by location for the given column"""</span>
    <span class="c"># Need to use the month as the index</span>
    <span class="n">locations</span> <span class="o">=</span> <span class="n">dataframe</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">'month'</span><span class="p">)</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'location'</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">loc_name</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">locations</span><span class="p">:</span>
        <span class="n">loc</span><span class="p">[</span><span class="n">column_name</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'month'</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">loc_name</span><span class="p">),</span> <span class="n">style</span><span class="o">=</span><span class="n">styles</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">loc_name</span><span class="p">)])</span>


<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

<span class="n">plot_grouped_by</span><span class="p">(</span><span class="n">weather</span><span class="p">,</span> <span class="s">'avg_temp'</span><span class="p">)</span>

<span class="c"># Yes, I did add the 40 degrees tick just to be able to fit the legend properly</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s">"upper left"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Monthly average temperature 2011-2014"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Temperature (celsius)"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> 
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">"Time"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> 
</pre></div>

</div>
</div>
</div>



</div>
<div class="cell border-box-sizing text_cell rendered">
<p class="prompt input_prompt">
</p>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can make a few observations on this chart:</p>
<ul>
<li>Montreal has the biggest variance in temperature throughout the year: from very cold in winter to quite warm in summer</li>
<li>London is disappointingly average and is missing at least 10° on its summer time for my taste</li>
<li>Okinawa is hot, even winter is warmer than London's summer most of the time</li>
<li>Nice has a nice weather, hot in summer but not too cold in winter</li>
</ul>
<p>For the next plots, let's focus on 2014 only in order to have an idea on how a year looks like in those cities.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<p class="prompt input_prompt">In [7]:</p>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Making sure we have a datetime first rather than a string</span>
<span class="n">weather</span><span class="p">[</span><span class="s">'month'</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">weather</span><span class="p">[</span><span class="s">'month'</span><span class="p">],</span> <span class="nb">format</span><span class="o">=</span><span class="s">"%m-%Y"</span><span class="p">)</span>
<span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c"># pandas allows all kind of iterator magic</span>
<span class="n">weather_2014</span> <span class="o">=</span> <span class="n">weather</span><span class="p">[</span><span class="n">weather</span><span class="o">.</span><span class="n">month</span> <span class="o">&gt;=</span> <span class="n">start</span><span class="p">]</span>
<span class="n">weather_2014</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><p class="prompt output_prompt">Out[7]:</p>

<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th/>
      <th>month</th>
      <th>avg_temp</th>
      <th>min_temp</th>
      <th>max_temp</th>
      <th>humidity</th>
      <th>rainfall</th>
      <th>raindays</th>
      <th>snowdays</th>
      <th>location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>36</th>
      <td>2014-01-01</td>
      <td>9.7</td>
      <td>6.4</td>
      <td>12.4</td>
      <td>71.6</td>
      <td>9.2</td>
      <td>11</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>37</th>
      <td>2014-02-01</td>
      <td>9.9</td>
      <td>6.8</td>
      <td>13.4</td>
      <td>69.6</td>
      <td>4.6</td>
      <td>7</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>38</th>
      <td>2014-03-01</td>
      <td>12.5</td>
      <td>7.4</td>
      <td>15.4</td>
      <td>62.3</td>
      <td>2.7</td>
      <td>3</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>39</th>
      <td>2014-04-01</td>
      <td>15.3</td>
      <td>13.2</td>
      <td>17.3</td>
      <td>69.3</td>
      <td>0.3</td>
      <td>0</td>
      <td>0</td>
      <td>nice</td>
    </tr>
    <tr>
      <th>40</th>
      <td>2014-05-01</td>
      <td>17.5</td>
      <td>14.4</td>
      <td>20.2</td>
      <td>64.1</td>
      <td>0.6</td>
      <td>1</td>
      <td>0</td>
      <td>nice</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<p class="prompt input_prompt">In [12]:</p>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Let's look at temperatures and humidity</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="c"># this 221 means we want a 2x2 plots display and this is the first one </span>
<span class="c"># (so upper left)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">221</span><span class="p">)</span>

<span class="n">plot_grouped_by</span><span class="p">(</span><span class="n">weather_2014</span><span class="p">,</span> <span class="s">'avg_temp'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s">"lower center"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Monthly average temperature 2014"</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Temperature (celsius)"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> 

<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">222</span><span class="p">)</span>

<span class="n">plot_grouped_by</span><span class="p">(</span><span class="n">weather_2014</span><span class="p">,</span> <span class="s">'max_temp'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s">"lower center"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Max temperature 2014"</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Temperature (celsius)"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> 

<span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">223</span><span class="p">)</span>

<span class="n">plot_grouped_by</span><span class="p">(</span><span class="n">weather_2014</span><span class="p">,</span> <span class="s">'min_temp'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([</span><span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s">"lower center"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Min temperature 2014"</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Temperature (celsius)"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> 

<span class="n">ax4</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">224</span><span class="p">)</span>

<span class="n">plot_grouped_by</span><span class="p">(</span><span class="n">weather_2014</span><span class="p">,</span> <span class="s">'humidity'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Average monthly humidity % in 2014 (legend identical)"</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Humidity %"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> 
</pre></div>

</div>
</div>
</div>



</div>
<div class="cell border-box-sizing text_cell rendered">
<p class="prompt input_prompt">
</p>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Looking at those graphs we can notice a few things:</p>
<ul>
<li>Montreal winter is pretty damn cold but is not really humid, which makes it not THAT bad and Canadians know how to do proper insulation. Summer is quite nice all around, nice temperatures and pretty dry.</li>
<li>Nice is good all year round, it sometimes gets below 10° but never reaches 0° while being dry. Having grown up there I feel like I have been spoiled when it comes to weather.</li>
<li>London is average but we can see the winter is very humid, which is the reason why I feel colder when it's 0° in London than -15° in Montreal.</li>
<li>Okinawa looks really good until you experience that summer humidity. For those that haven't lived in a tropical climate, it means that you are sweating an awful lot very quickly and air con is a necessity.</li>
</ul>
<p>To finish this notebook, let's have a look at the rain and snow data.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<p class="prompt input_prompt">In [9]:</p>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">colors</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'london'</span><span class="p">:</span> <span class="s">'green'</span><span class="p">,</span>
    <span class="s">'nice'</span><span class="p">:</span> <span class="s">'red'</span><span class="p">,</span>
    <span class="s">'montreal'</span><span class="p">:</span> <span class="s">'blue'</span><span class="p">,</span>
    <span class="s">'okinawa'</span><span class="p">:</span> <span class="s">'cyan'</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">bar_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">column_name</span><span class="p">):</span>
    <span class="n">weather_2014</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span>
        <span class="p">[</span><span class="s">'month'</span><span class="p">,</span> <span class="s">'location'</span><span class="p">]</span>
    <span class="p">)</span><span class="o">.</span><span class="n">unstack</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
        <span class="n">kind</span><span class="o">=</span><span class="s">'bar'</span><span class="p">,</span> 
        <span class="n">y</span><span class="o">=</span><span class="n">column_name</span>
    <span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>

<span class="n">bar_plot</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="s">"raindays"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s">"best"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Rain days per month in 2014"</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Number of rain days"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> 

<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">)</span>

<span class="n">bar_plot</span><span class="p">(</span><span class="n">ax2</span><span class="p">,</span> <span class="s">"snowdays"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">loc</span><span class="o">=</span><span class="s">"best"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">"Snow days per month in 2014"</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">"Number of snow days"</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> 
</pre></div>

</div>
</div>
</div>



</div>
<div class="cell border-box-sizing text_cell rendered">
<p class="prompt input_prompt">
</p>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see it's raining quite a bit in Okinawa since they have a rainy season (May-June) and a typhoon season (June-November).<br/>
Nice is probably the nicest, having close to no rains during summer.<br/>
When it comes to snow, Montreal is the only contender as snow in Nice and London is very rare and it hasn't snowed in Okinawa for over 30 years.</p>
<p>While weather is only one of the elements that are necessary to consider when moving (along with salary, atmosphere, friends/family etc.), it is one of the most important thing for me.<br/>
If I had to make a ranking of those cities on a weather basis, it would be:</p>
<ol>
<li>Nice</li>
<li>Montreal</li>
<li>Okinawa/London</li>
</ol>
<p>Okinawa and London are tied for completely different reasons: one has the legendary British weather and its 2 weeks of summer and the other is so hot and humid that it can be hard to breath at times (but you get amazing sea and beaches).<br/>
Now that you have seen how to use Pandas (for those that had never tried it before), it's up to you to finds things to compare. Do share them when you do as it is always interesting to read.</p>

</div>
</div>
</div>
        </div>

        </div></body></html>