<html><body><div><div class="entry-content">
		<p>There’s this stereotype that scientists tend to write one-off scripts rather than modular and reusable code. I’m not sure how true this stereotype actually holds, but I’ve encountered at least a few examples of one-off scripts (and, of course, I’ve been guilty of producing several myself in the past). Naturally, there are also plenty of beautifully engineered examples of software produced by scientists – albeit these are often produced by large teams and at large scale. In contrast to these more robust pieces of software,<strong> I’m interested in discussing a workflow that works at a one-person scale and is easily replicated and integrated into larger systems.</strong></p>
<p><span id="more-26"/>I’ve seen some examples of research code in class or tutorials intended for numerical computing, and these code snippets tend to look something like this:</p>
<pre>#Let's pretend this is Python
data1 = load_data_from_source(my_source)
transformed_data = my_function(data1)
my_plotting_function(transformed_data)</pre>
<p>There’s nothing wrong with the previous code typed into some kind of REPL environment (e.g. Python Shell), but it tends to work best when you only need it once. But, as a rule, <strong>you generally want procedures to be modular and easy to replicate</strong>. I can’t count the number of times I thought I needed a one-off script, but then I had to make a small modification, and weeks later I had a pile of code spaghetti.</p>
<p>What’s worked really well for me is a two-pronged approach: <strong>Methods and objects are defined in Python script files and runtime is handled in an IPython environment</strong>. There are a few benefits to this system; an object-oriented design helps shape modular thinking and lets you build around your data structures. By handling runtime in IPython, you have the bonus of inline plots, git-commitable runtime instances, and the ability to share any open-source notebooks to anyone with a web browser. So, my codebase tends to look more like this:</p>
<pre>#File: models.py

class MyDataObject:
  def __init__(self):
    self.numeric_data = 0</pre>
<pre>#File: data_handlers.py
from models import MyDataObject

class MyDataHandler:
  def __init__(self):
    self.data_object = MyDataObject() 

  def set_data(self, val):
    self.data_object.numeric_data = val

  def mult_data_by_two(self):
    return self.data_object.numeric_data * 2</pre>
<pre>#File: my_notebook.ipynb
#'ipynb' extension is for IPython Notebooks

from data_handlers import MyDataHandler

dh = MyDataHandler()
dh.set_data(1)
print dh.mult_data_by_two()</pre>
<p>Hopefully, you can see that this structure improves readability and allows for great modularity. <strong>Modular design also forces you to think about the schematics of the data you want to load, compute and transform before you get to that stage</strong>. This kind of thinking may save you from lots of rewriting. (It certainly did for me.)</p>
<p>A side-bonus of this structure is that it adapts very well to RESTful web APIs: If you’ve been careful about how your object methods are written, then you can just expose the function calls via a web interface using one of many Python web frameworks. <strong>It can be very messy integrating with someone else’s research codebase, but if you have servers listening for API calls, then no one has to fiddle with anyone else’s core codebase</strong>.</p>
<p>Please let me know if you find any errors or have any additional thoughts on building robust research codebases! Thanks for reading.</p>
		<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded" id="like-post-wrapper-72031807-26-56d5b96276979" data-src="//widgets.wp.com/likes/#blog_id=72031807&amp;post_id=26&amp;origin=nanodatum.wordpress.com&amp;obj_id=72031807-26-56d5b96276979" data-name="like-post-frame-72031807-26-56d5b96276979"><h3 class="sd-title">Like this:</h3><p class="likes-widget-placeholder post-likes-widget-placeholder"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></p><span class="sd-text-color"/><a class="sd-link-color"/></div></div>			</div>

	</div></body></html>