<html><body><div><article id="U0kPpF3D4xmp54GR1rX3" class="post  historical">
	<time datetime="2015-02-17" class="article_time">February 17, 2015</time>
  
	<p>This post discusses the use of the <code class="prettyprint">_</code> character in Python. Like with many things in Python, we’ll see that different usages of <code class="prettyprint">_</code> are mostly (not always!) a matter of convention.</p>
<h1 id="single-lone-underscore-code-classprettyprintc_1">
<a class="head_anchor" href="#single-lone-underscore-code-classprettyprintc_1" rel="nofollow"> </a>Single Lone Underscore (<code class="prettyprint">_</code>)</h1>
<p>This is typically used in 3 cases:</p>

<ol>
<li>
<p><strong>In the interpreter</strong>: The <code class="prettyprint">_</code> name points to the result of the last executed statement in an interactive interpreter session. This was first done by the standard CPython interpreter, and others have followed too.</p>

<pre><code class="prettyprint">&gt;&gt;&gt; _
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
NameError: name '_' is not defined
&gt;&gt;&gt; 42
&gt;&gt;&gt; _
42
&gt;&gt;&gt; 'alright!' if _ else ':('
'alright!'
&gt;&gt;&gt; _
'alright!'
</code></pre>
</li>
<li>
<p><strong>As a name</strong>: This is somewhat related to the previous point. <code class="prettyprint">_</code> is used as a <em>throw-away</em> name. This will allow the next person reading your code to know that, by convention, a certain name is assigned but not intended to be used. For instance, you may not be interested in the actual value of a loop counter:</p>

<pre><code class="prettyprint">n = 42
for _ in range(n):
    do_something()
</code></pre>
</li>
<li>
<p><strong>i18n</strong>: One may also see <code class="prettyprint">_</code> being used as a function. In that case, it is often the name used for the function that does internationalisation and localisation string translation lookups. This <em>seems</em> to have originated from and follow the corresponding C convention.<br/>
For instance, as seen in the <a href="https://docs.djangoproject.com/en/dev/topics/i18n/translation/" rel="nofollow">Django documentation for translation</a>, you may have:</p>

<pre><code class="prettyprint">from django.utils.translation import ugettext as _
from django.http import HttpResponse

def my_view(request):
    output = _("Welcome to my site.")
    return HttpResponse(output)
</code></pre>
</li>
</ol>

<p>The second and third purposes can conflict, so one should avoid using <code class="prettyprint">_</code> as a throw-away name in any code block that also uses it for i18n lookup and translation.</p>
<h1 id="single-underscore-before-a-name-eg-code-class_1">
<a class="head_anchor" href="#single-underscore-before-a-name-eg-code-class_1" rel="nofollow"> </a>Single Underscore Before a Name (e.g. <code class="prettyprint">_shahriar</code>)</h1>
<p>A single underscore before a name is used to specify that the name is to be treated as “private” by a programmer. It’s <em>kind of</em>* a convention so that the next person (or yourself) using your code knows that a name starting with <code class="prettyprint">_</code> is for internal use. As the <a href="https://docs.python.org/3.4/tutorial/classes.html#tut-private" rel="nofollow">Python documentation notes</a>:</p>
<blockquote class="large">
<p>a name prefixed with an underscore (e.g. <code class="prettyprint">_spam</code>) should be treated as a non-public part of the API (whether it is a function, a method or a data member). It should be considered an implementation detail and subject to change without notice.</p>
</blockquote>
<p>* I say <em>kind of</em> a convention because it actually does mean something to the interpreter; if you <code class="prettyprint">from &lt;module/package&gt; import *</code>, none of the names that start with an <code class="prettyprint">_</code> will be imported unless the module’s/package’s <code class="prettyprint">__all__</code> list explicitly contains them. See <a href="http://shahriar.svbtle.com/importing-star-in-python" rel="nofollow">“Importing <code class="prettyprint">*</code> in Python”</a> for more on this.</p>
<h1 id="double-underscore-before-a-name-eg-code-class_1">
<a class="head_anchor" href="#double-underscore-before-a-name-eg-code-class_1" rel="nofollow"> </a>Double Underscore Before a Name (e.g. <code class="prettyprint">__shahriar</code>)</h1>
<p>The use of double underscore (<code class="prettyprint">__</code>) in front of a name (specifically a method name) is not a convention; it has a specific meaning to the interpreter. Python <a href="http://en.wikipedia.org/wiki/Name_mangling" rel="nofollow">mangles</a> these names and it is used to avoid name clashes with names defined by subclasses. As the <a href="https://docs.python.org/3.4/tutorial/classes.html#tut-private" rel="nofollow">Python documentation notes</a>, any identifier of the form <code class="prettyprint">__spam</code> (at least two leading underscores, <strong>at most one trailing underscore</strong>) is textually replaced with <code class="prettyprint">_classname__spam</code>, where <code class="prettyprint">classname</code> is the current class name with leading underscore(s) stripped.</p>

<p>Take the following example:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; class A(object):
...     def _internal_use(self):
...         pass
...     def __method_name(self):
...         pass
... 
&gt;&gt;&gt; dir(A())
['_A__method_name', ..., '_internal_use']
</code></pre>

<p>As expected, <code class="prettyprint">_internal_use</code> doesn’t change but <code class="prettyprint">__method_name</code> is mangled to <code class="prettyprint">_ClassName__method_name</code>. Now, if you create a subclass of <code class="prettyprint">A</code>, say <code class="prettyprint">B</code> (argh, bad, bad names!) then you can’t easily override <code class="prettyprint">A</code>’s <code class="prettyprint">__method_name</code>:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; class B(A):
...     def __method_name(self):
...         pass
... 
&gt;&gt;&gt; dir(B())
['_A__method_name', '_B__method_name', ..., '_internal_use']
</code></pre>

<p>The intended behaviour here is almost equivalent to <code class="prettyprint">final</code> methods in Java and normal (non-virtual) methods in C++.</p>
<h1 id="double-underscore-before-and-after-a-name-eg_1">
<a class="head_anchor" href="#double-underscore-before-and-after-a-name-eg_1" rel="nofollow"> </a>Double Underscore Before and After a Name (e.g. <code class="prettyprint">__init__</code>)</h1>
<p>These are <a href="https://docs.python.org/3.4/reference/datamodel.html#specialnames" rel="nofollow">special method names</a> used by Python. As far as one’s concerned, this is just a convention, a way for the Python system to use names that won’t conflict with user-defined names. You then typically override these methods and define the desired behaviour for when Python calls them. For example, you often override the <code class="prettyprint">__init__</code> method when writing a class.</p>

<p>There is nothing to stop you from writing your own special-method-looking name (but, please don’t):</p>

<pre><code class="prettyprint">&gt;&gt;&gt; class C(object):
...     def __mine__(self):
...         pass
...
&gt;&gt;&gt; dir(C)
... [..., '__mine__', ...]
</code></pre>

<p>It’s easier to stay away from this type of naming and let only Python-defined special names follow this convention.</p>

<hr/>

<p>Discussion on <a href="https://news.ycombinator.com/item?id=9065303" rel="nofollow">hackernews</a> and <a href="http://www.reddit.com/r/Python/comments/2w8myi/underscores_in_python/" rel="nofollow">reddit</a>.</p>

  <figure class="postend kudo able clearfix" id="kudo_U0kPpF3D4xmp54GR1rX3">
    <a href="#kudo">
      <p class="filling"> </p>
    </a>
    <p class="num">597</p>
    <p class="txt">Kudos</p>
  </figure>
  <figure class="side kudo able clearfix" id="kudo_side_U0kPpF3D4xmp54GR1rX3">
    <a href="#kudo">
      <p class="filling"> </p>
    </a>
    <p class="num">597</p>
    <p class="txt">Kudos</p>
  </figure>
</article>

  </div></body></html>