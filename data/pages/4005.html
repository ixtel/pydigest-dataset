<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-building-blocks-dicts-modules-and-scope" class="anchor" href="#building-blocks-dicts-modules-and-scope" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Building blocks: Dicts, modules and scope</h1>

<p>We start with the basics. It's easy enough to see what's going on with a block of code like this:</p>



<p>and we think we understand that this does the same thing:</p>

<div class="highlight highlight-source-python"><pre>greeting <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>
<span class="pl-c1">print</span> greeting</pre></div>

<p>But there's an important note here: what is this mysterious <code>greeting</code>, and how is it stored?</p>

<h2><a id="user-content-global-scope" class="anchor" href="#global-scope" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Global Scope</h2>

<p>To find out, we run the <code>globals()</code> function, and look at what it returns.</p>

<p>You'll see a dict (that's a hash map for those of you new to python), with a bunch of keys.
We'll talk about most of these later. But what's important right now is that our "greeting"
variable is in the dict. You should see that it maps <code>"greeting": "Hello World"</code>.</p>

<p>You can also use <code>locals()</code> to see your local scope (more on that later).
But for now, note that when you run a simple piece of code directly,
the global scope <strong>is</strong> the local scope, and these two functions return the same thing.</p>

<p>Now try this:</p>

<div class="highlight highlight-source-python"><pre>d <span class="pl-k">=</span> <span class="pl-c1">globals</span>()
d[<span class="pl-s"><span class="pl-pds">"</span>greeting<span class="pl-pds">"</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Goodbye World<span class="pl-pds">"</span></span>
<span class="pl-c1">print</span> greeting</pre></div>

<p>and sure enough, it will print "Goodbye World".
This globals() dict, in a very real way, is the entire collection of global variables
present in this module. Wait, module? Well, let me go off on a slight tangent.</p>

<h2><a id="user-content-modules" class="anchor" href="#modules" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Modules</h2>

<p>If you've done some basic python, you'll have seen things like import statements.
You might have even written some of your own code in one file, and imported it for use in another.</p>

<p>These file-level constructs are known as <strong>modules</strong>.
Each module has a globals dict containing global variables,
along with some baked-in defaults like <code>__name__</code> and <code>__package__</code>.
These modules are, in fact, objects (more on that later) and when you access
attributes of them (eg. <code>sys.stdin</code>), you're actually accessing the module's global scope.</p>

<blockquote>
<p>But wait, what about all those functions and classes I define? Where do they go?</p>
</blockquote>

<p>Good question. The trick to realise there is...</p>

<h2><a id="user-content-everything-is-an-assignment" class="anchor" href="#everything-is-an-assignment" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Everything is an assignment</h2>

<p>Consider the following snippets:</p>





<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">Foobar</span>(<span class="pl-c1">object</span>):
    <span class="pl-k">pass</span></pre></div>

<p>They all have something in common - they add something to the local scope.
What I mean is, after you <code>import sys</code>, you can access the <code>sys</code> module.
And this works just like the <code>greeting</code> example above:</p>

<pre lang="pycon"><code>&gt;&gt;&gt; import sys
&gt;&gt;&gt; globals()["sys"] is sys
True
</code></pre>

<p><code>def</code> and <code>class</code> do the same thing - they first define a function or a class,
then they assign the defined function or class to the name you gave it. So something like:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">add</span>(<span class="pl-smi">x</span>, <span class="pl-smi">y</span>):
    <span class="pl-k">return</span> x <span class="pl-k">+</span> y</pre></div>

<p>is equivilent to</p>



<p>(well actually there's some differences in the details of the function object, but more on that later)</p>
</article>
  </div></body></html>