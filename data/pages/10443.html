<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-weixinbot---" class="anchor" href="#weixinbot---" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>WeixinBot <a href="http://github.com/Urinx/WeixinBot"><img src="https://camo.githubusercontent.com/1b1b8938dc70a65153de03a7ab18d9eaee93fed9/687474703a2f2f6769746875622d7376672d627574746f6e732e6865726f6b756170702e636f6d2f737461722e7376673f757365723d5572696e78267265706f3d57656978696e426f74267374796c653d666c6174266261636b67726f756e643d313038314331" alt="star this repo" data-canonical-src="http://github-svg-buttons.herokuapp.com/star.svg?user=Urinx&amp;repo=WeixinBot&amp;style=flat&amp;background=1081C1"/></a> <a href="http://github.com/Urinx/WeixinBot/fork"><img src="https://camo.githubusercontent.com/5552c030abcc6a56ae657b12aaa86c9f862408e7/687474703a2f2f6769746875622d7376672d627574746f6e732e6865726f6b756170702e636f6d2f666f726b2e7376673f757365723d5572696e78267265706f3d57656978696e426f74267374796c653d666c6174266261636b67726f756e643d313038314331" alt="fork this repo" data-canonical-src="http://github-svg-buttons.herokuapp.com/fork.svg?user=Urinx&amp;repo=WeixinBot&amp;style=flat&amp;background=1081C1"/></a> <a href="https://camo.githubusercontent.com/392a32588691a8418368a51ff33a12d41f11f0a9/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d322e372d6666363962342e737667" target="_blank"><img src="https://camo.githubusercontent.com/392a32588691a8418368a51ff33a12d41f11f0a9/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707974686f6e2d322e372d6666363962342e737667" alt="python" data-canonical-src="https://img.shields.io/badge/python-2.7-ff69b4.svg"/></a></h1>

<p>网页版微信API，包含终端版微信及微信机器人</p>

<h2><a id="user-content-demo" class="anchor" href="#demo" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Demo</h2>

<p>为了运行 <code>weixin.py</code> 示例脚本，你需要有安装 <code>qrcode</code> 包，你可以通过 <code>pip install qrcode</code> 来安装。</p>

<p><a href="/Urinx/WeixinBot/blob/master/screenshot/1.png" target="_blank"><img src="/Urinx/WeixinBot/raw/master/screenshot/1.png" alt="1"/></a></p>

<p>按照操作指示在手机微信上扫描二维码然后登录，你可以选择是否开启自动回复模式。</p>

<p><a href="/Urinx/WeixinBot/blob/master/screenshot/2.png" target="_blank"><img src="/Urinx/WeixinBot/raw/master/screenshot/2.png" alt="2"/></a></p>

<p>开启自动回复模式后，如果接收到的是文字消息就会自动回复，包括群消息。</p>

<p><a href="/Urinx/WeixinBot/blob/master/screenshot/3.png" target="_blank"><img src="/Urinx/WeixinBot/raw/master/screenshot/3.png" alt="3"/></a></p>

<p>现在，名片，链接，动画表情和地址位置消息都可以正常接收。</p>

<p><a href="/Urinx/WeixinBot/blob/master/screenshot/4.png" target="_blank"><img src="/Urinx/WeixinBot/raw/master/screenshot/4.png" alt="4"/></a></p>

<p><a href="/Urinx/WeixinBot/blob/master/screenshot/5.png" target="_blank"><img src="/Urinx/WeixinBot/raw/master/screenshot/5.png" alt="5"/></a></p>

<p><strong>目前支持的命令</strong>：</p>

<p><code>-&gt;[昵称或ID]:[内容]</code> 给好友发送消息</p>

<p><code>m-&gt;[昵称或ID]:[文件路径]</code> 给好友发送文件中的内容</p>

<p><a href="/Urinx/WeixinBot/blob/master/screenshot/6.png" target="_blank"><img src="/Urinx/WeixinBot/raw/master/screenshot/6.png" alt="6"/></a></p>

<p><code>f-&gt;[昵称或ID]:[文件路径]</code> 给好友发送文件</p>

<p><code>i-&gt;[昵称或ID]:[图片路径]</code> 给好友发送图片</p>

<p><code>quit</code> 退出程序</p>

<p><a href="/Urinx/WeixinBot/blob/master/screenshot/7.png" target="_blank"><img src="/Urinx/WeixinBot/raw/master/screenshot/7.png" alt="7"/></a></p>

<p>注意，以上命令均不包含方括号。</p>

<h2><a id="user-content-web-weixin-pipeline" class="anchor" href="#web-weixin-pipeline" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Web Weixin Pipeline</h2>

<pre><code>       +--------------+     +---------------+   +---------------+
       |              |     |               |   |               |
       |   Get UUID   |     |  Get Contact  |   | Status Notify |
       |              |     |               |   |               |
       +-------+------+     +-------^-------+   +-------^-------+
               |                    |                   |
               |                    +-------+  +--------+
               |                            |  |
       +-------v------+               +-----+--+------+      +--------------+
       |              |               |               |      |              |
       |  Get QRCode  |               |  Weixin Init  +------&gt;  Sync Check  &lt;----+
       |              |               |               |      |              |    |
       +-------+------+               +-------^-------+      +-------+------+    |
               |                              |                      |           |
               |                              |                      +-----------+
               |                              |                      |
       +-------v------+               +-------+--------+     +-------v-------+
       |              | Confirm Login |                |     |               |
+------&gt;    Login     +---------------&gt; New Login Page |     |  Weixin Sync  |
|      |              |               |                |     |               |
|      +------+-------+               +----------------+     +---------------+
|             |
|QRCode Scaned|
+-------------+
</code></pre>

<h2><a id="user-content-web-weixin-api" class="anchor" href="#web-weixin-api" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Web Weixin API</h2>

<h3><a id="user-content-登录" class="anchor" href="#登录" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>登录</h3>



<p>返回数据(String):</p>

<pre><code>window.QRLogin.code = 200; window.QRLogin.uuid = "xxx"
</code></pre>

<p><br/></p>



<p><br/></p>



<p>返回数据(String):</p>

<pre><code>window.code=xxx;

xxx:
    408 登陆超时
    201 扫描成功
    200 确认登录

当返回200时，还会有
window.redirect_uri="https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxnewloginpage?ticket=xxx&amp;uuid=xxx&amp;lang=xxx&amp;scan=xxx";
</code></pre>

<p><br/></p>



<p>返回数据(XML):</p>

<pre><code>&lt;error&gt;
    &lt;ret&gt;0&lt;/ret&gt;
    &lt;message&gt;OK&lt;/message&gt;
    &lt;skey&gt;xxx&lt;/skey&gt;
    &lt;wxsid&gt;xxx&lt;/wxsid&gt;
    &lt;wxuin&gt;xxx&lt;/wxuin&gt;
    &lt;pass_ticket&gt;xxx&lt;/pass_ticket&gt;
    &lt;isgrayscale&gt;1&lt;/isgrayscale&gt;
&lt;/error&gt;
</code></pre>

<p><br/></p>

<h3><a id="user-content-微信初始化" class="anchor" href="#微信初始化" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>微信初始化</h3>



<p>返回数据(JSON):</p>

<pre><code>{
    "BaseResponse": {
        "Ret": 0,
        "ErrMsg": ""
    },
    "Count": 11,
    "ContactList": [...],
    "SyncKey": {
        "Count": 4,
        "List": [
            {
                "Key": 1,
                "Val": 635705559
            },
            ...
        ]
    },
    "User": {
        "Uin": xxx,
        "UserName": xxx,
        "NickName": xxx,
        "HeadImgUrl": xxx,
        "RemarkName": "",
        "PYInitial": "",
        "PYQuanPin": "",
        "RemarkPYInitial": "",
        "RemarkPYQuanPin": "",
        "HideInputBarFlag": 0,
        "StarFriend": 0,
        "Sex": 1,
        "Signature": "Apt-get install B",
        "AppAccountFlag": 0,
        "VerifyFlag": 0,
        "ContactFlag": 0,
        "WebWxPluginSwitch": 0,
        "HeadImgFlag": 1,
        "SnsFlag": 17
    },
    "ChatSet": xxx,
    "SKey": xxx,
    "ClientVersion": 369297683,
    "SystemTime": 1453124908,
    "GrayScale": 1,
    "InviteStartCount": 40,
    "MPSubscribeMsgCount": 2,
    "MPSubscribeMsgList": [...],
    "ClickReportInterval": 600000
}
</code></pre>

<p><br/></p>



<p>返回数据(JSON):</p>

<pre><code>{
    "BaseResponse": {
        "Ret": 0,
        "ErrMsg": ""
    },
    ...
}
</code></pre>

<p><br/></p>

<h3><a id="user-content-获取联系人信息" class="anchor" href="#获取联系人信息" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>获取联系人信息</h3>



<p>返回数据(JSON):</p>

<pre><code>{
    "BaseResponse": {
        "Ret": 0,
        "ErrMsg": ""
    },
    "MemberCount": 334,
    "MemberList": [
        {
            "Uin": 0,
            "UserName": xxx,
            "NickName": "Urinx",
            "HeadImgUrl": xxx,
            "ContactFlag": 3,
            "MemberCount": 0,
            "MemberList": [],
            "RemarkName": "",
            "HideInputBarFlag": 0,
            "Sex": 0,
            "Signature": "你好，我们是地球三体组织。在这里，你将感受到不一样的思维模式，以及颠覆常规的世界观。而我们的目标，就是以三体人的智慧，引领人类未来科学技术500年。",
            "VerifyFlag": 8,
            "OwnerUin": 0,
            "PYInitial": "URINX",
            "PYQuanPin": "Urinx",
            "RemarkPYInitial": "",
            "RemarkPYQuanPin": "",
            "StarFriend": 0,
            "AppAccountFlag": 0,
            "Statues": 0,
            "AttrStatus": 0,
            "Province": "",
            "City": "",
            "Alias": "Urinxs",
            "SnsFlag": 0,
            "UniFriend": 0,
            "DisplayName": "",
            "ChatRoomId": 0,
            "KeyWord": "gh_",
            "EncryChatRoomId": ""
        },
        ...
    ],
    "Seq": 0
}
</code></pre>

<p><br/></p>



<p>返回数据(JSON)同上
<br/><br/></p>

<h3><a id="user-content-同步刷新" class="anchor" href="#同步刷新" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>同步刷新</h3>

<table><thead>
<tr>
<th>API</th>
<th>synccheck</th>
</tr>
</thead><tbody>
<tr>
<td>protocol</td>
<td>https</td>
</tr>
<tr>
<td>host</td>
<td>webpush.weixin.qq.com <br/> webpush2.weixin.qq.com <br/> webpush.wechat.com <br/> webpush1.wechat.com <br/> webpush2.wechat.com <br/> webpush.wechatapp.com <br/> webpush1.wechatapp.com</td>
</tr>
<tr>
<td>path</td>
<td>/cgi-bin/mmwebwx-bin/synccheck</td>
</tr>
<tr>
<td>method</td>
<td>GET</td>
</tr>
<tr>
<td>data</td>
<td>URL Encode</td>
</tr>
<tr>
<td>params</td>
<td><strong>r</strong>: <code>时间戳</code> <br/> <strong>sid</strong>: xxx <br/> <strong>uin</strong>: xxx <br/> <strong>skey</strong>: xxx <br/> <strong>deviceid</strong>: xxx <br/> <strong>synckey</strong>: xxx <br/> <strong>_</strong>: <code>时间戳</code></td>
</tr>
</tbody></table>

<p>返回数据(String):</p>

<pre><code>window.synccheck={retcode:"xxx",selector:"xxx"}

retcode:
    0 正常
    1100 失败/登出微信
selector:
    0 正常
    2 新的消息
    7 进入/离开聊天界面
</code></pre>

<p><br/></p>



<p>返回数据(JSON):</p>

<pre><code>{
    'BaseResponse': {'ErrMsg': '', 'Ret': 0},
    'SyncKey': {
        'Count': 7,
        'List': [
            {'Val': 636214192, 'Key': 1},
            ...
        ]
    },
    'ContinueFlag': 0,
    'AddMsgCount': 1,
    'AddMsgList': [
        {
            'FromUserName': '',
            'PlayLength': 0,
            'RecommendInfo': {...},
            'Content': "", 
            'StatusNotifyUserName': '',
            'StatusNotifyCode': 5,
            'Status': 3,
            'VoiceLength': 0,
            'ToUserName': '',
            'ForwardFlag': 0,
            'AppMsgType': 0,
            'AppInfo': {'Type': 0, 'AppID': ''},
            'Url': '',
            'ImgStatus': 1,
            'MsgType': 51,
            'ImgHeight': 0,
            'MediaId': '', 
            'FileName': '',
            'FileSize': '',
            ...
        },
        ...
    ],
    'ModChatRoomMemberCount': 0,
    'ModContactList': [],
    'DelContactList': [],
    'ModChatRoomMemberList': [],
    'DelContactCount': 0,
    ...
}
</code></pre>

<p><br/></p>

<h3><a id="user-content-消息接口" class="anchor" href="#消息接口" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>消息接口</h3>

<table><thead>
<tr>
<th>API</th>
<th>webwxsendmsg</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td><a href="https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxsendmsg?pass_ticket=xxx">https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxsendmsg?pass_ticket=xxx</a></td>
</tr>
<tr>
<td>method</td>
<td>POST</td>
</tr>
<tr>
<td>data</td>
<td>JSON</td>
</tr>
<tr>
<td>header</td>
<td>ContentType: application/json; charset=UTF-8</td>
</tr>
<tr>
<td>params</td>
<td>{ <br/>      BaseRequest: { Uin: xxx, Sid: xxx, Skey: xxx, DeviceID: xxx }, <br/>      Msg: { <br/>          Type: 1 <code>文字消息</code>, <br/>          Content: <code>要发送的消息</code>, <br/>          FromUserName: <code>自己ID</code>, <br/>          ToUserName: <code>好友ID</code>, <br/>          LocalID: <code>与clientMsgId相同</code>, <br/>          ClientMsgId: <code>时间戳左移4位随后补上4位随机数</code> <br/>      } <br/> }</td>
</tr>
</tbody></table>

<p>返回数据(JSON):</p>

<pre><code>{
    "BaseResponse": {
        "Ret": 0,
        "ErrMsg": ""
    },
    ...
}
</code></pre>

<p><br/></p>

<h3><a id="user-content-图片接口" class="anchor" href="#图片接口" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>图片接口</h3>



<p><br/></p>



<p><br/></p>



<p><br/></p>

<h3><a id="user-content-多媒体接口" class="anchor" href="#多媒体接口" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>多媒体接口</h3>



<p><br/></p>



<p><br/></p>

<h3><a id="user-content-账号类型" class="anchor" href="#账号类型" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>账号类型</h3>

<table><thead>
<tr>
<th align="center">类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td align="center">个人账号</td>
<td>以<code>@</code>开头，例如：<code>@xxx</code></td>
</tr>
<tr>
<td align="center">群聊</td>
<td>以<code>@@</code>开头，例如：<code>@@xxx</code></td>
</tr>
<tr>
<td align="center">公众号/服务号</td>
<td>以<code>@</code>开头，但其<code>VerifyFlag</code> &amp; 8 != 0 <br/><br/> <code>VerifyFlag</code>: <br/>          一般公众号/服务号：8 <br/>          微信自家的服务号：24 <br/>          微信官方账号<code>微信团队</code>：56</td>
</tr>
<tr>
<td align="center">特殊账号</td>
<td>像文件传输助手之类的账号，有特殊的ID，目前已知的有：<br/> <code>filehelper</code>, <code>newsapp</code>, <code>fmessage</code>, <code>weibo</code>, <code>qqmail</code>, <code>fmessage</code>, <code>tmessage</code>, <code>qmessage</code>, <code>qqsync</code>, <code>floatbottle</code>, <code>lbsapp</code>, <code>shakeapp</code>, <code>medianote</code>, <code>qqfriend</code>, <code>readerapp</code>, <code>blogapp</code>, <code>facebookapp</code>, <code>masssendapp</code>, <code>meishiapp</code>, <code>feedsapp</code>, <code>voip</code>, <code>blogappweixin</code>, <code>weixin</code>, <code>brandsessionholder</code>, <code>weixinreminder</code>, <code>officialaccounts</code>, <code>notification_messages</code>, <code>wxitil</code>, <code>userexperience_alarm</code>, <code>notification_messages</code></td>
</tr>
</tbody></table>

<p><br/></p>

<h3><a id="user-content-消息类型" class="anchor" href="#消息类型" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>消息类型</h3>

<p>消息一般格式：</p>

<pre><code>{
    "FromUserName": "",
    "ToUserName": "",
    "Content": "",
    "StatusNotifyUserName": "",
    "ImgWidth": 0,
    "PlayLength": 0,
    "RecommendInfo": {...},
    "StatusNotifyCode": 4,
    "NewMsgId": "",
    "Status": 3,
    "VoiceLength": 0,
    "ForwardFlag": 0,
    "AppMsgType": 0,
    "Ticket": "",
    "AppInfo": {...},
    "Url": "",
    "ImgStatus": 1,
    "MsgType": 1,
    "ImgHeight": 0,
    "MediaId": "",
    "MsgId": "",
    "FileName": "",
    "HasProductId": 0,
    "FileSize": "",
    "CreateTime": 1454602196,
    "SubMsgType": 0
}
</code></pre>

<p><br/></p>

<table><thead>
<tr>
<th>MsgType</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>1</td>
<td>文本消息</td>
</tr>
<tr>
<td>3</td>
<td>图片消息</td>
</tr>
<tr>
<td>34</td>
<td>语音消息</td>
</tr>
<tr>
<td>37</td>
<td>VERIFYMSG</td>
</tr>
<tr>
<td>40</td>
<td>POSSIBLEFRIEND_MSG</td>
</tr>
<tr>
<td>42</td>
<td>共享名片</td>
</tr>
<tr>
<td>43</td>
<td>视频通话消息</td>
</tr>
<tr>
<td>47</td>
<td>动画表情</td>
</tr>
<tr>
<td>48</td>
<td>位置消息</td>
</tr>
<tr>
<td>49</td>
<td>分享链接</td>
</tr>
<tr>
<td>50</td>
<td>VOIPMSG</td>
</tr>
<tr>
<td>51</td>
<td>微信初始化消息</td>
</tr>
<tr>
<td>52</td>
<td>VOIPNOTIFY</td>
</tr>
<tr>
<td>53</td>
<td>VOIPINVITE</td>
</tr>
<tr>
<td>62</td>
<td>小视频</td>
</tr>
<tr>
<td>9999</td>
<td>SYSNOTICE</td>
</tr>
<tr>
<td>10000</td>
<td>系统消息</td>
</tr>
<tr>
<td>10002</td>
<td>撤回消息</td>
</tr>
</tbody></table>

<p><br/></p>

<p><strong>微信初始化消息</strong></p>

<div class="highlight highlight-text-html-basic"><pre>MsgType: 51
FromUserName: 自己ID
ToUserName: 自己ID
StatusNotifyUserName: 最近联系的联系人ID
Content:
    &lt;<span class="pl-ent">msg</span>&gt;
        &lt;<span class="pl-ent">op</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">'</span>4<span class="pl-pds">'</span></span>&gt;
            &lt;<span class="pl-ent">username</span>&gt;
                // 最近联系的联系人
                filehelper,xxx@chatroom,wxid_xxx,xxx,...
            &lt;/<span class="pl-ent">username</span>&gt;
            &lt;<span class="pl-ent">unreadchatlist</span>&gt;
                &lt;<span class="pl-ent">chat</span>&gt;
                    &lt;<span class="pl-ent">username</span>&gt;
                        // 朋友圈
                        MomentsUnreadMsgStatus
                    &lt;/<span class="pl-ent">username</span>&gt;
                    &lt;<span class="pl-ent">lastreadtime</span>&gt;
                        1454502365
                    &lt;/<span class="pl-ent">lastreadtime</span>&gt;
                &lt;/<span class="pl-ent">chat</span>&gt;
            &lt;/<span class="pl-ent">unreadchatlist</span>&gt;
            &lt;<span class="pl-ent">unreadfunctionlist</span>&gt;
                // 未读的功能账号消息，群发助手，漂流瓶等
            &lt;/<span class="pl-ent">unreadfunctionlist</span>&gt;
        &lt;/<span class="pl-ent">op</span>&gt;
    &lt;/<span class="pl-ent">msg</span>&gt;</pre></div>

<p><strong>文本消息</strong></p>

<pre><code>MsgType: 1
FromUserName: 发送方ID
ToUserName: 接收方ID
Content: 消息内容
</code></pre>

<p><strong>图片消息</strong></p>

<div class="highlight highlight-text-html-basic"><pre>MsgType: 3
FromUserName: 发送方ID
ToUserName: 接收方ID
MsgId: 用于获取图片
Content:
    &lt;<span class="pl-ent">msg</span>&gt;
        &lt;<span class="pl-ent">img</span> <span class="pl-e">length</span>=<span class="pl-s"><span class="pl-pds">"</span>6503<span class="pl-pds">"</span></span> <span class="pl-e">hdlength</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> /&gt;
        &lt;<span class="pl-ent">commenturl</span>&gt;&lt;/<span class="pl-ent">commenturl</span>&gt;
    &lt;/<span class="pl-ent">msg</span>&gt;</pre></div>

<p><strong>小视频消息</strong></p>

<div class="highlight highlight-text-html-basic"><pre>MsgType: 62
FromUserName: 发送方ID
ToUserName: 接收方ID
MsgId: 用于获取小视频
Content:
    &lt;<span class="pl-ent">msg</span>&gt;
        &lt;<span class="pl-ent">img</span> <span class="pl-e">length</span>=<span class="pl-s"><span class="pl-pds">"</span>6503<span class="pl-pds">"</span></span> <span class="pl-e">hdlength</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> /&gt;
        &lt;<span class="pl-ent">commenturl</span>&gt;&lt;/<span class="pl-ent">commenturl</span>&gt;
    &lt;/<span class="pl-ent">msg</span>&gt;</pre></div>

<p><strong>地理位置消息</strong></p>

<pre><code>MsgType: 1
FromUserName: 发送方ID
ToUserName: 接收方ID
Content: http://weixin.qq.com/cgi-bin/redirectforward?args=xxx
// 属于文本消息，只不过内容是一个跳转到地图的链接
</code></pre>

<p><strong>名片消息</strong></p>

<div class="highlight highlight-source-js"><pre>MsgType<span class="pl-k">:</span> <span class="pl-c1">42</span>
FromUserName<span class="pl-k">:</span> 发送方<span class="pl-c1">ID</span>
ToUserName<span class="pl-k">:</span> 接收方<span class="pl-c1">ID</span>
Content<span class="pl-k">:</span>
    <span class="pl-k">&lt;</span><span class="pl-k">?</span>xml version<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span><span class="pl-k">?</span><span class="pl-k">&gt;</span>
    <span class="pl-k">&lt;</span>msg bigheadimgurl<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> smallheadimgurl<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> username<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> nickname<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>  shortpy<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> alias<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> imagestatus<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>3<span class="pl-pds">"</span></span> scene<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>17<span class="pl-pds">"</span></span> province<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> city<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> sign<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> sex<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> certflag<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> certinfo<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> brandIconUrl<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> brandHomeUrl<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> brandSubscriptConfigUrl<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> brandFlags<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> regionCode<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-k">/</span><span class="pl-k">&gt;</span>

RecommendInfo<span class="pl-k">:</span>
    {
        <span class="pl-s"><span class="pl-pds">"</span>UserName<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>xxx<span class="pl-pds">"</span></span>, <span class="pl-c">// ID</span>
        <span class="pl-s"><span class="pl-pds">"</span>Province<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>xxx<span class="pl-pds">"</span></span>, 
        <span class="pl-s"><span class="pl-pds">"</span>City<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>xxx<span class="pl-pds">"</span></span>, 
        <span class="pl-s"><span class="pl-pds">"</span>Scene<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">17</span>, 
        <span class="pl-s"><span class="pl-pds">"</span>QQNum<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">0</span>, 
        <span class="pl-s"><span class="pl-pds">"</span>Content<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, 
        <span class="pl-s"><span class="pl-pds">"</span>Alias<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>xxx<span class="pl-pds">"</span></span>, <span class="pl-c">// 微信号</span>
        <span class="pl-s"><span class="pl-pds">"</span>OpCode<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">0</span>, 
        <span class="pl-s"><span class="pl-pds">"</span>Signature<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, 
        <span class="pl-s"><span class="pl-pds">"</span>Ticket<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, 
        <span class="pl-s"><span class="pl-pds">"</span>Sex<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">0</span>, <span class="pl-c">// 1:男, 2:女</span>
        <span class="pl-s"><span class="pl-pds">"</span>NickName<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>xxx<span class="pl-pds">"</span></span>, <span class="pl-c">// 昵称</span>
        <span class="pl-s"><span class="pl-pds">"</span>AttrStatus<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">4293221</span>, 
        <span class="pl-s"><span class="pl-pds">"</span>VerifyFlag<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">0</span>
    }</pre></div>

<p><strong>语音消息</strong></p>

<div class="highlight highlight-text-html-basic"><pre>MsgType: 34
FromUserName: 发送方ID
ToUserName: 接收方ID
MsgId: 用于获取语音
Content:
    &lt;<span class="pl-ent">msg</span>&gt;
        &lt;<span class="pl-ent">voicemsg</span> <span class="pl-e">endflag</span>=<span class="pl-s"><span class="pl-pds">"</span>1<span class="pl-pds">"</span></span> <span class="pl-e">cancelflag</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> <span class="pl-e">forwardflag</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> <span class="pl-e">voiceformat</span>=<span class="pl-s"><span class="pl-pds">"</span>4<span class="pl-pds">"</span></span> <span class="pl-e">voicelength</span>=<span class="pl-s"><span class="pl-pds">"</span>1580<span class="pl-pds">"</span></span> <span class="pl-e">length</span>=<span class="pl-s"><span class="pl-pds">"</span>2026<span class="pl-pds">"</span></span> <span class="pl-e">bufid</span>=<span class="pl-s"><span class="pl-pds">"</span>216825389722501519<span class="pl-pds">"</span></span> <span class="pl-e">clientmsgid</span>=<span class="pl-s"><span class="pl-pds">"</span>49efec63a9774a65a932a4e5fcd4e923filehelper174_1454602489<span class="pl-pds">"</span></span> <span class="pl-e">fromusername</span>=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> /&gt;
    &lt;/<span class="pl-ent">msg</span>&gt;</pre></div>

<p><strong>动画表情</strong></p>

<div class="highlight highlight-text-html-basic"><pre>MsgType: 47
FromUserName: 发送方ID
ToUserName: 接收方ID
Content:
    &lt;<span class="pl-ent">msg</span>&gt;
        &lt;<span class="pl-ent">emoji</span> <span class="pl-e">fromusername</span> = <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-e">tousername</span> = <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span> <span class="pl-e">idbuffer</span>=<span class="pl-s"><span class="pl-pds">"</span>media:0_0<span class="pl-pds">"</span></span> <span class="pl-e">md5</span>=<span class="pl-s"><span class="pl-pds">"</span>e68363487d8f0519c4e1047de403b2e7<span class="pl-pds">"</span></span> <span class="pl-e">len</span> = <span class="pl-s"><span class="pl-pds">"</span>86235<span class="pl-pds">"</span></span> <span class="pl-e">productid</span>=<span class="pl-s"><span class="pl-pds">"</span>com.tencent.xin.emoticon.bilibili<span class="pl-pds">"</span></span> <span class="pl-e">androidmd5</span>=<span class="pl-s"><span class="pl-pds">"</span>e68363487d8f0519c4e1047de403b2e7<span class="pl-pds">"</span></span> <span class="pl-e">androidlen</span>=<span class="pl-s"><span class="pl-pds">"</span>86235<span class="pl-pds">"</span></span> <span class="pl-e">s60v3md5</span> = <span class="pl-s"><span class="pl-pds">"</span>e68363487d8f0519c4e1047de403b2e7<span class="pl-pds">"</span></span> <span class="pl-e">s60v3len</span>=<span class="pl-s"><span class="pl-pds">"</span>86235<span class="pl-pds">"</span></span> <span class="pl-e">s60v5md5</span> = <span class="pl-s"><span class="pl-pds">"</span>e68363487d8f0519c4e1047de403b2e7<span class="pl-pds">"</span></span> <span class="pl-e">s60v5len</span>=<span class="pl-s"><span class="pl-pds">"</span>86235<span class="pl-pds">"</span></span> <span class="pl-e">cdnurl</span> = <span class="pl-s"><span class="pl-pds">"</span>http://emoji.qpic.cn/wx_emoji/eFygWtxcoMF8M0oCCsksMA0gplXAFQNpiaqsmOicbXl1OC4Tyx18SGsQ/<span class="pl-pds">"</span></span> <span class="pl-e">designerid</span> = <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span> <span class="pl-e">thumburl</span> = <span class="pl-s"><span class="pl-pds">"</span>http://mmbiz.qpic.cn/mmemoticon/dx4Y70y9XctRJf6tKsy7FwWosxd4DAtItSfhKS0Czr56A70p8U5O8g/0<span class="pl-pds">"</span></span> <span class="pl-e">encrypturl</span> = <span class="pl-s"><span class="pl-pds">"</span>http://emoji.qpic.cn/wx_emoji/UyYVK8GMlq5VnJ56a4GkKHAiaC266Y0me0KtW6JN2FAZcXiaFKccRevA/<span class="pl-pds">"</span></span> <span class="pl-e">aeskey</span>= <span class="pl-s"><span class="pl-pds">"</span>a911cc2ec96ddb781b5ca85d24143642<span class="pl-pds">"</span></span> &gt;&lt;/<span class="pl-ent">emoji</span>&gt; 
        &lt;<span class="pl-ent">gameext</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> <span class="pl-e">content</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span> &gt;&lt;/<span class="pl-ent">gameext</span>&gt;
    &lt;/<span class="pl-ent">msg</span>&gt;</pre></div>

<p><strong>普通链接或应用分享消息</strong></p>

<div class="highlight highlight-text-html-basic"><pre>MsgType: 49
AppMsgType: 5
FromUserName: 发送方ID
ToUserName: 接收方ID
Url: 链接地址
FileName: 链接标题
Content:
    &lt;<span class="pl-ent">msg</span>&gt;
        &lt;<span class="pl-ent">appmsg</span> <span class="pl-e">appid</span>=<span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>  <span class="pl-e">sdkver</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>&gt;
            &lt;<span class="pl-ent">title</span>&gt;&lt;/<span class="pl-ent">title</span>&gt;
            &lt;<span class="pl-ent">des</span>&gt;&lt;/<span class="pl-ent">des</span>&gt;
            &lt;<span class="pl-ent">type</span>&gt;5&lt;/<span class="pl-ent">type</span>&gt;
            &lt;<span class="pl-ent">content</span>&gt;&lt;/<span class="pl-ent">content</span>&gt;
            &lt;<span class="pl-ent">url</span>&gt;&lt;/<span class="pl-ent">url</span>&gt;
            &lt;<span class="pl-ent">thumburl</span>&gt;&lt;/<span class="pl-ent">thumburl</span>&gt;
            ...
        &lt;/<span class="pl-ent">appmsg</span>&gt;
        &lt;<span class="pl-ent">appinfo</span>&gt;
            &lt;<span class="pl-ent">version</span>&gt;&lt;/<span class="pl-ent">version</span>&gt;
            &lt;<span class="pl-ent">appname</span>&gt;&lt;/<span class="pl-ent">appname</span>&gt;
        &lt;/<span class="pl-ent">appinfo</span>&gt;
    &lt;/<span class="pl-ent">msg</span>&gt;</pre></div>

<p><strong>音乐链接消息</strong></p>

<div class="highlight highlight-text-html-basic"><pre>MsgType: 49
AppMsgType: 3
FromUserName: 发送方ID
ToUserName: 接收方ID
Url: 链接地址
FileName: 音乐名

AppInfo: // 分享链接的应用
    {
        Type: 0, 
        AppID: wx485a97c844086dc9
    }

Content:
    &lt;<span class="pl-ent">msg</span>&gt;
        &lt;<span class="pl-ent">appmsg</span> <span class="pl-e">appid</span>=<span class="pl-s"><span class="pl-pds">"</span>wx485a97c844086dc9<span class="pl-pds">"</span></span>  <span class="pl-e">sdkver</span>=<span class="pl-s"><span class="pl-pds">"</span>0<span class="pl-pds">"</span></span>&gt;
            &lt;<span class="pl-ent">title</span>&gt;&lt;/<span class="pl-ent">title</span>&gt;
            &lt;<span class="pl-ent">des</span>&gt;&lt;/<span class="pl-ent">des</span>&gt;
            &lt;<span class="pl-ent">action</span>&gt;&lt;/<span class="pl-ent">action</span>&gt;
            &lt;<span class="pl-ent">type</span>&gt;3&lt;/<span class="pl-ent">type</span>&gt;
            &lt;<span class="pl-ent">showtype</span>&gt;0&lt;/<span class="pl-ent">showtype</span>&gt;
            &lt;<span class="pl-ent">mediatagname</span>&gt;&lt;/<span class="pl-ent">mediatagname</span>&gt;
            &lt;<span class="pl-ent">messageext</span>&gt;&lt;/<span class="pl-ent">messageext</span>&gt;
            &lt;<span class="pl-ent">messageaction</span>&gt;&lt;/<span class="pl-ent">messageaction</span>&gt;
            &lt;<span class="pl-ent">content</span>&gt;&lt;/<span class="pl-ent">content</span>&gt;
            &lt;<span class="pl-ent">contentattr</span>&gt;0&lt;/<span class="pl-ent">contentattr</span>&gt;
            &lt;<span class="pl-ent">url</span>&gt;&lt;/<span class="pl-ent">url</span>&gt;
            &lt;<span class="pl-ent">lowurl</span>&gt;&lt;/<span class="pl-ent">lowurl</span>&gt;
            &lt;<span class="pl-ent">dataurl</span>&gt;
                http://ws.stream.qqmusic.qq.com/C100003i9hMt1bgui0.m4a?vkey=6867EF99F3684<span class="pl-c1">&amp;amp;</span>guid=ffffffffc104ea2964a111cf3ff3edaf<span class="pl-c1">&amp;amp;</span>fromtag=46
            &lt;/<span class="pl-ent">dataurl</span>&gt;
            &lt;<span class="pl-ent">lowdataurl</span>&gt;
                http://ws.stream.qqmusic.qq.com/C100003i9hMt1bgui0.m4a?vkey=6867EF99F3684<span class="pl-c1">&amp;amp;</span>guid=ffffffffc104ea2964a111cf3ff3edaf<span class="pl-c1">&amp;amp;</span>fromtag=46
            &lt;/<span class="pl-ent">lowdataurl</span>&gt;
            &lt;<span class="pl-ent">appattach</span>&gt;
                &lt;<span class="pl-ent">totallen</span>&gt;0&lt;/<span class="pl-ent">totallen</span>&gt;
                &lt;<span class="pl-ent">attachid</span>&gt;&lt;/<span class="pl-ent">attachid</span>&gt;
                &lt;<span class="pl-ent">emoticonmd5</span>&gt;&lt;/<span class="pl-ent">emoticonmd5</span>&gt;
                &lt;<span class="pl-ent">fileext</span>&gt;&lt;/<span class="pl-ent">fileext</span>&gt;
            &lt;/<span class="pl-ent">appattach</span>&gt;
            &lt;<span class="pl-ent">extinfo</span>&gt;&lt;/<span class="pl-ent">extinfo</span>&gt;
            &lt;<span class="pl-ent">sourceusername</span>&gt;&lt;/<span class="pl-ent">sourceusername</span>&gt;
            &lt;<span class="pl-ent">sourcedisplayname</span>&gt;&lt;/<span class="pl-ent">sourcedisplayname</span>&gt;
            &lt;<span class="pl-ent">commenturl</span>&gt;&lt;/<span class="pl-ent">commenturl</span>&gt;
            &lt;<span class="pl-ent">thumburl</span>&gt;
                http://imgcache.qq.com/music/photo/album/63/180_albumpic_143163_0.jpg
            &lt;/<span class="pl-ent">thumburl</span>&gt;
            &lt;<span class="pl-ent">md5</span>&gt;&lt;/<span class="pl-ent">md5</span>&gt;
        &lt;/<span class="pl-ent">appmsg</span>&gt;
        &lt;<span class="pl-ent">fromusername</span>&gt;&lt;/<span class="pl-ent">fromusername</span>&gt;
        &lt;<span class="pl-ent">scene</span>&gt;0&lt;/<span class="pl-ent">scene</span>&gt;
        &lt;<span class="pl-ent">appinfo</span>&gt;
            &lt;<span class="pl-ent">version</span>&gt;29&lt;/<span class="pl-ent">version</span>&gt;
            &lt;<span class="pl-ent">appname</span>&gt;摇一摇搜歌&lt;/<span class="pl-ent">appname</span>&gt;
        &lt;/<span class="pl-ent">appinfo</span>&gt;
        &lt;<span class="pl-ent">commenturl</span>&gt;&lt;/<span class="pl-ent">commenturl</span>&gt;
    &lt;/<span class="pl-ent">msg</span>&gt;</pre></div>

<p><strong>群消息</strong></p>

<pre><code>MsgType: 1
FromUserName: @@xxx
ToUserName: @xxx
Content:
    @xxx:&lt;br/&gt;xxx
</code></pre>

<p><strong>红包消息</strong></p>

<pre><code>MsgType: 49
AppMsgType: 2001
FromUserName: 发送方ID
ToUserName: 接收方ID
Content: 未知
</code></pre>

<p>注：根据网页版的代码可以看到未来可能支持查看红包消息，但目前走的是系统消息，见下。</p>

<p><strong>系统消息</strong></p>

<pre><code>MsgType: 10000
FromUserName: 发送方ID
ToUserName: 自己ID
Content:
    "你已添加了 xxx ，现在可以开始聊天了。"
    "如果陌生人主动添加你为朋友，请谨慎核实对方身份。"
    "收到红包，请在手机上查看"
</code></pre>

<p>持续更新中 ...</p>

<h2><a id="user-content-todo" class="anchor" href="#todo" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Todo</h2>



<p>P.S. 还有啥要补充的也可以在<a href="https://github.com/Urinx/WeixinBot/issues/8">issue #8</a>下留言</p>
</article>
  </div></body></html>