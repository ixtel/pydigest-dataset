<html><body><div><div class="post-body entry-content"><p>
 By </p><a href="http://www.dancingbison.com">Vasudev Ram</a>
<a href=""/>
<img src="http://upload.wikimedia.org/wikipedia/commons/6/6d/Metallic_shield_bug444.jpg"/><p>
I was looking through the Python docs recently, for ideas for any other useful </p><a href="http://en.wikipedia.org/wiki/Debugging">debugging</a><p> techniques, some time after I wrote this post about </p><a href="http://jugad2.blogspot.in/2013/10/a-simple-python-debugging-function.html">a simple Python debugging function</a><p>.
</p><p>
Though I initially tried something else, I later came up with this technique, which may be helpful to debug Python programs. It uses the </p><b>getargvalues</b><p> function of Python's </p><a href="http://docs.python.org/2/library/inspect.html"><b>inspect module</b></a><p>.
</p><p>
Here is a test program showing the use of </p><b>inspect.getargvalues()</b><p>; note that you have to pass the return value of </p><b>inspect.currentframe()</b><p> to inspect.getargvalues():
</p><pre># test_getargvalues.py
# Author: Vasudev Ram - http://dancingbison.com

from debug1 import debug1
import inspect

def foo(arg1, arg2=None):
    print "In foo()"
    a = 1
    b = "2"
    c = True
    d = [ 3, "4" ]
    e = { 5: "five", "six": 6 }
    argvalues = inspect.getargvalues(inspect.currentframe())
    debug1("argvalues.args", argvalues.args)
    debug1("argvalues.varargs", argvalues.varargs)
    debug1("argvalues.keywords", argvalues.keywords)
    debug1("argvalues.locals", argvalues.locals)
    debug1("locals()", locals())

def bar(arg1, arg2, *args, **kwds):
    print "In bar()"
    argvalues = inspect.getargvalues(inspect.currentframe())
    debug1("argvalues.args", argvalues.args)
    debug1("argvalues.varargs", argvalues.varargs)
    debug1("argvalues.keywords", argvalues.keywords)
    debug1("argvalues.locals", argvalues.locals)
    debug1("locals()", locals())

def main():
    foo(1, 2)
    bar(1, 2, 3, 4, five=5, six=6)

main()
</pre><p>Run the program with:

</p><b>python test_getargvalues.py</b>
<p>
Here is its output:
</p><pre>In foo()
argvalues.args : ['arg1', 'arg2']
argvalues.varargs : None
argvalues.keywords : None
argvalues.locals : {'a': 1, 'c': True, 'b': '2', 'e': {'six': 6, 5: 'five'}, 'd': [3, '4'], 'arg1': 1, 'arg2': 2}
locals() : {'a': 1, 'c': True, 'b': '2', 'e': {'six': 6, 5: 'five'}, 'd': [3, '4'], 'arg1': 1, 'arg2': 2, 'argvalues': ArgInfo(args=['arg1', 'arg2'], varargs=None, keywords=None, locals={...})}
In bar()
argvalues.args : ['arg1', 'arg2']
argvalues.varargs : 'args'
argvalues.keywords : 'kwds'
argvalues.locals : {'arg1': 1, 'arg2': 2, 'args': (3, 4), 'kwds': {'six': 6, 'five': 5}}
locals() : {'arg1': 1, 'arg2': 2, 'args': (3, 4), 'kwds': {'six': 6, 'five': 5}, 'argvalues': ArgInfo(args=['arg1', 'arg2'], varargs='args', keywords='kwds', locals={...})}
</pre><p>Note that for comparison, I also printed the value of the </p><a href="http://docs.python.org/2/library/functions.html#locals">Python built-in <b>locals()</b></a><p>, and found that the output of locals() is almost the same as, but a subset, of the output of getargvalues() - at least when the function which you are debugging has varargs and keyword arguments.
</p><hr/><p>Read other </p><a href="http://jugad2.blogspot.com/search/label/python">posts about Python on jugad2</a><p>.</p><p>
- </p><a href="http://jugad2.blogspot.in/2013/03/dancing-bison-enterprises-profile.html">Vasudev Ram - Dancing Bison Enterprises</a>
<a href="http://www.dancingbison.com/contact.html">Contact Page</a>

<a href="http://www.dpbolvw.net/h4102ox52x4KSMTLTLMKMMNQTROS" target="_top"><br/>
<img src="http://www.ftjcfx.com/t697c37w1-LTNUMUMNLNNORUSPT" alt="O'Reilly 50% Ebook Deal of the Day" border="0"/></a>

   
<p/>
</div>
</div></body></html>