<html><body><div><p>This app provides a base class to easily realize django apps that allow
other apps to register parts in it.</p>
<div id="usage">
<h3>Usage</h3>
<p>django-appregistration provides two base classes for the registration of
modules from other apps: <tt>MultiListPartRegistry</tt> and
<tt>SingleListPartRegistry</tt>. While both have the same basic
functionality, in the <tt>MultiListPartRegistry</tt> multiple distinct lists
of objects can be collected, the <tt>SingleListPartRegistry</tt> only
contains a single list.</p>
<p>To implement a <tt><span class="pre">...PartRegistry</span></tt> in your app, create a subclass of the
<tt><span class="pre">...PartRegistry</span></tt> or your choice in a convenient place in your
application. There are some attributes you can overwrite in your
Subclass:</p>
<ul>
<li><tt>part_class</tt> (required): The (parent) class of the objects that are
allowed to be inserted into your Registry</li>
<li><tt>call_function_subpath</tt> (required): The subpath to the function
that is to be called by the registry on load (details, see below)</li>
<li><tt>ignore_django_namespace</tt>(default: True): If true, any app that
starts with <tt>django.</tt> in your <tt>INSTALLED_APPS</tt> will be ignored on
load time.</li>
</ul>
<p>To prevent arbitrary items to be inserted into your Registry the
<tt><span class="pre">...PartRegistry</span></tt> classes check each added element to be an instance
of the class that is set as the <tt>part_class</tt> attribute of the your
Registry.</p>
<p>When the Registry tries to load elements from the <tt>INSTALLED_APPS</tt>, it
iterates over the apps and tries, for each to get the sub module /
function that is defined in the <tt>call_function_subpath</tt>. It then
checks if the retrieved object is callable and calls it if so passing
the Registry itself as only call parameter.</p>
<p>To register elements with the Registry you therefore need to implement
the appropriate function at <tt>call_function_subpath</tt> in an app that is
listed in the <tt>INSTALLED_APPS</tt>. The implemented function then needs to
call the <tt>add_item</tt> function on the passed registry.</p>
<div id="multilistpartregistry-object">
<h4>MultiListPartRegistry(object)</h4>
<p>The following functions are available:</p>
<div id="add-part-list-part">
<h5>add_part(list, part)</h5>
<p>Adds the part given by the <tt>part</tt> parameter to the list with the name
given by the <tt>list</tt> parameter.</p>
</div>
<div id="get-list">
<h5>get(list)</h5>
<p>Returns the parts in the list with the name given by the <tt>list</tt>
parameter. The elements are sorted before they are returned.</p>
</div>
<div id="sort-parts-parts">
<h5>sort_parts(parts)</h5>
<p>Can be overwritten to define a custom ordering of the parts. The default
function simply returns the list unordered.</p>
</div>
<div id="load">
<h5>load()</h5>
<p>When called, the class is initialized and loads the available parts into
its list cache. Does nothing if the <tt>load()</tt> was already called. Is
called automatically by the <tt>get()</tt> function. There is no need to call
it explicitly unless you want to initialize the class before the first
list is retrieved.</p>
</div>
<div id="reset">
<h5>reset()</h5>
<p>Resets the Registry to its initial state so that the parts will be
reloaded the next time the <tt>load()</tt> function is called. Usually there
is no need to call this as it only adds extra overhead when the parts
need to be loaded again.</p>
</div>
</div>
<div id="singlelistpartregistry-multilistpartregistry">
<h4>SingleListPartRegistry(MultiListPartRegistry)</h4>
<p>The following functions are additionally available:</p>
<div id="add-part-part">
<h5>add_part(part)</h5>
<p>Adds the part given by the <tt>part</tt> parameter to the list.</p>
</div>
<div id="get">
<h5>get()</h5>
<p>Returns the parts in the list. The elements are sorted before they are
returned.</p>
</div>
</div>
</div>
<div id="example">
<h3>Example</h3>
<p>Here is an implementation example with a Registry implemented in the
<tt>extendable_app</tt> app and an app <tt>extending_app</tt> that extends the
Registry</p>
<div id="file-extendable-app-registry-py">
<h4>File: extendable_app.registry.py</h4>
<pre>from django_appregistration import MultiListPartRegistry

class MyRegisterable(object):
   pass

class MyRegistry(MultiListPartRegistry):
   part_class = MyRegisterable
   call_function_subpath = 'registerable.register'
</pre>
</div>
<div id="file-extending-app-registerable-py">
<h4>File: extending_app.registerable.py</h4>
<pre>def register(registry):
   # import inside the function so that the import is only needed if the registry is used
   # and the package is therefore available
   from extendable_app.registry import MyRegisterable

   registry.add_part('default', MyRegisterable())
   registry.add_part('other', MyRegisterable())
</pre>
<p>Like this the <tt>extending_app</tt> registers two parts when the registry is
loaded, one in the list <tt>default</tt> and one in the list <tt>other</tt>.</p>
<p>The objects can be retrieved like so:</p>
<pre>from extendable_app.registry import MyRegistry
default_parts = MyRegistry.get('default') # retrieves the `default` list
other_parts = MyRegistry.get('other') # retrieves the `other` list
</pre>
</div>
</div>
<div id="running-the-tests">
<h3>Running the tests</h3>
<p>The included tests can be run standalone by running the
<tt>tests/runtests.py</tt> script. You need to have Django and mock installed
for them to run. If you also want to run coverage, you need to install
it before running the tests</p>
<div id="v-0-0-3">
<h4>v.0.0.3</h4>
<ul>
<li>Bugfix: Also moved the <tt>lock</tt> and the <tt>loaded</tt> attributes into
the meta class</li>
</ul>
</div>
<div id="v-0-0-2">
<h4>v.0.0.2</h4>
<ul>
<li>Bugfix: Using a metaclass to separate the lists for each subclass of
<tt>MultiListPartRegistry</tt>. Before each registry used the same list
resulting in element mixtures if more than one registry was used</li>
</ul>
</div>
<div id="v-0-0-1a">
<h4>v.0.0.1a</h4>
<ul>
<li>Rename <tt>Type</tt> to <tt>List</tt> in classes</li>
</ul>
</div>
<div id="v-0-0-1">
<h4>v.0.0.1</h4>
<ul>
<li>Initial implementation of <tt>MultiTypePartRegistry</tt> and
<tt>SingleTypePartRegistry</tt></li>
</ul>
</div>
</div>
<div id="maintainers">
<h3>Maintainers</h3>
<p>This Project is maintaned by <a href="http://www.northbridge-development.de" rel="nofollow">Northbridge Development Konrad &amp; Schneider
GbR</a> Softwareentwicklung</p>
</div>
</div></body></html>