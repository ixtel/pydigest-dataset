<html><body><div><div class="entry-content">

                

                <p>lxml это быстрая и гибкая библиотека для обработки разметки XML и HTML на Python. Она снабжена поддержкой языка запросов XML (XPath) и языка преобразования XML-документов (XSLT) и предоставляет API ElementTree.</p>
<p>Много где можно найти что ее называют "быстрой". Для обоснования этого прилагательного прошу ознакомиться со страницей - <a href="http://lxml.de/performance.html">http://lxml.de/performance.html</a></p>
<p>Пример использования:</p>
<div class="highlight"><pre><span class="n">xml</span> <span class="o">=</span> <span class="s1">'''&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="s1">&lt;soft&gt;</span>
<span class="s1">    &lt;os&gt; </span>
<span class="s1">        &lt;item name="linux" dist="ubuntu"&gt;</span>
<span class="s1">            This text about linux</span>
<span class="s1">        &lt;/item&gt;             </span>
<span class="s1">        &lt;item name="mac os"&gt;</span>
<span class="s1">            Apple company</span>
<span class="s1">        &lt;/item&gt;             </span>
<span class="s1">        &lt;item name="windows" dist="XP" /&gt;             </span>
<span class="s1">    &lt;/os&gt;</span>
<span class="s1">&lt;/soft&gt;'''</span>

<span class="kn">from</span> <span class="nn">lxml</span> <span class="kn">import</span> <span class="n">etree</span>

<span class="n">tree</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">XML</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span> <span class="c1"># Парсинг строки</span>
<span class="c1">#tree = etree.parse('1.xml') # Парсинг файла</span>

<span class="n">nodes</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">'/soft/os/item'</span><span class="p">)</span> <span class="c1"># Открываем раздел</span>
<span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span> <span class="c1"># Перебираем элементы</span>
    <span class="k">print</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span><span class="n">node</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="k">print</span> <span class="s1">'name ='</span><span class="p">,</span><span class="n">node</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span> <span class="c1"># Выводим параметр name</span>
    <span class="k">print</span> <span class="s1">'text ='</span><span class="p">,[</span><span class="n">node</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="c1"># Выводим текст элемента</span>

<span class="c1"># Доступ к тексту напрямую, с указанием фильтра</span>
<span class="k">print</span> <span class="s1">'text1'</span><span class="p">,</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">'/soft/os/item[@name="linux"]/text()'</span><span class="p">)</span>
<span class="k">print</span> <span class="s1">'text2'</span><span class="p">,</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">'/soft/os/item[2]/text()'</span><span class="p">)</span>
<span class="c1"># Доступ к параметру напрямую</span>
<span class="k">print</span> <span class="s1">'dist'</span><span class="p">,</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">'/soft/os/item[@name="linux"]'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'dist'</span><span class="p">)</span>
<span class="c1"># Выборка по ключу</span>
<span class="k">print</span> <span class="s1">'dist by key'</span><span class="p">,</span><span class="n">tree</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">'//*[@name="windows"]'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'dist'</span><span class="p">)</span>
</pre></div>


<p>Вот и ссылки для изучения:</p>

            </div>
            
</div></body></html>