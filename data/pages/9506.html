<html><body><div><div class="entry-content">

                

                <p>Нудное введение:</p>
<p>Замечено, что новичкам трудно перейти от теории к практике - заставить себя писать, а не только читать. Чтобы помочь мы постоянно публикуем различный материал и указываем как применить эти знания на практике.</p>
<p>В этот раз решили написать 2 небольших проекта:</p>
<ul>
<li>Первый - страница со статистикой отжимания. Будет показано, как с помощью flask + google chart's сделать проект для сохранения и визуализации количества отжиманий. </li>
<li>Второй - vk2rss - сервис для преобразования стен групп ВКонтакте в RSS. Будет рассмотрен парсинг, работа с VK API, создание простого GUI.</li>
</ul>
<p>Оба проекта будут описаны в виде текста. А следующие попробую записать в виде скринкаста (Это ведь интересней?)</p>
<blockquote>
<p>Для справки: я придерживаюсь правила 80% практика / 20% теория. Поэтому не ожидайте глубокой теории. По тексту будут расставлены отсылки к необходимой теории. Смело задавайте вопросы в комментариях.</p>
</blockquote>
<p>Повторяйте за мной!</p>
<p>Первый проект:</p>
<p><code>flask</code> - веб-фреймворк. Обладает высокой гибкостью, расширяется (добавляются возможности) за счет сторонних модулей. </p>
<p>Установить <code>flask</code> можно как и другие пакеты - через <code>pip/easy_install</code>:</p>
<blockquote>
<p>Подсказка: проекты стоит разрабатывать в виртуальном окружении - virtualenv. </p>
<p>Подсказка: используйте pip для установки пакетов</p>
<p>Ссылки для изучения pip и virtualenv:</p>
<blockquote>
<p><a href="http://old.pynsk.ru/posts/2015/Dec/25/poleznye-instrumenty-virtualenv-pip/">http://old.pynsk.ru/posts/2015/Dec/25/poleznye-instrumenty-virtualenv-pip/</a></p>
<p><a href="http://proft.me/2010/04/3/python-i-okruzhenie-virtualenv/">http://proft.me/2010/04/3/python-i-okruzhenie-virtualenv/</a></p>
</blockquote>
</blockquote>
<p>Выполняем для установки:</p>



<p>Сразу к коду. Традиционный <code>hello world</code>, на flask:</p>
<div class="highlight"><pre><span class="c1"># -*- encoding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="nd">@app.route</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="s2">"Hello World!"</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>


<p>Данный код создает и запускает web-сервер. Пользователь зашедший на главную страницу (/) увидит <code>Hello World!</code>.
Запускаем скрипт и получаем:</p>
<div class="highlight"><pre> * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)
</pre></div>


<p>Открываем браузер и вводим <a href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a>. 
Если сделано все правильно, то увидите  <code>Hello World!</code></p>
<blockquote>
<p>Поэксперементируйте с отображаемым текстом. Выводите разный текст, воспользуйтесь HTML-тегами</p>
</blockquote>
<p>В описании проекта сказано - "страница". Добавим ее. Создаем папку <code>templates</code>, а в папке файл 'index.html'. 
В результате у нас получилась такая структура файлов и папок:</p>
<div class="highlight"><pre>.
├── app.py
├── requirements.txt
└── templates
    └── index.html
</pre></div>


<p>index.html, пришло твое время! Заменим <code>Hello world</code> в Python коде на html страницу с таким же содержанием. Записываем в файл:</p>
<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">"en"</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"UTF-8"</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Hiiiiiiii<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>


<p>Заготовка страницы есть. Теперь надо эту страницу показать пользователю. Возвращаемся в Python-код и переписываем функцию <code>index</code>:</p>
<div class="highlight"><pre><span class="nd">@app.route</span><span class="p">(</span><span class="s2">"/"</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s2">"index.html"</span><span class="p">)</span>
</pre></div>


<p>Не забудьте добавить импорт функции <code>render_template</code> (ведь вы уже догадались что она делает?). Добавляем в начале <code>app.py</code> файла:</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">render_template</span>
</pre></div>


<p>Перезапустите flask-сервер, снова откройте главную страницу. Если сделали все правильно, то увидете <code>Hiiiiiiii</code>. </p>
<p>Промежуточный итог: создали flask-проект с шаблоном. При заходе на главную страницу сервера нас приветствуют с помощью <code>Hiiiiiiii</code></p>
<hr/>
<p>Продолжение следует.</p>
            </div>
            
</div></body></html>