<html><body><div><div class="post-text" itemprop="text">

<p>I'm trying to install a package with <code>setuptools</code> including <code>console_scripts</code> on Windows 7. I'm trying to change the value of my <code>PYTHONUSERBASE</code> to install into a custom directory with the <code>--user</code> flag. If I use backslashes in the value of <code>PYTHONUSERBASE</code>, as in</p>

<pre><code>set PYTHONUSERBASE=C:\testing
</code></pre>

<p>everything works fine. However, if I use a forward slash, as in</p>

<pre><code>set PYTHONUSERBASE=C:/testing
</code></pre>

<p>the package itself installs to the right place, but the <code>console_scripts</code> (and only the <code>console_scripts</code>) are installed into <code>C:testing\Scripts</code>. Obviously, when the forward slash is present, <code>setuptools</code> is treating the path as a relative path <strong>only for the <code>console_scripts</code></strong>. In my real package, I'm reading values from a configuration file, so I would really rather not have to deal with normalizing the path separator since it needs to work on Linux as well. For testing, I have a package with the structure</p>

<pre><code>|-- setup.py
|-- foobar\
|---- __init__.py
|---- __main__.py
</code></pre>

<p>The code in the <code>__main__.py</code> is</p>

<pre><code>def main(): print('This is the main function')
</code></pre>

<p>and <code>setup.py</code> looks like:</p>

<pre><code>from setuptools import setup

setup(
    name='foobar',
    version='1.0.0',
    packages=['foobar'],
    entry_points={
        'console_scripts': [
            'foobar=foobar.__main__:main',
        ],
    },
)
</code></pre>

<p>Why is <code>setuptools</code> stripping out the first forward slash in the path and how can I fix it? I think this question is related to my problem, but I don't think it solves it: <a href="http://stackoverflow.com/questions/2422798/python-os-path-join-on-windows">Python os.path.join on Windows</a></p>
    </div>
    </div></body></html>