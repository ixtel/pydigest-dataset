<html><body><div><div class="post-content" itemprop="articleBody">
    <p>Sometimes you've just got to tokenize a string.</p>
<p>Let's say you find you need to parse a string based on the tokens it comprises. It's not an uncommon need, but there's more than one way to go about it. What does "token" mean to you in this situation? How can you break a string down into a list of them?</p>
<p>It can be daunting answering such an open-ended question. But not to fear! Here I'll be explaining your best options and how you'll know when to use them. I'm using Python for these examples, but you should feel free to implement the same algorithms in your language of choice.</p>
<h1>Tokenization by delimiters via split</h1>
<p>By far the most straightforward approach is one that you've surely used before, and that's quickly done in essentially any language. It's to split a string on each occurrence of some delimiter.</p>
<p>Say you were reading a csv file and for each row your tokens were to be the value associated with each column. It's quick, easy, and almost always sufficient to split each line on the commas. Here's a simple example utilizing a string's split method:</p>
<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">string</span> <span class="o">=</span> <span class="s">'Hello world!'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tokens</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">' '</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tokens</span>
<span class="p">[</span><span class="s">'Hello'</span><span class="p">,</span> <span class="s">'world!'</span><span class="p">]</span></code></pre></figure>
<p>But the usefulness of splitting doesn't end there. You could also introduce some regex and define multiple characters as being delimiters.</p>
<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">re</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">string</span> <span class="o">=</span> <span class="s">"Don't you forget about me."</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tokens</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">split</span><span class="p">(</span> <span class="s">r'[e ]'</span><span class="p">,</span> <span class="n">string</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tokens</span>
<span class="p">[</span><span class="s">"Don't"</span><span class="p">,</span> <span class="s">'you'</span><span class="p">,</span> <span class="s">'forg'</span><span class="p">,</span> <span class="s">'t'</span><span class="p">,</span> <span class="s">'about'</span><span class="p">,</span> <span class="s">'m'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">]</span></code></pre></figure>
<p>Unfortunately, delimiters can only get you so far when doing tokenization. What if you needed to break crazier things like "abc123" into separate tokens, one for the letters and one for the numbers? Or maybe you wanted your delimiters to be represented as separate tokens, not to be tossed entirely? You wouldn't be able to do it using a generic split method.</p>
<h1>Tokenization by categorization of chars</h1>
<p>One option when dealing with tokens that strictly splitting on delimiters won't work is assigning tokens by character categorization. It's still fast, and its flexibility is likely to be enough for most cases.</p>
<p>Here's an example where the characters in a string are iterated through and tokens are assigned by the categories each character falls into. When the category changes, the token made up of accumulated characters so far is added to the list and a new token is begun.</p>
<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">tokenize</span><span class="p">(</span> <span class="n">string</span><span class="p">,</span> <span class="n">categories</span> <span class="p">):</span>
<span class="o">...</span>     <span class="n">token</span> <span class="o">=</span> <span class="s">''</span>
<span class="o">...</span>     <span class="n">tokens</span> <span class="o">=</span> <span class="p">[]</span>
<span class="o">...</span>     <span class="n">category</span> <span class="o">=</span> <span class="bp">None</span>
<span class="o">...</span>     <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">if</span> <span class="n">token</span><span class="p">:</span>
<span class="o">...</span>             <span class="k">if</span> <span class="n">category</span> <span class="ow">and</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">category</span><span class="p">:</span>
<span class="o">...</span>                 <span class="n">token</span> <span class="o">+=</span> <span class="n">char</span>
<span class="o">...</span>             <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>                 <span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">token</span> <span class="p">)</span>
<span class="o">...</span>                 <span class="n">token</span> <span class="o">=</span> <span class="n">char</span>
<span class="o">...</span>                 <span class="n">category</span> <span class="o">=</span> <span class="bp">None</span>
<span class="o">...</span>                 <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>
<span class="o">...</span>                     <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">cat</span><span class="p">:</span>
<span class="o">...</span>                         <span class="n">category</span> <span class="o">=</span> <span class="n">cat</span>
<span class="o">...</span>                         <span class="k">break</span>
<span class="o">...</span>         <span class="k">else</span><span class="p">:</span>
<span class="o">...</span>             <span class="n">category</span> <span class="o">=</span> <span class="bp">None</span>
<span class="o">...</span>             <span class="k">if</span> <span class="ow">not</span> <span class="n">category</span><span class="p">:</span>
<span class="o">...</span>                 <span class="k">for</span> <span class="n">cat</span> <span class="ow">in</span> <span class="n">categories</span><span class="p">:</span>
<span class="o">...</span>                     <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">cat</span><span class="p">:</span>
<span class="o">...</span>                         <span class="n">category</span> <span class="o">=</span> <span class="n">cat</span>
<span class="o">...</span>                         <span class="k">break</span>
<span class="o">...</span>             <span class="n">token</span> <span class="o">+=</span> <span class="n">char</span>
<span class="o">...</span>     <span class="k">if</span> <span class="n">token</span><span class="p">:</span>
<span class="o">...</span>         <span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">token</span> <span class="p">)</span>
<span class="o">...</span>     <span class="k">return</span> <span class="n">tokens</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">string</span> <span class="o">=</span> <span class="s">'abc, e4sy as 123!'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tokens</span> <span class="o">=</span> <span class="n">tokenize</span><span class="p">(</span> <span class="n">string</span><span class="p">,</span> <span class="p">[</span> <span class="s">'0123456789'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">',.;:!?'</span><span class="p">,</span> <span class="s">'abcdefghijklmnopqrstuvwxyz'</span> <span class="p">]</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tokens</span>
<span class="p">[</span><span class="s">'abc'</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'e'</span><span class="p">,</span> <span class="s">'4'</span><span class="p">,</span> <span class="s">'sy'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'as'</span><span class="p">,</span> <span class="s">' '</span><span class="p">,</span> <span class="s">'123'</span><span class="p">,</span> <span class="s">'!'</span><span class="p">]</span></code></pre></figure>
<p>There are a lot of improvements you could make to this tokenization function! For example, you could record which category each token belonged to. You could make the categories more specific, you could implement some flexibility in how they're handled. You could even use regular expressions for verifying whether a current token plus the next character still fits some category. These are left as exercises to the reader.</p>
<h1>Tokenization using regular expressions</h1>
<p>But there's a much better way to tokenize when you need to do more than the basics. Here you can find a lexical scanner package which uses regular expressions to define what tokens should look like: https://github.com/pineapplemachine/lexscan. ("Lexical scanner" is a fancy word for a tokenizer that would typically be the first step in a lexical analysis, which is how interpreters and compilers make sense of code. But their applications are in no way limited to just those.) Installation would entail placing the repo's lexscan directory somewhere that your code can access it.</p>
<p>It's very handy! Here's a simple example:</p>
<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">lexscan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">spaceexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'</span><span class="err">\</span><span class="s">s+'</span><span class="p">,</span> <span class="n">significant</span><span class="o">=</span><span class="bp">False</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">wordexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'[a-z]+'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">numexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'</span><span class="err">\</span><span class="s">d+'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">string</span> <span class="o">=</span> <span class="s">'2001: A Space Odyssey'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tokens</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span> <span class="n">string</span><span class="p">,</span> <span class="p">(</span> <span class="n">spaceexp</span><span class="p">,</span> <span class="n">wordexp</span><span class="p">,</span> <span class="n">numexp</span> <span class="p">)</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pprint</span><span class="p">(</span> <span class="n">tokens</span> <span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span> <span class="s">'2001'</span> \<span class="n">d</span><span class="o">+</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">:</span> <span class="s">':'</span> <span class="bp">None</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span> <span class="s">'A'</span> <span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="p">]</span><span class="o">+</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">8</span><span class="p">:</span> <span class="s">'Space'</span> <span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="p">]</span><span class="o">+</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span> <span class="s">'Odyssey'</span> <span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">z</span><span class="p">]</span><span class="o">+</span><span class="p">]</span></code></pre></figure>
<p>Tokens are assigned based on the longest match of the various expressions provided starting at the end of the previous token. The concept is simple, but tokenization doesn't get much better. The functionality really shines when you're using more complex regular expressions. What if you needed to differentiate between integers and floating point numbers? What if you wanted to capture an string literal enclosed in quotes as a single large token? You can do that using a proper scanner and all it takes is the wherewithal to put together a set of regular expressions which do what you need. Here's a more interesting example that looks more like what you would want to use an implementation like this one for.</p>
<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">lexscan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">spaceexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'</span><span class="err">\</span><span class="s">s+'</span><span class="p">,</span> <span class="n">significant</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'whitespace'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">identifierexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'[a-z_]</span><span class="err">\</span><span class="s">w+'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'identifier'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">delimiterexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'[,;]'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'delimiter'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">intexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'</span><span class="err">\</span><span class="s">d+'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'integer'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">floatexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'[-+]?[0-9]*</span><span class="err">\</span><span class="s">.?[0-9]+([eE][-+]?[0-9]+)?'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'float'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">stringexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'"((?:</span><span class="se">\\</span><span class="s">.|[^</span><span class="se">\\</span><span class="s">"])*)"'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'string'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">assignexp</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">ScanExp</span><span class="p">(</span> <span class="s">r'[=:]'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'assignment'</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">string</span> <span class="o">=</span> <span class="s">'strings: "foobar", "don</span><span class="se">\'</span><span class="s">t stop me n0w"; numbers: 450, 13.37'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">tokens</span> <span class="o">=</span> <span class="n">lexscan</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span> <span class="n">string</span><span class="p">,</span> <span class="p">(</span> <span class="n">spaceexp</span><span class="p">,</span> <span class="n">identifierexp</span><span class="p">,</span> <span class="n">delimiterexp</span><span class="p">,</span> <span class="n">intexp</span><span class="p">,</span> <span class="n">floatexp</span><span class="p">,</span> <span class="n">stringexp</span><span class="p">,</span> <span class="n">assignexp</span> <span class="p">)</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pprint</span><span class="p">(</span> <span class="n">tokens</span> <span class="p">)</span>
<span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">0</span><span class="p">:</span> <span class="s">'strings'</span> <span class="n">identifier</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">7</span><span class="p">:</span> <span class="s">':'</span> <span class="n">assignment</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">9</span><span class="p">:</span> <span class="s">'"foobar"'</span> <span class="n">string</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span> <span class="s">','</span> <span class="n">delimiter</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">19</span><span class="p">:</span> <span class="s">'"don</span><span class="se">\'</span><span class="s">t stop me n0w"'</span> <span class="n">string</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">38</span><span class="p">:</span> <span class="s">';'</span> <span class="n">delimiter</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span> <span class="s">'numbers'</span> <span class="n">identifier</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span> <span class="s">':'</span> <span class="n">assignment</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span> <span class="s">'450'</span> <span class="n">integer</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span> <span class="s">','</span> <span class="n">delimiter</span><span class="p">,</span>
 <span class="mi">1</span><span class="p">:</span><span class="mi">54</span><span class="p">:</span> <span class="s">'13.37'</span> <span class="nb">float</span><span class="p">]</span></code></pre></figure>
<p>Of course, splitting a string will always be faster than using regular expressions for tokenizing. Be judicious in deciding which approach to use!</p>

  </div>

</div></body></html>