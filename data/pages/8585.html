<html><body><div><div class="section">
              <h1>envparse 0.2.0</h1>

              


<p>Simple environment variable parsing</p><p>








envparse</p><p>========</p><p>``envparse`` is a simple utility to parse environment variables.</p><p>If you use Heroku and/or subscribe to the tenets of the</p><p>`12 Factor App &lt;http: www.12factor.net=""/&gt;`_</p><p>you'll be using a lot of environment variable-based configuration in your app.</p><p>``os.environ`` is a great choice to start off with but over time you'll find</p><p>yourself duplicating quite a bit of code around handling raw environment</p><p>variables.</p><p>``envparse`` aims to eliminate this duplicated, often inconsistent parsing</p><p>code and instead provide a single, easy-to-use wrapper.</p><p>Ideas, and code portions, have been taken from `django-environ</p><p>&lt;https: github.com="" joke2k="" django-environ=""&gt;`_ project but made framework</p><p>agnostic.</p><p>Installing</p><p>----------</p><p>Through PyPI::</p><p>    $ pip install envparse</p><p>Manually::</p><p>    $ pip install git+https://github.com/rconradharris/envparse.git</p><p>    OR</p><p>    $ git clone https://github.com/rconradharris/envparse &amp;&amp; cd envparse</p><p>    $ python setup.py install</p><p>Usage</p><p>-----</p><p>In your settings or configuration module, first either import the standard</p><p>parser or one with a schema::</p><p>    # Standard</p><p>    from envparse import env</p><p>    # Schema</p><p>    from envparse import Env</p><p>    env = Env(BOOLEAN_VAR=bool, LIST_VAR=dict(type=list, subtype=int))</p><p>``env`` can then be called in two ways:</p><p>* Type explicit: ``env('ENV_VAR_NAME', type=TYPE, ...)``</p><p>* Type implicit (for Python builtin types only): ``env.TYPE('ENV_VAR_NAME', ...)``</p><p>If type is not specified, explicitly or implicitly, then the default</p><p>type is ``str``.</p><p>Casting to a specified type::</p><p>    # Environment variable: MAIL_ENABLED=1</p><p>    mail_enabled = env('MAIL_ENABLED', type=bool)</p><p>    # OR mail_enabled = env.bool('MAIL_ENABLED')</p><p>    assert mail_enabled is True</p><p>Casting nested types::</p><p>    # Environment variable: FOO=1,2,3</p><p>    foo = env('FOO'), subtype=int)</p><p>    # OR: foo = env('FOO', type=list, subtype=int)</p><p>    # Note that there is no way to implicitly call subtypes.</p><p>    assert foo == [1, 2, 3]</p><p>Specifying defaults::</p><p>    # Environment variable MAX_ROWS has not been defined</p><p>    max_rows = env.int('MAX_ROWS', default=100)</p><p>    assert max_rows == 100</p><p>Proxying values, useful in Heroku for wiring up the environment variables they</p><p>provide to the ones that your app actually uses::</p><p>    # Environment variables: MAILGUN_SMTP_LOGIN=foo,</p><p>    # SMTP_LOGIN='{{MAILGUN_SMTP_LOGIN}}'</p><p>    smtp_login = env('SMTP_LOGIN')</p><p>    assert smtp_login == 'foo'</p><p>Now if you switch to using Mandrill as an email provider, instead of having to</p><p>modify your app, you can simply make a configuration change::</p><p>    SMTP_LOGIN='{{MANDRILL_UESRNAME}}'</p><p>There are also a few convenience methods:</p><p>* ``env.json``: parses JSON and returns a dict.</p><p>* ``env.url``: parses a url and returns a ``urlparse.ParseResult`` object.</p><p>Type specific notes:</p><p>* list: the expected environment variable format is ``FOO=1,2,3`` and may</p><p>  contain spaces between the commas as well as preceding or trailing whitespace.</p><p>* dict: the expected environment variable format is ``FOO='key1=val1,</p><p>  key2=val2``. Spaces are also allowed.</p><p>* json: a regular JSON string such as ``FOO='{"foo": "bar"}'`` is expected.</p><p>Schemas</p><p>~~~~~~~</p><p>Define a schema so you can only need to provide the type, subtype, and defaults</p><p>once::</p><p>    # Environment variables: MAIL_ENABLED=0, LIST_INT='1,2,3'</p><p>    # Bind schema to Env object to get schema-based lookups</p><p>    env = Env(MAIL_ENABLED=bool, SMTP_LOGIN=dict(type=str, default='foo'),</p><p>              LIST_INT=dict(type=list, subtype=int))</p><p>    assert env('MAIL_ENABLED') is False</p><p>    assert env('SMTP_LOGIN') == 'foo' # Not defined so uses default</p><p>    assert env('LIST_INT') == [1, 2, 3]</p><p>The ``Env`` constructor takes values in the form of either: ``VAR_NAME=type``</p><p>or ``VAR_NAME=dict`` where ``dict`` is a dictionary with either one or more of</p><p>the following keys specified: ``type``, ``subtype``, ``default``.</p><p>Pre- and Postprocessors</p><p>~~~~~~~~~~~~~~~~~~~~~~~</p><p>Preprocessors are callables that are run on the environment variable string</p><p>before any type casting takes place::</p><p>    # Environment variables: FOO=bar</p><p>    # Preprocessor to change variable to uppercase</p><p>    to_upper = lambda v: v.upper()</p><p>    foo = env('FOO', preprocessor=to_upper)</p><p>    assert foo == 'BAR'</p><p>Postprocessors are callables that are run after the type casting takes place.</p><p>An example of one might be returning a datastructure expected by a framework::</p><p>    # Environment variable: REDIS_URL='redis://:redispass@127.0.0.1:6379/0'</p><p>    def django_redis(url):</p><p>      return {'BACKEND': 'django_redis.cache.RedisCache',</p><p>          'LOCATION': '{}:{}:{}'.format(url.hostname, url.port, url.path.strip('/')),</p><p>          'OPTIONS': {'PASSWORD': url.password}}</p><p>    redis_config = env('REDIS_URL', postprocessor=django_redis)</p><p>    assert redis_config == {'BACKEND': 'django_redis.cache.RedisCache',</p><p>        'LOCATION': '127.0.0.1:6379:0', 'OPTIONS': {'PASSWORD': 'redispass'}}</p><p>Environment File</p><p>~~~~~~~~~~~~~~~~</p><p>Read from a .env file (line delimited KEY=VALUE)::</p><p>    # This recurses up the directory tree until a file called '.env' is found.</p><p>    env.read_env()</p><p>    # Manually specifying a path</p><p>    env.read_env('/config/.myenv')</p><p>    # Values can be read as normal</p><p>    env.int('FOO')</p><p>Tests</p><p>-----</p><p>.. image:: https://secure.travis-ci.org/rconradharris/envparse.png?branch=master</p><p>To run the tests install tox::</p><p>    pip install tox</p><p>Then run them with::</p><p>    make test

</p><a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>128</span> downloads in the last week
  </li>
  <li>
    <span>874</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>