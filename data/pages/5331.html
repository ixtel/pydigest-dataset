<html><body><div><div class="Markdown__markdown___2_Qaz" data-reactid=".d0hy6llvk0.1.1.1.0.0.0.0.0.1.1.0.1"><p>Python 2.7.10 <a href="https://imagelayers.io/?images=advancedclimatesystems/python:2.7.10"><img src="https://badge.imagelayers.io/advancedclimatesystems/python:2.7.10.svg"/></a> </p>
<p>Python 3.4.3 <a href="https://imagelayers.io/?images=advancedclimatesystems/python:3.4.3"><img src="https://badge.imagelayers.io/advancedclimatesystems/python:3.4.3.svg"/></a> </p>
<h1>Python</h1>
<p>A small image (around 30 mb) build with Buildroot containing Python. The image is available with Python 2.7.10 or Python 3.4.3 and contains beside Python the following packages:</p>
<ul>
<li>Pip 7.1.2</li>
<li>Setuptools 18.3.0</li>
<li>BusyBox 1.23.2</li>
<li>Wheel 0.24.0</li>
</ul>
<h2>Installing C extensions</h2>
<p>This image doesn't contain a compiler, so you can't build C extensions in this container. If you want to use such extension, for example pycrypto, build a <a href="http://wheel.readthedocs.org/en/latest/">Wheel</a> from pycrypto on your host. Then install pycrypto from this Wheel in your container. </p>
<pre><code>[user@host] $ pip wheel --wheel-dir=wheelhouse pycrypto
</code></pre>
<p>Create a Dockerfile like this:</p>
<pre><code>FROM advancedclimatesystems/python:2.7.10
COPY wheelhouse /tmp/wheelhouse
RUN pip install wheel
RUN pip install --use-wheel --find-links=/tmp/wheelhouse pycrypto
RUN -r /tmp/wheelhouse

CMD sh
</code></pre><p>If your C extensions uses shared libraries you might have to add them to the image. Take for example mysql-python. This DBAPI for MySQL is the default DBAPI for SqlAlchemy. If you'd create an image like above and run <code>python -c import MySQLdb</code> in it, you'll see an an error like this:</p>
<pre><code>[user@container] $ python -c "import MySQLdb"
Traceback (most recent call last):
  File "&lt;string&gt;", line 1, in &lt;module&gt;
  File "/usr/lib/python2.7/site-packages/MySQLdb/__init__.py", line 19, in &lt;module&gt;
    import _mysql
ImportError: libmysqlclient.so.18: cannot open shared object file: No such file or directory
</code></pre>
<p><code>_mysq</code> is the C extension, located at <code>/usr/lib/python2.7/site-packages/_mysql.so</code>, and it requires a shared object file: <code>libmysqlclient.so.18</code>. </p>
<p>If you have a 64-bit machine with <code>mysqlclient-dev</code> installed you have this object file. On my Debian system it's located at <code>/usr/lib/x86_64-linux-gnu/libmysqlclient.so.18</code>. Copy this file in your image. <code>libmysqlclient.so.18</code> depends on <code>libstdc++.so.6</code>. Copy this file into the image as well. </p>
<p>A Dockerfile which summarizes it all:</p>
<pre><code>FROM advancedclimatesystems/python:2.7.10
COPY wheelhouse /tmp/wheelhouse
COPY libmysqlclient.so.18 /lib/
COPY libstdc++.so.6 /lib/
RUN pip install --use-wheel --find-links=/tmp/wheelhouse mysql-python 
CMD sh
</code></pre></div></div></body></html>