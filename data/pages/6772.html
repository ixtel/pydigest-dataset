<html><body><div><div class="entry-content">
		

<p>Regular Expressions are the Swiss Army knife for searching through information for certain patterns. They have a wide arsenal of tools, some of which often go undiscovered or underutilized. Today I will show you some advanced tips for working with regular expressions.</p>
<h3/>
<p><span id="more-236"/></p>
<h3>Adding Comments</h3>
<p>Sometimes, regular expressions can become complex and unreadable. A regular expression you write today may seem too obscure to you tomorrow even though it was your own work. Much like programming in general, it is a good idea to add comments to improve the readability of regular expressions.</p>
<p>For example, here is something we might use to check for US phone numbers.</p>
<div id="crayon-537979ef22160656910220" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">


		<div id="crayon-56d519a5d322e415034233" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d322e415034233-1"><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-i"</span><span class="crayon-o">&gt;</span><span class="crayon-v">r</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-s"</span><span class="crayon-o">&gt;</span><span class="crayon-s">'^(1[-\s.])?(<span class="crayon-sy">\</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>?\d{3}(?(2)\))[-\s.]?\d{3}[-\s.]?\d{4}$'</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<p class="crayon-main"/>
</div>
<p>It can become much more readable with comments and some extra spacing.</p>
<div id="crayon-537979ef2216f815028710" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-plain-wrap">
<div id="crayon-537979ef2216f815028710-1" class="crayon-line">


		<div id="crayon-56d519a5d3246649635774" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3246649635774-1"><span class="crayon-i">r</span><span class="crayon-s">'^'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3246649635774-2"><span class="crayon-i">r</span><span class="crayon-s">'(1[-\s.])?'</span> <span class="crayon-c"># optional '1-', '1.' or '1'</span></p><p class="crayon-line" id="crayon-56d519a5d3246649635774-3"><span class="crayon-i">r</span><span class="crayon-s">'(<span class="crayon-sy">\</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>?'</span>      <span class="crayon-c"># optional opening parenthesis</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3246649635774-4"><span class="crayon-i">r</span><span class="crayon-s">'\d{3}'</span>      <span class="crayon-c"># the area code</span></p><p class="crayon-line" id="crayon-56d519a5d3246649635774-5"><span class="crayon-i">r</span><span class="crayon-s">'(?(2)\))'</span>   <span class="crayon-c"># if there was opening parenthesis, close it</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3246649635774-6"><span class="crayon-i">r</span><span class="crayon-s">'[-\s.]?'</span>    <span class="crayon-c"># followed by '-' or '.' or space</span></p><p class="crayon-line" id="crayon-56d519a5d3246649635774-7"><span class="crayon-i">r</span><span class="crayon-s">'\d{3}'</span>      <span class="crayon-c"># first 3 digits</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3246649635774-8"><span class="crayon-i">r</span><span class="crayon-s">'[-\s.]?'</span>    <span class="crayon-c"># followed by '-' or '.' or space</span></p><p class="crayon-line" id="crayon-56d519a5d3246649635774-9"><span class="crayon-i">r</span><span class="crayon-s">'\d{4}$'</span>    <span class="crayon-c"># last 4 digits</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p class="crayon-main"/>
</div>
<p>Let’s put it within a code segment.</p>
<div id="crayon-537979ef22176195932451" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">
<div id="crayon-537979ef22176195932451-1" class="crayon-line">


		<div id="crayon-56d519a5d324a877775640" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-2">2</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-4">4</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-6">6</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-8">8</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-10">10</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-12">12</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-14">14</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-16">16</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-18">18</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-20">20</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d324a877775640-22">22</p><p class="crayon-num" data-line="crayon-56d519a5d324a877775640-23">23</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d324a877775640-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-2"> </p><p class="crayon-line" id="crayon-56d519a5d324a877775640-3"><span class="crayon-k ">numbers</span> <span class="crayon-o">=</span> <span class="crayon-sy">[</span> <span class="crayon-s">"123 555 6789"</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-4">            <span class="crayon-s">"1-(123)-555-6789"</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-5">            <span class="crayon-s">"(123-555-6789"</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-6">            <span class="crayon-s">"(123).555.6789"</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-7">            <span class="crayon-s">"123 55 6789"</span> <span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-8"> </p><p class="crayon-line" id="crayon-56d519a5d324a877775640-9"><span class="crayon-st">for</span> <span class="crayon-i">number</span> <span class="crayon-st">in</span> <span class="crayon-k ">numbers</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-10">    <span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">match</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'^'</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-11">                   <span class="crayon-i">r</span><span class="crayon-s">'(1[-\s.])?'</span>           <span class="crayon-c"># optional '1-', '1.' or '1'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-12">                   <span class="crayon-i">r</span><span class="crayon-s">'(<span class="crayon-sy">\</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>?'</span>                <span class="crayon-c"># optional opening parenthesis</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-13">                   <span class="crayon-i">r</span><span class="crayon-s">'\d{3}'</span>                <span class="crayon-c"># the area code</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-14">                   <span class="crayon-i">r</span><span class="crayon-s">'(?(2)\))'</span>             <span class="crayon-c"># if there was opening parenthesis, close it</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-15">                   <span class="crayon-i">r</span><span class="crayon-s">'[-\s.]?'</span>              <span class="crayon-c"># followed by '-' or '.' or space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-16">                   <span class="crayon-i">r</span><span class="crayon-s">'\d{3}'</span>                <span class="crayon-c"># first 3 digits</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-17">                   <span class="crayon-i">r</span><span class="crayon-s">'[-\s.]?'</span>              <span class="crayon-c"># followed by '-' or '.' or space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-18">                   <span class="crayon-i">r</span><span class="crayon-s">'\d{4}$\s*'</span><span class="crayon-sy">,</span><span class="crayon-v">number</span><span class="crayon-sy">)</span>    <span class="crayon-c"># last 4 digits</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-19"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-20">    <span class="crayon-st">if</span> <span class="crayon-v">pattern</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-21">        <span class="crayon-k ">print</span> <span class="crayon-s">'{0} is valid'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">number</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324a877775640-22">    <span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d324a877775640-23">        <span class="crayon-k ">print</span> <span class="crayon-s">'{0} is not valid'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">number</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p class="crayon-main"/>
</div>
<p><strong>Output</strong></p>
<p><strong>Without White spaces</strong></p>
<div id="crayon-537979ef2217f131510308" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">
<div id="crayon-537979ef2217f131510308-1" class="crayon-line">


		<div id="crayon-56d519a5d324e203713985" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d324e203713985-1"><span class="crayon-cn">123</span> <span class="crayon-cn">555</span> <span class="crayon-cn">6789</span> <span class="crayon-st">is</span> <span class="crayon-i">valid</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324e203713985-2"><span class="crayon-cn">1</span><span class="crayon-o">-</span><span class="crayon-sy">(</span><span class="crayon-cn">123</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-cn">555</span><span class="crayon-o">-</span><span class="crayon-cn">6789</span> <span class="crayon-st">is</span> <span class="crayon-e">valid</span></p><p class="crayon-line" id="crayon-56d519a5d324e203713985-3"><span class="crayon-sy">(</span><span class="crayon-cn">123</span><span class="crayon-o">-</span><span class="crayon-cn">555</span><span class="crayon-o">-</span><span class="crayon-cn">6789</span> <span class="crayon-st">is</span> <span class="crayon-st">not</span> <span class="crayon-e">valid</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d324e203713985-4"><span class="crayon-sy">(</span><span class="crayon-cn">123</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-cn">555.6789</span> <span class="crayon-st">is</span> <span class="crayon-i">valid</span></p><p class="crayon-line" id="crayon-56d519a5d324e203713985-5"><span class="crayon-cn">123</span> <span class="crayon-cn">55</span> <span class="crayon-cn">6789</span> <span class="crayon-st">is</span> <span class="crayon-st">not</span> <span class="crayon-v">valid</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p class="crayon-main"/>
</div>
<p>Regular expressions are a great feature of python, but debugging them can be a pain, and it’s all too easy to get a regex wrong.</p>
<p>Fortunately, python can print the regex parse tree by this flag <code>re.DEBUG</code> (actually, 128) to <code>re.compile</code> or <code>re.match</code>.</p>
<div id="crayon-537979ef22185265832185" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">
<div id="crayon-537979ef22185265832185-1" class="crayon-line">


		<div id="crayon-56d519a5d3251223682464" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-2">2</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-4">4</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-6">6</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-8">8</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-10">10</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-12">12</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-14">14</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-16">16</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-18">18</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-20">20</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3251223682464-22">22</p><p class="crayon-num" data-line="crayon-56d519a5d3251223682464-23">23</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3251223682464-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-2"> </p><p class="crayon-line" id="crayon-56d519a5d3251223682464-3"><span class="crayon-k ">numbers</span> <span class="crayon-o">=</span> <span class="crayon-sy">[</span> <span class="crayon-s">"123 555 6789"</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-4">            <span class="crayon-s">"1-(123)-555-6789"</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-5">            <span class="crayon-s">"(123-555-6789"</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-6">            <span class="crayon-s">"(123).555.6789"</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-7">            <span class="crayon-s">"123 55 6789"</span> <span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-8"> </p><p class="crayon-line" id="crayon-56d519a5d3251223682464-9"><span class="crayon-st">for</span> <span class="crayon-i">number</span> <span class="crayon-st">in</span> <span class="crayon-k ">numbers</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-10">    <span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">match</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'^'</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-11">                    <span class="crayon-i">r</span><span class="crayon-s">'(1[-\s.])?'</span>        <span class="crayon-c"># optional '1-', '1.' or '1'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-12">                    <span class="crayon-i">r</span><span class="crayon-s">'(<span class="crayon-sy">\</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span>?'</span>             <span class="crayon-c"># optional opening parenthesis</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-13">                    <span class="crayon-i">r</span><span class="crayon-s">'\d{3}'</span>             <span class="crayon-c"># the area code</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-14">                    <span class="crayon-i">r</span><span class="crayon-s">'(?(2)\))'</span>          <span class="crayon-c"># if there was opening parenthesis, close it</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-15">                    <span class="crayon-i">r</span><span class="crayon-s">'[-\s.]?'</span>           <span class="crayon-c"># followed by '-' or '.' or space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-16">                    <span class="crayon-i">r</span><span class="crayon-s">'\d{3}'</span>             <span class="crayon-c"># first 3 digits</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-17">                    <span class="crayon-i">r</span><span class="crayon-s">'[-\s.]?'</span>           <span class="crayon-c"># followed by '-' or '.' or space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-18">                    <span class="crayon-i">r</span><span class="crayon-s">'\d{4}$'</span><span class="crayon-sy">,</span> <span class="crayon-v">number</span><span class="crayon-sy">,</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-v">DEBUG</span><span class="crayon-sy">)</span>  <span class="crayon-c"># last 4 digits</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-19"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-20">    <span class="crayon-st">if</span> <span class="crayon-v">pattern</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-21">        <span class="crayon-k ">print</span> <span class="crayon-s">'{0} is valid'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">number</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3251223682464-22">    <span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3251223682464-23">        <span class="crayon-k ">print</span> <span class="crayon-s">'{0} is not valid'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">number</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p class="crayon-main"/>
</div>
<p><strong>Parse Tree</strong></p>

		<div id="crayon-56d519a5d3254947699241" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-2">2</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-4">4</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-6">6</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-8">8</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-10">10</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-12">12</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-14">14</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-16">16</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-18">18</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-20">20</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-22">22</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-24">24</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-26">26</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-28">28</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-30">30</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-32">32</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-34">34</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-36">36</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-38">38</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-40">40</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-42">42</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-44">44</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-46">46</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-48">48</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-50">50</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-52">52</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-54">54</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-56">56</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-58">58</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-60">60</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-62">62</p><p class="crayon-num" data-line="crayon-56d519a5d3254947699241-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3254947699241-64">64</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3254947699241-1"><span class="crayon-e">at </span><span class="crayon-e">at_beginning</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-2"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-3"><span class="crayon-h">  </span><span class="crayon-i">subpattern</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-4"><span class="crayon-h">    </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">49</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-5"><span class="crayon-h">    </span><span class="crayon-st">in</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-6"><span class="crayon-h">      </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">45</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-7"><span class="crayon-h">      </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-8"><span class="crayon-e">      </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">46</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-9"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2147483648</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-10"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-11"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-12"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-13"><span class="crayon-h">  </span><span class="crayon-i">subpattern</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-14"><span class="crayon-h">    </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">40</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-15"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2147483648</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-16"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-17"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-18"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-19"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-20"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_digit</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-21"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2147483648</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-22"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-23"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-24"><span class="crayon-e">subpattern </span><span class="crayon-t">None</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-25"><span class="crayon-h">  </span><span class="crayon-v">groupref</span><span class="crayon-sy">_</span>exists<span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-26"><span class="crayon-h">    </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">41</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-27"><span class="crayon-t">None</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-28"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2147483648</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-29"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-30"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-31"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-32"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-33"><span class="crayon-h">    </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">45</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-34"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-35"><span class="crayon-e">    </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">46</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-36"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2147483648</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-37"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-38"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-39"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-cn">3</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-40"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-41"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_digit</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-42"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2147483648</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-43"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-44"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-45"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-46"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-47"><span class="crayon-h">    </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">45</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-48"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-49"><span class="crayon-e">    </span><span class="crayon-i">literal</span><span class="crayon-h"> </span><span class="crayon-cn">46</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-50"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2147483648</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-51"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-52"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_space</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-53"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-cn">4</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-54"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-55"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-e">category_digit</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-56"><span class="crayon-e">at </span><span class="crayon-e">at_end</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-57"><span class="crayon-v">max</span><span class="crayon-sy">_</span>repeat<span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">2147483648</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-58"><span class="crayon-h">  </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-59"><span class="crayon-h">    </span><span class="crayon-e">category </span><span class="crayon-v">category</span><span class="crayon-sy">_</span>space</p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-60"><span class="crayon-cn">123</span><span class="crayon-h"> </span><span class="crayon-cn">555</span><span class="crayon-h"> </span><span class="crayon-cn">6789</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-i">valid</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-61"><span class="crayon-cn">1</span><span class="crayon-o">-</span><span class="crayon-sy">(</span><span class="crayon-cn">123</span><span class="crayon-sy">)</span><span class="crayon-o">-</span><span class="crayon-cn">555</span><span class="crayon-o">-</span><span class="crayon-cn">6789</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-e">valid</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-62"><span class="crayon-sy">(</span><span class="crayon-cn">123</span><span class="crayon-o">-</span><span class="crayon-cn">555</span><span class="crayon-o">-</span><span class="crayon-cn">6789</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-e">valid</span></p><p class="crayon-line" id="crayon-56d519a5d3254947699241-63"><span class="crayon-sy">(</span><span class="crayon-cn">123</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-cn">555.6789</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-i">valid</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3254947699241-64"><span class="crayon-cn">123</span><span class="crayon-h"> </span><span class="crayon-cn">55</span><span class="crayon-h"> </span><span class="crayon-cn">6789</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">valid</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p> </p>
<p> </p>

<p> </p>
<h3>Greedy vs. Ungreedy</h3>
<p>Before I start explaining this concept, I would like to show an example first. Let’s say we are looking to find anchor tags in an html text:</p>
<div id="crayon-537979ef22194786286226" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d519a5d3258976562937" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3258976562937-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3258976562937-2"> </p><p class="crayon-line" id="crayon-56d519a5d3258976562937-3"><span class="crayon-i">html</span> <span class="crayon-o">=</span> <span class="crayon-s">'Hello &lt;a href="http://pysnap.com" title="pysnap"&gt;Pysnap&lt;/a&gt;'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3258976562937-4"> </p><p class="crayon-line" id="crayon-56d519a5d3258976562937-5"><span class="crayon-i">m</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;a.*&gt;.*&lt;\/a&gt;'</span><span class="crayon-sy">,</span> <span class="crayon-v">html</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3258976562937-6"><span class="crayon-st">if</span> <span class="crayon-v">m</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3258976562937-7">    <span class="crayon-k ">print</span> <span class="crayon-v">m</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>The result will be as expected:</p>
<div id="crayon-537979ef2219a687344919" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">


		<div id="crayon-56d519a5d325b787594470" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d325b787594470-1"><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">[</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-s"</span><span class="crayon-o">&gt;</span><span class="crayon-s">'&amp;lt;a href="http://pysnap.com" title="PySnap"&amp;gt;PySnap&amp;lt;/a&amp;gt;'</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<p class="crayon-main"/>
</div>
<p>Let’s change the input and add a second anchor tag:</p>
<div id="crayon-537979ef221a0762427026" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">
<div id="crayon-537979ef221a0762427026-1" class="crayon-line">


		<div id="crayon-56d519a5d325d729616242" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d325d729616242-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d325d729616242-2"> </p><p class="crayon-line" id="crayon-56d519a5d325d729616242-3"><span class="crayon-i">html</span> <span class="crayon-o">=</span> <span class="crayon-s">'Hello &lt;a href="http://pysnap.com" title="pysnap"&gt;Pysnap&lt;/a&gt;'</span> <span class="crayon-sy">\</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d325d729616242-4">       <span class="crayon-s">'Hello &lt;a href="http://example.com" title"example"&gt;Example&lt;/a&gt;'</span></p><p class="crayon-line" id="crayon-56d519a5d325d729616242-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d325d729616242-6"><span class="crayon-i">m</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;a.*&gt;.*&lt;\/a&gt;'</span><span class="crayon-sy">,</span> <span class="crayon-v">html</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d519a5d325d729616242-7"><span class="crayon-st">if</span> <span class="crayon-v">m</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d325d729616242-8">    <span class="crayon-k ">print</span> <span class="crayon-v">m</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p class="crayon-main"/>
</div>
<p>Again, it seems to be fine so far. But don’t let this trick you. If we encounter two anchor tags on the same line, it will no longer work as expected:</p>
<div id="crayon-537979ef221b6090835518" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-plain-wrap">


		<div id="crayon-56d519a5d3260340998283" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3260340998283-1"><span class="crayon-sy">[</span><span class="crayon-s">'&lt;a href="http://pysnap.com" title="PySnap"&gt;PySnap&lt;/a&gt;Hello &lt;a href="http://example.com" title"example"&gt;Example&lt;/a&gt;'</span><span class="crayon-sy">]</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
<p class="crayon-main"/>
</div>
<p>This time the pattern matches the first opening tag, and last opening tag, and everything in between as a single match, instead of making two separate matches. This is due to the default behavior being “greedy”.</p>
<p class="bqt-text">When greedy, the quantifiers (such as * or +) match as many character as possible.</p>
<p>If you add a question mark after the quantifier (.*?) it becomes “ungreedy”:</p>
<div id="crayon-537979ef221c2127537817" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">


		<div id="crayon-56d519a5d3263295404571" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3263295404571-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3263295404571-2"> </p><p class="crayon-line" id="crayon-56d519a5d3263295404571-3"><span class="crayon-i">html</span> <span class="crayon-o">=</span> <span class="crayon-s">'Hello &lt;a href="http://pysnap.com" title="PySnap"&gt;PySnap&lt;/a&gt;'</span> <span class="crayon-sy">\</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3263295404571-4">       <span class="crayon-s">'Hello &lt;a href="http://example.com" title"example"&gt;Example&lt;/a&gt;'</span></p><p class="crayon-line" id="crayon-56d519a5d3263295404571-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3263295404571-6"><span class="crayon-i">m</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-s">'&lt;a.*?&gt;.*?&lt;\/a&gt;'</span><span class="crayon-sy">,</span> <span class="crayon-v">html</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d519a5d3263295404571-7"><span class="crayon-st">if</span> <span class="crayon-v">m</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3263295404571-8">    <span class="crayon-k ">print</span> <span class="crayon-v">m</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
<p class="crayon-main"/>
</div>
<p>Now the result is correct.</p>
<div id="crayon-537979ef221cc148657472" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<p/>

		<div id="crayon-56d519a5d3266941118147" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3266941118147-1"><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">[</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-s"</span><span class="crayon-o">&gt;</span><span class="crayon-s">'&amp;lt;a href="http://pysnap.com" title="PySnap"&amp;gt;PySnap&amp;lt;/a&amp;gt;'</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">,</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-h"</span><span class="crayon-o">&gt;</span> <span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-s"</span><span class="crayon-o">&gt;</span><span class="crayon-s">'&amp;lt;a href="http://example.com" title"example"&amp;gt;Example&amp;lt;/a&amp;gt;'</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">]</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>
</p></div>
<h2>Lookahead and Lookbehind Assertions</h2>
<p>A lookahead assertion searches for a pattern match that follows the current match. This might be explained easier through an example.</p>
<p>The following pattern first matches for ‘foo’, and then it checks to see if it is followed by ‘bar’:</p>
<div id="crayon-537979ef221d6598834261" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-plain-wrap">
<div id="crayon-537979ef221d6598834261-1" class="crayon-line">


		<div id="crayon-56d519a5d3268153595439" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3268153595439-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3268153595439-2"> </p><p class="crayon-line" id="crayon-56d519a5d3268153595439-3"><span class="crayon-i">strings</span> <span class="crayon-o">=</span> <span class="crayon-sy">[</span>  <span class="crayon-s">"hello foo"</span><span class="crayon-sy">,</span>         <span class="crayon-c"># returns False</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3268153595439-4">             <span class="crayon-s">"hello foobar"</span>  <span class="crayon-sy">]</span>    <span class="crayon-c"># returns True</span></p><p class="crayon-line" id="crayon-56d519a5d3268153595439-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3268153595439-6"><span class="crayon-st">for</span> <span class="crayon-k ">string</span> <span class="crayon-st">in</span> <span class="crayon-v">strings</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3268153595439-7">    <span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'foo(?=bar)'</span><span class="crayon-sy">,</span> <span class="crayon-k ">string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3268153595439-8">    <span class="crayon-st">if</span> <span class="crayon-v">pattern</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3268153595439-9">        <span class="crayon-k ">print</span> <span class="crayon-s">'True'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3268153595439-10">    <span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3268153595439-11">        <span class="crayon-k ">print</span> <span class="crayon-s">'False'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p class="crayon-main"/>
</div>
<p>It may not seem very useful, as we could have simply checked for ‘foobar’ instead. However, it is also possible to use lookaheads for making negative assertions. The following example matches ‘foo’, only if it is NOT followed by ‘bar’.</p>
<div id="crayon-537979ef221e1877424203" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-plain-wrap">
<div id="crayon-537979ef221e1877424203-1" class="crayon-line">


		<div id="crayon-56d519a5d326b686227192" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d326b686227192-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326b686227192-2"> </p><p class="crayon-line" id="crayon-56d519a5d326b686227192-3"><span class="crayon-i">strings</span> <span class="crayon-o">=</span> <span class="crayon-sy">[</span>  <span class="crayon-s">"hello foo"</span><span class="crayon-sy">,</span>         <span class="crayon-c"># returns True</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326b686227192-4">             <span class="crayon-s">"hello foobar"</span><span class="crayon-sy">,</span>      <span class="crayon-c"># returns False</span></p><p class="crayon-line" id="crayon-56d519a5d326b686227192-5">             <span class="crayon-s">"hello foobaz"</span><span class="crayon-sy">]</span>      <span class="crayon-c"># returns True</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326b686227192-6"> </p><p class="crayon-line" id="crayon-56d519a5d326b686227192-7"><span class="crayon-st">for</span> <span class="crayon-k ">string</span> <span class="crayon-st">in</span> <span class="crayon-v">strings</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326b686227192-8">    <span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'foo(?!bar)'</span><span class="crayon-sy">,</span> <span class="crayon-k ">string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d519a5d326b686227192-9">    <span class="crayon-st">if</span> <span class="crayon-v">pattern</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326b686227192-10">        <span class="crayon-k ">print</span> <span class="crayon-s">'True'</span></p><p class="crayon-line" id="crayon-56d519a5d326b686227192-11">    <span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326b686227192-12">        <span class="crayon-k ">print</span> <span class="crayon-s">'False'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p class="crayon-main"/>
</div>
<p>Lookbehind assertions work similarly, but they look for patterns before the current match. You may use (?&lt; for positive assertions, and (?&lt;! for negative assertions.</p>
<p>The following pattern matches if there is a ‘bar’ and it is not following ‘foo’.</p>
<div id="crayon-537979ef221eb025735629" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d519a5d326e211952720" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d326e211952720-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326e211952720-2"> </p><p class="crayon-line" id="crayon-56d519a5d326e211952720-3"><span class="crayon-i">strings</span> <span class="crayon-o">=</span> <span class="crayon-sy">[</span>  <span class="crayon-s">"hello bar"</span><span class="crayon-sy">,</span>         <span class="crayon-c"># returns True</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326e211952720-4">             <span class="crayon-s">"hello foobar"</span><span class="crayon-sy">,</span>      <span class="crayon-c"># returns False</span></p><p class="crayon-line" id="crayon-56d519a5d326e211952720-5">             <span class="crayon-s">"hello bazbar"</span><span class="crayon-sy">]</span>      <span class="crayon-c"># returns True</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326e211952720-6"> </p><p class="crayon-line" id="crayon-56d519a5d326e211952720-7"><span class="crayon-st">for</span> <span class="crayon-k ">string</span> <span class="crayon-st">in</span> <span class="crayon-v">strings</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326e211952720-8">    <span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'(?&lt;!foo)bar'</span><span class="crayon-sy">,</span><span class="crayon-k ">string</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d519a5d326e211952720-9">    <span class="crayon-st">if</span> <span class="crayon-v">pattern</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326e211952720-10">        <span class="crayon-k ">print</span> <span class="crayon-s">'True'</span></p><p class="crayon-line" id="crayon-56d519a5d326e211952720-11">    <span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d326e211952720-12">        <span class="crayon-k ">print</span> <span class="crayon-s">'False'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<h3>Conditional (If-Then-Else) Patterns</h3>
<p>Regular expressions provide the functionality for checking certain conditions. The format is as follows:</p>
<div id="crayon-537979ef221f6141029592" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">


		<div id="crayon-56d519a5d3271993320356" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3271993320356-1"><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">?</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">(</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">?</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-o"</span><span class="crayon-o">&gt;=</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-v"</span><span class="crayon-o">&gt;</span><span class="crayon-v">regex</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">)</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-v"</span><span class="crayon-o">&gt;</span><span class="crayon-v">then</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-o"</span><span class="crayon-o">&gt;</span><span class="crayon-o">|</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-st"</span><span class="crayon-o">&gt;</span><span class="crayon-st">else</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-e">span </span><span class="crayon-t">class</span><span class="crayon-o">=</span><span class="crayon-s">"crayon-sy"</span><span class="crayon-o">&gt;</span><span class="crayon-sy">)</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">span</span><span class="crayon-o">&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<p class="crayon-main"/>
</div>
<p>The condition can be a number. In which case it refers to a previously captured subpattern.</p>
<p>For example we can use this to check for opening and closing angle brackets:</p>
<div id="crayon-537979ef22200409283313" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">


		<div id="crayon-56d519a5d3274091274778" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3274091274778-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3274091274778-2"> </p><p class="crayon-line" id="crayon-56d519a5d3274091274778-3"><span class="crayon-i">strings</span> <span class="crayon-o">=</span> <span class="crayon-sy">[</span>  <span class="crayon-s">"&lt;pysnap&gt;"</span><span class="crayon-sy">,</span>    <span class="crayon-c"># returns true</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3274091274778-4">             <span class="crayon-s">"&lt;foo"</span><span class="crayon-sy">,</span>       <span class="crayon-c"># returns false</span></p><p class="crayon-line" id="crayon-56d519a5d3274091274778-5">             <span class="crayon-s">"bar&gt;"</span><span class="crayon-sy">,</span>       <span class="crayon-c"># returns false</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3274091274778-6">             <span class="crayon-s">"hello"</span> <span class="crayon-sy">]</span>     <span class="crayon-c"># returns true</span></p><p class="crayon-line" id="crayon-56d519a5d3274091274778-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3274091274778-8"><span class="crayon-st">for</span> <span class="crayon-k ">string</span> <span class="crayon-st">in</span> <span class="crayon-v">strings</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3274091274778-9">    <span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'^(&lt;)?[a-z]+(?(1)&gt;)$'</span><span class="crayon-sy">,</span> <span class="crayon-k ">string</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3274091274778-10">    <span class="crayon-st">if</span> <span class="crayon-v">pattern</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3274091274778-11">        <span class="crayon-k ">print</span> <span class="crayon-s">'True'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3274091274778-12">    <span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d519a5d3274091274778-13">        <span class="crayon-k ">print</span> <span class="crayon-s">'False'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
<p class="crayon-main"/>
</div>
<p>In the example above, ’1′ refers to the subpattern (&lt;), which is also optional since it is followed by a question mark. Only if that condition is true, it matches for a closing bracket.</p>
<p>The condition can also be an assertion.</p>
<h3>Non-capturing Subpatterns</h3>
<p>Subpatterns, enclosed by parentheses, get captured into an array so that we can use them later if needed. But there is a way to NOT capture them also.</p>
<p>Let’s start with a very simple example:</p>
<div id="crayon-537979ef2220b182800813" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d519a5d3278587701811" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3278587701811-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3278587701811-2"><span class="crayon-k ">string</span> <span class="crayon-o">=</span> <span class="crayon-s">'Hello foobar'</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3278587701811-3"><span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'(f.*)(b.*)'</span><span class="crayon-sy">,</span> <span class="crayon-k ">string</span><span class="crayon-sy">)</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3278587701811-4"><span class="crayon-k ">print</span> <span class="crayon-s">"f* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints f* =&gt; foo          </span></p><p class="crayon-line" id="crayon-56d519a5d3278587701811-5"><span class="crayon-k ">print</span> <span class="crayon-s">"b* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints b* =&gt; bar</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>Now let’s make a small change by adding another subpattern (H.*) to the front:</p>
<div id="crayon-537979ef22214451435128" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">


		<div id="crayon-56d519a5d327a786356976" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d327a786356976-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d327a786356976-2"><span class="crayon-k ">string</span> <span class="crayon-o">=</span> <span class="crayon-s">'Hello foobar'</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d327a786356976-3"><span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'(H.*)(f.*)(b.*)'</span><span class="crayon-sy">,</span> <span class="crayon-k ">string</span><span class="crayon-sy">)</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d327a786356976-4"><span class="crayon-k ">print</span> <span class="crayon-s">"f* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints f* =&gt; Hello          </span></p><p class="crayon-line" id="crayon-56d519a5d327a786356976-5"><span class="crayon-k ">print</span> <span class="crayon-s">"b* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints b* =&gt; bar</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
<p class="crayon-main"/>
</div>
<p>The pattern array was changed, which could cause the script to stop working properly, depending on what we do with those variables in the code. Now we have to find every occurence of the pattern array in the code, and adjust the index number accordingly.<br/>
If we are not really interested in the contents of the new subpattern we just added, we can make it ‘non-capturing’ like this:</p>
<div id="crayon-537979ef2221f491998729" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">


		<div id="crayon-56d519a5d327d135038665" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d327d135038665-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d327d135038665-2"><span class="crayon-k ">string</span> <span class="crayon-o">=</span> <span class="crayon-s">'Hello foobar'</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d327d135038665-3"><span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'(?:H.*)(f.*)(b.*)'</span><span class="crayon-sy">,</span> <span class="crayon-k ">string</span><span class="crayon-sy">)</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d327d135038665-4"><span class="crayon-k ">print</span> <span class="crayon-s">"f* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints f* =&gt; foo          </span></p><p class="crayon-line" id="crayon-56d519a5d327d135038665-5"><span class="crayon-k ">print</span> <span class="crayon-s">"b* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints b* =&gt; bar</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
<p class="crayon-main"/>
</div>
<p>By adding ‘?:’ at the beginning of the subpattern, we no longer capture it in the pattern array, so the other array values do not get shifted.</p>
<h3>Named Subpatterns</h3>
<p>There is another method for preventing pitfalls like in the previous example. We can actually give names to each subpattern, so that we can reference them later on using those names instead of array index numbers. This is the format: <code>(?Ppattern)</code><br/>
We could rewrite the first example in the previous section, like this:</p>
<div id="crayon-537979ef2222a934469203" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">


		<div id="crayon-56d519a5d3280914778709" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3280914778709-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3280914778709-2"><span class="crayon-k ">string</span> <span class="crayon-o">=</span> <span class="crayon-s">'Hello foobar'</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3280914778709-3"><span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'(?P&lt;fstar&gt;f.*)(?P&lt;bstar&gt;b.*)'</span><span class="crayon-sy">,</span> <span class="crayon-k ">string</span><span class="crayon-sy">)</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3280914778709-4"><span class="crayon-k ">print</span> <span class="crayon-s">"f* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-s">'fstar'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints f* =&gt; foo          </span></p><p class="crayon-line" id="crayon-56d519a5d3280914778709-5"><span class="crayon-k ">print</span> <span class="crayon-s">"b* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-s">'bstar'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints b* =&gt; bar</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
<p class="crayon-main"/>
</div>
<p>Now we can add another subpattern, without disturbing the existing matches in the pattern array:</p>
<div id="crayon-537979ef22234434982366" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d519a5d3283413338833" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3283413338833-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3283413338833-2"><span class="crayon-k ">string</span> <span class="crayon-o">=</span> <span class="crayon-s">'Hello foobar'</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3283413338833-3"><span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'(?P&lt;hi&gt;H.*)(?P&lt;fstar&gt;f.*)(?P&lt;bstar&gt;b.*)'</span><span class="crayon-sy">,</span> <span class="crayon-k ">string</span><span class="crayon-sy">)</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3283413338833-4"><span class="crayon-k ">print</span> <span class="crayon-s">"f* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-s">'fstar'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints f* =&gt; foo          </span></p><p class="crayon-line" id="crayon-56d519a5d3283413338833-5"><span class="crayon-k ">print</span> <span class="crayon-s">"b* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-s">'bstar'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints b* =&gt; bar          </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3283413338833-6"><span class="crayon-k ">print</span> <span class="crayon-s">"h* =&gt; {0}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-s">'hi'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span> <span class="crayon-c"># prints b* =&gt; Hello</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<h3>Using Callbacks</h3>
<p>In Python <code>re.sub()</code> can be used to add callback functionality to regular expression replacements.<br/>
Let’s look at this example, where we have an e-mail template.</p>
<div id="crayon-537979ef2223e722676562" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-plain-wrap">


		<div id="crayon-56d519a5d3286718821670" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-2">2</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-4">4</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-6">6</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-8">8</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-10">10</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-12">12</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-14">14</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-16">16</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-18">18</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-20">20</p><p class="crayon-num" data-line="crayon-56d519a5d3286718821670-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d3286718821670-22">22</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d3286718821670-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-2"><span class="crayon-i">template</span> <span class="crayon-o">=</span> <span class="crayon-s">"Hello [first_name] [last_name], \          </span></p><p class="crayon-line" id="crayon-56d519a5d3286718821670-3"><span class="crayon-s">Thank you for purchasing [product_name] from [store_name]. \          </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-4"><span class="crayon-s">The total cost of your purchase was [product_price] plus [ship_price] for shipping. \          </span></p><p class="crayon-line" id="crayon-56d519a5d3286718821670-5"><span class="crayon-s">You can expect your product to arrive in [ship_days_min] to [ship_days_max] business days. \          </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-6"><span class="crayon-s">Sincerely, \          </span></p><p class="crayon-line" id="crayon-56d519a5d3286718821670-7"><span class="crayon-s">[store_manager_name]"</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-8"><span class="crayon-c"># assume dic has all the replacement data          </span></p><p class="crayon-line" id="crayon-56d519a5d3286718821670-9"><span class="crayon-c"># such as dic['first_name'] dic['product_price'] etc...          </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-10"><span class="crayon-i">dic</span> <span class="crayon-o">=</span> <span class="crayon-sy">{</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3286718821670-11"><span class="crayon-s">"first_name"</span> <span class="crayon-o">:</span> <span class="crayon-s">"John"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-12"><span class="crayon-s">"last_name"</span> <span class="crayon-o">:</span> <span class="crayon-s">"Doe"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3286718821670-13"><span class="crayon-s">"product_name"</span> <span class="crayon-o">:</span> <span class="crayon-s">"iphone"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-14"><span class="crayon-s">"store_name"</span> <span class="crayon-o">:</span> <span class="crayon-s">"Walkers"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3286718821670-15"><span class="crayon-s">"product_price"</span><span class="crayon-o">:</span> <span class="crayon-s">"$500"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-16"><span class="crayon-s">"ship_price"</span><span class="crayon-o">:</span> <span class="crayon-s">"$10"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3286718821670-17"><span class="crayon-s">"ship_days_min"</span><span class="crayon-o">:</span> <span class="crayon-s">"1"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-18"><span class="crayon-s">"ship_days_max"</span><span class="crayon-o">:</span> <span class="crayon-s">"5"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3286718821670-19"><span class="crayon-s">"store_manager_name"</span><span class="crayon-o">:</span> <span class="crayon-s">"DoeJohn"</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-20"><span class="crayon-sy">}</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d3286718821670-21"><span class="crayon-i">result</span> <span class="crayon-o">=</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-k ">compile</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'\[(.*)\]'</span><span class="crayon-sy">)</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d3286718821670-22"><span class="crayon-k ">print</span> <span class="crayon-v">result</span><span class="crayon-sy">.</span><span class="crayon-e">sub</span><span class="crayon-sy">(</span><span class="crayon-s">'John'</span><span class="crayon-sy">,</span> <span class="crayon-v">template</span><span class="crayon-sy">,</span> <span class="crayon-v">count</span><span class="crayon-o">=</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
<p class="crayon-main"/>
</div>
<p>Notice that each replacement has something in common. They are always strings enclosed within square brackets. We can catch them all with a single regular expression, and handle the replacements in a callback function.<br/>
So here is the better way of doing this with callbacks:</p>
<div id="crayon-537979ef2224f713272128" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-main">
<div id="crayon-537979ef2224f713272128-1" class="crayon-line">


		<div id="crayon-56d519a5d328a212470636" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-2">2</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-4">4</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-6">6</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-8">8</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-10">10</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-12">12</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-14">14</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-16">16</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-18">18</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-20">20</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-22">22</p><p class="crayon-num" data-line="crayon-56d519a5d328a212470636-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d519a5d328a212470636-24">24</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d328a212470636-1"><span class="crayon-r">import</span> <span class="crayon-k ">re</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-2"><span class="crayon-i">template</span> <span class="crayon-o">=</span> <span class="crayon-s">"Hello [first_name] [last_name], \          </span></p><p class="crayon-line" id="crayon-56d519a5d328a212470636-3"><span class="crayon-s">Thank you for purchasing [product_name] from [store_name]. \          </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-4"><span class="crayon-s">The total cost of your purchase was [product_price] plus [ship_price] for shipping. \          </span></p><p class="crayon-line" id="crayon-56d519a5d328a212470636-5"><span class="crayon-s">You can expect your product to arrive in [ship_days_min] to [ship_days_max] business days. \          </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-6"><span class="crayon-s">Sincerely, \          </span></p><p class="crayon-line" id="crayon-56d519a5d328a212470636-7"><span class="crayon-s">[store_manager_name]"</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-8"><span class="crayon-c"># assume dic has all the replacement data          </span></p><p class="crayon-line" id="crayon-56d519a5d328a212470636-9"><span class="crayon-c"># such as dic['first_name'] dic['product_price'] etc...          </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-10"><span class="crayon-i">dic</span> <span class="crayon-o">=</span> <span class="crayon-sy">{</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d328a212470636-11"><span class="crayon-s">"first_name"</span> <span class="crayon-o">:</span> <span class="crayon-s">"John"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-12"><span class="crayon-s">"last_name"</span> <span class="crayon-o">:</span> <span class="crayon-s">"Doe"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d328a212470636-13"><span class="crayon-s">"product_name"</span> <span class="crayon-o">:</span> <span class="crayon-s">"iphone"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-14"><span class="crayon-s">"store_name"</span> <span class="crayon-o">:</span> <span class="crayon-s">"Walkers"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d328a212470636-15"><span class="crayon-s">"product_price"</span><span class="crayon-o">:</span> <span class="crayon-s">"$500"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-16"><span class="crayon-s">"ship_price"</span><span class="crayon-o">:</span> <span class="crayon-s">"$10"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d328a212470636-17"><span class="crayon-s">"ship_days_min"</span><span class="crayon-o">:</span> <span class="crayon-s">"1"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-18"><span class="crayon-s">"ship_days_max"</span><span class="crayon-o">:</span> <span class="crayon-s">"5"</span><span class="crayon-sy">,</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d328a212470636-19"><span class="crayon-s">"store_manager_name"</span><span class="crayon-o">:</span> <span class="crayon-s">"DoeJohn"</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-20"><span class="crayon-sy">}</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d328a212470636-21"><span class="crayon-r">def</span> <span class="crayon-e">multiple_replace</span><span class="crayon-sy">(</span><span class="crayon-v">dic</span><span class="crayon-sy">,</span> <span class="crayon-v">text</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-22">    <span class="crayon-i">pattern</span> <span class="crayon-o">=</span> <span class="crayon-s">"|"</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-k ">map</span><span class="crayon-sy">(</span><span class="crayon-r">lambda</span> <span class="crayon-i">key</span> <span class="crayon-o">:</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">escape</span><span class="crayon-sy">(</span><span class="crayon-s">"["</span><span class="crayon-o">+</span><span class="crayon-v">key</span><span class="crayon-o">+</span><span class="crayon-s">"]"</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-v">dic</span><span class="crayon-sy">.</span><span class="crayon-e">keys</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d519a5d328a212470636-23">    <span class="crayon-st">return</span> <span class="crayon-k ">re</span><span class="crayon-sy">.</span><span class="crayon-e">sub</span><span class="crayon-sy">(</span><span class="crayon-v">pattern</span><span class="crayon-sy">,</span> <span class="crayon-r">lambda</span> <span class="crayon-v">m</span><span class="crayon-o">:</span> <span class="crayon-v">dic</span><span class="crayon-sy">[</span><span class="crayon-v">m</span><span class="crayon-sy">.</span><span class="crayon-e">group</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span> <span class="crayon-v">text</span><span class="crayon-sy">)</span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328a212470636-24"><span class="crayon-k ">print</span> <span class="crayon-e">multiple_replace</span><span class="crayon-sy">(</span><span class="crayon-v">dic</span><span class="crayon-sy">,</span> <span class="crayon-v">template</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
</div>
<p><strong>When to use Regular Expression?</strong></p>
<div id="crayon-537979ef2224f713272128" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<div class="crayon-main">
<p>Perhaps it’s most important to know when <strong>NOT</strong> to use regular expressions. There are many situations where you can find existing utilities than you can use instead.<br/>
<strong>Parsing [X]HTML</strong></p>
<p><strong><br/>
</strong>A <a href="http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454">poster at Stackoverflow</a> has a brilliant explanation on why we should not use regular expressions to parse [X]HTML.<strong><br/>
</strong>Use a HTML parser instead, Python has several to choose from:</p>

<p>The latter two handle malformed HTML quite gracefully as well, making decent sense of many a botched website.<br/>
ElementTree example:</p>
<div id="crayon-537979ef22262558546619" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<div id="crayon-537979ef22262558546619-1" class="crayon-line">


		<div id="crayon-56d519a5d328f442366749" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d519a5d328f442366749-1"><span class="crayon-st">from</span> <span class="crayon-k ">xml</span><span class="crayon-sy">.</span><span class="crayon-i">etree</span> <span class="crayon-r">import</span> <span class="crayon-i">ElementTree</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328f442366749-2"><span class="crayon-i">tree</span> <span class="crayon-o">=</span> <span class="crayon-v">ElementTree</span><span class="crayon-sy">.</span><span class="crayon-e">parse</span><span class="crayon-sy">(</span><span class="crayon-s">'filename.html'</span><span class="crayon-sy">)</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line" id="crayon-56d519a5d328f442366749-3"><span class="crayon-st">for</span> <span class="crayon-i">element</span> <span class="crayon-st">in</span> <span class="crayon-v">tree</span><span class="crayon-sy">.</span><span class="crayon-e">findall</span><span class="crayon-sy">(</span><span class="crayon-s">'h1'</span><span class="crayon-sy">)</span><span class="crayon-o">:</span>    <span class="crayon-h"> </span>     </p><p class="crayon-line crayon-striped-line" id="crayon-56d519a5d328f442366749-4"><span class="crayon-k ">print</span> <span class="crayon-v">ElementTree</span><span class="crayon-sy">.</span><span class="crayon-e">tostring</span><span class="crayon-sy">(</span><span class="crayon-v">element</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
</div>
</div>
</div>
<p class="crayon-main">Hope you liked this article. Leave a comment</p>



<p id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</p>	</div>

	
	</div></body></html>