<html><body><div><div class="body" role="main">
            
  <div class="section" id="what-s-new-in-pyramid-1-6">
<h1>What's New in Pyramid 1.6<a class="headerlink" href="#what-s-new-in-pyramid-1-6" title="Permalink to this headline">¶</a></h1>
<p>This article explains the new features in <span>Pyramid</span> version 1.6 as
compared to its predecessor, <span>Pyramid</span> 1.5. It also documents backwards
incompatibilities between the two versions and deprecations added to
<span>Pyramid</span> 1.6, as well as software dependency changes and notable
documentation additions.</p>
<div class="section" id="bug-fix-releases">
<h2>Bug Fix Releases<a class="headerlink" href="#bug-fix-releases" title="Permalink to this headline">¶</a></h2>
<p>Pyramid 1.6 was released on 2016-01-03.</p>
<p>The following bug fix releases were made since then. Bug fix releases also
include documentation improvements and other minor feature changes.</p>

</div>
<div class="section" id="backwards-incompatibilities">
<h2>Backwards Incompatibilities<a class="headerlink" href="#backwards-incompatibilities" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">IPython and BPython support have been removed from pshell in the core. To
continue using them on Pyramid 1.6+, you must install the binding packages
explicitly. One way to do this is by adding <code class="docutils literal"><span class="pre">pyramid_ipython</span></code> (or
<code class="docutils literal"><span class="pre">pyramid_bpython</span></code>) to the <code class="docutils literal"><span class="pre">install_requires</span></code> section of your package's
<code class="docutils literal"><span class="pre">setup.py</span></code> file, then re-running <code class="docutils literal"><span class="pre">setup.py</span> <span class="pre">develop</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">setup</span><span class="p">(</span>
    <span class="c">#...</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s">'pyramid_ipython'</span><span class="p">,</span>         <span class="c"># new dependency</span>
        <span class="s">'pyramid'</span><span class="p">,</span>
        <span class="c">#...</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">request.response</span></code> will no longer be mutated when using the
<a class="reference internal" href="api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><code class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></code></a> API. It is now necessary to
pass in a <code class="docutils literal"><span class="pre">response=</span></code> argument to
<a class="reference internal" href="api/renderers.html#pyramid.renderers.render_to_response" title="pyramid.renderers.render_to_response"><code class="xref py py-func docutils literal"><span class="pre">render_to_response()</span></code></a> if you wish to supply the
renderer with a custom response object. If you do not pass one, then a
response object will be created using the current response factory. Almost
all renderers mutate the <code class="docutils literal"><span class="pre">request.response</span></code> response object (for example,
the JSON renderer sets <code class="docutils literal"><span class="pre">request.response.content_type</span></code> to
<code class="docutils literal"><span class="pre">application/json</span></code>). However, when invoking <code class="docutils literal"><span class="pre">render_to_response</span></code>, it is
not expected that the response object being returned would be the same one
used later in the request. The response object returned from
<code class="docutils literal"><span class="pre">render_to_response</span></code> is now explicitly different from <code class="docutils literal"><span class="pre">request.response</span></code>.
This does not change the API of a renderer. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1563">https://github.com/Pylons/pyramid/pull/1563</a></p>
</li>
<li><p class="first">In an effort to combat a common issue it is now a
<a class="reference internal" href="api/exceptions.html#pyramid.exceptions.ConfigurationError" title="pyramid.exceptions.ConfigurationError"><code class="xref py py-class docutils literal"><span class="pre">ConfigurationError</span></code></a> to register a view
callable that is actually an unbound method when using the default view
mapper. As unbound methods do not exist in PY3+ possible errors are detected
by checking if the first parameter is named <code class="docutils literal"><span class="pre">self</span></code>. For example,
<cite>config.add_view(ViewClass.some_method, ...)</cite> should actually be
<cite>config.add_view(ViewClass, attr='some_method)'</cite>. This was always an issue
in Pyramid on PY2 but the backward incompatibility is on PY3+ where you may
not use a function with the first parameter named <code class="docutils literal"><span class="pre">self</span></code>. In this case
it looks too much like a common error and the exception will be raised.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1498">https://github.com/Pylons/pyramid/pull/1498</a></p>
</li>
</ul>
</div>
<div class="section" id="feature-additions">
<h2>Feature Additions<a class="headerlink" href="#feature-additions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Python 3.5 and pypy3 compatibility.</li>
<li><code class="docutils literal"><span class="pre">pserve</span> <span class="pre">--reload</span></code> will no longer crash on syntax errors. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2044">https://github.com/Pylons/pyramid/pull/2044</a></li>
<li>Cache busting for static resources has been added and is available via a new
<code class="xref py py-meth docutils literal"><span class="pre">pyramid.config.Configurator.add_cache_buster()</span></code> API. Core APIs are
shipped for both cache busting via query strings and via asset manifests for
integrating into custom asset pipelines. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1380">https://github.com/Pylons/pyramid/pull/1380</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1583">https://github.com/Pylons/pyramid/pull/1583</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2171">https://github.com/Pylons/pyramid/pull/2171</a></li>
<li>Assets can now be overidden by an absolute path on the filesystem when using
the <a class="reference internal" href="api/config.html#pyramid.config.Configurator.override_asset" title="pyramid.config.Configurator.override_asset"><code class="xref py py-meth docutils literal"><span class="pre">override_asset()</span></code></a> API. This makes it
possible to fully support serving up static content from a mutable directory
while still being able to use the <a class="reference internal" href="api/request.html#pyramid.request.Request.static_url" title="pyramid.request.Request.static_url"><code class="xref py py-meth docutils literal"><span class="pre">static_url()</span></code></a>
API and <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_static_view" title="pyramid.config.Configurator.add_static_view"><code class="xref py py-meth docutils literal"><span class="pre">add_static_view()</span></code></a>.  Previously it
was not possible to use <a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_static_view" title="pyramid.config.Configurator.add_static_view"><code class="xref py py-meth docutils literal"><span class="pre">add_static_view()</span></code></a>
with an absolute path <strong>and</strong> generate urls to the content. This change
replaces the call, <code class="docutils literal"><span class="pre">config.add_static_view('/abs/path',</span> <span class="pre">'static')</span></code>, with
<code class="docutils literal"><span class="pre">config.add_static_view('myapp:static',</span> <span class="pre">'static')</span></code> and
<code class="docutils literal"><span class="pre">config.override_asset(to_override='myapp:static/',</span>
<span class="pre">override_with='/abs/path/')</span></code>. The <code class="docutils literal"><span class="pre">myapp:static</span></code> asset spec is completely
made up and does not need to exist—it is used for generating URLs via
<code class="docutils literal"><span class="pre">request.static_url('myapp:static/foo.png')</span></code>. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1252">https://github.com/Pylons/pyramid/issues/1252</a></li>
<li>Added <code class="xref py py-meth docutils literal"><span class="pre">set_response_factory()</span></code> and the
<code class="docutils literal"><span class="pre">response_factory</span></code> keyword argument to the constructor of
<a class="reference internal" href="api/config.html#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal"><span class="pre">Configurator</span></code></a> for defining a factory that will return
a custom <code class="docutils literal"><span class="pre">Response</span></code> class. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1499">https://github.com/Pylons/pyramid/pull/1499</a></li>
<li>Added <code class="xref py py-attr docutils literal"><span class="pre">pyramid.config.Configurator.root_package</span></code> attribute and init
parameter to assist with includible packages that wish to resolve resources
relative to the package in which the configurator was created. This is
especially useful for add-ons that need to load asset specs from settings, in
which case it may be natural for a developer to define imports or assets
relative to the top-level package. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1337">https://github.com/Pylons/pyramid/pull/1337</a></li>
<li>Overall improvments for the <code class="docutils literal"><span class="pre">proutes</span></code> command. Added <code class="docutils literal"><span class="pre">--format</span></code> and
<code class="docutils literal"><span class="pre">--glob</span></code> arguments to the command, introduced the <code class="docutils literal"><span class="pre">method</span></code>
column for displaying available request methods, and improved the <code class="docutils literal"><span class="pre">view</span></code>
output by showing the module instead of just <code class="docutils literal"><span class="pre">__repr__</span></code>. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1488">https://github.com/Pylons/pyramid/pull/1488</a></li>
<li><code class="docutils literal"><span class="pre">pserve</span></code> can now take a <code class="docutils literal"><span class="pre">-b</span></code> or <code class="docutils literal"><span class="pre">--browser</span></code> option to open the server
URL in a web browser. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1533">https://github.com/Pylons/pyramid/pull/1533</a></li>
<li>Support keyword-only arguments and function annotations in views in Python 3.
See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1556">https://github.com/Pylons/pyramid/pull/1556</a></li>
<li>The <code class="docutils literal"><span class="pre">append_slash</span></code> argument of
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_notfound_view" title="pyramid.config.Configurator.add_notfound_view"><code class="xref py py-meth docutils literal"><span class="pre">add_notfound_view()</span></code></a> will now accept
anything that implements the <a class="reference internal" href="api/interfaces.html#pyramid.interfaces.IResponse" title="pyramid.interfaces.IResponse"><code class="xref py py-class docutils literal"><span class="pre">IResponse</span></code></a> interface
and will use that as the response class instead of the default
<a class="reference internal" href="api/httpexceptions.html#pyramid.httpexceptions.HTTPFound" title="pyramid.httpexceptions.HTTPFound"><code class="xref py py-class docutils literal"><span class="pre">HTTPFound</span></code></a>. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1610">https://github.com/Pylons/pyramid/pull/1610</a></li>
<li>The <a class="reference internal" href="api/config.html#pyramid.config.Configurator" title="pyramid.config.Configurator"><code class="xref py py-class docutils literal"><span class="pre">Configurator</span></code></a> has grown the ability to allow
actions to call other actions during a commit cycle. This enables much more
logic to be placed into actions, such as the ability to invoke other actions
or group them for improved conflict detection. We have also exposed and
documented the configuration phases that Pyramid uses in order to further
assist in building conforming add-ons. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1513">https://github.com/Pylons/pyramid/pull/1513</a></li>
<li>Allow an iterator to be returned from a renderer. Previously it was only
possible to return bytes or unicode. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1417">https://github.com/Pylons/pyramid/pull/1417</a></li>
<li>Improve robustness to timing attacks in the
<a class="reference internal" href="api/authentication.html#pyramid.authentication.AuthTktCookieHelper" title="pyramid.authentication.AuthTktCookieHelper"><code class="xref py py-class docutils literal"><span class="pre">AuthTktCookieHelper</span></code></a> and the
<a class="reference internal" href="api/session.html#pyramid.session.SignedCookieSessionFactory" title="pyramid.session.SignedCookieSessionFactory"><code class="xref py py-class docutils literal"><span class="pre">SignedCookieSessionFactory</span></code></a> classes by using the
stdlib's <code class="docutils literal"><span class="pre">hmac.compare_digest</span></code> if it is available (such as Python 2.7.7+
and 3.3+). See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1457">https://github.com/Pylons/pyramid/pull/1457</a></li>
<li>Improve the readability of the <code class="docutils literal"><span class="pre">pcreate</span></code> shell script output. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1453">https://github.com/Pylons/pyramid/pull/1453</a></li>
<li>Make it simple to define <code class="docutils literal"><span class="pre">notfound</span></code> and <code class="docutils literal"><span class="pre">forbidden</span></code> views that wish to
use the default exception-response view, but with altered predicates and
other configuration options. The <code class="docutils literal"><span class="pre">view</span></code> argument is now optional in
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_notfound_view" title="pyramid.config.Configurator.add_notfound_view"><code class="xref py py-meth docutils literal"><span class="pre">add_notfound_view()</span></code></a> and
<a class="reference internal" href="api/config.html#pyramid.config.Configurator.add_forbidden_view" title="pyramid.config.Configurator.add_forbidden_view"><code class="xref py py-meth docutils literal"><span class="pre">add_forbidden_view()</span></code></a> See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/494">https://github.com/Pylons/pyramid/issues/494</a></li>
<li>The <code class="docutils literal"><span class="pre">pshell</span></code> script will now load a <code class="docutils literal"><span class="pre">PYTHONSTARTUP</span></code> file if one is
defined in the environment prior to launching the interpreter. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1448">https://github.com/Pylons/pyramid/pull/1448</a></li>
<li>Add new HTTP exception objects for status codes <code class="docutils literal"><span class="pre">428</span> <span class="pre">Precondition</span>
<span class="pre">Required</span></code>, <code class="docutils literal"><span class="pre">429</span> <span class="pre">Too</span> <span class="pre">Many</span> <span class="pre">Requests</span></code> and <code class="docutils literal"><span class="pre">431</span> <span class="pre">Request</span> <span class="pre">Header</span> <span class="pre">Fields</span> <span class="pre">Too</span>
<span class="pre">Large</span></code> in <code class="docutils literal"><span class="pre">pyramid.httpexceptions</span></code>. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1372/files">https://github.com/Pylons/pyramid/pull/1372/files</a></li>
<li><code class="docutils literal"><span class="pre">pcreate</span></code> when run without a scaffold argument will now print information
on the missing flag, as well as a list of available scaffolds. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1566">https://github.com/Pylons/pyramid/pull/1566</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1297">https://github.com/Pylons/pyramid/issues/1297</a></li>
<li><code class="docutils literal"><span class="pre">pcreate</span></code> will now ask for confirmation if invoked with an argument for a
project name that already exists or is importable in the current environment.
See <a class="reference external" href="https://github.com/Pylons/pyramid/issues/1357">https://github.com/Pylons/pyramid/issues/1357</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1837">https://github.com/Pylons/pyramid/pull/1837</a></li>
<li>Add <a class="reference internal" href="api/request.html#pyramid.request.apply_request_extensions" title="pyramid.request.apply_request_extensions"><code class="xref py py-func docutils literal"><span class="pre">pyramid.request.apply_request_extensions()</span></code></a> function which can be
used in testing to apply any request extensions configured via
<code class="docutils literal"><span class="pre">config.add_request_method</span></code>. Previously it was only possible to test the
extensions by going through Pyramid's router. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1581">https://github.com/Pylons/pyramid/pull/1581</a></li>
<li>Make it possible to subclass <code class="docutils literal"><span class="pre">pyramid.request.Request</span></code> and also use
<code class="docutils literal"><span class="pre">pyramid.request.Request.add_request.method</span></code>. See
<a class="reference external" href="https://github.com/Pylons/pyramid/issues/1529">https://github.com/Pylons/pyramid/issues/1529</a></li>
<li>Additional shells for <code class="docutils literal"><span class="pre">pshell</span></code> can now be registered as entry points. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1891">https://github.com/Pylons/pyramid/pull/1891</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2012">https://github.com/Pylons/pyramid/pull/2012</a></li>
<li>The variables injected into <code class="docutils literal"><span class="pre">pshell</span></code> are now displayed with their
docstrings instead of the default <code class="docutils literal"><span class="pre">str(obj)</span></code> when possible. See
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1929">https://github.com/Pylons/pyramid/pull/1929</a></li>
</ul>
</div>
<div class="section" id="deprecations">
<h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The <code class="docutils literal"><span class="pre">pserve</span></code> command's daemonization features, as well as
<code class="docutils literal"><span class="pre">--monitor-restart</span></code>, have been deprecated. This includes the
<code class="docutils literal"><span class="pre">[start,stop,restart,status]</span></code> subcommands, as well as the <code class="docutils literal"><span class="pre">--daemon</span></code>,
<code class="docutils literal"><span class="pre">--stop-daemon</span></code>, <code class="docutils literal"><span class="pre">--pid-file</span></code>, <code class="docutils literal"><span class="pre">--status</span></code>, <code class="docutils literal"><span class="pre">--user</span></code>, <code class="docutils literal"><span class="pre">--group</span></code>, and
<code class="docutils literal"><span class="pre">--log-file</span></code> flags. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/2120">https://github.com/Pylons/pyramid/pull/2120</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2189">https://github.com/Pylons/pyramid/pull/2189</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/1641">https://github.com/Pylons/pyramid/pull/1641</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2329">https://github.com/Pylons/pyramid/pull/2329</a></p>
<p>Please use a real process manager in the future instead of relying on
<code class="docutils literal"><span class="pre">pserve</span></code> to daemonize itself. Many options exist, including your operating
system's services, such as Systemd or Upstart, as well as Python-based
solutions like Circus and Supervisor.</p>
<p>See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1641">https://github.com/Pylons/pyramid/pull/1641</a> and
<a class="reference external" href="https://github.com/Pylons/pyramid/pull/2120">https://github.com/Pylons/pyramid/pull/2120</a></p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">principal</span></code> argument to <a class="reference internal" href="api/security.html#pyramid.security.remember" title="pyramid.security.remember"><code class="xref py py-func docutils literal"><span class="pre">pyramid.security.remember()</span></code></a> was renamed
to <code class="docutils literal"><span class="pre">userid</span></code>. Using <code class="docutils literal"><span class="pre">principal</span></code> as the argument name still works and will
continue to work for the next few releases, but a deprecation warning is
printed.</p>
</li>
</ul>
</div>
<div class="section" id="scaffolding-enhancements">
<h2>Scaffolding Enhancements<a class="headerlink" href="#scaffolding-enhancements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added line numbers to the log formatters in the scaffolds to assist with
debugging. See <a class="reference external" href="https://github.com/Pylons/pyramid/pull/1326">https://github.com/Pylons/pyramid/pull/1326</a></li>
<li>Updated scaffold generating machinery to return the version of <span>Pyramid</span>
and its documentation for use in scaffolds. Updated <code class="docutils literal"><span class="pre">starter</span></code>, <code class="docutils literal"><span class="pre">alchemy</span></code>
and <code class="docutils literal"><span class="pre">zodb</span></code> templates to have links to correctly versioned documentation,
and to reflect which <span>Pyramid</span> was used to generate the scaffold.</li>
<li>Removed non-ASCII copyright symbol from templates, as this was causing the
scaffolds to fail for project generation.</li>
</ul>
</div>
<div class="section" id="documentation-enhancements">
<h2>Documentation Enhancements<a class="headerlink" href="#documentation-enhancements" title="Permalink to this headline">¶</a></h2>

</div>
</div>


          </div>
        </div></body></html>