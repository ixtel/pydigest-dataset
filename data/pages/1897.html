<html><body><div><div class="col-md-12">
				<p dir="ltr">Remember the <a href="http://bulbapedia.bulbagarden.net/wiki/Pok%C3%A9dex">Pokédex</a> from Pokémon?</p>
<p dir="ltr">It was the hand-held, all-knowing super machine that was invaluable to any Pokémon trainer trying to <em>Catch ‘Em All</em> in the late 90’s and early 00’s. With it’s encyclopedic knowledge of Pokémon, the Pokédex was the tool you whipped out of your pocket whenever you wanted to learn about a new Pokémon you had discovered in the games, the television series, or the card game.</p>
<p dir="ltr">But to the disappointment of millions of children, the Pokédex wasn’t real, or at least, a Pokédex that had the same functionality as the one in the television series. There were quite a few knock-off products that provided a mediocre experience and the craving for the cool gadget was never really satisfied. Even now, at 25, I still dream of a Pokédex as good as the one in the television series. Luckily, with ten extra years of technological advancement and hard work by the world’s top scientists and programmers, I think we’ve discovered a way to get close to that dream of owning a Pokédex.</p>
<p dir="ltr">Nearly all the information about the Pokémon video games was recently added to a web API (<em>disclaimer: I built it</em>) called <a href="http://pokeapi.co">PokéAPI</a>. This API contains all the data from the Pokémon computer games series, including <a href="http://pokeapi.co/media/img/25.png">sprites</a> (images from the game) and <a href="http://pokeapi.co/api/v1/description/382/">descriptions</a> of each Pocket Monster. With a few APIs calls and some software manipulation, you can replicate the content that a Pokédex might give to you when you discover a Pokémon in the field.</p>
<p dir="ltr">But how to get this data into a portable, hand-held device? Well, it turns out that we all carry a portable hand-held <em>“does everything”</em> device these days. Building an iOS or Android application might be a good way to share this content but that would require a data connection. Getting people to install an app is hard and it’s also really time consuming for the developer. In Pokémon: the Pokédex works almost anywhere, in a glacier, in the desert, even in the ocean! It must be running on the some form of PSTN network and using SMS and MMS as it’s medium of communication, right?</p>
<p dir="ltr">As we’re trying to get as close as possible to an authentic Pokédex, let’s use Twilio MMS and the PokéAPI to build a service that we can query when we discover a new Pokémon, no matter where we are, even if we don’t have cellular data!</p>
<h1 dir="ltr">Try it now!</h1>
<p dir="ltr">Don’t want to build your own Pokédex? Give the one I built earlier a whirl by sending the name of a Pokémon to <strong>(740) 630-0051 (US)</strong> or <strong>+442030952965 (UK is SMS only)</strong>:</p>
<p> </p>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh5.googleusercontent.com/sc06aJVk_v8BwR8MZNYtG-DDsE0mOjku9MeQbL6TUtvYDbC2LgIWOY4r79qlv-NjUCSkC5HqBxXaHKheajiloca15lRDNo030eBQdu4ENsNawvaGNYjXEpD4Wj0B8s8onA"/></p>
<p dir="ltr"><em>There really is no better Pokémon to demonstrate this with</em></p>
<h1 dir="ltr">How to build your own Pokédex</h1>
<p dir="ltr">In order to create our own MMS Pokédex we’ll need to:</p>
<ul>
<li>Make HTTP requests to <a href="http://pokeapi.co">PokéAPI.co</a>.</li>
<li>Collect all the relevant resources from PokéAPI (Pokémon, description and sprite).</li>
<li>Create a Django web application and add our PokéAPI query code to it.</li>
<li>Add our PokéAPI description to a <a href="https://www.twilio.com/docs/api/twiml">TwiML</a> document for Twilio.</li>
<li>Deploy our Django application to Heroku so it is visible on the web.</li>
<li>Test it out.</li>
<li><a href="https://www.youtube.com/watch?v=NcfdoSuC6MI&amp;channel=cradiIy">Be the very best, like no one ever was</a></li>
</ul>
<h1 dir="ltr">What will you need?</h1>
<p dir="ltr">In order to complete this tutorial you will need:</p>

<p dir="ltr">and with that you’re good to go!</p>
<h1 dir="ltr">Making HTTP Requests to PokéAPI.co</h1>
<p dir="ltr">Getting yourself familiar with PokéAPI will also mean you’ll be learning how to talk to and navigate a <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> API, a common way of presenting resources and data through an API on the web. We’ll be using <strong>Python</strong> for this tutorial, but the API can be queried in any language, even with <em>cURL</em>, try this command in the terminal:</p>
<p/>

		<div id="crayon-56d5a0ec0cb21353636629" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb21353636629-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">curl </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//pokeapi.co/api/v1/pokemon/</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr">The PokéAPI will return <a href="http://json.org/">JSON</a> formatted representations of the data stored on the application’s servers. JSON is a common data format which can easily be translated into a programming language’s native object representation.</p>
<p dir="ltr">In Python, we’ll start by using the <a href="http://docs.python-requests.org/en/latest/">Requests</a> library to make an HTTP Request to PokéAPI for data on a Pokémon (let’s pick Charizard because he’s awesome) and load that JSON data into a native Python object representation using Python’s JSON library.</p>
<p dir="ltr">First, install the requests library using <a href="https://pip.pypa.io/en/latest/installing.html">pip</a>:</p>
<p/>

		

<p/>
<p dir="ltr">Create a new directory called <em>pokemon</em> (or something descriptive), then open up a new file inside that directory and write the following code. Save the file as <em>query.py</em>:</p>
<p/>

		<div id="crayon-56d5a0ec0cb40779309416" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb40779309416-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">requests</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb40779309416-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">json</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb40779309416-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb40779309416-4"><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://pokeapi.co/api/v1/pokemon/charizard/'</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb40779309416-5"><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">requests</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">url</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb40779309416-6"> </p><p class="crayon-line" id="crayon-56d5a0ec0cb40779309416-7"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-v">status_code</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb40779309416-8"><span class="crayon-h">    </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">json</span><span class="crayon-sy">.</span><span class="crayon-e">loads</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-v">text</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb40779309416-9"><span class="crayon-h">    </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-v">data</span><span class="crayon-sy">[</span><span class="crayon-s">'name'</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb40779309416-10"><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb40779309416-11">   <span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">'An error occurred querying the API'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Here we are importing requests and Python’s core JSON library. Then we’re creating a variable called <em>url</em> containing a url to the PokéAPI. Below that, on line 5, we make the HTTP Request using requests’ <em>get()</em> function and store the results in a variable called response.</p>
<p dir="ltr">The conditional statement below this checks that we’ve received an <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#2xx_Success">HTTP 200 OK</a> response (the standard response for HTTP when we’ve made a successful query). If we get back an okay response we transform the JSON string into a native Python object and print out the <em>name</em> <a href="http://pokeapi.co/docs/#pokemon">attribute</a>. If we did not get a HTTP 200 OK response (check your internet connection!) then we just print out an error.</p>
<p dir="ltr">Let’s run that script with Python in our terminal and see the result:</p>
<p/>

		<div id="crayon-56d5a0ec0cb4b335648598" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb4b335648598-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb4b335648598-2"><span class="crayon-v">Charizard</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>With that small script, we’ve learned how to query the PokéAPI REST API and format the response natively in Python. Nice! Give yourself a big victory roar!</p>
<p dir="ltr"><img class="aligncenter" alt="giphy.gif" src="https://lh3.googleusercontent.com/9p3_eNVYteGkVSOoHX8G7i94Q-8n6QQZ1qszjzK1P5haDd7BtxUje9ksIYGWpqSt2bm47HhlwjDftbq2RgoUevTpJQZbiwkm6gQ3dR1LOTHevMjCuwZHQe0x1qRF3eu9aw"/></p>
<h1 dir="ltr">Collecting relevant resources for our Pokédex</h1>
<p dir="ltr">Victory roar made you feel awesome? Good. Let’s collect the resources relevant to Charizard that we want to use for our Pokédex: the description and the sprite resources.</p>
<p dir="ltr">We’ll modify our script to grab this data and print it out:</p>
<p/>

		<div id="crayon-56d5a0ec0cb56906433137" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5a0ec0cb56906433137-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-2">2</p><p class="crayon-num" data-line="crayon-56d5a0ec0cb56906433137-3">3</p><p class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-4">4</p><p class="crayon-num" data-line="crayon-56d5a0ec0cb56906433137-5">5</p><p class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-6">6</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5a0ec0cb56906433137-7">7</p><p class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-8">8</p><p class="crayon-num" data-line="crayon-56d5a0ec0cb56906433137-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-10">10</p><p class="crayon-num" data-line="crayon-56d5a0ec0cb56906433137-11">11</p><p class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-12">12</p><p class="crayon-num" data-line="crayon-56d5a0ec0cb56906433137-13">13</p><p class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-14">14</p><p class="crayon-num" data-line="crayon-56d5a0ec0cb56906433137-15">15</p><p class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-16">16</p><p class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-56d5a0ec0cb56906433137-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-18">18</p><p class="crayon-num crayon-marked-num crayon-top" data-line="crayon-56d5a0ec0cb56906433137-19">19</p><p class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-20">20</p><p class="crayon-num" data-line="crayon-56d5a0ec0cb56906433137-21">21</p><p class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-22">22</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5a0ec0cb56906433137-23">23</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5a0ec0cb56906433137-24">24</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb56906433137-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">requests</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">json</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb56906433137-3"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-4"><span class="crayon-v">BASE_URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://pokeapi.co'</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb56906433137-5"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-6"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">query_pokeapi</span><span class="crayon-sy">(</span><span class="crayon-v">resource_url</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5a0ec0cb56906433137-7"><span class="crayon-h">    </span><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'{0}{1}'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">BASE_URL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">resource_url</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-8"><span class="crayon-h">    </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">requests</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">url</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb56906433137-9"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-10"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-v">status_code</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb56906433137-11"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-k ">json</span><span class="crayon-sy">.</span><span class="crayon-e">loads</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-v">text</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-12"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">None</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb56906433137-13"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-14"><span class="crayon-v">charizard</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">query_pokeapi</span><span class="crayon-sy">(</span><span class="crayon-s">'/api/v1/pokemon/charizard/'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb56906433137-15"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-16"><span class="crayon-v">sprite_uri</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">charizard</span><span class="crayon-sy">[</span><span class="crayon-s">'sprites'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'resource_uri'</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-marked-line crayon-bottom" id="crayon-56d5a0ec0cb56906433137-17"><span class="crayon-v">description_uri</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">charizard</span><span class="crayon-sy">[</span><span class="crayon-s">'descriptions'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'resource_uri'</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-18"> </p><p class="crayon-line crayon-marked-line crayon-top" id="crayon-56d5a0ec0cb56906433137-19"><span class="crayon-v">sprite</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">query_pokeapi</span><span class="crayon-sy">(</span><span class="crayon-v">sprite_uri</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-20"><span class="crayon-v">description</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">query_pokeapi</span><span class="crayon-sy">(</span><span class="crayon-v">description_uri</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb56906433137-21"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-22"><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-v">charizard</span><span class="crayon-sy">[</span><span class="crayon-s">'name'</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5a0ec0cb56906433137-23"><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-v">description</span><span class="crayon-sy">[</span><span class="crayon-s">'description'</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5a0ec0cb56906433137-24"><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-v">BASE_URL</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">sprite</span><span class="crayon-sy">[</span><span class="crayon-s">'image'</span><span class="crayon-sy">]</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Quite a bit has changed to get us to where we want to be, so let’s go through this and understand what is happening. We’ve taken the url for PokéAPI and stored it in a global variable called <em>BASE_URL</em>, because we want to use it throughout the code.</p>
<p>Below this on line 6 we have created a function called <em>query_pokeapi</em> that takes a single parameter <em>resource_url</em>. This function does most of the work from the previous script by querying PokéAPI and returning a Python representation of the JSON data it receives. We’ll be using this code block a lot, so making it into a function means we can reuse it.</p>
<p dir="ltr">On line 14 we’re making a query to PokéAPI to get data on the Pokémon Charizard. On lines 16 and 17 we’re looking at the Charizard data and getting back the <em>resource_uri</em> attribute for linked Description and Sprite resources. This is using another important concept of REST APIs called <a href="https://en.wikipedia.org/wiki/HATEOAS">HATEOAS</a>, the jist of it being to provide hypermedia links (such as URLs) to related resources. We’re then using those hypermedia links to query PokéAPI for the relevant Sprite and Description resources.</p>
<p dir="ltr">Finally, we’re printing out the information that we want our Pokédex to display:</p>
<p/>

		<div id="crayon-56d5a0ec0cb61260179295" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb61260179295-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb61260179295-2"><span class="crayon-e">Charizard</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb61260179295-3"><span class="crayon-e">Spits </span><span class="crayon-e">fire </span><span class="crayon-e">that </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-e">hot </span><span class="crayon-e">enough </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">melt </span><span class="crayon-v">boulders</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">Known </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">cause </span><span class="crayon-e">forest </span><span class="crayon-e">fire </span><span class="crayon-v">unintentionally</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb61260179295-4"><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//pokeapi.co/media/img/6.png</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>If we paste the sprite image link into our browser we’ll see a sprite of Charizard from the computer games:</p>
<p> </p>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh4.googleusercontent.com/sWEEeMqfTliDqbAuBOheJL_ROLt9POckW2NlXSaHGGH3gqJ890dN4CauEeHdVJhTvLto662JIejsmpO_7mFWOi7fuU6Dl0BJH9EPcbVPn3P3lSrp1G5q95mkXKFpNfHrDg"/></p>
<p> </p>
<p dir="ltr">This print out isn’t quite as spectacular as a real Pokédex, so let’s figure out a way to get this on our mobile phones via Twilio and MMS.</p>
<h1 dir="ltr">Creating a Django web application and composing a TwiML response</h1>
<p dir="ltr">In order to get our code online and pokémons into our phones, we’ll need to install a few things and configure a basic Django web application. When we have the web application running, we can send an SMS to a <a href="https://www.twilio.com/phone-numbers">Twilio phone number</a>. When Twilio receives this SMS, it will make an HTTP Request to our Django application. The Django app will execute the code we’ve written and  send back a response to Twilio, which then processes the instructions and sends the user an MMS (or SMS if you’re in the UK).</p>
<p dir="ltr"><img alt="" src="https://lh6.googleusercontent.com/wBRx7Ttk6V8JYoTM5mj4YA-FcTV07F7e2c_EVURoQQ2qEVaieUpVgsOc1mP3oDQZNf8icsXpjnwH6fVc5ZI1qj-hjIM78_H1lz9wACqLEN2XWpshbRCtGBQbhbRGZXOhWw"/></p>
<p dir="ltr">To get started building our application, we want to use <a href="https://help.github.com/articles/set-up-git/">git</a> to clone a basic Django project (that I’ve created to save some time) and checkout the start branch:</p>
<p/>

		<div id="crayon-56d5a0ec0cb6d763795497" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb6d763795497-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">git </span><span class="crayon-r">clone</span><span class="crayon-h"> </span><span class="crayon-v">git</span><span class="crayon-sy">@</span><span class="crayon-v">github</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">:</span><span class="crayon-v">phalt</span><span class="crayon-o">/</span><span class="crayon-v">poketext</span><span class="crayon-sy">.</span><span class="crayon-i">git</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb6d763795497-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">cd </span><span class="crayon-i">poketext</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb6d763795497-3"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">git </span><span class="crayon-e">checkout </span><span class="crayon-v">start</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Once you have cloned the project and checked out the start branch, we need to create a Python <a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/">virtual environment</a> and install all the relevant software for this project to run. Type the following into the terminal:</p>

		<div id="crayon-56d5a0ec0cb79742692500" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb79742692500-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">virtualenv </span><span class="crayon-e">venv</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb79742692500-2"><span class="crayon-r">New</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-e">executable </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">venv</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-e">python</span></p><p class="crayon-line" id="crayon-56d5a0ec0cb79742692500-3"><span class="crayon-e">Installing </span><span class="crayon-v">setuptools</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">pip</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">done</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>For Twilio to work with Django, we need to add our <a href="https://www.twilio.com/user/account">TWILIO_ACCOUNT_SID and TWILIO_AUTH_TOKEN tokens</a> to our environment. Open the <em>venv/bin/activate</em> file with a text editor, navigate to the bottom and add these two lines:</p>

		<div id="crayon-56d5a0ec0cb8b803217280" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb8b803217280-1"><span class="crayon-e">export </span><span class="crayon-v">TWILIO_ACCOUNT_SID</span><span class="crayon-o">=</span><span class="crayon-e">ACXXXXXX</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb8b803217280-2"><span class="crayon-e">export </span><span class="crayon-v">TWILIO_AUTH_TOKEN</span><span class="crayon-o">=</span><span class="crayon-v">ATXXXXXX</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Be sure to replace the values with your own tokens. Save the file and activate the virtual environment:</p>

		<div id="crayon-56d5a0ec0cb9b398259293" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cb9b398259293-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">source </span><span class="crayon-v">venv</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-e">activate</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cb9b398259293-2"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Then use pip to install all the requirements:</p>

		<div id="crayon-56d5a0ec0cbad754543222" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cbad754543222-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">pip </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">requirements</span><span class="crayon-sy">.</span><span class="crayon-e">txt</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbad754543222-2"><span class="crayon-v">Downloading</span><span class="crayon-o">/</span><span class="crayon-e">unpacking </span><span class="crayon-v">Django</span><span class="crayon-o">==</span><span class="crayon-cn">1.7.1</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">from</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">requirements</span><span class="crayon-sy">.</span><span class="crayon-e">txt</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">line</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbad754543222-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbad754543222-4"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbad754543222-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbad754543222-6"><span class="crayon-e">Successfully </span><span class="crayon-e">installed </span><span class="crayon-e">Django </span><span class="crayon-e">SQLAlchemy </span><span class="crayon-v">dj</span><span class="crayon-o">-</span><span class="crayon-v">database</span><span class="crayon-o">-</span><span class="crayon-e">url </span><span class="crayon-v">dj</span><span class="crayon-o">-</span><span class="crayon-m">static</span><span class="crayon-h"> </span><span class="crayon-v">django</span><span class="crayon-o">-</span><span class="crayon-v">phonenumber</span><span class="crayon-o">-</span><span class="crayon-e">field </span><span class="crayon-v">django</span><span class="crayon-o">-</span><span class="crayon-e">postgrespool </span><span class="crayon-v">django</span><span class="crayon-o">-</span><span class="crayon-e">toolbelt </span><span class="crayon-v">django</span><span class="crayon-o">-</span><span class="crayon-e">twilio </span><span class="crayon-e">gunicorn </span><span class="crayon-e">httplib2 </span><span class="crayon-e">phonenumbers </span><span class="crayon-e">psycopg2 </span><span class="crayon-e">requests </span><span class="crayon-e">six </span><span class="crayon-e">static3 </span><span class="crayon-e">twilio </span><span class="crayon-e">whitenoise</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbad754543222-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbad754543222-8"><span class="crayon-e">Cleaning </span><span class="crayon-v">up</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbad754543222-9"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">$</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>With everything installed, make sure the server is working:</p>

		<div id="crayon-56d5a0ec0cbbd599186341" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cbbd599186341-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-sy">.</span><span class="crayon-e">py </span><span class="crayon-v">runserver</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>If you see the following output then we’re good to go:</p>

		<div id="crayon-56d5a0ec0cbcd690606488" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cbcd690606488-1"><span class="crayon-i">October</span><span class="crayon-h"> </span><span class="crayon-cn">28</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2014</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-o">:</span><span class="crayon-cn">08</span><span class="crayon-o">:</span><span class="crayon-cn">26</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbcd690606488-2"><span class="crayon-e">Django </span><span class="crayon-i">version</span><span class="crayon-h"> </span><span class="crayon-cn">1.7.1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">using </span><span class="crayon-i">settings</span><span class="crayon-h"> </span><span class="crayon-s">'poketext.settings'</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbcd690606488-3"><span class="crayon-e">Starting </span><span class="crayon-e">development </span><span class="crayon-e">server </span><span class="crayon-e">at </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//127.0.0.1:8000/</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbcd690606488-4"><span class="crayon-e">Quit </span><span class="crayon-e">the </span><span class="crayon-e">server </span><span class="crayon-e">with </span><span class="crayon-v">CONTROL</span><span class="crayon-o">-</span><span class="crayon-v">C</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Type <em>CONTROL+C</em> to stop the server.</p>
<p>Let’s write some code! Open the file in the poketext directory called <em>views.py</em> in your prefered text editor. This is where we’ll build the views that our web application serves. It should currently be completely blank. If you see some code here then you’ve probably forgotten to checkout the <em>start</em> branch:</p>

		<div id="crayon-56d5a0ec0cbdd008053099" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cbdd008053099-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">git </span><span class="crayon-e">checkout </span><span class="crayon-v">start</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>With the file empty, let’s copy in the content from the previous <em>query.py</em> file and write some new Pythonic logic around it to work with Django. All changes are highlighted below:</p>

		<div id="crayon-56d5a0ec0cbee195992677" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num crayon-marked-num crayon-top" data-line="crayon-56d5a0ec0cbee195992677-1">1</p><p class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-2">2</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-4">4</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-6">6</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-8">8</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-10">10</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-12">12</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-14">14</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-15">15</p><p class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-16">16</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5a0ec0cbee195992677-17">17</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-18">18</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5a0ec0cbee195992677-19">19</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-20">20</p><p class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-56d5a0ec0cbee195992677-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-22">22</p><p class="crayon-num crayon-marked-num crayon-top" data-line="crayon-56d5a0ec0cbee195992677-23">23</p><p class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-24">24</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-26">26</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-28">28</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-30">30</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-32">32</p><p class="crayon-num crayon-marked-num crayon-top" data-line="crayon-56d5a0ec0cbee195992677-33">33</p><p class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-34">34</p><p class="crayon-num" data-line="crayon-56d5a0ec0cbee195992677-35">35</p><p class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-36">36</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5a0ec0cbee195992677-37">37</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-38">38</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5a0ec0cbee195992677-39">39</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-40">40</p><p class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-56d5a0ec0cbee195992677-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-42">42</p><p class="crayon-num crayon-marked-num crayon-top" data-line="crayon-56d5a0ec0cbee195992677-43">43</p><p class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="crayon-56d5a0ec0cbee195992677-44">44</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-marked-line crayon-top" id="crayon-56d5a0ec0cbee195992677-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">django_twilio</span><span class="crayon-sy">.</span><span class="crayon-e">views </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">twilio_view</span></p><p class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">.</span><span class="crayon-e">twiml </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">Response</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">requests</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-4"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">json</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-6"><span class="crayon-v">BASE_URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'http://pokeapi.co'</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-8"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">query_pokeapi</span><span class="crayon-sy">(</span><span class="crayon-v">resource_uri</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-9"><span class="crayon-h">    </span><span class="crayon-v">url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'{0}{1}'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">BASE_URL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">resource_uri</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-10"><span class="crayon-h">    </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">requests</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">url</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-11"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-12"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-v">status_code</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-13"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-k ">json</span><span class="crayon-sy">.</span><span class="crayon-e">loads</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-v">text</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-14"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">None</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-15"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-16"><span class="crayon-sy">@</span><span class="crayon-e">twilio_view</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5a0ec0cbee195992677-17"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">incoming_message</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-18"><span class="crayon-h">    </span><span class="crayon-v">twiml</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Response</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5a0ec0cbee195992677-19"> </p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-20"><span class="crayon-h">    </span><span class="crayon-v">body</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">POST</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'Body'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-bottom" id="crayon-56d5a0ec0cbee195992677-21"><span class="crayon-h">    </span><span class="crayon-v">body</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">body</span><span class="crayon-sy">.</span><span class="crayon-e">lower</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-22"> </p><p class="crayon-line crayon-marked-line crayon-top" id="crayon-56d5a0ec0cbee195992677-23"><span class="crayon-h">    </span><span class="crayon-v">pokemon_url</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'/api/v1/pokemon/{0}/'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">body</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-24"><span class="crayon-h">    </span><span class="crayon-v">pokemon</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">query_pokeapi</span><span class="crayon-sy">(</span><span class="crayon-v">pokemon_url</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-25"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-26"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">pokemon</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-27"><span class="crayon-h">        </span><span class="crayon-v">sprite_uri</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pokemon</span><span class="crayon-sy">[</span><span class="crayon-s">'sprites'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'resource_uri'</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-28"><span class="crayon-h">        </span><span class="crayon-v">description_uri</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pokemon</span><span class="crayon-sy">[</span><span class="crayon-s">'descriptions'</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-s">'resource_uri'</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-29"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-30"><span class="crayon-h">        </span><span class="crayon-v">sprite</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">query_pokeapi</span><span class="crayon-sy">(</span><span class="crayon-v">sprite_uri</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-31"><span class="crayon-h">        </span><span class="crayon-v">description</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">query_pokeapi</span><span class="crayon-sy">(</span><span class="crayon-v">description_uri</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-32"> </p><p class="crayon-line crayon-marked-line crayon-top" id="crayon-56d5a0ec0cbee195992677-33"><span class="crayon-h">        </span><span class="crayon-v">message</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'{0}, {1}'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">pokemon</span><span class="crayon-sy">[</span><span class="crayon-s">'name'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">description</span><span class="crayon-sy">[</span><span class="crayon-s">'description'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-34"><span class="crayon-h">        </span><span class="crayon-v">image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'{0}{1}'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">BASE_URL</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sprite</span><span class="crayon-sy">[</span><span class="crayon-s">'image'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0cbee195992677-35"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-36"><span class="crayon-h">        </span><span class="crayon-v">frm</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">POST</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'From'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5a0ec0cbee195992677-37"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-s">'+44'</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">frm</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-38"><span class="crayon-h">            </span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-s">'{0} {1}'</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">message</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">image</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5a0ec0cbee195992677-39"><span class="crayon-h">            </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">twiml</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-40"><span class="crayon-e">        </span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-v">message</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">media</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-bottom" id="crayon-56d5a0ec0cbee195992677-41"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">twiml</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-42"> </p><p class="crayon-line crayon-marked-line crayon-top" id="crayon-56d5a0ec0cbee195992677-43"><span class="crayon-e">    </span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-s">"Something went wrong! Try 'Pikachu' or 'Rotom'"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cbee195992677-44"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">twiml</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p> </p>
<p dir="ltr">Let’s go through the highlights and get an understanding of what is happening.</p>
<p dir="ltr">On line 1 and 2 we are importing some Twilio-specific python tools, the <em>twilio_view</em> is a <a href="https://wiki.python.org/moin/PythonDecorators#What_is_a_Decorator">decorator</a> that helps to format responses from Django back to Twilio. The <em>Response</em> class will help us to generate our <a href="https://www.twilio.com/docs/api/twiml">TwiML</a> response programmatically in Python. Below this you’ll notice the same <em>query_pokeapi</em> function that we had earlier, it still serves the same purpose here.</p>
<p dir="ltr">The function <em>incoming_message</em> which starts on line 17 is the Django <a href="https://docs.djangoproject.com/en/dev/topics/http/views/">view</a> that will receive requests from Twilio. The first parameter it takes, <em>request</em>, is a Python representation of the incoming HTTP Request. You’ll notice just above, on line 16, that we’ve written <em>@twilio_view</em>, this is some “syntactic sugar” in Python that tells the decorator to be run when this view is called.</p>
<p dir="ltr">Starting on line 18, we create a new <em>Response</em> object called <em>twiml</em>, which we’ll use later on. Lines 20 and 21 get the <em>Body</em> of the inbound SMS message we’ll be expecting from Twilio and makes sure that lower casing is applied to it. When Twilio sends an HTTP Request about an inbound SMS message, we’ll get a bunch of POST parameters with it. You can see a full list of the items that are sent to you in the <a href="https://www.twilio.com/docs/api/twiml/sms/twilio_request">documentation on twilio.com</a>. Just below, a URL is composed from the <em>Body</em> variable and used to query the PokéAPI for a Pokémon.</p>
<p dir="ltr">Through lines 26 to 31 we’re saying “If a Pokémon response is given, get the description and sprite resources for that Pokémon”, much like in the second script we wrote.</p>
<p dir="ltr">Line 33 and 34 format the correct message and image that we’ll use for our response and line 38 builds that response. The penultimate step is to see what number we received the message from, if ‘+44’ is in the number, we know it is a UK phone number and we want to send back just an standard SMS, otherwise we send back an MMS.</p>
<p dir="ltr">Finally we return the <em>twiml</em> variable. At this point, Django-twilio will format it correctly (by adding the correct content type and representing it as XML) and send it back to Twilio.</p>
<p dir="ltr">If we did not get a pokémon response on line 26, we create a different set of TwiML on line 43 and 44 with an error message.</p>
<h1 dir="ltr">Setting up URL routing and making a test request</h1>
<p dir="ltr">Before we can test that this works, we want to link the view function <em>incoming_message</em> to a URL in Django’s URL config. This can be done in the <em>poketext/urls.py</em> file:</p>
<p/>

		<div id="crayon-56d5a0ec0cc04959868009" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cc04959868009-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">django</span><span class="crayon-sy">.</span><span class="crayon-v">conf</span><span class="crayon-sy">.</span><span class="crayon-e">urls </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">patterns</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">include</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">url</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc04959868009-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">django</span><span class="crayon-sy">.</span><span class="crayon-e">contrib </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">admin</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc04959868009-3"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-56d5a0ec0cc04959868009-4"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">views</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc04959868009-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc04959868009-6"><span class="crayon-v">urlpatterns</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">patterns</span><span class="crayon-sy">(</span><span class="crayon-s">''</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc04959868009-7"><span class="crayon-h">    </span><span class="crayon-c"># Examples:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc04959868009-8"><span class="crayon-h">    </span><span class="crayon-c"># url(r'^$', 'poketext.views.home', name='home'),</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc04959868009-9"><span class="crayon-h">    </span><span class="crayon-c"># url(r'^blog/', include('blog.urls')),</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc04959868009-10"><span class="crayon-h">    </span><span class="crayon-e">url</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'^admin/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">include</span><span class="crayon-sy">(</span><span class="crayon-v">admin</span><span class="crayon-sy">.</span><span class="crayon-k ">site</span><span class="crayon-sy">.</span><span class="crayon-v">urls</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5a0ec0cc04959868009-11"><span class="crayon-h">    </span><span class="crayon-e">url</span><span class="crayon-sy">(</span><span class="crayon-i">r</span><span class="crayon-s">'^incoming/message$'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">views</span><span class="crayon-sy">.</span><span class="crayon-v">incoming_message</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc04959868009-12"><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Import the <em>views</em> file on line 4 and create a new URL in the tuple on line 11 like the highlights above. Save the file and then run the server again:</p>

		<div id="crayon-56d5a0ec0cc16315762016" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cc16315762016-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-sy">.</span><span class="crayon-e">py </span><span class="crayon-e">runserver</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc16315762016-2"><span class="crayon-e">Performing </span><span class="crayon-e">system </span><span class="crayon-v">checks</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc16315762016-3"><span class="crayon-e">System </span><span class="crayon-e">check </span><span class="crayon-e">identified </span><span class="crayon-e">no </span><span class="crayon-e">issues</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-v">silenced</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc16315762016-4"><span class="crayon-i">October</span><span class="crayon-h"> </span><span class="crayon-cn">28</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2014</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">13</span><span class="crayon-o">:</span><span class="crayon-cn">37</span><span class="crayon-o">:</span><span class="crayon-cn">00</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc16315762016-5"><span class="crayon-e">Django </span><span class="crayon-i">version</span><span class="crayon-h"> </span><span class="crayon-cn">1.7.1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">using </span><span class="crayon-i">settings</span><span class="crayon-h"> </span><span class="crayon-s">'poketext.settings'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc16315762016-6"><span class="crayon-e">Starting </span><span class="crayon-e">development </span><span class="crayon-e">server </span><span class="crayon-e">at </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//127.0.0.1:8000/</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc16315762016-7"><span class="crayon-e">Quit </span><span class="crayon-e">the </span><span class="crayon-e">server </span><span class="crayon-e">with </span><span class="crayon-v">CONTROL</span><span class="crayon-o">-</span><span class="crayon-v">C</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>In a new terminal window, send a cURL request to the server to make sure we get back the XML response we’re expecting:</p>

		<div id="crayon-56d5a0ec0cc26654350362" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cc26654350362-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">F</span><span class="crayon-h"> </span><span class="crayon-v">Body</span><span class="crayon-o">=</span><span class="crayon-e">Charizard </span><span class="crayon-v">localhost</span><span class="crayon-o">:</span><span class="crayon-cn">8000</span><span class="crayon-o">/</span><span class="crayon-e">incoming</span><span class="crayon-o">/</span><span class="crayon-e">message</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc26654350362-2"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"UTF-8"</span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">Response</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">Message</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">Body</span><span class="crayon-o">&gt;</span><span class="crayon-v">Charizard</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Spits </span><span class="crayon-e">fire </span><span class="crayon-e">that </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-e">hot </span><span class="crayon-e">enough </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">melt </span><span class="crayon-v">boulders</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">Known </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">cause </span><span class="crayon-e">forest </span><span class="crayon-e">fires </span><span class="crayon-v">unintentionally</span><span class="crayon-sy">.</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">Body</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">Media</span><span class="crayon-o">&gt;</span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//pokeapi.co/media/img/6.png&lt;/Media&gt;&lt;/Message&gt;&lt;/Response&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>The output on the terminal is a bit messy, here is a properly formatted XML output:</p>

		<div id="crayon-56d5a0ec0cc44143862880" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cc44143862880-1"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"UTF-8"</span><span class="crayon-ta">?&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc44143862880-2"><span class="crayon-h">  </span><span class="crayon-r ">&lt;Response&gt;</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc44143862880-3"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;Message&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc44143862880-4"><span class="crayon-i ">      </span><span class="crayon-r ">&lt;Body&gt;</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc44143862880-5"><span class="crayon-i ">        Charizard, Spits fire that is hot enough to melt boulders. Known to cause forest fires unintentionally.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc44143862880-6"><span class="crayon-i ">      </span><span class="crayon-r ">&lt;/Body&gt;</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc44143862880-7"><span class="crayon-i ">      </span><span class="crayon-r ">&lt;Media&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc44143862880-8"><span class="crayon-i ">        http://pokeapi.co/media/img/6.png</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc44143862880-9"><span class="crayon-i ">      </span><span class="crayon-r ">&lt;/Media&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc44143862880-10"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;/Message&gt;</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc44143862880-11"><span class="crayon-i ">  </span><span class="crayon-r ">&lt;/Response&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Woo! Our Django application is taking our HTTP Request, querying PokéAPI and then giving us back an XML response that Twilio will understand! Time for another celebration:</p>
<p dir="ltr"><img class="aligncenter" alt="giphy.gif" src="https://lh3.googleusercontent.com/F6CGuWb1wG8-1DFxPOZvyPDs8zb7lLrgUTd4wRYrh-dFMNuYpy7x32DeE-6WxJ_gOcBV6MAKixMSzOO-1N17mKzzBOnUhFYYeO9o6djIaJladvXHCNl5OCCfbbKnVmdQEA"/></p>
<p>It appears Cubone, Snubbull and Raichu are not impressed. Why’s that? Probably because we haven’t got this deployed and integrated with Twilio yet. Let’s make them happy and get the last piece of our Pokédex puzzle solved.</p>
<h1 dir="ltr">Deploying our application to Heroku</h1>
<p dir="ltr">In order to get our application running on the web, we’re going to need to commit all the changes we’ve made using git:</p>
<p/>

		<div id="crayon-56d5a0ec0cc74553587031" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cc74553587031-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">git </span><span class="crayon-e">add </span><span class="crayon-v">poketext</span><span class="crayon-o">/</span><span class="crayon-v">urls</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc74553587031-2"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">git </span><span class="crayon-e">add </span><span class="crayon-v">poketext</span><span class="crayon-o">/</span><span class="crayon-v">views</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc74553587031-3"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">git </span><span class="crayon-v">commit</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">m</span><span class="crayon-h"> </span><span class="crayon-s">'Added views and url config'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc74553587031-4"><span class="crayon-sy">[</span><span class="crayon-e">start </span><span class="crayon-v">d62b334</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">Added </span><span class="crayon-e">views </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-e">url </span><span class="crayon-i">config</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc74553587031-5"><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">files </span><span class="crayon-v">changed</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">44</span><span class="crayon-h"> </span><span class="crayon-e">insertions</span><span class="crayon-sy">(</span><span class="crayon-o">+</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>With these changes committed (with an appropriate commit message) we can deploy the code.</p>
<p>We’re going to be using <a href="https://www.heroku.com/">Heroku</a>, a cloud application platform, to host and run the app. If you don’t want to learn how to use Heroku and just want to deploy a copy of the application, click the button below and skip to the next step:</p>
<p dir="ltr"><a href="https://heroku.com/deploy?template=https://github.com/phalt/poketext"><img class="aligncenter" alt="" src="https://lh3.googleusercontent.com/hAXj9qaM-vk48ib3ZsjaaNgkNbZ9QExoIeISLOgCTn9JotBE3UPvpFIrqigLwzlk4RHiWnMlr01lJSZBWGLmOOD08AS2NmgDrhlD1g1vE7ENrwuk93JB60kanQAS0-hUlg"/></a></p>
<p dir="ltr">If you want to learn how to use Heroku, they have a fantastic <a href="https://devcenter.heroku.com/articles/getting-started-with-python#introduction">getting started guide</a> that I recommend reading before you continue. In particular, you want to make sure you have the <a href="https://devcenter.heroku.com/articles/getting-started-with-python#set-up">Heroku toolbelt</a> installed and ready to use.</p>
<p dir="ltr">With the toolbelt installed and with you logged into Heroku, let’s go ahead and create a new Heroku app:</p>
<p/>

		<div id="crayon-56d5a0ec0cc9d666376886" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cc9d666376886-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">heroku </span><span class="crayon-e">create</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc9d666376886-2"><span class="crayon-e">Creating </span><span class="crayon-v">aqueous</span><span class="crayon-o">-</span><span class="crayon-v">coast</span><span class="crayon-o">-</span><span class="crayon-cn">1744...</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">stack </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-e">cedar</span></p><p class="crayon-line" id="crayon-56d5a0ec0cc9d666376886-3"><span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-c">//aqueous-coast-1744.herokuapp.com/ | git@heroku.com:aqueous-coast-1744.git</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cc9d666376886-4"><span class="crayon-e">Git </span><span class="crayon-e">remote </span><span class="crayon-e">heroku </span><span class="crayon-v">added</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Don’t forget that your heroku URL and app name will be different from the one shown here. To deploy the code to the new Heroku app use the following command:</p>

		<div id="crayon-56d5a0ec0ccbc805401714" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0ccbc805401714-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">git </span><span class="crayon-e">push </span><span class="crayon-e">heroku </span><span class="crayon-e">master</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0ccbc805401714-2"><span class="crayon-e">Initializing </span><span class="crayon-v">repository</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5a0ec0ccbc805401714-3"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0ccbc805401714-4"> </p><p class="crayon-line" id="crayon-56d5a0ec0ccbc805401714-5"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">Python </span><span class="crayon-e">app </span><span class="crayon-v">detected</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0ccbc805401714-6"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">Installing </span><span class="crayon-e">runtime</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">python</span><span class="crayon-o">-</span><span class="crayon-cn">2.7.8</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0ccbc805401714-7"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-e">Installing </span><span class="crayon-e">dependencies </span><span class="crayon-e">with </span><span class="crayon-i">pip</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0ccbc805401714-8">      <span class="crayon-v">Downloading</span><span class="crayon-o">/</span><span class="crayon-e">unpacking </span><span class="crayon-v">Django</span><span class="crayon-o">==</span><span class="crayon-cn">1.7.1</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">from</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">requirements</span><span class="crayon-sy">.</span><span class="crayon-e">txt</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">line</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a0ec0ccbc805401714-9"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0ccbc805401714-10"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>The project I created, that we cloned with git near the start of this guide, already has all the settings files Heroku expects, so Heroku will detect that it is a Python application and begin installing the correct requirements. If all goes to plan, you should see the following terminal output:</p>

		<div id="crayon-56d5a0ec0cccf902570399" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cccf902570399-1"><span class="crayon-v">Compressing</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">43.0MB</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cccf902570399-2"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Launching</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">v1</span></p><p class="crayon-line" id="crayon-56d5a0ec0cccf902570399-3"><span class="crayon-e">    </span><span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-c">//aqueous-coast-1744.herokuapp.com/ deployed to Heroku</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cccf902570399-4"><span class="crayon-st">To</span><span class="crayon-h"> </span><span class="crayon-v">git</span><span class="crayon-sy">@</span><span class="crayon-v">heroku</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">:</span><span class="crayon-v">aqueous</span><span class="crayon-o">-</span><span class="crayon-v">coast</span><span class="crayon-o">-</span><span class="crayon-cn">1744.git</span></p><p class="crayon-line" id="crayon-56d5a0ec0cccf902570399-5"><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-v">branch</span><span class="crayon-sy">]</span><span class="crayon-h"> </span>     <span class="crayon-v">master</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">master</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Before we look at the live version of the app, we need to add our <a href="https://www.twilio.com/user/account">Twilio Account Sid and Twilio Auth Token</a> to Heroku using the following commands:</p>

		<div id="crayon-56d5a0ec0cce1261715235" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0cce1261715235-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">heroku </span><span class="crayon-v">config</span><span class="crayon-o">:</span><span class="crayon-e">set </span><span class="crayon-v">TWILIO_ACCOUNT_SID</span><span class="crayon-o">=</span><span class="crayon-s">'ACXXXXXX'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cce1261715235-2"><span class="crayon-e">Setting </span><span class="crayon-e">config </span><span class="crayon-e">vars </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-e">restarting </span><span class="crayon-v">aqueous</span><span class="crayon-o">-</span><span class="crayon-v">coast</span><span class="crayon-o">-</span><span class="crayon-cn">1744...</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">v1</span></p><p class="crayon-line" id="crayon-56d5a0ec0cce1261715235-3"><span class="crayon-v">TWILIO_ACCOUNT_SID</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">ACXXXXXX</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cce1261715235-4"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">heroku </span><span class="crayon-v">config</span><span class="crayon-o">:</span><span class="crayon-e">set </span><span class="crayon-v">TWILIO_AUTH_TOKEN</span><span class="crayon-o">=</span><span class="crayon-s">'ATXXXXXX'</span></p><p class="crayon-line" id="crayon-56d5a0ec0cce1261715235-5"><span class="crayon-e">Setting </span><span class="crayon-e">config </span><span class="crayon-e">vars </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-e">restarting </span><span class="crayon-v">aqueous</span><span class="crayon-o">-</span><span class="crayon-v">coast</span><span class="crayon-o">-</span><span class="crayon-cn">1744...</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">v1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0cce1261715235-6"><span class="crayon-v">TWILIO_AUTH_TOKEN</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">ATXXXXXX</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Be sure to replace the values with your actual credentials.</p>
<p>With the Twilio account credentials set, we should be able to send a cURL request to the Heroku application:</p>

		<div id="crayon-56d5a0ec0ccf2549058752" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a0ec0ccf2549058752-1"><span class="crayon-sy">(</span><span class="crayon-v">venv</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">curl</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">F</span><span class="crayon-h"> </span><span class="crayon-v">Body</span><span class="crayon-o">=</span><span class="crayon-e">Charizard </span><span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-c">//YOUR-APP-NAME.herokuapp.com/incoming/message</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a0ec0ccf2549058752-2"><span class="crayon-ta">&lt;?</span><span class="crayon-e">xml </span><span class="crayon-i">version</span><span class="crayon-o">=</span><span class="crayon-s">"1.0"</span><span class="crayon-h"> </span><span class="crayon-i">encoding</span><span class="crayon-o">=</span><span class="crayon-s">"UTF-8"</span><span class="crayon-ta">?&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">Response</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">Message</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">Body</span><span class="crayon-o">&gt;</span><span class="crayon-v">Charizard</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Spits </span><span class="crayon-e">fire </span><span class="crayon-e">that </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-e">hot </span><span class="crayon-e">enough </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">melt </span><span class="crayon-v">boulders</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">Known </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">cause </span><span class="crayon-e">forest </span><span class="crayon-e">fires </span><span class="crayon-v">unintentionally</span><span class="crayon-sy">.</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">Body</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">Media</span><span class="crayon-o">&gt;</span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-c">//pokeapi.co/media/img/6.png&lt;/Media&gt;&lt;/Message&gt;&lt;/Response&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h1 dir="ltr">Linking our application to a Twilio phone number</h1>
<p dir="ltr">Now that we have a live, publicly addressable version of our application running, let’s get it linked to a Twilio phone number. With a free Twilio trial account, we will have one Twilio phone number in the <a href="https://www.twilio.com/user/account/phone-numbers/incoming">numbers dashboard</a>, we want to make sure it has MMS capabilities, which is denoted by this little image:</p>
<p dir="ltr"><img class="aligncenter" alt="Screen Shot 2014-10-28 at 15.png" src="https://lh4.googleusercontent.com/PDCFEZnbrHhh9lqFaLeaEQwIcJsktlJ080HHNsY8JyadEPhcjplxgqCz5VCaEaRoUiPdBwNC7lkRLHp9L5aEwwwX7RyaVDlxLVLeTnorRlDPrB1Jw1t0UqM0KpXdAAVNTA"/></p>
<p dir="ltr">If you don’t have an MMS-enabled number, get a <a href="https://www.twilio.com/user/account/phone-numbers/search">new phone number here</a>.</p>
<p dir="ltr">Within the MMS enabled phone number settings, we want to change the Messaging URL to point to our heroku URL and then click save.</p>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh5.googleusercontent.com/uYF6z0L__h3Diz0ZMXFV0Kl8rwouX5mvHeUy89IXLbvvAQG9FVbKc08ZbQmlPIy-qLNuuAH_u5pUW37AlPdeKNitGDFoG0tIt-WzXk5XjOyWCtcx5rj3j8su87iCcXqcNw"/></p>
<p dir="ltr">The very last step is to send an SMS message to the Twilio phone number to check it is working with some different Pokémon:</p>
<p> </p>
<p dir="ltr"><img class="aligncenter" alt="pokes.png" src="https://lh4.googleusercontent.com/KRrCm_fjCkadWBnLsTpWsefjzrI2JVDS04lkIZUbergReNOUULU29jytB31qTC1-n8Ab6qBCu1SInXNmtkKNTBrn7LMAjM3kyHzVXPebejHuh_qtEu6v1rAG1Xkw_qFZnA"/></p>
<p>Ash Ketchum would cheer in joy right now if he was here.</p>
<h1 dir="ltr">Be the very best, like no one ever was</h1>
<p dir="ltr">You should now be the proud owner of a real life, sophisticated Pokédex. During any future Pokémon battle, or when you’re trying to show your nephew how cool you still are, the MMS Pokédex is an invaluable tool to have.</p>
<p dir="ltr">I hope you’ve enjoyed learning how to do all the things we’ve covered here:</p>
<ul>
<li>Interacting with a REST API using Python</li>
<li>Building a Twilio TwiML response to send an MMS</li>
<li>Deploying a Django application to Heroku</li>
</ul>
<p dir="ltr">Each of these skills will be useful in your future Pokémon-related software journeys, I promise.</p>
<p dir="ltr">If you are an aging Pokémon master like me and you’d like to chat, or if you’ve got any questions about what I’ve described in this blog post, get in touch with me at <a href="mailto:paul@twilio.com">paul@twilio.com</a> or on <a href="https://twitter.com/phalt_">twitter</a>. See you at the Indigo Plateau!</p>
			</div>
					</div></body></html>