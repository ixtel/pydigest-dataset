<html><body><div><p class="lead" itemprop="description">А бывает так: только-только человек приготовился локализовать своё приложение для Django, а тут на тебе  — makemessages в упор не видит некоторые строки.</p>
                <div class="py_user"><p>Прежде всего, нужно вспомнить, что в Django существует с десяток функций для пометки строк, назначенных к переводу, самые известные из которых, пожалуй, </p><b>gettext_lazy</b><p> и </p><b>ngettext_lazy</b><p>. И вполне нормально, когда вы используете сразу несколько.</p><p>Проблемы могут возникнуть если попытаться импортировать функции под другими именами.</p><p>.. code:: python</p><p>    from django.utils.translation import ugettext_lazy as _  # Классика.    </p><p>    # А теперь для краткости присвоим псевдоним ungettext_lazy:</p><p>    from django.utils.translation import ugettext_lazy as ungettext_lazy as _n</p><p>Присвоить-то вы присвоите, только такую пометку команда </p><code>makemessages</code><p> не поймёт, и не сможет собрать для вас .po-файл. </p><p>А причина вот в чём — </p><a href="https://github.com/django/django/blob/stable/1.7.x/django/core/management/commands/makemessages.py#L102" target="_blank">https://github.com/<...>makemessages.py</...></a><p>Команда использует утилиту </p><code>xgettext</code><p>, и по ссылке видно, что этой утилите передаются ключевые слова, которые должны служить маркером строк для перевода. Само собой, среди этих слов нашего </p><b>_n</b><p> нет.</p><p>«Позвольте!» — скажете вы, так ведь и </p><b>_</b><p> там тоже нет. Это верно: там подчерка нет. Однако о нём </p><code>xgettext</code><p> знает и </p><a href="https://www.gnu.org/software/gettext/manual/html_node/xgettext-Invocation.html" target="_blank">сам</a><p>.</p><blockquote>For Python: gettext, ugettext, dgettext:2, ngettext:1,2, ungettext:1,2, dngettext:2,3, _. </blockquote><p>То есть, сэкономить на символах не выйдет, придётся вернуть </p><b>ungettext_lazy</b><p>.</p></div>

                

                

                </div></body></html>