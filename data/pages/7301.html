<html><body><div><div class="post-text" itemprop="text">

<p>I use jQuery month picker (without date) with format like:201110.</p>

<p>I want to set a min date (see in code), so first define it in django forms.py the date-min, then parse this date to html. There is a min/max range first. (though this not work now).</p>

<p>Then in order to realize the "to" date is always later than "from" dateï¼Œ I need to use min/max function also, then it overrides the previous month ranges I set from SQL. </p>

<p>The currenct situation is I could realize "to" date &gt; "from" date. But the min date(coming from MYSQL) doesn't work now. </p>

<p>How could I solve this conflict, please tell me. Thanks in advance</p>

<p>Thanks for your reply in advance.</p>

<pre><code>&lt;script type="text/javascript"&gt;
    $(function() {
 $( "#from, #to" ).datepicker({ 
       changeMonth: true,
       changeYear: true,
       showButtonPanel: true,
       dateFormat: 'yy MM',
       minDate: $(this).date-min, ///it is here doesn't work, the minDate is coming from Django

       onClose: function(dateText, inst) { 
           var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
           var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();             
           $(this).datepicker('setDate', new Date(year, month, 1));
       },
       beforeShow : function(input, inst) {
           if ((datestr = $(this).val()).length &gt; 0) {
               year = datestr.substring(datestr.length-4, datestr.length);
               month = jQuery.inArray(datestr.substring(0, datestr.length-5), $(this).datepicker('option', 'monthNames'));
               $(this).datepicker('option', 'defaultDate', new Date(year, month, 1));
               $(this).datepicker('setDate', new Date(year, month, 1));    
           }
           var other = this.id == "from" ? "#to" : "#from";
           var option = this.id == "from" ? "maxDate" : "minDate";        
           if ((selectedDate = $(other).val()).length &gt; 0) {
               year = selectedDate.substring(selectedDate.length-4, selectedDate.length);
               month = jQuery.inArray(selectedDate.substring(0, selectedDate.length-5), $(this).datepicker('option', 'monthNames'));
               $(this).datepicker( "option", option, new Date(year, month, 1));
           }
       }
   });
   $("#btnShow").click(function(){ 
   if ($("#from").val().length == 0 || $("#to").val().length == 0){
       alert('All fields are required');
   }
   else{
       alert('Selected Month Range :'+ $("#from").val() + ' to ' + $("#to").val());
       }
   })
    });


    &lt;/script&gt;
</code></pre>

<p>How I define my min-date in dJango:</p>

<p>In models.py </p>

<pre><code>class XXX(models.Model):
    start_date=models.DateField(auto_now_add=True)
    end_date=models.DateField(auto_now_add=True)
</code></pre>

<p>In forms.py</p>

<pre><code>class Meta:
        model = XXX
        fields = ('start_date','end_date')
        date_min=XXX.objects.all().aggregate(Min('date'))   &lt;this field is NOT defined in models.py, is that OK?; and format is like 2011-11-01 --&gt;

        widgets = {
                'start_date': forms.DateInput(attrs={'class':'datepicker',
                                                     'date-min':date_min,                                                   
                                                     }),                          
            }
</code></pre>
    </div>
    </div></body></html>