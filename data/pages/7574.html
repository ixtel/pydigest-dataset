<html><body><div><div id="wikitext">
<p/> 

<p class="vspace">Matplotlib позволяет рисовать на графиках различные геометрические фигуры, стрелки, а также линии, заданные различными способами. В этой статье будут рассмотрены основные моменты, характерные для рисования различных геометрических фигур. В качестве примера будет рассматриваться скрипт, который рисует следующую картинку:
</p>
<p class="vspace"/>
<p class="vspace">Все геометрические объекты на графике рисуются в несколько шагов. Сначала нужно получить (или создать) оси, привязанные к текущему графику. Делается это с помощью функции <em>pylab.gca()</em>. Эта функция вернет класс, производный от <em><a class="urllink" href="http://matplotlib.org/api/axes_api.html?highlight=axes#matplotlib.axes.Axes">matplotlib.axes.Axes</a></em>, в нашем примере это будет класс <em>AxesSubplot</em>.
</p>
<p class="vspace">После этого нужно создать объект геометрической фигуры, классы которых содержатся в модуле <a class="urllink" href="http://matplotlib.org/api/patches_api.html">matplotlib.patches</a> для большинства геометрических фигур, однако класс линий <em><a class="urllink" href="http://matplotlib.org/api/lines_api.html#matplotlib.lines.Line2D">Line2D</a></em> содержится в модуле <a class="urllink" href="http://matplotlib.org/api/lines_api.html">matplotlib.lines</a>. В то же время те же самые геометрические фигуры можно создавать, используя модуль <em>pylab</em>, о чем будет сказано ниже, но для начала мы будем использовать модули <em>matplotlib.patches</em> и <em>matplotlib.lines</em>.
</p>
<p class="vspace">После создания объекта геометрической фигуры мы должны добавить ее в оси с помощью метода <em>add_patch()</em> для большинства геометрических фигур или с помощью метода <em>add_line()</em> для экземпляра класса <em>Line2D</em>.
</p>
<p class="vspace">Не будем подробно рассматривать каждый создаваемый в данном примере объект, у них может быть достаточно большое количество параметров, в этой статье обратим внимание лишь на некоторые особенности, которые могут показаться не очень логичными или о которых легко забыть.
</p>
<p class="vspace">Для наглядности в данном примере рисование каждого вида объекта вынесено в отдельную функцию. Сначала посмотрим полный код данного примера, а потом рассмотрим особенности некоторых объектов.
</p>
<p class="vspace"/>
<div class="sourceblock " id="sourceblock1">
  <div class="sourceblocktext"><p class="python"><span class="co1">#!/usr/bin/env python</span><br/>
<span class="co1"># -*- coding: utf-8 -*-</span><br/>
<br/>
<span class="kw1">import</span> pylab<br/>
<span class="kw1">import</span> matplotlib.<span class="me1">patches</span><br/>
<span class="kw1">import</span> matplotlib.<span class="me1">lines</span><br/>
<span class="kw1">import</span> matplotlib.<span class="me1">path</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawLine <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование линии<br/>
    """</span><br/>
    x0 = <span class="nu0">0</span><br/>
    y0 = <span class="nu0">0</span><br/>
<br/>
    x1 = <span class="nu0">1</span><br/>
    y1 = <span class="nu0">0.5</span><br/>
<br/>
    x2 = <span class="nu0">0.5</span><br/>
    y2 = <span class="nu0">1.0</span><br/>
<br/>
    line = matplotlib.<span class="me1">lines</span>.<span class="me1">Line2D</span> <span class="br0">(</span><span class="br0">[</span>x0, x1, x2<span class="br0">]</span>, <span class="br0">[</span>y0, y1, y2<span class="br0">]</span>, color=<span class="st0">"k"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_line</span> <span class="br0">(</span>line<span class="br0">)</span><br/>
<br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.5</span>, <span class="nu0">1.1</span>, <span class="st0">"Line2D"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawCircles <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование окружностей<br/>
    """</span><br/>
    circle1 = matplotlib.<span class="me1">patches</span>.<span class="me1">Circle</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>, radius=<span class="nu0">0.1</span>, fill=<span class="kw2">True</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>circle1<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">0.2</span>, <span class="st0">"Circle"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
    circle2 = matplotlib.<span class="me1">patches</span>.<span class="me1">Circle</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>,<br/>
                                        radius=<span class="nu0">1.5</span>,<br/>
                                        fill=<span class="kw2">False</span>,<br/>
                                        color=<span class="st0">"r"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>circle2<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">1.55</span>, <span class="st0">"Circle"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawArrow <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование стрелки<br/>
    """</span><br/>
    arrow_x0 = -<span class="nu0">1.0</span><br/>
    arrow_y0 = <span class="nu0">0.5</span><br/>
    arrow_dx = <span class="nu0">1</span><br/>
    arrow_dy = <span class="nu0">0.5</span><br/>
<br/>
    arrow = matplotlib.<span class="me1">patches</span>.<span class="me1">Arrow</span> <span class="br0">(</span>arrow_x0,<br/>
                                      arrow_y0,<br/>
                                      arrow_dx,<br/>
                                      arrow_dy,<br/>
                                      width=<span class="nu0">0.2</span>,<br/>
                                      color=<span class="st0">"g"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>arrow<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span>-<span class="nu0">0.5</span>, <span class="nu0">1.0</span>, <span class="st0">"Arrow"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<br/>
<span class="kw1">def</span> drawArc <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование дуги<br/>
    """</span><br/>
    arc_x = <span class="nu0">0</span><br/>
    arc_y = <span class="nu0">0</span><br/>
    arc_width = <span class="nu0">1</span><br/>
    arc_height = <span class="nu0">1</span><br/>
    arc_theta1 = <span class="nu0">270</span><br/>
    arc_theta2 = <span class="nu0">360</span><br/>
<br/>
    arc = matplotlib.<span class="me1">patches</span>.<span class="me1">Arc</span> <span class="br0">(</span><span class="br0">(</span>arc_x, arc_y<span class="br0">)</span>,<br/>
                                  arc_width,<br/>
                                  arc_height,<br/>
                                  theta1 = arc_theta1,<br/>
                                  theta2 = arc_theta2<span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>arc<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.6</span>, -<span class="nu0">0.3</span>, <span class="st0">"Arc"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawPolygons <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование многоугольника<br/>
    """</span><br/>
    polygon_1 = matplotlib.<span class="me1">patches</span>.<span class="me1">Polygon</span> <span class="br0">(</span><span class="br0">[</span><span class="br0">(</span><span class="nu0">0</span>, -<span class="nu0">0.75</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span><span class="nu0">0</span>, -<span class="nu0">1.25</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span><span class="nu0">0.5</span>, -<span class="nu0">1.25</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span><span class="nu0">1</span>, -<span class="nu0">0.75</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>polygon_1<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.6</span>, -<span class="nu0">0.7</span>, <span class="st0">"Polygon"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
    polygon_2 = matplotlib.<span class="me1">patches</span>.<span class="me1">Polygon</span> <span class="br0">(</span><span class="br0">[</span><span class="br0">(</span>-<span class="nu0">0.5</span>, <span class="nu0">0</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span>-<span class="nu0">1</span>, -<span class="nu0">0.5</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span>-<span class="nu0">1</span>, -<span class="nu0">1</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span>-<span class="nu0">0.5</span>, -<span class="nu0">1</span><span class="br0">)</span><span class="br0">]</span>,<br/>
                                            fill = <span class="kw2">False</span>,<br/>
                                            closed = <span class="kw2">False</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>polygon_2<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span>-<span class="nu0">1.0</span>, -<span class="nu0">0.1</span>, <span class="st0">"Polygon"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawRect <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование повернутого прямоугольника<br/>
    """</span><br/>
    rect_coord = <span class="br0">(</span>-<span class="nu0">1.5</span>, <span class="nu0">1</span><span class="br0">)</span><br/>
    rect_width = <span class="nu0">0.5</span><br/>
    rect_height = <span class="nu0">0.3</span><br/>
    rect_angle = <span class="nu0">30</span><br/>
<br/>
    rect = matplotlib.<span class="me1">patches</span>.<span class="me1">Rectangle</span> <span class="br0">(</span>rect_coord,<br/>
                                         rect_width,<br/>
                                         rect_height,<br/>
                                         rect_angle,<br/>
                                         color=<span class="st0">"g"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>rect<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span>-<span class="nu0">1.5</span>, <span class="nu0">1.5</span>, <span class="st0">"Rect"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawPath <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    vertices = <span class="br0">[</span><span class="br0">(</span><span class="nu0">1.0</span>, -<span class="nu0">1.75</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.75</span>, -<span class="nu0">0.75</span><span class="br0">)</span><span class="br0">]</span><br/>
    codes = <span class="br0">[</span>matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">MOVETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             <span class="br0">]</span><br/>
<br/>
    path = matplotlib.<span class="me1">patches</span>.<span class="me1">Path</span> <span class="br0">(</span>vertices, codes<span class="br0">)</span><br/>
    path_patch = matplotlib.<span class="me1">patches</span>.<span class="me1">PathPatch</span> <span class="br0">(</span>path, fill=<span class="kw2">False</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>path_patch<span class="br0">)</span><br/>
<br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.75</span>, <span class="st0">"Path"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">if</span> __name__ == <span class="st0">"__main__"</span>:<br/>
    pylab.<span class="me1">xlim</span> <span class="br0">(</span>-<span class="nu0">2</span>, <span class="nu0">2</span><span class="br0">)</span><br/>
    pylab.<span class="me1">ylim</span> <span class="br0">(</span>-<span class="nu0">2</span>, <span class="nu0">2</span><span class="br0">)</span><br/>
    pylab.<span class="me1">grid</span><span class="br0">(</span><span class="br0">)</span><br/>
<br/>
    <span class="co1"># Получим текущие оси</span><br/>
    axes = pylab.<span class="me1">gca</span><span class="br0">(</span><span class="br0">)</span><br/>
    axes.<span class="me1">set_aspect</span><span class="br0">(</span><span class="st0">"equal"</span><span class="br0">)</span><br/>
<br/>
    drawLine <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawPolygons <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawPath <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawRect <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawCircles <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawArc <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawArrow <span class="br0">(</span>axes<span class="br0">)</span><br/>
<br/>
    pylab.<span class="me1">show</span><span class="br0">(</span><span class="br0">)</span></p></div>
  
</div>

<p class="vspace">Начнем разбор примера с рисования линий. 
</p>
<p class="vspace"/>
<div class="sourceblock " id="sourceblock2">
  <div class="sourceblocktext"><p class="python"><span class="kw1">def</span> drawLine <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование линии<br/>
    """</span><br/>
    x0 = <span class="nu0">0</span><br/>
    y0 = <span class="nu0">0</span><br/>
<br/>
    x1 = <span class="nu0">1</span><br/>
    y1 = <span class="nu0">0.5</span><br/>
<br/>
    x2 = <span class="nu0">0.5</span><br/>
    y2 = <span class="nu0">1.0</span><br/>
<br/>
    line = matplotlib.<span class="me1">lines</span>.<span class="me1">Line2D</span> <span class="br0">(</span><span class="br0">[</span>x0, x1, x2<span class="br0">]</span>, <span class="br0">[</span>y0, y1, y2<span class="br0">]</span>, color=<span class="st0">"k"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_line</span> <span class="br0">(</span>line<span class="br0">)</span><br/>
<br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.5</span>, <span class="nu0">1.1</span>, <span class="st0">"Line2D"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span></p></div>
  
</div>

<p class="vspace">Эта геометрическая фигура отличается от остальных тем, что ее класс находится в модуле <em>matplotlib.lines</em>, а добавлять ее нужно с помощью метода <em>Axes.add_line()</em>. Кроме того, обратите внимание, как задаются координаты. Первый параметр задает список координат по оси X, второй - список координат по оси Y, остальные необязательные именованные параметры могут задавать оформление.
</p>
<p class="vspace">Линии можно рисовать и с помощью многоугольников (класс <em>Polygon</em>), только при этом нужно указать, что многоугольник не замкнут (параметр <em>closed</em> в конструкторе <em>Polygon</em> должен быть равен <em>False</em>) и не нужно использовать заливку (параметр <em>fill</em> в конструкторе <em>Polygon</em> должен быть равен <em>False</em>). Функция <em>drawPolygons</em> в данном примере рисует закрашенный и не закрашенный многоугольники. Последний является не замкнутым, поэтому его внешний вид напоминает линию, нарисованную с помощью класса <em>Line2D</em>:
</p>
<p class="vspace"/>
<div class="sourceblock " id="sourceblock3">
  <div class="sourceblocktext"><p class="python"><span class="kw1">def</span> drawPolygons <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование многоугольника<br/>
    """</span><br/>
    polygon_1 = matplotlib.<span class="me1">patches</span>.<span class="me1">Polygon</span> <span class="br0">(</span><span class="br0">[</span><span class="br0">(</span><span class="nu0">0</span>, -<span class="nu0">0.75</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span><span class="nu0">0</span>, -<span class="nu0">1.25</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span><span class="nu0">0.5</span>, -<span class="nu0">1.25</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span><span class="nu0">1</span>, -<span class="nu0">0.75</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>polygon_1<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.6</span>, -<span class="nu0">0.7</span>, <span class="st0">"Polygon"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
    polygon_2 = matplotlib.<span class="me1">patches</span>.<span class="me1">Polygon</span> <span class="br0">(</span><span class="br0">[</span><span class="br0">(</span>-<span class="nu0">0.5</span>, <span class="nu0">0</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span>-<span class="nu0">1</span>, -<span class="nu0">0.5</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span>-<span class="nu0">1</span>, -<span class="nu0">1</span><span class="br0">)</span>,<br/>
                                             <span class="br0">(</span>-<span class="nu0">0.5</span>, -<span class="nu0">1</span><span class="br0">)</span><span class="br0">]</span>,<br/>
                                            fill = <span class="kw2">False</span>,<br/>
                                            closed = <span class="kw2">False</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>polygon_2<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span>-<span class="nu0">1.0</span>, -<span class="nu0">0.1</span>, <span class="st0">"Polygon"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span></p></div>
  
</div>

<p class="vspace">Конструктор класса <em>Polygon</em> в качестве первого параметра, в отличие от конструктора класса <em>Line2D</em>, принимает список, состоящий из двухэлементных списков или кортежей, задающие координаты (x, y).
</p>
<p class="vspace">Кроме того, линии можно рисовать с помощью так называемых путей (<em>PathPatch</em>). 
</p>
<p class="vspace"/>
<div class="sourceblock " id="sourceblock4">
  <div class="sourceblocktext"><p class="python"><span class="kw1">def</span> drawPath <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    vertices = <span class="br0">[</span><span class="br0">(</span><span class="nu0">1.0</span>, -<span class="nu0">1.75</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.75</span>, -<span class="nu0">0.75</span><span class="br0">)</span><span class="br0">]</span><br/>
    codes = <span class="br0">[</span>matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">MOVETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             <span class="br0">]</span><br/>
<br/>
    path = matplotlib.<span class="me1">patches</span>.<span class="me1">Path</span> <span class="br0">(</span>vertices, codes<span class="br0">)</span><br/>
    path_patch = matplotlib.<span class="me1">patches</span>.<span class="me1">PathPatch</span> <span class="br0">(</span>path, fill=<span class="kw2">False</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>path_patch<span class="br0">)</span><br/>
<br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.75</span>, <span class="st0">"Path"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span></p></div>
  
</div>

<p class="vspace">Рисование линий при использовании класса <em>PathPatch</em> осуществляется в несколько шагов. Сначала создается список опорных точек. Так же как и с при использовании класса <em>Polygon</em>, это список из двухэлементных списков или кортежей, задающие координаты (x, y). 
</p>
<p class="vspace">Затем нужно создать экземпляр класса <em>matplotlib.path.Path</em>, конструктор которого принимает два обязательных параметра: список вершин (<em>vertices</em>) и список кодов, задающий, что с этими вершинами делать. Номера кодов - это члены класса <em>Path</em>. Они могут принимать значения <em>MOVETO</em> (переместиться в точку без рисования линии), <em>LINETO</em> (провести линию в заданную точку), <em>CURVE3</em>, <em>CURVE4</em> (для рисования кривой Безье второй и третьей степени соответственно) и <em>CLOSEPOLY</em> (используется для замыкания пути на начальную точку). При использовании этих кодов нужно внимательно читать <a class="urllink" href="http://matplotlib.org/api/path_api.html#matplotlib.path.Path">документацию</a>, потому что при их использовании могут учитываться не только одна соответствующая точка из списка <em>vertices</em>, но и другие точки из этого списка.
</p>
<p class="vspace">В данном примере нарисована одна ломанная линия с помощью этого класса, но в принципе, с помощью этого же класса можно рисовать и сглаженные линии - квадратичные и кубические кривые Безье. 
</p>
<p class="vspace">К линиям можно отнести и дуги, которые рисуются с помощью класса <em>Arc</em>.
</p>
<p class="vspace"/>
<div class="sourceblock " id="sourceblock5">
  <div class="sourceblocktext"><p class="python"><span class="kw1">def</span> drawArc <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование дуги<br/>
    """</span><br/>
    arc_x = <span class="nu0">0</span><br/>
    arc_y = <span class="nu0">0</span><br/>
    arc_width = <span class="nu0">1</span><br/>
    arc_height = <span class="nu0">1</span><br/>
    arc_theta1 = <span class="nu0">270</span><br/>
    arc_theta2 = <span class="nu0">360</span><br/>
<br/>
    arc = matplotlib.<span class="me1">patches</span>.<span class="me1">Arc</span> <span class="br0">(</span><span class="br0">(</span>arc_x, arc_y<span class="br0">)</span>,<br/>
                                  arc_width,<br/>
                                  arc_height,<br/>
                                  theta1 = arc_theta1,<br/>
                                  theta2 = arc_theta2<span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>arc<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.6</span>, -<span class="nu0">0.3</span>, <span class="st0">"Arc"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span></p></div>
  
</div>

<p class="vspace">Нарисовать дугу просто, достаточно всего лишь создать экземпляр класса <em>matplotlib.patches.Arc</em> и добавить его к осям с помощью метода <em>add_patch</em>. Конструктор класса <em>Arc</em> принимает три обязательных параметра: кортеж, задающий координаты центра эллипса дуги, а также ширину и высоту прямоугольника, ограничивающего эллипс. Для задания сектора, в котором рисуется дуга, используются параметры <em>theta1</em> и <em>theta2</em>, которые задают углы начала и конца дуги соответственно в градусах. Также эллипс может быть повернут на произвольный угол, для этого нужно передать дополнительный параметр <em>angle</em> (тоже в градусах)
</p>
<p class="vspace">Рисование остальных геометрических фигур из примера достаточно понятное, каких-либо особенностей там нет, поэтому не будем останавливаться на них отдельно. Для справки перечислим классы геометрических фигур, которые содержатся в модуле <em><a class="urllink" href="http://matplotlib.org/api/patches_api.html">matplotlib.patches</a></em>.
</p>
<p class="vspace"/><p class="vspace">В нашем примере для создания объектов мы использовали модуль <em>matplotlib.patches</em>, однако многие из этих объектов (но почему-то не все) можно создавать, используя модуль <em>pylab</em>. Наш пример можно переписать следующим образом:
</p>
<p class="vspace"/>
<div class="sourceblock " id="sourceblock6">
  <div class="sourceblocktext"><p class="python"><span class="co1">#!/usr/bin/env python</span><br/>
<span class="co1"># -*- coding: utf-8 -*-</span><br/>
<br/>
<span class="kw1">import</span> pylab<br/>
<span class="kw1">import</span> matplotlib.<span class="me1">path</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawLine <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование линии<br/>
    """</span><br/>
    x0 = <span class="nu0">0</span><br/>
    y0 = <span class="nu0">0</span><br/>
<br/>
    x1 = <span class="nu0">1</span><br/>
    y1 = <span class="nu0">0.5</span><br/>
<br/>
    x2 = <span class="nu0">0.5</span><br/>
    y2 = <span class="nu0">1.0</span><br/>
<br/>
    line = pylab.<span class="me1">Line2D</span> <span class="br0">(</span><span class="br0">[</span>x0, x1, x2<span class="br0">]</span>, <span class="br0">[</span>y0, y1, y2<span class="br0">]</span>, color=<span class="st0">"k"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_line</span> <span class="br0">(</span>line<span class="br0">)</span><br/>
<br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.5</span>, <span class="nu0">1.1</span>, <span class="st0">"Line2D"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawCircles <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование окружностей<br/>
    """</span><br/>
    circle1 = pylab.<span class="me1">Circle</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>, radius=<span class="nu0">0.1</span>, fill=<span class="kw2">True</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>circle1<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">0.2</span>, <span class="st0">"Circle"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
    circle2 = pylab.<span class="me1">Circle</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">)</span>,<br/>
                           radius=<span class="nu0">1.5</span>,<br/>
                           fill=<span class="kw2">False</span>,<br/>
                           color=<span class="st0">"r"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>circle2<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">1.55</span>, <span class="st0">"Circle"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawArrow <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование стрелки<br/>
    """</span><br/>
    arrow_x0 = -<span class="nu0">1.0</span><br/>
    arrow_y0 = <span class="nu0">0.5</span><br/>
    arrow_dx = <span class="nu0">1</span><br/>
    arrow_dy = <span class="nu0">0.5</span><br/>
<br/>
    arrow = pylab.<span class="me1">Arrow</span> <span class="br0">(</span>arrow_x0,<br/>
                         arrow_y0,<br/>
                         arrow_dx,<br/>
                         arrow_dy,<br/>
                         width=<span class="nu0">0.2</span>,<br/>
                         color=<span class="st0">"g"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>arrow<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span>-<span class="nu0">0.5</span>, <span class="nu0">1.0</span>, <span class="st0">"Arrow"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<br/>
<span class="kw1">def</span> drawArc <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование дуги<br/>
    """</span><br/>
    arc_x = <span class="nu0">0</span><br/>
    arc_y = <span class="nu0">0</span><br/>
    arc_width = <span class="nu0">1</span><br/>
    arc_height = <span class="nu0">1</span><br/>
    arc_theta1 = <span class="nu0">270</span><br/>
    arc_theta2 = <span class="nu0">360</span><br/>
<br/>
    arc = matplotlib.<span class="me1">patches</span>.<span class="me1">Arc</span> <span class="br0">(</span><span class="br0">(</span>arc_x, arc_y<span class="br0">)</span>,<br/>
                                  arc_width,<br/>
                                  arc_height,<br/>
                                  theta1 = arc_theta1,<br/>
                                  theta2 = arc_theta2<span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>arc<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.6</span>, -<span class="nu0">0.3</span>, <span class="st0">"Arc"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawPolygons <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование многоугольника<br/>
    """</span><br/>
    polygon_1 = pylab.<span class="me1">Polygon</span> <span class="br0">(</span><span class="br0">[</span><span class="br0">(</span><span class="nu0">0</span>, -<span class="nu0">0.75</span><span class="br0">)</span>,<br/>
                                <span class="br0">(</span><span class="nu0">0</span>, -<span class="nu0">1.25</span><span class="br0">)</span>,<br/>
                                <span class="br0">(</span><span class="nu0">0.5</span>, -<span class="nu0">1.25</span><span class="br0">)</span>,<br/>
                                <span class="br0">(</span><span class="nu0">1</span>, -<span class="nu0">0.75</span><span class="br0">)</span><span class="br0">]</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>polygon_1<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">0.6</span>, -<span class="nu0">0.7</span>, <span class="st0">"Polygon"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
    polygon_2 = pylab.<span class="me1">Polygon</span> <span class="br0">(</span><span class="br0">[</span><span class="br0">(</span>-<span class="nu0">0.5</span>, <span class="nu0">0</span><span class="br0">)</span>,<br/>
                                <span class="br0">(</span>-<span class="nu0">1</span>, -<span class="nu0">0.5</span><span class="br0">)</span>,<br/>
                                <span class="br0">(</span>-<span class="nu0">1</span>, -<span class="nu0">1</span><span class="br0">)</span>,<br/>
                                <span class="br0">(</span>-<span class="nu0">0.5</span>, -<span class="nu0">1</span><span class="br0">)</span><span class="br0">]</span>,<br/>
                               fill = <span class="kw2">False</span>,<br/>
                               closed = <span class="kw2">False</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>polygon_2<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span>-<span class="nu0">1.0</span>, -<span class="nu0">0.1</span>, <span class="st0">"Polygon"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawRect <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    <span class="st0">"""<br/>
    Рисование повернутого прямоугольника<br/>
    """</span><br/>
    rect_coord = <span class="br0">(</span>-<span class="nu0">1.5</span>, <span class="nu0">1</span><span class="br0">)</span><br/>
    rect_width = <span class="nu0">0.5</span><br/>
    rect_height = <span class="nu0">0.3</span><br/>
    rect_angle = <span class="nu0">30</span><br/>
<br/>
    rect = pylab.<span class="me1">Rectangle</span> <span class="br0">(</span>rect_coord,<br/>
                            rect_width,<br/>
                            rect_height,<br/>
                            rect_angle,<br/>
                            color=<span class="st0">"g"</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>rect<span class="br0">)</span><br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span>-<span class="nu0">1.5</span>, <span class="nu0">1.5</span>, <span class="st0">"Rect"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">def</span> drawPath <span class="br0">(</span>axes<span class="br0">)</span>:<br/>
    vertices = <span class="br0">[</span><span class="br0">(</span><span class="nu0">1.0</span>, -<span class="nu0">1.75</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.5</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.0</span><span class="br0">)</span>, <span class="br0">(</span><span class="nu0">1.75</span>, -<span class="nu0">0.75</span><span class="br0">)</span><span class="br0">]</span><br/>
    codes = <span class="br0">[</span>matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">MOVETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             matplotlib.<span class="me1">path</span>.<span class="me1">Path</span>.<span class="me1">LINETO</span>,<br/>
             <span class="br0">]</span><br/>
<br/>
    path = matplotlib.<span class="me1">path</span>.<span class="me1">Path</span> <span class="br0">(</span>vertices, codes<span class="br0">)</span><br/>
    path_patch = matplotlib.<span class="me1">patches</span>.<span class="me1">PathPatch</span> <span class="br0">(</span>path, fill=<span class="kw2">False</span><span class="br0">)</span><br/>
    axes.<span class="me1">add_patch</span> <span class="br0">(</span>path_patch<span class="br0">)</span><br/>
<br/>
    pylab.<span class="me1">text</span> <span class="br0">(</span><span class="nu0">1.5</span>, -<span class="nu0">1.75</span>, <span class="st0">"Path"</span>, horizontalalignment=<span class="st0">"center"</span><span class="br0">)</span><br/>
<br/>
<br/>
<span class="kw1">if</span> __name__ == <span class="st0">"__main__"</span>:<br/>
    pylab.<span class="me1">xlim</span> <span class="br0">(</span>-<span class="nu0">2</span>, <span class="nu0">2</span><span class="br0">)</span><br/>
    pylab.<span class="me1">ylim</span> <span class="br0">(</span>-<span class="nu0">2</span>, <span class="nu0">2</span><span class="br0">)</span><br/>
    pylab.<span class="me1">grid</span><span class="br0">(</span><span class="br0">)</span><br/>
<br/>
    <span class="co1"># Получим текущие оси</span><br/>
    axes = pylab.<span class="me1">gca</span><span class="br0">(</span><span class="br0">)</span><br/>
    axes.<span class="me1">set_aspect</span><span class="br0">(</span><span class="st0">"equal"</span><span class="br0">)</span><br/>
<br/>
    drawLine <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawPolygons <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawPath <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawRect <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawCircles <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawArc <span class="br0">(</span>axes<span class="br0">)</span><br/>
    drawArrow <span class="br0">(</span>axes<span class="br0">)</span><br/>
<br/>
    pylab.<span class="me1">show</span><span class="br0">(</span><span class="br0">)</span></p></div>
  
</div>

<p class="vspace">Здесь везде модули <em>matplotlib.patches</em> и <em>matplotlib.lines</em> заменены на <em>pylab</em>, только классы <em>Arc</em> и <em>PathPatch</em> по-прежнему вызываются из модуля <em>matplotlib.patches</em>. Внешний вид результата от этого не изменился.
</p>
<p class="vspace"><strong><a class="wikilink" href="http://jenyay.net/Matplotlib/Matplotlib">Другие статьи про Matplotlib</a></strong>
</p>
<p class="vspace"><a name="comments" id="comments"/>
</p>
<p class="vspace"> </p> 

<p class="vspace"/>

<hr/>
<div class="messagehead">
<p class="vspace"><strong>Прохожий</strong> <span>15.01.2016 - 17:04</span>
</p></div>
<div class="messageitem">
<p>Спасибо за статью. Как раз искал способ рисовать в matplotlib произвольные линии.
</p></div>
<p class="vspace"/>
</div>

			</div></body></html>