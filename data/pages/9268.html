<html><body><div><div class="post-text" itemprop="text">

<p>In pdb (or ipdb) we can execute statements and evaluate expressions with the <a href="https://docs.python.org/2/library/pdb.html" rel="nofollow"><code>!</code> or <code>p</code> commands</a>:</p>

<blockquote>
  <p>p expression<br/>
       Evaluate the expression in the current context and print its value.</p>
  
  <p>[!]statement</p>
  
  <p>     Execute the (one-line) statement in the context of the current stack frame. The exclamation point can be omitted unless the first word of the statement resembles a debugger command. To set a global variable, you can prefix the assignment command with a global command on the same line</p>
</blockquote>

<p>So, for example, I can type <code>p reddit.get_subreddits()</code> while debugging in ipdb and the code will be executed in the current context and I will see the return value.</p>

<p>Is there a way I can debug the execution of such "manually typed" expressions?</p>

<p>Basically I would like to do is <code>s reddit.get_subreddits()</code>, but that just executes the <code>step</code> command and ignores the expression.</p>

<p><strong>EDIT: A trivial example</strong></p>

<p>Take this simple function:</p>

<pre><code>import random

def get_value_for_weekday(weekday_index=None):
    values = [10, 20, 20, 10, 30, 30, 30]
    if not weekday_index:
        # If no weekday provided, return the average of all weekdays
        return sum(values) / 7
    return averages[weekday_index]

if __name__ == '__main__':
    while True:
        import ipdb; ipdb.set_trace()  # enter ipbd for debug
        get_value_for_weekday(random.randint(0, 7))
</code></pre>

<p>Which is bugged because of the <code>if not weekday_index</code> (it should check <code>weekday_index is not None</code>.) </p>

<p>Let's assume I notice I get <code>10</code> half the number of times I was expecting. So I added a <code>import ipdb; ipdb.set_trace()</code> before the call to the function to try and debug the code.</p>

<p>So I'm in the ipdb console and I suddenly get the idea that maybe the problem is when I pass 0 as weekday_index.
I can test my hypothesis directly in  ipdb:</p>

<pre><code>ipdb&gt; p get_value_for_weekday(0)
22
</code></pre>

<p>Ok, so I realize there's something wrong when <code>weekday_index=0</code>.<br/>
What I would like to do now is debug step by step the call to <code>get_value_for_weekday(0)</code>, so that I could see that I erranously enter the if block.</p>

<p>Obviously I could exit ipdb, stop the script, change the code to always pass 0, relaunch the script and when I enter ipdb, debug the call with the ipdb <code>step</code> (<code>s</code>) command.<br/>
But wouldn't it be easier if I could just do <code>s get_value_for_weekday(0)</code> much the same way I was able to do <code>p get_value_for_weekday(0)</code>?</p>

<p>Is there a way do something like this?</p>
    </div>
    </div></body></html>