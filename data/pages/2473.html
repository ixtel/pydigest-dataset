<html><body><div><table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L1" class="blob-num js-line-number" data-line-number="1"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> numpy <span class="pl-k">as</span> np</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L2" class="blob-num js-line-number" data-line-number="2"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> pandas <span class="pl-k">as</span> pd</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L3" class="blob-num js-line-number" data-line-number="3"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> bs4 <span class="pl-k">import</span> BeautifulSoup, element</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L4" class="blob-num js-line-number" data-line-number="4"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> urllib2, re</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L5" class="blob-num js-line-number" data-line-number="5"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC5" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L6" class="blob-num js-line-number" data-line-number="6"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Read the HTML from the webpage on Wikipedia stats and convert to soup</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L7" class="blob-num js-line-number" data-line-number="7"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC7" class="blob-code blob-code-inner js-file-line">soup <span class="pl-k">=</span> BeautifulSoup(urllib2.urlopen(<span class="pl-s"><span class="pl-pds">'</span>http://stats.wikimedia.org/EN/TablesWikipediaEN.htm<span class="pl-pds">'</span></span>).read())</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L8" class="blob-num js-line-number" data-line-number="8"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC8" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L9" class="blob-num js-line-number" data-line-number="9"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Look for all the paragraphs with 2014</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L10" class="blob-num js-line-number" data-line-number="10"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC10" class="blob-code blob-code-inner js-file-line">_p <span class="pl-k">=</span> soup.findAll(<span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>,<span class="pl-v">text</span><span class="pl-k">=</span>re.compile(<span class="pl-s"><span class="pl-pds">'</span>2014<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L11" class="blob-num js-line-number" data-line-number="11"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC11" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L12" class="blob-num js-line-number" data-line-number="12"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Select only those paragraph parents that have exactly 152 fields, corresponding to the top-25 lists</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L13" class="blob-num js-line-number" data-line-number="13"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC13" class="blob-code blob-code-inner js-file-line">_p2014 <span class="pl-k">=</span> [t.parent <span class="pl-k">for</span> t <span class="pl-k">in</span> _p <span class="pl-k">if</span> <span class="pl-c1">len</span>(t.parent) <span class="pl-k">==</span> <span class="pl-c1">152</span>]</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L14" class="blob-num js-line-number" data-line-number="14"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L15" class="blob-num js-line-number" data-line-number="15"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Get the text out of the children tags as a list of lists</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L16" class="blob-num js-line-number" data-line-number="16"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC16" class="blob-code blob-code-inner js-file-line">parsed <span class="pl-k">=</span> [[t.text <span class="pl-k">for</span> t <span class="pl-k">in</span> <span class="pl-c1">list</span>(p.children) <span class="pl-k">if</span> <span class="pl-c1">type</span>(t) <span class="pl-k">!=</span> element.NavigableString] <span class="pl-k">for</span> p <span class="pl-k">in</span> _p2014]</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L17" class="blob-num js-line-number" data-line-number="17"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC17" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L18" class="blob-num js-line-number" data-line-number="18"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Convert to a dictionary keyed by month abbreviation with values as the list of text fields</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L19" class="blob-num js-line-number" data-line-number="19"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC19" class="blob-code blob-code-inner js-file-line">parsed <span class="pl-k">=</span> {month[<span class="pl-c1">0</span>].split(<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span><span class="pl-cce">\xa0</span><span class="pl-pds">'</span></span>)[<span class="pl-c1">0</span>]:month[<span class="pl-c1">1</span>:] <span class="pl-k">for</span> month <span class="pl-k">in</span> parsed}</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L20" class="blob-num js-line-number" data-line-number="20"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC20" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L21" class="blob-num js-line-number" data-line-number="21"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Do some crazy dictionary and list comprehensions with zips to convert the values in the list</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L22" class="blob-num js-line-number" data-line-number="22"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC22" class="blob-code blob-code-inner js-file-line">parsed <span class="pl-k">=</span> {k:[{<span class="pl-s"><span class="pl-pds">'</span>rank<span class="pl-pds">'</span></span>:<span class="pl-c1">int</span>(a),<span class="pl-s"><span class="pl-pds">'</span>editors<span class="pl-pds">'</span></span>:<span class="pl-c1">int</span>(b),<span class="pl-s"><span class="pl-pds">'</span>article<span class="pl-pds">'</span></span>:c} <span class="pl-k">for</span> a,b,c <span class="pl-k">in</span> <span class="pl-c1">zip</span>(v[<span class="pl-c1">0</span>::<span class="pl-c1">3</span>],v[<span class="pl-c1">1</span>::<span class="pl-c1">3</span>],v[<span class="pl-c1">2</span>::<span class="pl-c1">3</span>])] <span class="pl-k">for</span> k,v <span class="pl-k">in</span> parsed.items()}</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L23" class="blob-num js-line-number" data-line-number="23"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC23" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L24" class="blob-num js-line-number" data-line-number="24"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC24" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Convert each month into a DataFrame with month information in the index</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L25" class="blob-num js-line-number" data-line-number="25"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC25" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># and then concat all the dfs together, sorting on those with the most editors</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L26" class="blob-num js-line-number" data-line-number="26"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC26" class="blob-code blob-code-inner js-file-line">ranked <span class="pl-k">=</span> pd.concat([pd.DataFrame(parsed[i],<span class="pl-v">index</span><span class="pl-k">=</span>[i]<span class="pl-k">*</span><span class="pl-c1">len</span>(parsed[i])) <span class="pl-k">for</span> i <span class="pl-k">in</span> parsed.keys()]).sort(<span class="pl-s"><span class="pl-pds">'</span>editors<span class="pl-pds">'</span></span>,<span class="pl-v">ascending</span><span class="pl-k">=</span><span class="pl-c1">False</span>).reset_index()</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L27" class="blob-num js-line-number" data-line-number="27"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC27" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L28" class="blob-num js-line-number" data-line-number="28"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC28" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># rename the reset index to something meaningful</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L29" class="blob-num js-line-number" data-line-number="29"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC29" class="blob-code blob-code-inner js-file-line">ranked.rename(<span class="pl-v">columns</span><span class="pl-k">=</span>{<span class="pl-s"><span class="pl-pds">'</span>index<span class="pl-pds">'</span></span>:<span class="pl-s"><span class="pl-pds">'</span>month<span class="pl-pds">'</span></span>},<span class="pl-v">inplace</span><span class="pl-k">=</span><span class="pl-c1">True</span>)</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L30" class="blob-num js-line-number" data-line-number="30"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC30" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L31" class="blob-num js-line-number" data-line-number="31"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC31" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Group the articles by name, compute aggregate statistics</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L32" class="blob-num js-line-number" data-line-number="32"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC32" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Rank on the total number editors and months in the top 25</span></td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L33" class="blob-num js-line-number" data-line-number="33"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC33" class="blob-code blob-code-inner js-file-line">top_articles <span class="pl-k">=</span> ranked.groupby(<span class="pl-s"><span class="pl-pds">'</span>article<span class="pl-pds">'</span></span>).agg({<span class="pl-s"><span class="pl-pds">'</span>month<span class="pl-pds">'</span></span>:<span class="pl-c1">len</span>,<span class="pl-s"><span class="pl-pds">'</span>editors<span class="pl-pds">'</span></span>:np.sum,<span class="pl-s"><span class="pl-pds">'</span>rank<span class="pl-pds">'</span></span>:np.min}).sort([<span class="pl-s"><span class="pl-pds">'</span>month<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>editors<span class="pl-pds">'</span></span>],<span class="pl-v">ascending</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-top_wikipedia_articles_by_editors-py-L34" class="blob-num js-line-number" data-line-number="34"/>
        <td id="file-top_wikipedia_articles_by_editors-py-LC34" class="blob-code blob-code-inner js-file-line">top_articles</td>
      </tr>
</table>

  </div></body></html>