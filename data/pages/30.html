<html><body><div><div class="blog-post">

        <p><em>For more guides like this, check out our <a href="http://docs.cloudant.com/">documentation</a>.</em></p>
<p><a href="http://www.python.org/">Python</a>'s readability and standardized coding practices make it effortless to read and write, and as a result it's great for teaching. Academicians and scientists make heavy use of it for all manner of research and analysis, notably the <a href="http://nltk.org/">Natural Language ToolKit</a>, <a href="http://www.scipy.org/">SciPy</a>, <a href="http://www.numpy.org/">NumPy</a>, <a href="http://matplotlib.org/">Matplotlib</a>, <a href="http://numba.pydata.org/">Numba</a>, and <a href="http://www.pytables.org/moin">PyTables</a>. Python was the first language I felt comfortable with, and to be honest, I owe my coding career to the <a href="http://www.meetup.com/bostonpython/">Boston Python</a> community. Thanks, gang :D</p>
<p>Python is also superb for working with Cloudant. If you don't already have Python, oh golly, <a href="http://www.python.org/download/">go get it</a>.</p>
<h2>Packages: pip and virtualenv</h2>
<p>The Python community uses a package manager called "pip" to install, uninstall, and upload packages to an online repository called <a href="https://pypi.python.org/pypi">PyPI</a>. If you don't have pip, <a href="http://www.pip-installer.org/en/latest/installing.html">get pip</a></p>
<p>Then, you can install packages as easy as this:</p>
<pre><code>pip install [name]
</code></pre>
<p>That'll install to someplace on your PYTHONPATH, so your projects have access to the downloaded package. If you want to isolate dependencies between projects, use <a href="https://pypi.python.org/pypi/virtualenv">virtualenv</a>, which you can install like this:</p>
<pre><code>sudo pip install virtualenv
</code></pre>
<p>Then, to create an isolated Python environment for your project, just do this:</p>
<pre><code># create a `venv` folder
virtualenv venv
# use its `bin`, etc., folders for Python business
source venv/bin/activate
</code></pre>
<p>You should see <code>(venv)</code> prepended to your terminal's command line. Now, any pip packages you install will go into that venv folder.</p>
<p>For even more convenience creating virtual environments for your Python projects, check out <a href="http://virtualenvwrapper.readthedocs.org/en/latest/">virtualenvwrapper</a>, which extends virtualenv for more ease-of-use.</p>
<h2>Libraries: CouchDB-Python, Couchdbkit, and Requests</h2>
<p>Because Cloudant's API so resembles that of CouchDB's, you can use CouchDB client libraries like <a href="http://pythonhosted.org/CouchDB/">CouchDB-Python</a> and <a href="http://couchdbkit.org/">Couchdbkit</a> to work with Cloudant. Or, you can consume Cloudant's HTTP API directly using an HTTP library like <a href="http://www.python-requests.org/en/latest/">Requests</a>.</p>
<h3>CouchDB-Python</h3>
<p>Cloudant's API resembles the way Python dict objects work, which makes <a href="http://pythonhosted.org/CouchDB/">CouchDB-Python</a> wickedly intuitive to use. To get the library, just pip it!</p>
<pre><code>pip install couchdb
</code></pre>
<p>Using CouchDB-Python is wicked easy. Check it out:</p>
<pre><code># connecting to your Cloudant instance
import couchdb
couch = couchdb.Server("https://%s.cloudant.com" % USERNAME)
couch.resource.credentials = (USERNAME, PASSWORD)

# accessing a database
db = couch['test']
# or, creating one
db = couch.create('test')

# accessing a document
doc = db[DOCUMENT_ID]
# or, creating one
doc_id, doc_rev = db.save({
  'name': 'Mike Broberg',
  'title': 'Fun Captain',
  'superpower': 'More fun than a hallucinogenic trampoline'
})
doc = db[doc_id]

Query results are treated as iterators, like this:

# print all docs in the database
for doc in db:
  print doc
# or, do the same on a pre-defined index
# where 'DDOC/INDEX' maps to '_design/DDOC/_view/INDEX'
# in the HTTP API
for doc in db.view('DDOC/INDEX'):
  print doc
</code></pre>
<p>Check out the <a href="http://pythonhosted.org/CouchDB/index.html">documentation</a> for even more goodies :D</p>
<h3>Couchdbkit</h3>
<p>Just like CouchDB-Python, <a href="http://couchdbkit.org/">Couchdbkit</a> uses native Python objects to make interacting with Cloudant effortless, but it provides a fuller API and more convenience methods. To install it, just pip it!</p>
<pre><code>pip install couchdbkit
</code></pre>
<p>Its interface is very similar, too, which you can see in more detail <a href="http://couchdbkit.org/docs/gettingstarted.html">here</a>:</p>
<pre><code>import couchdbkit

# connect to cloudant
server = couchdbkit.Server('https://USERNAME:PASSWORD@USERNAME.cloudant.com')
db = server.get_or_create_db('posts')

# save a document
db.save_doc({
    'author': 'Mike Broberg',
    'content': "In my younger and more vulnerable years, my father told me, 'Son, turn that racket down.'"
})

# save lots of docs :D
docs = [{...}, {...}, {...}]
db.bulk_save(docs)
</code></pre>
<p>Couchdbkit exposes a document class for adding simple schemas to your application, like so:</p>
<pre><code>class Post(couchdbkit.Document):
  author = couchdbkit.StringProperty()
  content = couchdbkit.StringProperty()

# associate posts with a given database object
Post.set_db(db)
new_post = Post(
  author="Mike Broberg",
  content="In his spare time, Mike Broberg enjoys barbecuing meats of various origins."
)

# save the post to its associated database
new_post.save()
</code></pre>
<p>Performing queries returns iterators:</p>
<pre><code># print all docs in the database
for doc in db.view('_all_docs'):
  print doc

# or, do the same on a pre-defined index
# where 'DDOC/INDEX' maps to '_design/DDOC/_view/INDEX'
# in the HTTP API
for doc in db.view('DDOC/INDEX'):
  print doc
</code></pre>
<p>For more detail than you could ever want, check out the <a href="http://couchdbkit.org/docs/api/">API Documentation</a>.</p>
<h3>Requests</h3>
<p>Because Cloudant's API is just an HTTP interface, you can interact with it from any HTTP library. Python has a beautiful HTTP library called <a href="http://www.python-requests.org/en/latest/">Requests</a>, so if you don't want to deal with all the abstraction of a client library, use that. Here's how:</p>
<p>First, pip!</p>
<pre><code>pip install requests
</code></pre>
<p>Then, let's talk to our database:</p>
<pre><code>import requests

account_url = 'https://USERNAME:PASSWORD@USERNAME.cloudant.com'

response = requests.get(account_url)
print response.status_code
# 200
print response.json()
# {
#     "couchdb": "Welcome",
#     "version": "1.0.2",
#     "cloudant_build": "1678"
# }
</code></pre>
<p>Hey, why not write something?</p>
<pre><code>import json

db_url = account_url + '/posts'
doc = dict(
    author='Mike Broberg',
    content="I once did a triple backflip over seventeen buses using only a red Solo cup and a copy of 'Gender Outlaw'."
)
headers = {'Content-type': 'application/json'}
response = requests.post(db_url, data=json.dumps(doc), headers=headers)
print response.status_code
# 201
</code></pre>
<p>Dandy, eh? Just hit Cloudant's API by URL directly. Don't forget to set headers and request bodies appropriately! See <a href="http://www.python-requests.org/en/latest/#user-guide">Requests' documentation</a> for more info.</p>
<h2>Frameworks: Flask and Django</h2>
<p>Python is great for web development. Two frameworks stand out in the community for building robust web applications, <a href="http://flask.pocoo.org/">Flask</a> and <a href="https://www.djangoproject.com/">Django</a>:</p>
<h3>Flask</h3>
<p><a href="http://flask.pocoo.org/">Flask</a> is a micro-framework that makes it effortless to rapidly develop web apps. To get it, run pip install flask. Then, check out the example code:</p>
<pre><code>from flask import Flask
app = Flask(__name__)

@app.route("/")
def hello():
    return "Hello World!"

if __name__ == "__main__":
    app.run()
</code></pre>
<p>Run it with python [file] and boom, you're live. That's all it takes to build a website with Flask.</p>
<p>A rich community of addons, plugins, and integrations mean you can add features and functionality quickly without relying on monolithic software choices. Just google "flask [thing]" and you'll more than probably find integrations that suit your needs.</p>
<h3>Django</h3>
<p><a href="https://www.djangoproject.com/">Django</a> is to Python as Ruby on Rails is to Ruby: an enormous, web-focused project that attempts to make intelligent design decisions about app structure, architecture, layout, and tooling so that you can focus on building your app. Some of what it provides out of the box:</p>
<ul>
<li>
<p>A SQL model layer</p>
</li>
<li>
<p>HTML templating</p>
</li>
<li>
<p>Automatic administrative interface</p>
</li>
<li>
<p>Elegant URL routing</p>
</li>
<li>
<p>Internationalization support</p>
</li>
<li>
<p>Authentication and authorization systems</p>
</li>
</ul>
<p>Django has an enormous community of addons, plugins, integrations, and the like, so if you need more, just google "django [thing]" and you'll likely find what you need. To get started with Django, check out their <a href="https://docs.djangoproject.com/en/1.5/">documentation</a>.</p>
<h2>CouchApps</h2>
<p>The original <a href="http://couchapp.org/page/index">CouchApp</a> utility, <a href="https://github.com/couchapp/couchapp/">couchapp</a>, is written in Python. Though the original author has chosen to focus on <a href="https://github.com/benoitc/erica">Erica</a> instead, the python utility is still more feature-complete and works just fine. To install the utility, just pip it:</p>
<pre><code>sudo pip install couchapp
</code></pre>
<p>Then, you can scaffold, push, and even pull CouchApps right from the command line:</p>
<pre><code># scaffold a couchapp
couchapp generate cloudant
# push it live
couchapp push cloudant https://USERNAME:PASSWORD@USERNAME.cloudant.com/DATABASE
# clone it!
couchapp clone https://USERNAME:PASSWORD@USERNAME.cloudant.com/DATABASE/_design/cloudant cloudant2
# oh look, there it is!
ls cloudant2
</code></pre>
<p>The python utility also supports <a href="http://couchapp.org/page/filesystem-mapping">the _docs folder</a>, which <code>couchapp</code> will upload to your target database as JSON documents rather than attachments. Very nifty for scaffolding data, or syncing projects.</p>
<hr/>
<p>As always, if you have any trouble, check our <a href="https://docs.cloudant.com">docs</a>, post your question to <a href="http://stackoverflow.com/questions/tagged/cloudant">StackOverflow</a>, ping us on <a href="http://webchat.freenode.net/?channels=cloudant">IRC</a>, or if you'd like to discuss the matter in private, email us at support@cloudant.com.</p>
<p>Happy coding!</p>
<p><a href="/sign-up/" class="btn btn-info">Create an account and try it yourself <i class="icon-white icon-heart"/></a></p>
        
          </div>
        </div></body></html>