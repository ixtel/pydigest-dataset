<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-cleo" class="anchor" href="#cleo" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Cleo</h1>
<h2 id="user-content-usage"><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Usage</h2>
<p>To make a command that greets you from the command line,
create <code>greet_command.py</code> and add the following to it:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> cleo <span class="pl-k">import</span> Command, InputArgument, InputOption


<span class="pl-k">class</span> <span class="pl-en">GreetCommand</span>(<span class="pl-e">Command</span>):
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    Greets someone</span>
<span class="pl-s"/>
<span class="pl-s">    demo:greet</span>
<span class="pl-s">        {name? : Who do you want to greet?}</span>
<span class="pl-s">        {--y|yell : If set, the task will yell in uppercase letters}</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span>

    <span class="pl-k">def</span> <span class="pl-en">handle</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
        name <span class="pl-k">=</span> <span class="pl-v">self</span>.argument(<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>)

        <span class="pl-k">if</span> name:
            text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Hello <span class="pl-c1">%s</span><span class="pl-pds">'</span></span> <span class="pl-k">%</span> name
        <span class="pl-k">else</span>:
            text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Hello<span class="pl-pds">'</span></span>

        <span class="pl-k">if</span> <span class="pl-v">self</span>.option(<span class="pl-s"><span class="pl-pds">'</span>yell<span class="pl-pds">'</span></span>):
            text <span class="pl-k">=</span> text.upper()

        <span class="pl-v">self</span>.line(text)</pre></div>
<p>You also need to create the file to run at the command line which creates
an <code>Application</code> and adds commands to it:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c">#!/usr/bin/env python</span>
<span class="pl-c"># -*- coding: utf-8 -*-</span>

<span class="pl-k">from</span> greet_command <span class="pl-k">import</span> GreetCommand
<span class="pl-k">from</span> cleo <span class="pl-k">import</span> Application

application <span class="pl-k">=</span> Application()
application.add(GreetCommand())

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:
    application.run()</pre></div>
<p>Test the new command by running the following</p>
<div class="highlight highlight-source-shell"><pre>$ python application.py demo:greet John</pre></div>
<p>This will print the following to the command line:</p>
<pre lang="text">Hello John
</pre>
<p>You can also use the <code>--yell</code> option to make everything uppercase:</p>
<div class="highlight highlight-source-shell"><pre>$ python application.py demo:greet John --yell</pre></div>
<p>This prints:</p>
<pre lang="text">HELLO JOHN
</pre>
<div>
<p>Note</p>
<p>As you may have already seen, Cleo uses the command docstring to determine
the command definition.
The docstring must be in the following form :</p>
<div class="highlight highlight-source-python"><pre><span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">Command description</span>
<span class="pl-s"/>
<span class="pl-s">Command signature</span>
<span class="pl-s"><span class="pl-pds">"""</span></span></pre></div>
<p>The signature being in the following form:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">command:name {argument : Argument description} {--option : Option description}</span>
<span class="pl-s"><span class="pl-pds">"""</span></span></pre></div>
<p>The signature can span multiple lines.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">command:name</span>
<span class="pl-s">    {argument : Argument description}</span>
<span class="pl-s">    {--option : Option description}</span>
<span class="pl-s"><span class="pl-pds">"""</span></span></pre></div>
<p>If you do not want to use the docstring to describe your commands, you can use the
<code>description</code> and <code>signature</code> attributes, like so:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">GreetCommand</span>(<span class="pl-e">Command</span>):

    description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Greets someone<span class="pl-pds">'</span></span>

    signature <span class="pl-k">=</span> (
        <span class="pl-s"><span class="pl-pds">'</span>demo:greet <span class="pl-pds">'</span></span>
        <span class="pl-s"><span class="pl-pds">'</span>{name? : Who do you want to greet?} <span class="pl-pds">'</span></span>
        <span class="pl-s"><span class="pl-pds">'</span>{--y|yell : If set, the task will yell in uppercase letters}<span class="pl-ii"/></span>
    )</pre></div>
<p>There are also alternative ways to declare your commands:</p>
<blockquote>
<ul>
<li>via decorators</li>
<li>via dictionaries</li>
</ul>
</blockquote>
</div>
<div>
<p>Tip</p>
<p>If you do not want to use the signature, you can declare your command
in a more explicit way:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> cleo <span class="pl-k">import</span> Command, InputArgument, InputOption


<span class="pl-k">class</span> <span class="pl-en">GreetCommand</span>(<span class="pl-e">Command</span>):

    name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>demo:greet<span class="pl-pds">'</span></span>

    description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Greets someone<span class="pl-pds">'</span></span>

    arguments <span class="pl-k">=</span> [
        {
            <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>,
            <span class="pl-s"><span class="pl-pds">'</span>description<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Who do you want to greet?<span class="pl-pds">'</span></span>,
            <span class="pl-s"><span class="pl-pds">'</span>required<span class="pl-pds">'</span></span>: <span class="pl-c1">False</span>
        }
    ]

    options <span class="pl-k">=</span> [
        {
            <span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>yell<span class="pl-pds">'</span></span>,
            <span class="pl-s"><span class="pl-pds">'</span>shortcut<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>y<span class="pl-pds">'</span></span>,
            <span class="pl-s"><span class="pl-pds">'</span>flag<span class="pl-pds">'</span></span>: <span class="pl-c1">True</span>,
            <span class="pl-s"><span class="pl-pds">'</span>description<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>If set, the task will yell in uppercase letters<span class="pl-pds">'</span></span>
        }
    ]

    <span class="pl-k">def</span> <span class="pl-en">handle</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
        name <span class="pl-k">=</span> <span class="pl-v">self</span>.argument(<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>)
        <span class="pl-k">if</span> name:
            text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Hello <span class="pl-c1">%s</span><span class="pl-pds">'</span></span> <span class="pl-k">%</span> name
        <span class="pl-k">else</span>:
            text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Hello<span class="pl-pds">'</span></span>

        <span class="pl-k">if</span> <span class="pl-v">self</span>.option(<span class="pl-s"><span class="pl-pds">'</span>yell<span class="pl-pds">'</span></span>):
            text <span class="pl-k">=</span> text.upper()

        <span class="pl-v">self</span>.line(text)</pre></div>
</div>
<a name="user-content-coloring-the-output"/>
<h2><a id="user-content-coloring-the-output" class="anchor" href="#coloring-the-output" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Coloring the Output</h2>
<p>Whenever you output text, you can surround the text with tags to color its
output. For example:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c"># green text</span>
<span class="pl-v">self</span>.line(<span class="pl-s"><span class="pl-pds">'</span>&lt;info&gt;foo&lt;/info&gt;<span class="pl-pds">'</span></span>)

<span class="pl-c"># yellow text</span>
<span class="pl-v">self</span>.line(<span class="pl-s"><span class="pl-pds">'</span>&lt;comment&gt;foo&lt;/comment&gt;<span class="pl-pds">'</span></span>)

<span class="pl-c"># black text on a cyan background</span>
<span class="pl-v">self</span>.line(<span class="pl-s"><span class="pl-pds">'</span>&lt;question&gt;foo&lt;/question&gt;<span class="pl-pds">'</span></span>)

<span class="pl-c"># white text on a red background</span>
<span class="pl-v">self</span>.line(<span class="pl-s"><span class="pl-pds">'</span>&lt;error&gt;foo&lt;/error&gt;<span class="pl-pds">'</span></span>)</pre></div>
<p>The closing tag can be replaced by <code>&lt;/&gt;</code>, which revokes all formatting options established by the last opened tag.</p>
<div>
<p>Tip</p>
<p>You can also use the corresponding methods:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-v">self</span>.info(<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>)
<span class="pl-v">self</span>.comment(<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>)
<span class="pl-v">self</span>.question(<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>)
<span class="pl-v">self</span>.error(<span class="pl-s"><span class="pl-pds">'</span>foo<span class="pl-pds">'</span></span>)</pre></div>
</div>
<p>It is possible to define your own styles using the <code>set_style</code> method:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-v">self</span>.set_style(<span class="pl-s"><span class="pl-pds">'</span>fire<span class="pl-pds">'</span></span>, <span class="pl-v">fg</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-v">bg</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>, <span class="pl-v">options</span><span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">'</span>bold<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blink<span class="pl-pds">'</span></span>])
<span class="pl-v">self</span>.line(<span class="pl-s"><span class="pl-pds">'</span>&lt;fire&gt;foo&lt;/fire&gt;<span class="pl-pds">'</span></span>)</pre></div>
<p>Available foreground and background colors are: <code>black</code>, <code>red</code>, <code>green</code>,
<code>yellow</code>, <code>blue</code>, <code>magenta</code>, <code>cyan</code> and <code>white</code>.</p>
<p>And available options are: <code>bold</code>, <code>underscore</code>, <code>blink</code>, <code>reverse</code> and <code>conceal</code>.</p>
<p>You can also set these colors and options inside the tagname:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c"># green text</span>
<span class="pl-v">self</span>.line(<span class="pl-s"><span class="pl-pds">'</span>&lt;fg=green&gt;foo&lt;/&gt;<span class="pl-pds">'</span></span>)

<span class="pl-c"># black text on a cyan background</span>
<span class="pl-v">self</span>.line(<span class="pl-s"><span class="pl-pds">'</span>&lt;fg=black;bg=cyan&gt;foo&lt;/&gt;<span class="pl-pds">'</span></span>)

<span class="pl-c"># bold text on a yellow background</span>
<span class="pl-v">self</span>.line(<span class="pl-s"><span class="pl-pds">'</span>&lt;bg=yellow;options=bold&gt;foo&lt;/&gt;<span class="pl-pds">'</span></span>)</pre></div>
<a name="user-content-verbosity-levels"/>
<h2><a id="user-content-verbosity-levels" class="anchor" href="#verbosity-levels" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Verbosity Levels</h2>
<p>Cleo has five verbosity levels. These are defined in the <code>Output</code> class:</p>
<table>





<thead valign="bottom">
<tr><th>Mode</th>
<th>Meaning</th>
<th>Console option</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><code>Output.VERBOSITY_QUIET</code></td>
<td>Do not output any messages</td>
<td><code>-q</code> or <code>--quiet</code></td>
</tr>
<tr><td><code>Output.VERBOSITY_NORMAL</code></td>
<td>The default verbosity level</td>
<td>(none)</td>
</tr>
<tr><td><code>Output.VERBOSITY_VERBOSE</code></td>
<td>Increased verbosity of messages</td>
<td><code>-v</code></td>
</tr>
<tr><td><code>Output.VERBOSITY_VERY_VERBOSE</code></td>
<td>Informative non essential messages</td>
<td><code>-vv</code></td>
</tr>
<tr><td><code>Output.VERBOSITY_DEBUG</code></td>
<td>Debug messages</td>
<td><code>-vvv</code></td>
</tr>
</tbody>
</table>
<div>
<p>Tip</p>
<p>The full exception stacktrace is printed if the <code>VERBOSITY_VERBOSE</code>
level or above is used.</p>
</div>
<p>It is possible to print a message in a command for only a specific verbosity
level. For example:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">if</span> Output.<span class="pl-c1">VERBOSITY_VERBOSE</span> <span class="pl-k">&lt;=</span> <span class="pl-v">self</span>.output.get_verbosity():
    <span class="pl-v">self</span>.line(<span class="pl-c1">...</span>)</pre></div>
<p>There are also more semantic methods you can use to test for each of the
verbosity levels:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">if</span> <span class="pl-v">self</span>.output.is_quiet():
    <span class="pl-c"># ...</span>

<span class="pl-k">if</span> <span class="pl-v">self</span>.output.is_verbose():
    <span class="pl-c"># ...</span></pre></div>
<p>When the quiet level is used, all output is suppressed as the default
<code>Output.write()</code> method returns without actually printing.</p>
<a name="user-content-using-arguments"/>
<h2><a id="user-content-using-arguments" class="anchor" href="#using-arguments" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Arguments</h2>
<p>The most interesting part of the commands are the arguments and options that
you can make available. Arguments are the strings - separated by spaces - that
come after the command name itself. They are ordered, and can be optional
or required. For example, add an optional <code>last_name</code> argument to the command
and make the <code>name</code> argument required:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">GreetCommand</span>(<span class="pl-e">Command</span>):
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    Greets someone</span>
<span class="pl-s"/>
<span class="pl-s">    demo:greet</span>
<span class="pl-s">        {name : Who do you want to greet?}</span>
<span class="pl-s">        {last_name? : Your last name?}</span>
<span class="pl-s">        {--y|yell : If set, the task will yell in uppercase letters}</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span></pre></div>
<p>You now have access to a <code>last_name</code> argument in your command:</p>
<div class="highlight highlight-source-python"><pre>last_name <span class="pl-k">=</span> <span class="pl-v">self</span>.argument(<span class="pl-s"><span class="pl-pds">'</span>last_name<span class="pl-pds">'</span></span>)
<span class="pl-k">if</span> last_name:
    text <span class="pl-k">+=</span> <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-c1">%s</span><span class="pl-pds">'</span></span> <span class="pl-k">%</span> last_name</pre></div>
<p>The command can now be used in either of the following ways:</p>
<div class="highlight highlight-source-shell"><pre>$ python application.py demo:greet John
$ python application.py demo:greet John Doe</pre></div>
<p>It is also possible to let an argument take a list of values (imagine you want
to greet all your friends). For this it must be specified at the end of the
argument list:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">GreetCommand</span>(<span class="pl-e">Command</span>):
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    Greets someone</span>
<span class="pl-s"/>
<span class="pl-s">    demo:greet</span>
<span class="pl-s">        {names* : Who do you want to greet?}</span>
<span class="pl-s">        {--y|yell : If set, the task will yell in uppercase letters}</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span></pre></div>
<p>To use this, just specify as many names as you want:</p>
<div class="highlight highlight-source-shell"><pre>$ python application.py demo:greet John Jane</pre></div>
<p>You can access the <code>names</code> argument as a list:</p>
<div class="highlight highlight-source-python"><pre>names <span class="pl-k">=</span> <span class="pl-v">self</span>.argument(<span class="pl-s"><span class="pl-pds">'</span>names<span class="pl-pds">'</span></span>)
<span class="pl-k">if</span> names:
    text <span class="pl-k">+=</span> <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-c1">%s</span><span class="pl-pds">'</span></span> <span class="pl-k">%</span> <span class="pl-s"><span class="pl-pds">'</span>, <span class="pl-pds">'</span></span>.join(names)
}</pre></div>
<p>There are 3 argument variants you can use:</p>
<table>





<thead valign="bottom">
<tr><th>Mode</th>
<th>Notation</th>
<th>Value</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><code>InputArgument.REQUIRED</code></td>
<td>none (just write the argument name)</td>
<td>The argument is required</td>
</tr>
<tr><td><code>InputArgument.OPTIONAL</code></td>
<td><code>argument?</code></td>
<td>The argument is optional and therefore can be omitted</td>
</tr>
<tr><td><code>InputArgument.IS_LIST</code></td>
<td><code>argument*</code></td>
<td>The argument can contain an indefinite number of arguments and must be used at the end of the argument list</td>
</tr>
</tbody>
</table>
<p>You can combine <code>IS_LIST</code> with <code>REQUIRED</code> and <code>OPTIONAL</code> like this:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">GreetCommand</span>(<span class="pl-e">Command</span>):
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    Greets someone</span>
<span class="pl-s"/>
<span class="pl-s">    demo:greet</span>
<span class="pl-s">        {names?* : Who do you want to greet?}</span>
<span class="pl-s">        {--y|yell : If set, the task will yell in uppercase letters}</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span></pre></div>
<p>If you want to set a default value, you can it like so:</p>
<pre lang="text">argument=default
</pre>
<p>The argument will then be considered optional.</p>
<a name="user-content-using-options"/>
<h2><a id="user-content-using-options" class="anchor" href="#using-options" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using Options</h2>
<p>Unlike arguments, options are not ordered (meaning you can specify them in any
order) and are specified with two dashes (e.g. <code>--yell</code> - you can also
declare a one-letter shortcut that you can call with a single dash like
<code>-y</code>). Options are <em>always</em> optional, and can be setup to accept a value
(e.g. <code>--dir=src</code>) or simply as a boolean flag without a value (e.g.
<code>--yell</code>).</p>
<div>
<p>Tip</p>
<p>It is also possible to make an option <em>optionally</em> accept a value (so that
<code>--yell</code> or <code>--yell=loud</code> work). Options can also be configured to
accept a list of values.</p>
</div>
<p>For example, add a new option to the command that can be used to specify
how many times in a row the message should be printed:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">GreetCommand</span>(<span class="pl-e">Command</span>):
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    Greets someone</span>
<span class="pl-s"/>
<span class="pl-s">    demo:greet</span>
<span class="pl-s">        {name? : Who do you want to greet?}</span>
<span class="pl-s">        {--y|yell : If set, the task will yell in uppercase letters}</span>
<span class="pl-s">        {--iterations=1 : How many times should the message be printed?}</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span></pre></div>
<p>Next, use this in the command to print the message multiple times:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> _ <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">0</span>, <span class="pl-v">self</span>.option(<span class="pl-s"><span class="pl-pds">'</span>iterations<span class="pl-pds">'</span></span>)):
    <span class="pl-v">self</span>.line(text)</pre></div>
<p>Now, when you run the task, you can optionally specify a <code>--iterations</code>
flag:</p>
<div class="highlight highlight-source-shell"><pre>$ python application.py demo:greet John
$ python application.py demo:greet John --iterations=5</pre></div>
<div>
<p>Note</p>
<p>Naturally, the <code>--iterations=5</code> part can also be written <code>--iterations 5</code></p>
</div>
<p>The first example will only print once, since <code>iterations</code> is empty and
defaults to <code>1</code>. The second example will print five times.</p>
<p>Recall that options don't care about their order. So, either of the following
will work:</p>
<div class="highlight highlight-source-shell"><pre>$ python application.py demo:greet John --iterations=5 --yell
$ python application.py demo:greet John --yell --iterations=5</pre></div>
<p>There are 4 option variants you can use:</p>
<table>





<thead valign="bottom">
<tr><th>Option</th>
<th>Notation</th>
<th>Value</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><code>InputOption.VALUE_IS_LIST</code></td>
<td><code>--option=*</code></td>
<td>This option accepts multiple values (e.g. <code>--dir=/foo --dir=/bar</code>)</td>
</tr>
<tr><td><code>InputOption.VALUE_NONE</code></td>
<td><code>--option</code></td>
<td>Do not accept input for this option (e.g. <code>--yell</code>)</td>
</tr>
<tr><td><code>InputOption.VALUE_REQUIRED</code></td>
<td><code>--option=</code></td>
<td>This value is required (e.g. <code>--iterations=5</code>), the option itself is still optional</td>
</tr>
<tr><td><code>InputOption.VALUE_OPTIONAL</code></td>
<td><code>--option=?</code></td>
<td>This option may or may not have a value (e.g. <code>--yell</code> or <code>--yell=loud</code>)</td>
</tr>
</tbody>
</table>
<p>You can combine <code>VALUE_IS_LIST</code> with <code>VALUE_REQUIRED</code> or <code>VALUE_OPTIONAL</code> like this:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">GreetCommand</span>(<span class="pl-e">Command</span>):
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    Greets someone</span>
<span class="pl-s"/>
<span class="pl-s">    demo:greet</span>
<span class="pl-s">        {name? : Who do you want to greet?}</span>
<span class="pl-s">        {--y|yell : If set, the task will yell in uppercase letters}</span>
<span class="pl-s">        {--iterations=?*1 : How many times should the message be printed?}</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span></pre></div>
<a name="user-content-testing-commands"/>
<h2><a id="user-content-testing-commands" class="anchor" href="#testing-commands" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Testing Commands</h2>
<p>Cleo provides several tools to help you test your commands. The most
useful one is the <code>CommandTester</code> class.
It uses special input and output classes to ease testing without a real
console:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> unittest <span class="pl-k">import</span> TestCase
<span class="pl-k">from</span> cleo <span class="pl-k">import</span> Application, CommandTester

<span class="pl-k">class</span> <span class="pl-en">GreetCommandTest</span>(<span class="pl-e">TestCase</span>):

    <span class="pl-k">def</span> <span class="pl-en">test_execute</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
        application <span class="pl-k">=</span> Application()
        application.add(GreetCommand())

        commmand <span class="pl-k">=</span> application.find(<span class="pl-s"><span class="pl-pds">'</span>demo:greet<span class="pl-pds">'</span></span>)
        command_tester <span class="pl-k">=</span> CommandTester(command)
        command_tester.execute([(<span class="pl-s"><span class="pl-pds">'</span>command<span class="pl-pds">'</span></span>, command.get_name())])

        <span class="pl-v">self</span>.assertRegex(<span class="pl-s"><span class="pl-pds">'</span>...<span class="pl-pds">'</span></span>, command_tester.get_display())

        <span class="pl-c"># ...</span></pre></div>
<p>The <code>CommandTester.get_display()</code> method returns what would have been displayed
during a normal call from the console.</p>
<p>You can test sending arguments and options to the command by passing them
as an list of tuples to the <code>CommandTester.execute()</code> method:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> unittest <span class="pl-k">import</span> TestCase
<span class="pl-k">from</span> cleo <span class="pl-k">import</span> Application, CommandTester

<span class="pl-k">class</span> <span class="pl-en">GreetCommandTest</span>(<span class="pl-e">TestCase</span>):

    <span class="pl-k">def</span> <span class="pl-en">test_name_is_output</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
        application <span class="pl-k">=</span> Application()
        application.add(GreetCommand())

        commmand <span class="pl-k">=</span> application.find(<span class="pl-s"><span class="pl-pds">'</span>demo:greet<span class="pl-pds">'</span></span>)
        command_tester <span class="pl-k">=</span> CommandTester(command)
        command_tester.execute([
            (<span class="pl-s"><span class="pl-pds">'</span>command<span class="pl-pds">'</span></span>, command.get_name()),
            (<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>John<span class="pl-pds">'</span></span>)
        ])

        <span class="pl-v">self</span>.assertRegex(<span class="pl-s"><span class="pl-pds">'</span>John<span class="pl-pds">'</span></span>, command_tester.get_display())</pre></div>
<div>
<p>Tip</p>
<p>You can also test a whole console application by using the <code>ApplicationTester</code> class.</p>
</div>
<a name="user-content-calling-an-existing-command"/>
<h2><a id="user-content-calling-an-existing-command" class="anchor" href="#calling-an-existing-command" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Calling an existing Command</h2>
<p>If a command depends on another one being run before it, instead of asking the
user to remember the order of execution, you can call it directly yourself.
This is also useful if you want to create a "meta" command that just runs a
bunch of other commands.</p>
<p>Calling a command from another one is straightforward:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">handle</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
    return_code <span class="pl-k">=</span> <span class="pl-v">self</span>.call(<span class="pl-s"><span class="pl-pds">'</span>demo:greet<span class="pl-pds">'</span></span>, [
        (<span class="pl-s"><span class="pl-pds">'</span>command<span class="pl-pds">'</span></span>, command.get_name()),
        (<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>John<span class="pl-pds">'</span></span>),
        (<span class="pl-s"><span class="pl-pds">'</span>--yell<span class="pl-pds">'</span></span>, <span class="pl-c1">True</span>)
    ])

    <span class="pl-c"># ...</span></pre></div>
<div>
<p>Tip</p>
<p>If you want to suppress the output of the executed command,
you can use the <code>call_silent()</code> method instead.</p>
</div>
<a name="user-content-autocompletion"/>
<h2><a id="user-content-autocompletion" class="anchor" href="#autocompletion" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Autocompletion</h2>
<p>Cleo supports automatic (tab) completion in <code>bash</code> and <code>zsh</code>.</p>
<p>To activate support for autocompletion, pass a <code>complete</code> keyword when initializing
your application:</p>
<div class="highlight highlight-source-python"><pre>application <span class="pl-k">=</span> Application(<span class="pl-s"><span class="pl-pds">'</span>My Application<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>0.1<span class="pl-pds">'</span></span>, <span class="pl-v">complete</span><span class="pl-k">=</span><span class="pl-c1">True</span>)</pre></div>
<p>Now, register completion for your application by running one of the following in a terminal,
replacing <code>[program]</code> with the command you use to run your application:</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-c"># BASH ~4.x, ZSH</span>
<span class="pl-c1">source</span> <span class="pl-s"><span class="pl-pds">&lt;(</span>[program] _completion --generate-hook<span class="pl-pds">)</span></span>

<span class="pl-c"># BASH ~3.x, ZSH</span>
[program] _completion --generate-hook <span class="pl-k">|</span> <span class="pl-c1">source</span> /dev/stdin

<span class="pl-c"># BASH (any version)</span>
<span class="pl-c1">eval</span> <span class="pl-s"><span class="pl-pds">$(</span>[program] _completion --generate-hook<span class="pl-pds">)</span></span></pre></div>
<p>By default this registers completion for the absolute path to you application,
which will work if the program is accessible on your PATH.
You can specify a program name to complete for instead using the <code>-p\--program</code> option,
which is required if you're using an alias to run the program.</p>
<div>
<p>Tip</p>
<p>If you want the completion to apply automatically for all new shell sessions,
add the command to your shell's profile (eg. <code>~/.bash_profile</code> or <code>~/.zshrc</code>)</p>
</div>
<div>
<p>Note</p>
<p>The type of shell (zsh/bash) is automatically detected using the <code>SHELL</code> environment variable at run time.
In some circumstances, you may need to explicitly specify the shell type with the <code>--shell-type</code> option.</p>
</div>

</article>
  </div></body></html>