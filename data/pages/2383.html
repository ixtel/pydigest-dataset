<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-django-conditions" class="anchor" href="#django-conditions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>django-conditions</h1>

<p><a href="https://travis-ci.org/RevolutionTech/django-conditions"><img src="https://camo.githubusercontent.com/3140d0b9b2877bf06322bc099d6d54bfac739740/68747470733a2f2f7472617669732d63692e6f72672f5265766f6c7574696f6e546563682f646a616e676f2d636f6e646974696f6e732e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/RevolutionTech/django-conditions.svg?branch=master"/></a> <a href="https://coveralls.io/github/RevolutionTech/django-conditions?branch=master"><img src="https://camo.githubusercontent.com/6dba6487667d3ddd01a2e90b16f9df5f19f94144/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f5265766f6c7574696f6e546563682f646a616e676f2d636f6e646974696f6e732f62616467652e7376673f6272616e63683d6d617374657226736572766963653d676974687562" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/RevolutionTech/django-conditions/badge.svg?branch=master&amp;service=github"/></a> <a href="https://www.versioneye.com/user/projects/5609e6b75a262f001a000345"><img src="https://camo.githubusercontent.com/3f1aebb2b9f134f9921806fe2da1e8c821ce30a6/68747470733a2f2f7777772e76657273696f6e6579652e636f6d2f757365722f70726f6a656374732f3536303965366237356132363266303031613030303334352f62616467652e7376673f7374796c653d666c6174" alt="Dependency Status" data-canonical-src="https://www.versioneye.com/user/projects/5609e6b75a262f001a000345/badge.svg?style=flat"/></a> <a href="http://django-conditions.readthedocs.org/en/latest/"><img src="https://camo.githubusercontent.com/8620f7a25c14bc9d46fe1504f8d020a77669c732/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f646a616e676f2d636f6e646974696f6e732f62616467652f3f76657273696f6e3d6c6174657374" alt="Documentation Status" data-canonical-src="https://readthedocs.org/projects/django-conditions/badge/?version=latest"/></a></p>

<p><a href="https://pypi.python.org/pypi/django-conditions/"><img src="https://camo.githubusercontent.com/7d2b4b31dea74a4bd4bf0b0b80c9fd2f3e4607d6/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f646a616e676f2d636f6e646974696f6e732e737667" alt="PyPI" data-canonical-src="https://img.shields.io/pypi/dm/django-conditions.svg"/></a> <a href="https://pypi.python.org/pypi/django-conditions/"><img src="https://camo.githubusercontent.com/d2846e563d79a39daf5b68f0446892bc8e649cac/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f646a616e676f2d636f6e646974696f6e732e737667" alt="PyPI" data-canonical-src="https://img.shields.io/pypi/v/django-conditions.svg"/></a></p>

<p>Move conditional logic that changes often from code into models so that the logic can be easily modified in admin. Some possible use cases:</p>

<ul>
<li>Segment your user base into cohorts with targeted messaging</li>
<li>Provide different rewards to users depending on their expected value</li>
<li>In a game, define the winning objectives of a mission/quest</li>
<li>and many more...</li>
</ul>

<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>

<pre><code>pip install django-conditions
</code></pre>

<h2><a id="user-content-basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Basic Usage</h2>

<p>Start by defining a condition in code:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">## condition_types.py</span>
<span class="pl-k">from</span> conditions <span class="pl-k">import</span> Condition

<span class="pl-k">class</span> <span class="pl-en">FullName</span>(<span class="pl-e">Condition</span>):
    <span class="pl-c"># The name that appears in the db and represents your condition</span>
    condstr <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>FULL_NAME<span class="pl-pds">'</span></span>

    <span class="pl-c"># Normal conditions define eval_bool, which takes in a user</span>
    <span class="pl-c"># and returns a boolean</span>
    <span class="pl-k">def</span> <span class="pl-en">eval_bool</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">user</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>):
        <span class="pl-k">return</span> <span class="pl-c1">bool</span>(user.first_name <span class="pl-k">and</span> user.last_name)</pre></div>

<p>Then add a ConditionsField to your model:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">## models.py</span>
<span class="pl-k">from</span> django.db <span class="pl-k">import</span> models
<span class="pl-k">from</span> conditions <span class="pl-k">import</span> ConditionsField, conditions_from_module
<span class="pl-k">import</span> condition_types

<span class="pl-k">class</span> <span class="pl-en">Campaign</span>(<span class="pl-e">models</span>.<span class="pl-e">Model</span>):
    text <span class="pl-k">=</span> models.TextField()

    <span class="pl-c"># The ConditionsField requires the definitions of all possible conditions</span>
    <span class="pl-c"># conditions_from_module can take an imported module and sort this out for you</span>
    target <span class="pl-k">=</span> ConditionsField(<span class="pl-v">definitions</span><span class="pl-k">=</span>conditions_from_module(condition_types))</pre></div>

<p>In the model's change form on admin, you can enter JSON to represent when you want your condition to be satisfied.</p>



<p>Now you can use the logic you created in admin to determine the outcome of an event:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">## views.py</span>
<span class="pl-k">from</span> django.http <span class="pl-k">import</span> HttpResponse
<span class="pl-k">from</span> conditions <span class="pl-k">import</span> eval_conditions
<span class="pl-k">from</span> models <span class="pl-k">import</span> Campaign

<span class="pl-k">def</span> <span class="pl-en">profile</span>(<span class="pl-smi">request</span>):
    <span class="pl-k">for</span> campaign <span class="pl-k">in</span> Campaign.objects.all():
        <span class="pl-k">if</span> eval_conditions(campaign, <span class="pl-s"><span class="pl-pds">'</span>target<span class="pl-pds">'</span></span>, request.user):
            <span class="pl-k">return</span> HttpReponse(campaign.text)

    <span class="pl-k">return</span> HttpResponse(<span class="pl-s"><span class="pl-pds">"</span>Nothing new to see.<span class="pl-pds">"</span></span>)</pre></div>

<p>Use django-conditions in your Django projects to change simple logic without having to re-deploy, and pass on the power to product managers and other non-engineers.</p>

<h2><a id="user-content-more-information" class="anchor" href="#more-information" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>More Information</h2>

<p>django-conditions is under active development. You can follow my progress <a href="https://trello.com/b/XQnzHWYZ">on Trello</a>.</p>

<p>Full documentation is available <a href="http://django-conditions.readthedocs.org/">on Read The Docs</a>.</p>
</article>
  </div></body></html>