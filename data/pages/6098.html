<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-django-maintenancemode" class="anchor" href="#django-maintenancemode" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>django-maintenancemode</h1>
<p>django-maintenancemode is a middleware that allows you to temporary shutdown
your site for maintenance work.</p>
<p>Logged in users having staff credentials can still fully use
the site as can users visiting the site from an IP address defined in
Django's <code>INTERNAL_IPS</code>.</p>
<p>Authored by <a href="https://github.com/shanx">Remco Wendt</a>, and some great <a href="https://github.com/shanx/django-maintenancemode/contributors">contributors</a>.</p>
<a href="https://pypi.python.org/pypi/django-maintenancemode/"><img src="https://camo.githubusercontent.com/2a5c28cba72c0b2855f98cdb4c69aa380aff5bff/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f646a616e676f2d6d61696e74656e616e63656d6f64652e737667" data-canonical-src="https://img.shields.io/pypi/v/django-maintenancemode.svg"/>
</a>
<a href="https://pypi.python.org/pypi/django-maintenancemode/"><img src="https://camo.githubusercontent.com/f2ca98620365a4bc1194b804b370fcc57a9f63d8/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f646a616e676f2d6d61696e74656e616e63656d6f64652e737667" data-canonical-src="https://img.shields.io/pypi/dm/django-maintenancemode.svg"/>
</a>
<a href="https://pypi.python.org/pypi/django-maintenancemode/"><img src="https://camo.githubusercontent.com/5e3526ec0e709ece7635dedde09f46efb638739b/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f7368616e782f646a616e676f2d6d61696e74656e616e63656d6f64652e737667" data-canonical-src="https://img.shields.io/github/license/shanx/django-maintenancemode.svg"/>
</a>
<a href="https://travis-ci.org/shanx/django-maintenancemode/"><img src="https://camo.githubusercontent.com/9f965aab81b17096a3c1ca846d355c6273a2b656/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f7368616e782f646a616e676f2d6d61696e74656e616e63656d6f64652e737667" data-canonical-src="https://img.shields.io/travis/shanx/django-maintenancemode.svg"/>
</a>
<a name="user-content-how-it-works"/>
<h2><a id="user-content-how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How it works</h2>
<p><code>maintenancemode</code> works the same way as handling 404 or 500 error in
Django work. It adds a <code>handler503</code> which you can override in your
main <code>urls.py</code> or you can add a <code>503.html</code> to your templates
directory.</p>
<ul>
<li><p>If user is logged in and staff member, the maintenance page is
not displayed.</p>
</li>
<li><p>If user's IP is in <code>INTERNAL_IPS</code>, the maintenance page is
not displayed.</p>
</li>
<li><p>To override the default view which is used if the maintenance mode
is enabled you can simply define a <code>handler503</code> variable in your
<a href="https://docs.djangoproject.com/en/dev/ref/settings/#root-urlconf">ROOT_URLCONF</a>, similar to how you would customize other <a href="https://docs.djangoproject.com/en/dev/topics/http/views/#customizing-error-views">error handlers</a>,
e.g. :</p>
<div class="highlight highlight-source-python"><pre>handler503 <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>example.views.maintenance_mode<span class="pl-pds">'</span></span></pre></div>
</li>
</ul>
<a name="user-content-installation"/>
<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>
<ol>
<li><p>Either checkout <code>maintenancemode</code> from GitHub, or install using pip :</p>
<div class="highlight highlight-source-shell"><pre>pip install django-maintenancemode</pre></div>
</li>
<li><p>Add <code>maintenancemode</code> to your <code>INSTALLED_APPS</code> :</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">INSTALLED_APPS</span> <span class="pl-k">=</span> (
    <span class="pl-c1">...</span>
    <span class="pl-s"><span class="pl-pds">'</span>maintenancemode<span class="pl-pds">'</span></span>,
)</pre></div>
</li>
<li><p>Add <code>MaintenanceModeMiddleware</code> to <code>MIDDLEWARE_CLASSES</code>, make sure it comes after <code>AuthenticationMiddleware</code> :</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">MIDDLEWARE_CLASSES</span> <span class="pl-k">=</span> (
    <span class="pl-c1">...</span>
    <span class="pl-s"><span class="pl-pds">'</span>django.contrib.auth.middleware.AuthenticationMiddleware<span class="pl-pds">'</span></span>,
    <span class="pl-s"><span class="pl-pds">'</span>maintenancemode.middleware.MaintenanceModeMiddleware<span class="pl-pds">'</span></span>,
)</pre></div>
</li>
<li><p>Add variable called <code>MAINTENANCE_MODE</code> in your project's <code>settings.py</code> file :</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">MAINTENANCE_MODE</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>  <span class="pl-c"># Setting this variable to ``True`` activates the middleware.</span></pre></div>
<p>or set <code>MAINTENANCE_MODE</code> to <code>False</code> and use <code>maintenance</code> command :</p>
<div class="highlight highlight-source-shell"><pre>python ./manage.py maintenance <span class="pl-k">&lt;</span>on<span class="pl-k">|</span>off<span class="pl-k">&gt;</span></pre></div>
</li>
</ol>
<p>Please see <code>example</code> application. This application is used to
manually test the functionalities of this package. This also serves as
a good example...</p>
<p>You need only Django 1.4 or above to run that. It might run on older
versions but that is not tested.</p>
<a name="user-content-configuration"/>
<h2><a id="user-content-configuration" class="anchor" href="#configuration" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Configuration</h2>
<p>There are various optional configuration options you can set in your <code>settings.py</code></p>
<div class="highlight highlight-source-python"><pre><span class="pl-c"># Enable / disable maintenance mode.</span>
<span class="pl-c"># Default: False</span>
<span class="pl-c1">MAINTENANCE_MODE</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>  <span class="pl-c"># or ``False`` and use ``maintenance`` command</span>

<span class="pl-c"># Sequence of URL path regexes to exclude from the maintenance mode.</span>
<span class="pl-c"># Default: ()</span>
<span class="pl-c1">MAINTENANCE_IGNORE_URLS</span> <span class="pl-k">=</span> (
    <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>/docs/<span class="pl-c1">.</span><span class="pl-k">*</span><span class="pl-pds">'</span></span>,
    <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>/contact<span class="pl-pds">'</span></span>
)</pre></div>
<a name="user-content-license"/>
<h2><a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>License</h2>
<p><code>django-maintenancemode</code> is released under the BSD license.</p>

</article>
  </div></body></html>