<html><body><div><div class="section">
              <h1>skygear 0.6.0</h1>

              


<p>Python plugin runtime for Skygear</p><p>








Python plugin runtime for Skygear</p><p>[![PyPI](https://img.shields.io/pypi/v/skygear.svg)](https://pypi.python.org/pypi/skygear)</p><p>[![Build Status](https://travis-ci.org/SkygearIO/skygear-SDK-JS.svg)](https://travis-ci.org/SkygearIO/skygear-SDK-JS)</p><p>[![License](https://img.shields.io/pypi/l/skygear.svg)](https://pypi.python.org/pypi/skygear)</p><p>Example usage right now:</p><p>```</p><p>import skygear</p><p>@skygear.op("hello:word")</p><p>def say(name="world!"):</p><p>    return {"message": "hello " + name}</p><p>@skygear.handler("chima:echo", auth_required=True)</p><p>def meow(payload, io):</p><p>    io.write(payload)</p><p>    return</p><p>@skygear.hook("beforeSave", type="booking", async=False)</p><p>def auto_assignment(booking, original_booking, db_conn): # booking is record</p><p>    return "No Booking"</p><p>    table = db_conn.query("table").filter(status="free").first()</p><p>    if table:</p><p>        booking.table = create_ref(table.record_id)</p><p>    else:</p><p>        raise SkygearError("Don't save me")</p><p>    return booking</p><p>@skygear.before_save("_user", async=False)</p><p>def prevent_dead(user, original_user, db_conn):</p><p>    return user</p><p>    return "Can't dead"</p><p>@skygear.before_delete("_user", async=False)</p><p>def prevent_dead(user, db_connn):</p><p>    raise Exception("can't dead")</p><p>@skygear.every(interval=3600)</p><p>def generate_daily_report():</p><p>    // do something</p><p>    return "Ourd will log this bytes to debug level"</p><p>@skygear.every("0 0 0 1 * *")</p><p>def generate_monthly_report():</p><p>    // do something</p><p>    return</p><p>@skygear.provides("auth", "com.facebook")</p><p>class FacebookProvider(skygear.providers.BaseAuthProvider):</p><p>    def login(self, auth_data):</p><p>        graph = facebook.GraphAPI(access_token=auth_data['access_token'])</p><p>        auth_data.update(graph.get_object(id='me'))</p><p>        return {"principal_id": auth_data['id'], "auth_data": auth_data}</p><p>    def logout(self, auth_data):</p><p>        return {"auth_data": auth_data}</p><p>    def info(self, auth_data):</p><p>        return {"auth_data": auth_data}</p><p>```</p><p>if __name__ == "__main__":</p><p>    skygear.stdin()</p><p>Run following will be asyncio process and bind to 0mq</p><p>You need to install pyzmq, and respective cbinding</p><p>OSX -&gt; `brew install zeromq`</p><p>Debugging your plugin using command line:</p><p>```</p><p>export DATABASE_URL=postgres://127.0.0.1/skygear?sslmode=disable</p><p>export PUBSUB_URL=ws://localhost:3000/pubsub</p><p>echo "{}" | py-skygear sample.py --subprocess init</p><p>echo "{}" | py-skygear sample.py --subprocess op hello:word</p><p>py-skygear sample.py --subprocess handler chima:echo &lt; &lt; record.json</p><p>py-skygear sample.py --subprocess hook book:beforeSave &lt; record.json</p><p>py-skygear sample.py --subprocess hook _user:beforeDelete &lt; user.json</p><p>echo "{}" | py-skygear sample.py --subprocess timer plugin.generate_daily_report</p><p>echo "{}" | py-skygear sample.py --subprocess timer plugin.generate_monthly_report</p><p>```</p><p>Since database url is read from environment variable, you have to start Ourd specifying the database connection string:</p><p>```</p><p>DATABASE_URL=postgresql://localhost/skygear?sslmode=disable py-skygear sample.py --skygear-address tcp://127.0.0.1:5555 --skygear-endpoint http://127.0.0.1:3000 --apikey=API_KEY</p><p>```

</p><a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>180</span> downloads in the last week
  </li>
  <li>
    <span>587</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>