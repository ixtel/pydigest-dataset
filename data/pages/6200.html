<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-pyupset" class="anchor" href="#pyupset" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>pyUpSet</h1>

<p>A pure-python implementation of the UpSet suite of visualisation methods by Lex, Gehlenborg et al.</p>

<h3><a id="user-content-contents" class="anchor" href="#contents" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Contents</h3>

<p><a href="#purpose">Purpose</a></p>

<p><a href="#install">How to install</a></p>

<p><a href="#howitworks">How it works</a></p>

<p><a href="#inputformat">A note on the input format</a></p>

<p><a href="#upcomingchanges">Upcoming changes</a></p>

<h2><a id="user-content-purpose" class="anchor" href="#purpose" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><a id="user-content-purpose"/>Purpose</h2>

<p>The purpose of this package is to statically reproduce some of the visualisations that can be obtained through the 
<a href="http://vcg.github.io/upset/about/#">UpSet tool of Lex, Gehlenborg et al.</a></p>

<p>In particular, <strong>pyUpSet strengthens UpSet's focus on intersections</strong>, which motivates many of the design choices 
behind the exposed 
interface and the internal mechanics of the module. (More on this below.)</p>

<p>Consistently with the documentation used for Lex et al.'s UpSet, the data employed in the following examples comes 
from the movie data set of the <a href="http://grouplens.org/datasets/movielens">GroupLens Labs</a>.</p>

<h2><a id="user-content-how-to-install" class="anchor" href="#how-to-install" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><a id="user-content-install"/>How to install</h2>

<p>pyUpSet is on <a href="https://pypi.python.org/pypi/pyupset/0.1.1.post1">PyPI</a> and can therefore be installed via <code>pip</code>:</p>

<pre><code>pip install pyupset
</code></pre>

<p>If you'd rather install from source, you can download and unzip the tar archive (in <a href="https://github.com/ImSoErgodic/py-upset/tree/master/pyupset/dist">pyupset/dist/</a>) and run</p>

<pre><code>python setup.py install
</code></pre>

<h2><a id="user-content-how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><a id="user-content-howitworks"/>How it works</h2>

<p>The current interface is very simple: Plots can be generated solely from the exposed function <code>plot</code>, whose arguments
 allow flexible customisations of the graphs. The easiest example is the plain, straightforward basic intersection 
 plot:  </p>

<pre><code>import pyUpset as pyu
from pickle import load
with open('./test_data_dict.pckl', 'r') as f:
   data_dict = load(f)
pyu.plot(data_dict)
</code></pre>

<p>to produce
<a href="https://github.com/ImSoErgodic/py-upset/blob/master/pictures/basic.png" target="_blank"><img src="https://github.com/ImSoErgodic/py-upset/raw/master/pictures/basic.png" alt="basic plot"/></a></p>

<p><strong>N.B.:</strong> Notice that intersections are <em>exclusive</em>, meaning that they form a <a href="https://en.wikipedia.org/wiki/Partition_of_a_set">partition</a> of the union of the base 
sets.</p>

<p>Displayed intersections can also be filtered or sorted by size or degree:</p>

<pre><code>pyu.plot(data_dict, unique_keys = ['title'], sort_by='degree', inters_size_bounds=(20, 400))
</code></pre>

<p>produces
<a href="https://github.com/ImSoErgodic/py-upset/blob/master/pictures/basic_filtered.png" target="_blank"><img src="https://github.com/ImSoErgodic/py-upset/raw/master/pictures/basic_filtered.png" alt="basic filtering"/></a></p>

<p>The example above also uses the <code>unique_keys</code> kwarg, which specifies columns of the underlying data frames in 
<code>data_dict</code> that can be used to uniquely identify rows and possibly speed up the computation of intersections.</p>

<h3><a id="user-content-intersection-highlighting" class="anchor" href="#intersection-highlighting" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Intersection highlighting</h3>

<p>pyUpSet supports "queries", i.e. the highlighting of intersections. Intersections to highlight are specified through 
tuples. For example, the following call produces graphs where all data is highlighted that corresponds to movies 
classified as both "adventure" and "action", or "romance" and "war".</p>

<pre><code>pyu.plot(data_dict, unique_keys = ['title'], 
         additional_plots=[{'kind':'scatter', 'data_quantities':{'x':'views', 'y':'rating_std'}},
                           {'kind':'hist', 'data_quantities':{'x':'views'}}],
         query = [('adventure', 'action'), ('romance', 'war')]
        )
</code></pre>

<p><a href="https://github.com/ImSoErgodic/py-upset/blob/master/pictures/query_basic.png" target="_blank"><img src="https://github.com/ImSoErgodic/py-upset/raw/master/pictures/query_basic.png" alt="simple query"/></a></p>

<h3><a id="user-content-additional-plots" class="anchor" href="#additional-plots" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Additional plots</h3>

<p>It is possible to add further plots that use information contained in the data frames, as in </p>

<pre><code>pyu.plot(data_dict, unique_keys = ['title'], 
         additional_plots=[{'kind':'scatter', 'data_quantities':{'x':'views', 'y':'rating_std'}},
                           {'kind':'hist', 'data_quantities':{'x':'views'}}]), 
         query = [('adventure', 'action'), ('romance', 'war')]
</code></pre>

<p>This produces
<a href="https://github.com/ImSoErgodic/py-upset/blob/master/pictures/add_plots_query.png" target="_blank"><img src="https://github.com/ImSoErgodic/py-upset/raw/master/pictures/add_plots_query.png" alt="additional plots with query"/></a></p>

<p>The highlighting produced by the queries is passed to the additional graphs. The dictionary specifying the additional
 graphs can also take standard matplotlib arguments as kwargs:</p>

<pre><code> pyu.plot(data_dict, unique_keys = ['title'], 
         additional_plots=[{'kind':'scatter', 
                            'data_quantities':{'x':'views', 'y':'rating_std'},
                            'graph_properties':{'alpha':.8, 'lw':.4, 'edgecolor':'w', 's':50}},
                           {'kind':'hist', 
                            'data_quantities':{'x':'views'},
                            'graph_properties':{'bins':50}}], 
         query = [('adventure', 'action'), ('romance', 'war')])
</code></pre>

<p>yields
 <a href="https://github.com/ImSoErgodic/py-upset/blob/master/pictures/add_plots_query_props.png" target="_blank"><img src="https://github.com/ImSoErgodic/py-upset/raw/master/pictures/add_plots_query_props.png" alt="additional plots with query and properties"/></a></p>

<h2><a id="user-content-a-note-on-the-input-format" class="anchor" href="#a-note-on-the-input-format" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><a id="user-content-inputformat"/>A note on the input format</h2>

<p>pyUpSet has a very specific use case: It is focussed on the study of intersections 
of sets. In order for a definition of intersection to make sense, and even more for the integration of additional 
graphs to be meaningful, it is assumed that the input data frames have properties of <em>homonymy</em> (they contain 
columns with the same names) and <em>homogeneity</em> (columns with the same name, intuitively, contain data of the same 
kind). While hononymy is a purely interface-dependent requirement whose aim is primarily to make pyUpSet's interface 
leaner, homogeneity has a functional role in allowing definitions of uniqueness and commonality for the data points 
in the input data frames. </p>

<p>Whenever possible, pyUpSet will try to check for (and enforce) the two above properties. 
In particular, when the <code>unique_keys</code> argument of <code>plot</code> is omitted, pyUpSet will try to use all columns 
with common names across the data frames as a list of unique keys. Under the hypotheses of homogeneity and homonymy 
this should be enough for all the operations carried out by pyUpSet to complete successfully.</p>

<h2><a id="user-content-upcoming-changes" class="anchor" href="#upcoming-changes" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><a id="user-content-upcomingchanges"/>Upcoming changes</h2>

<p>Please bear in mind that pyUpset is under active development so current behaviour may change at any time. In 
particular, here is a list of changes, in no particular order, to be expected soon:</p>

<ul>
<li>improved OO interface for increased flexibility and customisation</li>
<li>improved, automated scaling of figure and axes grid according to the number of sets, intersections and additional 
plots (at the moment manual resizing may be needed)</li>
</ul>
</article>
  </div></body></html>