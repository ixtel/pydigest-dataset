<html><body><div><article class="markdown-body entry-content" itemprop="text"><h2><a id="user-content-corpkit-a-python-based-toolkit-for-working-with-linguistic-corpora" class="anchor" href="#corpkit-a-python-based-toolkit-for-working-with-linguistic-corpora" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><em>corpkit</em>: a Python-based toolkit for working with linguistic corpora</h2>

<p><a href="https://gitter.im/interrogator/corpkit?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://camo.githubusercontent.com/da2edb525cde1455a622c58c0effc3a90b9a181c/68747470733a2f2f6261646765732e6769747465722e696d2f4a6f696e253230436861742e737667" alt="Join the chat at https://gitter.im/interrogator/corpkit" data-canonical-src="https://badges.gitter.im/Join%20Chat.svg"/></a> <a href="https://zenodo.org/badge/latestdoi/14568/interrogator/corpkit"><img src="https://camo.githubusercontent.com/0b6437039888e7e608f042c716cd8dc95e7e214e/68747470733a2f2f7a656e6f646f2e6f72672f62616467652f31343536382f696e746572726f6761746f722f636f72706b69742e737667" alt="DOI" data-canonical-src="https://zenodo.org/badge/14568/interrogator/corpkit.svg"/></a> <a href="https://travis-ci.org/interrogator/corpkit"><img src="https://camo.githubusercontent.com/11c38a143f2bd3f4c28f7758ca080c65624f53f3/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f696e746572726f6761746f722f636f72706b69742e737667" alt="Travis" data-canonical-src="https://img.shields.io/travis/interrogator/corpkit.svg"/></a> <a href="https://pypi.python.org/pypi/corpkit"><img src="https://camo.githubusercontent.com/fc9b5ce2e9907e9bb34347e5ea83513f2fa3aea4/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f636f72706b69742e737667" alt="PyPI" data-canonical-src="https://img.shields.io/pypi/v/corpkit.svg"/></a> <a href="http://corpkit.readthedocs.org/en/latest/"><img src="https://camo.githubusercontent.com/7174ad0059c087d20bf00b81e58c36de2e13dfb5/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f636f72706b69742f62616467652f3f76657273696f6e3d6c6174657374" alt="ReadTheDocs" data-canonical-src="https://readthedocs.org/projects/corpkit/badge/?version=latest"/></a></p>

<blockquote>
<p><strong>corpkit</strong> is a module for doing more sophisticated corpus linguistics. It links state-of-the-art natural language processing technologies to functional linguistic research aims, allowing you to easily build, search and visualise grammatically annotated corpora in novel ways. Complete documentation is <a href="http://corpkit.readthedocs.org/en/latest/">over here</a>.</p>

<p>A comprehensive graphical interface is included. After <a href="#installation">pip/Git installation</a>, you can open it from the command line with <code>python -m corpkit.corpkit-gui</code>. Alternatively, there's a dedicated website for a standalone OSX app <a href="http://interrogator.github.io/corpkit/">here</a>. </p>
</blockquote>







<p><a name="user-content-whats-in-here"/></p>

<h2><a id="user-content-whats-in-here" class="anchor" href="#whats-in-here" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>What's in here?</h2>

<p>Essentially, the module contains classes, methods and functions for building and interrogating corpora, then manipulating or visualising the results. </p>

<p><a name="user-content-corpus"/></p>

<h3><a id="user-content-corpus" class="anchor" href="#corpus" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><code>Corpus()</code></h3>

<p>First, there's a <code>Corpus()</code> class, which models a corpus of CoreNLP XML, lists of tokens, or plaintext files, creating subclasses for subcorpora and corpus files.</p>

<p>To use it, simple feed it a path to a directory containing <code>.txt</code> files, or subfolders containing <code>.txt</code> files.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> corpkit <span class="pl-k">import</span> Corpus
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> unparsed <span class="pl-k">=</span> Corpus(<span class="pl-s"><span class="pl-pds">'</span>path/to/data<span class="pl-pds">'</span></span>)</pre></div>

<p>With the <code>Corpus()</code> class, the following attributes are available:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Purpose</th>
</tr>
</thead><tbody>
<tr>
<td><code>corpus.subcorpora</code></td>
<td>list of subcorpus objects with indexing/slicing methods</td>
</tr>
<tr>
<td><code>corpus.features</code></td>
<td>Corpus features (characters, clauses, words, tokens, process types, passives, etc.)</td>
</tr>
</tbody></table>

<p>as well as the following methods:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Purpose</th>
</tr>
</thead><tbody>
<tr>
<td><code>corpus.parse()</code></td>
<td>Create a parsed version of a plaintext corpus</td>
</tr>
<tr>
<td><code>corpus.tokenise()</code></td>
<td>Create a tokenised version of a plaintext corpus</td>
</tr>
<tr>
<td><code>corpus.interrogate()</code></td>
<td>Interrogate the corpus for lexicogrammatical features</td>
</tr>
<tr>
<td><code>corpus.concordance()</code></td>
<td>Concordance via lexis and/or grammar</td>
</tr>
</tbody></table>

<p><a name="user-content-navigating-corpus-objects"/></p>

<h4><a id="user-content-navigating-corpus-objects" class="anchor" href="#navigating-corpus-objects" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Navigating <code>Corpus</code> objects</h4>

<p>Once you've defined a Corpus, you can move around it very easily:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### corpus containing annual subcorpora of NYT articles</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus <span class="pl-k">=</span> Corpus(<span class="pl-s"><span class="pl-pds">'</span>data/NYT-parsed<span class="pl-pds">'</span></span>)

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">list</span>(corpus.subcorpora)[:<span class="pl-c1">3</span>]
<span class="pl-c">### [&lt;corpkit.corpus.Subcorpus instance: 1987&gt;,</span>
<span class="pl-c">###  &lt;corpkit.corpus.Subcorpus instance: 1988&gt;,</span>
<span class="pl-c">###  &lt;corpkit.corpus.Subcorpus instance: 1989&gt;]</span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus.subcorpora[<span class="pl-c1">0</span>].path, corpus.subcorpora[<span class="pl-c1">0</span>].datatype
<span class="pl-c">### ('/Users/daniel/Work/risk/data/NYT-parsed/1987', 'parse')</span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus.subcorpora.c1989.files[<span class="pl-c1">10</span>:<span class="pl-c1">13</span>]
<span class="pl-c">### [&lt;corpkit.corpus.File instance: NYT-1989-01-01-10-1.txt.xml&gt;,</span>
<span class="pl-c">###  &lt;corpkit.corpus.File instance: NYT-1989-01-01-10-2.txt.xml&gt;,</span>
<span class="pl-c">###  &lt;corpkit.corpus.File instance: NYT-1989-01-01-11-1.txt.xml&gt;]</span>
</pre></div>

<p>Most attributes, and the <code>.interrogate()</code> and <code>.concordance()</code> methods, can also be called on <code>Subcorpus</code> and <code>File</code> objects. <code>File</code> objects also have a <code>.read()</code> method.</p>

<p><a name="user-content-interrogate-method"/></p>

<h4><a id="user-content-interrogate-method" class="anchor" href="#interrogate-method" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><code>interrogate()</code> method</h4>

<ul>
<li>Use <a href="http://nlp.stanford.edu/%7Emanning/courses/ling289/Tregex.html">Tregex</a>, regular expressions or wordlists to search parse trees, dependencies, token lists or plain text for complex lexicogrammatical phenomena</li>
<li>Search for, exclude and show word, lemma, POS tag, semantic role, governor, dependent, index (etc) of a token</li>
<li>N-gramming</li>
<li>Two-way UK-US spelling conversion</li>
<li>Output Pandas DataFrames that can be easily edited and visualised</li>
<li>Use parallel processing to search for a number of patterns, or search for the same pattern in multiple corpora</li>
<li>Restrict searches to particular speakers in a corpus</li>
<li>Works on collections of corpora, corpora, subcorpora, single files, or slices thereof</li>
<li>Quickly save to and load from disk with <code>save()</code> and <code>load()</code></li>
</ul>

<p><a name="user-content-concordance-method"/></p>

<h4><a id="user-content-concordance-method" class="anchor" href="#concordance-method" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><code>concordance()</code> method</h4>

<ul>
<li>Equivalent to <code>interrogate()</code>, but return DataFrame of concordance lines</li>
<li>Return any combination and order of words, lemmas, indices, functions, or POS tags</li>
<li>Editable and saveable</li>
<li>Output to LaTeX, CSV or string with <code>format()</code></li>
</ul>

<p>The code below demonstrates the complex kinds of queries that can be handled by the <code>interrogate()</code> and <code>concordance()</code> methods:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### import * mostly so that we can access global variables like G, P, V</span>
<span class="pl-c">### otherwise, use 'w' instead of W, 'p' instead of P, etc. </span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> corpkit <span class="pl-k">import</span> <span class="pl-k">*</span>

<span class="pl-c">### select parsed corpus</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus <span class="pl-k">=</span> Corpus(<span class="pl-s"><span class="pl-pds">'</span>data/postcounts-parsed<span class="pl-pds">'</span></span>)

<span class="pl-c">### import process type lists and closed class wordlists</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> dictionaries <span class="pl-k">import</span> <span class="pl-k">*</span>

<span class="pl-c">### match tokens with governor that is in relational process wordlist, </span>
<span class="pl-c">### and whose function is `nsubj(pass)` or `csubj(pass)`:</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> criteria <span class="pl-k">=</span> {<span class="pl-c1">GL</span>: processes.relational.lemmata, <span class="pl-c1">F</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span><span class="pl-c1">.</span>subj<span class="pl-pds">'</span></span>}

<span class="pl-c">### exclude tokens whose part-of-speech is verbal, </span>
<span class="pl-c">### or whose word is in a list of pronouns</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> exc <span class="pl-k">=</span> {<span class="pl-c1">P</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>V<span class="pl-pds">'</span></span>, <span class="pl-c1">W</span>: wordlists.pronouns}

<span class="pl-c"># interrogate, returning slash-delimited function/lemma</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> data <span class="pl-k">=</span> corpus.interrogate(criteria, <span class="pl-v">exclude</span> <span class="pl-k">=</span> exc, <span class="pl-v">show</span> <span class="pl-k">=</span> [<span class="pl-c1">F</span>, <span class="pl-c1">L</span>])
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> lines <span class="pl-k">=</span> corpus.concordance(criteria, <span class="pl-v">exclude</span> <span class="pl-k">=</span> exc, <span class="pl-v">show</span> <span class="pl-k">=</span> [<span class="pl-c1">F</span>, <span class="pl-c1">L</span>])

<span class="pl-c">### show results</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">print</span> data, lines.format(<span class="pl-v">n</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>, <span class="pl-v">window</span> <span class="pl-k">=</span> <span class="pl-c1">40</span>, <span class="pl-v">columns</span> <span class="pl-k">=</span> [<span class="pl-c1">L</span>, <span class="pl-c1">M</span>, <span class="pl-c1">R</span>])</pre></div>

<p>Output sample:</p>

<pre><code>    nsubj/thing  nsubj/person  nsubj/problem  nsubj/way  nsubj/son
01          296           168            134         69         73   
02          233           147             88         70         70   
03          250           160             95         80         67   
04          247           205             88         93         71   
05          275           193             68         75         61   

0  nk nsubj/it cop/be ccomp/sad advmod/when    nsubj/person  aux/do neg/not advcl/look ./at prep_at/w
1  /my dobj/Fluoxetine advmod/now mark/that    nsubj/spring  ccomp/be advmod/here ./, ./but nsubj/I a
2  y mark/because expl/there advcl/be det/a     nsubj/woman  ./across det/the prep_across/hall ./from
3   num/114 ccomp/pound ./, mark/so det/any       nsubj/med  nsubj/I rcmod/take aux/can advcl/have de
4                                                 nsubj/Kat  ./, root/be nsubj/you dep/taper ./off ./
5  /to xcomp/explain prep_from/what det/the      nsubj/mark  ./on poss/my prep_on/arm ./, conj_and/ne
6   det/the amod/first ./and conj_and/third  nsubj/hospital  nsubj/I rcmod/be advmod/at root/have num
7  e dobj/tv mark/while det/the amod/second  nsubj/hospital  nsubj/I cop/be rcmod/IP prep/at pcomp/in
8                                                 nsubj/Ben  ./, mark/if nsubj/you cop/be advcl/unhap
9  h ./of prep_of/sleep advmod/when det/the   nsubj/reality  advcl/be ./, nsubj/everyone ccomp/need n

</code></pre>

<p><a name="user-content-interrogation"/></p>

<h3><a id="user-content-interrogation" class="anchor" href="#interrogation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><code>Interrogation()</code></h3>

<p>The <code>corpus.interrogate()</code> method returns an <code>Interrogation()</code> object. These have attributes:</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Contains</th>
</tr>
</thead><tbody>
<tr>
<td><code>interrogation.results</code></td>
<td>Pandas DataFrame of counts in each subcorpus</td>
</tr>
<tr>
<td><code>interrogation.totals</code></td>
<td>Pandas Series of totals for each subcorpus/result</td>
</tr>
<tr>
<td><code>interrogation.query</code></td>
<td>a <code>dict</code> of values used to generate the interrogation</td>
</tr>
</tbody></table>

<p>and methods:</p>

<table><thead>
<tr>
<th>Method</th>
<th>Purpose</th>
</tr>
</thead><tbody>
<tr>
<td><code>interrogation.edit()</code></td>
<td>Get relative frequencies, merge/remove results/subcorpora, calculate keywords, sort using linear regression, etc.</td>
</tr>
<tr>
<td><code>interrogation.visualise()</code></td>
<td>visualise results via <em>matplotlib</em></td>
</tr>
<tr>
<td><code>interrogation.save()</code></td>
<td>Save data as pickle</td>
</tr>
<tr>
<td><code>interrogation.quickview()</code></td>
<td>Show top results and their absolute/relative frequency</td>
</tr>
</tbody></table>

<p>These methods have been monkey-patched to Pandas' DataFrame and Series objects, as well, so any slice of a result can be edited or plotted easily.</p>

<p><a name="user-content-edit-method"/></p>

<h4><a id="user-content-edit-method" class="anchor" href="#edit-method" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><code>edit()</code> method</h4>

<ul>
<li>Remove, keep or merge interrogation results or subcorpora using indices, words or regular expressions (see below)</li>
<li>Sort results by name or total frequency</li>
<li>Use linear regression to figure out the trajectories of results, and sort by the most increasing, decreasing or static values</li>
<li>Show the <em>p</em>-value for linear regression slopes, or exclude results above <em>p</em></li>
<li>Work with absolute frequency, or determine ratios/percentage of another list: 

<ul>
<li>determine the total number of verbs, or total number of verbs that are <em>be</em></li>
<li>determine the percentage of verbs that are <em>be</em></li>
<li>determine the percentage of <em>be</em> verbs that are <em>was</em></li>
<li>determine the ratio of <em>was/were</em> ...</li>
<li>etc.</li>
</ul></li>
<li>Plot more advanced kinds of relative frequency: for example, find all proper nouns that are subjects of clauses, and plot each word as a percentage of all instances of that word in the corpus (see below)</li>
</ul>

<p><a name="user-content-visualise-method"/></p>

<h4><a id="user-content-visualise-method" class="anchor" href="#visualise-method" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><code>visualise()</code> method</h4>

<ul>
<li>Plot using <em>Matplotlib</em></li>
<li>Interactive plots (hover-over text, interactive legends) using <em>mpld3</em> (examples in the <a href="https://github.com/interrogator/risk/blob/master/risk.ipynb"><em>Risk Semantics</em> notebook</a>)</li>
<li>Plot anything you like: words, tags, counts for grammatical features ...</li>
<li>Create line charts, bar charts, pie charts, etc. with the <code>kind</code> argument</li>
<li>Use <code>subplots = True</code> to produce individual charts for each result</li>
<li>Customisable figure titles, axes labels, legends, image size, colormaps, etc.</li>
<li>Use <code>TeX</code> if you have it</li>
<li>Use log scales if you really want</li>
<li>Use a number of chart styles, such as <code>ggplot</code>, <code>fivethirtyeight</code> or <code>seaborn-talk</code> (if you've got <code>seaborn</code> installed)</li>
<li>Save images to file, as <code>.pdf</code> or <code>.png</code></li>
</ul>

<p><a name="user-content-functions-lists-etc"/></p>

<h3><a id="user-content-functions-lists-etc" class="anchor" href="#functions-lists-etc" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Functions, lists, etc.</h3>

<p>There are quite a few helper functions for making regular expressions, making new projects, and so on, with more documentation forthcoming. Also included are some lists of words and dependency roles, which can be used to match functional linguistic categories. These are explained in more detail <a href="#systemic-functional-stuff">here</a>.</p>

<p><a name="user-content-installation"/></p>

<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>

<p>You can get <em>corpkit</em> running by downloading or cloning this repository, or via <code>pip</code>.</p>

<p><a name="user-content-by-downloading-the-repository"/></p>

<h3><a id="user-content-by-downloading-the-repository" class="anchor" href="#by-downloading-the-repository" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>By downloading the repository</h3>

<p>Hit 'Download ZIP' and unzip the file. Then <code>cd</code> into the newly created directory and install:</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c1">cd</span> corpkit-master
<span class="pl-c"># might need sudo:</span>
python setup.py install</pre></div>

<p><a name="user-content-by-cloning-the-repository"/></p>

<h3><a id="user-content-by-cloning-the-repository" class="anchor" href="#by-cloning-the-repository" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>By cloning the repository</h3>

<p>Clone the repo, <code>cd</code> into it and run the setup:</p>

<div class="highlight highlight-source-shell"><pre>git clone https://github.com/interrogator/corpkit.git
<span class="pl-c1">cd</span> corpkit
<span class="pl-c"># might need sudo:</span>
python setup.py install</pre></div>

<p><a name="user-content-via-pip"/></p>

<h3><a id="user-content-via-pip" class="anchor" href="#via-pip" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Via <code>pip</code></h3>

<div class="highlight highlight-source-shell"><pre><span class="pl-c"># might need sudo:</span>
pip install corpkit
<span class="pl-c"># or, for a local install:</span>
<span class="pl-c"># pip install --user corpkit</span></pre></div>

<p><em>corpkit</em> should install all the necessary dependencies, including <em>pandas</em>, <em>NLTK</em>, <em>matplotlib</em>, etc, as well as some NLTK data files. </p>

<p><a name="user-content-quickstart"/></p>

<h2><a id="user-content-quickstart" class="anchor" href="#quickstart" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Quickstart</h2>

<p>Once you've got <em>corpkit</em>, and a folder containing text files, you're ready to go:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### import everything</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> corpkit <span class="pl-k">import</span> <span class="pl-k">*</span>

<span class="pl-c">### Make corpus object from path to subcorpora/text files</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> unparsed <span class="pl-k">=</span> Corpus(<span class="pl-s"><span class="pl-pds">'</span>data/nyt/years<span class="pl-pds">'</span></span>)

<span class="pl-c">### parse it, return the new parsed corpus object</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus <span class="pl-k">=</span> unparsed.parse()

<span class="pl-c">### search corpus for modal auxiliaries and plot the top results</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus.interroplot(<span class="pl-s"><span class="pl-pds">'</span>MD<span class="pl-pds">'</span></span>)</pre></div>

<p>Output: </p>

<p><a href="https://raw.githubusercontent.com/interrogator/risk/master/images/md2.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/md2.png"/></a>
<br/></p>

<p><a name="user-content-more-detailed-examples"/></p>

<h2><a id="user-content-more-detailed-examples" class="anchor" href="#more-detailed-examples" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>More detailed examples</h2>

<p><code>interroplot()</code> is just a demo method that does three things in order:</p>

<ol>
<li>uses <code>interrogate()</code> to search corpus for a (Regex- or Tregex-based) query</li>
<li>uses <code>edit()</code> to calculate the relative frequencies of each result</li>
<li>uses <code>visualise()</code> to show the top seven results</li>
</ol>

<p>Here's an example of the three methods at work:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### make tregex query: head of NP in PP containing 'of' in NP headed by risk word:</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> q <span class="pl-k">=</span> <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &gt;&gt;# (NP &gt; (PP &lt;&lt;# /<span class="pl-k">(?i)</span>of/ &gt; (NP &lt;&lt;# (/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span>/))))<span class="pl-pds">'</span></span>

<span class="pl-c">### search trees, exclude 'risk of rain', output lemma</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> risk_of <span class="pl-k">=</span> corpus.interrogate({<span class="pl-c1">T</span>: q}, <span class="pl-v">exclude</span> <span class="pl-k">=</span> {<span class="pl-c1">W</span>: <span class="pl-s"><span class="pl-pds">'</span>^rain$<span class="pl-pds">'</span></span>}, <span class="pl-v">show</span> <span class="pl-k">=</span> [<span class="pl-c1">L</span>])
<span class="pl-c">### alternative syntax which may be easier when there's only a single search criterion:</span>
<span class="pl-c"># &gt;&gt;&gt; risk_of = corpus.interrogate(T, q, exclude = {W: '^rain$'}, show = [L])</span>

<span class="pl-c">### use edit() to turn absolute into relative frequencies</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> to_plot <span class="pl-k">=</span> risk_of.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, risk_of.totals)

<span class="pl-c">### plot the results</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> to_plot.visualise(<span class="pl-s"><span class="pl-pds">'</span>Risk of (noun)<span class="pl-pds">'</span></span>, <span class="pl-v">y_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Percentage of all results<span class="pl-pds">'</span></span>,
<span class="pl-c1">...</span>    <span class="pl-v">style</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>fivethirtyeight<span class="pl-pds">'</span></span>)</pre></div>

<p>Output: </p>

<p><a href="https://raw.githubusercontent.com/interrogator/risk/master/images/risk-of-noun.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/risk-of-noun.png"/></a>
<br/></p>

<p><a name="user-content-search-exclude-and-show"/></p>

<h3><a id="user-content-search-exclude-and-show" class="anchor" href="#search-exclude-and-show" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><code>search</code>, <code>exclude</code> and <code>show</code></h3>

<p>In the example above, parse trees are searched, a particular match is excluded, and lemmata are shown. These three arguments (<code>search</code>, <code>exclude</code> and <code>show</code>) are the core of the <code>interrogate()</code> and <code>concordance()</code> methods.</p>

<p>the <code>search</code> and <code>exclude</code> arguments need a <code>dict</code>, with the <strong>thing to be searched as keys</strong> and the <strong>search pattern as values</strong>. Here is a list of available keys for plaintext, tokenised and parsed corpora:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Gloss</th>
</tr>
</thead><tbody>
<tr>
<td><code>W</code></td>
<td>Word</td>
</tr>
<tr>
<td><code>L</code></td>
<td>Lemma</td>
</tr>
<tr>
<td><code>I</code></td>
<td>Index of token in sentence</td>
</tr>
<tr>
<td><code>N</code></td>
<td>N-gram</td>
</tr>
</tbody></table>

<p>For parsed corpora, there are many other possible keys:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Gloss</th>
</tr>
</thead><tbody>
<tr>
<td><code>P</code></td>
<td>Part of speech tag</td>
</tr>
<tr>
<td><code>PL</code></td>
<td>Word class</td>
</tr>
<tr>
<td><code>G</code></td>
<td>Governor word</td>
</tr>
<tr>
<td><code>GL</code></td>
<td>Governor lemma form</td>
</tr>
<tr>
<td><code>GP</code></td>
<td>Governor POS</td>
</tr>
<tr>
<td><code>GF</code></td>
<td>Governor function</td>
</tr>
<tr>
<td><code>D</code></td>
<td>Dependent word</td>
</tr>
<tr>
<td><code>DL</code></td>
<td>Dependent lemma form</td>
</tr>
<tr>
<td><code>DP</code></td>
<td>Dependent POS</td>
</tr>
<tr>
<td><code>DF</code></td>
<td>Dependent function</td>
</tr>
<tr>
<td><code>F</code></td>
<td>Dependency function</td>
</tr>
<tr>
<td><code>R</code></td>
<td>Distance from 'root'</td>
</tr>
<tr>
<td><code>T</code></td>
<td>Tree</td>
</tr>
<tr>
<td><code>S</code></td>
<td>Predefined general stats</td>
</tr>
</tbody></table>

<p>Allowable combinations are subject to common sense. If you're searching trees, you can't also search governors or dependents. If you're searching an unparsed corpus, you can't search for information provided by the parser. Here are some example <code>search</code>/<code>exclude</code> values:</p>

<table><thead>
<tr>
<th>search/exclude</th>
<th>Gloss</th>
</tr>
</thead><tbody>
<tr>
<td><code>{W: r'^p'}</code></td>
<td>Tokens starting with P</td>
</tr>
<tr>
<td><code>{L: r'any'}</code></td>
<td>Any lemma (often equivalent to <code>r'.*'</code>)</td>
</tr>
<tr>
<td><code>{G: r'ing$'}</code></td>
<td>Tokens with governor word ending in 'ing'</td>
</tr>
<tr>
<td><code>{F: funclist}</code></td>
<td>Tokens whose dependency function matches a <code>str</code> in <code>funclist</code></td>
</tr>
<tr>
<td><code>{D: r'^br', GL: r'$have$'}</code></td>
<td>Tokens with dependent starting with 'br' and 'have' as governor lemma</td>
</tr>
<tr>
<td><code>{I: '0', F: '^nsubj$'}</code></td>
<td>Sentence initial tokens with role of <code>nsubj</code></td>
</tr>
<tr>
<td><code>{T: r'NP !&lt;&lt;# /NN.?'}</code></td>
<td>NPs with non-nominal heads</td>
</tr>
</tbody></table>

<p>If you'd prefer, you can make a <code>dict</code> to handle dependent and governor information, instead of using things like <code>GL</code> or <code>DF</code>. The following searches produce the same output:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> crit <span class="pl-k">=</span> {<span class="pl-c1">W</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>friend<span class="pl-c1">$</span><span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>         <span class="pl-c1">D</span>: {<span class="pl-c1">F</span>: <span class="pl-s"><span class="pl-pds">'</span>amod<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>             <span class="pl-c1">W</span>: <span class="pl-s"><span class="pl-pds">'</span>great<span class="pl-pds">'</span></span>}}

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> crit <span class="pl-k">=</span> {<span class="pl-c1">W</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>friend<span class="pl-c1">$</span><span class="pl-pds">'</span></span>, <span class="pl-c1">DF</span>: <span class="pl-s"><span class="pl-pds">'</span>amod<span class="pl-pds">'</span></span>, <span class="pl-c1">D</span>: <span class="pl-s"><span class="pl-pds">'</span>great<span class="pl-pds">'</span></span>}</pre></div>

<p>By default, all <code>search</code> criteria must match, but any <code>exclude</code> criterion is enough to exclude a match. This beahviour can be changed with the <code>searchmode</code> and <code>excludemode</code> arguments:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### get words that end in 'ing' OR are nominal:</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> out <span class="pl-k">=</span> interrogator({<span class="pl-c1">W</span>: <span class="pl-s"><span class="pl-pds">'</span>ing$<span class="pl-pds">'</span></span>, <span class="pl-c1">P</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>N<span class="pl-pds">'</span></span>}, <span class="pl-v">searchmode</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>any<span class="pl-pds">'</span></span>)
<span class="pl-c">### get any word, but exclude words that end in 'ing' AND are nominal:</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> out <span class="pl-k">=</span> interrogator({<span class="pl-c1">W</span>: <span class="pl-s"><span class="pl-pds">'</span>any<span class="pl-pds">'</span></span>}, <span class="pl-v">exclude</span> <span class="pl-k">=</span> {<span class="pl-c1">W</span>: <span class="pl-s"><span class="pl-pds">'</span>ing$<span class="pl-pds">'</span></span>, <span class="pl-c1">P</span>: <span class="pl-c1">N</span>}, <span class="pl-v">excludemode</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>all<span class="pl-pds">'</span></span>)</pre></div>

<p>The <code>show</code> argument wants a list of keys you'd like to return for each result. The order will be respected. If you only want one thing, a <code>str</code> is OK. One additional possibility is <code>C</code>, which returns the number of occurrences only.</p>

<table><thead>
<tr>
<th><code>show</code></th>
<th>return</th>
</tr>
</thead><tbody>
<tr>
<td><code>W</code></td>
<td><code>'champions'</code></td>
</tr>
<tr>
<td><code>[W]</code></td>
<td><code>'champions'</code></td>
</tr>
<tr>
<td><code>L</code></td>
<td><code>'champion'</code></td>
</tr>
<tr>
<td><code>P</code></td>
<td><code>'NNS'</code></td>
</tr>
<tr>
<td><code>PL</code></td>
<td><code>'Noun'</code></td>
</tr>
<tr>
<td><code>T</code></td>
<td><code>'(np (jj prevailing) (nns champions))'</code> (depending on Tregex query)</td>
</tr>
<tr>
<td><code>[P, W]</code></td>
<td><code>'NNS/champions'</code></td>
</tr>
<tr>
<td><code>[W, P]</code></td>
<td><code>'champions/NNS'</code></td>
</tr>
<tr>
<td><code>[I, L, R]</code></td>
<td><code>'2/champion/1'</code></td>
</tr>
<tr>
<td><code>[L, D, F]</code></td>
<td><code>'champion/prevailing/nsubj'</code></td>
</tr>
<tr>
<td><code>[G, GL, I]</code></td>
<td><code>'are/be/2'</code></td>
</tr>
<tr>
<td><code>[GL, GF, GP]</code></td>
<td><code>'be/root/vb'</code></td>
</tr>
<tr>
<td><code>[L, L]</code></td>
<td><code>'champion/champion'</code></td>
</tr>
<tr>
<td><code>[C]</code></td>
<td><code>24</code></td>
</tr>
</tbody></table>

<p>Again, common sense dictates what is possible. When searching trees, only trees, words, lemmata, POS and counts can be returned. If showing trees, you can't show anything else. If you use <code>C</code>, you can't use anything else.</p>

<p><a name="user-content-building-corpora"/></p>

<h2><a id="user-content-building-corpora" class="anchor" href="#building-corpora" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Building corpora</h2>

<p><em>corpkit</em>'s <code>Corpus()</code> class contains <code>parse()</code> and <code>tokenise()</code>, modest methods for created parsed and/or tokenised corpora. The main thing you need is <strong>a folder, containing either text files, or subfolders that contain text files</strong>. If you want to parse the corpus, you'll also need to have downloaded and unzipped <a href="http://nlp.stanford.edu/software/corenlp.shtml">Stanford CoreNLP</a>. If you're tokenising, you'll need to make sure you have NLTK's tokeniser data. You can then run:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> unparsed <span class="pl-k">=</span> Corpus(<span class="pl-s"><span class="pl-pds">'</span>path/to/unparsed/files<span class="pl-pds">'</span></span>)

<span class="pl-c">### to parse, you can set a path to corenlp</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus <span class="pl-k">=</span> unparsed.parse(<span class="pl-v">corenlppath</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Downloads/corenlp<span class="pl-pds">'</span></span>)

<span class="pl-c">### to tokenise, point to nltk:</span>
<span class="pl-c"># &gt;&gt;&gt; corpus = unparsed.tokenise(nltk_data_path = 'Downloads/nltk_data')</span></pre></div>

<p>which creates the parsed/tokenised corpora, and returns <code>Corpus()</code> objects representing them. When parsing, you can also optionally pass in a string of annotators, as per the <a href="http://nlp.stanford.edu/software/corenlp.shtml">CoreNLP documentation</a>:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> ans <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>tokenize,ssplit,pos<span class="pl-pds">'</span></span>
<span class="pl-c">### you can also set memory and turn off copula head parsing</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus <span class="pl-k">=</span> unparsed.parse(<span class="pl-v">operations</span> <span class="pl-k">=</span> ans, <span class="pl-v">memory_mb</span> <span class="pl-k">=</span> <span class="pl-c1">3000</span>, <span class="pl-v">copula_head</span> <span class="pl-k">=</span> <span class="pl-c1">False</span>)</pre></div>

<p><a name="user-content-speaker-ids"/></p>

<h4><a id="user-content-speaker-ids" class="anchor" href="#speaker-ids" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Speaker IDs</h4>

<p>Something novel about <em>corpkit</em> is that it can work with corpora containing speaker IDs (scripts, transcripts, logs, etc.), like this:</p>

<pre><code>JOHN: Why did they change the signs above all the bins?
SPEAKER23: I know why. But I'm not telling.
</code></pre>

<p>If you use:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus <span class="pl-k">=</span> unparsed.parse(<span class="pl-v">speaker_segmentation</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>)</pre></div>

<p>This will:</p>

<ol>
<li>Detect any IDs in any file</li>
<li>Create a duplicate version of the corpus with IDs removed</li>
<li>Parse this 'cleaned' corpus</li>
<li>Add an XML tag to each sentence with the name of the speaker</li>
<li>Return the parsed corpus as a <code>Corpus()</code> object</li>
</ol>

<p>When interrogating or concordancing, you can then pass in a keyword argument to restrict searches to one or more speakers:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> s <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>BRISCOE<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>LOGAN<span class="pl-pds">'</span></span>]
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> npheads <span class="pl-k">=</span> interrogate(<span class="pl-s"><span class="pl-pds">'</span>trees<span class="pl-pds">'</span></span>, <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &gt;&gt;# NP<span class="pl-pds">'</span></span>, <span class="pl-v">just_speakers</span> <span class="pl-k">=</span> s)</pre></div>

<p>This makes it possible to not only investigate individual speakers, but to form an understanding of the overall tenor/tone of the text as well: <em>Who does most of the talking? Who is asking the questions? Who issues commands?</em></p>

<p><a name="user-content-navigating-parsed-corpora"/></p>

<h3><a id="user-content-navigating-parsed-corpora" class="anchor" href="#navigating-parsed-corpora" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Navigating parsed corpora</h3>

<p>When your data is parsed, <code>Corpus</code> objects draw on <a href="http://corenlp-xml-library.readthedocs.org/en/latest/">CoreNLP XML</a> to keep everything seamlessly connected:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corp <span class="pl-k">=</span> Corpus(<span class="pl-s"><span class="pl-pds">'</span>data/CHT-parsed<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corp.subcorpora[<span class="pl-s"><span class="pl-pds">'</span>2013<span class="pl-pds">'</span></span>].files[<span class="pl-c1">1</span>].document.sentences[<span class="pl-c1">4235</span>].parse_string
<span class="pl-c">### '(ROOT (FRAG (CC And) (NP (NP (RB not) (RB just)) (NP (NP (NNP Metrione) ... '</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corp.subcorpora[<span class="pl-s"><span class="pl-pds">'</span>1997<span class="pl-pds">'</span></span>].files[<span class="pl-c1">0</span>].document.sentences[<span class="pl-c1">3509</span>].tokens[<span class="pl-c1">30</span>].word
<span class="pl-c">### 'linguistics'</span></pre></div>

<p><a name="user-content-getting-general-stats"/></p>

<h3><a id="user-content-getting-general-stats" class="anchor" href="#getting-general-stats" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Getting general stats</h3>

<p>Once you have a parsed <code>Corpus()</code> object, enter <code>corpus.features</code> to interrogate the corpus for some basic frequencies:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus <span class="pl-k">=</span> Corpus(<span class="pl-s"><span class="pl-pds">'</span>data/sessions-parsed<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus.features</pre></div>

<p>Output:</p>

<pre><code>    Characters  Tokens  Words  Closed class words  Open class words  Clauses  Sentences  Unmodalised declarative  Mental processes   Relational processes  Interrogative  Passives  Verbal processes   Modalised declarative  Open interrogative  Imperative  Closed interrogative  
01       26873    8513   7308                4809              3704     2212        577                      280               156                     98             76        35                39                      26                   8           2                      3    
02       25844    7933   6920                4313              3620     2270        266                      130               195                    109             29        19                35                      11                   5           1                      3    
03       18376    5683   4877                3067              2616     1640        330                      174               132                     68             30        40                29                       8                  12           6                      1    
04       20066    6354   5366                3587              2767     1775        319                      174               176                     83             33        30                20                       9                   9           4                      1    
05       23461    7627   6217                4400              3227     1978        479                      245               154                     93             45        51                28                      20                   5           3                      1    
06       19164    6777   5200                4151              2626     1684        298                      111               165                     83             43        56                14                      10                   6           6                      2    
07       22349    7039   5951                4012              3027     1947        343                      183               195                     82             29        30                38                      12                   5           5                      0    
08       26494    8760   7124                4960              3800     2379        545                      263               170                     87             66        36                32                      10                   6           5                      4    
09       23073    7747   6193                4524              3223     2056        310                      149               164                     88             21        26                22                      10                   5           3                      0    
10       20648    6789   5608                3817              2972     1795        437                      265               139                    101             34        34                39                      18                   5           3                      2    
11       25366    8533   6899                4925              3608     2207        457                      230               203                    116             39        48                47                      15                  10           4                      0    
12       16976    5742   4624                3274              2468     1567        258                      135               183                     72             23        43                22                       4                   3           1                      6    
13       25807    8546   6966                4768              3778     2345        477                      257               200                    124             45        50                36                      15                  12           3                      2    
</code></pre>

<p>Features such as <em>relational/mental/verbal</em> processes are difficult to locate automatically, so these counts are perhaps best seen as approximations. Even so, this data can be very helpful when using <code>edit()</code> to generate relative frequencies, for example.</p>

<p><a name="user-content-concordancing"/></p>

<h2><a id="user-content-concordancing" class="anchor" href="#concordancing" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Concordancing</h2>

<p>Unlike most concordancers, which are based on plaintext corpora, <em>corpkit</em> can concordance grammatically, using the same kind of <code>search</code>, <code>exclude</code> and <code>show</code> values as <code>interrogate()</code>.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> subcorpus <span class="pl-k">=</span> corpus.subcorpora.c2005
<span class="pl-c">### C is added above to make a valid variable name from an int</span>
<span class="pl-c">### can also be accessed as corpus.subcorpora['2005']</span>
<span class="pl-c">### or corpus.subcorpora[index]</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> query <span class="pl-k">=</span> <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/JJ<span class="pl-c1">.</span><span class="pl-k">?</span>/ &gt; (NP &lt;&lt;# (/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-c1">\b</span>risk/))<span class="pl-pds">'</span></span>
<span class="pl-c">### T option for tree searching</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> lines <span class="pl-k">=</span> subcorpus.concordance(<span class="pl-c1">T</span>, query, <span class="pl-v">window</span> <span class="pl-k">=</span> <span class="pl-c1">50</span>, <span class="pl-v">n</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>, <span class="pl-v">random</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>)</pre></div>

<p>Output (a <code>Pandas DataFrame</code>):</p>

<pre><code>0    hedge funds or high-risk stocks obviously poses a         greater   risk to the pension program than a portfolio of   
1           contaminated water pose serious health and   environmental   risks                                             
2   a cash break-even pace '' was intended to minimize       financial   risk to the parent company                        
3                                                Other           major   risks identified within days of the attack        
4                           One seeks out stocks ; the           other   monitors risks                                    
5        men and women in Colorado Springs who were at            high   risk for H.I.V. infection , because of            
6   by the marketing consultant Seth Godin , to taking      calculated   risks , in the opinion of two longtime business   
7        to happen '' in premises '' where there was a            high   risk of fire                                      
8       As this was match points , some of them took a          slight   risk at the second trick by finessing the heart   
9     said that the agency 's continuing review of how         Guidant   treated patient risks posed by devices like the 
</code></pre>

<p>You can also concordance via dependencies:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### match words starting with 'st' filling function of nsubj</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> criteria <span class="pl-k">=</span> {<span class="pl-c1">W</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>st<span class="pl-pds">'</span></span>, <span class="pl-c1">F</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>nsubj<span class="pl-c1">$</span><span class="pl-pds">'</span></span>}
<span class="pl-c">### show function, pos and lemma (in that order)</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> lines <span class="pl-k">=</span> subcorpus.concordance(criteria, <span class="pl-v">show</span> <span class="pl-k">=</span> [<span class="pl-c1">F</span>, <span class="pl-c1">P</span>, <span class="pl-c1">L</span>])
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> lines.format(<span class="pl-v">window</span> <span class="pl-k">=</span> <span class="pl-c1">30</span>, <span class="pl-v">n</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>, <span class="pl-v">columns</span> <span class="pl-k">=</span> [<span class="pl-c1">L</span>, <span class="pl-c1">M</span>, <span class="pl-c1">R</span>])</pre></div>

<p>Output:</p>

<pre><code>0  ime ./:/; cc/CC/and det/DT/the        nsubj/NN/stock  conj:and/VBZ/be advmod/RB/hist
1  vmod/RB/even compound/NN/sleep       nsubj/NNS/study  ./,/, appos/NNS/evaluation cas
2  od:poss/NNS/veteran case/POS/'        nsubj/NN/study  ccomp/VBZ/suggest mark/IN/that
3                        det/DT/a        nsubj/NN/study  case/IN/in nmod:poss/NN/today 
4            cc/CC/but det/DT/the        nsubj/NN/study  root/VBD/find mark/IN/that cas
5  pound/NN/a amod/JJ/preliminary        nsubj/NN/study  case/IN/of nmod:of/NNS/woman c
6  case/IN/for nmod:for/WDT/which  nsubj/NNS/statistics  acl:relcl/VBD/be xcomp/JJ/avai
7                amod/JJR/earlier       nsubj/NNS/study  aux/VBD/have root/VBN/show mar
8  ay det/DT/the amod/JJR/earlier       nsubj/NNS/study  aux/VBD/do neg/RB/not ccomp/VB
9  /there root/VBP/be det/DT/some    nsubj/NNS/strategy  ./:/- dep/JJS/most case/IN/of 
</code></pre>

<p>You can search tokenised corpora or plaintext corpora for regular expressions or lists of words to match. The two queries below will return identical results:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> r_query <span class="pl-k">=</span> <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>fr<span class="pl-k">?</span>iends<span class="pl-k">?</span><span class="pl-c1">$</span><span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> l_query <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>friend<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>friends<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>fiend<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>fiends<span class="pl-pds">'</span></span>]
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> lines <span class="pl-k">=</span> subcorpus.concordance({<span class="pl-c1">W</span>: r_query})
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> lines <span class="pl-k">=</span> subcorpus.concordance({<span class="pl-c1">W</span>: l_query})</pre></div>

<p>If you really wanted, you can then go on to use <code>concordance()</code> output as a dictionary, or extract keywords and ngrams from it, or keep or remove certain results with <code>edit()</code>. If you want to <a href="http://interrogator.github.io/corpkit/">give the GUI a try</a>, you can colour-code and create thematic categories for concordance lines as well.</p>

<p><a name="user-content-systemic-functional-stuff"/></p>

<h2><a id="user-content-systemic-functional-stuff" class="anchor" href="#systemic-functional-stuff" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Systemic functional stuff</h2>

<p>Because I mostly use systemic functional grammar, there is also a simple tool for distinguishing between process types (relational, mental, verbal) when interrogating a corpus. If you add words to the lists in <code>dictionaries/process_types.py</code>, corpkit will get their inflections automatically.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> dictionaries.process_types <span class="pl-k">import</span> processes

<span class="pl-c">### match nsubj with verbal process as governor</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> crit <span class="pl-k">=</span> {<span class="pl-c1">F</span>: <span class="pl-s"><span class="pl-pds">'</span>^nsubj$<span class="pl-pds">'</span></span>, <span class="pl-c1">G</span>: processes.verbal}
<span class="pl-c">### return lemma of the nsubj</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> sayers <span class="pl-k">=</span> corpus.interrogate(crit, <span class="pl-v">show</span> <span class="pl-k">=</span> [<span class="pl-c1">L</span>])

<span class="pl-c">### have a look at the top results</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> sayers.quickview(<span class="pl-v">n</span> <span class="pl-k">=</span> <span class="pl-c1">20</span>)</pre></div>

<p>Output:</p>

<pre><code>  0: he         (n=24530)
  1: she        (n=5558)
  2: they       (n=5510)
  3: official   (n=4348)
  4: it         (n=3752)
  5: who        (n=2940)
  6: that       (n=2665)
  7: i          (n=2062)
  8: expert     (n=2057)
  9: analyst    (n=1369)
 10: we         (n=1214)
 11: report     (n=1103)
 12: company    (n=1070)
 13: which      (n=1043)
 14: you        (n=987)
 15: researcher (n=987)
 16: study      (n=901)
 17: critic     (n=826)
 18: person     (n=802)
 19: agency     (n=798)
 20: doctor     (n=770)

</code></pre>

<p>First, let's try removing the pronouns using <code>edit()</code>. The quickest way is to use the editable wordlists stored in <code>dictionaries/wordlists</code>:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> dictionaries.wordlists <span class="pl-k">import</span> wordlists
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> prps <span class="pl-k">=</span> wordlists.pronouns

<span class="pl-c"># alternative approaches:</span>
<span class="pl-c"># &gt;&gt;&gt; prps = [0, 1, 2, 4, 5, 6, 7, 10, 13, 14, 24]</span>
<span class="pl-c"># &gt;&gt;&gt; prps = ['he', 'she', 'you']</span>
<span class="pl-c"># &gt;&gt;&gt; prps = as_regex(wl.pronouns, boundaries = 'line')</span>
<span class="pl-c"># or, by re-interrogating:</span>
<span class="pl-c"># &gt;&gt;&gt; sayers = corpus.interrogate(crit, show = [L], exclude = {W: wordlists.pronouns})</span>

<span class="pl-c">### give edit() indices, words, wordlists or regexes to keep remove or merge</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> sayers_no_prp <span class="pl-k">=</span> sayers.edit(<span class="pl-v">skip_entries</span> <span class="pl-k">=</span> prps, <span class="pl-v">skip_subcorpora</span> <span class="pl-k">=</span> [<span class="pl-c1">1963</span>])
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> sayers_no_prp.quickview(<span class="pl-v">n</span> <span class="pl-k">=</span> <span class="pl-c1">10</span>)</pre></div>

<p>Output:</p>

<pre><code>  0: official (n=4342)
  1: expert (n=2055)
  2: analyst (n=1369)
  3: report (n=1098)
  4: company (n=1066)
  5: researcher (n=987)
  6: study (n=900)
  7: critic (n=825)
  8: person (n=801)
  9: agency (n=796)
</code></pre>

<p>Great. Now, let's sort the entries by trajectory, and then plot:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### sort with edit()</span>
<span class="pl-c">### use scipy.linregress to sort by 'increase', 'decrease', 'static', 'turbulent' or P</span>
<span class="pl-c">### other sort_by options: 'name', 'total', 'infreq'</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> sayers_no_prp <span class="pl-k">=</span> sayers_no_prp.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, sayers.totals, <span class="pl-v">sort_by</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>increase<span class="pl-pds">'</span></span>)

<span class="pl-c">### make an area chart with custom y label</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> sayers_no_prp.visualise(<span class="pl-s"><span class="pl-pds">'</span>Sayers, increasing<span class="pl-pds">'</span></span>, <span class="pl-v">kind</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>area<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>    <span class="pl-v">y_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Percentage of all sayers<span class="pl-pds">'</span></span>)</pre></div>

<p>Output:</p>

<p><a href="https://raw.githubusercontent.com/interrogator/risk/master/images/sayers-increasing.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/sayers-increasing.png"/></a>
<br/></p>

<p>We can also merge subcorpora. Let's look for changes in gendered pronouns:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> merges <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>1960s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>196<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>1980s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>198<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>1990s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>199<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>2000s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>200<span class="pl-pds">'</span></span>,
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>2010s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>201<span class="pl-pds">'</span></span>}

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> sayers <span class="pl-k">=</span> sayers.edit(<span class="pl-v">merge_subcorpora</span> <span class="pl-k">=</span> merges)

<span class="pl-c">### now, get relative frequencies for he and she</span>
<span class="pl-c">### SELF calculates percentage after merging/removing etc has been performed,</span>
<span class="pl-c">### so that he and she will sum to 100%. Pass in `sayers.totals` to calculate </span>
<span class="pl-c">### he/she as percentage of all sayers</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> genders <span class="pl-k">=</span> sayers.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, <span class="pl-c1">SELF</span>, <span class="pl-v">just_entries</span> <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>he<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>she<span class="pl-pds">'</span></span>])

<span class="pl-c">### and plot it as a series of pie charts, showing totals on the slices:</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> genders.visualise(<span class="pl-s"><span class="pl-pds">'</span>Pronominal sayers in the NYT<span class="pl-pds">'</span></span>, <span class="pl-v">kind</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>pie<span class="pl-pds">'</span></span>,
<span class="pl-c1">...</span>    <span class="pl-v">subplots</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>, <span class="pl-v">figsize</span> <span class="pl-k">=</span> (<span class="pl-c1">15</span>, <span class="pl-c1">2.75</span>), <span class="pl-v">show_totals</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>plot<span class="pl-pds">'</span></span>)</pre></div>

<p>Output:</p>

<p><a href="https://raw.githubusercontent.com/interrogator/risk/master/images/ann_he_she.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/ann_he_she.png"/></a>
<br/></p>

<p>Woohoo, a decreasing gender divide! </p>

<p><a name="user-content-keywording"/></p>

<h2><a id="user-content-keywording" class="anchor" href="#keywording" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Keywording</h2>

<p>As I see it, there are two main problems with keywording, as typically performed in corpus linguistics. First is the reliance on 'balanced'/'general' reference corpora, which are obviously a fiction. Second is the idea of stopwords. Essentially, when most people calculate keywords, they use stopword lists to automatically filter out words that they think will not be of interest to them. These words are generally closed class words, like determiners, prepositions, or pronouns. This is not a good way to go about things: the relative frequencies of <em>I</em>, <em>you</em> and <em>one</em> can tell us a lot about the kinds of language in a corpus. More seriously, stopwords mean adding subjective judgements about what is interesting language into a process that is useful precisely because it is not subjective or biased.</p>

<p>So, what to do? Well, first, don't use 'general reference corpora' unless you really really have to. With <em>corpkit</em>, you can use your entire corpus as the reference corpus, and look for keywords in subcorpora. Second, rather than using lists of stopwords, simply do not send all words in the corpus to the keyworder for calculation. Instead, try looking for key <em>predicators</em> (rightmost verbs in the VP), or key <em>participants</em> (heads of arguments of these VPs):</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### just heads of participants' lemma form (no pronouns, though!)</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> part <span class="pl-k">=</span> <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/(NN<span class="pl-k">|</span>JJ)<span class="pl-c1">.</span><span class="pl-k">?</span>/ &gt;&gt;# (/(NP<span class="pl-k">|</span>ADJP)/ <span class="pl-c1">$</span> VP <span class="pl-k">|</span> &gt; VP)<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> p <span class="pl-k">=</span> corpus.interrogate(<span class="pl-s"><span class="pl-pds">'</span>trees<span class="pl-pds">'</span></span>, part, <span class="pl-v">show</span> <span class="pl-k">=</span> <span class="pl-c1">L</span>)</pre></div>

<p>When using <code>edit()</code> to calculate keywords, there are a few default parameters that can be easily changed:</p>

<table><thead>
<tr>
<th>Keyword argument</th>
<th>Function</th>
<th>Default setting</th>
<th>Type</th>
</tr>
</thead><tbody>
<tr>
<td><code>threshold</code></td>
<td>Remove words occurring fewer than <code>n</code> times in reference corpus</td>
<td><code>False</code></td>
<td><code>'high/medium/low'</code>/ <code>True/False</code> / <code>int</code></td>
</tr>
<tr>
<td><code>calc_all</code></td>
<td>Calculate keyness for words in both reference and target corpus, rather than just target corpus</td>
<td><code>True</code></td>
<td><code>True/False</code></td>
</tr>
<tr>
<td><code>selfdrop</code></td>
<td>Attempt to remove target data from reference data when calculating keyness</td>
<td><code>True</code></td>
<td><code>True/False</code></td>
</tr>
</tbody></table>

<p>Let's have a look at how these options change the output:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### SELF as reference corpus uses p.results</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> options <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>selfdrop<span class="pl-pds">'</span></span>: <span class="pl-c1">False</span>, 
<span class="pl-c1">...</span>            <span class="pl-s"><span class="pl-pds">'</span>calc_all<span class="pl-pds">'</span></span>: <span class="pl-c1">False</span>, 
<span class="pl-c1">...</span>            <span class="pl-s"><span class="pl-pds">'</span>threshold<span class="pl-pds">'</span></span>: <span class="pl-c1">False</span>}

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">for</span> k, v <span class="pl-k">in</span> options.items():
<span class="pl-c1">...</span>    key <span class="pl-k">=</span> p.edit(<span class="pl-s"><span class="pl-pds">'</span>keywords<span class="pl-pds">'</span></span>, <span class="pl-c1">SELF</span>, <span class="pl-v">k</span> <span class="pl-k">=</span> v)
<span class="pl-c1">...</span>    <span class="pl-c1">print</span> key.results.ix[<span class="pl-s"><span class="pl-pds">'</span>2011<span class="pl-pds">'</span></span>].order(<span class="pl-v">ascending</span> <span class="pl-k">=</span> <span class="pl-c1">False</span>)
</pre></div>

<p>Output:</p>

<table><thead>
<tr>
<th>#1: default</th>
<th align="right"/>
<th>#2: no <code>selfdrop</code></th>
<th align="right"/>
<th>#3: no <code>calc_all</code></th>
<th align="right"/>
<th>#4: no <code>threshold</code></th>
<th align="right"/>
</tr>
</thead><tbody>
<tr>
<td>risk</td>
<td align="right">1941.47</td>
<td>risk</td>
<td align="right">1909.79</td>
<td>risk</td>
<td align="right">1941.47</td>
<td>bank</td>
<td align="right">668.19</td>
</tr>
<tr>
<td>bank</td>
<td align="right">1365.70</td>
<td>bank</td>
<td align="right">1247.51</td>
<td>bank</td>
<td align="right">1365.70</td>
<td>crisis</td>
<td align="right">242.05</td>
</tr>
<tr>
<td>crisis</td>
<td align="right">431.36</td>
<td>crisis</td>
<td align="right">388.01</td>
<td>crisis</td>
<td align="right">431.36</td>
<td>obama</td>
<td align="right">172.41</td>
</tr>
<tr>
<td>investor</td>
<td align="right">410.06</td>
<td>investor</td>
<td align="right">387.08</td>
<td>investor</td>
<td align="right">410.06</td>
<td>demiraj</td>
<td align="right">161.90</td>
</tr>
<tr>
<td>rule</td>
<td align="right">316.77</td>
<td>rule</td>
<td align="right">293.33</td>
<td>rule</td>
<td align="right">316.77</td>
<td>regulator</td>
<td align="right">144.91</td>
</tr>
<tr>
<td/>
<td align="right">...</td>
<td/>
<td align="right">...</td>
<td/>
<td align="right">...</td>
<td/>
<td align="right">...</td>
</tr>
<tr>
<td>clinton</td>
<td align="right">-37.80</td>
<td>tactic</td>
<td align="right">-35.09</td>
<td>hussein</td>
<td align="right">-25.42</td>
<td>clinton</td>
<td align="right">-87.33</td>
</tr>
<tr>
<td>vioxx</td>
<td align="right">-38.00</td>
<td>vioxx</td>
<td align="right">-35.29</td>
<td>clinton</td>
<td align="right">-37.80</td>
<td>today</td>
<td align="right">-89.49</td>
</tr>
<tr>
<td>greenspan</td>
<td align="right">-54.35</td>
<td>greenspan</td>
<td align="right">-51.38</td>
<td>vioxx</td>
<td align="right">-38.00</td>
<td>risky</td>
<td align="right">-125.76</td>
</tr>
<tr>
<td>bush</td>
<td align="right">-153.06</td>
<td>bush</td>
<td align="right">-143.02</td>
<td>bush</td>
<td align="right">-153.06</td>
<td>bush</td>
<td align="right">-253.95</td>
</tr>
<tr>
<td>yesterday</td>
<td align="right">-162.30</td>
<td>yesterday</td>
<td align="right">-151.71</td>
<td>yesterday</td>
<td align="right">-162.30</td>
<td>yesterday</td>
<td align="right">-268.29</td>
</tr>
</tbody></table>

<p>As you can see, slight variations on keywording give different impressions of the same corpus!</p>

<p>A key strength of <em>corpkit</em>'s approach to keywording is that you can generate new keyword lists without re-interrogating the corpus. We can use some Pandas syntax to do this more quickly.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> yrs <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>2011<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>2012<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>2013<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>2014<span class="pl-pds">'</span></span>]
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> keys <span class="pl-k">=</span> p.results.ix[yrs].sum().edit(<span class="pl-s"><span class="pl-pds">'</span>keywords<span class="pl-pds">'</span></span>, p.results.drop(yrs),
<span class="pl-c1">...</span>    <span class="pl-v">threshold</span> <span class="pl-k">=</span> <span class="pl-c1">False</span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">print</span> keys.results</pre></div>

<p>Output:</p>

<pre><code>bank          1795.24
obama          722.36
romney         560.67
jpmorgan       527.57
rule           413.94
dimon          389.86
draghi         349.80
regulator      317.82
italy          282.00
crisis         243.43
putin          209.51
greece         208.80
snowden        208.35
mf             192.78
adoboli        161.30
</code></pre>

<p>... or track the keyness of a set of words over time:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> terror <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>terror<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>terrorism<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>terrorist<span class="pl-pds">'</span></span>]
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> terr <span class="pl-k">=</span> p.edit(<span class="pl-c1">K</span>, <span class="pl-c1">SELF</span>, <span class="pl-v">merge_entries</span> <span class="pl-k">=</span> terror, <span class="pl-v">newname</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>terror<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">print</span> terr.results.terror</pre></div>

<p>Output:</p>

<pre><code>1963    -2.51
1987    -3.67
1988   -16.09
1989    -6.24
1990   -16.24
...       ...
Name: terror, dtype: float64
</code></pre>

<p><a name="user-content-visualising-keywords"/></p>

<h3><a id="user-content-visualising-keywords" class="anchor" href="#visualising-keywords" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Visualising keywords</h3>

<p>Naturally, we can use <code>visualise()</code> for our keywords too:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> pols.results.terror.visualise(<span class="pl-s"><span class="pl-pds">'</span>Terror* as Participant in the \emph<span class="pl-c1">{NYT}</span><span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>    <span class="pl-v">kind</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>area<span class="pl-pds">'</span></span>, <span class="pl-v">stacked</span> <span class="pl-k">=</span> <span class="pl-c1">False</span>, <span class="pl-v">y_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>L/L Keyness<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> politicians <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>bush<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>obama<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>gore<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>clinton<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>mccain<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>                <span class="pl-s"><span class="pl-pds">'</span>romney<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>dole<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>reagan<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>gorbachev<span class="pl-pds">'</span></span>]
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> k.results[politicans].visualise(<span class="pl-s"><span class="pl-pds">'</span>Keyness of politicians in the \emph<span class="pl-c1">{NYT}</span><span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>    <span class="pl-v">num_to_plot</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>all<span class="pl-pds">'</span></span>, <span class="pl-v">y_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>L/L Keyness<span class="pl-pds">'</span></span>, <span class="pl-v">kind</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>area<span class="pl-pds">'</span></span>, <span class="pl-v">legend_pos</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>center left<span class="pl-pds">'</span></span>)</pre></div>

<p>Output:
<a href="https://raw.githubusercontent.com/interrogator/risk/master/images/terror-as-participant-in-the-emphnyt.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/terror-as-participant-in-the-emphnyt.png"/></a>
<a href="https://raw.githubusercontent.com/interrogator/risk/master/images/keyness-of-politicians-in-the-emphnyt.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/keyness-of-politicians-in-the-emphnyt.png"/></a>
<br/></p>

<p><a name="user-content-traditional-reference-corpora"/></p>

<h3><a id="user-content-traditional-reference-corpora" class="anchor" href="#traditional-reference-corpora" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Traditional reference corpora</h3>

<p>If you still want to use a standard reference corpus, you can do that (and a dictionary version of the BNC is included). For the reference corpus, <code>edit()</code> recognises <code>dicts</code>, <code>DataFrames</code>, <code>Series</code>, files containing <code>dicts</code>, or paths to plain text files or trees.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### arbitrary list of common/boring words</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> dictionaries.stopwords <span class="pl-k">import</span> stopwords
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">print</span> p.results.ix[<span class="pl-s"><span class="pl-pds">'</span>2013<span class="pl-pds">'</span></span>].edit(<span class="pl-c1">K</span>, <span class="pl-s"><span class="pl-pds">'</span>bnc.p<span class="pl-pds">'</span></span>, <span class="pl-v">skip_entries</span> <span class="pl-k">=</span> stopwords).results
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">print</span> p.results.ix[<span class="pl-s"><span class="pl-pds">'</span>2013<span class="pl-pds">'</span></span>].edit(<span class="pl-c1">K</span>, <span class="pl-s"><span class="pl-pds">'</span>bnc.p<span class="pl-pds">'</span></span>, <span class="pl-v">calc_all</span> <span class="pl-k">=</span> <span class="pl-c1">False</span>).results</pre></div>

<p>Output (not so useful):</p>

<pre><code>#1                                #2
bank           5568.25            bank      5568.25
person         5423.24            person    5423.24
company        3839.14            company   3839.14
way            3537.16            way       3537.16
state          2873.94            state     2873.94
                ...                           ...  
three          -691.25            ten       -199.36
people         -829.97            bit       -205.97
going          -877.83            sort      -254.71
erm           -2429.29            thought   -255.72
yeah          -3179.90            will      -679.06
</code></pre>

<p><a name="user-content-parallel-processing"/></p>

<h2><a id="user-content-parallel-processing" class="anchor" href="#parallel-processing" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Parallel processing</h2>

<p><code>interrogate()</code> can also do parallel-processing. You can generally improve the speed of an interrogation by setting the <code>multiprocess</code> argument:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### set num of parallel processes manually</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> data <span class="pl-k">=</span> corpus.interrogate({<span class="pl-c1">T</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &gt;&gt;# NP<span class="pl-pds">'</span></span>}, <span class="pl-v">multiprocess</span> <span class="pl-k">=</span> <span class="pl-c1">3</span>)
<span class="pl-c">### set num of parallel processes automatically</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> data <span class="pl-k">=</span> corpus.interrogate({<span class="pl-c1">T</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &gt;&gt;# NP<span class="pl-pds">'</span></span>}, <span class="pl-v">multiprocess</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>)</pre></div>

<p>Multiprocessing is particularly useful, however, when you are interested in multiple corpora, speaker IDs, or search queries. The sections below explain how.</p>

<p><a name="user-content-multiple-corpora"/></p>

<h4><a id="user-content-multiple-corpora" class="anchor" href="#multiple-corpora" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Multiple corpora</h4>

<p>To parallel-process multiple corpora, first, wrap them up as a <code>Corpora()</code> object. To do this, you can pass in:</p>

<ol>
<li>a list of paths</li>
<li>a list of <code>Corpus()</code> objects</li>
<li>A single path string that contains corpora</li>
</ol>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">import</span> glob
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> corpkit.corpus <span class="pl-k">import</span> Corpora

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpus_list <span class="pl-k">=</span> glob.glob(<span class="pl-s"><span class="pl-pds">'</span>data/*<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpora <span class="pl-k">=</span> Corpora(corpus_list)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> corpora
<span class="pl-c">### &lt;corpkit.corpus.Corpora instance: 6 items&gt;</span>

<span class="pl-c">### interrogate by parallel processing, 4 at a time</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> output <span class="pl-k">=</span> corpora.interrogate(<span class="pl-c1">T</span>, <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">^</span>h/<span class="pl-pds">'</span></span>, <span class="pl-v">show</span> <span class="pl-k">=</span> <span class="pl-c1">L</span>, <span class="pl-v">multiprocess</span> <span class="pl-k">=</span> <span class="pl-c1">4</span>)
</pre></div>

<p>The output of a multiprocessed interrogation will generally be a <code>dict</code> with  corpus/speaker/query names as keys. The main exception to this is if you use <code>show = 'count'</code>, which will concatenate results from each query into a single <code>Interrogation()</code> object, using corpus/speaker/query names as column names.</p>

<p><a name="user-content-multiple-speakers"/></p>

<h4><a id="user-content-multiple-speakers" class="anchor" href="#multiple-speakers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Multiple speakers</h4>

<p>Passing in a list of speaker names will also trigger multiprocessing:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> dictionary.wordlists <span class="pl-k">import</span> wordlists
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> spkrs <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>MEYER<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>JAY<span class="pl-pds">'</span></span>]
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> each_speaker <span class="pl-k">=</span> corpus.interrogate(<span class="pl-c1">W</span>, wordlists.closedclass, <span class="pl-v">just_speakers</span> <span class="pl-k">=</span> spkrs)</pre></div>

<p>There is also <code>just_speakers = 'each'</code>, which will be automatically expanded to include every speaker name found in the corpus.</p>

<p><a name="user-content-multiple-queries"/></p>

<h4><a id="user-content-multiple-queries" class="anchor" href="#multiple-queries" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Multiple queries</h4>

<p>You can also run a number of queries over the same corpus in parallel. There are two ways to do this.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### method one</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> query <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>Noun phrases<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>NP<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Verb phrases<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>VP<span class="pl-pds">'</span></span>}
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> phrases <span class="pl-k">=</span> corpus.interrogate(<span class="pl-s"><span class="pl-pds">'</span>trees<span class="pl-pds">'</span></span>, query, <span class="pl-v">show</span> <span class="pl-k">=</span> <span class="pl-c1">C</span>)

<span class="pl-c">### method two</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> query <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>-ing words<span class="pl-pds">'</span></span>: {<span class="pl-c1">W</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>ing<span class="pl-c1">$</span><span class="pl-pds">'</span></span>}, <span class="pl-s"><span class="pl-pds">'</span>-ed verbs<span class="pl-pds">'</span></span>: {<span class="pl-c1">P</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>V<span class="pl-pds">'</span></span>, <span class="pl-c1">W</span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>ed<span class="pl-c1">$</span><span class="pl-pds">'</span></span>}}
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> patterns <span class="pl-k">=</span> corpus.interrogate(query, <span class="pl-v">show</span> <span class="pl-k">=</span> <span class="pl-c1">L</span>)</pre></div>

<p>Let's try multiprocessing with multiple queries, showing count (i.e. returning a single results DataFrame). We can look at different risk processes (e.g. <em>risk</em>, <em>take risk</em>, <em>run risk</em>, <em>pose risk</em>, <em>put at risk</em>) using constituency parses:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> q <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>risk<span class="pl-pds">'</span></span>:        <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>VP &lt;&lt;# (/VB<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>/)<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>      <span class="pl-s"><span class="pl-pds">'</span>take risk<span class="pl-pds">'</span></span>:   <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>VP &lt;&lt;# (/VB<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">\b</span>(take<span class="pl-k">|</span>takes<span class="pl-k">|</span>taking<span class="pl-k">|</span>took<span class="pl-k">|</span>taken)<span class="pl-k">+</span><span class="pl-c1">\b</span>/) &lt; (NP &lt;&lt;# /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>/)<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>      <span class="pl-s"><span class="pl-pds">'</span>run risk<span class="pl-pds">'</span></span>:    <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>VP &lt;&lt;# (/VB<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">\b</span>(run<span class="pl-k">|</span>runs<span class="pl-k">|</span>running<span class="pl-k">|</span>ran)<span class="pl-k">+</span><span class="pl-c1">\b</span>/) &lt; (NP &lt;&lt;# /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>/)<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>      <span class="pl-s"><span class="pl-pds">'</span>put at risk<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>VP &lt;&lt;# /<span class="pl-k">(?i)</span>(put<span class="pl-k">|</span>puts<span class="pl-k">|</span>putting)<span class="pl-c1">\b</span>/ &lt;&lt; (PP &lt;&lt;# /<span class="pl-k">(?i)</span>at/ &lt; (NP &lt;&lt;# /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span>/))<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>      <span class="pl-s"><span class="pl-pds">'</span>pose risk<span class="pl-pds">'</span></span>:   <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>VP &lt;&lt;# (/VB<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">\b</span>(pose<span class="pl-k">|</span>poses<span class="pl-k">|</span>posed<span class="pl-k">|</span>posing)<span class="pl-k">+</span><span class="pl-c1">\b</span>/) &lt; (NP &lt;&lt;# /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>/)<span class="pl-pds">'</span></span>}

<span class="pl-c"># show = 'count' will collapse results from each search into single dataframe</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> processes <span class="pl-k">=</span> corpus.interrogate(<span class="pl-s"><span class="pl-pds">'</span>trees<span class="pl-pds">'</span></span>, q, <span class="pl-v">show</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>count<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> proc_rel <span class="pl-k">=</span> processes.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, processes.totals)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> proc_rel.visualise(<span class="pl-s"><span class="pl-pds">'</span>Risk processes<span class="pl-pds">'</span></span>)</pre></div>

<p>Output:</p>

<p><a href="https://raw.githubusercontent.com/interrogator/risk/master/images/risk_processes-2.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/risk_processes-2.png"/></a>
<br/></p>

<p><a name="user-content-more-complex-queries-and-plots"/></p>

<h2><a id="user-content-more-complex-queries-and-plots" class="anchor" href="#more-complex-queries-and-plots" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>More complex queries and plots</h2>

<p>Next, let's find out what kinds of noun lemmas are subjects of any of these risk processes:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### a query to find heads of nps that are subjects of risk processes</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> query <span class="pl-k">=</span> <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/<span class="pl-c1">^</span>NN(S<span class="pl-k">|</span>)<span class="pl-c1">$</span>/ !&lt; /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span>/ &gt;&gt;# (@NP <span class="pl-c1">$</span> (VP &lt;<span class="pl-k">+</span>(VP) (VP ( &lt;&lt;# (/VB<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span>/) <span class="pl-pds">'</span></span> \
<span class="pl-c1">...</span>    <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-k">|</span> &lt;&lt;# (/VB<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">\b</span>(take<span class="pl-k">|</span>taking<span class="pl-k">|</span>takes<span class="pl-k">|</span>taken<span class="pl-k">|</span>took<span class="pl-k">|</span>run<span class="pl-k">|</span>running<span class="pl-k">|</span>runs<span class="pl-k">|</span>ran<span class="pl-k">|</span>put<span class="pl-k">|</span>putting<span class="pl-k">|</span>puts)/) &lt; <span class="pl-pds">'</span></span> \
<span class="pl-c1">...</span>    <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>(NP &lt;&lt;# (/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &lt; /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span>/))))))<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> noun_riskers <span class="pl-k">=</span> c.interrogate(<span class="pl-s"><span class="pl-pds">'</span>trees<span class="pl-pds">'</span></span>, query, <span class="pl-v">show</span> <span class="pl-k">=</span> <span class="pl-c1">L</span>)

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> noun_riskers.quickview(<span class="pl-c1">10</span>)</pre></div>

<p>Output:</p>

<pre><code>  0: person (n=195)
  1: company (n=139)
  2: bank (n=80)
  3: investor (n=66)
  4: government (n=63)
  5: man (n=51)
  6: leader (n=48)
  7: woman (n=43)
  8: official (n=40)
  9: player (n=39)
</code></pre>

<p>We can use <code>edit()</code> to make some thematic categories:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### get everyday people</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> p <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>person<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>man<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>woman<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>child<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>consumer<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>baby<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>student<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>patient<span class="pl-pds">'</span></span>]

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> them_cat <span class="pl-k">=</span> noun_riskers.edit(<span class="pl-v">merge_entries</span> <span class="pl-k">=</span> p, <span class="pl-v">newname</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Everyday people<span class="pl-pds">'</span></span>)

<span class="pl-c">### get business, gov, institutions</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> i <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>company<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>bank<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>investor<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>government<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>leader<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>president<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>officer<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>      <span class="pl-s"><span class="pl-pds">'</span>politician<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>institution<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>agency<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>candidate<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>firm<span class="pl-pds">'</span></span>]

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> them_cat <span class="pl-k">=</span> them_cat.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, noun_riskers.totals, <span class="pl-v">merge_entries</span> <span class="pl-k">=</span> i, 
<span class="pl-c1">...</span>    <span class="pl-v">newname</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Institutions<span class="pl-pds">'</span></span>, <span class="pl-v">sort_by</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>, <span class="pl-v">skip_subcorpora</span> <span class="pl-k">=</span> <span class="pl-c1">1963</span>,
<span class="pl-c1">...</span>    <span class="pl-v">just_entries</span> <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>Everyday people<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Institutions<span class="pl-pds">'</span></span>])

<span class="pl-c">### plot result</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> them_cat.visualise(<span class="pl-s"><span class="pl-pds">'</span>Types of riskers<span class="pl-pds">'</span></span>, <span class="pl-v">y_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Percentage of all riskers<span class="pl-pds">'</span></span>)</pre></div>

<p>Output:</p>

<p><a href="https://raw.githubusercontent.com/interrogator/risk/master/images/types-of-riskers.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/types-of-riskers.png"/></a>
<br/></p>

<p>Let's also find out what percentage of the time some nouns appear as riskers:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### find any head of an np not containing risk</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> query <span class="pl-k">=</span> <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>/NN<span class="pl-c1">.</span><span class="pl-k">?</span>/ &gt;&gt;# NP !&lt; /<span class="pl-k">(?i)</span><span class="pl-c1">.</span><span class="pl-k">?</span><span class="pl-c1">\b</span>risk<span class="pl-c1">.</span><span class="pl-k">?</span>/<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> noun_lemmata <span class="pl-k">=</span> corpus.interrogate(<span class="pl-s"><span class="pl-pds">'</span>trees<span class="pl-pds">'</span></span>, query, <span class="pl-v">show</span> <span class="pl-k">=</span> <span class="pl-c1">L</span>)

<span class="pl-c">### get some key terms</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> people <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>man<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>woman<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>child<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>baby<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>politician<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>senator<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>obama<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>clinton<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>bush<span class="pl-pds">'</span></span>]
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> selected <span class="pl-k">=</span> noun_riskers.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, noun_lemmata.results, 
<span class="pl-c1">...</span>    <span class="pl-v">just_entries</span> <span class="pl-k">=</span> people, <span class="pl-v">just_totals</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>, <span class="pl-v">threshold</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>, <span class="pl-v">sort_by</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>)

<span class="pl-c">### make a bar chart:</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> selected.visualise(<span class="pl-s"><span class="pl-pds">'</span>Risk and power<span class="pl-pds">'</span></span>, <span class="pl-v">num_to_plot</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>all<span class="pl-pds">'</span></span>, <span class="pl-v">kind</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>bar<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>    <span class="pl-v">x_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Word<span class="pl-pds">'</span></span>, <span class="pl-v">y_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Risker percentage<span class="pl-pds">'</span></span>, <span class="pl-v">fontsize</span> <span class="pl-k">=</span> <span class="pl-c1">15</span>)</pre></div>

<p>Output:</p>

<p><a href="https://raw.githubusercontent.com/interrogator/risk/master/images/risk-and-power-2.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/risk-and-power-2.png"/></a>
<br/></p>

<p><a name="user-content-visualisation-options"/></p>

<h3><a id="user-content-visualisation-options" class="anchor" href="#visualisation-options" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Visualisation options</h3>

<p>With a bit of creativity, you can do some pretty awesome data-viz, thanks to <em>Pandas</em> and <em>Matplotlib</em>. The following plots require only one interrogation:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> modals <span class="pl-k">=</span> corpus.interrogate(<span class="pl-s"><span class="pl-pds">'</span>trees<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>MD &lt; __<span class="pl-pds">'</span></span>, <span class="pl-v">show</span> <span class="pl-k">=</span> <span class="pl-c1">L</span>)
<span class="pl-c">### simple stuff: make relative frequencies for individual or total results</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> rel_modals <span class="pl-k">=</span> modals.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, modals.totals)

<span class="pl-c">### trickier: make an 'others' result from low-total entries</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> low_indices <span class="pl-k">=</span> <span class="pl-c1">range</span>(<span class="pl-c1">7</span>, modals.results.shape[<span class="pl-c1">1</span>])
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> each_md <span class="pl-k">=</span> modals.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, modals.totals, <span class="pl-v">merge_entries</span> <span class="pl-k">=</span> low_indices, 
<span class="pl-c1">...</span>    <span class="pl-v">newname</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>other<span class="pl-pds">'</span></span>, <span class="pl-v">sort_by</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>, <span class="pl-v">just_totals</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>, <span class="pl-v">keep_top</span> <span class="pl-k">=</span> <span class="pl-c1">7</span>)

<span class="pl-c">### complex stuff: merge results</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> entries_to_merge <span class="pl-k">=</span> [<span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span>(<span class="pl-c1">^</span>w<span class="pl-k">|</span><span class="pl-cce">\'</span>ll<span class="pl-k">|</span><span class="pl-cce">\'</span>d)<span class="pl-pds">'</span></span>, <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>c<span class="pl-pds">'</span></span>, <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>m<span class="pl-pds">'</span></span>, <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>sh<span class="pl-pds">'</span></span>]
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> modals <span class="pl-k">=</span> modals.edit(<span class="pl-v">merge_entries</span> <span class="pl-k">=</span> entries_to_merge)

<span class="pl-c">### complex stuff: merge subcorpora</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> merges <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>1960s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>196<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>1980s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>198<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>1990s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>199<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>2000s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>200<span class="pl-pds">'</span></span>,
<span class="pl-c1">...</span>           <span class="pl-s"><span class="pl-pds">'</span>2010s<span class="pl-pds">'</span></span>: <span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>201<span class="pl-pds">'</span></span>}

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> modals <span class="pl-k">=</span> sayers.edit(<span class="pl-v">merge_subcorpora</span> <span class="pl-k">=</span> merges)

<span class="pl-c">### make relative, sort, remove what we don't want</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> modals <span class="pl-k">=</span> modals.edit(<span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>, modals.totals, <span class="pl-v">keep_stats</span> <span class="pl-k">=</span> <span class="pl-c1">False</span>,
<span class="pl-c1">...</span>    <span class="pl-v">just_subcorpora</span> <span class="pl-k">=</span> merges.keys(), <span class="pl-v">sort_by</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>total<span class="pl-pds">'</span></span>, <span class="pl-v">keep_top</span> <span class="pl-k">=</span> <span class="pl-c1">4</span>)

<span class="pl-c">### show results</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">print</span> rel_modals.results, each_md.results, modals.results</pre></div>

<p>Output:</p>

<pre><code>          would       will        can      could  ...        need     shall      dare  shalt
1963  22.326833  23.537323  17.955615   6.590451  ...    0.000000  0.537996  0.000000      0
1987  24.750614  18.505132  15.512505  11.117537  ...    0.072286  0.260228  0.014457      0
1988  23.138986  19.257117  16.182067  11.219364  ...    0.091338  0.060892  0.000000      0
...         ...        ...        ...        ...  ...         ...       ...       ...    ...
2012  23.097345  16.283186  15.132743  15.353982  ...    0.029499  0.029499  0.000000      0
2013  22.136269  17.286522  16.349301  15.620351  ...    0.029753  0.029753  0.000000      0
2014  21.618357  17.101449  16.908213  14.347826  ...    0.024155  0.000000  0.000000      0
[29 rows x 17 columns] 

would     23.235853
will      17.484034
can       15.844070
could     13.243449
may        9.581255
should     7.292294
other      7.290155
Name: Combined total, dtype: float64 

       would/will/'ll...  can/could/ca  may/might/must  should/shall/shalt
1960s          47.276395     25.016812       19.569603            7.800941
1980s          44.756285     28.050776       19.224476            7.566817
1990s          44.481957     29.142571       19.140310            6.892708
2000s          42.386571     30.710739       19.182867            7.485681
2010s          42.581666     32.045745       17.777845            7.397044

</code></pre>

<p>Now, some intense plotting:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c">### exploded pie chart</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> each_md.visualise(<span class="pl-s"><span class="pl-pds">'</span>Pie chart of common modals in the NYT<span class="pl-pds">'</span></span>, <span class="pl-v">explode</span> <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>other<span class="pl-pds">'</span></span>],
<span class="pl-c1">...</span>    <span class="pl-v">num_to_plot</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>all<span class="pl-pds">'</span></span>, <span class="pl-v">kind</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>pie<span class="pl-pds">'</span></span>, <span class="pl-v">colours</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Accent<span class="pl-pds">'</span></span>, <span class="pl-v">figsize</span> <span class="pl-k">=</span> (<span class="pl-c1">11</span>, <span class="pl-c1">11</span>))

<span class="pl-c">### bar chart, transposing and reversing the data</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> modals.results.iloc[::<span class="pl-k">-</span><span class="pl-c1">1</span>].<span class="pl-c1">T</span>.iloc[::<span class="pl-k">-</span><span class="pl-c1">1</span>].visualise(<span class="pl-s"><span class="pl-pds">'</span>Modals use by decade<span class="pl-pds">'</span></span>, <span class="pl-v">kind</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>barh<span class="pl-pds">'</span></span>,
<span class="pl-c1">...</span>    <span class="pl-v">x_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Percentage of all modals<span class="pl-pds">'</span></span>, <span class="pl-v">y_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Modal group<span class="pl-pds">'</span></span>)

<span class="pl-c">### stacked area chart</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> rel_modals.results.drop(<span class="pl-s"><span class="pl-pds">'</span>1963<span class="pl-pds">'</span></span>).visualise(<span class="pl-s"><span class="pl-pds">'</span>An ocean of modals<span class="pl-pds">'</span></span>, <span class="pl-v">kind</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>area<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>    <span class="pl-v">stacked</span> <span class="pl-k">=</span> <span class="pl-c1">True</span>, <span class="pl-v">colours</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>summer<span class="pl-pds">'</span></span>, <span class="pl-v">figsize</span> <span class="pl-k">=</span> (<span class="pl-c1">8</span>, <span class="pl-c1">10</span>), <span class="pl-v">num_to_plot</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>all<span class="pl-pds">'</span></span>, 
<span class="pl-c1">...</span>    <span class="pl-v">legend_pos</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>lower right<span class="pl-pds">'</span></span>, <span class="pl-v">y_label</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Percentage of all modals<span class="pl-pds">'</span></span>)</pre></div>

<p>Output:</p>

<p align="center">
<a href="https://raw.githubusercontent.com/interrogator/risk/master/images/pie-chart-of-common-modals-in-the-nyt2.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/pie-chart-of-common-modals-in-the-nyt2.png"/></a>
<a href="https://raw.githubusercontent.com/interrogator/risk/master/images/modals-use-by-decade.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/modals-use-by-decade.png"/></a>
<a href="https://raw.githubusercontent.com/interrogator/risk/master/images/an-ocean-of-modals2.png" target="_blank"><img src="https://raw.githubusercontent.com/interrogator/risk/master/images/an-ocean-of-modals2.png"/></a>
</p>

<p><a name="user-content-contact"/></p>

<h2><a id="user-content-contact" class="anchor" href="#contact" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Contact</h2>

<p>Twitter: <a href="https://twitter.com/interro_gator">@interro_gator</a></p>

<p><a name="user-content-cite"/></p>

<h2><a id="user-content-cite" class="anchor" href="#cite" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Cite</h2>

<blockquote>
<p><code>McDonald, D. (2015). corpkit: a toolkit for corpus linguistics. Retrieved from https://www.github.com/interrogator/corpkit. DOI: http://doi.org/10.5281/zenodo.28361</code></p>
</blockquote>
</article>
  </div></body></html>