<html><body><div><section class="entry">
<p class="fsb-clear"/><p><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_animated.gif"><img class="aligncenter size-full wp-image-3119" src="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_animated.gif" alt=""/></a></p>
<p class="p1">This past Saturday, I was caught in the grips of childhood nostalgia, so I busted out my PlayStation 1 and my original copy of <i>Final Fantasy VII</i>. As a kid in late middle school/early high school, I logged <i>70+ hours</i> playing through this heartbreaking, inspirational, absolute masterpiece of an RPG.</p>
<p class="p1">As a kid in middle school (when I had <i>a lot</i> more free time), this game was almost like a security blanket, a best friend, a make-believe world encoded in <i>1’s</i> in <i>0’s</i> where I could escape to, far away from the daily teenage angst, anxiety, and apprehension.</p>
<p class="p1">I spent so much time inside this alternate world that I completed nearly <i>every single side quest</i>. Ultimate and Ruby weapon? No problem. Omnislash? Done. Knights of the Round? Master level.</p>
<p class="p1">It probably goes without saying that <i>Final Fantasy VII</i> is my favorite RPG of all time — <i>and it feels </i><b><i>absolutely awesome</i></b><i> to be playing it again</i>.</p>
<p class="p1">But as I sat on my couch a couple nights ago, sipping a seasonal Sam Adams Octoberfest while entertaining my old friends Cloud, Tifa, Barret, and the rest of the gang, it got me thinking: <i>“Not only have </i><b><i>video games</i></b><i> evolved dramatically over the past 10 years, but </i><b><i>the controllers have as well</i></b><i>.”</i></p>
<p class="p1">Think about it. While it a bit gimmicky, the Wii Remote was a major paradigm shift in user/game interaction. Over on the PlayStation side, we had <i>PlayStation Move</i>, essentially a wand with both (1) an internal motion sensors, (2) and an external motion tracking component via a webcam hooked up to the PlayStation 3 itself. Of course, then there is the XBox Kinect (one of the largest modern day computer vision success stories, <i>especially</i> within the gaming area) that required no extra remote or wand — using a stereo camera and a regression forest for pose classification, the Kinect allowed <b><i>you to become the controller</i></b>.</p>
<p class="p1">This week’s blog post is an extension to last week’s tutorial on <span class="s1"><a href="http://www.pyimagesearch.com/2015/09/14/ball-tracking-with-opencv/" target="_blank">ball tracking with OpenCV</a></span>. We won’t be learning how to build the next generation, groundbreaking video game controller — but I will show you how to <b><i>track object movement in images</i></b>, allowing you to <b><i>determine the direction an object is moving:</i></b></p>
<p><iframe src="http://www.youtube.com/embed/V9Hup-wImfA?feature=oembed" frameborder="0" allowfullscreen="">VIDEO</iframe></p>
<p>Read on to learn more.</p>

<h2>OpenCV Track Object Movement</h2>
<p><em><strong>Note: </strong>The code for this post is heavily based on last’s weeks tutorial on <a href="http://www.pyimagesearch.com/2015/09/14/ball-tracking-with-opencv/" target="_blank">ball tracking with OpenCV</a>, so because of this I’ll be shortening up a few code reviews. If you want more detail for a given code snippet, please refer to the original <a href="http://www.pyimagesearch.com/2015/09/14/ball-tracking-with-opencv/">blog post on ball tracking</a>.</em></p>
<p>Let’s go ahead and get started. Open up a new file, name it 
			<span id="crayon-56d59190bec64375327491" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">object_movement</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></span></span> , and we’ll get to work:</p>

		<div id="crayon-56d59190bec77169583596" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59190bec77169583596-1"><span class="crayon-c"># import the necessary packages</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bec77169583596-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-k ">collections</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">deque</span></p><p class="crayon-line" id="crayon-56d59190bec77169583596-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">numpy </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-e">np</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bec77169583596-4"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span></p><p class="crayon-line" id="crayon-56d59190bec77169583596-5"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">imutils</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bec77169583596-6"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span></p><p class="crayon-line" id="crayon-56d59190bec77169583596-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bec77169583596-8"><span class="crayon-c"># construct the argument parse and parse the arguments</span></p><p class="crayon-line" id="crayon-56d59190bec77169583596-9"><span class="crayon-v">ap</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span><span class="crayon-sy">.</span><span class="crayon-e">ArgumentParser</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bec77169583596-10"><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">add_argument</span><span class="crayon-sy">(</span><span class="crayon-s">"-v"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"--video"</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59190bec77169583596-11"><span class="crayon-h">	</span><span class="crayon-k ">help</span><span class="crayon-o">=</span><span class="crayon-s">"path to the (optional) video file"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bec77169583596-12"><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">add_argument</span><span class="crayon-sy">(</span><span class="crayon-s">"-b"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"--buffer"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">type</span><span class="crayon-o">=</span><span class="crayon-k ">int</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">default</span><span class="crayon-o">=</span><span class="crayon-cn">32</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59190bec77169583596-13"><span class="crayon-h">	</span><span class="crayon-k ">help</span><span class="crayon-o">=</span><span class="crayon-s">"max buffer size"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bec77169583596-14"><span class="crayon-v">args</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">vars</span><span class="crayon-sy">(</span><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">parse_args</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>We start off by importing our necessary packages on <strong>Lines 2-6</strong>. We need Python’s built in <a href="https://docs.python.org/2/library/collections.html" target="_blank">deque</a> datatype to efficiently store the past <em>N</em> points the object has been detected and tracked at. We’ll also need <a href="https://github.com/jrosebr1/imutils" target="_blank">imutils</a>, by collection of OpenCV and Python convenience functions. If you’re a follower of this blog, you likely already have this package installed. If you don’t have 
			<span id="crayon-56d59190bec7f373974928" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">imutils</span></span></span>  installed yet, let 
			<span id="crayon-56d59190bec85350854591" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">pip</span></span></span>  take care of the installation process:</p>

		

<p><strong>Lines 9-14</strong> handle parsing our two (optional) command line arguments. If you want to use a video file with this example script, just pass the path to the video file to the 
			<span id="crayon-56d59190bec93674714143" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">object_movement</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></span></span>  script using the 
			<span id="crayon-56d59190bec9b798669007" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-o">--</span><span class="crayon-v">video</span></span></span>  switch. If the 
			<span id="crayon-56d59190beca3070486707" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-o">--</span><span class="crayon-v">video</span></span></span>  switch is omitted, your webcam will (attempted) to be used instead.</p>
<p>We also have a second command line argument, 
			<span id="crayon-56d59190becab174206445" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-o">--</span><span class="crayon-v">buffer</span></span></span> , which controls the maximum size of the 
			<span id="crayon-56d59190becb3890949258" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">deque</span></span></span>  of points. The larger the 
			<span id="crayon-56d59190becba541313962" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">deque</span></span></span>  the more <em>(x, y)</em>-coordinates of the object are tracked, essentially giving you a larger “history” of where the object has been in the video stream. We’ll default the 
			<span id="crayon-56d59190becc1918171342" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-o">--</span><span class="crayon-v">buffer</span></span></span>  to be <em>32</em>, indicating that we’ll maintain a buffer of <em>(x, y)-</em>coordinates of our object for only the previous 32 frames.</p>
<p>Now that we have our packages imported and our command line arguments parsed, let’s continue on:</p>

		<div id="crayon-56d59190becc9276337283" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-16">16</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-18">18</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-20">20</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-22">22</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-24">24</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-26">26</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-28">28</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-30">30</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-32">32</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becc9276337283-34">34</p><p class="crayon-num" data-line="crayon-56d59190becc9276337283-35">35</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-16"><span class="crayon-c"># define the lower and upper boundaries of the "green"</span></p><p class="crayon-line" id="crayon-56d59190becc9276337283-17"><span class="crayon-c"># ball in the HSV color space</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-18"><span class="crayon-v">greenLower</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">29</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">86</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190becc9276337283-19"><span class="crayon-v">greenUpper</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">64</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-20"> </p><p class="crayon-line" id="crayon-56d59190becc9276337283-21"><span class="crayon-c"># initialize the list of tracked points, the frame counter,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-22"><span class="crayon-c"># and the coordinate deltas</span></p><p class="crayon-line" id="crayon-56d59190becc9276337283-23"><span class="crayon-v">pts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">deque</span><span class="crayon-sy">(</span><span class="crayon-v">maxlen</span><span class="crayon-o">=</span><span class="crayon-v">args</span><span class="crayon-sy">[</span><span class="crayon-s">"buffer"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-24"><span class="crayon-v">counter</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></p><p class="crayon-line" id="crayon-56d59190becc9276337283-25"><span class="crayon-sy">(</span><span class="crayon-v">dX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dY</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-26"><span class="crayon-v">direction</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span></p><p class="crayon-line" id="crayon-56d59190becc9276337283-27"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-28"><span class="crayon-c"># if a video path was not supplied, grab the reference</span></p><p class="crayon-line" id="crayon-56d59190becc9276337283-29"><span class="crayon-c"># to the webcam</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-30"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">"video"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">False</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59190becc9276337283-31"><span class="crayon-h">	</span><span class="crayon-v">camera</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">VideoCapture</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-32"> </p><p class="crayon-line" id="crayon-56d59190becc9276337283-33"><span class="crayon-c"># otherwise, grab a reference to the video file</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becc9276337283-34"><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59190becc9276337283-35"><span class="crayon-h">	</span><span class="crayon-v">camera</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">VideoCapture</span><span class="crayon-sy">(</span><span class="crayon-v">args</span><span class="crayon-sy">[</span><span class="crayon-s">"video"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><strong>Lines 19 and 20</strong> define the lower and upper boundaries of the color green in the HSV color space (since we will be tracking the location of a green ball in our video stream). Let’s also initialize our 
			<span id="crayon-56d59190becd1038655590" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">pts</span></span></span>  variable to be a 
			<span id="crayon-56d59190becd9816856482" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">deque</span></span></span>  with a maximum size of 
			<span id="crayon-56d59190becdf971926399" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">buffer</span></span></span>  (<strong>Line 23</strong>).</p>
<p>From there, <strong>Lines 24-26</strong> initialize a few bookkeeping variables we’ll utilize to compute and display the actual <i>direction</i> the ball is moving in the video stream.</p>
<p>Lastly, <b>Lines 28-35</b> handle grabbing a pointer, 
			<span id="crayon-56d59190bece7420906132" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">camera</span></span></span> , to either our webcam or video file.</p>
<p>Now that we have a pointer to our video stream we can start looping over the individual frames and processing them one-by-one:</p>

		<div id="crayon-56d59190becee508764617" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59190becee508764617-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-38">38</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-40">40</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-42">42</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-44">44</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-46">46</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-48">48</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-50">50</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-52">52</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-54">54</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-56">56</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-58">58</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-60">60</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-62">62</p><p class="crayon-num" data-line="crayon-56d59190becee508764617-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190becee508764617-64">64</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59190becee508764617-37"><span class="crayon-c"># keep looping</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-38"><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-39"><span class="crayon-h">	</span><span class="crayon-c"># grab the current frame</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-40"><span class="crayon-h">	</span><span class="crayon-sy">(</span><span class="crayon-v">grabbed</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">frame</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">camera</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-41"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-42"><span class="crayon-h">	</span><span class="crayon-c"># if we are viewing a video and we did not grab a frame,</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-43"><span class="crayon-h">	</span><span class="crayon-c"># then we have reached the end of the video</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-44"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">args</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">"video"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">grabbed</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-45"><span class="crayon-h">		</span><span class="crayon-st">break</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-46"> </p><p class="crayon-line" id="crayon-56d59190becee508764617-47"><span class="crayon-h">	</span><span class="crayon-c"># resize the frame, blur it, and convert it to the HSV</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-48"><span class="crayon-h">	</span><span class="crayon-c"># color space</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-49"><span class="crayon-h">	</span><span class="crayon-v">frame</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">imutils</span><span class="crayon-sy">.</span><span class="crayon-e">resize</span><span class="crayon-sy">(</span><span class="crayon-v">frame</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">width</span><span class="crayon-o">=</span><span class="crayon-cn">600</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-50"><span class="crayon-h">	</span><span class="crayon-v">blurred</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">GaussianBlur</span><span class="crayon-sy">(</span><span class="crayon-v">frame</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">11</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">11</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-51"><span class="crayon-h">	</span><span class="crayon-v">hsv</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">cvtColor</span><span class="crayon-sy">(</span><span class="crayon-v">frame</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">COLOR_BGR2HSV</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-52"> </p><p class="crayon-line" id="crayon-56d59190becee508764617-53"><span class="crayon-h">	</span><span class="crayon-c"># construct a mask for the color "green", then perform</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-54"><span class="crayon-h">	</span><span class="crayon-c"># a series of dilations and erosions to remove any small</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-55"><span class="crayon-h">	</span><span class="crayon-c"># blobs left in the mask</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-56"><span class="crayon-h">	</span><span class="crayon-v">mask</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">inRange</span><span class="crayon-sy">(</span><span class="crayon-v">hsv</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">greenLower</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">greenUpper</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-57"><span class="crayon-h">	</span><span class="crayon-v">mask</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">erode</span><span class="crayon-sy">(</span><span class="crayon-v">mask</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">iterations</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-58"><span class="crayon-h">	</span><span class="crayon-v">mask</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">dilate</span><span class="crayon-sy">(</span><span class="crayon-v">mask</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">iterations</span><span class="crayon-o">=</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-59"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-60"><span class="crayon-h">	</span><span class="crayon-c"># find contours in the mask and initialize the current</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-61"><span class="crayon-h">	</span><span class="crayon-c"># (x, y) center of the ball</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-62"><span class="crayon-h">	</span><span class="crayon-v">cnts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">findContours</span><span class="crayon-sy">(</span><span class="crayon-v">mask</span><span class="crayon-sy">.</span><span class="crayon-k ">copy</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">RETR_EXTERNAL</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59190becee508764617-63"><span class="crayon-h">		</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">CHAIN_APPROX_SIMPLE</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190becee508764617-64"><span class="crayon-h">	</span><span class="crayon-v">center</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">None</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>This snippet of code is identical to <a href="http://www.pyimagesearch.com/2015/09/14/ball-tracking-with-opencv/" target="_blank">last week’s post on ball tracking</a> so please refer to that post for more detail, but the gist is:</p>
<ul>
<li><strong>Line 38:</strong> Start looping over the frames from the 
			<span id="crayon-56d59190becf8023151818" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">camera</span></span></span>  pointer (whether that’s a video file or a webcam stream).</li>
<li><strong>Line 40:</strong> Grab the next 
			<span id="crayon-56d59190bed00309582749" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span>  from the video stream.</li>
<li><strong>Lines 44 and 45:</strong> If a 
			<span id="crayon-56d59190bed07708097698" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span>  could not not be read, break from the loop.</li>
<li><strong>Lines 49-51:</strong> Pre-process the 
			<span id="crayon-56d59190bed0e348639200" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span>  by resizing it, applying a Gaussian blur to smooth the image and reduce high frequency noise, and finally convert the 
			<span id="crayon-56d59190bed15898726529" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span>  to the HSV color space.</li>
<li><strong>Lines 56-58:</strong> Here is where the “green color detection” takes place. A call to 
			<span id="crayon-56d59190bed1d594651705" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">inRange</span></span></span>  using the 
			<span id="crayon-56d59190bed24703789711" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">greenLower</span></span></span>  and 
			<span id="crayon-56d59190bed2c653408975" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">greenUpper</span></span></span>  boundaries in the HSV color space leaves us with a binary 
			<span id="crayon-56d59190bed33489148374" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">mask</span></span></span>  representing where in the image the color “green” is found. A series of erosions and dilations are applied to remove small blobs in the 
			<span id="crayon-56d59190bed3a333828749" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">mask</span></span></span> .</li>
</ul>
<p>You can see an example of the binary mask below:</p>
<div id="attachment_3077" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/09/ball-tracking-mask.jpg"><img class="wp-image-3077" src="http://www.pyimagesearch.com/wp-content/uploads/2015/09/ball-tracking-mask.jpg" alt="Figure 1: Generating a mask for the green ball, allowing us to segment the ball from the other contents of the image." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/09/ball-tracking-mask-300x107.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/09/ball-tracking-mask.jpg 1000w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 1:</strong> Generating a mask for the green ball, allowing us to segment the ball from the other contents of the image.</p></div>
<p>On the <em>left</em> we have our original frame and on the <em>right </em>we can clearly see that only the green ball has been detected, while all other background and foreground objects are filtered out.</p>
<p>Finally, we use the 
			<span id="crayon-56d59190bed42958597152" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">findContours</span></span></span>  function to find the contours (i.e. “outlines”) of the objects in the binary 
			<span id="crayon-56d59190bed49990513401" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">mask</span></span></span> .</p>

		<div id="crayon-56d59190bed50880123536" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-66">66</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-67">67</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-68">68</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-69">69</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-70">70</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-71">71</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-72">72</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-73">73</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-74">74</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-75">75</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-76">76</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-77">77</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-78">78</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-79">79</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-80">80</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-81">81</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed50880123536-82">82</p><p class="crayon-num" data-line="crayon-56d59190bed50880123536-83">83</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-66"><span class="crayon-h">	</span><span class="crayon-c"># only proceed if at least one contour was found</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-67"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">cnts</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-68"><span class="crayon-h">		</span><span class="crayon-c"># find the largest contour in the mask, then use</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-69"><span class="crayon-h">		</span><span class="crayon-c"># it to compute the minimum enclosing circle and</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-70"><span class="crayon-h">		</span><span class="crayon-c"># centroid</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-71"><span class="crayon-h">		</span><span class="crayon-v">c</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">max</span><span class="crayon-sy">(</span><span class="crayon-v">cnts</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">key</span><span class="crayon-o">=</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">contourArea</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-72"><span class="crayon-h">		</span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">radius</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">minEnclosingCircle</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-73"><span class="crayon-h">		</span><span class="crayon-v">M</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">moments</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-74"><span class="crayon-h">		</span><span class="crayon-v">center</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">M</span><span class="crayon-sy">[</span><span class="crayon-s">"m10"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">M</span><span class="crayon-sy">[</span><span class="crayon-s">"m00"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">M</span><span class="crayon-sy">[</span><span class="crayon-s">"m01"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">M</span><span class="crayon-sy">[</span><span class="crayon-s">"m00"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-75"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-76"><span class="crayon-h">		</span><span class="crayon-c"># only proceed if the radius meets a minimum size</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-77"><span class="crayon-h">		</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">radius</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-78"><span class="crayon-h">			</span><span class="crayon-c"># draw the circle and centroid on the frame,</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-79"><span class="crayon-h">			</span><span class="crayon-c"># then update the list of tracked points</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-80"><span class="crayon-h">			</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">circle</span><span class="crayon-sy">(</span><span class="crayon-v">frame</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">x</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">y</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">radius</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-81"><span class="crayon-h">				</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed50880123536-82"><span class="crayon-h">			</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">circle</span><span class="crayon-sy">(</span><span class="crayon-v">frame</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">center</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190bed50880123536-83"><span class="crayon-h">			</span><span class="crayon-v">pts</span><span class="crayon-sy">.</span><span class="crayon-e">appendleft</span><span class="crayon-sy">(</span><span class="crayon-v">center</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>This code is also near-identical to the previous post on <a href="http://www.pyimagesearch.com/2015/09/14/ball-tracking-with-opencv/" target="_blank">ball tracking</a>, but I’ll give a quick rundown of the code to ensure you understand what is going on:</p>
<ul>
<li><strong>Line 67:</strong> Here we just make a quick check to ensure at least one object was found in our 
			<span id="crayon-56d59190bed5b502691583" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span> .</li>
<li><strong>Lines 71-74:</strong> Provided that at least one object (in this case, our green ball) was found, we find the largest contour (based on its area), and compute the <em>minimum enclosing circle</em> and the <em>centroid</em> of the object. The centroid is simply the center <em>(x, y)</em>-coordinates of the object.</li>
<li><strong>Lines 77-83:</strong> We’ll require that our object have <em>at least </em>a<em> </em>10 pixel radius to track it — if it does, we’ll draw the minimum enclosing circle surrounding the object, draw the centroid, and finally update the list of 
			<span id="crayon-56d59190bed63573464628" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">pts</span></span></span>  containing the center <em>(x, y)</em>-coordinates of the object.</li>
</ul>
<p>Unlike last weeks example that simply drew the contrail of the object as it moved around the frame, let’s see how we can actually track the <em><strong>object movement</strong>, </em>followed by using this object movement to compute the <em><strong>direction the object is moving</strong></em> using only <em>(x, y)</em>-coordinates of the object:</p>

		<div id="crayon-56d59190bed6b416026074" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-85">85</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-86">86</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-87">87</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-88">88</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-89">89</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-90">90</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-91">91</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-92">92</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-93">93</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-94">94</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-95">95</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-96">96</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-97">97</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-98">98</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-99">99</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-100">100</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-101">101</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-102">102</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-103">103</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-104">104</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-105">105</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-106">106</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-107">107</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-108">108</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-109">109</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-110">110</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-111">111</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-112">112</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-113">113</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-114">114</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-115">115</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-116">116</p><p class="crayon-num" data-line="crayon-56d59190bed6b416026074-117">117</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bed6b416026074-118">118</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59190bed6b416026074-85"><span class="crayon-h">	</span><span class="crayon-c"># loop over the set of tracked points</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-86"><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-e">arange</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">pts</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-87"><span class="crayon-h">		</span><span class="crayon-c"># if either of the tracked points are None, ignore</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-88"><span class="crayon-h">		</span><span class="crayon-c"># them</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-89"><span class="crayon-h">		</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-90"><span class="crayon-h">			</span><span class="crayon-st">continue</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-91"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-92"><span class="crayon-h">		</span><span class="crayon-c"># check to see if enough points have been accumulated in</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-93"><span class="crayon-h">		</span><span class="crayon-c"># the buffer</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-94"><span class="crayon-h">		</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">counter</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">10</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-95"><span class="crayon-h">			</span><span class="crayon-c"># compute the difference between the x and y</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-96"><span class="crayon-h">			</span><span class="crayon-c"># coordinates and re-initialize the direction</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-97"><span class="crayon-h">			</span><span class="crayon-c"># text variables</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-98"><span class="crayon-h">			</span><span class="crayon-v">dX</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">10</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-99"><span class="crayon-h">			</span><span class="crayon-v">dY</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-cn">10</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-100"><span class="crayon-h">			</span><span class="crayon-sy">(</span><span class="crayon-v">dirX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dirY</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">""</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-101"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-102"><span class="crayon-h">			</span><span class="crayon-c"># ensure there is significant movement in the</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-103"><span class="crayon-h">			</span><span class="crayon-c"># x-direction</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-104"><span class="crayon-h">			</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-k ">abs</span><span class="crayon-sy">(</span><span class="crayon-v">dX</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-105"><span class="crayon-h">				</span><span class="crayon-v">dirX</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"East"</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-e">sign</span><span class="crayon-sy">(</span><span class="crayon-v">dX</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-s">"West"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-106"> </p><p class="crayon-line" id="crayon-56d59190bed6b416026074-107"><span class="crayon-h">			</span><span class="crayon-c"># ensure there is significant movement in the</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-108"><span class="crayon-h">			</span><span class="crayon-c"># y-direction</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-109"><span class="crayon-h">			</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-k ">abs</span><span class="crayon-sy">(</span><span class="crayon-v">dY</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-110"><span class="crayon-h">				</span><span class="crayon-v">dirY</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"North"</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-e">sign</span><span class="crayon-sy">(</span><span class="crayon-v">dY</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-s">"South"</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-111"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-112"><span class="crayon-h">			</span><span class="crayon-c"># handle when both directions are non-empty</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-113"><span class="crayon-h">			</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">dirX</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">dirY</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-114"><span class="crayon-h">				</span><span class="crayon-v">direction</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"{}-{}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">dirY</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dirX</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-115"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-116"><span class="crayon-h">			</span><span class="crayon-c"># otherwise, only one direction is non-empty</span></p><p class="crayon-line" id="crayon-56d59190bed6b416026074-117"><span class="crayon-h">			</span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bed6b416026074-118"><span class="crayon-h">				</span><span class="crayon-v">direction</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">dirX </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">dirX</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-v">dirY</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>On <strong>Line 86</strong> we start to loop over the <em>(x, y)</em>-coordinates of object we are tracking. If either of the points are 
			<span id="crayon-56d59190bed79370963979" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">None</span></span></span>  (<strong>Lines 89 and 90</strong>) we simply ignore them and keep looping.</p>
<p>Otherwise, we can actually compute the direction the object is moving by investigating two previous <em>(x, y)</em>-coordinates.</p>
<p>Computing the directional movement (if any) is handled on <strong>Lines 98 and 99</strong> where we compute 
			<span id="crayon-56d59190bed81163575345" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dX</span></span></span>  and 
			<span id="crayon-56d59190bed88988273558" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span> , the deltas (differences) between the <em>x</em> and <em>y</em> coordinates of the <em>current frame</em> and a frame towards the end of the buffer, respectively.</p>
<p>However, it’s important to note that there is a bit of a catch to performing this computation. An obvious first solution would be to compute the direction of the object between the <em>current frame</em> and the <em>previous frame</em>. However, using the current frame and the previous frame is a bit of an unstable solution. Unless the object is moving very quickly, the deltas between the <em>(x, y)</em>-coordinates will be very small. If we were to use these deltas to report direction, then our results would be <em><strong>extremely noisy</strong></em>, implying that even small, minuscule changes in trajectory would be considered a direction change. In fact, these changes could be <em>so small</em> that they would be near invisible to the human eye (or at the very least, trivial) — we are most likely not that interested reporting and tracking such small movements.</p>
<p>Instead, it’s much more likely that we are interested in the larger object movements and reporting the direction in which the object is moving — hence we compute the deltas between the coordinates of the <em>current frame</em> and a <em>frame farther back in the queue</em>. Performing this operation helps reduce noise and false reports of direction change.</p>
<p>On <b>Line 104</b> we check the magnitude of the <em>x</em>-delta to see if there is a  significant difference in direction along the <em>x</em>-axis. In this case, if there is more than 20 pixel difference between the <em>x</em>-coordinates, we need to figure out in which direction the object is moving. If the sign of 
			<span id="crayon-56d59190bed90559613344" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dX</span></span></span>  is positive, then we know the object is moving <em>to the right</em> (east). Otherwise, if the sign of 
			<span id="crayon-56d59190bed98650837730" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dX</span></span></span> is negative, then we are moving <em>to the left</em> (west).</p>
<p><em><strong>Note:</strong> You can make the direction detection code more sensitive by decreasing the threshold. In this case, a 20 pixel different obtains good results. However, if you want to detect tiny movements, simply decrease this value. On the other hand, if you want to only report large object movements, all you need to do is increase this threshold.</em></p>
<p><strong>Lines 109 and 110</strong> handle 
			<span id="crayon-56d59190bed9f563459144" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span>  in a similar fashion. First, we must ensure there is a significant change in movement (at least 20 pixels). If so, we can check the sign of 
			<span id="crayon-56d59190beda6899170288" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span> . If the sign of 
			<span id="crayon-56d59190bedad629659391" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span>  is positive, then we’re moving <em>up</em> (north), otherwise the sign is negative and we’re moving <em>down</em> (south).</p>
<p>However, it could be the case that <em>both</em> 
			<span id="crayon-56d59190bedb4136860937" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dX</span></span></span>  and 
			<span id="crayon-56d59190bedbb486830046" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span>  have substantial directional movements (indicating diagonal movement, such as “<em>South-East”</em> or “<em>North-West”</em>). <strong>Lines 113 and 114</strong> handle the case our object is moving along a diagonal and update the 
			<span id="crayon-56d59190bedc2469050640" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">direction</span></span></span>  variable as such.</p>
<p>At this point, our script is pretty much done! We just need to wrap a few more things up:</p>

		<div id="crayon-56d59190bedca935813140" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-120">120</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-121">121</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-122">122</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-123">123</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-124">124</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-125">125</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-126">126</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-127">127</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-128">128</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-129">129</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-130">130</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-131">131</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-132">132</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-133">133</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-134">134</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-135">135</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-136">136</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-137">137</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-138">138</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-139">139</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-140">140</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-141">141</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-142">142</p><p class="crayon-num" data-line="crayon-56d59190bedca935813140-143">143</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d59190bedca935813140-144">144</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-120"><span class="crayon-h">		</span><span class="crayon-c"># otherwise, compute the thickness of the line and</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-121"><span class="crayon-h">		</span><span class="crayon-c"># draw the connecting lines</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-122"><span class="crayon-h">		</span><span class="crayon-v">thickness</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">np</span><span class="crayon-sy">.</span><span class="crayon-e">sqrt</span><span class="crayon-sy">(</span><span class="crayon-v">args</span><span class="crayon-sy">[</span><span class="crayon-s">"buffer"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-k ">float</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-cn">2.5</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-123"><span class="crayon-h">		</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">line</span><span class="crayon-sy">(</span><span class="crayon-v">frame</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">pts</span><span class="crayon-sy">[</span><span class="crayon-v">i</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">thickness</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-124"> </p><p class="crayon-line" id="crayon-56d59190bedca935813140-125"><span class="crayon-h">	</span><span class="crayon-c"># show the movement deltas and the direction of movement on</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-126"><span class="crayon-h">	</span><span class="crayon-c"># the frame</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-127"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">putText</span><span class="crayon-sy">(</span><span class="crayon-v">frame</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">direction</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">10</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">30</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">FONT_HERSHEY_SIMPLEX</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-128"><span class="crayon-h">		</span><span class="crayon-cn">0.65</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-129"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">putText</span><span class="crayon-sy">(</span><span class="crayon-v">frame</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"dx: {}, dy: {}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">dX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dY</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-130"><span class="crayon-h">		</span><span class="crayon-sy">(</span><span class="crayon-cn">10</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">frame</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">FONT_HERSHEY_SIMPLEX</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-131"><span class="crayon-h">		</span><span class="crayon-cn">0.35</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-132"> </p><p class="crayon-line" id="crayon-56d59190bedca935813140-133"><span class="crayon-h">	</span><span class="crayon-c"># show the frame to our screen and increment the frame counter</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-134"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">imshow</span><span class="crayon-sy">(</span><span class="crayon-s">"Frame"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">frame</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-135"><span class="crayon-h">	</span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">waitKey</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-cn">0xFF</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-136"><span class="crayon-h">	</span><span class="crayon-v">counter</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-137"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-138"><span class="crayon-h">	</span><span class="crayon-c"># if the 'q' key is pressed, stop the loop</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-139"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">ord</span><span class="crayon-sy">(</span><span class="crayon-s">"q"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-140"><span class="crayon-h">		</span><span class="crayon-st">break</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-141"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-142"><span class="crayon-c"># cleanup the camera and close any open windows</span></p><p class="crayon-line" id="crayon-56d59190bedca935813140-143"><span class="crayon-v">camera</span><span class="crayon-sy">.</span><span class="crayon-e">release</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d59190bedca935813140-144"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">destroyAllWindows</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Again, this code is essentially identical to the previous post on <a href="http://www.pyimagesearch.com/2015/09/14/ball-tracking-with-opencv/" target="_blank">ball tracking</a>, so I’ll just give a quick rundown:</p>
<ul>
<li><strong>Lines 122 and 123:</strong> Here we compute the thickness of the contrail of the object and draw it on our 
			<span id="crayon-56d59190bedd8474864826" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span> .</li>
<li><strong>Lines 127-131:</strong> This code handles drawing some diagnostic information to our 
			<span id="crayon-56d59190bede1194673649" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span> , such as the 
			<span id="crayon-56d59190bede8166040885" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">direction</span></span></span>  in which the object is moving along with the 
			<span id="crayon-56d59190bedef523824272" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dX</span></span></span>  and 
			<span id="crayon-56d59190bedf6366378764" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span>  deltas used to derive the 
			<span id="crayon-56d59190bedfd341992407" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">direction</span></span></span> , respectively.</li>
<li><strong>Lines 133-140:</strong> Display the 
			<span id="crayon-56d59190bee04336713948" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span>  to our screen and wait for a keypress. If the 
			<span id="crayon-56d59190bee0b857379135" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">q</span></span></span>  key is pressed, we’ll break from the 
			<span id="crayon-56d59190bee12364859664" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-st">while</span></span></span>  loop on <strong>Line 38</strong>.</li>
<li><strong>Lines 143 and 144:</strong> Cleanup our 
			<span id="crayon-56d59190bee1a803914822" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">camera</span></span></span>  pointer and close any open windows.</li>
</ul>
<h2>Testing out our object movement tracker</h2>
<p>Now that we have coded up a Python and OpenCV script to track object movement, let’s give it a try. Fire up a shell and execute the following command:</p>

		<div id="crayon-56d59190bee21605073654" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59190bee21605073654-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">object_movement</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">video </span><span class="crayon-v">object_tracking_example</span><span class="crayon-e">.mp4</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Below we can see an animation of the OpenCV tracking object movement script:</p>
<div id="attachment_3119" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_animated.gif"><img class="size-full wp-image-3119" src="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_animated.gif" alt="Figure 2: Successfully tracking the green ball as it's moving north."/></a><p class="wp-caption-text"><strong>Figure 2:</strong> Successfully tracking the green ball as it’s moving north.</p></div>
<p>However, let’s take a second to examine a few of the individual frames.</p>
<div id="attachment_3112" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_01.jpg"><img class="wp-image-3112" src="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_01.jpg" alt="Figure 3: Tracking object movement as the balls move north." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_01-300x197.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_01.jpg 1000w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 3:</strong> Tracking object movement as the balls move north.</p></div>
<p>From the above figure we can see that the green ball has been successfully detected and is moving <em>north</em>. The “north” direction was determined by examining the 
			<span id="crayon-56d59190bee29674518235" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dX</span></span></span>  and 
			<span id="crayon-56d59190bee31380458322" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span>  values (which are displayed at the bottom-left of the frame). Since |<em>dY| &gt; 20</em> we were able to determine there was a significant change in <em>y-</em>coordinates. The sign of 
			<span id="crayon-56d59190bee38710846122" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span>  is also positive, allowing us to determine the direction of movement is north.</p>
<div id="attachment_3114" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_02.jpg"><img class="wp-image-3114" src="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_02.jpg" alt="Figure 4: Using OpenCV to track object movement" srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_02-300x197.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_02.jpg 1000w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 4:</strong> Using OpenCV to track object movement</p></div>
<p>Again, <em>|dY| &gt; 20</em>, but this time the sign is negative, so we must be moving south.</p>
<div id="attachment_3115" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_03.jpg"><img class="wp-image-3115" src="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_03.jpg" alt="Figure 5: Tracking object movement." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_03-300x197.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_03.jpg 1000w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 5:</strong> Tracking object movement.</p></div>
<p>In the above image we can see that the ball is moving <em>east</em>. It may appear that the ball is moving west (to the left); however, keep in mind that our viewpoint is <em>reversed</em>, <em><strong>so my right is actually your left.</strong></em></p>
<div id="attachment_3116" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_04.jpg"><img class="wp-image-3116" src="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_04.jpg" alt="Figure 6: Tracking the object using OpenCV." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_04-300x197.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_04.jpg 1000w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 6:</strong> Tracking the object using OpenCV.</p></div>
<p>Just as we can track movements to the east, we can also track movements to the west.</p>
<div id="attachment_3117" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_05.jpg"><img class="wp-image-3117" src="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_05.jpg" alt="Figure 7: Diagonal object detection and tracking." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_05-300x197.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/09/track_object_result_05.jpg 1000w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 7:</strong> Diagonal object detection and tracking.</p></div>
<p>Moving across a diagonal is also not an issue. When both |<i>dX| &gt; 20</i> and <em>|dY| &gt; 20</em>, we know that the ball is moving across a diagonal.</p>
<p>You can see the full demo video here:</p>
<p><iframe src="http://www.youtube.com/embed/V9Hup-wImfA?feature=oembed" frameborder="0" allowfullscreen="">VIDEO</iframe></p>
<p>If you want the 
			<span id="crayon-56d59190bee43844039069" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">object_movement</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></span></span>  script to access your webcam stream rather than the supplied 
			<span id="crayon-56d59190bee4b382063231" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">object_tracking_example</span><span class="crayon-sy">.</span><span class="crayon-v">mp4</span></span></span>  video supplied in the code download of this post, simply omit the 
			<span id="crayon-56d59190bee53446817137" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-o">--</span><span class="crayon-v">video</span></span></span>  switch:</p>

		<div id="crayon-56d59190bee5a660783904" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59190bee5a660783904-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">object_movement</span><span class="crayon-e">.py</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h2>Summary</h2>
<p>In this blog post you learned about tracking object direction (not to mention, my childhood obsession with <i>Final Fantasy VII</i>).</p>
<p>This tutorial started as an extension to our previous article on <a href="http://www.pyimagesearch.com/2015/09/14/ball-tracking-with-opencv/" target="_blank">ball tracking</a>. While the ball tracking tutorial showed us the basics of <em>object detection and tracking</em>, we were unable to compute the actual <em>direction</em> the ball was moving. By simply computing the deltas between <em>(x, y)</em>-coordinates of the object in two separate frames, we were able to correctly track object movement and even report the direction it was moving.</p>
<p>We could make this object movement tracker <em>even more precise<strong> </strong></em>by reporting the actual <em><strong>angle of movement</strong></em> simply by taking the arctangent of 
			<span id="crayon-56d59190bee61399999373" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dX</span></span></span>  and 
			<span id="crayon-56d59190bee69701822414" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">dY</span></span></span>  respectively — but I’ll leave that as an exercise to you, the reader.</p>
<p>Be sure to download the code to this post and give it a try!</p>
<h2 id="post_downloads">Downloads:</h2>

	</section>
	</div></body></html>