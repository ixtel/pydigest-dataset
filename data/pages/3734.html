<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-django-favit" class="anchor" href="#django-favit" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>django-favit</h1>

<p>A simple reusable app for django that makes it easy to deal with faving
and unfaving any object from any application.</p>

<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>

<ul>
<li>Install django-favit in your vilrtual env:</li>
</ul>

<pre><code>pip install django-favit
</code></pre>

<ul>
<li>Add the app to your settings.py</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-c1">INSTALLED_APPS</span> <span class="pl-k">=</span> [
  <span class="pl-c1">...</span>
  <span class="pl-s"><span class="pl-pds">"</span>favit<span class="pl-pds">"</span></span>,
  <span class="pl-c1">...</span>
]</pre></div>

<ul>
<li>Add favit urls to your project's <code>urls.py</code> file:</li>
</ul>

<div class="highlight highlight-source-python"><pre>urlpatterns <span class="pl-k">=</span> patterns(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>,
  <span class="pl-c1">...</span>
  (<span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>favit/<span class="pl-pds">'</span></span>, include(<span class="pl-s"><span class="pl-pds">'</span>favit.urls<span class="pl-pds">'</span></span>)),
  <span class="pl-c1">...</span>
)</pre></div>



<pre><code>python manage.py syncdb
</code></pre>

<ul>
<li>Make sure you have jQuery ajax CSRF configuration right</li>
</ul>

<p>See <a href="https://docs.djangoproject.com/en/1.7/ref/contrib/csrf/#ajax">https://docs.djangoproject.com/en/1.7/ref/contrib/csrf/#ajax</a></p>

<h2><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Usage:</h2>

<h3><a id="user-content-template-tags" class="anchor" href="#template-tags" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Template tags:</h3>

<ul>
<li>Get the favorited objects for a given user:</li>
</ul>

<div class="highlight highlight-source-python"><pre>{<span class="pl-k">%</span> <span class="pl-k">with</span> user_favorites <span class="pl-k">&lt;</span>user<span class="pl-k">&gt;</span> <span class="pl-s"><span class="pl-pds">"</span>app_label.model<span class="pl-pds">"</span></span> <span class="pl-k">as</span> favorite_list <span class="pl-k">%</span>}
    {<span class="pl-k">%</span> <span class="pl-k">for</span> fav_obj <span class="pl-k">in</span> favorite_list <span class="pl-k">%</span>}
        {<span class="pl-c"># do something with fav_obj #}</span>
    {<span class="pl-k">%</span> endfor <span class="pl-k">%</span>}
{<span class="pl-k">%</span> endwith <span class="pl-k">%</span>}</pre></div>

<ul>
<li>Given an object <code>obj</code> you may show it fav count like this:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&lt;</span>p<span class="pl-k">&gt;</span>Favorite Count {{ obj<span class="pl-k">|</span>favorites_count }}<span class="pl-k">&lt;</span><span class="pl-k">/</span>p<span class="pl-k">&gt;</span></pre></div>

<ul>
<li>Get Favorite instance for an object (obj) and a user (user)</li>
</ul>

<div class="highlight highlight-source-python"><pre>{<span class="pl-k">%</span> <span class="pl-k">with</span> obj<span class="pl-k">|</span>get_favorite_for:user <span class="pl-k">as</span> fav_object <span class="pl-k">%</span>}
    <span class="pl-c1">...</span>
{<span class="pl-k">%</span> endwith <span class="pl-k">%</span>}</pre></div>

<ul>
<li>Favorite Button for an object <code>my_obj</code>:</li>
</ul>

<div class="highlight highlight-source-python"><pre>{<span class="pl-k">%</span> favorite_button my_obj <span class="pl-k">%</span>}</pre></div>

<h3><a id="user-content-favorites-manager" class="anchor" href="#favorites-manager" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Favorites Manager</h3>

<ul>
<li>Create a Favorite instance for a user and object:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> django.contrib.auth.models <span class="pl-k">import</span> User
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> music.models <span class="pl-k">import</span> Song
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user <span class="pl-k">=</span> User.objects.get(<span class="pl-v">username</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>jdoe<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> song <span class="pl-k">=</span> Song.objects.get(<span class="pl-v">pk</span><span class="pl-k">=</span><span class="pl-c1">1</span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> fav <span class="pl-k">=</span> Favorite.objects.create(user, song)</pre></div>

<pre><code>or:
</code></pre>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> fav <span class="pl-k">=</span> Favorite.objects.create(user, <span class="pl-c1">1</span>, Song)</pre></div>

<pre><code>or:
</code></pre>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> fav <span class="pl-k">=</span> Favorite.objects.create(user, <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>music.Song<span class="pl-pds">"</span></span>)</pre></div>

<ul>
<li>Get the objects favorited by a given user:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> django.contrib.auth.models <span class="pl-k">import</span> User
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user <span class="pl-k">=</span> User.objects.get(<span class="pl-v">username</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>jdoe<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> Favorite.objects.for_user(user)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> [<span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">1</span><span class="pl-k">&gt;</span>, <span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">2</span><span class="pl-k">&gt;</span>, <span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">3</span><span class="pl-k">&gt;</span>]</pre></div>

<ul>
<li>Now, get user favorited objects belonging to a given model:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> django.contrib.auth.models <span class="pl-k">import</span> User
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> music.models <span class="pl-k">import</span> Song
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user <span class="pl-k">=</span> User.objects.get(<span class="pl-v">username</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>jdoe<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> Favorite.objects.for_user(user, <span class="pl-v">model</span><span class="pl-k">=</span>Song)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> [<span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">1</span><span class="pl-k">&gt;</span>, <span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">2</span><span class="pl-k">&gt;</span>, <span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">3</span><span class="pl-k">&gt;</span>]</pre></div>

<ul>
<li>Get the favorited object instances of a given model favorited by any user:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> music.models <span class="pl-k">import</span> Song
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> Favorite.objects.for_model(Song)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> [<span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">1</span><span class="pl-k">&gt;</span>, <span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">2</span><span class="pl-k">&gt;</span>, <span class="pl-k">&lt;</span>Favorite: Favorite <span class="pl-c1">object</span> <span class="pl-c1">3</span><span class="pl-k">&gt;</span>]</pre></div>

<ul>
<li>Get a Favorite instance for a given object and user:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> django.contrib.auth.models <span class="pl-k">import</span> User
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> music.models <span class="pl-k">import</span> Song
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user <span class="pl-k">=</span> User.objects.get(<span class="pl-v">username</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>jdoe<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> song <span class="pl-k">=</span> Song.objects.get(<span class="pl-v">pk</span><span class="pl-k">=</span><span class="pl-c1">1</span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> fav <span class="pl-k">=</span> Favorite.objects.get_favorite(user, song)</pre></div>

<ul>
<li>Get all Favorite instances for a given object</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">from</span> music.models <span class="pl-k">import</span> Song
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> song <span class="pl-k">=</span> Song.objects.get(<span class="pl-v">pk</span><span class="pl-k">=</span><span class="pl-c1">1</span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> fav <span class="pl-k">=</span> Favorite.objects.for_object(song)</pre></div>
</article>
  </div></body></html>