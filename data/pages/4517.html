<html><body><div><div class="block-text">
					<p>We are excited to announce that we have published a major release of our Python HTTP library. We’re the first to admit that the previous version of the library didn’t get as much love as it should have. So, after attending PyCon 2015 and ahead of our sponsorship of <a href="http://2015.djangocon.eu/">DjangoCon</a>, we decided to finish off a version we’ve been working on for a while and are very pleased to ship v1. You can <a href="https://github.com/pusher/pusher-http-python">fork it on GitHub</a> and <code>pip install pusher</code> via <a href="https://pypi.python.org/pypi/pusher/">PyPI</a>.</p>
<p>There are a number of major differences from the previous version of the library (0.8), namely that the new version offers far more core interactions with our HTTP API. As well as <a href="https://pusher.com/docs/server_api_guide/interact_rest_api#publishing_events">triggering events</a> and <a href="https://pusher.com/docs/authenticating_users">authenticating private and presence channels subscriptions</a>, you are now able to:</p>

<p>This version of the library is now compatible with Python versions 2.6, 2.7 and 3.3. We’ve also spent some time making sure the docs are much more complete so the <a href="https://github.com/pusher/pusher-http-python/blob/master/README.md">Pusher Python HTTP library README</a> has been updated as have the <a href="https://pusher.com/docs">Pusher site docs</a>.</p>
<h2>What’s Changed?</h2>
<h3>Triggering Events</h3>
<p>Whereas in the previous version one would trigger events using the indexing operator (<code>pusher['channel_name'].trigger('event_name', payload</code>), one now passes the <code>channel_name</code> as an argument to the <code>Pusher::trigger</code> method.</p>
<pre><code class="language-python">from pusher import Pusher

pusher = Pusher(app_id=u'app_id', key=u'key', secret=u'secret')

pusher.trigger(u'a_channel', u'an_event', {u'some': u'data'})
</code></pre>
<p><code>Pusher::trigger</code> is documented <a href="https://github.com/pusher/pusher-http-python#triggering-events">here</a>.</p>
<h3>Querying Application State</h3>
<p>We’ve introduced a bunch of new methods for getting information from your Pusher channels. These are:</p>
<ul>
<li><code>Pusher::channels_info</code>: for getting information about all your channels.</li>
<li><code>Pusher::channel_info</code>: for getting information about a specific channel.</li>
<li><code>Pusher::users_info</code>: for getting information about users subscribed to a presence-channel.</li>
</ul>
<p>These methods are documented <a href="https://github.com/pusher/pusher-http-python#querying-application-state">here</a>.</p>
<h3>Authenticating Private- and Presence-Channels</h3>
<p>When authenticating <code>private-</code> or <code>presence-</code> channels you now use the <code>Pusher::authenticate</code> method instead of using the indexing operator we mentioned earlier. This example uses Flask to demonstrate how to authenticate private-channels:</p>
<pre><code class="language-python">@app.route("/pusher/auth", methods=['POST'])
def pusher_authentication():

  auth = pusher.authenticate(
    channel=request.form['channel_name'],
    socket_id=request.form['socket_id']
  )
  return json.dumps(auth)
</code></pre>
<p>For presence-channels, simply pass in a dictionary containing the user’s <code>user_id</code>, along with any optional <code>user_info</code>, to a <code>custom_data</code> field.</p>
<h3>Validating Webhooks</h3>
<p><code>Pusher::validate_webhook</code> can check that an incoming webhook is indeed from Pusher, and not from an unknown origin, as shown in this example:</p>
<pre><code class="language-python">@app.route("/webhook", methods=['POST'])
def pusher_webhook():
  webhook = pusher.validate_webhook(
    key=request.headers.get('X-Pusher-Key'),
    signature=request.headers.get('X-Pusher-Signature'),
    body=request.data
  )

  for event in webhook['events']:
    if event['name'] == "channel_occupied":
      print("Channel occupied: %s" % event["channel"])
    elif event['name'] == "channel_vacated":
      print("Channel vacated: %s" % event["channel"])

  return "ok"
</code></pre>
<p>Webhook validation is documented <a href="https://github.com/pusher/pusher-http-python#receiving-webhooks">here</a>.</p>
<h2>Contributing</h2>
<p>You can find out much more via <a href="http://github.com/pusher/pusher-http-python">the Github repo</a>. If you find anything lacking in the library, or room for improvement, please do send us a pull request!</p>
									</div>
</div></body></html>