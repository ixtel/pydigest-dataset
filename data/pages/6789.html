<html><body><div><div class="entry">
    

<p>Using this class as metaclass in baseclass, you can retrieve subclasses from baseclass. Below example is in python 3. For python 2 instead of <code>metaclass=Container</code> user <code>__metaclass__ = Container</code> inside class like a class variable.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">Container</span>


<span class="k">class</span> <span class="nc">Verb</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">Container</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># this is needed for admin interface to work</span>
        <span class="c"># for python 2 use `__unicode__`</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">None</span>

<span class="k">class</span> <span class="nc">Create</span><span class="p">(</span><span class="n">Verb</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"creating something"</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">SendEmail</span><span class="p">(</span><span class="n">Verb</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"sending email"</span><span class="p">)</span>


<span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">myapp.verbs</span> <span class="kn">import</span> <span class="n">Verb</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">Verb</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="s">'create'</span><span class="p">]</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">myapp</span><span class="o">.</span><span class="n">verbs</span><span class="o">.</span><span class="n">Create</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">Verb</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="s">'create'</span><span class="p">]()</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="n">creating</span> <span class="n">something</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">Verb</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="s">'sendemail'</span><span class="p">]()</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="n">sending</span> <span class="n">email</span></code></pre></div>

<p>It is also possible to use this baseclass like foriegn key to django model by using a custom django model field.</p>



<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">ContainerField</span>
<span class="kn">from</span> <span class="nn">.verbs</span> <span class="kn">import</span> <span class="n">Verb</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>


<span class="k">class</span> <span class="nc">UserVerb</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">)</span>
    <span class="n">verb</span> <span class="o">=</span> <span class="n">ContainerField</span><span class="p">(</span><span class="n">classvar</span><span class="o">=</span><span class="n">Verb</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">UserVerb</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">myapp.verbs</span> <span class="kn">import</span> <span class="n">Verb</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">4</span><span class="p">]:</span> <span class="n">me</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">5</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">myapp.verbs</span> <span class="kn">import</span> <span class="n">SendEmail</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="n">userverb</span> <span class="o">=</span> <span class="n">UserVerb</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">me</span><span class="p">,</span> <span class="n">verb</span><span class="o">=</span><span class="n">SendEmail</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="n">userverb</span> <span class="o">=</span> <span class="n">UserVerb</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">verb</span><span class="o">=</span><span class="n">SendEmail</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">8</span><span class="p">]:</span> <span class="n">userverb</span><span class="o">.</span><span class="n">verb</span><span class="p">()</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="n">sending</span> <span class="n">email</span></code></pre></div>

<p>Entire implementation is a little bizarre(or is it. I am not sure about that). I am thinking about implementing this in a project. Currently i am handling these situations by creating a new model for each baseclass to store name of each subclass and import that class by that name. This solution seems elegant than current one. Please share your thoughts and leave a comment. </p>

  </div>

  </div></body></html>