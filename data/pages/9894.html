<html><body><div><div class="section">
              <h1>mattermost_bot 1.0.13</h1>

              


<p>Simple bot for MatterMost</p><p>








[![PyPI](https://badge.fury.io/py/mattermost_bot.svg)](https://pypi.python.org/pypi/mattermost_bot)</p><p>[![Codacy](https://api.codacy.com/project/badge/grade/b06f3af1d8a04c6faa9a76a4ae3cb483)](https://www.codacy.com/app/gotlium/mattermost_bot)</p><p>[![Code Health](https://landscape.io/github/LPgenerator/mattermost_bot/master/landscape.svg?style=flat)](https://landscape.io/github/LPgenerator/mattermost_bot/master)</p><p>[![Downloads from PyPi](https://img.shields.io/pypi/dm/mattermost_bot.svg)](https://pypi.python.org/pypi/mattermost_bot/)</p><p>[![Python Support](https://img.shields.io/badge/python-2.7,3.5-blue.svg)](https://pypi.python.org/pypi/mattermost_bot/)</p><p>[![Mattermost](https://img.shields.io/badge/mattermost-1.4+-blue.svg)](http://www.mattermost.org)</p><p>[![License](https://img.shields.io/badge/license-MIT-green.svg)](https://pypi.python.org/pypi/mattermost_bot/)</p><p>Documentation available at [Read the Docs](http://mattermost-bot.readthedocs.org/)</p><p>## What's that</p><p>A chat bot for [Mattermost](http://www.mattermost.org).</p><p>## Features</p><p>* Based on MatterMost [WebSocket API](https://github.com/mattermost/platform)</p><p>* Simple plugins mechanism</p><p>* Messages can be handled concurrently</p><p>* Automatically reconnect to mattermost when connection is lost</p><p>* Python3 Support</p><p>* Mattermost &gt;= 1.x</p><p>## Installation</p><p>```</p><p>pip install mattermost_bot</p><p>```</p><p>## Usage</p><p>### Registration</p><p>First you need create the mattermost email/password for your bot.</p><p>### Configuration</p><p>Then you need to configure the `BOT_URL`, `BOT_LOGIN`, `BOT_PASSWORD`, `BOT_TEAM` in a python module</p><p>`mattermost_bot_settings.py`, which must be located in a python import path.</p><p>mattermost_bot_settings.py:</p><p>```python</p><p>BOT_URL = 'http://&lt;mm.example.com&gt;/api/v1'  # with 'http://' and with '/api/v1' path. without trailing slash</p><p>BOT_LOGIN = '&lt;bot-email-address&gt;'</p><p>BOT_PASSWORD = '&lt;bot-password&gt;'</p><p>BOT_TEAM = '&lt;your-team&gt;'  # possible in lowercase</p><p>```</p><p>Alternatively, you can use the environment variable `MATTERMOST_BOT_URL`,</p><p>`MATTERMOST_BOT_LOGIN`, `MATTERMOST_BOT_PASSWORD`, `MATTERMOST_BOT_TEAM`.</p><p>or `MATTERMOST_BOT_SETTINGS_MODULE` environment variable, which provide settings module</p><p>```bash</p><p>MATTERMOST_BOT_SETTINGS_MODULE=settings.bot_conf matterbot</p><p>```</p><p>### Run the bot</p><p>Use the built-in cli script and point to your custom settings file.</p><p>```bash</p><p>MATTERMOST_BOT_SETTINGS_MODULE=mattermost_bot_settings matterbot</p><p>```</p><p>or you can create your own startup file. For example `run.py`:</p><p>```python</p><p>from mattermost_bot.bot import Bot</p><p>if __name__ == "__main__":</p><p>    Bot().run()</p><p>```</p><p>Now you can talk to your bot in your mattermost client!</p><p>## Attachment Support</p><p>```python</p><p>from mattermost_bot.bot import respond_to</p><p>@respond_to('webapi')</p><p>def webapi_reply(message):</p><p>    attachments = [{</p><p>        'fallback': 'Fallback text',</p><p>        'author_name': 'Author',</p><p>        'author_link': 'http://www.github.com',</p><p>        'text': 'Some text here ...',</p><p>        'color': '#59afe1'</p><p>    }]</p><p>    message.reply_webapi(</p><p>        'Attachments example', attachments,</p><p>        username='Mattermost-Bot',</p><p>        icon_url='https://goo.gl/OF4DBq'</p><p>    )</p><p>    # Optional: Send message to specified channel</p><p>    # message.send_webapi('', attachments, channel_id=message.channel)</p><p>```</p><p>*Integrations must be allowed for non admins users.*</p><p>## Plugins</p><p>A chat bot is meaningless unless you can extend/customize it to fit your own use cases.</p><p>To write a new plugin, simply create a function decorated by `mattermost_bot.bot.respond_to` or `mattermost_bot.bot.listen_to`:</p><p>- A function decorated with `respond_to` is called when a message matching the pattern is sent to the bot (direct message or @botname in a channel/group chat)</p><p>- A function decorated with `listen_to` is called when a message matching the pattern is sent on a channel/group chat (not directly sent to the bot)</p><p>```python</p><p>import re</p><p>from mattermost_bot.bot import listen_to</p><p>from mattermost_bot.bot import respond_to</p><p>@respond_to('hi', re.IGNORECASE)</p><p>def hi(message):</p><p>    message.reply('I can understand hi or HI!')</p><p>@respond_to('I love you')</p><p>def love(message):</p><p>    message.reply('I love you too!')</p><p>@listen_to('Can someone help me?')</p><p>def help_me(message):</p><p>    # Message is replied to the sender (prefixed with @user)</p><p>    message.reply('Yes, I can!')</p><p>    # Message is sent on the channel</p><p>    # message.send('I can help everybody!')</p><p>```</p><p>To extract params from the message, you can use regular expression:</p><p>```python</p><p>from mattermost_bot.bot import respond_to</p><p>@respond_to('Give me (.*)')</p><p>def give_me(message, something):</p><p>    message.reply('Here is %s' % something)</p><p>```</p><p>If you would like to have a command like 'stats' and 'stats start_date end_date', you can create reg ex like so:</p><p>```python</p><p>from mattermost_bot.bot import respond_to</p><p>import re</p><p>@respond_to('stat$', re.IGNORECASE)</p><p>@respond_to('stat (.*) (.*)', re.IGNORECASE)</p><p>def stats(message, start_date=None, end_date=None):</p><p>    pass</p><p>```</p><p>And add the plugins module to `PLUGINS` list of mattermost_bot settings, e.g. mattermost_bot_settings.py:</p><p>```python</p><p>PLUGINS = [</p><p>    'mattermost_bot.plugins',</p><p>    'devops.plugins',          # e.g. git submodule: domain:devops-plugins.git</p><p>    'programmers.plugins',     # e.g. python package: package_name.plugins</p><p>    'frontend.plugins',        # e.g. project tree: apps.bot.plugins</p><p>]</p><p>```</p><p>*For example you can separate git repositories with plugins on your team.*</p><p>If you are migrating from `Slack` to the `Mattermost`, and previously you are used `SlackBot`,</p><p>you can use this battery without any problem. On most cases your plugins will be working properly</p><p>if you are used standard API or with minimal modifications.</p><p>Source based on [SlackBot](https://github.com/lins05/slackbot)

</p><a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>607</span> downloads in the last week
  </li>
  <li>
    <span>4978</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>