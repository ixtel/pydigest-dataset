<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-stellar---fast-database-snapshot-and-restore-tool-for-development" class="anchor" href="#stellar---fast-database-snapshot-and-restore-tool-for-development" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Stellar - Fast database snapshot and restore tool for development.</h1>

<p><a href="https://travis-ci.org/fastmonkeys/stellar"><img src="https://camo.githubusercontent.com/faeb48dcc2cd4f9b87508cf760d6a96e490a116d/68747470733a2f2f7472617669732d63692e6f72672f666173746d6f6e6b6579732f7374656c6c61722e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/fastmonkeys/stellar.svg?branch=master"/></a> 
<a href="https://camo.githubusercontent.com/622cfdf3a3416b323111f642580c33635601acfe/687474703a2f2f696d672e736869656c64732e696f2f707970692f646d2f7374656c6c61722e737667" target="_blank"><img src="https://camo.githubusercontent.com/622cfdf3a3416b323111f642580c33635601acfe/687474703a2f2f696d672e736869656c64732e696f2f707970692f646d2f7374656c6c61722e737667" alt="" data-canonical-src="http://img.shields.io/pypi/dm/stellar.svg"/></a> 
<a href="https://camo.githubusercontent.com/13df61d58f457fbb8ec8a2c45753072d27b7bd08/687474703a2f2f696d672e736869656c64732e696f2f707970692f762f7374656c6c61722e737667" target="_blank"><img src="https://camo.githubusercontent.com/13df61d58f457fbb8ec8a2c45753072d27b7bd08/687474703a2f2f696d672e736869656c64732e696f2f707970692f762f7374656c6c61722e737667" alt="" data-canonical-src="http://img.shields.io/pypi/v/stellar.svg"/></a></p>

<p>Stellar allows you to quickly restore database when you are e.g. writing database migrations, switching branches or messing with SQL. PostgreSQL and MySQL (partially) are supported.</p>

<p><a href="https://camo.githubusercontent.com/e517f68a73f7f9bb95e2dad6d599e01f6cb04023/687474703a2f2f696d6775722e636f6d2f306658586463782e706e67" target="_blank"><img src="https://camo.githubusercontent.com/e517f68a73f7f9bb95e2dad6d599e01f6cb04023/687474703a2f2f696d6775722e636f6d2f306658586463782e706e67" alt="Screenshot of Stellar terminal window" data-canonical-src="http://imgur.com/0fXXdcx.png"/></a></p>

<h2><a id="user-content-benchmarks" class="anchor" href="#benchmarks" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Benchmarks</h2>

<p>Stellar is fast. It can restore a database ~140 times faster than using the usual
pg_dump &amp; pg_restore.</p>

<p><a href="https://camo.githubusercontent.com/01dee1f1a9da7d11445327fac3111ee41b5aa309/687474703a2f2f696d6775722e636f6d2f4d6431414858612e706e67" target="_blank"><img src="https://camo.githubusercontent.com/01dee1f1a9da7d11445327fac3111ee41b5aa309/687474703a2f2f696d6775722e636f6d2f4d6431414858612e706e67" alt="Benchmarking database restore speed" data-canonical-src="http://imgur.com/Md1AHXa.png"/></a></p>

<h2><a id="user-content-how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How it works</h2>

<p>Stellar works by storing copies of the database in the RDBMS (named as stellar_xxx_master and stellar_xxxx_slave). When restoring the database, Stellar simply renames the database making it lot faster than the usual SQL dump. However, Stellar uses lots of storage space so you probably don't want to make too many snapshots or you will eventually run out of storage space.</p>

<p><strong>Warning: Please don't use Stellar if you can't afford data loss.</strong> It's great for developing but not meant for production.</p>

<h2><a id="user-content-how-to-get-started" class="anchor" href="#how-to-get-started" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How to get started</h2>

<p>You can install Stellar with <code>pip</code>.</p>

<p><code>$ pip install stellar</code></p>

<p>After that, you should go to your project folder and initialize Stellar settings. Stellar initialization wizard will help you with that.</p>

<p><code>$ stellar init</code></p>

<p>Stellar settings are saved as 'stellar.yaml' so you probably want to add that to your <code>.gitignore</code>.</p>

<p><code>$ echo stellar.yaml &gt;&gt; .gitignore</code></p>

<p>Done! <img class="emoji" title=":dancers:" alt=":dancers:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f46f.png" align="absmiddle"/></p>

<h2><a id="user-content-how-to-take-a-snapshot" class="anchor" href="#how-to-take-a-snapshot" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How to take a snapshot</h2>

<p><code>$ stellar snapshot SNAPSHOT_NAME</code></p>

<h2><a id="user-content-how-to-restore-from-a-snapshot" class="anchor" href="#how-to-restore-from-a-snapshot" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How to restore from a snapshot</h2>

<p><code>$ stellar restore SNAPSHOT_NAME</code></p>

<h2><a id="user-content-common-issues" class="anchor" href="#common-issues" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Common issues</h2>

<pre><code>sqlalchemy.exc.OperationalError: (OperationalError) (1044, u"Access denied for user 'my_db_username'@'localhost' to database 'stellar_data'") "CREATE DATABASE stellar_data CHARACTER SET = 'utf8'" ()
</code></pre>

<p>Make sure you have the rights to create new databases. See <a href="https://github.com/fastmonkeys/stellar/issues/10">Issue 10</a> for discussion</p>

<p>If you are using PostreSQL, make sure you have a database that is named the same as the unix username. You can test this by running just <code>psql</code>. (See <a href="https://github.com/fastmonkeys/stellar/issues/44">issue #44</a> for details)</p>
</article>
  </div></body></html>