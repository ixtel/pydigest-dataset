<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-pb" class="anchor" href="#pb" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>pb</h1>
<p><code>pb</code> is a lightweight pastebin (and url shortener) built using
<a href="http://flask.pocoo.org/docs/0.10/quickstart/">flask</a>.</p>
<p>The official instance of <code>pb</code> can be found at <a href="https://ptpb.pw">ptpb.pw</a>. Feel free to deploy <code>pb</code> elsewhere.</p>
<a name="user-content-requirements"/>
<h2><a id="user-content-requirements" class="anchor" href="#requirements" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Requirements</h2>

<a name="user-content-deployment"/>
<h2><a id="user-content-deployment" class="anchor" href="#deployment" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Deployment</h2>
<p>This assumes you have at least a working <code>python</code> and <code>mongodb</code> with
versions strictly matching the the above. Consult your distribution's
documentation on how to do that.</p>
<p>Start by <a href="http://git-scm.com/docs/git-clone">cloning</a> <code>pb</code>:</p>
<div class="highlight highlight-text-shell-session"><pre>$ <span class="pl-s1">git clone https://github.com/silverp1/pb.git --recursive</span></pre></div>
<p>Next, copy <code>pb/config.yaml.example</code> to <code>~/.config/pb/config.yaml</code>,
and edit it appropriately. For development, its configuration might
look something like:</p>
<div class="highlight highlight-source-yaml"><pre><span class="pl-s"><span class="pl-ent">DEBUG:</span> <span class="pl-s">true</span></span>

<span class="pl-s"><span class="pl-ent">MONGO:</span></span>
  <span class="pl-s"><span class="pl-ent">host:</span> <span class="pl-s">localhost</span></span>
  <span class="pl-c1"><span class="pl-ent">port:</span> 27017</span>

<span class="pl-s"><span class="pl-ent">MONGO_DATABASE:</span> <span class="pl-s">pb</span></span></pre></div>
<p>You'll also need to build <code>pbs</code>, which requires
<code>grunt-cli</code>:</p>
<div class="highlight highlight-text-shell-session"><pre># <span class="pl-s1">npm install -g grunt-cli</span>
$ <span class="pl-s1">npm install</span>
$ <span class="pl-s1">grunt</span></pre></div>
<p>A <code>pb</code> development <a href="https://virtualenv.pypa.io/en/latest/virtualenv.html#usage">environment</a> could
be created with something like:</p>
<div class="highlight highlight-text-shell-session"><pre>$ <span class="pl-s1">pip install virtualenv</span>
$ <span class="pl-s1">virtualenv pbenv</span>
$ <span class="pl-s1"><span class="pl-c1">source</span> pbenv/bin/activate</span>
<span class="pl-e">(pbenv)</span>$ <span class="pl-s1">pip install -r pb/requirements.txt</span></pre></div>
<p>You should use <code>runonce.py</code> to create indexes before you run <code>pb</code>
for the first time on a new database:</p>
<div class="highlight highlight-text-shell-session"><pre><span class="pl-e">(pbenv)</span>$ <span class="pl-s1"><span class="pl-c1">cd</span> pb</span>
<span class="pl-e">(pbenv)</span>$ <span class="pl-s1">./runonce.py</span></pre></div>
<p>You can then start a <code>pb</code> instance via werkzeug's built-in <a href="http://werkzeug.pocoo.org/docs/0.9/serving/">WSGI
server</a>.</p>

<a name="user-content-packaging"/>
<h2><a id="user-content-packaging" class="anchor" href="#packaging" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Packaging</h2>
<p><strong>Arch Linux</strong></p>
<p><code>pb-git</code> is available in the <a href="https://aur.archlinux.org/packages/pb-git">AUR</a>. This package provides
<code>pb.service</code> which starts a uwsgi server on port <code>8080</code> by
default.</p>
<p>For now this requires <code>aur/python-flask-git</code>, until 1.0 is released
upstream:</p>
<div class="highlight highlight-text-shell-session"><pre>$ <span class="pl-s1">cower -dd pb-git</span>
$ <span class="pl-s1">(<span class="pl-c1">cd</span> python-flask-git <span class="pl-k">&amp;&amp;</span> makepkg -si)</span>
$ <span class="pl-s1">(<span class="pl-c1">cd</span> pb-git <span class="pl-k">&amp;&amp;</span> makepkg -si)</span></pre></div>
<p>Next, start <code>pb</code> with:</p>

<p>You can play with pb's uwsgi configuration in <code>/etc/uwsgi/pb.ini</code>.</p>

</article>
  </div></body></html>