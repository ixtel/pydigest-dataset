<html><body><div><div class="content-body" itemprop="text articleBody">
	<div class="section" id="introduction">
<h2>Introduction</h2>
<p>This is the second <a class="reference external" href="http://pbpython.com/pandas-google-forms-part1.html">article</a> in a series describing how to use <a class="reference external" href="https://www.google.com/forms/about/">Google Forms</a> to
collect information via simple web forms, read it into a pandas dataframe and
analyze it. This article will focus on how to use the data in the dataframe to
create complex and powerful data visualizations with <a class="reference external" href="http://stanford.edu/~mwaskom/software/seaborn/">seaborn</a>.</p>
<p>If you have not read the previous <a class="reference external" href="http://pbpython.com/pandas-google-forms-part1.html">article</a> please give it a quick glance so
you understand the background. To give you an idea of what this article will cover,
here is a snapshot of the images we will be creating:</p>

</div>
<div class="section" id="a-word-about-seaborn">
<h2>A Word About Seaborn</h2>
<p>Before getting too deep into the article, I think it is important to give a
quick word about seaborn. The <a class="reference external" href="http://stanford.edu/~mwaskom/software/seaborn/introduction.html">seaborn introduction</a> gives more details,
including this section:</p>
<blockquote class="pull-quote">
Seaborn aims to make visualization a central part of exploring and understanding
data. The plotting functions operate on dataframes and arrays containing a
whole dataset and internally perform the necessary aggregation and statistical
model-fitting to produce informative plots. Seaborn’s goals are similar to
those of R’s ggplot, but it takes a different approach with an imperative
and object-oriented style that tries to make it straightforward to construct
sophisticated plots. If matplotlib “tries to make easy things easy and hard
things possible”, seaborn aims to make a well-defined set of hard things easy too.</blockquote>
<p>If, like me, your primary exposure to visualization tools is Excel, then this
mindset is a bit foreign. As I work with seaborn, I sometimes fight with it when
I try to treat it like creating an Excel chart. However, once I started to produce
some impressive plots with seaborn, I started to “get it.” There is no doubt I am still learning.
One thing I have found, though, is that if you are in a business setting where
everyone sees the normal (boring) Excel charts, they will think you’re a genius
once you show them some of the output from seaborn!</p>
<p>The rest of this article will discuss how to visualize the survey results with
seaborn and use the complex visualization to gain insights into the data.</p>
</div>
<div class="section" id="wrangling-the-data">
<h2>Wrangling the Data</h2>
<p>In addition to this article, a more detail notebook is hosted in the <a class="reference external" href="https://github.com/chris1610/pbpython/blob/master/notebooks/Google-Forms-Data-Analysis.ipynb">github repo</a>.</p>
<p>Here is the relevant code to connect to the google form and create the dataframe:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">gspread</span>
<span class="kn">from</span> <span class="nn">oauth2client.client</span> <span class="kn">import</span> <span class="n">SignedJwtAssertionCredentials</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="kn">as</span> <span class="nn">sns</span>

<span class="n">SCOPE</span> <span class="o">=</span> <span class="p">[</span><span class="s">"https://spreadsheets.google.com/feeds"</span><span class="p">]</span>
<span class="n">SECRETS_FILE</span> <span class="o">=</span> <span class="s">"Pbpython-key.json"</span>
<span class="n">SPREADSHEET</span> <span class="o">=</span> <span class="s">"PBPython User Survey (Responses)"</span>
<span class="c"># Based on docs here - http://gspread.readthedocs.org/en/latest/oauth2.html</span>
<span class="c"># Load in the secret JSON key (must be a service account)</span>
<span class="n">json_key</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">SECRETS_FILE</span><span class="p">))</span>
<span class="c"># Authenticate using the signed key</span>
<span class="n">credentials</span> <span class="o">=</span> <span class="n">SignedJwtAssertionCredentials</span><span class="p">(</span><span class="n">json_key</span><span class="p">[</span><span class="s">'client_email'</span><span class="p">],</span>
                                            <span class="n">json_key</span><span class="p">[</span><span class="s">'private_key'</span><span class="p">],</span> <span class="n">SCOPE</span><span class="p">)</span>
<span class="n">gc</span> <span class="o">=</span> <span class="n">gspread</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="n">credentials</span><span class="p">)</span>
<span class="c"># Open up the workbook based on the spreadsheet name</span>
<span class="n">workbook</span> <span class="o">=</span> <span class="n">gc</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">SPREADSHEET</span><span class="p">)</span>
<span class="c"># Get the first sheet</span>
<span class="n">sheet</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="n">sheet1</span>
<span class="c"># Extract all data into a dataframe</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">sheet</span><span class="o">.</span><span class="n">get_all_records</span><span class="p">())</span>
</pre></div>
<p>Please refer to the <a class="reference external" href="https://github.com/chris1610/pbpython/blob/master/notebooks/Google-Forms-Data-Analysis.ipynb">notebook</a> for some more details on what the data looks like.</p>
<p>Since the column names are so long, let’s clean those up and and convert the
timestamp to a date time.</p>
<div class="highlight"><pre><span class="c"># Do some minor cleanups on the data</span>
<span class="c"># Rename the columns to make it easier to manipulate</span>
<span class="c"># The data comes in through a dictionary so we can not assume order stays the</span>
<span class="c"># same so must name each column</span>
<span class="n">column_names</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Timestamp'</span><span class="p">:</span> <span class="s">'timestamp'</span><span class="p">,</span>
                <span class="s">'What version of python would you like to see used for the examples on the site?'</span><span class="p">:</span> <span class="s">'version'</span><span class="p">,</span>
                <span class="s">'How useful is the content on practical business python?'</span><span class="p">:</span> <span class="s">'useful'</span><span class="p">,</span>
                <span class="s">'What suggestions do you have for future content?'</span><span class="p">:</span> <span class="s">'suggestions'</span><span class="p">,</span>
                <span class="s">'How frequently do you use the following tools? [Python]'</span><span class="p">:</span> <span class="s">'freq-py'</span><span class="p">,</span>
                <span class="s">'How frequently do you use the following tools? [SQL]'</span><span class="p">:</span> <span class="s">'freq-sql'</span><span class="p">,</span>
                <span class="s">'How frequently do you use the following tools? [R]'</span><span class="p">:</span> <span class="s">'freq-r'</span><span class="p">,</span>
                <span class="s">'How frequently do you use the following tools? [Javascript]'</span><span class="p">:</span> <span class="s">'freq-js'</span><span class="p">,</span>
                <span class="s">'How frequently do you use the following tools? [VBA]'</span><span class="p">:</span> <span class="s">'freq-vba'</span><span class="p">,</span>
                <span class="s">'How frequently do you use the following tools? [Ruby]'</span><span class="p">:</span> <span class="s">'freq-ruby'</span><span class="p">,</span>
                <span class="s">'Which OS do you use most frequently?'</span><span class="p">:</span> <span class="s">'os'</span><span class="p">,</span>
                <span class="s">'Which python distribution do you primarily use?'</span><span class="p">:</span> <span class="s">'distro'</span><span class="p">,</span>
                <span class="s">'How would you like to be notified about new articles on this site?'</span><span class="p">:</span> <span class="s">'notify'</span>
                <span class="p">}</span>
<span class="n">results</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">column_names</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">results</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span>
</pre></div>
<p>The basic data is a little easier to work with now.</p>
</div>
<div class="section" id="looking-at-the-suggestions">
<h2>Looking at the Suggestions</h2>
<p>The first thing we’ll look at is the free form suggestions. Since there are only
a small number of free form comments, let’s strip those out and remove them from the results.</p>
<div class="highlight"><pre><span class="n">suggestions</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">results</span><span class="o">.</span><span class="n">suggestions</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">len</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">][</span><span class="s">"suggestions"</span><span class="p">]</span>
</pre></div>
<p>Since there are only a small number of comments, just print them out.
However, if we had more comments and wanted to do more analysis we
certainly could. I’m using <code class="code">
display</code>
 for the purposes of formatting the
output for the notebook.</p>
<div class="highlight"><pre><span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">suggestions</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
    <span class="n">display</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>
<pre class="literal-block">
A bit more coverage on how to make presentations - which in a lot of corporations just means powerpoint slides with python, from a business analyst perspective, of course
Add some other authors to the website which can publish equally relevant content. Would  be nice to see more frequent updates if possible, keep up the good work!
How to produce graphics using Python, Google Forms.
Awesome site - keep up the good work
Great job on the site.  Nice to see someone writing about actual Python use cases. So much writing is done elsewhere about software development without the connection to actual business work.
</pre>
<p>Drop the suggestions. We won’t use them any more.</p>
<div class="highlight"><pre><span class="n">results</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s">"suggestions"</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
<p>I do think it is interesting that several suggestions relate to graphics/presentations
so hopefully this article will be helpful.</p>
</div>
<div class="section" id="explore-the-data">
<h2>Explore the Data</h2>
<p>Before we start plotting anything, let’s see what the data tells us:</p>

<div class="table-responsive">
<table border="1" class="table table-condensed">
<thead>
<tr>
<th/>
<th>useful</th>
</tr>
</thead>
<tbody>
<tr>
<th>count</th>
<td>53.000000</td>
</tr>
<tr>
<th>mean</th>
<td>2.037736</td>
</tr>
<tr>
<th>std</th>
<td>0.783539</td>
</tr>
<tr>
<th>min</th>
<td>1.000000</td>
</tr>
<tr>
<th>25%</th>
<td>1.000000</td>
</tr>
<tr>
<th>50%</th>
<td>2.000000</td>
</tr>
<tr>
<th>75%</th>
<td>3.000000</td>
</tr>
<tr>
<th>max</th>
<td>3.000000</td>
</tr>
</tbody>
</table>
</div><p>Because we only have 1, 2, 3 as options the numeric results aren’t
telling us that much. I am going to convert the number to more useful
descriptions using <code class="code">
map</code>
. This change will be useful when we plot the data.</p>
<div class="highlight"><pre><span class="n">results</span><span class="p">[</span><span class="s">'useful'</span><span class="p">]</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="s">'useful'</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span> <span class="s">'1-low'</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="s">'2-medium'</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="s">'3-high'</span><span class="p">})</span>
<span class="n">results</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
<p>Value counts give us an easy distribution view into the raw numbers.</p>
<div class="highlight"><pre><span class="n">results</span><span class="p">[</span><span class="s">"version"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
<pre class="literal-block">
2.7             22
3.4+            18
I don't care    13
dtype: int64
</pre>
<p>Use <code class="code">
normalize</code>
 to see it by percentage.</p>
<div class="highlight"><pre><span class="n">results</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
<pre class="literal-block">
Linux      0.377358
Windows    0.358491
Mac        0.264151
dtype: float64
</pre>
<p>While the numbers are useful, wouldn’t it be nicer to visually show the results?</p>
<p>Seaborn’s <a class="reference external" href="http://stanford.edu/~mwaskom/software/seaborn/generated/seaborn.factorplot.html">factorplot</a>
is helpful for showing this kind of categorical data.</p>
<p>Because factorplot is so powerful, I’ll build up step by step to show
how it can be used for complex data analysis.</p>
<p>First, look at number of users by <span class="caps">OS</span>.</p>
<div class="highlight"><pre><span class="n">sns</span><span class="o">.</span><span class="n">factorplot</span><span class="p">(</span><span class="s">"os"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s">"BuPu"</span><span class="p">)</span>
</pre></div>

<p>It is easy to order the results using <code class="code">
x_order</code>
</p>
<div class="highlight"><pre><span class="n">sns</span><span class="o">.</span><span class="n">factorplot</span><span class="p">(</span><span class="s">"os"</span><span class="p">,</span> <span class="n">x_order</span><span class="o">=</span><span class="p">[</span><span class="s">"Linux"</span><span class="p">,</span> <span class="s">"Windows"</span><span class="p">,</span> <span class="s">"Mac"</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s">"BuPu"</span><span class="p">)</span>
</pre></div>

<p>This is useful but wouldn’t it be better to compare with <span class="caps">OS</span> and preferred python
version? This is where factorplot starts to show more versatility. The key
component is to use <code class="code">
hue</code>
 to automatically slice the data by python version (in this case).</p>
<div class="highlight"><pre><span class="n">sns</span><span class="o">.</span><span class="n">factorplot</span><span class="p">(</span><span class="s">"os"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s">"version"</span><span class="p">,</span> <span class="n">x_order</span><span class="o">=</span><span class="p">[</span><span class="s">"Linux"</span><span class="p">,</span> <span class="s">"Windows"</span><span class="p">,</span> <span class="s">"Mac"</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s">"Paired"</span><span class="p">)</span>
</pre></div>

<p>Because seaborn knows how to work with dataframes, we just need to pass in the column
names for the various arguments and it will do the analysis and presentation.</p>
<p>How about if we try to see if there is any relationship between how useful the site
is and <span class="caps">OS</span>/Python choice? We can add the useful column into the plot using <code class="code">
col</code>
.</p>
<div class="highlight"><pre><span class="n">sns</span><span class="o">.</span><span class="n">factorplot</span><span class="p">(</span><span class="s">"version"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s">"os"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s">"useful"</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s">"Paired"</span><span class="p">)</span>
</pre></div>

<div class="panel panel-info">
<p class="panel-heading">
Image sharpness</p>
<p class="panel-body">
Images have been resized for the article. The originals look sharp and are easier to read.</p>
</div>
<p>The final view will include layering in the Anaconda and Official python.org binaries.
I have cleaned up the data and filtered the results to include only these two distros:</p>
<div class="highlight"><pre><span class="n">results_distro</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">results</span><span class="p">[</span><span class="s">"distro"</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s">"Anaconda"</span><span class="p">,</span> <span class="s">"Official python.org binaries"</span><span class="p">])]</span>
</pre></div>
<p>Now do the factor plot showing multiple columns and rows of data using <code class="code">
row</code>
 and <code class="code">
col</code>
</p>
<div class="highlight"><pre><span class="n">sns</span><span class="o">.</span><span class="n">factorplot</span><span class="p">(</span><span class="s">"version"</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s">"os"</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">results_distro</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s">"useful"</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="s">"distro"</span><span class="p">,</span> <span class="n">margin_titles</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>

<p>Once you get used to how to use factorplots, I think you will really be impressed with
their versatility and power. You probably also noticed that I used different
palettes in the graphs. I did this on purpose to show how much change can be
made by tweaking and changing the palettes.</p>
</div>
<div class="section" id="response-over-time">
<h2>Response Over Time</h2>
<p>Another useful view into the data is looking at the responses over time.</p>
<p>The seaborn’s
<a class="reference external" href="http://stanford.edu/~mwaskom/software/seaborn/generated/seaborn.tsplot.html">timeseries</a>
supports this type of analysis and much more.</p>
<p>For ease of calculating responses over time, add a count colum for each
response and set the timestamp as our index.</p>
<div class="highlight"><pre><span class="n">results</span><span class="p">[</span><span class="s">"count"</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">total_results</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">'timestamp'</span><span class="p">)</span>
</pre></div>
<p>The magic happens by using <code class="code">
TimeGrouper</code>
 to group by day. We can easily
group by any arbirtray time period using this code:</p>
<div class="highlight"><pre><span class="n">running_results</span> <span class="o">=</span> <span class="n">total_results</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">TimeGrouper</span><span class="p">(</span><span class="s">'D'</span><span class="p">))[</span><span class="s">"count"</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>
<span class="n">running_results</span>
</pre></div>
<pre class="literal-block">
timestamp
2015-06-09     1
2015-06-10    17
2015-06-11    22
2015-06-12    26
2015-06-13    27
2015-06-14    30
2015-06-15    33
2015-06-16    34
2015-06-17    35
2015-06-18    41
2015-06-19    46
2015-06-20    49
2015-06-21    49
2015-06-22    50
2015-06-23    51
2015-06-24    52
2015-06-25    52
2015-06-26    53
Freq: D, Name: count, dtype: int64
</pre>
<p>To label the x-axis we need to define our time range as a series from 0 to the max
number of days.</p>
<div class="highlight"><pre><span class="n">step</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">running_results</span><span class="p">)),</span> <span class="n">name</span><span class="o">=</span><span class="s">"Days"</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">tsplot</span><span class="p">(</span><span class="n">running_results</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">"Total Responses"</span><span class="p">,</span> <span class="n">time</span><span class="o">=</span><span class="n">step</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">"husl"</span><span class="p">)</span>
</pre></div>

<p>Seaborn timeseries are really meant to do so much more but this was a simple view
of how it could be applied to this case. It is pretty clear that responses jumped
up when the article was published then again when it was re-tweeted by others.</p>
</div>
<div class="section" id="heatmaps-and-clustermaps">
<h2>Heatmaps and Clustermaps</h2>
<p>The final section of data to analyze is the frequency readers are using
different technology. I am going to use a
<a class="reference external" href="http://stanford.edu/~mwaskom/software/seaborn/generated/seaborn.heatmap.html">heatmap</a>
to look for any interesting insights. This is a really useful plot that is not that
commonly used in an environment where Excel rules the data presentation space.</p>
<p>Let’s look at the data again. The trick is going to be getting it formatted in the
table structure that heatmap expects.</p>
<pre class="code python literal-block">
<span class="n">results</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>
<div>
<table border="1" class="table table-condensed">
<thead>
<tr>
<th/>
<th>freq-js</th>
<th>freq-py</th>
<th>freq-r</th>
<th>freq-ruby</th>
<th>freq-sql</th>
<th>freq-vba</th>
<th>useful</th>
<th>notify</th>
<th>timestamp</th>
<th>version</th>
<th>os</th>
<th>distro</th>
<th>count</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>Once a month</td>
<td>A couple times a week</td>
<td>Infrequently</td>
<td>Never</td>
<td>Once a month</td>
<td>Never</td>
<td>3-high</td>
<td><span class="caps">RSS</span></td>
<td>2015-06-09 23:22:43</td>
<td>2.7</td>
<td>Mac</td>
<td>Included with <span class="caps">OS</span> - Mac</td>
<td>1</td>
</tr>
<tr>
<th>1</th>
<td>Once a month</td>
<td>Daily</td>
<td>A couple times a week</td>
<td>Never</td>
<td>Infrequently</td>
<td>Infrequently</td>
<td>3-high</td>
<td>Reddit</td>
<td>2015-06-10 01:19:08</td>
<td>2.7</td>
<td>Windows</td>
<td>Anaconda</td>
<td>1</td>
</tr>
<tr>
<th>2</th>
<td>Infrequently</td>
<td>Daily</td>
<td>Once a month</td>
<td>Never</td>
<td>Daily</td>
<td>Never</td>
<td>2-medium</td>
<td>Planet Python</td>
<td>2015-06-10 01:40:29</td>
<td>3.4+</td>
<td>Windows</td>
<td>Official python.org binaries</td>
<td>1</td>
</tr>
<tr>
<th>3</th>
<td>Never</td>
<td>Daily</td>
<td>Once a month</td>
<td>Never</td>
<td>A couple times a week</td>
<td>Once a month</td>
<td>3-high</td>
<td>Planet Python</td>
<td>2015-06-10 01:55:46</td>
<td>2.7</td>
<td>Mac</td>
<td>Official python.org binaries</td>
<td>1</td>
</tr>
<tr>
<th>4</th>
<td>Once a month</td>
<td>Daily</td>
<td>Infrequently</td>
<td>Infrequently</td>
<td>Once a month</td>
<td>Never</td>
<td>3-high</td>
<td>Leave me alone - I will find it if I need it</td>
<td>2015-06-10 04:10:17</td>
<td>I don’t care</td>
<td>Mac</td>
<td>Anaconda</td>
<td>1</td>
</tr>
</tbody>
</table>
</div><p>Break the data down to see an example of the distribution:</p>
<div class="highlight"><pre><span class="n">results</span><span class="p">[</span><span class="s">"freq-py"</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
<pre class="literal-block">
Daily                    34
A couple times a week    15
Once a month              3
                          1
dtype: int64
</pre>
<p>What we need to do is construct a single DataFrame with all the
<code class="code">
value_counts</code>
 for the specific technology. First we will create a list
containing each value count.</p>
<div class="highlight"><pre><span class="n">all_counts</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">tech</span> <span class="ow">in</span> <span class="p">[</span><span class="s">"freq-py"</span><span class="p">,</span> <span class="s">"freq-sql"</span><span class="p">,</span> <span class="s">"freq-r"</span><span class="p">,</span> <span class="s">"freq-ruby"</span><span class="p">,</span> <span class="s">"freq-js"</span><span class="p">,</span> <span class="s">"freq-vba"</span><span class="p">]:</span>
    <span class="n">all_counts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">tech</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">all_counts</span><span class="p">)</span>
</pre></div>
<pre class="literal-block">
[Daily                    34
 A couple times a week    15
 Once a month              3
                           1
 dtype: int64, A couple times a week    17
 Infrequently             13
 Daily                    12
 Never                     5
 Once a month              4
                           2
 dtype: int64, Never                    23
 Infrequently             15
 Once a month              5
 Daily                     4
                           3
 A couple times a week     3
 dtype: int64, Never           44
 Infrequently     6
                  2
 Once a month     1
 dtype: int64, Never                    18
 Once a month             15
 Infrequently             11
 Daily                     5
 A couple times a week     3
                           1
 dtype: int64, Never           37
 Infrequently     6
 Once a month     5
 Daily            3
                  2
 dtype: int64]
</pre>
<p>Now, concat the lists along axis=1 and fill in any nan values with 0.</p>
<div class="highlight"><pre><span class="n">tech_usage</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">all_counts</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s">"Python"</span><span class="p">,</span> <span class="s">"SQL"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">,</span> <span class="s">"Ruby"</span><span class="p">,</span> <span class="s">"javascript"</span><span class="p">,</span> <span class="s">"VBA"</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">tech_usage</span> <span class="o">=</span> <span class="n">tech_usage</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">tech_usage</span>
</pre></div>
<div>
<table border="1" class="table table-condensed">
<thead>
<tr>
<th/>
<th>Python</th>
<th><span class="caps">SQL</span></th>
<th>R</th>
<th>Ruby</th>
<th>javascript</th>
<th><span class="caps">VBA</span></th>
</tr>
</thead>
<tbody>
<tr>
<th/>
<td>1</td>
<td>2</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<th>A couple times a week</th>
<td>15</td>
<td>17</td>
<td>3</td>
<td>0</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<th>Daily</th>
<td>34</td>
<td>12</td>
<td>4</td>
<td>0</td>
<td>5</td>
<td>3</td>
</tr>
<tr>
<th>Infrequently</th>
<td>0</td>
<td>13</td>
<td>15</td>
<td>6</td>
<td>11</td>
<td>6</td>
</tr>
<tr>
<th>Never</th>
<td>0</td>
<td>5</td>
<td>23</td>
<td>44</td>
<td>18</td>
<td>37</td>
</tr>
<tr>
<th>Once a month</th>
<td>3</td>
<td>4</td>
<td>5</td>
<td>1</td>
<td>15</td>
<td>5</td>
</tr>
</tbody>
</table>
</div><p>We have a nice table but there are a few problems.</p>
<p>First, we have one column with blank values that we don’t want.</p>
<p>Secondly, we would like to order from Daily -&gt; Never. Use <code class="code">
reindex</code>
 to
accomplish both tasks.</p>
<pre class="code python literal-block">
<span class="n">tech_usage</span> <span class="o">=</span> <span class="n">tech_usage</span><span class="o">.</span><span class="n">reindex</span><span class="p">([</span><span class="s">"Daily"</span><span class="p">,</span> <span class="s">"A couple times a week"</span><span class="p">,</span> <span class="s">"Once a month"</span><span class="p">,</span> <span class="s">"Infrequently"</span><span class="p">,</span> <span class="s">"Never"</span><span class="p">])</span>
</pre>
<div>
<table border="1" class="table table-condensed">
<thead>
<tr>
<th/>
<th>Python</th>
<th><span class="caps">SQL</span></th>
<th>R</th>
<th>Ruby</th>
<th>javascript</th>
<th><span class="caps">VBA</span></th>
</tr>
</thead>
<tbody>
<tr>
<th>Daily</th>
<td>34</td>
<td>12</td>
<td>4</td>
<td>0</td>
<td>5</td>
<td>3</td>
</tr>
<tr>
<th>A couple times a week</th>
<td>15</td>
<td>17</td>
<td>3</td>
<td>0</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<th>Once a month</th>
<td>3</td>
<td>4</td>
<td>5</td>
<td>1</td>
<td>15</td>
<td>5</td>
</tr>
<tr>
<th>Infrequently</th>
<td>0</td>
<td>13</td>
<td>15</td>
<td>6</td>
<td>11</td>
<td>6</td>
</tr>
<tr>
<th>Never</th>
<td>0</td>
<td>5</td>
<td>23</td>
<td>44</td>
<td>18</td>
<td>37</td>
</tr>
</tbody>
</table>
</div><p>That was a lot of work but now that the data is in the correct table format, we can create a
heatmap very easily:</p>
<div class="highlight"><pre><span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">tech_usage</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

<p>So, what does this tell us?</p>
<p>Not surprisingly, most people use python very frequently.</p>
<p>Additionally, it looks like very few survey takers are using Ruby or
<span class="caps">VBA</span>.</p>
<p>A variation of the heatmap is the clustermap. The main feature is that it tries
to reorganize the data to more easily see relationships/clusters.</p>
<div class="highlight"><pre><span class="n">sns</span><span class="o">.</span><span class="n">clustermap</span><span class="p">(</span><span class="n">tech_usage</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>

<p>At first glance, it may seem to be a repeat but you’ll notice that the order of the axes are different.
For instance, python and <span class="caps">SQL</span> are clusterd in the lower right with higher usage and Ruby and <span class="caps">VBA</span> have a cluster in the upper left with lower usage.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>The notebook in the <a class="reference external" href="https://github.com/chris1610/pbpython/blob/master/notebooks/Google-Forms-Data-Analysis.ipynb">github repo</a> has even more detail of how to manipulate the
resulting data and create the reports shown here. I encourage you to review it
if you are interested in learning more.</p>
<p>It may take a little time to get the hang of using seaborn but I think you will
find that it is worthwhile once you start to get more comfortable with it.</p>
</div>

  </div>
  
</div></body></html>