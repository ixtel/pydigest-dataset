<html><body><div><div class="entry-content">
		<p class="pd-rating" id="pd_rating_holder_1212954_post_90"/><p>It’s tough for an erstwhile Iron Man to work on creating their personal AI assistant on the weekends. Like any other time-pressured inventor without a PhD in computer science and linguistics, I decided to use a library for speech recognition and synthesis. Fortunately, Python offers several choices. Unfortunately, many of simply them don’t work any more. I will discuss the ones that are still functional and can be used with Python 2.7 and Python 3 (up to Python 3.5 at the time of writing).</p>
<div data-shortcode="caption" id="attachment_103" class="wp-caption aligncenter"><img class=" size-full wp-image-103 aligncenter" src="https://ggulati.files.wordpress.com/2016/02/j-a-r-v-i-s.jpg?w=842" alt="j-a-r-v-i-s"/><p class="wp-caption-text">My AI assistant is actually a little humbler – I call it Samwise</p></div>
<p><span id="more-90"/></p>
<h2>Jarvis’s Mouth: Text-to-Speech</h2>
<p>We’ve all heard of Google’s AI initiatives (maybe Larry Page aspires to Tony Stark status?), so it should come as little surprise that they offer a RESTful way to do voice recognition and speech synthesis. The Python library that nicely wraps their text-to-speech API is <a href="https://pypi.python.org/pypi/gTTS" target="_blank">gTTS</a>.</p>
<p>gTTS takes advantage of Google Translate’s voice capability and downloads its response to a parameterized GET request into an mp3 file (or in-memory file). However, you would need one of the <a href="http://www.pygame.org/docs/ref/music.html" target="_blank">pygame</a>, <a href="http://pyglet.readthedocs.org/en/latest/programming_guide/media.html" target="_blank">pyglet </a>+ <a href="http://avbin.github.io/" target="_blank">AVBin</a>, or <a href="https://wiki.videolan.org/Python_bindings" target="_blank">VLC Player python libraries</a> to <a href="http://stackoverflow.com/questions/20021457/playing-mp3-song-on-python" target="_blank">play that mp3</a>. This is additional complexity and dependency bloat. Additionally, you need an API key to use Google Translate (no longer free because of the <a href="https://cloud.google.com/translate/v2/faq" target="_blank">“substantial economic burden caused by unintended abuse”</a>).</p>
<p>I also found <a href="https://github.com/parente/pyttsx" target="_blank">pyttsx</a>, which is a great offline option. JPercent has <a href="https://github.com/jpercent/pyttsx/" target="_blank">updated it</a> for Python 3. Install JPercent’s version by downloading the repository and pip install from that local folder; otherwise <code>pip install pyttsx</code> directly. For Windows, you need to install <a href="https://sourceforge.net/projects/pywin32/" target="_blank">PyWin32</a> and make sure you have the Microsoft Speech API installed. If you’re using virtualenv, you must copy the win32 folders and the files with win32 in its name from your python install directory’s <code>Lib/site-packages</code> to your virtual env’s <code>Lib/site-packages</code>. Additionally, pyttsx has difficulty detecting the installed libraries on Windows 10 and must be manually initialized to use ‘sapi5’.</p>
<h2>Jarvis’s Ears: Speech Recognition</h2>
<p><a href="https://pypi.python.org/pypi/SpeechRecognition/" target="_blank">SpeechRecognition </a>is a wonderful, up to date library that offers to use CMU’s open source Sphinx project, Google services, or Wit.ai to convert audio input into text. If you intend to recognize microphone input, you’ll also need <a href="https://pypi.python.org/pypi/PyAudio" target="_blank">PyAudio</a>. Sphinx is enormously powerful, but SpeechRecognition includes a wheel package for a simple language definition and handles all of the complexity for us. While Google speech recognition is a paid service, Wit.ai is free as of last January, when they were acquired by Facebook. I found Google’s offering to be of the highest quality, and you have 50 calls/day free with your developer API key. Sphinx’s voice recognition was by far the poorest and often garbled words, though still tended to produce useful recognized words in the middle and end of the phrase.</p>
<h2>Jarvis’s Brain: The Code</h2>
<p>I ultimately opted to use pyttsx and SpeechRecognition/Sphinx because they are offline and free, with great open source licenses. Whichever route you may choose, you can now assemble these libraries to create your own Frankensteinien AI assistant:</p>

<p>The code itself is straightforward, as anyone would hope after spending a couple of hours researching this on a weekend (and getting it to work on Windows, no less). Try it out!</p>
		<div id="jp-post-flair" class="sharedaddy sd-rating-enabled sd-like-enabled"><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded" id="like-post-wrapper-11604849-90-56d5a042139c9" data-src="//widgets.wp.com/likes/#blog_id=11604849&amp;post_id=90&amp;origin=ggulati.wordpress.com&amp;obj_id=11604849-90-56d5a042139c9" data-name="like-post-frame-11604849-90-56d5a042139c9"><h3 class="sd-title">Like this:</h3><p class="likes-widget-placeholder post-likes-widget-placeholder"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></p><span class="sd-text-color"/><a class="sd-link-color"/></div></div>			</div>

	</div></body></html>