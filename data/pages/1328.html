<html><body><div><div class="text-content">

								
								


<p>If you are someone like me, you would have been swamped by the constant feed of people pouring ice buckets over them – but you still watch that next video in the feed, just to see how the person reacted to the icy shock!</p>
<p>Yes! you are right – I am talking about the ALS ice bucket challenge. Thankfully, the fever has not caught Linkedin (yet)! Please don’t get me wrong – I have nothing against the cause, I would donate as much as I can and would want the world to do so as well – but this icyness is getting over me!</p>
<p>Anyways, by this time, the analyst in me was getting excited! Why? It just found something interesting to analyze. I thought I would analyze the impact of this campaign and see the awareness it has created. This is the power of open source tools and data available freely over the internet – an analyst can sit in front of his laptop and analyze what is happening across the globe through a few pieces of codes!</p>
<h3><strong>Data point 1 – Google Trends</strong></h3>
<p>Any awareness / viral campaign can be measured by the impact it creates on Google searches related to that topic. So that provides us with the first platform to measure this impact. Let us look at what Google trends have to say about ALS awareness searches. For sake of comparison, I have added “Gangnam Style” to the mix. “Gangnam style” provided a unique word, which was almost un-heard of before the video became viral. Here is what Google throws up:</p>
<p><a href="http://i0.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/google-ALS-searches.jpg"><img class="aligncenter wp-image-5787" src="http://i0.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/google-ALS-searches.jpg?resize=600%2C386" alt="google ALS searches" data-recalc-dims="1"/></a> By looking at this graph, you can see the magnitude of awareness increase we are talking about. “Gangnam Style” searches, even at their peak, were just half of what only “ALS” has today. If you combine the associated keywords to this mix, we might be talking about an impact of 5x – 10x of Google searches, when compared to Gangnam style. Having said that, I expect that stickiness of these search terms would be relatively less as opposed to “Gangnam style”, so the overall effect might be lower – but only time will tell this.</p>
<p><strong>P.S.</strong> <em>“Gangnam style” is probably not the best comparison – but I couldn’t think of anything else. If you have any other suggestions – please feel free to add them in the comments below.</em></p>
<h3><strong>More data points – Analyzing Social media channels:</strong></h3>
<p>In addition to Google searches, ALS campaign has gone viral on following social media channels:</p>
<ul>
<li>Facebook</li>
<li>YouTube</li>
<li>Twitter</li>
<li>Instagram</li>
</ul>
<p>Facebook doesn’t provide a way to extract universal data or any obvious way to extract data outside my nework, so I can’t use it for this analysis. Also, I haven’t used Instagram, so I’ll skip the effort to understand it. Analyzing Twitter is not that difficult – you can extract data using a few hashtags – the analysis would be very similar to what we did to find out (<a title="Who is the world cheering for? 2014 FIFA WC winner predicted using Twitter feed (in R)" href="http://www.analyticsvidhya.com/blog/2014/07/world-cheering-2014-fifa-wc-winner-twitter/" target="_blank">Who is the world cheering for?</a>) before the recent FIFA World cup. Surprisingly, I did not find any easy tutorials / guides to mine the data available on YouTube easily. That just doubled up the fun! So here is what you need to do to mine YouTube using Python:</p>
<h4><strong>Step 1: Extracting the API key from Google Developer Console</strong></h4>
<p>The first thing you need to do is to extract the API key from Google Developer Console. In order to do so, you will need to activate your account for GDC. Once you have done this, you need to create a new Project: <a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/google-new-project.png"><img class="aligncenter wp-image-5789" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/google-new-project.png?resize=400%2C221" alt="google new project" data-recalc-dims="1"/></a> You can provide a PROJECT ID for your easy reference. Once the project is created, you will automatically be re-directed to the dashboard for the project: <a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/Google-developer-console.jpg"><img class="aligncenter wp-image-5790" src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/Google-developer-console-1024x563.jpg?resize=600%2C330" alt="Google developer console" srcset="http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/Google-developer-console.jpg?resize=300%2C165 300w, http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/Google-developer-console.jpg?resize=1024%2C563 1024w, http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/Google-developer-console.jpg?w=1304 1304w" sizes="(max-width: 600px) 100vw, 600px" data-recalc-dims="1"/></a> Once at this stage, you need to create a key by going in APIs &amp; auth section. In the APIs sub-section, switch on YouTube Data API v3, in case this API is OFF. Also, please note the limit Google has put on the number of units / day – it should be sufficient for any non-commercial data extraction. Next, go to the Credentials sub-section and select “Create new key” to create a Public API access. <a href="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/09/youtube-API-access.jpg"><img class="aligncenter wp-image-5839" src="http://i0.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/09/youtube-API-access-1024x688.jpg?resize=600%2C403" alt="youtube API access" srcset="http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/09/youtube-API-access.jpg?resize=300%2C201 300w, http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/09/youtube-API-access.jpg?resize=1024%2C688 1024w, http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/09/youtube-API-access.jpg?w=1068 1068w" sizes="(max-width: 600px) 100vw, 600px" data-recalc-dims="1"/></a> <strong>In the pop up, select Server key.</strong> <a href="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/09/Youtube-API-key.jpg"><img class="aligncenter wp-image-5840" src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/09/Youtube-API-key-300x129.jpg?resize=400%2C172" alt="Youtube API key" srcset="http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/09/Youtube-API-key.jpg?resize=300%2C129 300w, http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/09/Youtube-API-key.jpg?w=529 529w" sizes="(max-width: 400px) 100vw, 400px" data-recalc-dims="1"/></a> You should keep the key generated handy, as this would be required to be replaced in your Python code.</p>
<h4><strong>Step 2 – Install and import relevant libraries in Python</strong></h4>
<p>Google has provided a few Python scripts to mine YouTube API. However, I felt that there is a lack of good documentation </p><div id="stb-container-4005" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><div id="stb-box-4005" class="stb-grey_box stb-box">
<pre>from apiclient.discovery import build #pip install google-api-python-client
from apiclient.errors import HttpError #pip install google-api-python-client
from oauth2client.tools import argparser #pip install oauth2client
import pandas as pd #pip install pandas</pre>
</div></div>
<p>We will use the API provided by Google to read the search results into a nested dictionary. Next – we will convert them to Dataframes and use Pandas library to perform exploratory analysis, as explained in<a title="Baby steps in Python – Exploratory analysis in Python (using Pandas)" href="http://www.analyticsvidhya.com/blog/2014/08/baby-steps-python-performing-exploratory-analysis-python/" target="_blank"> this article before</a>.</p>
<h4><strong>Step 3 – Set YouTube Search parameters</strong></h4>
<p>Next, you need to plug the key you generated in Step1 in your Python script. You need to specify additional parameters like API version and service name – leave unchanged, if you are not sure. You can also specify the search term and maximum number of search results here.</p>
<p/><div id="stb-container-4935" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><div id="stb-box-4935" class="stb-grey_box stb-box">
<pre>DEVELOPER_KEY = "REPLACE_ME" 
YOUTUBE_API_SERVICE_NAME = "youtube"
YOUTUBE_API_VERSION = "v3"</pre>
<pre>argparser.add_argument("--q", help="Search term", default="ALS Ice Bucket Challenge")
#change the default to the search term you want to search
argparser.add_argument("--max-results", help="Max results", default=25)
#default number of results which are returned. It can vary from 0 - 100
args = argparser.parse_args()
options = args</pre>
</div></div>
<p>You are now set to pull the results</p>
<h4><strong>Step 4 – Perform YouTube search and create a list</strong></h4>
<p>Now that all the desired options are set, we run the search, retrieve the results (id and snippet) into a list, filter out channels and playlists from the search and then join back the videos into a list. </p><div id="stb-container-5085" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><div id="stb-box-5085" class="stb-grey_box stb-box">
<pre>youtube = build(YOUTUBE_API_SERVICE_NAME, YOUTUBE_API_VERSION, developerKey=DEVELOPER_KEY)</pre>
<pre># Call the search.list method to retrieve results matching the specified
 # query term.
search_response = youtube.search().list(
 q=options.q,
 type="video",
 part="id,snippet",
 maxResults=options.max_results
).execute()</pre>
<pre>videos = {}</pre>
<pre># Add each result to the appropriate list, and then display the lists of
 # matching videos.
 # Filter out channels, and playlists.
for search_result in search_response.get("items", []):
 if search_result["id"]["kind"] == "youtube#video":
 #videos.append("%s" % (search_result["id"]["videoId"]))
 videos[search_result["id"]["videoId"]] = search_result["snippet"]["title"]</pre>
<pre>#print "Videos:\n", "\n".join(videos), "\n"</pre>
<pre>s = ','.join(videos.keys())</pre>
</div></div>
<h4><strong>Step 5 – Add video statistics to the results and append further results</strong></h4>
<p>Once we have the list of ids of videos and the title, we add statistics to each of these videos, convert the required fields into a dictionary, which is finally converted into Pandas to give a nice DataFrame as a result.</p>
<div id="stb-container-5270" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><div id="stb-box-5270" class="stb-grey_box stb-box">
<pre>videos_list_response = youtube.videos().list(</pre>
<pre> id=s,
 part='id,statistics'
).execute()</pre>
<pre>res = []
for i in videos_list_response['items']:
 temp_res = dict(v_id = i['id'], v_title = videos[i['id']])
 temp_res.update(i['statistics'])
 res.append(temp_res)</pre>
<pre>pd.DataFrame.from_dict(res)</pre>
<pre/></div></div>


<h4><strong>Step 6 – Performing analysis on YouTube data </strong></h4>
<p>Till now, we have extracted the top 500 videos from YouTube Search, added relevant statistics like views, likes, dis-likes and comments on each of these videos. Next, you can perform exploratory analysis as mentioned in <a title="Baby steps in Python – Exploratory analysis in Python (using Pandas)" href="http://www.analyticsvidhya.com/blog/2014/08/baby-steps-python-performing-exploratory-analysis-python/" target="_blank">this article</a> to find out average views, Outliers (popular videos in this case), comparison against benchmarks and other similar data points from past.</p>
<p>If you remember, this is exactly what we did with <a title="Baby steps in Python – Exploratory analysis in Python (using Pandas)" href="http://www.analyticsvidhya.com/blog/2014/08/baby-steps-python-performing-exploratory-analysis-python/" target="_blank">Kaggle dataset for Titanic customers</a>. So, I wouldn’t go into a lot of details here. But here is a simple example:</p>
<p><a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/09/pandas_analysis.jpg"><img class="aligncenter size-full wp-image-5847" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/09/pandas_analysis.jpg?resize=559%2C354" alt="pandas_analysis" data-recalc-dims="1"/></a></p>
<p> </p>
<h4><strong>End Notes:</strong></h4>
<p>In this article, we looked at how to analyze social media data available on the web. We had done this for Twitter in the past. Facebook doesn’t allow access to universal data for privacy reasons. In this article, we looked at mining YouTube data specifically. Here is the complete code, in case you want to use (except the analysis in Pandas):</p>
<div id="stb-container-7020" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><div id="stb-box-7020" class="stb-grey_box stb-box">
<p>#complete Python script to mine YouTube data. Just replace your key and keyword you want to search</p>
<p> </p>
<pre>from apiclient.discovery import build #pip install google-api-python-client
from apiclient.errors import HttpError #pip install google-api-python-client
from oauth2client.tools import argparser #pip install oauth2client
import pandas as pd #pip install pandas
import matplotlib as plt</pre>
<pre># Set DEVELOPER_KEY to the API key value from the APIs &amp; auth &gt; Registered apps
# tab of
# https://cloud.google.com/console
# Please ensure that you have enabled the YouTube Data API for your project.</pre>
<pre>DEVELOPER_KEY = "REPLACE_ME" 
YOUTUBE_API_SERVICE_NAME = "youtube"
YOUTUBE_API_VERSION = "v3"</pre>
<pre>argparser.add_argument("--q", help="Search term", default="ALS Ice Bucket Challenge")
#change the default to the search term you want to search
argparser.add_argument("--max-results", help="Max results", default=25)
#default number of results which are returned. It can very from 0 - 100
args = argparser.parse_args()
options = args</pre>
<pre>youtube = build(YOUTUBE_API_SERVICE_NAME, YOUTUBE_API_VERSION, developerKey=DEVELOPER_KEY)</pre>
<pre># Call the search.list method to retrieve results matching the specified
 # query term.
search_response = youtube.search().list(
 q=options.q,
 type="video",
 part="id,snippet",
 maxResults=options.max_results
).execute()</pre>
<pre>videos = {}</pre>
<pre># Add each result to the appropriate list, and then display the lists of
 # matching videos.
 # Filter out channels, and playlists.
for search_result in search_response.get("items", []):
 if search_result["id"]["kind"] == "youtube#video":
 #videos.append("%s" % (search_result["id"]["videoId"]))
 videos[search_result["id"]["videoId"]] = search_result["snippet"]["title"]</pre>
<pre>#print "Videos:\n", "\n".join(videos), "\n"</pre>
<pre>s = ','.join(videos.keys())</pre>
<pre>videos_list_response = youtube.videos().list(
 id=s,
 part='id,statistics'
).execute()</pre>
<pre>#videos_list_response['items'].sort(key=lambda x: int(x['statistics']['likeCount']), reverse=True)
#res = pd.read_json(json.dumps(videos_list_response['items']))</pre>
<pre>res = []
for i in videos_list_response['items']:
 temp_res = dict(v_id = i['id'], v_title = videos[i['id']])
 temp_res.update(i['statistics'])
 res.append(temp_res)</pre>
<pre>pd.DataFrame.from_dict(res)</pre>
</div></div>
<p>What I found out was that the awareness increase caused by ALS campaign was huge – somewhere in the magnitude of 5-10x compared to a few other viral phenomenon in the past. However, YouTube impact is significant, but still relatively small (video of Bill Gates has approx. 19 million views) compared to other YouTube viral videos. Only time will tell, how sticky the awareness is. It might be interesting to refresh the analysis and see the impact of campaign a few months down the line to see if the campaign had a long lasting impact. Till then, you now have a powerful script to analyze YouTube data!</p>
<p>As usual, if you have any questions / suggestions / thoughts, please feel free to put them in the comments. I hope you would enjoy this relatively rarely available script, which should enable you to perform awesome pieces of analysis.</p>
<p> </p>
<p><em>I would like to thank my friend <a href="https://www.linkedin.com/profile/view?id=14131173" target="_blank">Jayakumar Subramanian</a>, who helped me immensely with the scripting to get the data from YouTube. Jayakumar is an Investment banker by profession and has active research interest in Re-inforcement machine learning. He is someone I reach out to for those hour long discussions related to machine learning at the middle of the night!</em></p>


<p/>
<p id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</p>
															</div>

							</div></body></html>