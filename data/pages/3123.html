<html><body><div><div class="body"><div itemscope="" itemtype="http://schema.org/Article"><h1 class="title" itemprop="name">The "yield from" proposal</h1><p class="date"> Fri 10 April 2009</p><div itemprop="articleBody"><p>There's a bit of buzz on the <a class="reference external" href="http://groups.google.com/group/python-ideas">python-ideas</a> mailing list about Greg Ewing's <a class="reference external" href="http://www.cosc.canterbury.ac.nz/greg.ewing/python/yield-from/">proposal</a> for a new keyword "<tt class="docutils literal">yield from</tt> ". He has made a draft PEP and patch for python 2.6.1.</p><p>On short it adds syntactic sugar for generator decomposition and adds a "<tt class="docutils literal">return value</tt> " statement in generators (the underlying mechanism for that is a <tt class="docutils literal">StopIteration(value)</tt> exception).</p><p>Here's a straightforward example:</p><div class="highlight"><pre><span/><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">g1</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">"Starting g1"</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="s2">"g1 ham"</span>
<span class="gp">... </span>    <span class="n">result</span> <span class="o">=</span> <span class="k">yield from</span> <span class="n">g2</span><span class="p">()</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">"Got result: </span><span class="si">%r</span><span class="s2"> from g2"</span> <span class="o">%</span> <span class="n">result</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="s2">"g1 eggs"</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">"Finishing g1"</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">g2</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">"Starting g2"</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="s2">"g2 spam"</span>
<span class="gp">... </span>    <span class="k">yield</span> <span class="s2">"g2 more spam"</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">"Finishing g2"</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="s2">"foobar"</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">g1</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s2">"Yielded"</span><span class="p">,</span> <span class="n">x</span>
<span class="gp">...</span>
<span class="go">Starting g1</span>
<span class="go">Yielded g1 ham</span>
<span class="go">Starting g2</span>
<span class="go">Yielded g2 spam</span>
<span class="go">Yielded g2 more spam</span>
<span class="go">Finishing g2</span>
<span class="go">Got result: 'foobar' from g2</span>
<span class="go">Yielded g1 eggs</span>
<span class="go">Finishing g1</span>
</pre></div><p>There are a bunch of other examples and tests bundled with Greg's patch.</p><p>I got the patch and it works :). Had to manually rebuild the parser - make didn't do it by itself and I had to run "<tt class="docutils literal">make Parser/pgen &amp; make Python/graminit.c &amp; make</tt> ". I wonder why.</p></div><p class="tags">This entry was tagged as <a href="https://blog.ionelmc.ro/tag/python/"><span itemprop="keywords">python</span></a></p></div><p id="disqus_thread"/><noscript> Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div></div></body></html>