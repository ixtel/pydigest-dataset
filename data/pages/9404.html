<html><body><div><div class="entry-content">
                    <p>Rather than hard-code the configuration into a Python based settings file, when using a PaaS such as Heroku you want to pick up the MongoDB URI from the system settings. Here's what I do:</p>
<div class="highlight"><pre><span class="c"># get the dynamic elements from the MongoURI</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="n">r</span> <span class="o">=</span> <span class="s">r'^mongodb\:\/\/(?P&lt;username&gt;[_\w]+):(?P&lt;password&gt;[\w]+)@(?P&lt;host&gt;[\.\w]+):(?P&lt;port&gt;\d+)/(?P&lt;database&gt;[_\w]+)$'</span>
<span class="n">regex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="n">mongolab_url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'MONGOLAB_URI'</span><span class="p">]</span>
<span class="n">match</span> <span class="o">=</span> <span class="n">regex</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">mongolab_url</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">groupdict</span><span class="p">()</span>

<span class="c"># Save the data to settings</span>
<span class="n">MONGO_HOST</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'host'</span><span class="p">]</span>
<span class="n">MONGO_PORT</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">'port'</span><span class="p">])</span>
<span class="n">MONGO_NAME</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'username'</span><span class="p">]</span>
<span class="n">MONGO_DATABASE</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'database'</span><span class="p">]</span>
<span class="n">MONGO_PASSWORD</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s">'password'</span><span class="p">]</span>

<span class="c"># Connect to MongoEngine</span>
<span class="kn">from</span> <span class="nn">mongoengine</span> <span class="kn">import</span> <span class="n">connect</span> <span class="k">as</span> <span class="n">me_connect</span>
<span class="n">me_connect</span><span class="p">(</span>
    <span class="n">data</span><span class="p">[</span><span class="s">'database'</span><span class="p">],</span>
    <span class="n">host</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s">'host'</span><span class="p">],</span>
    <span class="n">port</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s">'port'</span><span class="p">]),</span>
    <span class="n">username</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s">'username'</span><span class="p">],</span>
    <span class="n">password</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="s">'password'</span><span class="p">])</span>
</pre></div>

                    
                </div>
                                </div></body></html>