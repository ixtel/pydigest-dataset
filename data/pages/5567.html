<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-flasgger" class="anchor" href="#flasgger" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>flasgger</h1>

<p>Creates Swagger 2.0 API documentation for all your Flask views extracting specs from docstrings or referenced YAML files.</p>

<p>The Swagger UI is embedded and docs by default available in <strong>/apidocs/index.html</strong></p>

<p><a href="https://landscape.io/github/rochacbruno/flasgger/master"><img src="https://camo.githubusercontent.com/a5633aeed1c28e96be1f5fba25485d6d215203da/68747470733a2f2f6c616e6473636170652e696f2f6769746875622f726f636861636272756e6f2f666c6173676765722f6d61737465722f6c616e6473636170652e7376673f7374796c653d666c6174" alt="Code Health" data-canonical-src="https://landscape.io/github/rochacbruno/flasgger/master/landscape.svg?style=flat"/></a></p>

<p><a href="https://app.wercker.com/project/bykey/d86586341ba8b313162b36f84b192a9c"><img src="https://camo.githubusercontent.com/698d37096e4e131d5aa73c520d1755d98e7a2812/68747470733a2f2f6170702e776572636b65722e636f6d2f7374617475732f64383635383633343162613862333133313632623336663834623139326139632f6d" alt="wercker status" title="wercker status" data-canonical-src="https://app.wercker.com/status/d86586341ba8b313162b36f84b192a9c/m"/></a></p>

<p><a target="_blank" href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&amp;business=rochacbruno%40gmail%2ecom&amp;lc=BR&amp;item_name=Flasgger&amp;no_note=0&amp;currency_code=USD&amp;bn=PP%2dDonationsBF%3abtn_donate_SM%2egif%3aNonHostedGuest"><img alt="Donate with Paypal" src="https://camo.githubusercontent.com/ad67877fff8b4e2fcfdb8ed7f80fd474a316e1c8/687474703a2f2f7777772e70617970616c6f626a656374732e636f6d2f656e5f55532f692f62746e2f62746e5f646f6e6174655f534d2e676966" data-canonical-src="http://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif"/></a></p>

<p>flasgger provides an extension (Swagger) that inspects the Flask app for endpoints that contain YAML docstrings with Swagger 2.0 <a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#operation-object">Operation</a> objects.</p>

<h1><a id="user-content-demo-app" class="anchor" href="#demo-app" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>DEMO app</h1>

<p><a href="http://flasgger-rochacbruno.rhcloud.com/">http://flasgger-rochacbruno.rhcloud.com/</a></p>

<p><strong>Powered by OpenShift</strong></p>

<h1><a id="user-content-getting-started" class="anchor" href="#getting-started" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Getting started</h1>

<h2><a id="user-content-create-a-virtualenv" class="anchor" href="#create-a-virtualenv" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>create a virtualenv</h2>

<pre><code>mkvirtualenv test_api
</code></pre>

<h2><a id="user-content-install-dependencies" class="anchor" href="#install-dependencies" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>install dependencies</h2>

<pre><code>pip install flask
pip install flasgger
</code></pre>

<h2><a id="user-content-create-a-file-called-simple_testpy" class="anchor" href="#create-a-file-called-simple_testpy" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>create a file called simple_test.py</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> flask <span class="pl-k">import</span> Flask, jsonify, request
<span class="pl-k">from</span> flasgger <span class="pl-k">import</span> Swagger

app <span class="pl-k">=</span> Flask(<span class="pl-c1">__name__</span>)

Swagger(app)


<span class="pl-en">@app.route</span>(<span class="pl-s"><span class="pl-pds">"</span>/recs<span class="pl-pds">"</span></span>, <span class="pl-v">methods</span><span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">'</span>GET<span class="pl-pds">'</span></span>])
<span class="pl-k">def</span> <span class="pl-en">recs</span>():
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    A simple test API</span>
<span class="pl-s">    This ednpoint does nothing</span>
<span class="pl-s">    Only returs "test"</span>
<span class="pl-s">    ---</span>
<span class="pl-s">    tags:</span>
<span class="pl-s">      - testapi</span>
<span class="pl-s">    parameters:</span>
<span class="pl-s">      - name: size</span>
<span class="pl-s">        in: query</span>
<span class="pl-s">        type: string</span>
<span class="pl-s">        description: size of elements</span>
<span class="pl-s">    responses:</span>
<span class="pl-s">      200:</span>
<span class="pl-s">        description: A single user item</span>
<span class="pl-s">        schema:</span>
<span class="pl-s">          id: return_test</span>
<span class="pl-s">          properties:</span>
<span class="pl-s">            result:</span>
<span class="pl-s">              type: string</span>
<span class="pl-s">              description: The test</span>
<span class="pl-s">              default: 'test'</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span>
    size <span class="pl-k">=</span> <span class="pl-c1">int</span>(request.args.get(<span class="pl-s"><span class="pl-pds">'</span>size<span class="pl-pds">'</span></span>, <span class="pl-c1">1</span>))
    <span class="pl-k">return</span> jsonify({<span class="pl-s"><span class="pl-pds">"</span>result<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span> <span class="pl-k">*</span> size})

app.run(<span class="pl-v">debug</span><span class="pl-k">=</span><span class="pl-c1">True</span>)</pre></div>

<h2><a id="user-content-run" class="anchor" href="#run" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>run</h2>



<h2><a id="user-content-try" class="anchor" href="#try" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>try</h2>

<ul>
<li>http://localhost:5000/apidocs/index.html</li>
</ul>

<h1><a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Install</h1>

<pre><code>pip install flasgger
</code></pre>

<h1><a id="user-content-run-demo-app" class="anchor" href="#run-demo-app" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Run demo app</h1>

<pre><code>python -m flasgger.example_app
</code></pre>

<p>Access: http://localhost:5000 to see the demo app running</p>

<h2><a id="user-content-you-can-run-in-gunicorn" class="anchor" href="#you-can-run-in-gunicorn" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>you can run in gunicorn</h2>

<pre><code>pip install gunicorn

gunicorn flasgger.example_app:app -b 0.0.0.0:5000

</code></pre>

<h1><a id="user-content-a-simple-example" class="anchor" href="#a-simple-example" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>A simple example</h1>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> flask <span class="pl-k">import</span> Flask, jsonify
<span class="pl-k">from</span> flasgger <span class="pl-k">import</span> Swagger

app <span class="pl-k">=</span> Flask(<span class="pl-c1">__name__</span>)
Swagger(app)

<span class="pl-en">@app.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/api/&lt;string:username&gt;<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">user_api</span>(<span class="pl-smi">username</span>):
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    User API</span>
<span class="pl-s">    This resource returns user information</span>
<span class="pl-s">    ---</span>
<span class="pl-s">    tags:</span>
<span class="pl-s">      - users</span>
<span class="pl-s">    parameters:</span>
<span class="pl-s">      - name: username</span>
<span class="pl-s">        in: path</span>
<span class="pl-s">        type: string</span>
<span class="pl-s">        required: true</span>
<span class="pl-s">    responses:</span>
<span class="pl-s">      200:</span>
<span class="pl-s">        description: A single user item</span>
<span class="pl-s">        schema:</span>
<span class="pl-s">          id: user_response</span>
<span class="pl-s">          properties:</span>
<span class="pl-s">            username:</span>
<span class="pl-s">              type: string</span>
<span class="pl-s">              description: The username</span>
<span class="pl-s">              default: some_username</span>
<span class="pl-s"/>
<span class="pl-s">    <span class="pl-pds">"""</span></span>
    <span class="pl-k">return</span> jsonify({<span class="pl-s"><span class="pl-pds">'</span>username<span class="pl-pds">'</span></span>: username})


app.run()
</pre></div>

<blockquote>
<p>NOTE: when catching arguments in path always use explicit types, bad: <code>/api/&lt;username&gt;</code> good: <code>/api/&lt;string:username&gt;</code></p>
</blockquote>

<p>The api docs and playground for the above app will be available in <a href="http://localhost:5000/apidocs/index.html">http://localhost:5000/apidocs/index.html</a></p>

<h1><a id="user-content-using-external-files" class="anchor" href="#using-external-files" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>using external files</h1>

<p>If you don't like to put YAML on docstrings you can use an external file
using yaml or yml extension and following the same pattern.</p>

<h3><a id="user-content-external_fileyml" class="anchor" href="#external_fileyml" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>external_file.yml</h3>

<div class="highlight highlight-source-yaml"><pre>First line is the summary
All following lines until the hyphens is added to description
the format of the first lines until 3 hyphens will be not yaml compliant
but everything below the 3 hyphens should be.
<span class="pl-s">-<span class="pl-s">--</span></span>
<span class="pl-s"><span class="pl-ent">tags:</span></span>
  <span class="pl-s">- <span class="pl-s">users</span></span>
<span class="pl-s"><span class="pl-ent">parameters:</span></span>
  <span class="pl-s">- <span class="pl-ent">in:</span> <span class="pl-s">path</span></span>
    <span class="pl-s"><span class="pl-ent">name:</span> <span class="pl-s">username</span></span>
    <span class="pl-s"><span class="pl-ent">type:</span> <span class="pl-s">string</span></span>
    <span class="pl-s"><span class="pl-ent">required:</span> <span class="pl-s">true</span></span>
<span class="pl-s"><span class="pl-ent">responses:</span></span>
  <span class="pl-s"><span class="pl-ent">200:</span></span>
    <span class="pl-s"><span class="pl-ent">description:</span> <span class="pl-s">A single user item</span></span>
    <span class="pl-s"><span class="pl-ent">schema:</span></span>
      <span class="pl-s"><span class="pl-ent">id:</span> <span class="pl-s">rec_username</span></span>
      <span class="pl-s"><span class="pl-ent">properties:</span></span>
        <span class="pl-s"><span class="pl-ent">username:</span></span>
          <span class="pl-s"><span class="pl-ent">type:</span> <span class="pl-s">string</span></span>
          <span class="pl-s"><span class="pl-ent">description:</span> <span class="pl-s">The name of the user</span></span>
          <span class="pl-s"><span class="pl-ent">default:</span> <span class="pl-s"><span class="pl-pds">'</span>steve-harris<span class="pl-pds">'</span></span></span>
</pre></div>

<p>And then use this file as spec to a view</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> flasgger.utils <span class="pl-k">import</span> swag_from

<span class="pl-en">@app.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/api/&lt;string:username&gt;<span class="pl-pds">'</span></span>)
<span class="pl-en">@swag_from</span>(<span class="pl-s"><span class="pl-pds">'</span>path/to/external_file.yml<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">fromfile_decorated</span>(<span class="pl-smi">username</span>):
    <span class="pl-k">return</span> jsonify({<span class="pl-s"><span class="pl-pds">'</span>username<span class="pl-pds">'</span></span>: username})</pre></div>

<p>Or if you don't  want to use the decorator you can simply use the shortcut</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@app.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/api/&lt;string:username&gt;<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">fromfile_decorated</span>(<span class="pl-smi">username</span>):
    <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">    file: path/to/external_file.yml</span>
<span class="pl-s">    <span class="pl-pds">"""</span></span>
    <span class="pl-k">return</span> jsonify({<span class="pl-s"><span class="pl-pds">'</span>username<span class="pl-pds">'</span></span>: username})
</pre></div>

<blockquote>
<p>NOTE: the above example only works for a single definition</p>
</blockquote>

<h1><a id="user-content-handling-multiple-http-methods-and-routes-for-a-single-function" class="anchor" href="#handling-multiple-http-methods-and-routes-for-a-single-function" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Handling multiple http methods and routes for a single function</h1>

<p>You can separate specifications by endpoint or methods</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> flasgger.utils <span class="pl-k">import</span> swag_from

<span class="pl-en">@app.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/api/&lt;string:username&gt;<span class="pl-pds">'</span></span>, <span class="pl-v">endpoint</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>with_user_name<span class="pl-pds">'</span></span>, <span class="pl-v">methods</span><span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">'</span>PUT<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>GET<span class="pl-pds">'</span></span>])
<span class="pl-en">@app.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/api/<span class="pl-pds">'</span></span>, <span class="pl-v">endpoint</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>without_user_name<span class="pl-pds">'</span></span>)
<span class="pl-en">@swag_from</span>(<span class="pl-s"><span class="pl-pds">'</span>path/to/external_file.yml<span class="pl-pds">'</span></span>, <span class="pl-v">endpoint</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>with_user_name<span class="pl-pds">'</span></span>)
<span class="pl-en">@swag_from</span>(<span class="pl-s"><span class="pl-pds">'</span>path/to/external_file_no_user_get.yml<span class="pl-pds">'</span></span>, <span class="pl-v">endpoint</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>without_user_name<span class="pl-pds">'</span></span>, <span class="pl-v">methods</span><span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">'</span>GET<span class="pl-pds">'</span></span>])
<span class="pl-en">@swag_from</span>(<span class="pl-s"><span class="pl-pds">'</span>path/to/external_file_no_user_put.yml<span class="pl-pds">'</span></span>, <span class="pl-v">endpoint</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>without_user_name<span class="pl-pds">'</span></span>, <span class="pl-v">methods</span><span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">'</span>PUT<span class="pl-pds">'</span></span>])
<span class="pl-k">def</span> <span class="pl-en">fromfile_decorated</span>(<span class="pl-smi">username</span><span class="pl-k">=</span><span class="pl-c1">None</span>):
    <span class="pl-k">if</span> <span class="pl-k">not</span> username:
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>No user!<span class="pl-pds">"</span></span>
    <span class="pl-k">return</span> jsonify({<span class="pl-s"><span class="pl-pds">'</span>username<span class="pl-pds">'</span></span>: username})</pre></div>

<h1><a id="user-content-use-the-same-yaml-file-to-validate-your-api-data" class="anchor" href="#use-the-same-yaml-file-to-validate-your-api-data" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Use the same yaml file to validate your API data</h1>

<pre><code>from flasgger.utils import validate, ValidationError

@swag_from('defs.yml')
def post():
    data = request.json
    try:
        validate(data, 'schema_id', 'defs.yml', __file__)
    except ValidationError:
        return abort(500)
</code></pre>

<p>All validation options can be found at <a href="http://json-schema.org/latest/json-schema-validation.html">http://json-schema.org/latest/json-schema-validation.html</a></p>

<h1><a id="user-content-html-sanitizer" class="anchor" href="#html-sanitizer" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>HTML sanitizer</h1>

<p>By default Flasgger will try to sanitize the content in YAML definitions
replacing every <code>\n</code> with <code>&lt;br&gt;</code> but you can change this behaviour
setting another kind of sanitizer.</p>

<pre><code>from flasgger import Swagger, NO_SANITIZER

app =Flask()
Swagger(app, sanitizer=NO_SANITIZER)
</code></pre>

<p>You can write your own sanitizer</p>

<pre><code>Swagger(app, sanitizer=lambda text: do_anything_with(text))
</code></pre>

<p>There is also a Markdown parser available, if you want to be able to render
Markdown in your specs description use <strong>MK_SANITIZER</strong></p>

<h1><a id="user-content-more" class="anchor" href="#more" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>More</h1>

<p>flasgger supports docstrings in methods of MethodView classes (ala <a href="https://github.com/flask-restful/flask-restful">Flask-RESTful</a>) and regular Flask view functions.</p>

<p>Following YAML conventions, flasgger searches for <code>---</code>, everything preceding is provided as <code>summary</code> (first line) and <code>description</code> (following lines) for the endpoint while everything after is parsed as a swagger <a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#operation-object">Operation</a> object.</p>

<p>In order to support inline definition of <a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#schemaObject">Schema </a> objects in <a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#parameterObject">Parameter</a>  and <a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#responsesObject">Response</a> objects, flasgger veers a little off from the standard. We require an <code>id</code> field for the inline Schema which is then used to correctly place the <a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#schemaObject">Schema</a> object in the <a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#definitionsObject">Definitions</a> object.</p>

<p><a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#schemaObject">Schema </a> objects can also be defined within the properties of other <a href="https://github.com/swagger-api/swagger-spec/blob/master/versions/2.0.md#schemaObject">Schema </a> objects . An example is shown above with the address property of User.</p>

<h1><a id="user-content-example-app" class="anchor" href="#example-app" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>example app</h1>

<p>To expose your Swagger specification to the world you provide a Flask route that does something along these lines</p>

<p>This is the DEMO app included in <strong>flasgger/example_app.py</strong></p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> flask <span class="pl-k">import</span> Flask, jsonify, request
<span class="pl-k">from</span> flask.views <span class="pl-k">import</span> MethodView
<span class="pl-k">from</span> flasgger <span class="pl-k">import</span> Swagger

app <span class="pl-k">=</span> Flask(<span class="pl-c1">__name__</span>)


<span class="pl-c"># config your API specs</span>
<span class="pl-c"># you can define multiple specs in the case your api has multiple versions</span>
<span class="pl-c"># ommit configs to get the default (all views exposed in /spec url)</span>
<span class="pl-c"># rule_filter is a callable that receives "Rule" object and</span>
<span class="pl-c">#   returns a boolean to filter in only desired views</span>

app.config[<span class="pl-s"><span class="pl-pds">'</span>SWAGGER<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">"</span>swagger_version<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>2.0<span class="pl-pds">"</span></span>,
    <span class="pl-c"># headers are optional, the following are default</span>
    <span class="pl-c"># "headers": [</span>
    <span class="pl-c">#     ('Access-Control-Allow-Origin', '*'),</span>
    <span class="pl-c">#     ('Access-Control-Allow-Headers', "Authorization, Content-Type"),</span>
    <span class="pl-c">#     ('Access-Control-Expose-Headers', "Authorization"),</span>
    <span class="pl-c">#     ('Access-Control-Allow-Methods', "GET, POST, PUT, DELETE, OPTIONS"),</span>
    <span class="pl-c">#     ('Access-Control-Allow-Credentials', "true"),</span>
    <span class="pl-c">#     ('Access-Control-Max-Age', 60 * 60 * 24 * 20),</span>
    <span class="pl-c"># ],</span>
    <span class="pl-c"># another optional settings</span>
    <span class="pl-c"># "url_prefix": "swaggerdocs",</span>
    <span class="pl-c"># "subdomain": "docs.mysite,com",</span>
    <span class="pl-c"># specs are also optional if not set /spec is registered exposing all views</span>
    <span class="pl-s"><span class="pl-pds">"</span>specs<span class="pl-pds">"</span></span>: [
        {
            <span class="pl-s"><span class="pl-pds">"</span>version<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>0.0.1<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Api v1<span class="pl-pds">"</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>endpoint<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">'</span>v1_spec<span class="pl-pds">'</span></span>,
            <span class="pl-s"><span class="pl-pds">"</span>route<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">'</span>/v1/spec<span class="pl-pds">'</span></span>,

            <span class="pl-c"># rule_filter is optional</span>
            <span class="pl-c"># it is a callable to filter the views to extract</span>

            <span class="pl-c"># "rule_filter": lambda rule: rule.endpoint.startswith(</span>
            <span class="pl-c">#    'should_be_v1_only'</span>
            <span class="pl-c"># )</span>
        }
    ]
}

swagger <span class="pl-k">=</span> Swagger(app)  <span class="pl-c"># you can pass config here Swagger(app, config={})</span>


<span class="pl-k">class</span> <span class="pl-en">UserAPI</span>(<span class="pl-e">MethodView</span>):

    <span class="pl-k">def</span> <span class="pl-en">get</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">team_id</span>):
        <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">        Get a list of users</span>
<span class="pl-s">        First line is the summary</span>
<span class="pl-s">        All following lines until the hyphens is added to description</span>
<span class="pl-s">        ---</span>
<span class="pl-s">        tags:</span>
<span class="pl-s">          - users</span>
<span class="pl-s">        parameters:</span>
<span class="pl-s">          - name: team_id</span>
<span class="pl-s">            in: path</span>
<span class="pl-s">            description: ID of team (type any number)</span>
<span class="pl-s">            required: true</span>
<span class="pl-s">            type: integer</span>
<span class="pl-s">        responses:</span>
<span class="pl-s">          200:</span>
<span class="pl-s">            description: Returns a list of users</span>
<span class="pl-s">            schema:</span>
<span class="pl-s">                type: array</span>
<span class="pl-s">                items:</span>
<span class="pl-s">                    $ref: '#/definitions/User'</span>
<span class="pl-s">        <span class="pl-pds">"""</span></span>
        data <span class="pl-k">=</span> {
            <span class="pl-s"><span class="pl-pds">"</span>users<span class="pl-pds">"</span></span>: [
                {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Steven Wilson<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>team<span class="pl-pds">"</span></span>: team_id},
                {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Mikael Akerfeldt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>team<span class="pl-pds">"</span></span>: team_id},
                {<span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Daniel Gildenlow<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>team<span class="pl-pds">"</span></span>: team_id}
            ]
        }
        <span class="pl-k">return</span> jsonify(data)

    <span class="pl-k">def</span> <span class="pl-en">post</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">team_id</span>):
        <span class="pl-s"><span class="pl-pds">"""</span></span>
<span class="pl-s">        Create a new user</span>
<span class="pl-s">        First line is the summary</span>
<span class="pl-s">        All following lines until the hyphens is added to description</span>
<span class="pl-s">        ---</span>
<span class="pl-s">        tags:</span>
<span class="pl-s">          - users</span>
<span class="pl-s">        parameters:</span>
<span class="pl-s">          - name: team_id</span>
<span class="pl-s">            in: path</span>
<span class="pl-s">            description: ID of team (type any number)</span>
<span class="pl-s">            required: true</span>
<span class="pl-s">            type: integer</span>
<span class="pl-s">          - in: body</span>
<span class="pl-s">            name: body</span>
<span class="pl-s">            schema:</span>
<span class="pl-s">              id: User</span>
<span class="pl-s">              required:</span>
<span class="pl-s">                - team</span>
<span class="pl-s">                - name</span>
<span class="pl-s">              properties:</span>
<span class="pl-s">                team:</span>
<span class="pl-s">                  type: integer</span>
<span class="pl-s">                  description: team for user</span>
<span class="pl-s">                name:</span>
<span class="pl-s">                  type: string</span>
<span class="pl-s">                  description: name for user</span>
<span class="pl-s">        responses:</span>
<span class="pl-s">          201:</span>
<span class="pl-s">            description: User created</span>
<span class="pl-s">            schema:</span>
<span class="pl-s">                type: array</span>
<span class="pl-s">                items:</span>
<span class="pl-s">                    $ref: '#/definitions/User'</span>
<span class="pl-s">        <span class="pl-pds">"""</span></span>
        <span class="pl-k">return</span> jsonify({<span class="pl-s"><span class="pl-pds">"</span>newuser<span class="pl-pds">"</span></span>: request.json, <span class="pl-s"><span class="pl-pds">"</span>team_id<span class="pl-pds">"</span></span>: team_id})


view <span class="pl-k">=</span> UserAPI.as_view(<span class="pl-s"><span class="pl-pds">'</span>users<span class="pl-pds">'</span></span>)
app.add_url_rule(
    <span class="pl-s"><span class="pl-pds">'</span>/v1/users/&lt;int:team_id&gt;<span class="pl-pds">'</span></span>,
    <span class="pl-v">view_func</span><span class="pl-k">=</span>view,
    <span class="pl-v">methods</span><span class="pl-k">=</span>[<span class="pl-s"><span class="pl-pds">"</span>GET<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>],
    <span class="pl-v">endpoint</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>should_be_v1_only_users<span class="pl-pds">'</span></span>
)

<span class="pl-c"># you can still use @app.route if you want</span>


<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:
    app.run(<span class="pl-v">debug</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
</pre></div>

<p>then access <a href="http://localhost:5000/apidocs/index.html">http://localhost:5000/apidocs/index.html</a> to see api docs in action</p>

<p>Acknowledgments</p>

<p>Flassger uses Swagger UI <a href="https://github.com/swagger-api/swagger-ui">Swagger-UI</a></p>

<p>Flasgger is a fork of <a href="https://github.com/gangverk/flask-swagger">Flask-Swagger</a> which is a simpler solution, consider it if you just want to expose specs json.</p>
</article>
  </div></body></html>