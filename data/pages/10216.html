<html><body><div><div class="section">
              <h1>django-intercom 0.0.13</h1>

              


<p>Django App for integrating with intercom.io</p>








<p>django-intercom makes it easy to use <a href="http://intercom.io" rel="nofollow">http://intercom.io</a> in your django application. You just need to do the following.</p>
<p>Supported Python versions: 2.7 and 3.3+</p>

<div id="installation">
<h2>Installation</h2>
<ol>
<li><p>Install django-intercom using easy_setup or pip:</p>
<pre>pip install django-intercom
</pre>
</li>
<li><p>add intercom to your INSTALLED_APPS in your django settings file:</p>
<pre>INSTALLED_APPS = (
    # all
    # other
    # apps
    'intercom',
)
</pre>
</li>
<li><p>Add “INTERCOM_APPID” setting to your django settings file with your intercom application Id.</p>
<blockquote>
<p>in settings.py:</p>
<pre>INTERCOM_APPID = "your appID"
</pre>
</blockquote>
</li>
<li><p>Add the template tag code into your base template before the body tag.</p>
<blockquote>
<p>At the top of the page put this:</p>
<pre>{% load intercom %}
</pre>
<p>At the bottom of the page before the &lt;/body&gt; tag put this:</p>
<pre>{% intercom_tag %}
</pre>
</blockquote>
</li>
</ol>
</div>
<div id="enable-secure-mode-optional">
<h2>Enable Secure Mode (Optional)</h2>
<p>This is optional, if it isn’t set, then you will not use secure mode.</p>
<p>If you want to turn on secure mode, you can add INTERCOM_SECURE_KEY to your settings.py with the private key you can get from your intercom-&gt;app-&gt;security page.</p>
<p>in settings.py:</p>
<pre>INTERCOM_SECURE_KEY = "your security_code"
</pre>
<p>You will need to look in the code samples to find the security key.</p>
<p>You will also need to make sure you check the “Enable secure mode” check box on the security page before this will work correctly.</p>
</div>
<div id="disable-tag-optional">
<h2>Disable Tag (Optional)</h2>
<p>This is optional, if it isn’t set to True, then the tag will be active.</p>
<p>If you want to disable the tag, you can add INTERCOM_DISABLED to your settings.py.</p>
<p>in settings.py:</p>
<pre>INTERCOM_DISABLED = True
</pre>
<p>This is useful when you do not want to send user information to intercom.io on every request in some enviroment for a period of time, e.g. in a development enviroment.</p>
<p>This provides a quick way to disable the tag without having to remove/comment out the tag in templates or the INTERCOM_APPID in settings.py (the latter would disable the sending of information but result in a setup warning in the log).</p>
</div>

<div id="user-data">
<h2>User Data</h2>
<p>By default, django-intercom will send the following user information to intercom.io:</p>
<ol>
<li>user_id (sourced from request.user.id)</li>
<li>email (sourced from request.user.email)</li>
<li>name (sourced from request.user.username or, and as a fallback, request.user.get_username())</li>
<li>created_at (sourced from request.user.date_joined)</li>
<li>user_hash (calculated using INTERCOM_SECURE_KEY and user_id, if INTERCOM_SECURE_KEY is set)</li>
</ol>
<p>You can override any or all of fields 1-4 by creating a Class with a user_data method that accepts a Django User model as an argument. The method should return a dictionary containing any or all of the keys <strong>user_id</strong>, <strong>email</strong>, <strong>name</strong> and <strong>user_created</strong>, and the desired values for each. Note that the user_created key must contain a datetime. Here is an example:</p>
<pre>from django.utils.dateformat import DateFormat

class IntercomUserData:
    """ User data class located anywhere in your project
        This one is located in thepostman/utils/user_data.py """

    def user_data(self, user):
        """ Required method, same name and only accepts one attribute (django User model) """

        return {
            'name' : user.userprofile.name,
        }
</pre>
<p>You will need to register your class with django-intercom so that it knows where to find it. You do this by adding the class to the INTERCOM_USER_DATA_CLASS setting.</p>

</div>
<div id="custom-data">
<h2>Custom Data</h2>
<p>Intercom.io allows you to send them your own custom data, django-intercom makes this easy. All you need to do it create a Class with a custom_data method that accepts a Django User model as an argument and returns a dictionary. Here is an example:</p>
<pre>from thepostman.models import message

class IntercomCustomData:
    """ Custom data class located anywhere in your project
        This one is located in thepostman/utils/custom_data.py """

    def custom_data(self, user):
        """ Required method, same name and only accepts one attribute (django User model) """

        num_messages = message.objects.filter(user=user).count()
        num_unread = messages.objects.filter(user=user, read=False).count()

        return {
            'num_messages' : num_messages,
            'num_unread' : num_unread,
        }
</pre>
<p>Once you have your classes built, you will need to register them with django-intercom so that it knows where to find them. You do this by adding the class to the INTERCOM_CUSTOM_DATA_CLASSES setting. It is important to note that if you have the same dict key returned in more then one Custom Data Class the last class that is run (lower in the list) will overwrite the previous ones.</p>

</div>
<div id="company-data">
<h2>Company Data</h2>
<p>Intercom.io allows you to group your users by company, django-intercom makes this easy. All you need to do is create a Class with a company_data method that accepts a Django user model as an argument and returns a dictionary containing the keys id, name and created_at, and whatever other information you want to store about the company. Note that the created_at key must contain a Unix timestamp. Here is an example:</p>
<pre>from django.utils.dateformat import DateFormat

class IntercomCompanyData:
    """ Company data class located anywhere in your project
        This one is located in thepostman/utils/company_data.py """

    def company_data(self, user):
        """ Required method, same name and only accepts one attribute (django User model) """

        organisation = user.organisation

        return {
            'id' : organisation.id,
            'name' : organisation.name,
            'created_at' : DateFormat(organisation.created_at).U(),
            'price_plan' : organisation.price_plan,
        }
</pre>
<p>You will need to register your class with django-intercom so that it knows where to find it. You do this by adding the class to the INTERCOM_COMPANY_DATA_CLASS setting.</p>

</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>205</span> downloads in the last week
  </li>
  <li>
    <span>1514</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>