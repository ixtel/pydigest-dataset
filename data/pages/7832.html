<html><body><div><div class="post-text" itemprop="text">

<p>I have a view to send an XML request get the response and render the response in a template. But now I have a problem when two users make a request to different web services the data in the template show the data of the last request.</p>

<p>I don't know how to handle when multiple user make request to different web services or the same web service.</p>

<p>I was thinking to dynamically generate a template for every user, but I don't know how to handle the urls.</p>

<p>My view:</p>

<pre><code>def LeerXMLResponseView(request):
    archivo_request = request.GET.get('xml')
    ws_service = request.GET.get('servicio')
    archivo = '/DjangoProjects/xmlcbs/media/'+ archivo_request
    with open(archivo,"r") as file:
         request_data = file.read()

    target_url = "http://1.1.1.1:1111/services/" + ws_service + "?wsdl"
    headers = {'Content-type':'text/xml'}
    data_response = requests.post(target_url, data=request_data, headers=headers).text
    jdato = xmltodict.parse(data_response)
    data = json2html.convert(json = jdato)
    data_template = data

    return render_to_response('prueba.html', {'data':data_template})
</code></pre>

<p>This view works fine for one user at time but when two or more users make a request the data is overwritten.</p>

<p>Any idea how to handle multiple users using the same view with different request and response?</p>
    </div>
    </div></body></html>