<html><body><div><div class="section" id="advanced-usage">
<h2>Advanced usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h2>
<p>If you’re dealing with a large amount of text, you can call the
Universal Encoding Detector library incrementally, and it will stop as
soon as it is confident enough to report its results.</p>
<p>Create a <code class="docutils literal"><span class="pre">UniversalDetector</span></code> object, then call its <code class="docutils literal"><span class="pre">feed</span></code> method
repeatedly with each block of text. If the detector reaches a minimum
threshold of confidence, it will set <code class="docutils literal"><span class="pre">detector.done</span></code> to <code class="docutils literal"><span class="pre">True</span></code>.</p>
<p>Once you’ve exhausted the source text, call <code class="docutils literal"><span class="pre">detector.close()</span></code>, which
will do some final calculations in case the detector didn’t hit its
minimum confidence threshold earlier. Then <code class="docutils literal"><span class="pre">detector.result</span></code> will be a
dictionary containing the auto-detected character encoding and
confidence level (the same as the <code class="docutils literal"><span class="pre">chardet.detect</span></code> function
<a class="reference external" href="usage.html#example-using-the-detect-function">returns</a>).</p>
</div>
<div class="section" id="example-detecting-encoding-incrementally">
<h2>Example: Detecting encoding incrementally<a class="headerlink" href="#example-detecting-encoding-incrementally" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre>import urllib
from chardet.universaldetector import UniversalDetector

usock = urllib.urlopen('http://yahoo.co.jp/')
detector = UniversalDetector()
for line in usock.readlines():
    detector.feed(line)
    if detector.done: break
detector.close()
usock.close()
print detector.result
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">'encoding'</span><span class="p">:</span> <span class="s">'EUC-JP'</span><span class="p">,</span> <span class="s">'confidence'</span><span class="p">:</span> <span class="mf">0.99</span><span class="p">}</span>
</pre></div>
</div>
<p>If you want to detect the encoding of multiple texts (such as separate
files), you can re-use a single <code class="docutils literal"><span class="pre">UniversalDetector</span></code> object. Just call
<code class="docutils literal"><span class="pre">detector.reset()</span></code> at the start of each file, call <code class="docutils literal"><span class="pre">detector.feed</span></code>
as many times as you like, and then call <code class="docutils literal"><span class="pre">detector.close()</span></code> and check
the <code class="docutils literal"><span class="pre">detector.result</span></code> dictionary for the file’s results.</p>
</div>
</div></body></html>