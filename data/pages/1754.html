<html><body><div><div class="section">
              <h1>contracts 0.1.0</h1>

              


<p/><p>








Contracts For Python</p><p>--------------------</p><p>This library is a very simple and straightforward way of implementing contracts</p><p>in python using decorators. I did have a look at a few other contract libraries </p><p>and found that they were either not very pythonic or decided to use strings to </p><p>encode the contract logic which makes it horrible to debug or even write your </p><p>contracts cleanly.</p><p>In the hopes of creating something better I've created this library to see if</p><p>others find it useful. </p><p>Installation</p><p>------------</p><p>&gt; sudo python setup.py install</p><p>Will install the contracts library which you can then import with the usual </p><p>'import contracts' and start using the contracts library immediately.</p><p>or install directly from github with:</p><p>pip install -e git+git://github.com/rlgomes/contracts.git#egg=contracts</p><p>Usage</p><p>-----</p><p>Function Decorators</p><p>-------------------</p><p>@post</p><p>-----</p><p>The post decorator will validate whatever you want to validate after the </p><p>execution of the decorated function and the contract library will pass the </p><p>return value of the decorated function as your first argument. You can then </p><p>choose to do any required validation to the result of that function or check </p><p>any other global variable state of importance.</p><p>Example: return constraint check</p><p>--------------------------------        </p><p>@post(lambda x: x &gt; 0,"return is not a positive number")</p><p>def bad_abs(a):</p><p>    return a    </p><p>The previous function is a bad implementation of the abs function and with the </p><p>post contract that checks the return to be positive we can easily catch that </p><p>when we call the function with -2 as an argument this is what we'd see:        </p><p>&gt;&gt;&gt; bad_abs(-2) Traceback (most recent call last): File "&lt;stdin&gt;", line 1, in &lt;module&gt;</p><p>  File "contracts.py", line 35, in new_f</p><p>    assert function(result), message</p><p>AssertionError: return is not a positive number</p><p>@pre</p><p>----</p><p>The pre decorator will validate whatever you want to validate befor the </p><p>execution of the decorated function and the contract library will pass the </p><p>exact arguments that are about to be passed to the decorated function before </p><p>executing that.</p><p>Example: argument validation</p><p>@pre(lambda _,y: len(y) &gt; 0)</p><p>def find_element(elem,list):</p><p>    ...    </p><p>The above example shows you can guarantee your function is never called with a</p><p>list that has zero elements.</p><p>Class Decorators</p><p>----------------</p><p>@inv</p><p>----</p><p>The invariant decorator will validate that the contract you want is always </p><p>validated for every interaction with any instance of the class you just decorated.</p><p>Basically the framework is able to hijack all of the methods, constructors, etc </p><p>in a way that makes sure that every change to the object is validated before and</p><p>after the change to not be in violation of the contract specified.</p><p>@inv(lambda obj: obj.visitors &gt;= 0)</p><p>class VistorTracker(object):    </p><p>    # if not set the pre condition will fail at initialization phase because</p><p>    # the attribute visitors doesn't exist at that time if removed from this </p><p>    # line </p><p>    visitors = 0     </p><p>    def __init__(self):</p><p>        self.visitors = 0        </p><p>    def leave(self):</p><p>        self.visitors=self.visitors-1</p><p>    def visit(self): </p><p>        self.visitors=self.visitors+1                </p><p>Now basically the class VisitorTracker is constantly being checked whenever any</p><p>method is called on the class or variable is modified the invariant contract </p><p>checks that the number of visitors is superior to 0 and that there haven't</p><p>been more leave() method calls executed then visit() methods called.

</p><a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>14</span> downloads in the last week
  </li>
  <li>
    <span>92</span> downloads in the last month
  </li>
</ul>



<ul class="nodot">
 <li>
  <strong>Author:</strong>
  <span>Rodney Gomes</span>
 </li>

 

 


 


 

 


 <li>
  <strong>Keywords:</strong>
  <span>contracts</span>
 </li>

 <li>
  <strong>License:</strong>
  
  
  <span>Apache 2.0 License</span>
  
 </li>

 


 
 
 

 



 

 

 

 

 


 <li>
  <strong>Package Index Owner:</strong>
  <span>rlgomes</span>
 </li>

 

 <li>
  <strong><a href="http://usefulinc.com/doap">DOAP</a> record:</strong>
  <a href="/pypi?:action=doap&amp;name=contracts&amp;version=0.1.0">contracts-0.1.0.xml</a>
 </li>

</ul>





            </div>


          </div></body></html>