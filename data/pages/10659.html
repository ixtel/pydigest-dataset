<html><body><div><p>DateTimeRange is a python library to handle routine work associated with a time range,
such as test whether a time is within the time range,
get time range intersection, truncating the time range etc.</p>








<div id="usage">

<p>datetime.datetime instance can be used as an argument value as well as
time-string in the below examples.</p>
<div id="create-and-convert-to-string">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="nb">str</span><span class="p">(</span><span class="n">time_range</span><span class="p">)</span>
</pre>
<pre>'2015-03-22T10:00:00+0900 - 2015-03-22T10:10:00+0900'
</pre>
</div>
<div id="compare-time-range">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">lhs</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">rhs</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">"lhs == rhs: "</span><span class="p">,</span> <span class="n">lhs</span> <span class="o">==</span> <span class="n">rhs</span>
<span class="k">print</span> <span class="s2">"lhs != rhs: "</span><span class="p">,</span> <span class="n">lhs</span> <span class="o">!=</span> <span class="n">rhs</span>
</pre>
<pre>lhs == rhs:  True
lhs != rhs:  False
</pre>
</div>
<div id="move-the-time-range">

<pre><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:20:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">value</span> <span class="o">+</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">10</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
<span class="k">print</span> <span class="n">value</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="mi">10</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
</pre>
<pre>2015-03-22T10:20:00+0900 - 2015-03-22T10:30:00+0900
2015-03-22T10:00:00+0900 - 2015-03-22T10:10:00+0900
</pre>
</div>
<div id="change-string-conversion-format">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">start_time_format</span> <span class="o">=</span> <span class="s2">"%Y/%m/</span><span class="si">%d</span><span class="s2">"</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">end_time_format</span> <span class="o">=</span> <span class="s2">"%Y/%m/</span><span class="si">%d</span><span class="s2">T%H:%M:%S%z"</span>
<span class="n">time_range</span>
</pre>
<pre>2015/03/22 - 2015/03/22T10:10:00+0900
</pre>
</div>
<div id="add-elapsed-time-when-conversion-to-string">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">is_output_elapse</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">time_range</span>
</pre>
<pre>2015-03-22T10:00:00+0900 - 2015-03-22T10:10:00+0900 (0:10:00)
</pre>
</div>
<div id="change-separator-of-the-converted-string">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">separator</span> <span class="o">=</span> <span class="s2">" to "</span>
<span class="n">time_range</span>
</pre>
<pre>2015-03-22T10:00:00+0900 to 2015-03-22T10:10:00+0900
</pre>
</div>
<div id="get-start-time-as-datetime-datetime">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">start_datetime</span>
</pre>
<pre>datetime.datetime(2015, 3, 22, 10, 0, tzinfo=tzoffset(None, 32400))
</pre>
</div>
<div id="get-start-time-as-string-formatted-with-start-time-format">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">get_start_time_str</span><span class="p">()</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">start_time_format</span> <span class="o">=</span> <span class="s2">"%Y/%m/</span><span class="si">%d</span><span class="s2"> %H:%M:%S"</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">get_start_time_str</span><span class="p">()</span>
</pre>
<pre>2015-03-22T10:00:00+0900
2015/03/22 10:00:00
</pre>
</div>
<div id="get-end-time-as-datetime-datetime">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">end_datetime</span>
</pre>
<pre>datetime.datetime(2015, 3, 22, 10, 10, tzinfo=tzoffset(None, 32400))
</pre>
</div>
<div id="get-end-time-as-string-formatted-with-end-time-format">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">get_end_time_str</span><span class="p">()</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">end_time_format</span> <span class="o">=</span> <span class="s2">"%Y/%m/</span><span class="si">%d</span><span class="s2"> %H:%M:%S"</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">get_end_time_str</span><span class="p">()</span>
</pre>
<pre>2015-03-22T10:10:00+0900
2015/03/22 10:10:00
</pre>
</div>
<div id="get-datetime-timedelta-from-start-datetime-to-the-end-datetime">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">timedelta</span>
</pre>
<pre>datetime.timedelta(0, 600)
</pre>
</div>
<div id="get-timedelta-as-seconds-from-start-datetime-to-the-end-datetime">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">get_timedelta_second</span><span class="p">()</span>
</pre>
<pre>600.0
</pre>
</div>
<div id="set-start-time">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">()</span>
<span class="k">print</span> <span class="n">time_range</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">set_start_datetime</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">time_range</span>
</pre>
<pre>NaT - NaT
2015-03-22T10:00:00+0900 - NaT
</pre>
</div>
<div id="set-end-time">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">()</span>
<span class="k">print</span> <span class="n">time_range</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">set_end_datetime</span><span class="p">(</span><span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">time_range</span>
</pre>
<pre>NaT - NaT
NaT - 2015-03-22T10:10:00+0900
</pre>
</div>
<div id="set-time-range-set-both-start-and-end-time">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">()</span>
<span class="k">print</span> <span class="n">time_range</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">set_time_range</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">time_range</span>
</pre>
<pre>NaT - NaT
2015-03-22T10:00:00+0900 - 2015-03-22T10:10:00+0900
</pre>
</div>
<div id="test-whether-the-time-range-is-set">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">()</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">set_time_range</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">is_set</span><span class="p">()</span>
</pre>
<pre>False
True
</pre>
</div>
<div id="validate-time-inversion">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">time_range</span><span class="o">.</span><span class="n">validate_time_inversion</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s2">"time inversion"</span>
</pre>
<pre>time inversion
</pre>
</div>
<div id="test-whether-the-time-range-is-valid">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">()</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">is_valid_timerange</span><span class="p">()</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">set_time_range</span><span class="p">(</span><span class="s2">"2015-03-22T10:20:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">is_valid_timerange</span><span class="p">()</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">set_time_range</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="n">time_range</span><span class="o">.</span><span class="n">is_valid_timerange</span><span class="p">()</span>
</pre>
<pre>False
False
True
</pre>
</div>
<div id="test-whether-a-value-within-the-time-range">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">"2015-03-22T10:05:00+0900"</span> <span class="ow">in</span> <span class="n">time_range</span>
<span class="k">print</span> <span class="s2">"2015-03-22T10:15:00+0900"</span> <span class="ow">in</span> <span class="n">time_range</span>
</pre>
<pre>True
False
</pre>
</div>
<div id="test-whether-a-value-intersect-the-time-range">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:05:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:15:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">is_intersection</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre>
<pre>True
</pre>
</div>
<div id="make-an-intersected-time-range">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:05:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:15:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">time_range</span>
</pre>
<pre>2015-03-22T10:05:00+0900 - 2015-03-22T10:10:00+0900
</pre>
</div>
<div id="make-an-encompassed-time-range">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:05:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:15:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">encompass</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">time_range</span>
</pre>
<pre>2015-03-22T10:00:00+0900 - 2015-03-22T10:15:00+0900
</pre>
</div>
<div id="truncate-time-range">

<pre><span class="kn">from</span> <span class="nn">datetimerange</span> <span class="kn">import</span> <span class="n">DateTimeRange</span>
<span class="n">time_range</span> <span class="o">=</span> <span class="n">DateTimeRange</span><span class="p">(</span><span class="s2">"2015-03-22T10:00:00+0900"</span><span class="p">,</span> <span class="s2">"2015-03-22T10:10:00+0900"</span><span class="p">)</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">is_output_elapse</span> <span class="o">=</span> <span class="bp">True</span>
<span class="k">print</span> <span class="s2">"before truncate: "</span><span class="p">,</span> <span class="n">time_range</span>
<span class="n">time_range</span><span class="o">.</span><span class="n">truncate</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">"after truncate:  "</span><span class="p">,</span> <span class="n">time_range</span>
</pre>
<pre>before truncate:  2015-03-22T10:00:00+0900 - 2015-03-22T10:10:00+0900 (0:10:00)
after truncate:   2015-03-22T10:00:30+0900 - 2015-03-22T10:09:30+0900 (0:09:00)
</pre>
</div>
</div>
</div></body></html>