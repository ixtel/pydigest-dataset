<html><body><div><div class="post-text" itemprop="text">

<p>I have a large text file which mainly consists of numbers and some delimiters like <code>,|{}[]:</code> etc. I used Lempel-Ziv encoding for compression. The code I used is not mine and is the one from <a href="http://rosettacode.org/wiki/LZW_compression#Python" rel="nofollow">Rosetta</a> code. I ran the code for line by line compression as well as once for chunk by chunk compression:</p>

<pre><code>def readChunk(file_object, size = 1024):
    while True:
        data = file_object.read(size)
        if not data:
            break
        yield data

def readByChunk():
    with open(LARGE_FILE, 'r') as f:
        for data in readChunk(f, 2048):
            compressed_chunk = compress(data)
            compressed_chunk = map(lambda a : str(a), compressed_chunk)
            comp_file.write(" ".join(compressed_chunk))

def readLineByLine():
    with open(LARGE_FILE, 'r') as f:
        lines = f.readlines()
        for data in lines:
            compressed_line = compress(data)
            compressed_line = map(lambda a : str(a), compressed_line)
            comp_file.write(" ".join(compressed_line))
</code></pre>

<p>Both function output a file that is much bigger than the original file!! Decompression works fine i.e. I am able to get the original text back so I think the code is correct.</p>

<p>Am I doing something wrong in saving the file?</p>
    </div>
    </div></body></html>