<html><body><div><div class="entry-content">
                    <a class="reference external image-reference" href="http://www.pydanny.com/static/aliens.png"><img alt="Aliens" class="align-center" id="aliens" src="http://pydanny.com/static/aliens.png"/></a>
<p>Unlike every other programming language I've used before, Python does not have a switch or case statement. To get around this fact, we use dictionary mapping:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">numbers_to_strings</span><span class="p">(</span><span class="n">argument</span><span class="p">):</span>
    <span class="n">switcher</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">0</span><span class="p">:</span> <span class="s">"zero"</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">:</span> <span class="s">"one"</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="s">"two"</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">switcher</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s">"nothing"</span><span class="p">)</span>
</pre></div>
<p>This code is analogous to:</p>
<div class="highlight"><pre><span class="kd">function</span><span class="p">(</span><span class="nx">argument</span><span class="p">){</span>
    <span class="k">switch</span><span class="p">(</span><span class="nx">argument</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
            <span class="k">return</span> <span class="s2">"zero"</span><span class="p">;</span>
        <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
            <span class="k">return</span> <span class="s2">"one"</span><span class="p">;</span>
        <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
            <span class="k">return</span> <span class="s2">"two"</span><span class="p">;</span>
        <span class="k">default</span><span class="o">:</span>
            <span class="k">return</span> <span class="s2">"nothing"</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">};</span>
</pre></div>
<p>While the Python code is often more terse than the standard method of handling cases, I could argue it is more arcane. When I first started Python it felt weird and distracting. Over time it grew on me, the use of a dictionary key being the identifier in a switch becoming more and more habitual.</p>
<div class="section" id="dictionary-mapping-for-functions">
<h2>Dictionary Mapping for Functions</h2>
<p>In Python we can also include functions or lambdas in our dictionary mapping:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">zero</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">"zero"</span>

<span class="k">def</span> <span class="nf">one</span><span class="p">():</span>
    <span class="k">return</span> <span class="s">"one"</span>

<span class="k">def</span> <span class="nf">numbers_to_functions_to_strings</span><span class="p">(</span><span class="n">argument</span><span class="p">):</span>
    <span class="n">switcher</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">0</span><span class="p">:</span> <span class="n">zero</span><span class="p">,</span>
        <span class="mi">1</span><span class="p">:</span> <span class="n">one</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">:</span> <span class="k">lambda</span><span class="p">:</span> <span class="s">"two"</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c"># Get the function from switcher dictionary</span>
    <span class="n">func</span> <span class="o">=</span> <span class="n">switcher</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="s">"nothing"</span><span class="p">)</span>
    <span class="c"># Execute the function</span>
    <span class="k">return</span> <span class="n">func</span><span class="p">()</span>
</pre></div>
<p>While the code inside <tt class="docutils literal">zero()</tt> and <tt class="docutils literal">one</tt> are simple, many Python programs use dictionary mappings like this to dispatch complex procedures.</p>
</div>
<div class="section" id="dispatch-methods-for-classes">
<h2>Dispatch Methods for Classes</h2>
<p>If we don't know what method to call on a class, we can use a dispatch method to determine it at runtime.</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">Switcher</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">numbers_to_methods_to_strings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">"""Dispatch method"""</span>
        <span class="c"># prefix the method_name with 'number_' because method names</span>
        <span class="c"># cannot begin with an integer.</span>
        <span class="n">method_name</span> <span class="o">=</span> <span class="s">'number_'</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="c"># Get the method from 'self'. Default to a lambda.</span>
        <span class="n">method</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method_name</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="s">"nothing"</span><span class="p">)</span>
        <span class="c"># Call the method as we return it</span>
        <span class="k">return</span> <span class="n">method</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">number_0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"zero"</span>

    <span class="k">def</span> <span class="nf">number_1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"one"</span>

    <span class="k">def</span> <span class="nf">number_2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">"two"</span>
</pre></div>
<p>Pretty nifty, right?</p>
</div>
<div class="section" id="the-official-answer">
<h2>The Official Answer</h2>
<p>The <a class="reference external" href="https://docs.python.org/2/faq/design.html#why-isn-t-there-a-switch-or-case-statement-in-python">official answer</a> says, "You can do this easily enough with a sequence of <tt class="docutils literal"><span class="pre">if...</span> <span class="pre">elif...</span> <span class="pre">elif...</span> else</tt>". And that you can use dictionary mapping for functions and dispatch methods for classes.</p>
<p>Arguably the official answer doesn't explain anything except for workarounds. In other words, a "non-answer". In my opinion, what the official answer is really trying to say is, "Python doesn't need a case statement."</p>
</div>
<div class="section" id="really">
<h2>Really?</h2>
<p>Yup. But there's more. I've heard people I respect say that switch/case statements in code can be really hard to debug.</p>
<p>Personally I find that argument breaks down as soon as you run into gigantic nested dictionaries used for mapping of code branches. Think about it, a 100+ element nested dictionary is just as hard to debug as a nested switch and case block with 100+ cases.</p>
</div>
<div class="section" id="maybe-dictionary-mapping-runs-faster">
<h2>Maybe Dictionary Mapping Runs Faster?</h2>
<p>Moot as Python doesn't have a case statement. Talking about benchmarks from other languages is pointless as what is faster in one language is not always faster in another. Let's move on.</p>
</div>
<div class="section" id="the-significant-advantage-of-python-s-approach">
<h2>The Significant Advantage of Python's Approach</h2>
<p>Every once in a while I walk into a scenario where Python's approach just works better than a switch/case statement. This is when at runtime I need to add or remove potential items from the mapping. When this occurs, my years of practice of writing dictionary mappings and dispatch methods pays off. I have insights now that I never had back in the day when I relied on switch/case statements.</p>
</div>
<div class="section" id="closing-thoughts">
<h2>Closing Thoughts</h2>
<p>To me, that Python forced me to accumalate lots of practical experience with mappings is a blessing in disguise. The constraint of not having switch/case statements allowed me to create approaches and ideas I may not have developed with it.</p>
<p>Intentional or not, Python's lack of switch/case has been a social construct that made me a better coder.</p>
<p>Enough so that I think this accidental social construct is a better answer than the official one of 'Do this instead!'</p>
<hr class="docutils"/>
<p>The reference book I co-authored with <a class="reference external" href="http://www.codemakesmehappy.com">Audrey Roy Greenfeld</a> on Django best practices, <a class="reference external" href="http://twoscoopspress.com/products/two-scoops-of-django-1-8">Two Scoops of Django 1.8</a>, is now available in both print paperback and PDF formats.</p>
</div>

                    
                </div>
                                </div></body></html>