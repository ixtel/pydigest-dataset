<html><body><div><div itemprop="articleBody"><div class="note"><p class="first admonition-title">Note</p><p class="last">The technique presented here has been obsoleted in pip-7.0. See the <a class="reference external" href="https://pip.pypa.io/en/stable/news.html#release-notes">changelog</a> and <a class="reference external" href="https://github.com/pypa/pip/pull/2618">PR#2618</a>.</p></div><p>On my Windows machine <tt class="docutils literal">numpy</tt> takes 8 minutes to build and install <a class="footnote-reference" href="#id5" id="id1">[*]</a>. And no, that doesn't include the time to <a class="reference external" href="https://blog.ionelmc.ro/2014/12/21/compiling-python-extensions-on-windows/">install the compiler tools</a>, it wouldn't even be close. I'm not sure what's going on, in an Ubuntu VM it builds and installs in under 3 minutes. It's annoying, but fortunately enough there's a nice trick to speed up installation: store all your wheels somewhere and then use that directory as a cache. This makes installing large packages that don't have wheels on PyPI faster even if they don't have C extensions as the <cite>build</cite> step is skipped.</p><p>In case you were wondering, <tt class="docutils literal">pip</tt> doesn't cache the wheels built locally <a class="footnote-reference" href="#id6" id="id2">[1]</a>, so this is worth doing when there are <a class="reference external" href="#wishful-thinking">no wheels</a> for your platform on PyPI.</p><p>On Windows just make a file <tt class="docutils literal"><span class="pre">c:\Users\username\pip\pip.ini</span></tt> and add this in:</p><div class="highlight"><pre><span/><span class="k">[global]</span>
<span class="na">find-links</span> <span class="o">=</span> <span class="s">file://c:/Users/username/.pip-wheelhouse</span>

<span class="k">[wheel]</span>
<span class="na">wheel-dir</span> <span class="o">=</span> <span class="s">c:/Users/username/.pip-wheelhouse</span>
</pre></div><p>For Linux it's <tt class="docutils literal"><span class="pre">/home/username/.pip/pip.conf</span></tt>:</p><div class="highlight"><pre><span/><span class="k">[global]</span>
<span class="na">find-links</span> <span class="o">=</span> <span class="s">file:///home/username/.pip-wheelhouse</span>

<span class="k">[wheel]</span>
<span class="na">wheel-dir</span> <span class="o">=</span> <span class="s">/home/username/.pip-wheelhouse</span>
</pre></div><p>Alternatively, you can use environment variables for this. In your <tt class="docutils literal">.bashrc</tt> or <tt class="docutils literal">.zshrc</tt> add:</p><div class="highlight"><pre><span/><span class="nb">export</span> <span class="nv">STANDARD_CACHE_DIR</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">XDG_CACHE_HOME</span><span class="k">:-</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="p">/.cache</span><span class="si">}</span><span class="s2">/pip"</span>
<span class="nb">export</span> <span class="nv">WHEELHOUSE</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">STANDARD_CACHE_DIR</span><span class="si">}</span><span class="s2">/wheelhouse"</span>
<span class="nb">export</span> <span class="nv">PIP_FIND_LINKS</span><span class="o">=</span><span class="s2">"file://</span><span class="si">${</span><span class="nv">WHEELHOUSE</span><span class="si">}</span><span class="s2">"</span>
<span class="nb">export</span> <span class="nv">PIP_WHEEL_DIR</span><span class="o">=</span><span class="s2">"</span><span class="si">${</span><span class="nv">WHEELHOUSE</span><span class="si">}</span><span class="s2">"</span>
</pre></div><p>Then just run:</p><pre class="literal-block">
pip wheel numpy
</pre><p>That will store the wheel in the default wheel directory, which you've set in the configuration.</p><p>After that <tt class="docutils literal">pip wheel numpy</tt> will be very fast. This is highly desirable especially if you use tools that frequently rebuild the virtualenv, like <a class="reference external" href="https://testrun.org/tox/">Tox</a>.</p><div class="section" id="wishful-thinking"><span id="wheels"/><h2>Wishful thinking<a class="headerlink" href="#wishful-thinking" title="Permalink to this headline"> *</a></h2><p>Ideally package maintainers would upload Windows wheels to PyPI if they have C extensions, as it's <a class="reference external" href="https://packaging.python.org/en/latest/appveyor.html">fairly</a> <a class="reference external" href="https://github.com/ionelmc/cookiecutter-pylibrary#features">easy</a> <a class="footnote-reference" href="#id10" id="id3">[3]</a> with the (<cite>free for open-source</cite>) <a class="reference external" href="http://www.appveyor.com/">AppVeyor CI Service</a>.</p><p>However, for Linux it's not possible to upload wheels <a class="footnote-reference" href="#id10" id="id4">[3]</a> so this trick is still worth doing even when package maintainers notice how easy is to build wheels for Windows :-)</p></div></div></div></body></html>