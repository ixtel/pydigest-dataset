<html><body><div><p>
As part of my wife's job a few years ago, she had to convert images from various file types to .jpg and then resize them to make them smaller. Sure this could be done in programs like GIMP or Photoshop, but it was a time consuming process. To speed things up I wrote her a Python program which would automatically convert and resize any images which were in the same folder as the Python program. It saved her a lot of time.</p>
<p>
Since then there have been a number of occasion when I have had to convert images to .jpg and then resize them, such as when I am using eBay. I always find this a cumbersome task, and often fall back on my Python program to do this for me.
</p><p>
As I am sure this is something you will find useful I have made it the basis of my latest blog post.
</p><p>
The program is quite simple, and does three things.
</p><div><p>
Let us have a look at the whole program first and then we will go through it line by line.</p>
<p>
This is written in Python 2.7.

</p><pre><span class="c">## Required Modules</span>
<span class="kn">import</span> <span class="nn">Image</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c">## Global Variables</span>
<span class="n">FILETYPES</span> <span class="o">=</span> <span class="p">[</span><span class="s">'*.tiff'</span><span class="p">,</span><span class="s">'*.jpeg'</span><span class="p">,</span><span class="s">'*.png'</span><span class="p">]</span>
<span class="n">NEWIMAGESIZE</span> <span class="o">=</span> <span class="mi">400</span>

<span class="c">## Functions</span>
<span class="k">def</span> <span class="nf">convert2jpg</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">FILETYPES</span><span class="p">:</span>
        <span class="n">openFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">types</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span>
            <span class="n">inFile</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> 
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">files</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># gets filename</span>
            <span class="n">outFile</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">".jpg"</span> 
            <span class="n">inFile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outFile</span><span class="p">)</span>
            <span class="k">print</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">" ... converted"</span>
            
    <span class="k">print</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
    <span class="k">return</span> <span class="bp">None</span>

<span class="k">def</span> <span class="nf">delOldFileTypes</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">FILETYPES</span><span class="p">:</span>
        <span class="n">openFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">types</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
            <span class="k">print</span> <span class="n">files</span> <span class="o">+</span> <span class="s">" ... deleted"</span>
            
    <span class="k">print</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
    <span class="k">return</span> <span class="bp">None</span>
    

<span class="k">def</span> <span class="nf">resize</span><span class="p">():</span> 
    <span class="n">openFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'*.jpg'</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span>
        <span class="n">inFile</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">files</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># gets filename</span>
        <span class="n">outFile</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">".jpg"</span>
        <span class="k">print</span> <span class="n">fileName</span>
        <span class="k">print</span> <span class="s">"Origonal size "</span><span class="p">,</span><span class="n">inFile</span><span class="o">.</span><span class="n">size</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>        
        <span class="n">newSize</span> <span class="o">=</span> <span class="n">aspectRatio</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>       
        <span class="n">inFile</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">newSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">newSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span><span class="n">Image</span><span class="o">.</span><span class="n">ANTIALIAS</span><span class="p">)</span>
        <span class="n">inFile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outFile</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">"New Size "</span><span class="p">,</span><span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        
    <span class="k">return</span> <span class="bp">None</span>

<span class="k">def</span> <span class="nf">aspectRatio</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">xDim</span> <span class="o">&lt;=</span> <span class="n">NEWIMAGESIZE</span> <span class="ow">and</span> <span class="n">yDim</span> <span class="o">&lt;=</span> <span class="n">NEWIMAGESIZE</span><span class="p">:</span> <span class="c">#ensures images already correct size are not enlarged.</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>
    
    <span class="k">elif</span> <span class="n">xDim</span> <span class="o">&gt;</span> <span class="n">yDim</span><span class="p">:</span>
        <span class="n">divider</span> <span class="o">=</span> <span class="n">xDim</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">NEWIMAGESIZE</span><span class="p">)</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>
        
    <span class="k">elif</span> <span class="n">yDim</span> <span class="o">&gt;</span> <span class="n">xDim</span><span class="p">:</span>
        <span class="n">divider</span> <span class="o">=</span> <span class="n">yDim</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">NEWIMAGESIZE</span><span class="p">)</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>
       
    <span class="k">elif</span> <span class="n">xDim</span> <span class="o">==</span> <span class="n">yDim</span><span class="p">:</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="n">NEWIMAGESIZE</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="n">NEWIMAGESIZE</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>

<span class="n">convert2jpg</span><span class="p">()</span>
<span class="n">delOldFileTypes</span><span class="p">()</span>
<span class="n">resize</span><span class="p">()</span>

<span class="k">print</span> <span class="p">(</span><span class="s">'All Done!!!'</span><span class="p">)</span>
<span class="nb">raw_input</span><span class="p">(</span><span class="s">'Images Resized... Press any key to continue'</span><span class="p">)</span></pre>
<p>
The first thing we need to do is to import three libraries, which are required for the program.
</p><ul>
<li>Image - Helps us do certain things with the image files.</li>
<li>glob - Helps us with filenames when loading files.</li>
<li>os - Allows us to access operating system dependant functionality. </li>
</ul>
<p>
For those new to programming, these would not be the first lines I would type into my program, but are added as and when required. </p>

<pre><span class="c">## Required Modules</span>
<span class="kn">import</span> <span class="nn">Image</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span></pre>
<p>
Next I have assigned some Global Variables.

</p><pre><span class="c">## Global Variables</span>
<span class="n">FILETYPES</span> <span class="o">=</span> <span class="p">[</span><span class="s">'*.tiff'</span><span class="p">,</span><span class="s">'*.jpeg'</span><span class="p">,</span><span class="s">'*.png'</span><span class="p">]</span>
<span class="n">NEWIMAGESIZE</span> <span class="o">=</span> <span class="mi">400</span></pre>

<ul>
<li>FILETYPES - This is a list of the types of files our program will look for. </li>
<li>NEWIMAGESIZE - This is the maximum number of pixels in either X or Y that our image will become. </li>
</ul><p>
The advantage of global variables is you can change the value in one location, and it will be changed throughout your program.
</p><p>
Now we will write the first of the four functions in our program. The first function converts the images to .jpg format.
</p><p>
Lets look at the whole function, and then I will break it down line by line.

</p><pre><span class="c">## Functions</span>
<span class="k">def</span> <span class="nf">convert2jpg</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">FILETYPES</span><span class="p">:</span>
        <span class="n">openFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">types</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span>
            <span class="n">inFile</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> 
            <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">files</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># gets filename</span>
            <span class="n">outFile</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">".jpg"</span> 
            <span class="n">inFile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outFile</span><span class="p">)</span>
            <span class="k">print</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">" ... converted"</span>
            
    <span class="k">print</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
    <span class="k">return</span> <span class="bp">None</span></pre>
<p>
The first line defines our function. It names the function and, as the brackets are empty, states we are not passing anything into the function.

</p><pre><span class="k">def</span> <span class="nf">convert2jpg</span><span class="p">():</span></pre>
<p>
Earlier we created a global variable, which was a list of all the filetypes we wanted our program to work on.  The next line iterates through that list one filetype at a time.

</p><pre>    <span class="k">for</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">FILETYPES</span><span class="p">:</span></pre>
<p>
Next we use the glob module, which we imported at the start of our program,  to create a list of all the filenames associated with the current 'type' of file we are dealing with. For example, if we are currently running through the FILETYPES and are currently looking at the .tiff files, openFiles will become a list of all the .tiff files in our folder.

</p><pre>        <span class="n">openFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">types</span><span class="p">)</span></pre>
<p>
Now we have our list of files associated with the current file type, we can start to do something with them. The next line iterates through each of the file names, in the list, one at a time.

</p><pre>        <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span></pre>
<p>
We then use the Image module to open the file.

</p><pre>            <span class="n">inFile</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> </pre>
<p>
The next line, although it looks complicated, isn't at all.

</p><pre>            <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">files</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># gets filename</span></pre>
<p>
Lets look at the individual aspects of this line:
</p><ul>
<li>os.path.splitext(files) - Splits the filename from the extension. This creates a list containing [filename , extension]. This uses the os module we imported at the start of our program. </li>
<li>[0] - Ensures we only take the first part of the list. i.e. the filename, and not the extension. </li>
<li>fileName - A variable we store the result in. </li>
</ul>
<p>
See I said it was not difficult!</p>
<p>
<br/></p>
<p>
Now we create the name of the file we will be saving. This will be the same as the current filename, but with a different extension. </p>
<p>
<br/></p>
<p>
</p>

<pre>            <span class="n">outFile</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">".jpg"</span> </pre>
<p>
Then we save the file we opened with the new name.

</p><pre>            <span class="n">inFile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outFile</span><span class="p">)</span></pre>
<p>
We now print the fileName and the words " ... converted" to the screen so we can see which files have been converted.

</p><pre>            <span class="k">print</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">" ... converted"</span></pre>
<p>
Finally we print a blank line, and exit from the function.

</p><pre>    <span class="k">print</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
    <span class="k">return</span> <span class="bp">None</span></pre>
<p>
Remember that we have a few nested for loops in our function. So we will only get to these two lines once we have been through all iterations within the for loops.
</p><p>
Now we move into the second function in our program, which is to delete the original files. The full function is as follows.

</p><pre><span class="k">def</span> <span class="nf">delOldFileTypes</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">types</span> <span class="ow">in</span> <span class="n">FILETYPES</span><span class="p">:</span>
        <span class="n">openFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">types</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
            <span class="k">print</span> <span class="n">files</span> <span class="o">+</span> <span class="s">" ... deleted"</span>
            
    <span class="k">print</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
    <span class="k">return</span> <span class="bp">None</span></pre>
<p>
The first thing you will see is there are a lot of similarities between this function and the previous. It would be possible to add the additional functionality, of deleting the files, into the first function. However I have decided to keep it separate, as this allows greater flexibility in my program. I may not always call the function to delete the old files.
</p><p>
The difference between the functions occurs in the inner for loop.

</p><pre>        <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
            <span class="k">print</span> <span class="n">files</span> <span class="o">+</span> <span class="s">" ... deleted"</span></pre>
<p>
Rather than saving the files as a different type, we instead use

</p><pre>            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">files</span><span class="p">)</span></pre>
<p>
to delete the files, and then print some information saying the files have been deleted.

</p><pre>            <span class="k">print</span> <span class="n">files</span> <span class="o">+</span> <span class="s">" ... deleted"</span></pre>
<p>
Onto our third function.

</p><pre><span class="k">def</span> <span class="nf">resize</span><span class="p">():</span> 
    <span class="n">openFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'*.jpg'</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span>
        <span class="n">inFile</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">files</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># gets filename</span>
        <span class="n">outFile</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">".jpg"</span>
        <span class="k">print</span> <span class="n">fileName</span>
        <span class="k">print</span> <span class="s">"Origonal size "</span><span class="p">,</span><span class="n">inFile</span><span class="o">.</span><span class="n">size</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>        
        <span class="n">newSize</span> <span class="o">=</span> <span class="n">aspectRatio</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>       
        <span class="n">inFile</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">newSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">newSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span><span class="n">Image</span><span class="o">.</span><span class="n">ANTIALIAS</span><span class="p">)</span>
        <span class="n">inFile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outFile</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">"New Size "</span><span class="p">,</span><span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span>
        
    <span class="k">return</span> <span class="bp">None</span></pre>
<p>
Now that we have changed the file type and deleted the old files we can resize the files.
</p><p>
Again the start of the function is similar to what we have seen previously, although we are only working with .jpg files and not other types, so only need one for loop.

</p><pre><span class="k">def</span> <span class="nf">resize</span><span class="p">():</span> 
    <span class="n">openFiles</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s">'*.jpg'</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">openFiles</span><span class="p">:</span>
        <span class="n">inFile</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
        <span class="n">fileName</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">files</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="c"># gets filename</span>
        <span class="n">outFile</span> <span class="o">=</span> <span class="n">fileName</span> <span class="o">+</span> <span class="s">".jpg"</span></pre>
<p>
There is nothing new in that section of the program.
</p><p>
We then print the file name to the screen, and also the size of the original file, which will allow us to compare with the final file size later.

</p><pre>        <span class="k">print</span> <span class="n">fileName</span>
        <span class="k">print</span> <span class="s">"Origonal size "</span><span class="p">,</span><span class="n">inFile</span><span class="o">.</span><span class="n">size</span></pre>
<p>
infile.size gives the number of pixels in the image in the format (xPixels, yPixels), which is a handy reference.
</p><p>
We then separate the X and the Y number of pixels and store them in their own variables, xDim and yDim.

</p><pre>        <span class="n">xDim</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  </pre>
<p>
We send these to another function, whose purpose is to maintain the correct aspect ratio of the image, after is has been resized. We will look at this function in more detail in a minute.

</p><pre>        <span class="n">newSize</span> <span class="o">=</span> <span class="n">aspectRatio</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>    </pre>
<p>
The result is stored in a variable called newSize.
</p><p>
Using our new size of image we can resize the image.

</p><pre>        <span class="n">inFile</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">newSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">newSize</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span><span class="n">Image</span><span class="o">.</span><span class="n">ANTIALIAS</span><span class="p">)</span></pre>
<p>
This resizes the current inFile and saves the result also as inFile using the resize command. Effectively overwriting what is being stored as inFile.
</p><p>
It looks a little complicated to the right of resize, but it isn't.

</p><pre><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newSize</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="nb">int</span><span class="p">(</span><span class="n">newSize</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span></pre>
<p>
This refers to the size that we want to resize the image to, in the format (X dimension ,Y dimension).
</p><ul>
<li>newsize[0] takes the first item from the newSize list, which is the X value, and then ensures it is a whole number by converting it to an integer (int).</li>
<li>newsize[1] does the same for the Y value. </li>
</ul>
<p>
Finally Image.ANTIALIAS improves the image quality. What exactly AntiAlias does is outside the scope of this blog!

</p><pre>        <span class="n">inFile</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">outFile</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">"New Size "</span><span class="p">,</span><span class="n">inFile</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span></pre>
<p>
Next we save the file, and again print some information showing the new file size.
</p><p>
We then return from the function.

</p><pre>    <span class="k">return</span> <span class="bp">None</span></pre>
<p>
The fourth function is the function we referred to in the third function, the apectRatio function. As always lets look at the full function and then break it down into more detail.

</p><pre><span class="k">def</span> <span class="nf">aspectRatio</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">):</span>
    
    <span class="k">if</span> <span class="n">xDim</span> <span class="o">&lt;=</span> <span class="n">NEWIMAGESIZE</span> <span class="ow">and</span> <span class="n">yDim</span> <span class="o">&lt;=</span> <span class="n">NEWIMAGESIZE</span><span class="p">:</span> <span class="c">#ensures images already correct size are not enlarged.</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>
    
    <span class="k">elif</span> <span class="n">xDim</span> <span class="o">&gt;</span> <span class="n">yDim</span><span class="p">:</span>
        <span class="n">divider</span> <span class="o">=</span> <span class="n">xDim</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">NEWIMAGESIZE</span><span class="p">)</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>
        
    <span class="k">elif</span> <span class="n">yDim</span> <span class="o">&gt;</span> <span class="n">xDim</span><span class="p">:</span>
        <span class="n">divider</span> <span class="o">=</span> <span class="n">yDim</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">NEWIMAGESIZE</span><span class="p">)</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span>
       
    <span class="k">elif</span> <span class="n">xDim</span> <span class="o">==</span> <span class="n">yDim</span><span class="p">:</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="n">NEWIMAGESIZE</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="n">NEWIMAGESIZE</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span></pre>

<p>
Firstly why is this function needed? Well, if you are resizing images, you need to maintain the ratio between the X and the Y dimension, otherwise the image will look distorted. This function helps work out what the new values should be, ensuring a good relationship is maintained.
</p><p>
First of all we define the function name, and pass in the current size of the image, xDim and yDim.

</p><pre><span class="k">def</span> <span class="nf">aspectRatio</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">):</span></pre>
<p>
Right at the start of our program we created a global variable called NEWIMAGESIZE. This defined the largest value, in terms of the number of pixels in either X or Y, that our resized image should have.
</p><p>
The first two lines checks if either the X or Y dimension of our image is less than or equal to (&lt;=) NEWIMAGESIZE. If it is, then we don't need to modify the size of our image.

</p><pre>    <span class="k">if</span> <span class="n">xDim</span> <span class="o">&lt;=</span> <span class="n">NEWIMAGESIZE</span> <span class="ow">and</span> <span class="n">yDim</span> <span class="o">&lt;=</span> <span class="n">NEWIMAGESIZE</span><span class="p">:</span> <span class="c">#ensures images already correct size are not enlarged.</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span></pre>
<p>
We just return xDim and yDim unchanged.
</p><p>
We now do another check using elif (else if).

</p><pre>    <span class="k">elif</span> <span class="n">xDim</span> <span class="o">&gt;</span> <span class="n">yDim</span><span class="p">:</span></pre>
<p>
This checks to see if the image is a landscape image i.e. there are more pixels in X than in Y.
</p><p>
If this statement is true, we need to reduce the X size down to the value in NEWIMAGESIZE. We can do this by dividing xDim by a value we will store in a variable called divider. Firstly we need to determine the value of divider.
</p><p>
By dividing the size of X (xDim) by the value we need it to become, i.e. NEWIMAGESIZE, we get a the value of divider, we can use this to determine the new size of X and Y. I have also made this a float to ensure some decimal points for accuracy.


</p><pre>        <span class="n">divider</span> <span class="o">=</span> <span class="n">xDim</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">NEWIMAGESIZE</span><span class="p">)</span></pre>
<p>
It figures if we now take xDim and divide it by our value stored in divider, we will get a new value of xDim, which should be the same as the value in NEWIMAGESIZE.

</p><pre>        <span class="n">xDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span></pre>
<p>
If we also divide yDIM by divider, we will get a new value of yDim. As yDim was smaller than xDim, then it follows that the new value of yDim should be less than NEWIMAGESIZE.
</p><p>
As both xDim and yDim have been divided by the same value, they will maintain the same aspect ratio as the original image.
</p><p>
Now we just return the values of xDim and yDim.

</p><pre>        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span></pre>
<p>
The next section is almost identical.

</p><pre>    <span class="k">elif</span> <span class="n">yDim</span> <span class="o">&gt;</span> <span class="n">xDim</span><span class="p">:</span>
        <span class="n">divider</span> <span class="o">=</span> <span class="n">yDim</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">NEWIMAGESIZE</span><span class="p">)</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">yDim</span><span class="o">/</span><span class="n">divider</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span></pre>
<p>
However this is for the case where the image is larger in Y than X. i.e. the image is portrait rather than landscape. In this case we want the yDim to become equal to the size of NEWSIZEIMAGE. Therefore yDim is used to calculate the value of divider.
</p><p>
The final section covers if the image is square. In that case both xDim and yDim can be made equal to NEWSIZEIMAGE.

</p><pre>    <span class="k">elif</span> <span class="n">xDim</span> <span class="o">==</span> <span class="n">yDim</span><span class="p">:</span>
        <span class="n">xDim</span> <span class="o">=</span> <span class="n">NEWIMAGESIZE</span>
        <span class="n">yDim</span> <span class="o">=</span> <span class="n">NEWIMAGESIZE</span>
        <span class="k">return</span><span class="p">(</span><span class="n">xDim</span><span class="p">,</span> <span class="n">yDim</span><span class="p">)</span></pre>
<p>
Right that is all the functions written. We now just have to call them.

</p><pre><span class="n">convert2jpg</span><span class="p">()</span>
<span class="n">delOldFileTypes</span><span class="p">()</span>
<span class="n">resize</span><span class="p">()</span></pre>
<p>
Finally I have added a message to say that everything is complete, and asking for the user to press a key to continue.

</p><pre><span class="k">print</span> <span class="p">(</span><span class="s">'All Done!!!'</span><span class="p">)</span>
<span class="nb">raw_input</span><span class="p">(</span><span class="s">'Images Resized... Press any key to continue'</span><span class="p">)</span></pre>
<p>
<span class="p"><br/></span></p>
<p>
<span class="p">That brings us to the end of the program. </span><br/>
<span class="p"><br/></span>
<span class="p">I hope you have found this blog post useful. It is certainly a Python program that is my first port of call when I need to resize images.</span></p>
</div>
</div></body></html>