<html><body><div><div class="post-text" itemprop="text">

<p>I am trying to use python's <code>jenkinsapi</code> to automate some builds. It looks like everything works fine, and the build is successful. However, when I check the status through my script to ensure the success of the build, I get a <code>None</code> value rather than the expected 'SUCCESS'. If I open a new python shell and query the same build for its status, I <strong>do</strong> get the 'SUCCESS' value.<br/>
My code is:</p>

<pre><code>from jenkinsapi.jenkins import Jenkins
from time import sleep

jk = Jenkins(jenkins_url,user,password)
my_job = jk['my_job']
params = {'param_1': 'value_1', 'param_2': 'value_2',...}
build_num = my_job.get_next_build_number()
print(build_num)    # will print the right number, for example 174
my_job.invoke(build_params=params)
sleep(10)
build = my_job.get_build(build_num)
while build.is_running():
    sleep(3)
sleep(10)
print(build.get_status())   # will print 'None'
if build.get_status() != 'SUCCESS':
    sys.exit('Jenkins build failed')
</code></pre>

<p>As you see, I have added some 'sleeps' to make sure this is not a latency issue (tried longer periods too). I have also tried using the <code>build.block_until_complete()</code> method, but it doesn't seem to do anything.  </p>

<p>Any ideas why I am receiving this status, despite the success of the build?<br/>
Thanks!</p>
    </div>
    </div></body></html>