<html><body><div><div class="entry-content"><h2>Django</h2><p>If you want to start with python web development, you could use a web framework named Django. It is designed to be fast, secure and scalable. It comes with an object-relational mapper (ORM), which means that objects in Python are mapped to objects in  a database.</p><p>Applications created with Django are separated in three separate layers: model (database), view (appearance) and controller (logic), or shortly themodel-view-controller (MVC) architecture.</p><h2>Setting up Django</h2><p>Start with:</p><p class="wp-terminal">user@computer:$ django-admin startproject mysite<br/></p><p>This will create the directory mysite.  Open  mysite/mysite/settings.py.  You can configure your desired database here:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python">DATABASES <span>=</span> <span>{</span>
    <span>'default'</span>: <span>{</span>
        <span>'ENGINE'</span>: <span>'django.db.backends.sqlite3'</span><span>,</span>
        <span>'NAME'</span>: <span>os</span>.<span>path</span>.<span>join</span><span>(</span>BASE_DIR<span>,</span> <span>'db.sqlite3'</span><span>)</span><span>,</span>
    <span>}</span>
<span>}</span></pre></td></tr></table></div><p>Pick from sqlite3, postgresql_psycopg2, mysql or oracle.  Name is the name of your database. If you use SQLite the database will be created automatically. For MySQL and Postgresql you need to create the database yourself.  Go up one directory to /mysite/ and run:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python">python manage.<span>py</span> runserver</pre></td></tr></table></div><p>The terminal should say:</p><p class="wp-terminal">user@computer:$ Performing system checks...<br/><br/>System check identified no issues (0 silenced).<br/><br/>You have unapplied migrations; your app may not work properly until they are applied.<br/>Run 'python manage.py migrate' to apply them.<br/><br/>August 16, 2015 - 14:45:29<br/>Django version 1.7.1, using settings 'myapp.settings'<br/>Starting development server at http://127.0.0.1:8000/<br/>Quit the server with CONTROL-C.<br/>[16/Aug/2015 14:45:35] "GET / HTTP/1.1" 200 1759<br/><br/></p><p>Open <a href="http://127.0.0.1:8000" target="_blank">http://127.0.0.1:8000</a> in your web browser and you should see:</p><figure id="attachment_1710" class="wp-caption alignnone"><a href="https://pythonspot.com/wp-content/uploads/2015/08/python_django.jpg"><img class="size-full wp-image-1710" src="https://pythonspot.com/wp-content/uploads/2015/08/python_django.jpg" alt="django" srcset="https://pythonspot.com/wp-content/uploads/2015/08/python_django-300x157.jpg 300w, https://pythonspot.com/wp-content/uploads/2015/08/python_django.jpg 937w" sizes="(max-width: 937px) 100vw, 937px"/></a><figcaption class="wp-caption-text">Our first Django app.</figcaption></figure><p>Now we created a project, we create an app. A project can have many apps.</p><p class="wp-terminal">user@computer:$ python manage.py startapp notes<br/><br/></p><p>This creates the files:</p><pre class="lang:default highlight:0 decode:true">notes/
    __init__.py
    admin.py
    migrations/
        __init__.py
    models.py
    tests.py
    views.py</pre><h2>Django database model</h2><p>Change /mysite/notes/models.py to:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python"><span>from</span> django.<span>db</span> <span>import</span> models
 
<span>class</span> Note<span>(</span>models.<span>Model</span><span>)</span>:
    text <span>=</span> models.<span>CharField</span><span>(</span>max_length<span>=</span><span>120</span><span>)</span>
    created <span>=</span> models.<span>DateTimeField</span><span>(</span>auto_now_add<span>=</span><span>True</span><span>)</span></pre></td></tr></table></div><p>Open /mysite/mysite/settings.py, add the web app:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python">INSTALLED_APPS <span>=</span> <span>(</span>
    <span>'django.contrib.admin'</span><span>,</span>
    <span>'django.contrib.auth'</span><span>,</span>
    <span>'django.contrib.contenttypes'</span><span>,</span>
    <span>'django.contrib.sessions'</span><span>,</span>
    <span>'django.contrib.messages'</span><span>,</span>
    <span>'django.contrib.staticfiles'</span><span>,</span>
    <span>'notes'</span>
<span>)</span></pre></td></tr></table></div><p>Run</p><p class="wp-terminal">user@computer:$ python manage.py syncdb<br/><br/></p><p>which will update the database.  We then update /mysite/mysite/admin.py to:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python"><span>from</span> django.<span>contrib</span> <span>import</span> admin
 
<span># Register your models here.</span>
<span>from</span> .<span>models</span> <span>import</span> Note
 
<span>class</span> NoteAdmin<span>(</span>admin.<span>ModelAdmin</span><span>)</span>:
    <span>class</span> Meta:
        model <span>=</span> Note
 
admin.<span>site</span>.<span>register</span><span>(</span>Note<span>,</span>NoteAdmin<span>)</span></pre></td></tr></table></div><p>Run:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python">python manage.<span>py</span> makemigrations notes
python manage.<span>py</span> migrate</pre></td></tr></table></div><p>Start your server using:</p><p class="wp-terminal">user@computer:$ manage.py runserver<br/><br/></p><p>Once you open up the admin panel <a href="http://127.0.0.1:8000/admin" target="_blank">http://127.0.0.1:8000/admin</a>,  Notes will appear on the page:</p><figure id="attachment_1715" class="wp-caption alignnone"><a href="https://pythonspot.com/wp-content/uploads/2015/08/django_admin.png"><img class="size-full wp-image-1715" src="https://pythonspot.com/wp-content/uploads/2015/08/django_admin.png" alt="django_admin" srcset="https://pythonspot.com/wp-content/uploads/2015/08/django_admin-300x115.png 300w, https://pythonspot.com/wp-content/uploads/2015/08/django_admin.png 830w" sizes="(max-width: 830px) 100vw, 830px"/></a><figcaption class="wp-caption-text">Django admin panel</figcaption></figure><p>If you click on notes you can view all notes and add/delete them:</p><figure id="attachment_1720" class="wp-caption alignnone"><a href="https://pythonspot.com/wp-content/uploads/2015/08/django_database.png"><img class="size-full wp-image-1720" src="https://pythonspot.com/wp-content/uploads/2015/08/django_database.png" alt="django_database" srcset="https://pythonspot.com/wp-content/uploads/2015/08/django_database-300x171.png 300w, https://pythonspot.com/wp-content/uploads/2015/08/django_database.png 839w" sizes="(max-width: 839px) 100vw, 839px"/></a><figcaption class="wp-caption-text">Django database admin menu.</figcaption></figure><h2>Show the data</h2><p>We have all our data in the database, now we want to create our app. Open /mysite/settings.py  and add:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python"><span>#print "base dir path", BASE_DIR</span>
<span>#print os.path.join(os.path.dirname(BASE_DIR), "mysite", "static",  "templates")</span>
 
TEMPLATE_DIRS <span>=</span> <span>(</span>
    <span>os</span>.<span>path</span>.<span>join</span><span>(</span><span>os</span>.<span>path</span>.<span>dirname</span><span>(</span>BASE_DIR<span>)</span><span>,</span> <span>"mysite"</span><span>,</span> <span>"static"</span><span>,</span>  <span>"templates"</span><span>)</span><span>,</span>
    <span>#'/home/frankbox/python/djangoapp/mysite/static/templates',</span>
<span>)</span></pre></td></tr></table></div><p>to the bottom of the file. This defines the directory of our templates (html).</p><p>Change /mysite/mysite/urls.py to:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python"><span>from</span> django.<span>conf</span>.<span>urls</span> <span>import</span> patterns<span>,</span> include<span>,</span> url
<span>from</span> django.<span>contrib</span> <span>import</span> admin
 
urlpatterns <span>=</span> patterns<span>(</span><span>''</span><span>,</span>
    <span># Examples:</span>
    <span># url(r'^$', 'mysite.views.home', name='home'),</span>
    <span># url(r'^blog/', include('blog.urls')),</span>
    url<span>(</span>r<span>'^$'</span><span>,</span> <span>'notes.views.home'</span><span>,</span> name<span>=</span><span>'home'</span><span>)</span><span>,</span>
    url<span>(</span>r<span>'^admin/'</span><span>,</span> include<span>(</span>admin.<span>site</span>.<span>urls</span><span>)</span><span>)</span><span>,</span>
<span>)</span></pre></td></tr></table></div><p>Finally create /mysite/static/templates/ and add note.html, which is a simple static html file.</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python">&amp;lt<span>;!</span>DOCTYPE html&amp;gt<span>;</span>
    &amp;lt<span>;</span>html&amp;gt<span>;</span>
        &amp;lt<span>;</span>head&amp;gt<span>;</span>
        &amp;lt<span>;</span>/head&amp;gt<span>;</span>
 
        &amp;lt<span>;</span>body&amp;gt<span>;</span>
            &amp;lt<span>;</span>b&amp;gt<span>;</span>Hello&amp;lt<span>;</span>/b&amp;gt<span>;</span>
        &amp;lt<span>;</span>/body&amp;gt<span>;</span>
    &amp;lt<span>;</span>/html&amp;gt<span>;</span></pre></td></tr></table></div><p>Open <a href="http://127.0.0.1:8000/" target="_blank">http://127.0.0.1:8000/</a> to test if works.   Change note.html to:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python">&amp;lt<span>;!</span>DOCTYPE html&amp;gt<span>;</span>
    &amp;lt<span>;</span>html&amp;gt<span>;</span>
        &amp;lt<span>;</span>head&amp;gt<span>;</span>
        &amp;lt<span>;</span>/head&amp;gt<span>;</span>
 
        &amp;lt<span>;</span>body&amp;gt<span>;</span>
          &amp;lt<span>;</span>h2&amp;gt<span>;</span>Notes&amp;lt<span>;</span>/h2&amp;gt<span>;</span>
          &amp;lt<span>;</span>ul&amp;gt<span>;</span>
          <span>{</span>% <span>for</span> note <span>in</span> notes.<span>all</span> %<span>}</span>
              &amp;lt<span>;</span>li&amp;gt<span>;</span><span>{</span><span>{</span> note.<span>text</span> <span>}</span><span>}</span>&amp;lt<span>;</span>/li&amp;gt<span>;</span>
          <span>{</span>% endfor %<span>}</span>
        &amp;lt<span>;</span>/ul&amp;gt<span>;</span>
        &amp;lt<span>;</span>/body&amp;gt<span>;</span>
    &amp;lt<span>;</span>/html&amp;gt<span>;</span></pre></td></tr></table></div><p>Then open /mysite/notes/views.py and change to:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python"><span>from</span> django.<span>shortcuts</span> <span>import</span> render<span>,</span> render_to_response<span>,</span> RequestContext
<span>from</span> django.<span>template</span> <span>import</span> RequestContext<span>,</span> loader
<span>from</span> django.<span>http</span> <span>import</span> HttpResponse
<span>from</span> .<span>models</span> <span>import</span> Note
 
<span># Create your views here.</span>
 
<span>def</span> home<span>(</span>request<span>)</span>:
    notes <span>=</span> Note.<span>objects</span>
    template <span>=</span> loader.<span>get_template</span><span>(</span><span>'note.html'</span><span>)</span>
    context <span>=</span> <span>{</span><span>'notes'</span>: notes<span>}</span>
    <span>return</span> render<span>(</span>request<span>,</span> <span>'note.html'</span><span>,</span> context<span>)</span>
    <span>#return render_to_response("note.html", notes)</span></pre></td></tr></table></div><p>Once you fire up your browser you will see the list of notes:</p><figure id="attachment_1723" class="wp-caption alignnone"><a href="https://pythonspot.com/wp-content/uploads/2015/08/django_app.png"><img class="size-full wp-image-1723" src="https://pythonspot.com/wp-content/uploads/2015/08/django_app.png" alt="django app" srcset="https://pythonspot.com/wp-content/uploads/2015/08/django_app-300x196.png 300w, https://pythonspot.com/wp-content/uploads/2015/08/django_app.png 541w" sizes="(max-width: 541px) 100vw, 541px"/></a><figcaption class="wp-caption-text">django app</figcaption></figure><h2>Insert data</h2><p>While it’s nice to have a list, we want to add some notes to it.<br/> Create the file /mysite/notes/forms.py</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python"><span>from</span> django <span>import</span> forms
<span>from</span> .<span>models</span> <span>import</span> Note
 
<span>class</span> NoteForm<span>(</span>forms.<span>ModelForm</span><span>)</span>:
    <span>class</span> Meta:
        model <span>=</span> Note</pre></td></tr></table></div><p>Change view.py to:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python"><span>from</span> django.<span>shortcuts</span> <span>import</span> render<span>,</span> render_to_response<span>,</span> RequestContext
<span>from</span> django.<span>template</span> <span>import</span> RequestContext<span>,</span> loader
<span>from</span> django.<span>http</span> <span>import</span> HttpResponse
<span>from</span> .<span>models</span> <span>import</span> Note
<span>from</span> .<span>forms</span> <span>import</span> NoteForm
 
<span># Create your views here.</span>
 
<span>def</span> home<span>(</span>request<span>)</span>:
    notes <span>=</span> Note.<span>objects</span>
    template <span>=</span> loader.<span>get_template</span><span>(</span><span>'note.html'</span><span>)</span>
    form <span>=</span> NoteForm<span>(</span>request.<span>POST</span> <span>or</span> <span>None</span><span>)</span>
    <span>if</span> form.<span>is_valid</span><span>(</span><span>)</span>:
        save_it <span>=</span> form.<span>save</span><span>(</span>commit<span>=</span><span>False</span><span>)</span>
        save_it.<span>save</span><span>(</span><span>)</span> 
 
    context <span>=</span> <span>{</span><span>'notes'</span>: notes<span>,</span> <span>'form'</span>: form<span>}</span>
    <span>return</span> render<span>(</span>request<span>,</span> <span>'note.html'</span><span>,</span> context<span>)</span>
    <span>#return render_to_response("note.html", notes)</span></pre></td></tr></table></div><p>Finally we update note.html to:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python">&amp;lt<span>;!</span>DOCTYPE html&amp;gt<span>;</span>
    &amp;lt<span>;</span>html&amp;gt<span>;</span>
        &amp;lt<span>;</span>head&amp;gt<span>;</span>
        &amp;lt<span>;</span>/head&amp;gt<span>;</span>
 
        &amp;lt<span>;</span>body&amp;gt<span>;</span>
          &amp;lt<span>;</span>h2&amp;gt<span>;</span>Notes&amp;lt<span>;</span>/h2&amp;gt<span>;</span>
          &amp;lt<span>;</span>ul&amp;gt<span>;</span>
          <span>{</span>% <span>for</span> note <span>in</span> notes.<span>all</span> %<span>}</span>
              &amp;lt<span>;</span>li&amp;gt<span>;</span><span>{</span><span>{</span> note.<span>text</span> <span>}</span><span>}</span>&amp;lt<span>;</span>/li&amp;gt<span>;</span>
          <span>{</span>% endfor %<span>}</span>
        &amp;lt<span>;</span>/ul&amp;gt<span>;</span>
 
        &amp;lt<span>;</span>form method<span>=</span><span>'POST'</span> action<span>=</span><span>''</span>&amp;gt<span>;</span><span>{</span>% csrf_token %<span>}</span>
            <span>{</span><span>{</span> form.<span>as_p</span> <span>}</span><span>}</span>
            &amp;lt<span>;</span><span>input</span> <span>type</span><span>=</span><span>'submit'</span>&amp;gt<span>;</span>
        &amp;lt<span>;</span>/form&amp;gt<span>;</span>
 
        &amp;lt<span>;</span>/body&amp;gt<span>;</span>
    &amp;lt<span>;</span>/html&amp;gt<span>;</span></pre></td></tr></table></div><p>Run it and we have our note taking app <img src="https://pythonspot.com/wp-includes/images/smilies/simple-smile.png" alt=":-)" class="wp-smiley"/></p><figure id="attachment_1726" class="wp-caption alignnone"><a href="https://pythonspot.com/wp-content/uploads/2015/08/django_app_insert.png"><img class="size-full wp-image-1726" src="https://pythonspot.com/wp-content/uploads/2015/08/django_app_insert.png" alt="django_app_insert" srcset="https://pythonspot.com/wp-content/uploads/2015/08/django_app_insert-300x201.png 300w, https://pythonspot.com/wp-content/uploads/2015/08/django_app_insert.png 635w" sizes="(max-width: 635px) 100vw, 635px"/></a><figcaption class="wp-caption-text">Djano note taking app</figcaption></figure><h2>Styling the app</h2><p>By modifying the note.html we can style it like any other html/css website.  If you change note.html to:</p><div class="wp_syntax"><table><tr><td class="code"><pre class="python">&amp;lt<span>;!</span>DOCTYPE html&amp;gt<span>;</span>
    &amp;lt<span>;</span>html&amp;gt<span>;</span>
        &amp;lt<span>;</span>head&amp;gt<span>;</span>
            &amp;lt<span>;</span>link href<span>=</span><span>"http://codepen.io/edbond88/pen/CcgvA.css"</span> media<span>=</span><span>"screen"</span> rel<span>=</span><span>"stylesheet"</span> <span>type</span><span>=</span><span>"text/css"</span> /&amp;gt<span>;</span>
            &amp;lt<span>;</span>style&amp;gt<span>;</span>
            body <span>{</span>
              background: rgba<span>(</span><span>222</span><span>,</span><span>222</span><span>,</span><span>222</span><span>,</span><span>1</span><span>)</span><span>;</span>
              margin: 20px<span>;</span>
            <span>}</span>
            &amp;lt<span>;</span>/style&amp;gt<span>;</span>
        &amp;lt<span>;</span>/head&amp;gt<span>;</span>
 
        &amp;lt<span>;</span>body&amp;gt<span>;</span>
          &amp;lt<span>;</span>h1&amp;gt<span>;</span>Django Note Taking App&amp;lt<span>;</span>/h1&amp;gt<span>;</span>
 
          <span>{</span>% <span>for</span> note <span>in</span> notes.<span>all</span> %<span>}</span>
            &amp;lt<span>;</span>aside <span>class</span><span>=</span><span>"note-wrap note-white"</span>&amp;gt<span>;</span>
              &amp;lt<span>;</span>li&amp;gt<span>;</span><span>{</span><span>{</span> note.<span>text</span> <span>}</span><span>}</span>&amp;lt<span>;</span>/li&amp;gt<span>;</span>
            &amp;lt<span>;</span>/aside&amp;gt<span>;</span>
          <span>{</span>% endfor %<span>}</span>
 
        &amp;lt<span>;</span>form method<span>=</span><span>'POST'</span> action<span>=</span><span>''</span>&amp;gt<span>;</span><span>{</span>% csrf_token %<span>}</span>
            <span>{</span><span>{</span> form.<span>as_p</span> <span>}</span><span>}</span>
            &amp;lt<span>;</span><span>input</span> <span>type</span><span>=</span><span>'submit'</span> value<span>=</span><span>'Add note'</span>&amp;gt<span>;</span>
        &amp;lt<span>;</span>/form&amp;gt<span>;</span>
 
        &amp;lt<span>;</span>/body&amp;gt<span>;</span>
    &amp;lt<span>;</span>/html&amp;gt<span>;</span></pre></td></tr></table></div><p>You will get:</p><figure id="attachment_1729" class="wp-caption alignnone"><a href="https://pythonspot.com/wp-content/uploads/2015/08/django_note_app.png"><img class="size-full wp-image-1729" src="https://pythonspot.com/wp-content/uploads/2015/08/django_note_app.png" alt="django_note_app" srcset="https://pythonspot.com/wp-content/uploads/2015/08/django_note_app-300x208.png 300w, https://pythonspot.com/wp-content/uploads/2015/08/django_note_app-1024x711.png 1024w, https://pythonspot.com/wp-content/uploads/2015/08/django_note_app.png 1189w" sizes="(max-width: 1189px) 100vw, 1189px"/></a><figcaption class="wp-caption-text">Django note taking app</figcaption></figure><p> </p><p> </p><p id="epoch-width-sniffer"/></div></div></body></html>