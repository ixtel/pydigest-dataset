<html><body><div><div class="col-md-12">
				<p>The Arduino Yun has built-in WiFi and a second microprocessor which runs Linux. That means that you can write programs in your favorite scripting language and interact with APIs directly from your Arduino.</p>
<p>In this tutorial, we’ll learn how to send SMS and MMS from our Arduino Yun using Python and Twilio. By the end we will:</p>
<ul>
<li>Install pip and the Twilio Python helper library on the Yun</li>
<li>Write a Python script to send an SMS and MMS</li>
<li>Send a text message from an Arduino program</li>
</ul>
<h3>Getting Started</h3>
<p>This tutorial builds on our <a href="http://twilioinc.wpengine.com/2015/02/arduino-wifi-getting-started-arduino-yun.html" title="Getting started with the Arduino Yun – the Arduino with WiFi">Getting Started with the Arduino Yun tutorial</a>, which covers:</p>
<ul>
<li>How to format your SD card for use in the Yun</li>
<li>How to upgrade to the latest version of OpenWRT-Yun</li>
<li>How to install the Arduino IDE</li>
<li>How to run your first sketch on the Yun</li>
</ul>
<p>Assuming you’ve completed those steps, this tutorial on sending text messages should take about 15 minutes. The ingredients you’ll need are:</p>

<p>To get started, <a href="http://twilio.com/try-twilio">sign up for a free Twilio account</a> and buy an MMS enabled phone number:</p>
<p><img class="aligncenter size-full wp-image-16766" src="https://www.twilio.com/blog/wp-content/uploads/2016/01/try-twilio4.gif" alt="try-twilio"/></p>
<h3>Install pip on the Arduino Yun</h3>
<p>In order to install the Twilio Python helper library, we’ll need to install <a href="https://pip.pypa.io/en/latest/index.html" target="_blank">a Python package manager called pip</a>. SSH into your Yun (if you don’t know how to do this, check out our <a href="http://twilioinc.wpengine.com/2015/02/arduino-wifi-getting-started-arduino-yun.html" title="Getting started with the Arduino Yun – the Arduino with WiFi">getting started guide</a>).</p>
<p>From there:</p>

		<div id="crayon-56d5a7a39baf8950504479" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39baf8950504479-1"><span class="crayon-e">opkg </span><span class="crayon-e">update</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39baf8950504479-2"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-e">distribute </span></p><p class="crayon-line" id="crayon-56d5a7a39baf8950504479-3"><span class="crayon-e">opkg </span><span class="crayon-e">install </span><span class="crayon-v">python</span><span class="crayon-o">-</span><span class="crayon-e">openssl </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39baf8950504479-4"><span class="crayon-e">easy_install </span><span class="crayon-v">pip</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>And that’s it — now pip’s installed.</p>
<p>By default,
			<span id="crayon-56d5a7a39bb0d618432234" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">pip</span></span></span>  would install Python packages to the Yun’s onboard memory. However, the official Arduino Yun docs have an ominous warning that says, “You’re discouraged from using the Yún’s built-in non-volatile memory, because it has a limited number of writes.” Let’s install the Twilio library to the SD card instead.</p>
<p>This requires three steps:</p>
<ul>
<li>Create a new directory on the SD card for our Python packages</li>
<li>Set a
			<span id="crayon-56d5a7a39bb17596256546" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">PYTHONPATH</span></span></span>  to tell Python to look for packages there</li>
<li>Force
			<span id="crayon-56d5a7a39bb21596786675" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">pip</span></span></span>  to install the Twilio library in our new directory</li>
</ul>
<p>Plug a properly formatted SD Card into your Arduino (again, check out the <a href="http://twilioinc.wpengine.com/2015/02/arduino-wifi-getting-started-arduino-yun.html" title="Getting started with the Arduino Yun – the Arduino with WiFi">Yun getting started guide</a> if you need help with this), then create a new directory:</p>

		<div id="crayon-56d5a7a39bb2c781905582" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bb2c781905582-1"><span class="crayon-r">mkdir</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">mnt</span><span class="crayon-o">/</span><span class="crayon-v">sda1</span><span class="crayon-o">/</span><span class="crayon-v">python</span><span class="crayon-o">-</span><span class="crayon-v">packages</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Now let’s edit our 
			<span id="crayon-56d5a7a39bb36336497279" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-o">/</span><span class="crayon-v">etc</span><span class="crayon-o">/</span><span class="crayon-v">profile</span></span></span>  and set a
			<span id="crayon-56d5a7a39bb40142618560" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">PYTHONPATH</span></span></span>  so that Python will check our new directory for packages:</p>

		

<p>You’ll see several lines that start with
			<span id="crayon-56d5a7a39bb53185699525" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">export</span></span></span> . Below those lines, then press 
			<span id="crayon-56d5a7a39bb5d109061337" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">i</span></span></span>  to enter insert mode. Then paste this:</p>

		<div id="crayon-56d5a7a39bb67866197752" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bb67866197752-1"><span class="crayon-e">export </span><span class="crayon-v">PYTHONPATH</span><span class="crayon-o">=</span><span class="crayon-o">/</span><span class="crayon-v">mnt</span><span class="crayon-o">/</span><span class="crayon-v">sda1</span><span class="crayon-o">/</span><span class="crayon-v">python</span><span class="crayon-o">-</span><span class="crayon-v">packages</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Press 
			<span id="crayon-56d5a7a39bb71557248759" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">esc</span></span></span>  to go back to command mode. Type 
			<span id="crayon-56d5a7a39bb7b053384414" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-o">:</span><span class="crayon-v">wq</span></span></span>  to save the file and quit vim. Then, from the command line, reload your environment by typing:</p>

		

<p>Finally, install the Twilio library to our 
			<span id="crayon-56d5a7a39bb8f501919165" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">python</span><span class="crayon-o">-</span><span class="crayon-v">packages</span></span></span>  directory:</p>

		<div id="crayon-56d5a7a39bb99155808096" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bb99155808096-1"><span class="crayon-e">pip </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-v">target</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">mnt</span><span class="crayon-o">/</span><span class="crayon-v">sda1</span><span class="crayon-o">/</span><span class="crayon-v">python</span><span class="crayon-o">-</span><span class="crayon-e">packages </span><span class="crayon-v">twilio</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h3>Send SMS from your Arduino Yun</h3>
<p>If you don’t already have a Twilio account, <a href="http://twilio.com/try-twilio" target="_blank">sign up now</a>. You can do everything in this tutorial with the free trial.</p>
<p>We’re going to write a simple Python script to send a text message. There are two ways we could get this code on our Arduino:</p>
<ul>
<li>plug the SD card into our computer, write the code there using our favorite text editor, save it to the card and plug the it back into the Yun.</li>
<li>Write the code directly on the Yun using Vim</li>
</ul>
<p>For this tutorial, we’ll go with the latter.</p>
<p>First we need to make a directory for our Python code and navigate there:</p>

		<div id="crayon-56d5a7a39bba3618928502" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bba3618928502-1"><span class="crayon-r">mkdir</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">mnt</span><span class="crayon-o">/</span><span class="crayon-v">sda1</span><span class="crayon-o">/</span><span class="crayon-e">arduino</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bba3618928502-2"><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">mnt</span><span class="crayon-o">/</span><span class="crayon-v">sda1</span><span class="crayon-o">/</span><span class="crayon-v">arduino</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Then create a new python script using Vim:</p>

		

<p>Once in Vim, press 
			<span id="crayon-56d5a7a39bbb7745276043" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">i</span></span></span>  to enter insert mode. Then include the Twilio python library:</p>

		<div id="crayon-56d5a7a39bbc1229714847" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bbc1229714847-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">twilio</span><span class="crayon-sy">.</span><span class="crayon-e">rest </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">TwilioRestClient</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Next we need to set our Twilio credentials. In a browser, navigate over to your <a href="https://www.twilio.com/user/account/voice-messaging">Twilio Dashboard</a>, and click <em>Show Credentials</em>.</p>
<p><img class="alignnone size-full wp-image-14724" src="https://www.twilio.com/blog/wp-content/uploads/2015/02/twilio-credentials1.gif" alt="twilio-credentials"/></p>
<p>Copy these values into variables:</p>

		<div id="crayon-56d5a7a39bbcb425583377" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bbcb425583377-1"><span class="crayon-v">account_sid</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"YOURACCOUNTSID"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bbcb425583377-2"><span class="crayon-v">auth_token</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"YOURAUTHTOKEN"</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Then create variables for both the Twilio phone number you’ll be using for this project and your personal cellphone:</p>

		<div id="crayon-56d5a7a39bbd6210386153" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bbd6210386153-1"><span class="crayon-v">twilio_phone_number</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"YOURTWILIONUMBER"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bbd6210386153-2"><span class="crayon-v">cellphone</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"YOURCELLPHONE"</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Create a REST client to connect with the Twilio API.</p>

		<div id="crayon-56d5a7a39bbe7477137650" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bbe7477137650-1"><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">TwilioRestClient</span><span class="crayon-sy">(</span><span class="crayon-v">account_sid</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">auth_token</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Once we’ve got our client, sending an SMS a simple exercise of passing a
			<span id="crayon-56d5a7a39bbf9346238709" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-st">to</span></span></span> ,
			<span id="crayon-56d5a7a39bc0c271370948" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">from</span></span></span> , and a
			<span id="crayon-56d5a7a39bc1e107017583" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">body</span></span></span>  to 
			<span id="crayon-56d5a7a39bc31724613181" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-v">messages</span><span class="crayon-sy">.</span><span class="crayon-e">create</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> :</p>

		<div id="crayon-56d5a7a39bc43774359661" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bc43774359661-1"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-v">messages</span><span class="crayon-sy">.</span><span class="crayon-e">create</span><span class="crayon-sy">(</span><span class="crayon-v">to</span><span class="crayon-o">=</span><span class="crayon-v">cellphone</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">from_</span><span class="crayon-o">=</span><span class="crayon-v">twilio_phone_number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">body</span><span class="crayon-o">=</span><span class="crayon-s">"COMING TO YOU LIVE FROM THE ARDUINO YUN!"</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Type 
			<span id="crayon-56d5a7a39bc55906492832" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-o">:</span><span class="crayon-v">wq</span></span></span>  and press enter to save and exit. Then run our script:</p>

		

<p>If all goes well your phone should light up with a text message. If all doesn’t go well but Python didn’t give you an error message, check the <a href="https://www.twilio.com/user/account/developer-tools/app-monitor">Dev Tools</a> under your Twilio Dashboard.</p>
<p>Chances are, you don’t want to edit the Python script every time you want to change the message body. Let’s modify the script to accept a message body from the command line parameter:</p>
<p>Open 
			<span id="crayon-56d5a7a39bc7a034356914" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">send</span><span class="crayon-o">-</span><span class="crayon-v">sms</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></span></span>  again and add this line to the top of your file:</p>

		

<p>Then change the line that sends the SMS to replace the hardcoded message body with the first command line argument:</p>

		<div id="crayon-56d5a7a39bc9e145554559" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bc9e145554559-1"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-v">messages</span><span class="crayon-sy">.</span><span class="crayon-e">create</span><span class="crayon-sy">(</span><span class="crayon-v">to</span><span class="crayon-o">=</span><span class="crayon-v">cellphone</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">from_</span><span class="crayon-o">=</span><span class="crayon-v">twilio_phone_number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">body</span><span class="crayon-o">=</span><span class="crayon-k ">sys</span><span class="crayon-sy">.</span><span class="crayon-v">argv</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Save and quit vim, then run your script again with the message body in quotes:</p>

		<div id="crayon-56d5a7a39bcb0026136238" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bcb0026136238-1"><span class="crayon-e">python </span><span class="crayon-v">send</span><span class="crayon-o">-</span><span class="crayon-v">sms</span><span class="crayon-sy">.</span><span class="crayon-i">py</span><span class="crayon-h"> </span><span class="crayon-s">"Coming to you live from the Arduino command line!"</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h3>Send MMS from your Arudino Yun</h3>
<p>Last year Twilio launched the ability to send picture messages, a.k.a. MMS. To send an MMS we need only to pass one additional parameter to the 
			<span id="crayon-56d5a7a39bcc2702915809" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-v">messages</span><span class="crayon-sy">.</span><span class="crayon-v">create</span></span></span> method: a 
			<span id="crayon-56d5a7a39bcd1218987818" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">media_url</span></span></span>  to tell Twilio where our picture is located.</p>
<p>For the sake of accurate file names, let’s make a copy of our script. Then open the file in vim:</p>

		<div id="crayon-56d5a7a39bce1279283641" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bce1279283641-1"><span class="crayon-r">cp</span><span class="crayon-h"> </span><span class="crayon-v">send</span><span class="crayon-o">-</span><span class="crayon-v">sms</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-v">send</span><span class="crayon-o">-</span><span class="crayon-v">mms</span><span class="crayon-e">.py</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bce1279283641-2"><span class="crayon-r">vim</span><span class="crayon-h"> </span><span class="crayon-v">send</span><span class="crayon-o">-</span><span class="crayon-v">mms</span><span class="crayon-e">.py</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>We can use a couple of vim’s keyboard shortcuts to navigate to our special spot.</p>
<ul>
<li>Press 
			<span id="crayon-56d5a7a39bcf0525712404" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">shift</span><span class="crayon-o">-</span><span class="crayon-v">g</span></span></span>  to move to the end of the file</li>
<li>Press 
			<span id="crayon-56d5a7a39bcff369463298" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-sy">$</span></span></span>  to move to the end of the line</li>
<li>Press 
			<span id="crayon-56d5a7a39bd0e780738007" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">i</span></span></span>  to insert text at the spot prior to the cursor</li>
<li>Paste this code (make sure you get the preceding comma!):</li>
</ul>
<p/>

		

<p>So that whole line should look like:</p>

		<div id="crayon-56d5a7a39bd2d059170811" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bd2d059170811-1"><span class="crayon-v">client</span><span class="crayon-sy">.</span><span class="crayon-v">messages</span><span class="crayon-sy">.</span><span class="crayon-e">create</span><span class="crayon-sy">(</span><span class="crayon-v">to</span><span class="crayon-o">=</span><span class="crayon-v">cellphone</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">from_</span><span class="crayon-o">=</span><span class="crayon-v">twilio_phone_number</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">body</span><span class="crayon-o">=</span><span class="crayon-k ">sys</span><span class="crayon-sy">.</span><span class="crayon-v">argv</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">media_url</span><span class="crayon-o">=</span><span class="crayon-k ">sys</span><span class="crayon-sy">.</span><span class="crayon-v">argv</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Save and quit vim, and run your script with two parameters: one for the message body, the other with a url of an image you’d like to send. Here’s one of our puppy on the day we brought her home:</p>

		<div id="crayon-56d5a7a39bd3c596406103" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bd3c596406103-1"><span class="crayon-e">python </span><span class="crayon-v">send</span><span class="crayon-o">-</span><span class="crayon-v">mms</span><span class="crayon-sy">.</span><span class="crayon-i">py</span><span class="crayon-h"> </span><span class="crayon-s">"Here’s my puppy."</span><span class="crayon-h"> </span><span class="crayon-v">https</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-o">/</span><span class="crayon-v">s3</span><span class="crayon-sy">.</span><span class="crayon-v">amazonaws</span><span class="crayon-sy">.</span><span class="crayon-v">com</span><span class="crayon-o">/</span><span class="crayon-v">baugues</span><span class="crayon-o">/</span><span class="crayon-v">kaira</span><span class="crayon-o">-</span><span class="crayon-v">puppy</span><span class="crayon-sy">.</span><span class="crayon-v">jpg</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>While you’re waiting for that picture to arrive on your phone, let’s chat about MMS.</p>
<p>First, MMS is a pretty slow way to send data and an image is a few orders of magnitude more data than 140 characters of text. It could take up to 60 seconds before you receive your picture.</p>
<p>Second, because MMS requires a publicly accessible url, it’s a non-trivial exercise to send an MMS with a picture that’s residing on your Yun. Two options are:</p>
<ul>
<li>Open a tunnel through your router to give your Arduino Yun a publicly accessible IP using a service such as <a href="https://yaler.net/">Yaler</a>.</li>
<li>Upload your file to the cloud.</li>
</ul>
<p>If that last method interests you, check out our tutorial on <a href="http://twilioinc.wpengine.com/2015/02/arduino-powered-photobooth-arduino-yun-a-webcam-and-dropbox.html" title="Build a Photobooth with an Arduino Yun, a Webcam and Dropbox">how to build a photobooth with an Arduino Yun</a>, where we demonstrate how to upload pictures to Dropbox from your Yun.</p>
<p>Alright, hopefully by now your picture has arrived on your phone. Let’s play with some Arduino code.</p>
<h3>Send an SMS from an Arduino Sketch</h3>
<p>If all you wanted to do send an SMS, you wouldn’t need an Arduino. The reason we’re doing this on the Yun is so that we can do some hardware hacking along with our software writing. Let’s write an Arduino sketch that will run our text message sending Python script.</p>
<p>Open the Arduino IDE and create a new sketch.</p>
<p>The Arduino Yun has two processors: the “Arduino chip” which controls the pins and interfaces with the hardware, and the “Linux and WiFi Chip.” These two chips communicate with one another via the Bridge  library. The Process  library is how we execute Linux commands from our Arduino code.</p>
<p>At the top of the sketch, include the bridge and process libraries:</p>

		<div id="crayon-56d5a7a39bd4d431818600" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bd4d431818600-1"><span class="crayon-c">#include &lt;Bridge.h&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bd4d431818600-2"><span class="crayon-c">#include &lt;Process.h&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Your sketch comes pre-populated with 
			<span id="crayon-56d5a7a39bd5c907445105" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>  and 
			<span id="crayon-56d5a7a39bd6a731039656" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-e">loop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>  functions. We’ll come back to those in a minute. First, let’s write the function to call our Python script. Add this to the bottom of your sketch:</p>

		<div id="crayon-56d5a7a39bd7c957421307" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bd7c957421307-1"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-v">sendSms</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bd7c957421307-2"><span class="crayon-h">  </span><span class="crayon-i">Process</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Create a process and call it "p"</span></p><p class="crayon-line" id="crayon-56d5a7a39bd7c957421307-3"><span class="crayon-h">  </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">begin</span><span class="crayon-sy">(</span><span class="crayon-s">"python"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Process that launch the "python" command</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bd7c957421307-4"><span class="crayon-h">  </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">addParameter</span><span class="crayon-sy">(</span><span class="crayon-s">"/mnt/sda1/arduino/send-sms.py"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Add the path parameter</span></p><p class="crayon-line" id="crayon-56d5a7a39bd7c957421307-5"><span class="crayon-h">  </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">addParameter</span><span class="crayon-sy">(</span><span class="crayon-s">"\"Coming to you from the sketch\""</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// The message body</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bd7c957421307-6"><span class="crayon-h">  </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">run</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">// Run the process and wait for its termination</span></p><p class="crayon-line" id="crayon-56d5a7a39bd7c957421307-7"><span class="crayon-sy">}</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Now back to our 
			<span id="crayon-56d5a7a39bd8e450167729" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>  and 
			<span id="crayon-56d5a7a39bd9f668784166" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-e">loop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span> . The 
			<span id="crayon-56d5a7a39bdb0182668884" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>  runs one time after you upload the sketch to your Arduino. Ours is pretty simple — we’re just going to initiate the Bridge.</p>

		<div id="crayon-56d5a7a39bdc0645910059" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bdc0645910059-1"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-st">setup</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bdc0645910059-2"> <span class="crayon-h"> </span><span class="crayon-v">Bridge</span><span class="crayon-sy">.</span><span class="crayon-v">begin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5a7a39bdc0645910059-3"><span class="crayon-sy">}</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Our loop is pretty simple too. We’ll call our 
			<span id="crayon-56d5a7a39bdd2720190700" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-e">sendSms</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></span></span>  function, then wait for 10 seconds.</p>

		<div id="crayon-56d5a7a39bde4474383273" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a7a39bde4474383273-1"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-st">loop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bde4474383273-2"> <span class="crayon-h"> </span><span class="crayon-v">sendSms</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5a7a39bde4474383273-3"> <span class="crayon-h"> </span><span class="crayon-st">delay</span><span class="crayon-sy">(</span><span class="crayon-cn">10000</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a7a39bde4474383273-4"><span class="crayon-sy">}</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Click the checkmark in the top left corner to verify your script. Then click the upload button to send your script to the Arduino Yun.</p>
<p><img class="alignnone size-full wp-image-14726" src="https://www.twilio.com/blog/wp-content/uploads/2015/02/arduino-upload1.gif" alt="arduino-upload"/></p>
<p>Shortly after you do that, your phone will light up with a text message. Then another. Then another. Once you’ve had enough, comment out the 
			<span id="crayon-56d5a7a39bdf6651505135" class="crayon-syntax crayon-syntax-inline  crayon-theme-github crayon-theme-github-inline crayon-font-consolas"><span class="crayon-pre crayon-code"><span class="crayon-v">sendSMS</span></span></span>  line in the sketch and re-upload it to your Yun.</p>
<h3>Next Steps</h3>
<p>Now you’ve got an Arduino sketch that can trigger a Python script that can send a message to the 6.8 billion cellphones of the world. What does one do with that kind of power?</p>
<p>Perhaps you could:</p>
<ul>
<li>Use environmental sensors to alert you when the temperature in the fridge rises above a certain temperature</li>
<li>Build security system that texts you when motion is detected in your house</li>
<li>Hook up a webcam and have your dog send you selfies by hitting a big red button</li>
</ul>
<p>Also, if you’re looking to go further with the Yun, check out how to:</p>

<p>Whatever you build with your Arduino Yun, I’d love to hear about it. Leave me a message in the comments below, drop me an email at <a href="mailto:gb@twilio.com">gb@twilio.com</a> or hit me up <a href="http://twitter.com/greggyb">on Twitter</a>.</p>
<p>Happy Hacking!</p>
			</div>
					</div></body></html>