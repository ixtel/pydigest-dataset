<html><body><div><div class="entry clear">
								<p>We recently released <a href="https://github.com/scrapinghub/dateparser">Dateparser 0.3.1</a> with support for Belarusian and Indonesian, as well as the Jalali calendar used in Iran and Afghanistan. With this in mind, we’re taking the opportunity to introduce and demonstrate the features of Dateparser.</p>
<p>Dateparser is an open source library we created to parse dates written using natural language into Python. It translates specific dates like ‘5:47pm 29th of December, 2015’ or ‘9:22am on 15/05/2015’, and even relative times like ‘10 minutes ago’, into Python datetime objects. From there, it’s simple to convert the datetime object into any format you like.</p>
<h1>Who benefits from Dateparser</h1>
<p>When scraping dates from the web, you need them in a structured format so you can easily search, sort, and compare them.</p>
<p>Dates written in natural language aren’t suitable for this. For example, the 24th of December shows up first if you sort the 25th of November and the 24th of December alphanumerically. Dateparser solves this by taking the natural language date and parsing it into a datetime object.</p>
<p>A bonus perk of Dateparser is that you don’t need to worry about translation. It supports <a href="https://github.com/scrapinghub/dateparser">a range of languages</a> including English, French, Spanish, Russian, and Chinese. Better yet, Dateparser autodetects languages, so you don’t need to write any additional code.</p>
<p>This makes Dateparser especially useful when you want to scrape data from websites in multiple languages, such as international job boards or real estate listings, without necessarily knowing what language the data you’re scraping is in. Think <a href="http://www.indeed.com/">Indeed</a>.</p>
<h1>Why we didn’t use similar libraries</h1>
<p>Dateparser developed while we were working on a broad crawl project that involved scraping many forums and blogs. The websites were written in numerous languages and we needed to parse dates in a consistent format.</p>
<p>None of the existing solutions met our needs. So we created Dateparser as a simple set of functions that sanitised the input and passed it to the dateutil library, using parserinfo objects to work with other languages.</p>
<p>This process worked well at first. But as the crawling project matured we ran into problems with short words, strings containing several languages, and a host of other issues. We decided to move away from parserinfo objects and handle language translation on our own. With the help of contributors from the Scrapy community, we significantly improved Dateparser’s language detection feature and made it easier to add languages by using YAML to store the translations.</p>
<p>Dateparser is simple to use and highly extendable. We have successfully used it to extract dates on over 100 million web pages. It’s well tested and robust.</p>
<h1>Peeking under the hood</h1>
<p>You can install Dateparser via pip. Import the library and use the dateparser.parse method to try it out:</p>
<pre>$ pip install dateparser
…
$ python
&gt;&gt;&gt; import dateparser
&gt;&gt;&gt; dateparser.parse('1 week and one day ago')
datetime.datetime(2015, 9, 27, 0, 17, 59, 738361)
</pre>
<h2>Contributing new languages</h2>
<p>Supporting new languages is simple. If yours is missing and you’d like to contribute, send us a pull request after updating the <a href="https://github.com/scrapinghub/dateparser/blob/master/data/languages.yaml">languages.yaml</a> file. Here is what the definitions for French look like:</p>
<pre>    name: French

    skip: ["le", "environ", "et", "à", "er"]

    monday:
        - Lundi
...
    november:
        - Novembre
        - Nov
    december:
        - Décembre
        - Déc
...
    year:
        - an
        - année
        - années
...
    simplifications:
        - avant-hier: 2 jour
        - hier: 1 jour
        - aujourd'hui: 0 jours
        - d'une: 1
        - un: 1
        - une: 1
        - (\d+)\sh\s(\d+)\smin: \1h\2m
        - (\d+)h(\d+)m?: \1:\2
        - moins\s(?:de\s)?(\d+)(\s?(?:[smh]|minute|seconde|heure)): \1\2
</pre>
<h2>Language detection</h2>
<p>When parsing dates, you don’t need to set the language explicitly. Dateparser will detect it for you:</p>
<pre>$ python
&gt;&gt;&gt; import dateparser
&gt;&gt;&gt; dateparser.parse('aujourd\'hui') # French for 'today'
datetime.datetime(2015, 10, 13, 12, 3, 19, 262752)
&gt;&gt;&gt; dateparser.parse('il ya 2 jours') # French for '2 days ago'
datetime.datetime(2015, 10, 11, 12, 3, 19, 262752)
</pre>
<p>See <a href="https://dateparser.readthedocs.org/en/latest/">the documentation</a> for more examples.</p>
<h1>How we measure up</h1>
<p><a href="https://dateutil.readthedocs.org/">Dateutil</a> is the most popular Python library to parse dates. Dateparser actually uses <a href="http://dateutil.readthedocs.org/en/latest/parser.html">dateutil.parser</a> as a base, and builds its features on top of it. However, Dateutil was designed for formatted dates, e.g. ‘22-10-15’, rather than natural language dates such as ‘10pm yesterday’.</p>
<p><a href="https://github.com/bear/parsedatetime">Parsedatetime</a> is closer to Dateparser in that it also parses natural language dates. One advantage of Parsedatetime is that it supports future relative dates like ‘tomorrow’. However, while Parsedatetime also supports non-English languages, you must specify the location manually, whereas Dateparser detects the language for you.</p>
<p>Parsedatetime also has more boilerplate code, compare:</p>
<pre>from datetime import datetime
from time import mktime

time_struct, parse_status = cal.parse('today')
datetime.fromtimestamp(mktime(time_struct))
</pre>
<p>to:</p>
<pre>import dateparser

dateparser.parse('today')
</pre>
<p>If you are dealing with multiple languages and want a simple API with no unnecessary boilerplate, then Dateparser is likely a good fit for your needs.</p>
<h1>Give Dateparser a go</h1>
<p>Dateparser is an extensible, easy-to-use, and effective method for parsing international dates from websites. Its unique features arose from the specific problems we needed to address. Namely, parsing dates from websites whose language we did not know in advance.</p>
<p>The library has been well tested against a large number of sites in over 20 languages and we continue to refine and improve it. Contributors are most welcome, so if you’re interested, please don’t hesitate to <a href="https://github.com/scrapinghub/dateparser/blob/master/CONTRIBUTING.rst">get involved</a>!</p>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded" id="like-post-wrapper-28801091-1412-56d5a797918f2" data-src="//widgets.wp.com/likes/#blog_id=28801091&amp;post_id=1412&amp;origin=scrapinghub.wordpress.com&amp;obj_id=28801091-1412-56d5a797918f2" data-name="like-post-frame-28801091-1412-56d5a797918f2"><h3 class="sd-title">Like this:</h3><p class="likes-widget-placeholder post-likes-widget-placeholder"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></p><span class="sd-text-color"/><a class="sd-link-color"/></div>
<p id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</p></div>											</div>
			</div></body></html>