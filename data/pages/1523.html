<html><body><div><article id="gZ6MYGkwR9sxeEAdRrrW" class="post  historical">
	<time datetime="2014-09-22" class="article_time">September 22, 2014</time>
  
	<p>This post discusses the <code class="prettyprint">else</code> clause in Python’s <a href="https://docs.python.org/3.4/reference/compound_stmts.html#the-try-statement" rel="nofollow"><code class="prettyprint">try</code> statement</a>. Although this particular use of <code class="prettyprint">else</code> may not be as forgotten and controversial as <a href="http://shahriar.svbtle.com/pythons-else-clause-in-loops" rel="nofollow">its use in Python loops</a>, a gentle reminder of how it works and when it’s useful may still be beneficial. Please note that this post only focuses on the <code class="prettyprint">else</code> clause of the <code class="prettyprint">try</code> statement and does not intend to cover the entire <code class="prettyprint">try</code> statement. For a pretty good initial explanation of how the entire <code class="prettyprint">try</code> statement works, refer to the <a href="https://docs.python.org/3.4/reference/compound_stmts.html#the-try-statement" rel="nofollow">official Python documentation on this topic</a>.  </p>

<p>A “normal” stripped down <code class="prettyprint">try</code> statement seen regularly looks something like this:</p>

<pre><code class="prettyprint">try:
    # some code that might raise exception
except:
    # code to handle exception
finally:
    # code to run regardless of exception 
</code></pre>

<p>This is “normal” in the sense that to anyone coming from most other programming languages can understand/guess what it means:</p>

<ul>
<li>Some code will be tried to be executed.</li>
<li>If an exception is raised, the <code class="prettyprint">except</code> block is executed, if not, it isn’t.</li>
<li>Regardless of an exception being raised or not, the code in the <code class="prettyprint">finally</code> block will be executed.</li>
</ul>

<p>The big difference between exception handling in Python and other languages is that in Python using exceptions for flow control is common and normal. In fact, in many cases, you <em>must</em> use exceptions for control-flow. This is where the <code class="prettyprint">else</code> clause comes in.</p>

<p>The optional <code class="prettyprint">else</code> clause, which has to be before the <code class="prettyprint">finally</code> clause (if there is one), is executed if and when control flows off the end of the try clause. Currently, control “flows off the end” except in the case of an exception or the execution of a <code class="prettyprint">return</code>, <code class="prettyprint">continue</code>, or <code class="prettyprint">break</code> statement. So, for example:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; try:
...    print("Try: I'll try not to raise an exception.")
... except:
...    print("Except: You hopefully won't see me.")
... else:
...    print("Else: No exceptions was raised.")
... finally:
...    print("Finally: I'm going to run anyway.")
...
Try: I'll try not to raise an exception.
Else: No exceptions was raised.
Finally: I'm going to run anyway.
</code></pre>
<h1 id="but-why_1">
<a class="head_anchor" href="#but-why_1" rel="nofollow"> </a>But, why!?</h1>
<p>As mentioned earlier, it is very common to use Python’s <code class="prettyprint">try</code> statement as to control the flow of our program. So, the <code class="prettyprint">else</code> clause is a very neat way of executing some code if an exception <em>isn’t</em> raised.<br/>
For instance, one way to check if a file exists is:</p>

<pre><code class="prettyprint">try:
    f = open('some-file.txt')
except IOError:
    print("File doesn't exist :-(")
else:
    print("File exists!")
</code></pre>

<p>If <code class="prettyprint">some-file.txt</code> exists and opens successfully, then an exception will not be raised and the <code class="prettyprint">else</code> clause will be executed (<code class="prettyprint">File exists!</code> will be printed). Otherwise, the <code class="prettyprint">else</code> clause will not be executed (<code class="prettyprint">File doesn't exist :-(</code> will be printed).</p>

<p>Also, without the <code class="prettyprint">else</code> clause, the only option to run additional code before finalization (which is rare) would be the clumsy practice of adding the code to the <code class="prettyprint">try</code> clause. This is clumsy because it risks raising exceptions in code that wasn’t intended to be protected by the <code class="prettyprint">try</code> statement.</p>

<p>In general, there is probably not a case where you have no choice but to use the <code class="prettyprint">else</code> clause in a <code class="prettyprint">try</code> statement. But, besides allowing you to control the flow of your program without much hassle, it <em>will</em> often make the code more elegant, readable and Pythonic as well.</p>

<hr/>

<p>Discussion on <a href="https://news.ycombinator.com/item?id=8353064" rel="nofollow">hackernews</a> and <a href="http://www.reddit.com/r/Python/comments/2h672h/the_possibly_forgotten_optional_else_in_pythons/" rel="nofollow">reddit</a>.</p>

  <figure class="postend kudo able clearfix" id="kudo_gZ6MYGkwR9sxeEAdRrrW">
    <a href="#kudo">
      <p class="filling"> </p>
    </a>
    <p class="num">338</p>
    <p class="txt">Kudos</p>
  </figure>
  <figure class="side kudo able clearfix" id="kudo_side_gZ6MYGkwR9sxeEAdRrrW">
    <a href="#kudo">
      <p class="filling"> </p>
    </a>
    <p class="num">338</p>
    <p class="txt">Kudos</p>
  </figure>
</article>

  </div></body></html>