<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-py2deb-python-to-debian-package-converter" class="anchor" href="#py2deb-python-to-debian-package-converter" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>py2deb: Python to Debian package converter</h1>
<a href="https://travis-ci.org/paylogic/py2deb"><img alt="https://travis-ci.org/paylogic/py2deb.svg?branch=master" src="https://camo.githubusercontent.com/76770297936cbcc9dde958d6fe72ed948001093e/68747470733a2f2f7472617669732d63692e6f72672f7061796c6f6769632f7079326465622e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/paylogic/py2deb.svg?branch=master"/></a>
<a href="https://coveralls.io/r/paylogic/py2deb?branch=master"><img alt="https://coveralls.io/repos/paylogic/py2deb/badge.svg?branch=master" src="https://camo.githubusercontent.com/3a1a6a4951bae219a00adad70943ca753e55ea45/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f7061796c6f6769632f7079326465622f62616467652e7376673f6272616e63683d6d6173746572" data-canonical-src="https://coveralls.io/repos/paylogic/py2deb/badge.svg?branch=master"/></a>
<p>The Python package py2deb converts Python source distributions to Debian
binary packages (the ones used for installation). It uses <a href="https://github.com/paylogic/pip-accel">pip-accel</a> to
download, unpack and compile Python packages. Because of this py2deb is
compatible with the command line interface of the <code>pip install</code> command. For
example you can specify packages to convert as command line arguments but you
can also use <a href="http://www.pip-installer.org/en/latest/cookbook.html#requirements-files">requirement files</a> if you want.</p>
<p>During the conversion process dependencies are automatically taken into account
and converted as well so you don't actually have to use requirement files
including transitive dependencies. In fact you might prefer not explicitly
listing your transitive dependencies in requirement files because py2deb will
translate the version constraints of Python packages into Debian package
relationships.</p>
<p>The py2deb package is currently tested on Python 2.6, 2.7 and 3.4. For usage
instructions please refer to the documentation <a href="https://py2deb.readthedocs.org">hosted on Read The Docs</a>.</p>

<a name="user-content-installation"/>

<p>The py2deb package is available on <a href="https://pypi.python.org/pypi/py2deb">PyPI</a>, so installation is very simple:</p>

<p>There are some system dependencies which you have to install as well:</p>
<div class="highlight highlight-source-shell"><pre>$ sudo apt-get install dpkg-dev fakeroot</pre></div>
<p>Optionally you can also install <a href="http://en.wikipedia.org/wiki/Lintian">Lintian</a> (which is not a hard dependency but
more of a "nice to have"):</p>
<div class="highlight highlight-source-shell"><pre>$ sudo apt-get install lintian</pre></div>
<p>When Lintian is installed it will be run automatically to sanity check
converted packages. This slows down the conversion process somewhat but can be
very useful, especially when working on py2deb itself. Currently py2deb doesn't
fail when Lintian reports errors, this is due to the unorthodox ways in which
py2deb can be used. This may change in the future as py2deb becomes more
mature.</p>
<a name="user-content-usage"/>

<p>There are two ways to use the py2deb package: As the command line program
<code>py2deb</code> and as a Python API. For details about the Python API please refer
to the API documentation <a href="https://py2deb.readthedocs.org">hosted on Read the Docs</a>. The command line interface
is described below.</p>
<a name="user-content-command-line"/>

<p><strong>Usage:</strong> py2deb [OPTIONS] ...</p>
<p>Convert Python packages to Debian packages according to the given command line options (see below). The command line arguments are the same as accepted by the "pip install" command because py2deb invokes pip during the conversion process. This means you can name the package(s) to convert on the command line but you can also use "requirement files" if you prefer.</p>
<p>If you want to pass command line options to pip (e.g. because you want to use a custom index URL or a requirements file) then you will need to tell py2deb where the options for py2deb stop and the options for pip begin. In such cases you can use the following syntax:</p>
<div class="highlight highlight-source-shell"><pre>$ py2deb -r /tmp -- -r requirements.txt</pre></div>
<p>So the "--" marker separates the py2deb options from the pip options.</p>
<p><strong>Supported options:</strong></p>
<table>




<thead valign="bottom">
<tr><th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><code>-c</code>, <code>--config=FILENAME</code></td>
<td><p>Load a configuration file. Because the command line arguments are processed
in the given order, you have the choice and responsibility to decide if
command line options override configuration file options or vice versa.
Refer to the documentation for details on the configuration file format.</p>
<p>The default configuration files /etc/py2deb.ini and ~/.py2deb.ini are
automatically loaded if they exist. This happens before environment
variables and command line options are processed.</p>
<p>Can also be set using the environment variable <code>$PY2DEB_CONFIG</code>.</p>
</td>
</tr>
<tr><td><code>-r</code>, <code>--repository=DIRECTORY</code></td>
<td><p>Change the directory where *.deb archives are stored. Defaults to
the system wide temporary directory (which is usually /tmp). If
this directory doesn't exist py2deb refuses to run.</p>
<p>Can also be set using the environment variable <code>$PY2DEB_REPOSITORY</code>.</p>
</td>
</tr>
<tr><td><code>--name-prefix=PREFIX</code></td>
<td><p>Set the name prefix used during the name conversion from Python to
Debian packages. Defaults to "python". The name prefix and package
names are always delimited by a dash.</p>
<p>Can also be set using the environment variable <code>$PY2DEB_NAME_PREFIX</code>.</p>
</td>
</tr>
<tr><td><code>--no-name-prefix=PYTHON_PACKAGE_NAME</code></td>
<td>Exclude a Python package from having the name prefix applied
during the package name conversion. This is useful to avoid
awkward repetitions.</td>
</tr>
<tr><td><code>--rename=PYTHON_PACKAGE_NAME,DEBIAN_PACKAGE_NAME</code></td>
<td>Override the package name conversion algorithm for the given pair
of package names. Useful if you don't agree with the algorithm :-)</td>
</tr>
<tr><td><code>--install-prefix=DIRECTORY</code></td>
<td><p>Override the default system wide installation prefix. By setting
this to anything other than "/usr" or "/usr/local" you change the
way py2deb works. It will build packages with a file system layout
similar to a Python virtual environment, except there will not be
a Python executable: The packages are meant to be loaded by
modifying Python's module search path. Refer to the documentation
for details.</p>
<p>Can also be set using the environment variable <code>$PY2DEB_INSTALL_PREFIX</code>.</p>
</td>
</tr>
<tr><td><code>--install-alternative=LINK,PATH</code></td>
<td>Use Debian's "update-alternatives" system to add an executable
that's installed in a custom installation prefix (see above) to
the system wide executable search path. Refer to the documentation
for details.</td>
</tr>
<tr><td><code>--python-callback=EXPRESSION</code></td>
<td><p>Set a Python callback to be called during the conversion process. Refer to
the documentation for details about the use of this feature and the syntax
of <code>EXPRESSION</code>.</p>
<p>Can also be set using the environment variable <code>$PY2DEB_CALLBACK</code>.</p>
</td>
</tr>
<tr><td><code>--report-dependencies=FILENAME</code></td>
<td>Add the Debian relationships needed to depend on the converted
package(s) to the given control file. If the control file already
contains relationships the additional relationships will be added
to the control file; they won't overwrite existing relationships.</td>
</tr>
<tr><td><code>-y</code>, <code>--yes</code></td>
<td><p>Instruct pip-accel to automatically install build time dependencies
where possible. Refer to the pip-accel documentation for details.</p>
<p>Can also be set using the environment variable <code>$PY2DEB_AUTO_INSTALL</code>.</p>
</td>
</tr>
<tr><td><code>-v</code>, <code>--verbose</code></td>
<td>Make more noise :-).</td>
</tr>
<tr><td><code>-h</code>, <code>--help</code></td>
<td>Show this message and exit.</td>
</tr>
</tbody>
</table>
<a name="user-content-future-improvements"/>

<p>Some random ideas for possible improvements to py2deb (in no specific order):</p>
<ul>
<li>Find a way to facilitate (explicit / opt-in) installation of system wide
files (not related to Python per se) based on a Python distribution? This
could significantly reduce the need for "wrapper packages" that basically
just pull in packages converted by py2deb and drop a few configuration files
into place.</li>
<li>Investigate the feasability of supporting conversion of binary wheels. Slowly
but surely the Python community seems to be gravitating towards (binary)
wheels and once gravity has shifted we don't want to be left in the dust! ;-)</li>
<li>Make it possible to "replace" Python requirements in a requirement set with a
Debian package that's included in the official repositories (e.g. <a href="https://python-pillow.github.io/">Pillow</a>
becomes <a href="https://packages.debian.org/search?keywords=python-imaging">python-imaging</a> or <a href="https://packages.debian.org/search?keywords=python-pil">python-pil</a>). There are some hairy details
involved here.</li>
<li>Dive into <a href="https://www.python.org/dev/peps/pep-0440/">PEP-440</a> and see if there is a way to fully support it? Then <a href="https://www.reddit.com/r/Python/comments/2x7s17/py2deb_python_to_debian_package_converter/coxyyzu">this
question on Reddit</a> can finally get a satisfying answer :-).</li>
</ul>
<a name="user-content-similar-projects"/>

<p>There are several projects out there that share similarities with py2deb, for
example I know of <a href="https://pypi.python.org/pypi/stdeb">stdeb</a>, <a href="https://github.com/spotify/dh-virtualenv">dh-virtualenv</a> and <a href="https://github.com/jordansissel/fpm">fpm</a>. The documentation includes a
fairly <a href="https://py2deb.readthedocs.org/en/latest/comparisons.html">detailed comparison</a> with each of these projects.</p>
<a name="user-content-contact"/>

<p>If you have questions, bug reports, suggestions, etc. please create an issue on
the <a href="https://github.com/paylogic/py2deb">GitHub project page</a>. The latest version of py2deb will always be
available on GitHub. The internal API documentation is <a href="https://py2deb.readthedocs.org">hosted on Read The
Docs</a>.</p>
<a name="user-content-license"/>

<p>This software is licensed under the <a href="http://en.wikipedia.org/wiki/MIT_License">MIT license</a>.</p>
<p>© 2015 Peter Odding, Arjan Verwer and Paylogic International.</p>

</article>
  </div></body></html>