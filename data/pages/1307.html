<html><body><div><div class="text-content">

								
								


<p>In the last 2 posts of this series, we looked at <a title="Baby steps in learning Python for data analysis" href="http://www.analyticsvidhya.com/blog/2014/07/baby-steps-learning-python-data-analysis/" target="_blank">how to install Python with iPython interface</a> and several <a title="Baby steps in Python – Libraries and data structures" href="http://www.analyticsvidhya.com/blog/2014/07/baby-steps-libraries-data-structure/" target="_blank">useful libraries and data structures</a>, which are available in Python. If you have not gone through these posts and are new to Python, I would recommend that you go through the previous posts before going ahead.</p>
<p>In order to explore our data further, let me introduce you to another animal (as if Python was not enough!) – Pandas</p>
<div id="attachment_5487" class="wp-caption aligncenter"><a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/pandas.jpg"><img class="wp-image-5487 size-medium" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/pandas-300x200.jpg?resize=300%2C200" alt="pandas" srcset="http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/pandas.jpg?resize=300%2C200 300w, http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/pandas.jpg?resize=1024%2C682 1024w" sizes="(max-width: 300px) 100vw, 300px" data-recalc-dims="1"/></a><p class="wp-caption-text">Image Source: Wikipedia</p></div>
<p>Pandas are one of the most useful data analysis library in Python (I know these names sounds weird, but hang on!). They have been instrumental in increasing the use of Python in data science community. <strong>In</strong> this tutorial, we will use Pandas to read a data set from a Kaggle competition, perform exploratory analysis and build our first basic categorization algorithm for solving this problem.</p>
<p> </p>
<h3><strong>Introduction to Series and Dataframes</strong></h3>
<p>Series can be understood as a 1 dimensional labelled / indexed array. You can access individual elements of this series through these labels.</p>
<p>A dataframe is similar to Excel workbook – you have column names referring to columns and you have rows, which can be accessed with use of row numbers. The essential difference being that column names and row numbers are known as column and row index, in case of dataframes.</p>
<p>Series and dataframes form the core data model for Pandas in Python. The data sets are first read into these dataframes and then various operations (e.g. group by, aggregation etc.) can be applied very easily to its columns.</p>
<p> </p>
<h3><strong>Kaggle dataset – Titanic: Machine Learning from Disaster</strong></h3>
<p>You can download the dataset from <a href="http://www.kaggle.com/c/titanic-gettingStarted" target="_blank">Kaggle</a>. Here is the description of variables as provided by Kaggle:</p>
<div id="stb-container-3217" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><div id="stb-box-3217" class="stb-grey_box stb-box">
<pre>VARIABLE DESCRIPTIONS:
survival        Survival
                (0 = No; 1 = Yes)
pclass          Passenger Class
                (1 = 1st; 2 = 2nd; 3 = 3rd)
name            Name
sex             Sex
age             Age
sibsp           Number of Siblings/Spouses Aboard
parch           Number of Parents/Children Aboard
ticket          Ticket Number
fare            Passenger Fare
cabin           Cabin
embarked        Port of Embarkation
                (C = Cherbourg; Q = Queenstown; S = Southampton)

SPECIAL NOTES:
Pclass is a proxy for socio-economic status (SES)
 1st ~ Upper; 2nd ~ Middle; 3rd ~ Lower

Age is in Years; Fractional if Age less than One (1)
 If the Age is Estimated, it is in the form xx.5

With respect to the family relation variables (i.e. sibsp and parch)
some relations were ignored.  The following are the definitions used
for sibsp and parch.

Sibling:  Brother, Sister, Stepbrother, or Stepsister of Passenger Aboard Titanic
Spouse:   Husband or Wife of Passenger Aboard Titanic (Mistresses and Fiances Ignored)
Parent:   Mother or Father of Passenger Aboard Titanic
Child:    Son, Daughter, Stepson, or Stepdaughter of Passenger Aboard Titanic

Other family relatives excluded from this study include cousins,
nephews/nieces, aunts/uncles, and in-laws.  Some children travelled
only with a nanny, therefore parch=0 for them.  As well, some
travelled with very close friends or neighbors in a village, however,
the definitions do not support such relations.</pre>
</div></div>
<h3/>
<h3><strong>Let the exploration begin</strong></h3>
<p>To begin, start iPython interface in Inline Pylab mode by typing following on your terminal / windows command prompt:</p>
<pre><div id="stb-container-8751" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-8751" class="stb-grey_box stb-box">ipython notebook --pylab=inline</p></div></pre>
<p>This opens up iPython notebook in pylab environment, which has a few useful libraries already imported. Also, you will be able to plot your data inline, which makes this a really good environment for interactive data analysis. You can check whether the environment has loaded correctly, by typing the following command (and getting the output as seen in the figure below):</p>
<pre><div id="stb-container-1405" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-1405" class="stb-grey_box stb-box">plot(arange(5))</p></div></pre>
<p><a href="http://i0.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/ipython_pylab_check.png"><img class="aligncenter size-full wp-image-5507" src="http://i0.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/ipython_pylab_check.png?resize=375%2C253" alt="ipython_pylab_check" srcset="http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/ipython_pylab_check.png?resize=300%2C202 300w, http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/ipython_pylab_check.png?w=375 375w" sizes="(max-width: 375px) 100vw, 375px" data-recalc-dims="1"/></a></p>
<p>I am currently working in Linux, and have stored the dataset in the following location:</p>
<p> /home/kunal/Downloads/kaggle/train.csv</p>
<p> </p>
<h4><strong>Importing libraries and the data set:</strong></h4>
<p>Following are the libraries we will use during this tutorial:</p>

<p>You can read a brief description about each of these libraries <a title="Baby steps in Python – Libraries and data structures" href="http://www.analyticsvidhya.com/blog/2014/07/baby-steps-libraries-data-structure/" target="_blank">here</a>. Please note that you do not need to import matplotlib and numpy because of Pylab environment. I have still kept them in the code, in case you use the code in a different environment.</p>
<p>After importing the library, you read the dataset using function read_csv(). This is how the code looks like till this stage:</p>
<pre><div id="stb-container-9494" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-9494" class="stb-grey_box stb-box">
import pandas as pd
import numpy as np
import matplotlib as plt

df = pd.read_csv("/home/kunal/Downloads/kaggle/train.csv") #Reading the dataset in a dataframe using Pandas
</p></div></pre>
<p> </p>
<h4><strong>Quick data exploration:</strong></h4>
<p>Once you have read the dataset, you can have a look at few top rows by using the function head()</p>
<pre><div id="stb-container-9837" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-9837" class="stb-grey_box stb-box">df.head(10)</p></div></pre>
<p> </p>
<p><a href="http://i0.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/data_head1.jpg"><img class="aligncenter wp-image-5516" src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/data_head1-1024x401.jpg?resize=600%2C235" alt="data_head" srcset="http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/data_head1.jpg?resize=300%2C117 300w, http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/data_head1.jpg?resize=1024%2C401 1024w, http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/data_head1.jpg?w=1134 1134w" sizes="(max-width: 600px) 100vw, 600px" data-recalc-dims="1"/></a></p>
<p>This should print 10 rows. Alternately, you can also look at more rows by printing the dataset.</p>
<p>Next, you can look at summary of numerical fields by using describe() function</p>
<pre><div id="stb-container-6868" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-6868" class="stb-grey_box stb-box">df.describe()</p></div></pre>
<p><a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/data_describe.jpg"><img class="aligncenter wp-image-5517" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/data_describe.jpg?resize=600%2C245" alt="data_describe" srcset="http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/data_describe.jpg?resize=300%2C122 300w, http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/data_describe.jpg?w=801 801w" sizes="(max-width: 600px) 100vw, 600px" data-recalc-dims="1"/></a></p>
<p>describe() function would provide count, mean, standard deviation (std), min, quartiles and max in its output (Read <a title="Using statistics: How to understand population distributions?" href="http://www.analyticsvidhya.com/blog/2014/07/statistics/" target="_blank">this article</a> to refresh basic statistics to understand population distribution)</p>
<p>Here are a few inferences, you can draw by looking at the output of describe() function:</p>
<ol>
<li>Age has (891 – 714) 277 missing values.</li>
<li>We can also look that about 38% passangers survived the tragedy. How? The mean of survival field is 0.38 (Remember, survival has value 1 for those who survived and 0 otherwise)</li>
<li>By looking at percentiles of Pclass, you can see that more than 50% of passengers belong to class 3,</li>
<li>The age distribution seems to be in line with expectation. Same with SibSp and Parch</li>
<li>The fare seems to have values with 0 indicating possibility of some free tickets or data errors. On the other extreme, 512 looks like a possible outlier / error</li>
</ol>
<p>In addition to these statistics, you can also look at the median of these variables and compare them with mean to see possible skew in the dataset. Median can be found out by:</p>
<pre><div id="stb-container-5445" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-5445" class="stb-grey_box stb-box">df['Age'].median()</p></div></pre>
<p> </p>
<p>For the non-numerical values (e.g. Sex, Embarked etc.), we can look at unique values to understand whether they make sense or not. Since Name would be a free flowing field, we will exclude it from this analysis. Unique value can be printed by following command:</p>
<pre><div id="stb-container-9189" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-9189" class="stb-grey_box stb-box">df['Sex'].unique()</p></div></pre>
<p>Similarly, we can look at unique values of port of embarkment.</p>
<p> </p>
<h4><strong>Distribution analysis:</strong></h4>
<p>Now that we are familiar with basic data characteristics, let us study distribution of various variables. Let us start with numeric variables – namely Age and Fare</p>
<p>We plot their histograms using the following commands:</p>
<pre><div id="stb-container-9109" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-9109" class="stb-grey_box stb-box">fig = plt.pyplot.figure()
ax = fig.add_subplot(111)
ax.hist(df['Age'], bins = 10, range = (df['Age'].min(),df['Age'].max()))
plt.pyplot.title('Age distribution')
plt.pyplot.xlabel('Age')
plt.pyplot.ylabel('Count of Passengers')
plt.pyplot.show()
</p></div></pre>
<p>and</p>
<pre><div id="stb-container-5491" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-5491" class="stb-grey_box stb-box">fig = plt.pyplot.figure()
ax = fig.add_subplot(111)
ax.hist(df['Fare'], bins = 10, range = (df['Fare'].min(),df['Fare'].max()))
plt.pyplot.title('Fare distribution')
plt.pyplot.xlabel('Fare')
plt.pyplot.ylabel('Count of Passengers')
plt.pyplot.show()
</p></div></pre>
<p><a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/histogram_age.png"><img class="aligncenter size-full wp-image-5505" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/histogram_age.png?resize=391%2C279" alt="histogram_age" srcset="http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/histogram_age.png?resize=300%2C214 300w, http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/histogram_age.png?w=391 391w" sizes="(max-width: 391px) 100vw, 391px" data-recalc-dims="1"/></a></p>
<p>Next, we look at box plots to understand the distributions. Box plot for fare can be plotted by:</p>
<pre><div id="stb-container-5535" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-5535" class="stb-grey_box stb-box">df.boxplot(column='Fare')</p></div></pre>
<p><a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/bloxplot_fare1.png"><img class="aligncenter size-full wp-image-5502" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/bloxplot_fare1.png?resize=381%2C246" alt="bloxplot_fare1" data-recalc-dims="1"/></a></p>
<p>This shows a lot of Outliers. Part of this can be driven by the fact that we are looking at fare across the 3 passenger classes. Let us segregate them by Passenger class:</p>
<pre><div id="stb-container-2428" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-2428" class="stb-grey_box stb-box">df.boxplot(column='Fare', by = 'Pclass')</p></div></pre>
<p><a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/bloxplot_fare2.png"><img class="aligncenter size-full wp-image-5503" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/bloxplot_fare2.png?resize=381%2C280" alt="bloxplot_fare2" srcset="http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/bloxplot_fare2.png?resize=300%2C220 300w, http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/bloxplot_fare2.png?w=381 381w" sizes="(max-width: 381px) 100vw, 381px" data-recalc-dims="1"/></a></p>
<p>Clearly, both Age and Fare require some amount of data munging. Age has about 31% missing values, while Fare has a few Outliers, which demand deeper understanding. We will take this up later (in the next tutorial).</p>
<p> </p>
<h4><strong>Categorical variable analysis:</strong></h4>
<p>Now that we understand distributions for Age and Fare, let us understand categorical variables in more details. Following code plots the distribution of population by PClass and their probability of survival:</p>
<pre><div id="stb-container-9804" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-9804" class="stb-grey_box stb-box">temp1 = df.groupby('Pclass').Survived.count()
temp2 = df.groupby('Pclass').Survived.sum()/df.groupby('Pclass').Survived.count()
fig = plt.pyplot.figure(figsize=(8,4))
ax1 = fig.add_subplot(121)
ax1.set_xlabel('Pclass')
ax1.set_ylabel('Count of Passengers')
ax1.set_title("Passengers by Pclass")
temp1.plot(kind='bar')

ax2 = fig.add_subplot(122)
temp2.plot(kind = 'bar')
ax2.set_xlabel('Pclass')
ax2.set_ylabel('Probability of Survival')
ax2.set_title("Probability of survival by class")
</p></div></pre>
<p><a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/categorical_pclass.png"><img class="aligncenter size-full wp-image-5500" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/categorical_pclass.png?resize=497%2C274" alt="categorical_pclass" srcset="http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/categorical_pclass.png?resize=300%2C165 300w, http://i2.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/categorical_pclass.png?w=497 497w" sizes="(max-width: 497px) 100vw, 497px" data-recalc-dims="1"/></a></p>
<p>You can plot similar graphs by Sex and port of embarkment.</p>
<p>Alternately, these two plots can also be visualized by combining them in a stacked chart:</p>
<pre><div id="stb-container-2661" class="stb-container-css stb-grey-container stb-image-none stb-ltr stb-corners stb-side-none"><aside class="stb-icon"><img src="http://i2.wp.com/www.analyticsvidhya.com/blog/wp-content/plugins/wp-special-textboxes/images/gears-b.png" data-recalc-dims="1"/></aside><p id="stb-box-2661" class="stb-grey_box stb-box">temp3 = pd.crosstab([df.Pclass, df.Sex], df.Survived.astype(bool))
temp3.plot(kind='bar', stacked=True, color=['red','blue'], grid=False)</p></div></pre>
<p><a href="http://i0.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/crosstab_class_sex.png"><img class="aligncenter size-full wp-image-5509" src="http://i0.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/crosstab_class_sex.png?resize=370%2C313" alt="crosstab_class_sex" data-recalc-dims="1"/></a></p>
<p>You can also add port of embankment into the mix:</p>
<p><a href="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/crosstab_class_sex_port.png"><img class="aligncenter size-full wp-image-5510" src="http://i1.wp.com/www.analyticsvidhya.com/blog/wp-content/uploads/2014/08/crosstab_class_sex_port.png?resize=370%2C327" alt="crosstab_class_sex_port" srcset="http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/crosstab_class_sex_port.png?resize=300%2C265 300w, http://i1.wp.com/www.analyticsvidhya.com/wp-content/uploads/2014/08/crosstab_class_sex_port.png?w=370 370w" sizes="(max-width: 370px) 100vw, 370px" data-recalc-dims="1"/></a></p>
<p>If you have not realized already, we have just created two basic classification algorithms here, one based on Pclass and Sex, while other on 3 categorical variables (including port of embankment). You can quickly code this to create your first submission on Kaggle.</p>
<h4><strong>End Notes:</strong></h4>
<p>In this post, we saw how we can do exploratory analysis in Python using Pandas. I hope your love for pandas (the animal) would have increased by now – given the amount of help, the library can provide you in analyzing datasets.</p>
<p>We will start the <a title="Data Munging in Python (using Pandas) – Baby steps in Python" href="http://www.analyticsvidhya.com/blog/2014/09/data-munging-python-using-pandas-baby-steps-python/" target="_blank">next</a> tutorial from this stage, where we will explore Age and Fare variables further, <a title="Data Munging in Python (using Pandas) – Baby steps in Python" href="http://www.analyticsvidhya.com/blog/2014/09/data-munging-python-using-pandas-baby-steps-python/" target="_blank">perform data munging</a> and create a dataset for applying various modeling techniques. If you are following this series, we have covered a lot of ground in this tutorial. I would strongly urge that you take another dataset and problem and go through an independent example before we publish the next post in this series.</p>
<p>If you come across any difficulty while doing so, or you have any thoughts / suggestions / feedback on the post, please feel free to post them through comments below.</p>


<p/>
<p id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</p>
															</div>

							</div></body></html>