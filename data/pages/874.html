<html><body><div><ol><li class="li1"><p class="de1"> <span class="co1">#s!/usr/bin/python</span></p></li>
<li class="li2"><p class="de2"><span class="co1"># import pygame and everything else</span></p></li>
<li class="li1"><p class="de1"><span class="kw1">try</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">import</span> <span class="kw3">sys</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">import</span> <span class="kw3">random</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">import</span> <span class="kw3">math</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">import</span> <span class="kw3">os</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">import</span> <span class="kw3">getopt</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">import</span> pygame</p></li>
<li class="li2"><p class="de2">    <span class="kw1">import</span> <span class="kw3">pickle</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">import</span> <span class="kw3">copy</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">from</span> <span class="kw3">collections</span> <span class="kw1">import</span> *</p></li>
<li class="li1"><p class="de1">    <span class="kw1">from</span> <span class="kw3">socket</span> <span class="kw1">import</span> *</p></li>
<li class="li2"><p class="de2">    <span class="kw1">from</span> pygame.<span class="kw2">locals</span> <span class="kw1">import</span> *</p></li>
<li class="li1"><p class="de1">    <span class="kw1">from</span> vector <span class="kw1">import</span> *</p></li>
<li class="li2"><p class="de2">    <span class="kw1">import</span> yaml</p></li>
<li class="li1"><p class="de1">    <span class="kw1">import</span> pygame.<span class="me1">mixer</span></p></li>
<li class="li2"><p class="de2"><span class="co1">#    import ConfigParser</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">except</span> <span class="kw2">ImportError</span><span class="sy0">,</span> err:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">print</span> <span class="st0">"couldn't load module. %s"</span> % <span class="br0">(</span>err<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">    <span class="kw3">sys</span>.<span class="me1">exit</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1"># level handling</span></p></li>
<li class="li1"><p class="de1"><span class="co1"># Load image function</span></p></li>
<li class="li2"><p class="de2"><span class="kw1">def</span> load_png<span class="br0">(</span>name<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="st0">""" Load image and return image object"""</span></p></li>
<li class="li2"><p class="de2">    fullname <span class="sy0">=</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">(</span><span class="st0">'data/images'</span><span class="sy0">,</span> name<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">try</span>:</p></li>
<li class="li2"><p class="de2">        image <span class="sy0">=</span> pygame.<span class="me1">image</span>.<span class="me1">load</span><span class="br0">(</span>fullname<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> image.<span class="me1">get_alpha</span><span class="br0">(</span><span class="br0">)</span> <span class="kw1">is</span> <span class="kw2">None</span>:</p></li>
<li class="li2"><p class="de2">            image <span class="sy0">=</span> image.<span class="me1">convert</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">            image <span class="sy0">=</span> image.<span class="me1">convert_alpha</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">except</span> pygame.<span class="me1">error</span><span class="sy0">,</span> message:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">print</span> <span class="st0">'Cannot load image:'</span><span class="sy0">,</span> fullname</p></li>
<li class="li1"><p class="de1">        <span class="kw1">raise</span> <span class="kw2">SystemExit</span><span class="sy0">,</span> message</p></li>
<li class="li2"><p class="de2">    <span class="kw1">return</span> image</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1">#load sound function</span></p></li>
<li class="li1"><p class="de1"><span class="kw1">def</span> load_sound<span class="br0">(</span>name<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">class</span> NoneSound:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">def</span> play<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>: <span class="kw1">pass</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">if</span> <span class="kw1">not</span> pygame.<span class="me1">mixer</span> <span class="kw1">or</span> <span class="kw1">not</span> pygame.<span class="me1">mixer</span>.<span class="me1">get_init</span><span class="br0">(</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> NoneSound<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">    fullname <span class="sy0">=</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">(</span><span class="st0">'data/sounds'</span><span class="sy0">,</span> name<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">try</span>:</p></li>
<li class="li2"><p class="de2">        sound <span class="sy0">=</span> pygame.<span class="me1">mixer</span>.<span class="me1">Sound</span><span class="br0">(</span>fullname<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">except</span> pygame.<span class="me1">error</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">print</span> <span class="br0">(</span><span class="st0">'Cannot load sound: %s'</span> % fullname<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">raise</span> <span class="kw2">SystemExit</span><span class="br0">(</span><span class="kw2">str</span><span class="br0">(</span>geterror<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">return</span> sound</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1">#load tile set function</span></p></li>
<li class="li1"><p class="de1"><span class="kw1">def</span> load_tile_table<span class="br0">(</span>filename<span class="sy0">,</span> width<span class="sy0">,</span> height<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    image <span class="sy0">=</span> pygame.<span class="me1">image</span>.<span class="me1">load</span><span class="br0">(</span><span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">(</span><span class="st0">'data/images'</span><span class="sy0">,</span> filename<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    image_width<span class="sy0">,</span> image_height <span class="sy0">=</span> image.<span class="me1">get_size</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">    tile_table <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">for</span> tile_x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> image_width/width<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        line <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        tile_table.<span class="me1">append</span><span class="br0">(</span>line<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> tile_y <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> image_height/height<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            rect <span class="sy0">=</span> <span class="br0">(</span>tile_x*width<span class="sy0">,</span> tile_y*height<span class="sy0">,</span> width<span class="sy0">,</span> height<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            line.<span class="me1">append</span><span class="br0">(</span>image.<span class="me1">subsurface</span><span class="br0">(</span>rect<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">return</span> tile_table</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="co1">#count files in directiory</span></p></li>
<li class="li2"><p class="de2"><span class="kw1">def</span> count_files<span class="br0">(</span>in_directory<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    joiner<span class="sy0">=</span> <span class="br0">(</span>in_directory + <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">sep</span><span class="br0">)</span>.<span class="kw4">__add__</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">return</span> <span class="kw2">sum</span><span class="br0">(</span></p></li>
<li class="li1"><p class="de1">        <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">isfile</span><span class="br0">(</span>filename<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> filename</p></li>
<li class="li1"><p class="de1">        <span class="kw1">in</span> <span class="kw2">map</span><span class="br0">(</span>joiner<span class="sy0">,</span> <span class="kw3">os</span>.<span class="me1">listdir</span><span class="br0">(</span>in_directory<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">    <span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="co1">#calculate depth of collision</span></p></li>
<li class="li2"><p class="de2"><span class="kw1">def</span> GetIntersectionDepth<span class="br0">(</span>rect_A<span class="sy0">,</span> rect_B<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="co1"># Calculate half sizes.</span></p></li>
<li class="li2"><p class="de2">    halfWidthA <span class="sy0">=</span> rect_A.<span class="me1">width</span> / <span class="nu0">2</span></p></li>
<li class="li1"><p class="de1">    halfHeightA <span class="sy0">=</span> rect_A.<span class="me1">height</span> / <span class="nu0">2</span></p></li>
<li class="li2"><p class="de2">    halfWidthB <span class="sy0">=</span> rect_B.<span class="me1">width</span> / <span class="nu0">2</span></p></li>
<li class="li1"><p class="de1">    halfHeightB <span class="sy0">=</span> rect_B.<span class="me1">height</span> / <span class="nu0">2</span></p></li>
<li class="li2"><p class="de2">    </p></li>
<li class="li1"><p class="de1">    <span class="co1">#calculate centers</span></p></li>
<li class="li2"><p class="de2">    center_A <span class="sy0">=</span> Vector<span class="br0">(</span>rect_A.<span class="me1">left</span> + halfWidthA<span class="sy0">,</span> rect_A.<span class="me1">top</span> + halfHeightA<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    center_B <span class="sy0">=</span> Vector<span class="br0">(</span>rect_A.<span class="me1">left</span> + halfWidthA<span class="sy0">,</span> rect_A.<span class="me1">top</span> + halfHeightA<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="co1">#Calculate current and minimum-non-intersecting distances between centers.</span></p></li>
<li class="li2"><p class="de2">    distance_x <span class="sy0">=</span> center_A.<span class="me1">x</span> - center_B.<span class="me1">x</span></p></li>
<li class="li1"><p class="de1">    distance_y <span class="sy0">=</span> center_A.<span class="me1">y</span> - center_B.<span class="me1">y</span></p></li>
<li class="li2"><p class="de2">    minDistance_x <span class="sy0">=</span> halfWidthA + halfWidthB</p></li>
<li class="li1"><p class="de1">    minDistance_y <span class="sy0">=</span> halfHeightA + halfHeightB</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="co1">#If we are not intersecting at all, return (0, 0).</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">if</span> distance_x <span class="sy0">&gt;=</span> minDistance_x <span class="kw1">and</span> distance_y <span class="sy0">&gt;=</span> minDistance_y:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> Vector.<span class="me1">Zero</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="co1">#Calculate and return intersection depths</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">if</span> distance_x <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">        depth_x <span class="sy0">=</span> minDistance_x - distance_x</p></li>
<li class="li2"><p class="de2">    <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">        depth_x <span class="sy0">=</span> -minDistance_x - distance_x</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">if</span> distance_x <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">        depth_y <span class="sy0">=</span> minDistance_y - distance_y</p></li>
<li class="li1"><p class="de1">    <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">        depth_y <span class="sy0">=</span> -minDistance_y - distance_y</p></li>
<li class="li1"><p class="de1">    </p></li>
<li class="li2"><p class="de2">    <span class="kw1">return</span> Vector<span class="br0">(</span>depth_x<span class="sy0">,</span> depth_y<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">def</span> fill_gradient<span class="br0">(</span>surface<span class="sy0">,</span> color<span class="sy0">,</span> gradient<span class="sy0">,</span> rect<span class="sy0">=</span><span class="kw2">None</span><span class="sy0">,</span> vertical<span class="sy0">=</span><span class="kw2">True</span><span class="sy0">,</span> forward<span class="sy0">=</span><span class="kw2">True</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="st0">"""fill a surface with a gradient pattern</span></p></li>
<li class="li2"><p class="de2"><span class="st0">    Parameters:</span></p></li>
<li class="li1"><p class="de1"><span class="st0">    color -&gt; starting color</span></p></li>
<li class="li2"><p class="de2"><span class="st0">    gradient -&gt; final color</span></p></li>
<li class="li1"><p class="de1"><span class="st0">    rect -&gt; area to fill; default is surface's rect</span></p></li>
<li class="li2"><p class="de2"><span class="st0">    vertical -&gt; True=vertical; False=horizontal</span></p></li>
<li class="li1"><p class="de1"><span class="st0">    forward -&gt; True=forward; False=reverse</span></p></li>
<li class="li2"><p class="de2"><span class="st0">    </span></p></li>
<li class="li1"><p class="de1"><span class="st0">    Pygame recipe: http://www.pygame.org/wiki/GradientCode</span></p></li>
<li class="li2"><p class="de2"><span class="st0">    """</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">if</span> rect <span class="kw1">is</span> <span class="kw2">None</span>: rect <span class="sy0">=</span> surface.<span class="me1">get_rect</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">    x1<span class="sy0">,</span>x2 <span class="sy0">=</span> rect.<span class="me1">left</span><span class="sy0">,</span> rect.<span class="me1">right</span></p></li>
<li class="li1"><p class="de1">    y1<span class="sy0">,</span>y2 <span class="sy0">=</span> rect.<span class="me1">top</span><span class="sy0">,</span> rect.<span class="me1">bottom</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">if</span> vertical: h <span class="sy0">=</span> y2-y1</p></li>
<li class="li1"><p class="de1">    <span class="kw1">else</span>:        h <span class="sy0">=</span> x2-x1</p></li>
<li class="li2"><p class="de2">    <span class="kw1">if</span> forward: a<span class="sy0">,</span> b <span class="sy0">=</span> color<span class="sy0">,</span> gradient</p></li>
<li class="li1"><p class="de1">    <span class="kw1">else</span>:       b<span class="sy0">,</span> a <span class="sy0">=</span> color<span class="sy0">,</span> gradient</p></li>
<li class="li2"><p class="de2">    rate <span class="sy0">=</span> <span class="br0">(</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">float</span><span class="br0">(</span>b<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>-a<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span>/h<span class="sy0">,</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">float</span><span class="br0">(</span>b<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>-a<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span>/h<span class="sy0">,</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">float</span><span class="br0">(</span>b<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span>-a<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="br0">)</span>/h</p></li>
<li class="li2"><p class="de2">    <span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    fn_line <span class="sy0">=</span> pygame.<span class="me1">draw</span>.<span class="me1">line</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">if</span> vertical:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> line <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span>y1<span class="sy0">,</span>y2<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            color <span class="sy0">=</span> <span class="br0">(</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">min</span><span class="br0">(</span><span class="kw2">max</span><span class="br0">(</span>a<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>+<span class="br0">(</span>rate<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>*<span class="br0">(</span>line-y1<span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span></p></li>
<li class="li2"><p class="de2">                <span class="kw2">min</span><span class="br0">(</span><span class="kw2">max</span><span class="br0">(</span>a<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>+<span class="br0">(</span>rate<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>*<span class="br0">(</span>line-y1<span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">min</span><span class="br0">(</span><span class="kw2">max</span><span class="br0">(</span>a<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span>+<span class="br0">(</span>rate<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span>*<span class="br0">(</span>line-y1<span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            fn_line<span class="br0">(</span>surface<span class="sy0">,</span> color<span class="sy0">,</span> <span class="br0">(</span>x1<span class="sy0">,</span>line<span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span>x2<span class="sy0">,</span>line<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> col <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span>x1<span class="sy0">,</span>x2<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            color <span class="sy0">=</span> <span class="br0">(</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">min</span><span class="br0">(</span><span class="kw2">max</span><span class="br0">(</span>a<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>+<span class="br0">(</span>rate<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>*<span class="br0">(</span>col-x1<span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span></p></li>
<li class="li2"><p class="de2">                <span class="kw2">min</span><span class="br0">(</span><span class="kw2">max</span><span class="br0">(</span>a<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>+<span class="br0">(</span>rate<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>*<span class="br0">(</span>col-x1<span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">min</span><span class="br0">(</span><span class="kw2">max</span><span class="br0">(</span>a<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span>+<span class="br0">(</span>rate<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span>*<span class="br0">(</span>col-x1<span class="br0">)</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            fn_line<span class="br0">(</span>surface<span class="sy0">,</span> color<span class="sy0">,</span> <span class="br0">(</span>col<span class="sy0">,</span>y1<span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span>col<span class="sy0">,</span>y2<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="co1">#game class</span></p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Game<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        pygame.<span class="me1">mixer</span>.<span class="me1">init</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">clock</span> <span class="sy0">=</span> pygame.<span class="kw3">time</span>.<span class="me1">Clock</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">game_state</span> <span class="sy0">=</span> <span class="st0">"menu_main"</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#initialize Keyboard() class</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">keyboard</span> <span class="sy0">=</span> Keyboard<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_update_always</span> <span class="sy0">=</span> <span class="br0">[</span><span class="kw2">self</span>.<span class="me1">keyboard</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_update</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#The number of times our engine should update per second.</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">preferred_fps</span> <span class="sy0">=</span> <span class="nu0">60</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#Used to print the fps of the game onto the console window.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">fpsTimer</span> <span class="sy0">=</span> <span class="nu0">0.0</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#Should Ragnarok print the number of frames the game is running at?</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">print_frames</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="co1">#The number of milliseconds between printing out the frame rate</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">print_fps_frequency</span> <span class="sy0">=</span> <span class="nu0">1000</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#self.level_1 = Level("data/maps/level_1.map")</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">level_menu_main</span> <span class="sy0">=</span> Level_menu_main<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> get_keyboard<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">keyboard</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> go<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        running <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">while</span> running:</p></li>
<li class="li2"><p class="de2">            <span class="co1">#print frame</span></p></li>
<li class="li1"><p class="de1">            <span class="co1">#This is the main game loop</span></p></li>
<li class="li2"><p class="de2">            <span class="co1">#Update our clock</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">clock</span>.<span class="me1">tick</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">preferred_fps</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            elapsed_milliseconds <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">clock</span>.<span class="me1">get_time</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">            <span class="co1">#Print the fps that the game is running at.</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">print_frames</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">fpsTimer</span> +<span class="sy0">=</span> elapsed_milliseconds</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">fpsTimer</span> <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="me1">print_fps_frequency</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="kw1">print</span> <span class="st0">"FPS: "</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">clock</span>.<span class="me1">get_fps</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">fpsTimer</span> <span class="sy0">=</span> <span class="nu0">0.0</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">            <span class="kw1">for</span> event <span class="kw1">in</span> pygame.<span class="me1">event</span>.<span class="me1">get</span><span class="br0">(</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">QUIT</span>:</p></li>
<li class="li1"><p class="de1">                    running <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">            function <span class="sy0">=</span> <span class="kw2">getattr</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">game_state</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            function<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            </p></li>
<li class="li2"><p class="de2">            <span class="co1">#drawing and updating</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">for</span> obj <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">list_update_always</span>:</p></li>
<li class="li2"><p class="de2">                obj.<span class="me1">update</span><span class="br0">(</span><span class="nu0">17</span><span class="br0">)</span> <span class="co1"># put elapsed_milliseconds instead of 17 if you want it to be affected by time</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">for</span> obj <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">list_update</span>:</p></li>
<li class="li2"><p class="de2">                obj.<span class="me1">update</span><span class="br0">(</span><span class="nu0">17</span><span class="br0">)</span> <span class="co1"># put elapsed_milliseconds instead of 17 if you want it to be affected by time</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">            <span class="co1">#screen.fill((230, 255, 255))</span></p></li>
<li class="li1"><p class="de1">            </p></li>
<li class="li2"><p class="de2">            <span class="kw1">for</span> obj <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">list_draw</span>:</p></li>
<li class="li1"><p class="de1">                obj.<span class="me1">draw</span><span class="br0">(</span><span class="nu0">17</span><span class="sy0">,</span> screen<span class="br0">)</span> <span class="co1"># put elapsed_milliseconds instead of 17 if you want it to be affected by time</span></p></li>
<li class="li2"><p class="de2">            </p></li>
<li class="li1"><p class="de1">            <span class="co1">### debug ###</span></p></li>
<li class="li2"><p class="de2">            <span class="co1">#</span></p></li>
<li class="li1"><p class="de1">            <span class="co1">#pygame.draw.line(screen, (0,0,0), (0,windowHeight/2), (windowWidth,windowHeight/2), 1)</span></p></li>
<li class="li2"><p class="de2">            <span class="co1">#pygame.draw.line(screen, (0,0,0), (windowWidth/2,0), (windowWidth/2,windowHeight), 1)</span></p></li>
<li class="li1"><p class="de1">            <span class="co1">#</span></p></li>
<li class="li2"><p class="de2">            <span class="co1">#############</span></p></li>
<li class="li1"><p class="de1">            </p></li>
<li class="li2"><p class="de2">            pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        pygame.<span class="me1">quit</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> menu_main<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_update</span> <span class="sy0">=</span> <span class="br0">[</span><span class="kw2">self</span>.<span class="me1">level_menu_main</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span> <span class="sy0">=</span> <span class="br0">[</span><span class="kw2">self</span>.<span class="me1">level_menu_main</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> menu_info<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_update</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> game<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="co1">#self.list_update = [self.debug_info, self.camera]</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#self.list_draw = [self.debug_info, self.camera]</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">pass</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> menu_loadlevel<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_update</span> <span class="sy0">=</span> <span class="br0">[</span><span class="kw2">self</span>.<span class="me1">menu_level_loader</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_draw</span> <span class="sy0">=</span> <span class="br0">[</span><span class="kw2">self</span>.<span class="me1">menu_level_loader</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1">#######################################################################################################################</span></p></li>
<li class="li1"><p class="de1"><span class="co1"># out of main game classes</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> UpdatableObj<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="st0">"""</span></p></li>
<li class="li1"><p class="de1"><span class="st0">    The base class of our game engine.</span></p></li>
<li class="li2"><p class="de2"><span class="st0">    Represents an object that can be updated.</span></p></li>
<li class="li1"><p class="de1"><span class="st0">    """</span></p></li>
<li class="li2"><p class="de2">    <span class="co1">#The number of objects that have existed so far. Used to create a unique object id.</span></p></li>
<li class="li1"><p class="de1">    __total_id <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> update_order <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">level</span> <span class="sy0">=</span> level</p></li>
<li class="li1"><p class="de1">        <span class="co1">#The order in which this object should update relative to the other objects.</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">update_order</span> <span class="sy0">=</span> update_order</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#Represents the unique identifer for this object.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">obj_id</span> <span class="sy0">=</span> <span class="kw2">self</span>.__total_id</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#Keeps track of the total number of object created since game start.</span></p></li>
<li class="li2"><p class="de2">        UpdatableObj.__total_id +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#Is the object allowed to update druing the update loop?</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">is_enabled</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#Does the object stay in one place even if the camera is moving?</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">is_static</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#Represents the location of the object in world space.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#Allows the user to define the object as they want.</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">tag</span> <span class="sy0">=</span> <span class="st0">""</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#allows to add commands</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="kw3">commands</span> <span class="sy0">=</span> <span class="kw2">None</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#variables to be used by self.commands</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">variable_1</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">variable_2</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">variable_3</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__str__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> <span class="st0">"{ <span class="es0">\n</span>UpdateableObj: <span class="es0">\t</span> Update Order: "</span> + <span class="kw2">str</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">update_order</span><span class="br0">)</span> + <span class="st0">"<span class="es0">\t</span> Object ID: "</span> \</p></li>
<li class="li2"><p class="de2">               + <span class="kw2">str</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">obj_id</span><span class="br0">)</span> + <span class="st0">"<span class="es0">\t</span> Is Enabled: "</span> + <span class="kw2">str</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">is_enabled</span><span class="br0">)</span>+ <span class="st0">"<span class="es0">\n</span>}"</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="co1">#Update the object.</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw1">not</span> <span class="kw2">self</span>.<span class="kw3">commands</span> <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">exec</span> <span class="kw2">self</span>.<span class="kw3">commands</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> DrawableObj<span class="br0">(</span>UpdatableObj<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="st0">"""An object that represents something that can be drawn."""</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> update_order <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">,</span> draw_order <span class="sy0">=</span> <span class="nu0">0</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>DrawableObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> update_order<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">draw_order</span> <span class="sy0">=</span> draw_order</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#Should the object draw during the update loop?</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">is_visible</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#The surface rendered onto the screen when draw is called.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">surface</span>.<span class="me1">Surface</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">offset</span> <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw1">try</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">scale_factor</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">except</span> <span class="kw2">AttributeError</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> show<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Enable and show the object."""</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">is_enabled</span> <span class="sy0">=</span> true</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">is_visible</span> <span class="sy0">=</span> true</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> hide<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="st0">"""Disable and hide the object."""</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">is_enabled</span> <span class="sy0">=</span> false</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">is_visible</span> <span class="sy0">=</span> false</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> is_visible_to_camera<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> camera<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Is the object visible to the camera?"""</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#if self.image.get_rect().colliderect(camera.rect):</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#   return True</span></p></li>
<li class="li2"><p class="de2">        <span class="co1"># ^ doesn't work, don't know why</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> <span class="kw2">True</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> draw<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="sy0">,</span> surface<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="co1">#Draw the object</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">is_static</span>:</p></li>
<li class="li2"><p class="de2">            surface.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">position</span> + <span class="kw2">self</span>.<span class="me1">offset</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">            relative_position <span class="sy0">=</span> <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">position</span> + <span class="kw2">self</span>.<span class="me1">offset</span><span class="br0">)</span> - <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">camera</span>.<span class="me1">position</span></p></li>
<li class="li1"><p class="de1">            <span class="co1"># glich fix, the render makes weird jumps (only for some objects) between two pixels if you dont do this</span></p></li>
<li class="li2"><p class="de2">            relative_position <span class="sy0">=</span> Vector<span class="br0">(</span>relative_position.<span class="me1">x</span><span class="sy0">,</span> relative_position.<span class="me1">y</span> - <span class="nu0">0.2</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            surface.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> relative_position<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1">#keyboard and keystate class from ragnarok engine</span></p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> KeyState<span class="br0">(</span><span class="kw2">object</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="co1">#Contains a reference to all pressed status of all the keys</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">key_states</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        new_keys <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> key <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">key_states</span>:</p></li>
<li class="li1"><p class="de1">            new_keys.<span class="me1">append</span><span class="br0">(</span>key<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        state_cpy <span class="sy0">=</span> KeyState<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        state_cpy.<span class="me1">key_states</span> <span class="sy0">=</span> new_keys</p></li>
<li class="li2"><p class="de2">        <span class="kw1">return</span> state_cpy</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> query_state<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""</span></p></li>
<li class="li2"><p class="de2"><span class="st0">        Query the state of a key. True if the key is down, false if it is up.</span></p></li>
<li class="li1"><p class="de1"><span class="st0">        key is a pygame key.</span></p></li>
<li class="li2"><p class="de2"><span class="st0">        """</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">key_states</span><span class="br0">[</span>key<span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Keyboard<span class="br0">(</span>UpdatableObj<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Keyboard<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">None</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">current_state</span> <span class="sy0">=</span> KeyState<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">previous_state</span> <span class="sy0">=</span> KeyState<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="me1">key_states</span> <span class="sy0">=</span> pygame.<span class="me1">key</span>.<span class="me1">get_pressed</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> is_down<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="me1">query_state</span><span class="br0">(</span>key<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> is_up<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">return</span> <span class="kw1">not</span> <span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="me1">query_state</span><span class="br0">(</span>key<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> is_clicked<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="me1">query_state</span><span class="br0">(</span>key<span class="br0">)</span> <span class="kw1">and</span> <span class="br0">(</span><span class="kw1">not</span> <span class="kw2">self</span>.<span class="me1">previous_state</span>.<span class="me1">query_state</span><span class="br0">(</span>key<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> is_released<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> key<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">previous_state</span>.<span class="me1">query_state</span><span class="br0">(</span>key<span class="br0">)</span> <span class="kw1">and</span> <span class="br0">(</span><span class="kw1">not</span> <span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="me1">query_state</span><span class="br0">(</span>key<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> is_any_down<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Is any button depressed?"""</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> key <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="me1">key_states</span><span class="br0">)</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">is_down</span><span class="br0">(</span>key<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">return</span> <span class="kw2">True</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">return</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> is_any_clicked<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="st0">"""Is any button clicked?"""</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> key <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="me1">key_states</span><span class="br0">)</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">is_clicked</span><span class="br0">(</span>key<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw1">return</span> <span class="kw2">True</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">return</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        keys <span class="sy0">=</span> pygame.<span class="me1">key</span>.<span class="me1">get_pressed</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">previous_state</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">current_state</span>.<span class="me1">key_states</span> <span class="sy0">=</span> keys</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Keyboard<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Camera<span class="br0">(</span>UpdatableObj<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Camera<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">offset</span> <span class="sy0">=</span> Vector<span class="br0">(</span>windowWidth/<span class="nu0">2</span><span class="sy0">,</span> windowHeight/<span class="nu0">2</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale</span> <span class="sy0">=</span> Vector<span class="br0">(</span>windowWidth<span class="sy0">,</span> windowHeight<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> position - <span class="kw2">self</span>.<span class="me1">offset</span> + <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">player</span>.<span class="me1">scale</span>/<span class="nu0">2</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">rect</span> <span class="sy0">=</span> pygame.<span class="me1">Rect</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">position</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">velocity</span> <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">Surface</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">10</span><span class="sy0">,</span><span class="nu0">10</span><span class="br0">)</span><span class="br0">)</span>.<span class="me1">convert</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span>.<span class="me1">fill</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="co1">#time = (milliseconds / 1000.0)</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#self.velocity.y = 0</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#self.velocity.x = 0</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#if main_game.keyboard.is_down(K_w):</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#    self.velocity.y = -200</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#if main_game.keyboard.is_down(K_s):</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#    self.velocity.y = 200</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#if main_game.keyboard.is_down(K_d):</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#    self.velocity.x = 200</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#if main_game.keyboard.is_down(K_a):</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#    self.velocity.x = -200</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#self.position += self.velocity * time</span></p></li>
<li class="li1"><p class="de1">        camera_position <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">position</span> + <span class="kw2">self</span>.<span class="me1">offset</span></p></li>
<li class="li2"><p class="de2">        player_position <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">player</span>.<span class="me1">position</span> + <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">player</span>.<span class="me1">scale</span>/<span class="nu0">2</span></p></li>
<li class="li1"><p class="de1">        distance <span class="sy0">=</span> player_position - camera_position</p></li>
<li class="li2"><p class="de2">        cam_x <span class="sy0">=</span> <span class="nu0">0</span> <span class="co1">#150 # allowed_distance_x_from_camera</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        camera_position.<span class="me1">y</span> <span class="sy0">=</span> player_position.<span class="me1">y</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> distance.<span class="me1">x</span> <span class="sy0">&gt;</span> cam_x:</p></li>
<li class="li2"><p class="de2">            camera_position.<span class="me1">x</span> <span class="sy0">=</span> player_position.<span class="me1">x</span> - cam_x</p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> distance.<span class="me1">x</span> <span class="sy0">&lt;</span> -cam_x:</p></li>
<li class="li2"><p class="de2">            camera_position.<span class="me1">x</span> <span class="sy0">=</span> player_position.<span class="me1">x</span> + cam_x</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> camera_position - <span class="kw2">self</span>.<span class="me1">offset</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">topleft</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">position</span> <span class="co1">#- self.offset</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1"># blueprint</span></p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Level<span class="br0">(</span>UpdatableObj<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level_file <span class="sy0">=</span> <span class="kw2">None</span><span class="sy0">,</span> player_position <span class="sy0">=</span> <span class="kw2">None</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Level<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_update</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_draw</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#Do we need to sort our list of updatable objects?</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.__do_need_sort_up <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#Do we need to sort our list of drawable objects?</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.__do_need_sort_draw <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">player_position</span> <span class="sy0">=</span> player_position</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw1">not</span> level_file <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">load_level</span><span class="br0">(</span>level_file<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> load_level<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level_file<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">load_level_file</span><span class="br0">(</span>level_file<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">parse_level_file</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> find_obj_in_list<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> search_list<span class="sy0">,</span> value<span class="sy0">,</span> tag_or_id<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> tag_or_id <span class="sy0">==</span> <span class="st0">"tag"</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">for</span> obj <span class="kw1">in</span> search_list:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> obj.<span class="me1">tag</span> <span class="sy0">==</span> value:</p></li>
<li class="li1"><p class="de1">                    <span class="kw1">return</span> obj</p></li>
<li class="li2"><p class="de2">        <span class="kw1">elif</span> tag_or_id <span class="sy0">==</span> <span class="st0">"id"</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">for</span> obj <span class="kw1">in</span> search_list:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> obj.<span class="me1">obj_id</span> <span class="sy0">==</span> value:</p></li>
<li class="li1"><p class="de1">                    <span class="kw1">return</span> obj</p></li>
<li class="li2"><p class="de2">        <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">print</span> <span class="st0">"error tag_or_id"</span></p></li>
<li class="li2"><p class="de2">    </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> load_level_file<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level_file<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        filename <span class="sy0">=</span> <span class="st0">"data/maps/"</span> + level_file <span class="co1">#filename</span></p></li>
<li class="li1"><p class="de1">        stream <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">(</span>filename<span class="sy0">,</span> <span class="st0">'r'</span><span class="br0">)</span>            <span class="co1">#opening stream</span></p></li>
<li class="li2"><p class="de2">        yaml_file <span class="sy0">=</span> yaml.<span class="me1">load</span><span class="br0">(</span>stream<span class="br0">)</span>           <span class="co1">#loading stream</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#print yaml_file</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">########################################################</span></p></li>
<li class="li2"><p class="de2">        <span class="co1"># this is becaus YAML doesn't load dicts in the order it</span></p></li>
<li class="li1"><p class="de1">        <span class="co1"># was written and python only does it with OrderedDict()</span></p></li>
<li class="li2"><p class="de2">        begin_dict <span class="sy0">=</span> OrderedDict<span class="br0">(</span>yaml_file<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> index<span class="sy0">,</span> dictionary <span class="kw1">in</span> <span class="kw2">enumerate</span><span class="br0">(</span>yaml_file<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw1">not</span> index <span class="sy0">==</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">                begin_dict.<span class="me1">update</span><span class="br0">(</span>dictionary<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="co1">########################################################</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">level</span> <span class="sy0">=</span> begin_dict</p></li>
<li class="li1"><p class="de1">    </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> parse_level_file<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_collision</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        camera_position <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">###### temporary ############</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">background</span> <span class="sy0">=</span> DrawableObj<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        surface <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>screen<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        fill_gradient<span class="br0">(</span>surface<span class="sy0">,</span> <span class="br0">(</span><span class="nu0">170</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">background</span>.<span class="me1">image</span> <span class="sy0">=</span> surface</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">background</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#############################</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="nu0">3.0</span> <span class="co1"># best to use integer or 1/2 because of rounding faults of the program</span></p></li>
<li class="li1"><p class="de1">        scale_factor <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">scale_factor</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> obj <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span>:</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">            obj_postion <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="st0">"position"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li1"><p class="de1">                obj_position <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"position"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>*scale_factor<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"position"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>*scale_factor<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            obj_offset <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="st0">"offset"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li2"><p class="de2">                obj_offset <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"offset"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>*scale_factor<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"offset"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>*scale_factor<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            obj_scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="st0">"scale"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li1"><p class="de1">                obj_scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"scale"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>*scale_factor<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"scale"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>*scale_factor<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                obj_scale_int <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"scale"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>*scale_factor<span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"scale"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>*scale_factor<span class="br0">)</span><span class="br0">)</span> <span class="co1"># scale values in integers</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="st0">"image"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">isinstance</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span><span class="sy0">,</span> <span class="kw2">basestring</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                    obj_image <span class="sy0">=</span> load_png<span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">elif</span> <span class="kw2">isinstance</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="sy0">,</span> <span class="kw2">list</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                    tile_scale_x <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                    tile_scale_y <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">                    tileset <span class="sy0">=</span> load_tile_table<span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span> tile_scale_x<span class="sy0">,</span> tile_scale_y<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    tile_pos_x <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">                    tile_pos_y <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                    obj_image <span class="sy0">=</span> tileset<span class="br0">[</span>tile_pos_x<span class="br0">]</span><span class="br0">[</span>tile_pos_y<span class="br0">]</span></p></li>
<li class="li1"><p class="de1">            obj_commands <span class="sy0">=</span> <span class="kw2">None</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="st0">"commands"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li1"><p class="de1">                obj_commands <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"commands"</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="st0">"randomclouds"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li2"><p class="de2">                tileset_file <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"randomclouds"</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">create_clouds</span><span class="br0">(</span>tileset_file<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> obj <span class="sy0">==</span> <span class="st0">"player"</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">player_position</span> <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">player_position</span> <span class="sy0">=</span> obj_position</p></li>
<li class="li2"><p class="de2">                    camera_position <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>obj_position<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">player</span> <span class="sy0">=</span> Player<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj_position<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">player</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">player</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">                    camera_position <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">player_position</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">player</span> <span class="sy0">=</span> Player<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">player_position</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">player</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">player</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">            <span class="kw1">elif</span> <span class="st0">"cloud"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li1"><p class="de1">                layer <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"cloud"</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                cloud_image <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>obj_image<span class="sy0">,</span> obj_scale_int<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                cloud <span class="sy0">=</span> Cloud<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj_position<span class="sy0">,</span> obj_scale<span class="sy0">,</span> cloud_image<span class="sy0">,</span> layer<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>cloud<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                </p></li>
<li class="li2"><p class="de2">            <span class="kw1">elif</span> <span class="st0">"interactive"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"interactive"</span><span class="br0">]</span> <span class="sy0">==</span> <span class="st0">"npc"</span>:</p></li>
<li class="li2"><p class="de2">                    npc_image_transformed <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>obj_image<span class="sy0">,</span> obj_scale_int<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    npc_dialog_file <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"dialog"</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                    npc <span class="sy0">=</span> NPC<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj_position<span class="sy0">,</span> obj_scale<span class="sy0">,</span> npc_image_transformed<span class="sy0">,</span> npc_dialog_file<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_collision</span>.<span class="me1">append</span><span class="br0">(</span>npc<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>npc<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    </p></li>
<li class="li1"><p class="de1">            <span class="kw1">elif</span> <span class="st0">"animation"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"animation"</span><span class="br0">]</span> <span class="sy0">==</span> <span class="st0">"loop"</span>:</p></li>
<li class="li1"><p class="de1">                    image_sequence <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                    tpf <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"tpf"</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">                    ani_obj <span class="sy0">=</span> AnimationLoopObj<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj_position<span class="sy0">,</span> obj_scale<span class="sy0">,</span> image_sequence<span class="sy0">,</span> tpf<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    ani_obj.<span class="kw3">commands</span> <span class="sy0">=</span> obj_commands</p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span>ani_obj<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>ani_obj<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    </p></li>
<li class="li2"><p class="de2">                <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"animation"</span><span class="br0">]</span> <span class="sy0">==</span> <span class="st0">"oncollision"</span>:</p></li>
<li class="li1"><p class="de1">                    image_sequence <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"image"</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                    tpf <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"tpf"</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">                    condition <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"condition"</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                    ani_obj <span class="sy0">=</span> AnimationOnCollisionObj<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj_position<span class="sy0">,</span> obj_scale<span class="sy0">,</span> image_sequence<span class="sy0">,</span> tpf<span class="sy0">,</span> condition<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    ani_obj.<span class="kw3">commands</span> <span class="sy0">=</span> obj_commands</p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_collision</span>.<span class="me1">append</span><span class="br0">(</span>ani_obj<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span>ani_obj<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>ani_obj<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            </p></li>
<li class="li2"><p class="de2">            <span class="kw1">elif</span> <span class="st0">"tile_solids"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li1"><p class="de1">                thing <span class="sy0">=</span> DrawableObj<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                thing.<span class="me1">position</span> <span class="sy0">=</span> obj_position</p></li>
<li class="li1"><p class="de1">                thing.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>obj_image<span class="sy0">,</span> obj_scale_int<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                thing.<span class="me1">is_static</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="st0">"tile_solids"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li1"><p class="de1">                    <span class="co1">#tile_scale_without_scale_factor = Vector(self.level[obj]["tile_scale"][0], self.level[obj]["tile_scale"][1])</span></p></li>
<li class="li2"><p class="de2">                    tile_scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"tile_scale"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>*scale_factor<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"tile_scale"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>*scale_factor<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    solid_tiles <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"tile_solids"</span><span class="br0">]</span>.<span class="me1">split</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="co1">#print solid_tiles</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw1">for</span> map_y<span class="sy0">,</span> line <span class="kw1">in</span> <span class="kw2">enumerate</span><span class="br0">(</span>solid_tiles<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                        <span class="kw1">for</span> map_x<span class="sy0">,</span> character <span class="kw1">in</span> <span class="kw2">enumerate</span><span class="br0">(</span>line<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                            <span class="kw1">if</span> character <span class="sy0">==</span> <span class="st0">"#"</span>:</p></li>
<li class="li2"><p class="de2">                                tile_pos <span class="sy0">=</span> Vector<span class="br0">(</span>map_x*tile_scale.<span class="me1">x</span><span class="sy0">,</span> map_y*tile_scale.<span class="me1">y</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                                collision_obj <span class="sy0">=</span> SolidObj<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> tile_pos<span class="sy0">,</span> tile_scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                                <span class="kw2">self</span>.<span class="me1">list_collision</span>.<span class="me1">append</span><span class="br0">(</span>collision_obj<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                                <span class="co1">#self.list_draw.append(collision_obj) # for debugging</span></p></li>
<li class="li2"><p class="de2">                                <span class="co1">#self.list_update.append(collision_obj) # for debugging</span></p></li>
<li class="li1"><p class="de1">                            <span class="kw1">if</span> character <span class="sy0">==</span> <span class="st0">"^"</span>:</p></li>
<li class="li2"><p class="de2">                                tile_pos <span class="sy0">=</span> Vector<span class="br0">(</span>map_x*tile_scale.<span class="me1">x</span><span class="sy0">,</span> map_y*tile_scale.<span class="me1">y</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                                collision_obj <span class="sy0">=</span> PlatformObj<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> tile_pos<span class="sy0">,</span> tile_scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                                <span class="kw2">self</span>.<span class="me1">list_collision</span>.<span class="me1">append</span><span class="br0">(</span>collision_obj<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                                <span class="co1">#self.list_draw.append(collision_obj) # for debugging</span></p></li>
<li class="li2"><p class="de2">                                <span class="co1">#self.list_update.append(collision_obj) # for debugging</span></p></li>
<li class="li1"><p class="de1">                                </p></li>
<li class="li2"><p class="de2">            <span class="kw1">elif</span> <span class="st0">"solid"</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw1">try</span>:</p></li>
<li class="li2"><p class="de2">                    thing <span class="sy0">=</span> SolidObj<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj_position<span class="sy0">,</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"solid"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span>*scale_factor<span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"solid"</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span>*scale_factor<span class="br0">)</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    thing.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>obj_image<span class="sy0">,</span> obj_scale_int<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    thing.<span class="kw3">commands</span> <span class="sy0">=</span> obj_commands</p></li>
<li class="li1"><p class="de1">                    thing.<span class="me1">offset</span> <span class="sy0">=</span> obj_offset</p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_collision</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw1">if</span> <span class="kw1">not</span> obj_commands <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li2"><p class="de2">                        <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">except</span> <span class="kw2">TypeError</span>:</p></li>
<li class="li1"><p class="de1">                    thing <span class="sy0">=</span> PlatformObj<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj_position<span class="sy0">,</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="br0">[</span>obj<span class="br0">]</span><span class="br0">[</span><span class="st0">"solid"</span><span class="br0">]</span>*scale_factor<span class="br0">)</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    thing.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>obj_image<span class="sy0">,</span> obj_scale_int<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    thing.<span class="kw3">commands</span> <span class="sy0">=</span> obj_commands</p></li>
<li class="li2"><p class="de2">                    thing.<span class="me1">offset</span> <span class="sy0">=</span> obj_offset</p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">list_collision</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw1">if</span> <span class="kw1">not</span> obj_commands <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li1"><p class="de1">                        <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">                thing <span class="sy0">=</span> DrawableObj<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                thing.<span class="me1">position</span> <span class="sy0">=</span> obj_position</p></li>
<li class="li2"><p class="de2">                thing.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>obj_image<span class="sy0">,</span> obj_scale_int<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                thing.<span class="me1">is_static</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2">                thing.<span class="kw3">commands</span> <span class="sy0">=</span> obj_commands</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> <span class="kw1">not</span> obj_commands <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>thing<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">camera</span> <span class="sy0">=</span> Camera<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> camera_position<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">camera</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> get_tile<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> x<span class="sy0">,</span> y<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">try</span>:</p></li>
<li class="li2"><p class="de2">            char <span class="sy0">=</span> <span class="kw2">self</span>.<span class="kw2">map</span><span class="br0">[</span>y<span class="br0">]</span><span class="br0">[</span>x<span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">except</span> <span class="kw2">IndexError</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">return</span> <span class="br0">{</span><span class="br0">}</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">try</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">return</span> <span class="kw2">self</span>.<span class="me1">key</span><span class="br0">[</span>char<span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">except</span> <span class="kw2">KeyError</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">return</span> <span class="br0">{</span><span class="br0">}</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> get_bool<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> x<span class="sy0">,</span> y<span class="sy0">,</span> name<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Tell if the specified flag is set for position on the map."""</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        value <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">get_tile</span><span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span>.<span class="me1">get</span><span class="br0">(</span>name<span class="br0">)</span> <span class="co1"># return value</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">return</span> value <span class="kw1">in</span> <span class="br0">(</span><span class="kw2">True</span><span class="sy0">,</span> <span class="nu0">1</span><span class="sy0">,</span> <span class="st0">'true'</span><span class="sy0">,</span> <span class="st0">'yes'</span><span class="sy0">,</span> <span class="st0">'True'</span><span class="sy0">,</span> <span class="st0">'Yes'</span><span class="sy0">,</span> <span class="st0">'1'</span><span class="sy0">,</span> <span class="st0">'on'</span><span class="sy0">,</span> <span class="st0">'On'</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> get_attribute<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> x<span class="sy0">,</span> y<span class="sy0">,</span> name<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Tell if the specified flag is set for position on the map."""</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        value <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">get_tile</span><span class="br0">(</span>x<span class="sy0">,</span> y<span class="br0">)</span>.<span class="me1">get</span><span class="br0">(</span>name<span class="br0">)</span> <span class="co1"># return value of that name</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">return</span> value</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> create_clouds<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> tileset_image<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="co1"># simple extra function too randomly create clouds on the background of the level</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> cloud <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span><span class="nu0">7</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            tileset <span class="sy0">=</span> load_tile_table<span class="br0">(</span>tileset_image<span class="sy0">,</span> <span class="nu0">48</span><span class="sy0">,</span> <span class="nu0">48</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            tile_pos_x <span class="sy0">=</span> <span class="kw3">random</span>.<span class="me1">randint</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">2</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            tile_pos_y <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">            obj_image <span class="sy0">=</span> tileset<span class="br0">[</span>tile_pos_x<span class="br0">]</span><span class="br0">[</span>tile_pos_y<span class="br0">]</span></p></li>
<li class="li1"><p class="de1">            obj_position <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw3">random</span>.<span class="me1">randint</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">3200</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw3">random</span>.<span class="me1">randint</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1600</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            scale <span class="sy0">=</span> <span class="kw3">random</span>.<span class="me1">randint</span><span class="br0">(</span><span class="nu0">250</span><span class="sy0">,</span> <span class="nu0">360</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            obj_scale <span class="sy0">=</span> Vector<span class="br0">(</span>scale<span class="sy0">,</span>scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            layer <span class="sy0">=</span> <span class="kw3">random</span>.<span class="me1">randint</span><span class="br0">(</span><span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">9</span><span class="br0">)</span>/<span class="nu0">10.0</span></p></li>
<li class="li1"><p class="de1">            cloud_image <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>obj_image<span class="sy0">,</span> obj_scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            cloud <span class="sy0">=</span> Cloud<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj_position<span class="sy0">,</span> obj_scale<span class="sy0">,</span> cloud_image<span class="sy0">,</span> layer<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>cloud<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> create_gradient_background<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> color_1<span class="sy0">,</span> color_2<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">background</span> <span class="sy0">=</span> DrawableObj<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        surface <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>screen<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        fill_gradient<span class="br0">(</span>surface<span class="sy0">,</span> color_1<span class="sy0">,</span> color_2<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">background</span>.<span class="me1">image</span> <span class="sy0">=</span> surface</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">background</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> __draw_cmp<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj1<span class="sy0">,</span> obj2<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Defines how our drawable objects should be sorted"""</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> obj1.<span class="me1">draw_order</span> <span class="sy0">&gt;</span> obj2.<span class="me1">draw_order</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">return</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">elif</span> obj1.<span class="me1">draw_order</span> <span class="sy0">&lt;</span> obj2.<span class="me1">draw_order</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">return</span> -<span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">return</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> __up_cmp<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj1<span class="sy0">,</span> obj2<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="st0">"""Defines how our updatable objects should be sorted"""</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> obj1.<span class="me1">update_order</span> <span class="sy0">&gt;</span> obj2.<span class="me1">update_order</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">return</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">elif</span> obj1.<span class="me1">update_order</span> <span class="sy0">&lt;</span> obj2.<span class="me1">update_order</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">return</span> -<span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">return</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> __sort_up<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Sort the updatable objects according to ascending order"""</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.__do_need_sort_up:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">sort</span><span class="br0">(</span><span class="kw2">self</span>.__up_cmp<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.__do_need_sort_up <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> __sort_draw<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Sort the drawable objects according to ascending order"""</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.__do_need_sort_draw:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">sort</span><span class="br0">(</span><span class="kw2">self</span>.__draw_cmp<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.__do_need_sort_draw <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Updates all of the objects in our world."""</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.__sort_up<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> obj <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">list_update</span>:</p></li>
<li class="li2"><p class="de2">            obj.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> draw<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="sy0">,</span> surface<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Draws all of the objects in our world."""</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.__sort_draw<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> obj <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">list_draw</span>:</p></li>
<li class="li2"><p class="de2">            <span class="co1">#Check to see if the object is visible to the camera before doing anything to it.</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> obj.<span class="me1">is_static</span> <span class="kw1">or</span> obj.<span class="me1">is_visible_to_camera</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">camera</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                obj.<span class="me1">draw</span><span class="br0">(</span>milliseconds<span class="sy0">,</span> surface<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Level_2<span class="br0">(</span>Level<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Level_2<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span><span class="st0">"level_1_YAML.map"</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1"><span class="co1">#        self.load_level("level_1_YAML.map")</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1"># put debug in only for debugging (obviously)</span></p></li>
<li class="li2"><p class="de2">        debug <span class="sy0">=</span> Debug<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span>debug<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>debug<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Level_menu_main<span class="br0">(</span>Level<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Level_menu_main<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">create_gradient_background</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">170</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">menu</span> <span class="sy0">=</span> Menu_main<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">menu</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">menu</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Level_1<span class="br0">(</span>Level<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Level_1<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">background</span> <span class="sy0">=</span> DrawableObj<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        surface <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>screen<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        fill_gradient<span class="br0">(</span>surface<span class="sy0">,</span> <span class="br0">(</span><span class="nu0">170</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">background</span>.<span class="me1">image</span> <span class="sy0">=</span> surface</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">background</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">load_level</span><span class="br0">(</span><span class="st0">"data/maps/level_1.map"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        cloud_1 <span class="sy0">=</span> Cloud<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> Vector<span class="br0">(</span>-<span class="nu0">200</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        cloud_2 <span class="sy0">=</span> Cloud<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> Vector<span class="br0">(</span><span class="nu0">1600</span><span class="sy0">,</span> <span class="nu0">400</span><span class="br0">)</span><span class="sy0">,</span> Vector<span class="br0">(</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        cloud_3 <span class="sy0">=</span> Cloud<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> Vector<span class="br0">(</span><span class="nu0">1200</span><span class="sy0">,</span> -<span class="nu0">200</span><span class="br0">)</span><span class="sy0">,</span> Vector<span class="br0">(</span><span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_clouds</span> <span class="sy0">=</span> <span class="br0">[</span>cloud_1<span class="sy0">,</span> cloud_2<span class="sy0">,</span> cloud_3<span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">player</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">camera</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">extend</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">list_clouds</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image_background</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">extend</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">list_npc</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#self.list_draw.extend(self.list_interactive_tiles)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">player</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image_overlay</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#self.list_draw.extend(self.list_collidables) # used for debug to know where solid tiles are</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1"># debug is above everything</span></p></li>
<li class="li1"><p class="de1">        <span class="co1"># can't seem to get it to work properly</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#name = "main.game." + str(main_game.list_update[0]) + ".player.collision_y"</span></p></li>
<li class="li1"><p class="de1">        debug <span class="sy0">=</span> Debug<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span>debug<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span>debug<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1"># menu and button classes</span></p></li>
<li class="li1"><p class="de1"><span class="co1"># blueprint</span></p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Button<span class="br0">(</span>DrawableObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="sy0">,</span> image_selected <span class="sy0">=</span> <span class="kw2">None</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Button<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale</span> <span class="sy0">=</span> scale</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> position</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> image_selected <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li1"><p class="de1">            image_selected <span class="sy0">=</span> image_select</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image_deselect</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>image_deselect<span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image_select</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>image_select<span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image_selected</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>image_selected<span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">image_deselect</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">selected</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw3">select</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">selected</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">image_select</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> deselect<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">selected</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">image_deselect</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> clicked_action<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">image_selected</span></p></li>
<li class="li2"><p class="de2">        <span class="st0">''' needs to be overwritten'''</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">pass</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Button_main_menu<span class="br0">(</span>Button<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Button_main_menu<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_select</span> <span class="sy0">=</span> load_sound<span class="br0">(</span><span class="st0">"menu/menu_select.wav"</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_select</span>.<span class="me1">set_volume</span><span class="br0">(</span><span class="nu0">0.04</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_selected</span> <span class="sy0">=</span> load_sound<span class="br0">(</span><span class="st0">"menu/menu_selected.wav"</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_selected</span>.<span class="me1">set_volume</span><span class="br0">(</span><span class="nu0">0.04</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw3">select</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Button_main_menu<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw3">select</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_select</span>.<span class="me1">play</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> clicked_action<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Button_main_menu<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">clicked_action</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_selected</span>.<span class="me1">play</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Button_new_game<span class="br0">(</span>Button_main_menu<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">38</span>*<span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">7</span>*<span class="nu0">10</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        position <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">50</span><span class="sy0">,</span> <span class="nu0">5</span>*<span class="nu0">10</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        image_deselect <span class="sy0">=</span> load_png<span class="br0">(</span><span class="st0">"menu/button_new_game_deselected.png"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        image_select <span class="sy0">=</span> load_png<span class="br0">(</span><span class="st0">"menu/button_new_game_selected.png"</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Button_new_game<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> clicked_action<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Button_new_game<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">clicked_action</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        main_game.<span class="me1">game_state</span> <span class="sy0">=</span> <span class="st0">"game"</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        level_2 <span class="sy0">=</span> Level_2<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        main_game.<span class="me1">list_update</span> <span class="sy0">=</span> <span class="br0">[</span>level_2<span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        main_game.<span class="me1">list_draw</span> <span class="sy0">=</span> <span class="br0">[</span>level_2<span class="br0">]</span> <span class="co1"># main_game.player is drawn in level_1 so you can use layers</span></p></li>
<li class="li2"><p class="de2">        <span class="co1"># for debug put main_game.debug_info, main_game.camera in the list</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#game.list_draw.extend(level_1.list_solid_tiles)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Button_load_level<span class="br0">(</span>Button_main_menu<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">41</span>*<span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">7</span>*<span class="nu0">10</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        position <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">50</span><span class="sy0">,</span> <span class="nu0">13</span>*<span class="nu0">10</span><span class="br0">)</span> </p></li>
<li class="li1"><p class="de1">        image_deselect <span class="sy0">=</span> load_png<span class="br0">(</span><span class="st0">"menu/button_load_level_deselected.png"</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        image_select <span class="sy0">=</span> load_png<span class="br0">(</span><span class="st0">"menu/button_load_level_selected.png"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Button_load_level<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> clicked_action<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Button_load_level<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">clicked_action</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">print</span> <span class="st0">"level loading begins"</span></p></li>
<li class="li1"><p class="de1">        main_game.<span class="me1">game_state</span> <span class="sy0">=</span> <span class="st0">"menu_loadlevel"</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Button_info<span class="br0">(</span>Button_main_menu<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">17</span>*<span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">7</span>*<span class="nu0">10</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        position <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">50</span><span class="sy0">,</span> <span class="nu0">21</span>*<span class="nu0">10</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        image_deselect <span class="sy0">=</span> load_png<span class="br0">(</span><span class="st0">"menu/button_info_deselected.png"</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        image_select <span class="sy0">=</span> load_png<span class="br0">(</span><span class="st0">"menu/button_info_selected.png"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Button_info<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> clicked_action<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Button_info<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">clicked_action</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">print</span> <span class="st0">"main main_game begins"</span></p></li>
<li class="li1"><p class="de1">        main_game.<span class="me1">game_state</span> <span class="sy0">=</span> <span class="st0">"menu_info"</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="co1"># blueprint</span></p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Menu<span class="br0">(</span>DrawableObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Menu<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#The keyboard button that selects the button above the currently selected button.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">move_up_button</span> <span class="sy0">=</span> K_UP</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#The keyboard button that selects the button below the currently selected button.</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">move_down_button</span> <span class="sy0">=</span> K_DOWN</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#The keyboard button we will querty for clicked events.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">select_button</span> <span class="sy0">=</span> K_SPACE</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#The index of the currently selected button.</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">current_index</span> <span class="sy0">=</span> -<span class="nu0">1</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#List of buttons</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">buttons</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="co1">#Set the default selected button. This is necessary to to get correct behavior when the menu first starts running.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">current_index</span> <span class="sy0">==</span> -<span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">current_index</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">buttons</span><span class="br0">[</span><span class="kw2">self</span>.<span class="me1">current_index</span><span class="br0">]</span>.<span class="kw3">select</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_clicked</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">move_up_button</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">move_up</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_clicked</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">move_down_button</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">move_down</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_released</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">select_button</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">buttons</span><span class="br0">[</span><span class="kw2">self</span>.<span class="me1">current_index</span><span class="br0">]</span>.<span class="me1">clicked_action</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Menu<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> move_up<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""</span></p></li>
<li class="li2"><p class="de2"><span class="st0">        Try to select the button above the currently selected one.</span></p></li>
<li class="li1"><p class="de1"><span class="st0">        If a button is not there, wrap down to the bottom of the menu and select the last button.</span></p></li>
<li class="li2"><p class="de2"><span class="st0">        """</span></p></li>
<li class="li1"><p class="de1">        old_index <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">current_index</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">current_index</span> -<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.__wrap_index<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.__handle_selections<span class="br0">(</span>old_index<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">current_index</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> move_down<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""</span></p></li>
<li class="li2"><p class="de2"><span class="st0">        Try to select the button under the currently selected one.</span></p></li>
<li class="li1"><p class="de1"><span class="st0">        If a button is not there, wrap down to the top of the menu and select the first button.</span></p></li>
<li class="li2"><p class="de2"><span class="st0">        """</span></p></li>
<li class="li1"><p class="de1">        old_index <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">current_index</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">current_index</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.__wrap_index<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.__handle_selections<span class="br0">(</span>old_index<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">current_index</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> __wrap_index<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="st0">"""Wraps the current_index to the other side of the menu."""</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">current_index</span> <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">current_index</span> <span class="sy0">=</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">buttons</span><span class="br0">)</span> - <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">current_index</span> <span class="sy0">&gt;=</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">buttons</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">current_index</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> __handle_selections<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> old_index<span class="sy0">,</span> new_index<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="co1">#Don't perform any deselections or selections if the currently selected button hasn't changed.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> old_index <span class="kw1">is</span> <span class="kw1">not</span> new_index:</p></li>
<li class="li2"><p class="de2">            <span class="co1">#Deselect the old button</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">buttons</span><span class="br0">[</span>old_index<span class="br0">]</span>.<span class="me1">deselect</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##            print "Button " + str(old_index) + " deselected."</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">            <span class="co1">#Select the new button.</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">buttons</span><span class="br0">[</span>new_index<span class="br0">]</span>.<span class="kw3">select</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##            print "Button " + str(new_index) + " selected."</span></p></li>
<li class="li1"><p class="de1">            </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> draw<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="sy0">,</span> surface<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> button <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">buttons</span>:</p></li>
<li class="li2"><p class="de2">            button.<span class="me1">draw</span><span class="br0">(</span>milliseconds<span class="sy0">,</span> surface<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Menu<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">draw</span><span class="br0">(</span>milliseconds<span class="sy0">,</span> surface<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Menu_main<span class="br0">(</span>Menu<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Menu_main<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">button_new_game</span> <span class="sy0">=</span> Button_new_game<span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">button_load_level</span> <span class="sy0">=</span> Button_load_level<span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">button_info</span> <span class="sy0">=</span> Button_info<span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">buttons</span> <span class="sy0">=</span> <span class="br0">[</span><span class="kw2">self</span>.<span class="me1">button_new_game</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">button_load_level</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">button_info</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Button_level_1<span class="br0">(</span>Button<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">48</span>*<span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">7</span>*<span class="nu0">10</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        position <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">100</span><span class="sy0">,</span> <span class="nu0">10</span>*<span class="nu0">10</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        image_deselect <span class="sy0">=</span> load_png<span class="br0">(</span><span class="st0">"menu/button_level_1_deselected.png"</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        image_select <span class="sy0">=</span> load_png<span class="br0">(</span><span class="st0">"menu/button_level_1_selected.png"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Button_level_1<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> clicked_action<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">print</span> <span class="st0">"main game begins"</span></p></li>
<li class="li2"><p class="de2">        main_game.<span class="me1">game_state</span> <span class="sy0">=</span> <span class="st0">"game"</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        level_1 <span class="sy0">=</span> Level<span class="br0">(</span><span class="st0">"data/maps/level_1.map"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        main_game.<span class="me1">list_update</span> <span class="sy0">=</span> <span class="br0">[</span>main_game.<span class="me1">debug_info</span><span class="sy0">,</span> main_game.<span class="me1">camera</span><span class="sy0">,</span> main_game.<span class="me1">player</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        main_game.<span class="me1">list_draw</span> <span class="sy0">=</span> <span class="br0">[</span>level_1<span class="sy0">,</span> game.<span class="me1">debug_info</span><span class="br0">]</span> <span class="co1"># game.player is drawn in level_1 so you can use layers</span></p></li>
<li class="li1"><p class="de1">        <span class="co1"># for debug put game.debug_info, game.camera in the list</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#game.list_draw.extend(level_1.list_solid_tiles)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Menu_level_loader<span class="br0">(</span>Menu<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Menu_level_loader<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">button_level_1</span> <span class="sy0">=</span> Button_level_1<span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">buttons</span> <span class="sy0">=</span> <span class="br0">[</span><span class="kw2">self</span>.<span class="me1">button_level_1</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2"><span class="co1">#######################################################################################################################</span></p></li>
<li class="li1"><p class="de1"><span class="co1"># in game classes</span></p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> PhysicsObj<span class="br0">(</span>DrawableObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="st0">"""A class with basic physics implemented."""</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> velocity <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> acceleration <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>PhysicsObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">is_static</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>position<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">velocity</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>velocity<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">acceleration</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>acceleration<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale</span> <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span>scale.<span class="me1">x</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>scale.<span class="me1">y</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">rect</span> <span class="sy0">=</span> pygame.<span class="me1">Rect</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">position</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">scale</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>PhysicsObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#vf = vi + a * t</span></p></li>
<li class="li2"><p class="de2">        <span class="kw3">time</span> <span class="sy0">=</span> <span class="br0">(</span>milliseconds / <span class="nu0">1000.0</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">velocity</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">acceleration</span> * <span class="kw3">time</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">position</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span> * <span class="kw3">time</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">topleft</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">position</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> SolidObj<span class="br0">(</span>PhysicsObj<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="st0">"""A class for solid tiles etc..."""</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>SolidObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">Surface</span><span class="br0">(</span><span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">scale</span>.<span class="me1">x</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">scale</span>.<span class="me1">y</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span>.<span class="me1">fill</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> collision_response<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> player<span class="sy0">,</span> xvel<span class="sy0">,</span> yvel<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw1">not</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">==</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">            relative_velocity <span class="sy0">=</span> player.<span class="me1">velocity</span> - <span class="kw2">self</span>.<span class="me1">velocity</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> relative_velocity.<span class="me1">x</span> <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">                    player.<span class="me1">velocity</span>.<span class="me1">x</span> -<span class="sy0">=</span> relative_velocity.<span class="me1">x</span></p></li>
<li class="li1"><p class="de1">                    player.<span class="me1">velocity</span>.<span class="me1">x</span> -<span class="sy0">=</span> <span class="nu0">18</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> relative_velocity.<span class="me1">x</span> <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">                    player.<span class="me1">velocity</span>.<span class="me1">x</span> +<span class="sy0">=</span> relative_velocity.<span class="me1">x</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> relative_velocity.<span class="me1">x</span> <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">                    player.<span class="me1">velocity</span>.<span class="me1">x</span> +<span class="sy0">=</span> relative_velocity.<span class="me1">x</span> + <span class="nu0">10</span></p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> relative_velocity.<span class="me1">x</span> <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">                    player.<span class="me1">velocity</span>.<span class="me1">x</span> -<span class="sy0">=</span> relative_velocity.<span class="me1">x</span></p></li>
<li class="li1"><p class="de1">                    player.<span class="me1">velocity</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="nu0">80</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> xvel <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">            player.<span class="me1">position</span>.<span class="me1">x</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">left</span> - player.<span class="me1">scale</span>.<span class="me1">x</span></p></li>
<li class="li1"><p class="de1">            player.<span class="me1">rect</span>.<span class="me1">left</span> <span class="sy0">=</span> player.<span class="me1">position</span>.<span class="me1">x</span></p></li>
<li class="li2"><p class="de2">            player.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">            player.<span class="me1">collision_x</span> <span class="sy0">=</span> <span class="nu0">2</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> xvel <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">            player.<span class="me1">position</span>.<span class="me1">x</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">right</span></p></li>
<li class="li2"><p class="de2">            player.<span class="me1">rect</span>.<span class="me1">left</span> <span class="sy0">=</span> player.<span class="me1">position</span>.<span class="me1">x</span></p></li>
<li class="li1"><p class="de1">            player.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">            player.<span class="me1">collision_x</span> <span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> yvel <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">            player.<span class="me1">position</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">top</span> - player.<span class="me1">scale</span>.<span class="me1">y</span></p></li>
<li class="li1"><p class="de1">            player.<span class="me1">rect</span>.<span class="me1">top</span> <span class="sy0">=</span> player.<span class="me1">position</span>.<span class="me1">y</span></p></li>
<li class="li2"><p class="de2">            player.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">            player.<span class="me1">collision_y</span> <span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> yvel <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">            player.<span class="me1">position</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">bottom</span></p></li>
<li class="li2"><p class="de2">            player.<span class="me1">rect</span>.<span class="me1">top</span> <span class="sy0">=</span> player.<span class="me1">position</span>.<span class="me1">y</span></p></li>
<li class="li1"><p class="de1">            player.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">            player.<span class="me1">collision_y</span> <span class="sy0">=</span> <span class="nu0">2</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> PlatformObj<span class="br0">(</span>PhysicsObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="st0">"""A class for platform tiles etc..."""</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>PlatformObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">Surface</span><span class="br0">(</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">scale</span>.<span class="me1">x</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">scale</span>.<span class="me1">y</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span>.<span class="me1">fill</span><span class="br0">(</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">255</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> collision_response<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> player<span class="sy0">,</span> xvel<span class="sy0">,</span> yvel<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> yvel <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="nu0">0.1</span> * yvel <span class="sy0">&gt;</span> <span class="nu0">15</span>:</p></li>
<li class="li1"><p class="de1">                variable <span class="sy0">=</span> <span class="nu0">15</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">                variable <span class="sy0">=</span> <span class="nu0">0.1</span> * yvel</p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="br0">(</span>player.<span class="me1">position</span>.<span class="me1">y</span> + player.<span class="me1">scale</span>.<span class="me1">y</span><span class="br0">)</span> <span class="sy0">&lt;</span> <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">top</span> + variable * <span class="kw2">self</span>.<span class="me1">scale_factor</span>:</p></li>
<li class="li1"><p class="de1">                player.<span class="me1">position</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">top</span> - player.<span class="me1">scale</span>.<span class="me1">y</span></p></li>
<li class="li2"><p class="de2">                player.<span class="me1">rect</span>.<span class="me1">top</span> <span class="sy0">=</span> player.<span class="me1">position</span>.<span class="me1">y</span></p></li>
<li class="li1"><p class="de1">                player.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">                player.<span class="me1">collision_y</span> <span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">                <span class="co1"># this part is for moving platforms</span></p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> <span class="kw1">not</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">==</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2"><span class="co1">##                    relative_velocity = player.velocity - self.velocity</span></p></li>
<li class="li1"><p class="de1"><span class="co1">##                    if self.velocity.x &lt; 0:</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##                        if relative_velocity.x &gt; 0:</span></p></li>
<li class="li1"><p class="de1"><span class="co1">##                            player.velocity.x -= relative_velocity.x</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##                            #player.velocity.x /= 0.7</span></p></li>
<li class="li1"><p class="de1"><span class="co1">##                            #player.velocity.x -= 18</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##                        if relative_velocity.x &lt; 0:</span></p></li>
<li class="li1"><p class="de1"><span class="co1">##                            player.velocity.x += relative_velocity.x</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##                            #player.velocity.x /= 0.7</span></p></li>
<li class="li1"><p class="de1"><span class="co1">##                    if self.velocity.x &gt; 0:</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##                        if relative_velocity.x &gt; 0:</span></p></li>
<li class="li1"><p class="de1"><span class="co1">##                            player.velocity.x += relative_velocity.x # + 10</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##                            #player.velocity.x /= 0.7</span></p></li>
<li class="li1"><p class="de1"><span class="co1">##                        if relative_velocity.x &lt; 0:</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##                            player.velocity.x -= relative_velocity.x</span></p></li>
<li class="li1"><p class="de1"><span class="co1">##                            #player.velocity.x /= 0.7</span></p></li>
<li class="li2"><p class="de2"><span class="co1">##                            #player.velocity.x += 80</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">==</span> <span class="nu0">1.0</span>:</p></li>
<li class="li2"><p class="de2">                        player.<span class="me1">position</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span>/<span class="nu0">10</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">==</span> <span class="nu0">2.0</span>:</p></li>
<li class="li2"><p class="de2">                        player.<span class="me1">position</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span>/<span class="nu0">15</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">==</span> <span class="nu0">3.0</span>:</p></li>
<li class="li2"><p class="de2">                        player.<span class="me1">position</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span>/<span class="nu0">20</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">==</span> <span class="nu0">4.0</span>:</p></li>
<li class="li2"><p class="de2">                        player.<span class="me1">position</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span>/<span class="nu0">20</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">                        <span class="kw1">print</span> <span class="st0">"no number specified for this specific scale_factor in the PlatformObj.collision_response()"</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> AnimationLoopObj<span class="br0">(</span>DrawableObj<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="st0">"""A class for animations that loop"""</span></p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="sy0">,</span> image_sequence<span class="sy0">,</span> tpf<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>AnimationLoopObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">is_static</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>position<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">scale</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">rect</span> <span class="sy0">=</span> pygame.<span class="me1">Rect</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">position</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span>scale.<span class="me1">x</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>scale.<span class="me1">y</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image_sequence</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        images_folder <span class="sy0">=</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">(</span><span class="st0">'data/images'</span><span class="sy0">,</span> image_sequence<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span>count_files<span class="br0">(</span>images_folder<span class="br0">)</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            path_1 <span class="sy0">=</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">(</span>image_sequence<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span> image_sequence<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            path_2 <span class="sy0">=</span> path_1 + <span class="kw2">str</span><span class="br0">(</span>i+<span class="nu0">1</span><span class="br0">)</span> + <span class="st0">".png"</span></p></li>
<li class="li1"><p class="de1">            image <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span>path_2<span class="br0">)</span><span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">image_sequence</span>.<span class="me1">append</span><span class="br0">(</span>image<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">image_sequence</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#variables for animation</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">pause</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">frame</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">delay</span> <span class="sy0">=</span> tpf <span class="co1"># ticks per frame</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>AnimationLoopObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">pause</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">pause</span> <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="me1">delay</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">pause</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">frame</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">frame</span> <span class="sy0">&gt;=</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image_sequence</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">frame</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">image_sequence</span><span class="br0">[</span><span class="kw2">self</span>.<span class="me1">frame</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> AnimationOnCollisionObj<span class="br0">(</span>SolidObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="st0">"""A class for animations that animate on collision"""</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="sy0">,</span> image_sequence<span class="sy0">,</span> tpf<span class="sy0">,</span> condition<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>AnimationOnCollisionObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">position</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="nu0">1</span> <span class="co1"># glitch fix these objects are 1 pixel off</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">position</span>.<span class="me1">y</span> +<span class="sy0">=</span> <span class="nu0">1</span> <span class="co1"># glitch fix these objects are 1 pixel off</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span>scale.<span class="me1">x</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>scale.<span class="me1">y</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image_sequence</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        images_folder <span class="sy0">=</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">(</span><span class="st0">'data/images'</span><span class="sy0">,</span> image_sequence<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span>count_files<span class="br0">(</span>images_folder<span class="br0">)</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            path_1 <span class="sy0">=</span> <span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">join</span><span class="br0">(</span>image_sequence<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="sy0">,</span> image_sequence<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            path_2 <span class="sy0">=</span> path_1 + <span class="kw2">str</span><span class="br0">(</span>i+<span class="nu0">1</span><span class="br0">)</span> + <span class="st0">".png"</span></p></li>
<li class="li1"><p class="de1">            image <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span>path_2<span class="br0">)</span><span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">image_sequence</span>.<span class="me1">append</span><span class="br0">(</span>image<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">image_sequence</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#variables for animation</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">pause</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">frame</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">delay</span> <span class="sy0">=</span> tpf <span class="co1"># ticks per frame</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">timer</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">condition</span> <span class="sy0">=</span> condition</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">animation_done</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">animation_loop</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> collision_response<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> player<span class="sy0">,</span> xvel<span class="sy0">,</span> yvel<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">exec</span> <span class="kw2">self</span>.<span class="me1">condition</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>AnimationOnCollisionObj<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">timer</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">pause</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">pause</span> <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="me1">delay</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">pause</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">frame</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">frame</span> <span class="sy0">&gt;=</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image_sequence</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                    <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">animation_loop</span>:</p></li>
<li class="li2"><p class="de2">                        <span class="kw2">self</span>.<span class="me1">frame</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">                        <span class="kw2">self</span>.<span class="me1">timer</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">                        <span class="kw2">self</span>.<span class="me1">frame</span> <span class="sy0">=</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image_sequence</span><span class="br0">)</span> - <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">                        <span class="kw2">self</span>.<span class="me1">animation_done</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li1"><p class="de1">            </p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">image_sequence</span><span class="br0">[</span><span class="kw2">self</span>.<span class="me1">frame</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> NPC<span class="br0">(</span>SolidObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="st0">"""A class for NPC's"""</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="sy0">,</span> image<span class="sy0">,</span> dialog_file<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>NPC<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> image</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">dialog_file</span> <span class="sy0">=</span> dialog_file</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">dialog_tree</span> <span class="sy0">=</span> Dialog_tree<span class="br0">(</span>level<span class="sy0">,</span> <span class="kw2">self</span><span class="sy0">,</span> dialog_file<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">likes_player</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> collision_response<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> player<span class="sy0">,</span> xvel<span class="sy0">,</span> yvel<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="co1">#dialog test</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw1">not</span> <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">find_obj_in_list</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">list_draw</span><span class="sy0">,</span> <span class="st0">"dialog"</span><span class="sy0">,</span> <span class="st0">"tag"</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_clicked</span><span class="br0">(</span>K_DOWN<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">dialog_tree</span>.<span class="me1">load_node</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">list_draw</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">dialog_tree</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">list_update</span>.<span class="me1">append</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">dialog_tree</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> AABoundingBox<span class="br0">(</span>PhysicsObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="st0">"""Represents an axis aligned bounding box."""</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="sy0">,</span> velocity <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> acceleration <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>AABoundingBox<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="sy0">,</span> velocity<span class="sy0">,</span> acceleration<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">collision_y</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> collision_detection<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> objects<span class="sy0">,</span> xvel <span class="sy0">=</span> <span class="kw2">None</span><span class="sy0">,</span> yvel <span class="sy0">=</span> <span class="kw2">None</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> xvel <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li2"><p class="de2">            xvel <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> yvel <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li2"><p class="de2">            yvel <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> obj <span class="kw1">in</span> objects:  </p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">colliderect</span><span class="br0">(</span>obj.<span class="me1">rect</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                function <span class="sy0">=</span> <span class="kw2">getattr</span><span class="br0">(</span>obj<span class="sy0">,</span> <span class="st0">"collision_response"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                function<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> xvel<span class="sy0">,</span> yvel<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="co1">#print int(self.velocity.x)</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#print self.position.x</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">collision_y</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">        <span class="kw3">time</span> <span class="sy0">=</span> <span class="br0">(</span>milliseconds / <span class="nu0">1000.0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">acceleration</span>.<span class="me1">y</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">position</span>.<span class="me1">y</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> * <span class="kw3">time</span> * <span class="kw2">self</span>.<span class="me1">scale_factor</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#self.position.y = int(self.position.y) # so he doesn't sometimes bounce 1 pixel on y or x axis</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">top</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">position</span>.<span class="me1">y</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">collision_detection</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">list_collision</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">acceleration</span>.<span class="me1">x</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">position</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> * <span class="kw3">time</span> * <span class="kw2">self</span>.<span class="me1">scale_factor</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#self.position.x = int(self.position.x) # so he doesn't sometimes bounce 1 pixel on y or x axis</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">rect</span>.<span class="me1">left</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">position</span>.<span class="me1">x</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">collision_detection</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">list_collision</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1"># PLAYER class</span></p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Player<span class="br0">(</span>AABoundingBox<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> velocity <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="sy0">,</span> acceleration <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>level.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        scale <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span><span class="nu0">9</span>*<span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span><span class="nu0">18</span>*<span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span><span class="br0">)</span><span class="co1">#Vector(80,180)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Player<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="sy0">,</span> velocity<span class="sy0">,</span> acceleration<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#AABoundingBox.__init__(self, level, position, scale, velocity, acceleration)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image_offset</span> <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span><span class="nu0">2</span>*<span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span><span class="nu0">3</span>*<span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span><span class="br0">)</span><span class="co1">#Vector(20,30)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image_scale</span> <span class="sy0">=</span> Vector<span class="br0">(</span><span class="kw2">int</span><span class="br0">(</span><span class="nu0">13</span>*<span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span><span class="nu0">24</span>*<span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span><span class="br0">)</span><span class="co1">#Vector(120,240)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">"characters/player/player.png"</span><span class="br0">)</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#self.scale_factor *= 2</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">acceleration</span> <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">3.75</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">terminal_velocity</span> <span class="sy0">=</span> <span class="nu0">175</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">terminal_velocity_wall</span> <span class="sy0">=</span> <span class="nu0">25</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sliding_down_wall_speed</span> <span class="sy0">=</span> <span class="nu0">75</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">jump_power</span> <span class="sy0">=</span> <span class="nu0">125</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">jump_power_side</span> <span class="sy0">=</span> <span class="nu0">125</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">horizontal_terminal_velocity</span> <span class="sy0">=</span> <span class="nu0">200</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">horizontal_acceleration</span> <span class="sy0">=</span> <span class="nu0">30</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">jumped</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">move_wait_time</span> <span class="sy0">=</span> <span class="nu0">10</span> <span class="co1"># used to configure</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">move_wait_variable_left</span> <span class="sy0">=</span> <span class="nu0">0</span> <span class="co1"># actually used by the class</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">move_wait_variable_right</span> <span class="sy0">=</span> <span class="nu0">0</span> <span class="co1"># actually used by the class</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_init</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">animation_init</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> sound_init<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_channel_walking</span> <span class="sy0">=</span> pygame.<span class="me1">mixer</span>.<span class="me1">Channel</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_walking</span> <span class="sy0">=</span> load_sound<span class="br0">(</span><span class="st0">"walking_test_1.ogg"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_channel_jump</span> <span class="sy0">=</span> pygame.<span class="me1">mixer</span>.<span class="me1">Channel</span><span class="br0">(</span><span class="nu0">1</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_jump_list</span> <span class="sy0">=</span> <span class="br0">[</span>load_sound<span class="br0">(</span><span class="st0">"jump/jump_sound_0.ogg"</span><span class="br0">)</span><span class="sy0">,</span> load_sound<span class="br0">(</span><span class="st0">"jump/jump_sound_1.ogg"</span><span class="br0">)</span><span class="sy0">,</span> load_sound<span class="br0">(</span><span class="st0">"jump/jump_sound_2.ogg"</span><span class="br0">)</span><span class="sy0">,</span> load_sound<span class="br0">(</span><span class="st0">"jump/jump_sound_3.ogg"</span><span class="br0">)</span><span class="sy0">,</span> load_sound<span class="br0">(</span><span class="st0">"jump/jump_sound_4.ogg"</span><span class="br0">)</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_jump_variable</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_channel_landing</span> <span class="sy0">=</span> pygame.<span class="me1">mixer</span>.<span class="me1">Channel</span><span class="br0">(</span><span class="nu0">2</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_landing</span> <span class="sy0">=</span> load_sound<span class="br0">(</span><span class="st0">"landing/landing_1.ogg"</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_landing</span>.<span class="me1">set_volume</span><span class="br0">(</span><span class="nu0">0.6</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_landing_list</span> <span class="sy0">=</span> <span class="br0">[</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_channel_glide</span> <span class="sy0">=</span> pygame.<span class="me1">mixer</span>.<span class="me1">Channel</span><span class="br0">(</span><span class="nu0">3</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_glide</span> <span class="sy0">=</span> load_sound<span class="br0">(</span><span class="st0">"glide.ogg"</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> animation_init<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="co1">#pygame.transform.scale(load_png("characters/player.png"),self.image_scale)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">standing_frame1</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/standing_frame1.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">falling_frame1</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/falling_frame1.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">jumping_frame1</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/jumping_frame1.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">jumping_frame2</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/jumping_frame2.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">hanging_frame1</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/hanging_frame1.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        running_frame1 <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/running_frame1.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        running_frame2 <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/running_frame2.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        running_frame3 <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/running_frame3.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        running_frame4 <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/running_frame4.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        running_frame5 <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/running_frame5.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        running_frame6 <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/running_frame6.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        running_frame7 <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/running_frame7.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        running_frame8 <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">scale</span><span class="br0">(</span>load_png<span class="br0">(</span><span class="st0">'characters/player/running_frame8.png'</span><span class="br0">)</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">image_scale</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>._images <span class="sy0">=</span> <span class="br0">[</span>running_frame1<span class="sy0">,</span> running_frame2<span class="sy0">,</span> running_frame3<span class="sy0">,</span> running_frame4<span class="sy0">,</span> running_frame5<span class="sy0">,</span> running_frame6<span class="sy0">,</span> running_frame7<span class="sy0">,</span> running_frame8<span class="br0">]</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        fps <span class="sy0">=</span> <span class="nu0">20</span> <span class="co1"># 15</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="co1"># Track the time we started, and the time between updates.</span></p></li>
<li class="li2"><p class="de2">        <span class="co1"># Then we can figure out when we have to switch the image.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>._start <span class="sy0">=</span> pygame.<span class="kw3">time</span>.<span class="me1">get_ticks</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>._delay <span class="sy0">=</span> <span class="nu0">1000</span> / fps</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>._last_update <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>._frame <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">=</span> <span class="nu0">0</span> <span class="co1">#0 = standing still, 1 = jumping, 2 = falling, 3 = running, 4 = hanging </span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">=</span> <span class="nu0">0</span> <span class="co1">#0 = right, 1 = left</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">variable</span> <span class="sy0">=</span> <span class="nu0">0</span> <span class="co1">#needed for collision check in animation()</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1">#for jump animation</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">jump_variable</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">jump_counter</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="co1"># Call update to set our first image.</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">update_animation</span><span class="br0">(</span>pygame.<span class="kw3">time</span>.<span class="me1">get_ticks</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">handle_event</span><span class="br0">(</span>main_game.<span class="me1">keyboard</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> *<span class="sy0">=</span> <span class="nu0">0.7</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">move_wait_variable_left</span> -<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">move_wait_variable_right</span> -<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">collision_y</span> <span class="sy0">==</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="me1">terminal_velocity</span>:</p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">terminal_velocity</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_down</span><span class="br0">(</span>K_DOWN<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">sliding_down_wall_speed</span></p></li>
<li class="li1"><p class="de1">                <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">&gt;</span> <span class="kw2">self</span>.<span class="me1">terminal_velocity_wall</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="co1">#self.sound_channel_glide.play(self.sound_glide)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">terminal_velocity_wall</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#else:</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#    self.sound_channel_glide.stop()</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Player<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">update_animation</span><span class="br0">(</span>pygame.<span class="kw3">time</span>.<span class="me1">get_ticks</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">update_sound</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> update_sound<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">sound_jump_variable</span> <span class="sy0">&gt;</span> <span class="nu0">4</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">sound_jump_variable</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">sound_landing_list</span>.<span class="me1">pop</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">sound_landing_list</span>.<span class="me1">insert</span><span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="kw2">self</span>.<span class="me1">state_animation</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">sound_landing_list</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">==</span> <span class="nu0">0</span> <span class="kw1">or</span> <span class="kw2">self</span>.<span class="me1">sound_landing_list</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">==</span> <span class="nu0">3</span> <span class="kw1">or</span> <span class="kw2">self</span>.<span class="me1">sound_landing_list</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> <span class="sy0">==</span> <span class="nu0">4</span><span class="br0">)</span> <span class="kw1">and</span> <span class="kw2">self</span>.<span class="me1">sound_landing_list</span><span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> <span class="sy0">==</span> <span class="nu0">2</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">sound_channel_landing</span>.<span class="me1">play</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">sound_landing</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">    </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> update_animation<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span>t<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">collision_y</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">variable</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_down</span><span class="br0">(</span>K_LEFT<span class="br0">)</span> <span class="kw1">or</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_down</span><span class="br0">(</span>K_RIGHT<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">=</span> <span class="nu0">3</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw1">not</span> <span class="br0">(</span>main_game.<span class="me1">keyboard</span>.<span class="me1">is_down</span><span class="br0">(</span>K_LEFT<span class="br0">)</span> <span class="kw1">or</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_down</span><span class="br0">(</span>K_RIGHT<span class="br0">)</span><span class="br0">)</span> <span class="kw1">or</span> <span class="br0">(</span>main_game.<span class="me1">keyboard</span>.<span class="me1">is_down</span><span class="br0">(</span>K_LEFT<span class="br0">)</span> <span class="kw1">and</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_down</span><span class="br0">(</span>K_RIGHT<span class="br0">)</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">collision_y</span> <span class="sy0">!=</span> <span class="nu0">1</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">variable</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">variable</span> <span class="sy0">&gt;</span> <span class="nu0">3</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="co1">#jumping</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">&gt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">                    <span class="co1">#falling</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">=</span> <span class="nu0">2</span></p></li>
<li class="li1"><p class="de1">                </p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">1</span> <span class="kw1">or</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">2</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">=</span> <span class="nu0">4</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">2</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">==</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">==</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">==</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">            <span class="co1">#standing still</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">standing_frame1</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">flip</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">False</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">            <span class="co1">#jumping</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">jump_variable</span> <span class="sy0">==</span> <span class="kw2">False</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">jump_variable</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">jump_counter</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">jumping_frame1</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="nu0">10</span> <span class="sy0">&lt;</span> <span class="kw2">self</span>.<span class="me1">jump_counter</span> <span class="sy0">&lt;</span> <span class="nu0">20</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">jumping_frame2</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">jump_counter</span> <span class="sy0">&gt;=</span> <span class="nu0">20</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">falling_frame1</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">jump_counter</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">            </p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">flip</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">False</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">jump_variable</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">==</span> <span class="nu0">2</span>:</p></li>
<li class="li2"><p class="de2">            <span class="co1">#falling</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">falling_frame1</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">flip</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">False</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">==</span> <span class="nu0">4</span>:</p></li>
<li class="li1"><p class="de1">            <span class="co1">#falling</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">hanging_frame1</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">flip</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">False</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">state_animation</span> <span class="sy0">==</span> <span class="nu0">3</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw1">not</span> <span class="kw2">self</span>.<span class="me1">sound_channel_walking</span>.<span class="me1">get_busy</span><span class="br0">(</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">sound_channel_walking</span>.<span class="me1">play</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">sound_walking</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> t - <span class="kw2">self</span>._last_update <span class="sy0">&gt;</span> <span class="kw2">self</span>._delay:</p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>._frame +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">self</span>._frame <span class="sy0">&gt;=</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>._images<span class="br0">)</span>: <span class="kw2">self</span>._frame <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>._images<span class="br0">[</span><span class="kw2">self</span>._frame<span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>._last_update <span class="sy0">=</span> t</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">transform</span>.<span class="me1">flip</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">False</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">sound_channel_walking</span>.<span class="me1">get_busy</span><span class="br0">(</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">sound_channel_walking</span>.<span class="me1">stop</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">    </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> draw<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="sy0">,</span> surface<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="co1">#Draw the object</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">is_static</span>:</p></li>
<li class="li2"><p class="de2">            surface.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">position</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">            relative_position <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">position</span> - <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">camera</span>.<span class="me1">position</span> - <span class="kw2">self</span>.<span class="me1">image_offset</span></p></li>
<li class="li1"><p class="de1">            surface.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> relative_position<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> handle_event<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> keyboard<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> keyboard.<span class="me1">is_down</span><span class="br0">(</span>K_LEFT<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">move_wait_variable_left</span> <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">&gt;</span> -<span class="kw2">self</span>.<span class="me1">horizontal_terminal_velocity</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> -<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">horizontal_acceleration</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> keyboard.<span class="me1">is_down</span><span class="br0">(</span>K_RIGHT<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">leftorright</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">move_wait_variable_right</span> <span class="sy0">&lt;</span> <span class="nu0">0</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">&lt;</span> <span class="kw2">self</span>.<span class="me1">horizontal_terminal_velocity</span>:</p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> +<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">horizontal_acceleration</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> keyboard.<span class="me1">is_down</span><span class="br0">(</span>K_UP<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> -<span class="nu0">62.5</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> keyboard.<span class="me1">is_down</span><span class="br0">(</span>K_SPACE<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">jumped</span> <span class="sy0">==</span> <span class="kw2">False</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">collision_y</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> -<span class="kw2">self</span>.<span class="me1">jump_power</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">jumped</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">sound_channel_jump</span>.<span class="me1">play</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">sound_jump_list</span><span class="br0">[</span><span class="kw2">self</span>.<span class="me1">sound_jump_variable</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">sound_jump_variable</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">                <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">1</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> -<span class="kw2">self</span>.<span class="me1">jump_power</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">jump_power_side</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">jumped</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">move_wait_variable_left</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">move_wait_time</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">sound_channel_jump</span>.<span class="me1">play</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">sound_jump_list</span><span class="br0">[</span><span class="kw2">self</span>.<span class="me1">sound_jump_variable</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">sound_jump_variable</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">                <span class="kw1">elif</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">2</span>:</p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> -<span class="kw2">self</span>.<span class="me1">jump_power</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">x</span> <span class="sy0">=</span> -<span class="kw2">self</span>.<span class="me1">jump_power_side</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">jumped</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">move_wait_variable_right</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">move_wait_time</span></p></li>
<li class="li1"><p class="de1">                    <span class="kw2">self</span>.<span class="me1">sound_channel_jump</span>.<span class="me1">play</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">sound_jump_list</span><span class="br0">[</span><span class="kw2">self</span>.<span class="me1">sound_jump_variable</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">sound_jump_variable</span> +<span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li1"><p class="de1">            </p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> keyboard.<span class="me1">is_up</span><span class="br0">(</span>K_SPACE<span class="br0">)</span> <span class="kw1">and</span> <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">collision_y</span> <span class="sy0">==</span> <span class="nu0">1</span> <span class="kw1">or</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">1</span> <span class="kw1">or</span> <span class="kw2">self</span>.<span class="me1">collision_x</span> <span class="sy0">==</span> <span class="nu0">2</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">jumped</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> keyboard.<span class="me1">is_down</span><span class="br0">(</span>K_LSHIFT<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">velocity</span>.<span class="me1">y</span> <span class="sy0">=</span> <span class="nu0">1</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> keyboard.<span class="me1">is_down</span><span class="br0">(</span>K_LEFT<span class="br0">)</span> <span class="kw1">and</span> keyboard.<span class="me1">is_down</span><span class="br0">(</span>K_RIGHT<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">pass</span></p></li>
<li class="li2"><p class="de2">    </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> collision_response<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> obj<span class="sy0">,</span> xvel<span class="sy0">,</span> yvel<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        obj.<span class="me1">collision_response</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Debug<span class="br0">(</span>DrawableObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="st0">"""simple debug class that shows variables realtime on screen"""</span></p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Debug<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        pixel_art_font <span class="sy0">=</span> <span class="st0">"/Library/Fonts/pixel-art_1.ttf"</span> <span class="co1"># other option: "/Library/Fonts/pixel-art_2.ttf"</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">font</span> <span class="sy0">=</span> pygame.<span class="me1">font</span>.<span class="me1">Font</span><span class="br0">(</span>pixel_art_font<span class="sy0">,</span> <span class="nu0">15</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">text</span> <span class="sy0">=</span> <span class="st0">"variable = "</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">font</span>.<span class="me1">render</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">text</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span><span class="nu0">255</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">text</span> <span class="sy0">=</span> <span class="st0">"variable = "</span> + <span class="kw2">str</span><span class="br0">(</span>main_game.<span class="me1">clock</span>.<span class="me1">get_fps</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="co1"># put main_game.clock.get_fps() in the str() if you want the fps</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">font</span>.<span class="me1">render</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">text</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span><span class="nu0">255</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> TextBox<span class="br0">(</span>DrawableObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> width<span class="sy0">,</span> text<span class="sy0">,</span> scroll <span class="sy0">=</span> <span class="kw2">False</span><span class="sy0">,</span> font_size <span class="sy0">=</span> <span class="nu0">5</span> <span class="sy0">,</span> font_path <span class="sy0">=</span> <span class="st0">"/Library/Fonts/pixel-art_1.ttf"</span><span class="br0">)</span>:  <span class="co1"># other option: "/Library/Fonts/pixel-art_2.ttf"</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>TextBox<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">tag</span> <span class="sy0">=</span> <span class="st0">"TextBox"</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> position</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">font</span> <span class="sy0">=</span> pygame.<span class="me1">font</span>.<span class="me1">Font</span><span class="br0">(</span>font_path<span class="sy0">,</span> <span class="kw2">int</span><span class="br0">(</span>font_size * <span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">is_static</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">dialog</span> <span class="sy0">=</span> <span class="br0">[</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">width</span> <span class="sy0">=</span> <span class="kw2">int</span><span class="br0">(</span>width * <span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">timer</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">text_color</span> <span class="sy0">=</span> <span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">background_color</span> <span class="sy0">=</span> <span class="br0">(</span><span class="nu0">255</span><span class="sy0">,</span><span class="nu0">255</span><span class="sy0">,</span><span class="nu0">255</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">border_color</span> <span class="sy0">=</span> <span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="sy0">,</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">border_width</span> <span class="sy0">=</span> <span class="kw2">int</span><span class="br0">(</span><span class="nu0">1.25</span> * <span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">margin</span> <span class="sy0">=</span> <span class="kw2">int</span><span class="br0">(</span><span class="nu0">2</span> * <span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">space_between_lines</span> <span class="sy0">=</span> <span class="kw2">int</span><span class="br0">(</span><span class="nu0">0.75</span> * <span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">character_number</span> <span class="sy0">=</span> <span class="nu0">0</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scroll</span> <span class="sy0">=</span> scroll</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">done_with_scroll</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">set_text</span><span class="br0">(</span>text<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> set_text<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> text<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">scroll</span> <span class="sy0">==</span> <span class="kw2">True</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">final_text</span> <span class="sy0">=</span> text</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">text</span> <span class="sy0">=</span> <span class="st0">""</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">final_text</span> <span class="sy0">=</span> text</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">text</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">final_text</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">make_box</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">width</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">make_text</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">width</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> make_box<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> width <span class="sy0">=</span> <span class="kw2">None</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> width <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li2"><p class="de2">            width <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">width</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="co1"># calculate the height of the message box width the given width</span></p></li>
<li class="li1"><p class="de1">        xpos <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">margin</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        ypos <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">margin</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">for</span> word <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">final_text</span>.<span class="me1">split</span><span class="br0">(</span><span class="st0">" "</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">            ren <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">font</span>.<span class="me1">render</span><span class="br0">(</span>word + <span class="st0">" "</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">text_color</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            w <span class="sy0">=</span> ren.<span class="me1">get_width</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">if</span> xpos <span class="sy0">&gt;</span> width - w:</p></li>
<li class="li1"><p class="de1">                ypos +<span class="sy0">=</span> ren.<span class="me1">get_height</span><span class="br0">(</span><span class="br0">)</span> + <span class="kw2">self</span>.<span class="me1">space_between_lines</span></p></li>
<li class="li2"><p class="de2">                xpos <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">margin</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            xpos +<span class="sy0">=</span> w</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> ypos <span class="sy0">==</span> <span class="kw2">self</span>.<span class="me1">margin</span>:</p></li>
<li class="li2"><p class="de2">            width <span class="sy0">=</span> xpos</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        height <span class="sy0">=</span> ypos + ren.<span class="me1">get_height</span><span class="br0">(</span><span class="br0">)</span> + <span class="kw2">self</span>.<span class="me1">margin</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> pygame.<span class="me1">Surface</span><span class="br0">(</span><span class="br0">(</span>width<span class="sy0">,</span> height<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale</span> <span class="sy0">=</span> Vector<span class="br0">(</span>width<span class="sy0">,</span> height<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">image</span>.<span class="me1">fill</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">background_color</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">border_width</span> <span class="sy0">!=</span> <span class="nu0">0</span>:</p></li>
<li class="li1"><p class="de1">            pygame.<span class="me1">draw</span>.<span class="me1">rect</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">border_color</span><span class="sy0">,</span> <span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> width<span class="sy0">,</span> height<span class="br0">)</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">border_width</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> make_text<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> width <span class="sy0">=</span> <span class="kw2">None</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> width <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li1"><p class="de1">            width <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">width</span></p></li>
<li class="li2"><p class="de2">            </p></li>
<li class="li1"><p class="de1">        <span class="co1"># actually draw the text on the created surface (above)</span></p></li>
<li class="li2"><p class="de2">        xpos <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">margin</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        ypos <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">margin</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> word <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">text</span>.<span class="me1">split</span><span class="br0">(</span><span class="st0">" "</span><span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">            ren <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">font</span>.<span class="me1">render</span><span class="br0">(</span>word + <span class="st0">" "</span><span class="sy0">,</span> <span class="kw2">True</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">text_color</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            w <span class="sy0">=</span> ren.<span class="me1">get_width</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> xpos <span class="sy0">&gt;</span> width - w:</p></li>
<li class="li2"><p class="de2">                ypos +<span class="sy0">=</span> ren.<span class="me1">get_height</span><span class="br0">(</span><span class="br0">)</span> + <span class="kw2">self</span>.<span class="me1">space_between_lines</span></p></li>
<li class="li1"><p class="de1">                xpos <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">margin</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">image</span>.<span class="me1">blit</span><span class="br0">(</span>ren<span class="sy0">,</span> <span class="br0">(</span>xpos<span class="sy0">,</span> ypos<span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            xpos +<span class="sy0">=</span> w</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">scroll</span> <span class="sy0">==</span> <span class="kw2">True</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">character_number</span> <span class="sy0">&lt;</span> <span class="kw2">len</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">final_text</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">character_number</span> +<span class="sy0">=</span> <span class="nu0">0.5</span></p></li>
<li class="li1"><p class="de1">                <span class="kw1">if</span> main_game.<span class="me1">keyboard</span>.<span class="me1">is_down</span><span class="br0">(</span>K_SPACE<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">                    <span class="kw2">self</span>.<span class="me1">character_number</span> +<span class="sy0">=</span> <span class="nu0">1.0</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">text</span> <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">final_text</span><span class="br0">[</span>:<span class="kw2">int</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">character_number</span><span class="br0">)</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">                <span class="kw2">self</span>.<span class="me1">make_box</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">make_text</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw1">else</span>:</p></li>
<li class="li1"><p class="de1">                <span class="kw2">self</span>.<span class="me1">done_with_scroll</span> <span class="sy0">=</span> <span class="kw2">True</span></p></li>
<li class="li2"><p class="de2">            </p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Button_dialog<span class="br0">(</span>Button<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="sy0">,</span> dialog_tree<span class="sy0">,</span> node_to_go<span class="sy0">,</span> <span class="kw3">commands</span><span class="sy0">,</span> npc_owner<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Button_dialog<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="sy0">,</span> scale<span class="sy0">,</span> position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">node_to_go</span> <span class="sy0">=</span> node_to_go</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">dialog_tree</span> <span class="sy0">=</span> dialog_tree</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="kw3">commands</span> <span class="sy0">=</span> <span class="kw3">commands</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">npc_owner</span> <span class="sy0">=</span> npc_owner</p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> clicked_action<span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw1">not</span> <span class="kw2">self</span>.<span class="kw3">commands</span> <span class="sy0">==</span> <span class="kw2">None</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw1">exec</span> <span class="kw2">self</span>.<span class="kw3">commands</span></p></li>
<li class="li2"><p class="de2">            </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">dialog_tree</span>.<span class="me1">load_node</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">node_to_go</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Node_dialog<span class="br0">(</span>Menu<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> dialog_tree<span class="sy0">,</span> data_list<span class="sy0">,</span> position<span class="sy0">,</span> npc_owner<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Node_dialog<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">scale_factor</span> <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">scale_factor</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">npc_owner</span> <span class="sy0">=</span> npc_owner</p></li>
<li class="li2"><p class="de2">        data_list <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>data_list<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        position <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>position<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">move_up_button</span> <span class="sy0">=</span> K_UP</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">move_down_button</span> <span class="sy0">=</span> K_DOWN</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">select_button</span> <span class="sy0">=</span> K_RETURN</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="co1">#print data_list</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">parse_data_list</span><span class="br0">(</span>data_list<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        distance_between_choices <span class="sy0">=</span> <span class="nu0">10</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">message_TextBox</span> <span class="sy0">=</span> TextBox<span class="br0">(</span>level<span class="sy0">,</span> position<span class="sy0">,</span> <span class="nu0">50</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">message_text</span><span class="sy0">,</span> <span class="kw2">True</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        choice_position <span class="sy0">=</span> position + Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">scale</span>.<span class="me1">y</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> choice <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">choice_list</span>:</p></li>
<li class="li1"><p class="de1">            choice_position +<span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> distance_between_choices<span class="br0">)</span> <span class="co1"># + Vector(0,self.choice_list.index(choice))</span></p></li>
<li class="li2"><p class="de2">            choice_TextBox <span class="sy0">=</span> TextBox<span class="br0">(</span>level<span class="sy0">,</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>choice_position<span class="br0">)</span><span class="sy0">,</span> <span class="nu0">50</span><span class="sy0">,</span> choice<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            choice_position +<span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> choice_TextBox.<span class="me1">scale</span>.<span class="me1">y</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">            scale <span class="sy0">=</span> choice_TextBox.<span class="me1">scale</span></p></li>
<li class="li2"><p class="de2">            <span class="kw3">commands</span> <span class="sy0">=</span> choice<span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">            image_deselect <span class="sy0">=</span> choice_TextBox.<span class="me1">image</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">            <span class="co1"># make image select by changing background color</span></p></li>
<li class="li2"><p class="de2">            choice_TextBox.<span class="me1">background_color</span> <span class="sy0">=</span> <span class="br0">(</span><span class="nu0">200</span><span class="sy0">,</span><span class="nu0">200</span><span class="sy0">,</span><span class="nu0">200</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            choice_TextBox.<span class="me1">make_box</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            choice_TextBox.<span class="me1">make_text</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">            image_select <span class="sy0">=</span> choice_TextBox.<span class="me1">image</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">            node_to_go <span class="sy0">=</span> choice<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">            button_position <span class="sy0">=</span> <span class="kw3">copy</span>.<span class="kw3">copy</span><span class="br0">(</span>choice_TextBox.<span class="me1">position</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            </p></li>
<li class="li1"><p class="de1">            choice_button <span class="sy0">=</span> Button_dialog<span class="br0">(</span>level<span class="sy0">,</span> scale<span class="sy0">,</span> button_position<span class="sy0">,</span> image_deselect<span class="sy0">,</span> image_select<span class="sy0">,</span> dialog_tree<span class="sy0">,</span> node_to_go<span class="sy0">,</span> <span class="kw3">commands</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">npc_owner</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            choice_button.<span class="me1">is_static</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">buttons</span>.<span class="me1">append</span><span class="br0">(</span>choice_button<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">height</span> <span class="sy0">=</span> -<span class="br0">(</span>position.<span class="me1">y</span> - <span class="br0">(</span>button_position.<span class="me1">y</span> + choice_TextBox.<span class="me1">scale</span>.<span class="me1">y</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        message_offset <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        message_offset.<span class="me1">x</span> <span class="sy0">=</span> -<span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">scale</span>.<span class="me1">x</span>/<span class="nu0">2</span> + <span class="kw2">self</span>.<span class="me1">npc_owner</span>.<span class="me1">scale</span>.<span class="me1">x</span>/<span class="nu0">2</span></p></li>
<li class="li2"><p class="de2">        message_offset.<span class="me1">y</span> <span class="sy0">=</span> -<span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">scale</span>.<span class="me1">y</span> - <span class="br0">(</span><span class="nu0">3.75</span> * <span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span> + <span class="nu0">0.2</span> <span class="co1"># + 0.5 is against wobbling</span></p></li>
<li class="li1"><p class="de1">        choices_offset <span class="sy0">=</span> Vector<span class="br0">(</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        choices_offset.<span class="me1">x</span> <span class="sy0">=</span> -<span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">scale</span>.<span class="me1">x</span>/<span class="nu0">2</span> + <span class="kw2">self</span>.<span class="me1">npc_owner</span>.<span class="me1">scale</span>.<span class="me1">x</span>/<span class="nu0">2</span> + <span class="br0">(</span><span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">scale</span>.<span class="me1">x</span> - <span class="br0">(</span><span class="nu0">9.5</span> * <span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        choices_offset.<span class="me1">y</span> <span class="sy0">=</span> -<span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">scale</span>.<span class="me1">y</span> - <span class="br0">(</span><span class="nu0">3.75</span> * <span class="kw2">self</span>.<span class="me1">scale_factor</span><span class="br0">)</span> + <span class="nu0">0.2</span> <span class="co1"># + 0.5 is against wobbling</span></p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">position</span> +<span class="sy0">=</span> message_offset</p></li>
<li class="li2"><p class="de2">        <span class="kw1">for</span> buttons <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">buttons</span>:</p></li>
<li class="li1"><p class="de1">            buttons.<span class="me1">position</span> +<span class="sy0">=</span> choices_offset</p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> parse_data_list<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> data_list<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">message_text</span> <span class="sy0">=</span> data_list<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">choice_list</span> <span class="sy0">=</span> data_list</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">choice_list</span>.<span class="me1">remove</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">message_text</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> draw<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="sy0">,</span> surface<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">draw</span><span class="br0">(</span>milliseconds<span class="sy0">,</span> surface<span class="br0">)</span></p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">done_with_scroll</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">super</span><span class="br0">(</span>Node_dialog<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">draw</span><span class="br0">(</span>milliseconds<span class="sy0">,</span> surface<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">message_TextBox</span>.<span class="me1">done_with_scroll</span>:</p></li>
<li class="li2"><p class="de2">            <span class="kw2">super</span><span class="br0">(</span>Node_dialog<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        </p></li>
<li class="li1"><p class="de1"><span class="kw1">class</span> Dialog_tree<span class="br0">(</span>DrawableObj<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> npc_owner<span class="sy0">,</span> dialog_file<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Dialog_tree<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">tag</span> <span class="sy0">=</span> <span class="st0">"dialog"</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">npc_owner</span> <span class="sy0">=</span> npc_owner</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> npc_owner.<span class="me1">position</span></p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">parse_dialog_file</span><span class="br0">(</span>dialog_file<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">load_node</span><span class="br0">(</span><span class="nu0">0</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> load_node<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> node<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw1">if</span> node <span class="sy0">==</span> <span class="st0">"end"</span>:</p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">list_update</span>.<span class="me1">remove</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">            <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">list_draw</span>.<span class="me1">remove</span><span class="br0">(</span><span class="kw2">self</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw1">else</span>:</p></li>
<li class="li2"><p class="de2">            data_list <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">dialog</span><span class="br0">[</span>node<span class="br0">]</span></p></li>
<li class="li1"><p class="de1">            <span class="kw2">self</span>.<span class="me1">node</span> <span class="sy0">=</span> Node_dialog<span class="br0">(</span><span class="kw2">self</span>.<span class="me1">level</span><span class="sy0">,</span> <span class="kw2">self</span><span class="sy0">,</span> data_list<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">position</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">npc_owner</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> parse_dialog_file<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> dialog_file<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="co1">#Using the PyYAML parser</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#It makes a dialog in this structure:</span></p></li>
<li class="li2"><p class="de2">        <span class="co1"># {'node_start':</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#               ["message_start", ['choice_1', node_to_be_sent_to_if_choice_1_is_chosen], ['choice_2', node_to_be_sent_to_if_choice_2_is_chosen]],</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#  'node_01':</span></p></li>
<li class="li1"><p class="de1">        <span class="co1">#               ["message", ['choice_1', node_to_be_sent_to_if_choice_1_is_chosen]]</span></p></li>
<li class="li2"><p class="de2">        <span class="co1"># }</span></p></li>
<li class="li1"><p class="de1">        filename <span class="sy0">=</span> <span class="st0">"data/dialog/"</span> + dialog_file <span class="co1">#filename</span></p></li>
<li class="li2"><p class="de2">        stream <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">(</span>filename<span class="sy0">,</span> <span class="st0">'r'</span><span class="br0">)</span>            <span class="co1">#opening stream</span></p></li>
<li class="li1"><p class="de1">        yaml_file <span class="sy0">=</span> yaml.<span class="me1">load</span><span class="br0">(</span>stream<span class="br0">)</span>           <span class="co1">#loading stream</span></p></li>
<li class="li2"><p class="de2">        <span class="co1">#print yaml_file</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">dialog</span> <span class="sy0">=</span> yaml_file</p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> update<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">node</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">        <span class="kw2">super</span><span class="br0">(</span>Dialog_tree<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">update</span><span class="br0">(</span>milliseconds<span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> draw<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="sy0">,</span> surface<span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">node</span>.<span class="me1">draw</span><span class="br0">(</span>milliseconds<span class="sy0">,</span> surface<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Dialog_tree<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="me1">draw</span><span class="br0">(</span>milliseconds<span class="sy0">,</span> surface<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="kw1">class</span> Cloud<span class="br0">(</span>DrawableObj<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">    <span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> level<span class="sy0">,</span> position<span class="sy0">,</span> scale<span class="sy0">,</span> image<span class="sy0">,</span> layer <span class="sy0">=</span> <span class="nu0">0.7</span><span class="br0">)</span>:</p></li>
<li class="li2"><p class="de2">        <span class="kw2">super</span><span class="br0">(</span>Cloud<span class="sy0">,</span> <span class="kw2">self</span><span class="br0">)</span>.<span class="kw4">__init__</span><span class="br0">(</span>level<span class="br0">)</span></p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">position</span> <span class="sy0">=</span> position</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">scale</span> <span class="sy0">=</span> scale</p></li>
<li class="li1"><p class="de1">        <span class="kw2">self</span>.<span class="me1">layer</span> <span class="sy0">=</span> layer</p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">is_static</span> <span class="sy0">=</span> <span class="kw2">False</span></p></li>
<li class="li1"><p class="de1">        </p></li>
<li class="li2"><p class="de2">        <span class="kw2">self</span>.<span class="me1">image</span> <span class="sy0">=</span> image</p></li>
<li class="li1"><p class="de1">    </p></li>
<li class="li2"><p class="de2">    <span class="kw1">def</span> draw<span class="br0">(</span><span class="kw2">self</span><span class="sy0">,</span> milliseconds<span class="sy0">,</span> surface<span class="br0">)</span>:</p></li>
<li class="li1"><p class="de1">        <span class="co1">#Draw the object</span></p></li>
<li class="li2"><p class="de2">        relative_position <span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">position</span> - <span class="kw2">self</span>.<span class="me1">level</span>.<span class="me1">camera</span>.<span class="me1">position</span></p></li>
<li class="li1"><p class="de1">        relative_position *<span class="sy0">=</span> <span class="kw2">self</span>.<span class="me1">layer</span></p></li>
<li class="li2"><p class="de2">        surface.<span class="me1">blit</span><span class="br0">(</span><span class="kw2">self</span>.<span class="me1">image</span><span class="sy0">,</span> relative_position<span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="co1">#######################################################################################################################</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1">pygame.<span class="me1">init</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">pygame.<span class="me1">display</span>.<span class="me1">set_icon</span><span class="br0">(</span>pygame.<span class="me1">image</span>.<span class="me1">load</span><span class="br0">(</span><span class="st0">"data/images/icon_low.png"</span><span class="br0">)</span><span class="br0">)</span> </p></li>
<li class="li1"><p class="de1">windowWidth<span class="sy0">,</span> windowHeight <span class="sy0">=</span> <span class="nu0">854</span><span class="sy0">,</span> <span class="nu0">480</span> <span class="co1">#854, 480 #640, 360 #750, 500 #1280, 720</span></p></li>
<li class="li2"><p class="de2">window <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">(</span><span class="br0">(</span>windowWidth<span class="sy0">,</span>windowHeight<span class="br0">)</span><span class="br0">)</span> <span class="co1"># put ",pygame.FULLSCREEN" after "windowHeight)" for fulscreen</span></p></li>
<li class="li1"><p class="de1">pygame.<span class="me1">display</span>.<span class="me1">set_caption</span><span class="br0">(</span><span class="st0">'First Game'</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2">screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">get_surface</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1">pygame.<span class="me1">mouse</span>.<span class="me1">set_visible</span><span class="br0">(</span><span class="kw2">True</span><span class="br0">)</span></p></li>
<li class="li2"><p class="de2"> </p></li>
<li class="li1"><p class="de1"><span class="co1">#initialize Game()</span></p></li>
<li class="li2"><p class="de2">main_game <span class="sy0">=</span> Game<span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1">#main function</span></p></li>
<li class="li1"><p class="de1"><span class="kw1">def</span> main<span class="br0">(</span><span class="br0">)</span>:    </p></li>
<li class="li2"><p class="de2">    main_game.<span class="me1">go</span><span class="br0">(</span><span class="br0">)</span></p></li>
<li class="li1"><p class="de1"> </p></li>
<li class="li2"><p class="de2"><span class="co1">#import cProfile as profile</span></p></li>
<li class="li1"><p class="de1"><span class="co1">#profile.run('main()')</span></p></li>
<li class="li2"><p class="de2">main<span class="br0">(</span><span class="br0">)</span></p></li>
</ol></div></body></html>