<html><body><div><article class="markdown-body entry-content" itemprop="text"><a name="user-content-melody-scripter-and-melodyscript"/>
<h2><a id="user-content-melody-scripter-and-melodyscript" class="anchor" href="#melody-scripter-and-melodyscript" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Melody Scripter and MelodyScript</h2>
<p><strong>MelodyScript</strong> is a melody-oriented DSL for describing melodies, which
can be optionally annotated with chords.</p>
<p><strong>Melody Scripter</strong> parses a <strong>MelodyScript</strong> file into a Python <strong>Song</strong> object
model, which can be used to generate a Midi file.</p>
<p>Here is "Yankee Doodle" in MelodyScript:</p>
<pre>*song:      tempo_bpm=200, time_signature=4/4, ticks_per_beat=4

*track.melody: instrument=73, volume=120, octave=5
*track.chord:  instrument=40, volume= 50, octave=3
*track.bass:   instrument=19, volume=100, octave=2

[C] c c d e | [C] c e [G7] d g, | [C] c c d e | [C] c2 [G7] b |
[C] c c d e | [F] f e d c | [G7] b g a b | [C] c2 c1 [] r1 |
[F] a. bh a1 g | [F] a b c2 | [C] g. ah g1 f | [C] e2 g2 |
[F] a. bh a1 g | [F] a b c a | [G7] g c b d | [C] c2 c1 r1
</pre>
<p>In MelodyScript, a "melody" consists of a sequence
of notes on the standard Western musical scale, together with bar lines
(which must match the specified time signature) and chords, with optional
bass notes where different from the chord root note.</p>
<p>The Song object model can generate a Midi file for the melody, for example:
<a href="https://raw.githubusercontent.com/pdorrell/melody_scripter/master/data/songs/yankee_doodle.song.mid">yankee_doodle.song.mid</a>.
You can listen to an audio version of that midi file (rendered using <strong>fluidsynth</strong>) at <a href="http://whatismusic.info/melody_scripter/">http://whatismusic.info/melody_scripter/</a>.</p>
<p>Currently Midi output is the only functionality provided by the Song object model,
but the object model would also provide a convenient representation of melody information
for the purposes of scientific analysis.</p>
<a name="user-content-melodyscript-syntax"/>
<h2><a id="user-content-melodyscript-syntax" class="anchor" href="#melodyscript-syntax" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>MelodyScript Syntax</h2>
<p>MelodyScript is line-oriented. There are two types of lines:</p>
<ul>
<li><strong>Command</strong> lines. Any line starting with the character <code>*</code> (with possibly
preceding whitespace) is parsed as a command line.</li>
<li><strong>Song Item</strong> lines. All other lines are parsed as sequences of whitespace-separated Song Items.</li>
</ul>
<a name="user-content-command-lines"/>
<h3><a id="user-content-command-lines" class="anchor" href="#command-lines" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Command Lines</h3>
<p>A command line starts with a <strong>command</strong> (after the initial <code>*</code> character).</p>
<p>The command is followed by a <code>:</code> character, and then one or more
comma-separated arguments.</p>
<p>Currently there are five commands, which are <code>song</code>, three 'track' commands:
<code>track.melody</code>, <code>track.chord</code> and <code>track.bass</code>, and <code>groove</code>.</p>
<p>The <code>song</code> and <code>track</code> commands take arguments which are <strong>property settings</strong>, consisting
in each case of a key and a value, specified as <em>key</em> = <em>value</em>.</p>
<p>Currently all property settings can be executed only prior to any song items,
but in future they may be allowed during the song (or additional commands may
be defined which are valid within the song).</p>
<a name="user-content-song-property-settings"/>
<h3><a id="user-content-song-property-settings" class="anchor" href="#song-property-settings" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Song Property Settings</h3>
<p>Available property settings for the <code>song</code> command are:</p>
<table>






<thead valign="bottom">
<tr><th>key</th>
<th>value</th>
<th>default</th>
<th>valid values</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>tempo_bpm</td>
<td>Tempo in beats per minute</td>
<td>120</td>
<td>1 to 1000</td>
</tr>
<tr><td>time_signature</td>
<td>Example: 3/4</td>
<td>4/4</td>
<td>Any integer / (1,2,4,8,16 or 32)</td>
</tr>
<tr><td>ticks_per_beat</td>
<td>Ticks per beat</td>
<td>4</td>
<td>1 to 2000</td>
</tr>
<tr><td>subticks_per_tick</td>
<td>Ticks per beat</td>
<td>1</td>
<td>1 to 100</td>
</tr>
<tr><td>tranpose</td>
<td>Transposition (in semitones)</td>
<td>0</td>
<td>-127 to 127</td>
</tr>
</tbody>
</table>
<p>The <code>tempo_bpm</code> and <code>ticks_per_beat</code> values both determine corresponding values when
a Midi file is generated. "Ticks" are the unit of time in the song, and every note
or rest length must be a whole number of ticks – if not, an error occurs.</p>
<p>The <code>time_signature</code> is the standard time signature used to describe a bar, when a <strong>numerator</strong> that
specifies the number of <em>beats</em> per bar, and a <strong>denominator</strong> that specifies the length of one beat as a
function of a whole note. (To keep things simple, the <code>ticks_per_beat</code> value must be defined so that
one crotchet contains a whole number of ticks.)</p>
<p>If the contents of a bar do not have the correct total length, it's an error.
(It's OK to have partial bars at the start and end of the song.)</p>
<p>The <code>subticks_per_tick</code> value is only relevant to the <code>groove</code> command, and it determines
how many "subticks" there are in each tick. ("Groove" is defined in terms of sub-tick displacements.)</p>
<p>The <code>transpose</code> value raises or lowers all the note values when generating the Midi file. (An error will occur
if transposition causes a note to go out of the valid range of 0 to 127.)</p>
<a name="user-content-track-property-settings"/>
<h3><a id="user-content-track-property-settings" class="anchor" href="#track-property-settings" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Track Property Settings</h3>
<p>The three tracks, <strong>melody</strong>, <strong>chord</strong> and <strong>bass</strong>, correspond to three Midi tracks generated in the Midi output file.
Each track has its own settings:</p>
<table>






<thead valign="bottom">
<tr><th>key</th>
<th>value</th>
<th>default</th>
<th>valid values</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>instrument</td>
<td>Midi instrument number</td>
<td>0</td>
<td>0 to 127</td>
</tr>
<tr><td>volume</td>
<td>Midi volume (velocity)</td>
<td>0</td>
<td>0 to 127</td>
</tr>
<tr><td>octave</td>
<td>Octave for initial melody note, and
for all chord root notes and all
bass notes.</td>
<td>3, 1, 0</td>
<td>-1 to 10</td>
</tr>
</tbody>
</table>
<p>(The octave defaults are for <strong>melody</strong>, <strong>chord</strong> and <strong>bass</strong> respectively.)</p>
<p>The <code>instrument</code> and <code>volume</code> settings define the Midi settings for each track. Midi instrument numbers
range from 0 to 127, and the actual sounds depend on the SoundFont used to play the Midi song,
although there is a standard <strong>GM</strong> set of Midi instruments definitions (where the default of <strong>0</strong>
corresponds to Acoustic Grand Piano).</p>
<p>Currently MelodyScript does not have any provision for per-note volume (velocity) specification. In
practice there is no easy way to determine appropriate volume values, for example when typing in from
sheet music. For playback it is recommended to choose suitable instrument sounds that work well with
constant volume (for example see choices made in the sample song files in this project).</p>
<p>The <code>octave</code> setting determines which Midi octave the first melody note belongs to, and for
the <strong>chord</strong> and <strong>bass</strong> tracks, it determines the octave of all root notes and bass notes respectively.
(Melody note octave values are determined relatively, as will be described in the Song Items section next.)</p>
<p>Although octave values are allowed from -1 to 10, not all Midi notes in the 10th octave are allowed,
and an error will occur if a note occurs with a value greater than 127.</p>
<a name="user-content-groove"/>
<h3><a id="user-content-groove" class="anchor" href="#groove" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Groove</h3>
<p>A <code>groove</code> command is specified by one or more numerical "sub-tick" displacements.</p>
<p>The number of values given in a <code>groove</code> command must divide evenly into the number of ticks in the bar.</p>
<p>For example, a <code>groove</code> command might specify <code>0 2 1 2</code> where there are 4 beats per bar and 2 ticks
per beat. The 4 groove values are applied to the 8 tick values per bar by repeating them twice, ie
<strong>0 2 1 2 0 2 1 2</strong>. Each value determines how many sub-ticks are added to the time of each corresponding
tick in each bar.</p>
<p>The <code>subticks_per_tick</code> value in the <code>song</code> command specifies the length of a sub-tick. So if there
are 10 subticks per tick, then a groove value of 2 corresponds to a displacement of 2/10 of tick.</p>
<a name="user-content-song-items"/>
<h3><a id="user-content-song-items" class="anchor" href="#song-items" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Song Items</h3>
<p>There are six types of song item that can be parsed:</p>
<ul>
<li>Note</li>
<li>Tie</li>
<li>Rest</li>
<li>Chord</li>
<li>Bar Line</li>
<li>Cut</li>
</ul>
<p>All song items are represented by tokens that don't contain any whitespace, and song items in a line must
be separated from each other by whitespace.</p>
<a name="user-content-notes"/>
<h3><a id="user-content-notes" class="anchor" href="#notes" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Notes</h3>
<p>The components of a note are, in order:</p>
<dl>
<dt>Continued marker:</dt>
<dd>If provided, specified as <code>~</code>. This indicates that a note is a continuation
of the previous note.</dd>
<dt>Note letter:</dt>
<dd>A lower case letter from <code>a</code> to <code>g</code>. For the purposes of defining an octave,
the octave starts at <code>c</code> (this is a standard convention).</dd>
<dt>Sharp or flat:</dt>
<dd>Represented by <code>+</code> or <code>-</code>, and only one is allowed.</dd>
<dt>Ups or downs (octave adjustments):</dt>
<dd>If provided, specified as one or more <code>'</code> for up, or one or more <code>,</code> for down.</dd>
<dt>Duration:</dt>
<dd><p>If note duration is not specified, then it is given a default value. For the first
note in the melody, and the first note in each bar, the default duration is 1 crotchet
(ie one 'quarter note').
For all other notes, the default duration is the duration of the previous note.
If a duration is specified, then the specification consists of the following
components:</p>
<ul>
<li>The initial number of crotchets (if not given, this defaults to 1).</li>
<li><code>h</code> or <code>q</code> qualifiers, possibly repeated, which multiply the duration
by a half or a quarter respectively.</li>
<li><code>t</code> qualifier (at most once), which multiplies the duration by a third</li>
<li><code>.</code> qualifier (at most once) which multiplies the duration by 3/2</li>
</ul>
<p>At least one component must be given, otherwise the previously described default
value applies.</p>
<p>Any note duration must
be a whole number of ticks, and an error will occur if a note length is defined
which is a fractional number of ticks. (In such a case, if the note length is
correct, you will need to increase or change the specified <code>ticks_per_beat</code>
song property.)</p>
</dd>
<dt>To-be-continued marker:</dt>
<dd>If provided, specified as <code>~</code>. This indicates that a note will be continued
by the next note.</dd>
</dl>
<p>Except for the very first note, MelodyScript does not provide for each note to
specify its octave. Instead, pitch values are specified relative to the previous note.
If no "up" or "down" markers are specified, the rule is to always choose the closest
possibility. If this choice is ambiguous, eg when going from <code>f</code> to <code>b</code> or vice versa, then an error occurs.</p>
<p>If one up or one down is specified, then the next note should be the first note matching
the given note letter, above
or below the previous note, respectively. If more than one up or down marker is given,
then go an extra octave up or down for each extra marker.</p>
<p>So, for example, <code>c</code> followed by <code>e</code> means go up to the next E, and <code>c</code> followed
by <code>e'</code> <em>also</em> means go up to the next E. Whereas <code>e''</code> means go up 9 notes to the E
above that, <code>e,</code> means go down to the first E below, and <code>e,,</code> means go to the E
below that one.</p>
<p>(The up and down markers are the same as used in LilyPond in relative mode, however the rule of
interpretation is different – in MelodyScript one <code>'</code> always means the next note up
from the previous note, and similarly one <code>,</code> means the next note down.
Also, in MelodyScript the rule defines "closest" based on the the actual semitone values of
the previous and current notes as specified by letter and optional sharps or flats, whereas
LilyPond applies a rule that ignores sharps and flats.)</p>
<a name="user-content-ties-and-note-continuations"/>
<h3><a id="user-content-ties-and-note-continuations" class="anchor" href="#ties-and-note-continuations" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Ties, and Note Continuations</h3>
<p>A <strong>continuation</strong> is where one note is represented by the joining of two or more
note items in the melody script. Because bar lines have to occur in the right place,
notes that cross bar lines <em>have</em> to be represented using continuations. There may
also be some note lengths that cannot be represented using the Duration format
specified above, so they have to be constructed from multiple notes joined together.</p>
<p>In other situations, the use of continuations is optional.</p>
<p>There are two ways to specify that one note is to be continued by a second note:</p>
<ul>
<li>Either, the first note ends with <code>~</code> and the second note starts with <code>~</code>,</li>
<li>Or, a <code>~</code> <strong>Tie</strong> item occurs between the two notes.</li>
</ul>
<p>It is possible for more than two notes to form a continuation – the
required joinings need to be indicated in each case. This would be necessary,
for example, to specify a note that filled more than two bars.</p>
<a name="user-content-rests"/>
<h3><a id="user-content-rests" class="anchor" href="#rests" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Rests</h3>
<p>A <strong>Rest</strong> consists of the letter <code>r</code> followed by a duration specification. The duration
specification for rests is very similar to that for notes, but there is no default
duration, and at least one part of the duration specification must be given. If
only qualifiers are given, then they are applied to a value of 1. So, for example,
<code>rh</code> is a valid rest, representing half a crotchet, ie a quaver.</p>
<a name="user-content-chords"/>
<h3><a id="user-content-chords" class="anchor" href="#chords" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Chords</h3>
<p><strong>Chords</strong> are specified by enclosing their contents in <code>[</code> and <code>]</code>. Currently there
are two formats:</p>
<dl>
<dt>Root note plus descriptor</dt>
<dd>The root note is given as an upper-case letter with an optional <code>+</code> or <code>-</code> for sharp or flat,
and one of several standard "descriptors" from empty "" (for a major chord), <code>7</code>, <code>m</code>,
<code>m7</code> and <code>maj7</code>. So, for example, <code>[Cm]</code> represents a C minor chord.</dd>
<dt>Root note plus other chord notes.</dt>
<dd>Prefixed with a <code>:</code>, the notes are given as upper-case letters with optional <code>+</code>/<code>-</code> sharp
or flat, with the root note first. So, for example, <code>[:CE-G]</code> represents a C minor chord.</dd>
</dl>
<p>In each case, chords may contain an optional bass note specifier, to specify a bass note
different from the root note. This is given as a <code>/</code> character, followed by an upper-case
letter and optional sharp or flat. So, for example, <code>[A+m/F+]</code> represents A sharp minor
with an F sharp bass.</p>
<a name="user-content-bar-lines"/>
<h3><a id="user-content-bar-lines" class="anchor" href="#bar-lines" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Bar Lines</h3>
<p><strong>Bar Lines</strong> are represented by <code>|</code>. Bar lines are used to check that the total lengths of notes
and rests in each bar have the correct values. They also reset the default note
duration to 1 crotchet. Bar lines do not have any direct effect on Midi output.</p>
<a name="user-content-cuts"/>
<h3><a id="user-content-cuts" class="anchor" href="#cuts" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Cuts</h3>
<p>A <strong>Cut</strong> is represented by <code>!</code>. <strong>Cut</strong> means "cut out all previous song items". A Cut
is useful when editing, when you want to play part of the song without starting all the way from the beginning.
(There would not normally be any reason to include a Cut in a completed song.)</p>
<a name="user-content-compilation-and-playback"/>
<h2><a id="user-content-compilation-and-playback" class="anchor" href="#compilation-and-playback" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Compilation and Playback</h2>
<p>The <code>main()</code> method of <code>song2midi.py</code> takes one argument which is the name of a MelodyScript file,
and compiles it into a Midi file, using the name of the input file with <code>.mid</code> appended. This Python
module is also made available as a console script <strong>song2midi</strong> when MelodyScripter is installed
into a Python environment.</p>
<p>For example:</p>
<pre>&gt; song2midi yankee_doodle.song

Compiling song file yankee_doodle.song to yankee_doodle.song.mid ...
Writing midi to yankee_doodle.song.mid ...
Successfully wrote midi file yankee_doodle.song.mid.
</pre>
<p>The <code>main()</code> method of <code>play_song.py</code> generates the same Midi file as <code>song2midi.py</code> and,
after generating the Midi file, plays it using the <code>/usr/bin/cvlc</code> command, if that command is available.
<strong>cvlc</strong> is the command line version of VLC, as installed on an Linux system, and it only plays Midi files
if the <strong>vlc-plugin-fluidsynth</strong> VLC plugin is installed. This module is also available as the <strong>play_song</strong>
console script.</p>
<p>For example:</p>
<pre>&gt; play_song yankee_doodle.song

Playing song yankee_doodle.song (after compiling to yankee_doodle.song.mid) ...
Writing midi to yankee_doodle.song.mid ...
Playing midi file yankee_doodle.song.mid with cvlc ...
VLC media player 2.1.6 Rincewind (revision 2.1.6-0-gea01d28)
[0x89f45a0] dummy interface: using the dummy interface module...
fluidsynth: warning: Failed to pin the sample data to RAM; swapping is possible.
</pre>
<p>(Console output from <strong>cvlc</strong> and the fluidsynth plug-in may be different on your system.)</p>
<p>An alternative playback option on Linux is <strong>timidity</strong>, however even with the <code>--output-24bit</code>
option, on my system, the sound quality is poor at the beginning of the song.</p>
<a name="user-content-limitations-and-installation-issues"/>
<h2><a id="user-content-limitations-and-installation-issues" class="anchor" href="#limitations-and-installation-issues" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Limitations and Installation Issues</h2>
<p>To install the latest stable version of <strong>Melody Scripter</strong> into a Python environment, execute:</p>
<pre>pip install https://github.com/pdorrell/melody_scripter/archive/master.zip --process-dependency-links
</pre>
<p>Notes:</p>
<ul>
<li><strong>Melody Scripter</strong> depends on the <a href="https://pypi.python.org/pypi/midi/0.2.3">midi 0.2.3</a> library
to write files. <strong>midi 0.2.3</strong> only runs on Python 2.x, and on Linux, the installation requires
that <strong>swig</strong> be installed (eg by <code>sudo apt-get install swig</code>). So, for the moment, <strong>Melody Scripter</strong>
has the same limitations, and it is only tested to run on Python 2.7.</li>
<li><code>--process-dependency-links</code> is currently required because the <strong>midi 0.2.3</strong> dependency is not
directly downloadable from Pypi.</li>
<li>To install a specific tagged release, eg <strong>0.0.5</strong>, replace 'master' in the URL above with the tag.</li>
</ul>

</article>
  </div></body></html>