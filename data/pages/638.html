<html><body><div><div class="entry-content" itemprop="text"><p>In <a href="http://pythontesting.net/framework/pytest/pytest-fixtures-nuts-bolts">pytest fixtures nuts and bolts</a>, I noted that you can specify session scope so that a fixture will only run once per test session and be available across multiple test functions, classes, and modules.</p>
<p>In this post, I’m going to show a simple example so you can see it in action.<br/><span id="more-3488"/></p>

<p>Here’s the table from the <a href="http://pythontesting.net/framework/pytest/pytest-fixtures-nuts-bolts/#scope">previous post</a>:</p>
<table>
<tbody>
<tr class="odd">
<td align="left"><strong>function</strong></td>
<td align="left">Run once per test</td>
</tr>
<tr class="even">
<td align="left"><strong>class</strong></td>
<td align="left">Run once per class of tests</td>
</tr>
<tr class="odd">
<td align="left"><strong>module</strong></td>
<td align="left">Run once per module</td>
</tr>
<tr class="even">
<td align="left"><strong>session</strong></td>
<td align="left">Run once per session</td>
</tr>
</tbody>
</table>
<h2 id="conftest">A separate file for fixtures, conftest.py</h2>
<p>With function, class, and module scope, it is completely reasonable for the fixture code to be in the same file as the tests.<br/>But now suddenly, with session, that doesn’t make sense anymore.</p>
<p>We can put them in conftest.py. This is a special named file that pytest looks for.<br/><a href="http://pytest.org/latest/plugins.html#conftest-py-plugins">The documentation</a> says that it’s for local plugins, but we can use it for local fixtures as well. See the <a href="http://pytest.org/latest/plugins.html#conftest-py-plugins">pytest.org site</a> for placement and scope of conftest.py.</p>
<h2 id="example">Simple example of session scope fixtures</h2>
<p>I think it’s clearest to just see this in action.</p>
<p>I’ve got 4 files:</p>
<ul>
<li><a href="#conftest">conftest.py</a>
<ul>
<li>2 fixtures</li>
<li>my_own_session_run_at_beginning, an autouse fixture with session scope</li>
<li>some_resource, a normal non-autouse fixture with session scope</li>
</ul>
</li>
<li><a href="#alpha">test_alpha.py</a>
<ul>
<li>2 simple test functions</li>
<li>test_alpha_1, has no named fixtures</li>
<li>test_alpha_2, has one named fixture, some_resource</li>
</ul>
</li>
<li><a href="#beta">test_beta.py</a>
<ul>
<li>similar to test_alpha.py, but with unittest based tests</li>
</ul>
</li>
<li><a href="#gamma">test_gamma.py</a>
<ul>
<li>similar to test_alpha.py, but with class based tests</li>
</ul>
</li>
</ul>
<p><span id="conftest"><strong>conftest.py:</strong></span> <code/></p>

		<div id="crayon-56d590249770b660906851" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d590249770b660906851-1">1</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-2">2</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-3">3</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-4">4</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-5">5</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-6">6</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-7">7</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-8">8</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-9">9</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-10">10</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-11">11</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-12">12</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-13">13</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-14">14</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-15">15</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-16">16</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-17">17</p><p class="crayon-num" data-line="crayon-56d590249770b660906851-18">18</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d590249770b660906851-1"><span class="crayon-e">import </span><span class="crayon-i">pytest</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-2"> </p><p class="crayon-line" id="crayon-56d590249770b660906851-3"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"session"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">autouse</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-4"><span class="crayon-e">def </span><span class="crayon-e">my_own_session_run_at_beginning</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-5"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn my_own_session_run_at_beginning()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-6"> </p><p class="crayon-line" id="crayon-56d590249770b660906851-7"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">my_own_session_run_at_end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-8"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'In my_own_session_run_at_end()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-9"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">my_own_session_run_at_end</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-10"> </p><p class="crayon-line" id="crayon-56d590249770b660906851-11"> </p><p class="crayon-line" id="crayon-56d590249770b660906851-12"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"session"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-13"><span class="crayon-e">def </span><span class="crayon-e">some_resource</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-14"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn some_resource()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-15"> </p><p class="crayon-line" id="crayon-56d590249770b660906851-16"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">some_resource_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-17"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn some_resource_fin()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249770b660906851-18"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">some_resource_fin</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p><span id="alpha"><strong>test_alpha.py:</strong></span> <code/></p>

		<div id="crayon-56d5902497715677920481" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5902497715677920481-1"><span class="crayon-e">def </span><span class="crayon-e">test_alpha_1</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497715677920481-2"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_alpha_1()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497715677920481-3"> </p><p class="crayon-line" id="crayon-56d5902497715677920481-4"><span class="crayon-e">def </span><span class="crayon-e">test_alpha_2</span><span class="crayon-sy">(</span><span class="crayon-v">some_resource</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497715677920481-5"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_alpha_2()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p><span id="beta"><strong>test_beta.py:</strong></span> <code/></p>

		<div id="crayon-56d590249771c269686403" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d590249771c269686403-1"><span class="crayon-e">import </span><span class="crayon-e">unittest</span></p><p class="crayon-line" id="crayon-56d590249771c269686403-2"><span class="crayon-e">import </span><span class="crayon-e">pytest</span></p><p class="crayon-line" id="crayon-56d590249771c269686403-3"> </p><p class="crayon-line" id="crayon-56d590249771c269686403-4"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">BetaTest</span><span class="crayon-sy">(</span><span class="crayon-v">unittest</span><span class="crayon-sy">.</span><span class="crayon-v">TestCase</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249771c269686403-5"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_unit_beta_1</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249771c269686403-6"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_unit_beta_1()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249771c269686403-7"> </p><p class="crayon-line" id="crayon-56d590249771c269686403-8"><span class="crayon-h">    </span><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-v">mark</span><span class="crayon-sy">.</span><span class="crayon-e">usefixtures</span><span class="crayon-sy">(</span><span class="crayon-s">'some_resource'</span><span class="crayon-sy">)</span><span class="crayon-h">    </span></p><p class="crayon-line" id="crayon-56d590249771c269686403-9"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_unit_beta_2</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249771c269686403-10"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_unit_beta_2()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p><span id="gamma"><strong>test_gamma.py:</strong></span> <code/></p>

		<div id="crayon-56d5902497721444882383" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5902497721444882383-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">TestGamma</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497721444882383-2"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_gamma_1</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497721444882383-3"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_gamma_1()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497721444882383-4"> </p><p class="crayon-line" id="crayon-56d5902497721444882383-5"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_gamma_2</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">some_resource</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497721444882383-6"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_gamma_2()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h3 id="output">Output</h3>
<p>Run with <strong><code>pytest -s -v </code></strong></p>
<p/>

		<div id="crayon-56d5902497727294723045" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5902497727294723045-1">1</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-2">2</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-3">3</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-4">4</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-5">5</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-6">6</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-7">7</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-8">8</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-9">9</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-10">10</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-11">11</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-12">12</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-13">13</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-14">14</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-15">15</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-16">16</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-17">17</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-18">18</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-19">19</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-20">20</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-21">21</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-22">22</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-23">23</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-24">24</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-25">25</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-26">26</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-27">27</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-28">28</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-29">29</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-30">30</p><p class="crayon-num" data-line="crayon-56d5902497727294723045-31">31</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5902497727294723045-1"> </p><p class="crayon-line" id="crayon-56d5902497727294723045-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-3"><span class="crayon-e">platform </span><span class="crayon-v">darwin</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.5</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-o">-</span><span class="crayon-cn">1.4.20</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.5.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-e">python</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-4"><span class="crayon-i">collecting</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-h"> </span><span class="crayon-e">items</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-5"> </p><p class="crayon-line" id="crayon-56d5902497727294723045-6"><span class="crayon-v">test_alpha</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">test_alpha_1 </span></p><p class="crayon-line" id="crayon-56d5902497727294723045-7"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">my_own_session_run_at_beginning</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-8"> </p><p class="crayon-line" id="crayon-56d5902497727294723045-9"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_alpha_1</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-10"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-11"><span class="crayon-v">test_alpha</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">4</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">test_alpha_2 </span></p><p class="crayon-line" id="crayon-56d5902497727294723045-12"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">some_resource</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-13"> </p><p class="crayon-line" id="crayon-56d5902497727294723045-14"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_alpha_2</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-15"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-16"><span class="crayon-v">test_beta</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">5</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">BetaTest</span><span class="crayon-sy">.</span><span class="crayon-e">test_unit_beta_1 </span></p><p class="crayon-line" id="crayon-56d5902497727294723045-17"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_unit_beta_1</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-18"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-19"><span class="crayon-v">test_beta</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">8</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">BetaTest</span><span class="crayon-sy">.</span><span class="crayon-e">test_unit_beta_2 </span></p><p class="crayon-line" id="crayon-56d5902497727294723045-20"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_unit_beta_2</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-21"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-22"><span class="crayon-v">test_gamma</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">2</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">TestGamma</span><span class="crayon-sy">.</span><span class="crayon-e">test_gamma_1 </span></p><p class="crayon-line" id="crayon-56d5902497727294723045-23"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_gamma_1</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-24"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-25"><span class="crayon-v">test_gamma</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">5</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">TestGamma</span><span class="crayon-sy">.</span><span class="crayon-e">test_gamma_2 </span></p><p class="crayon-line" id="crayon-56d5902497727294723045-26"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_gamma_2</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-27"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-28"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">some_resource_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-29"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">my_own_session_run_at_end</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-30"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.04</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span></p><p class="crayon-line" id="crayon-56d5902497727294723045-31"> </p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h2 id="mixing_scope">Mixing function, module, and session scope</h2>
<p>Let’s say I’ve got:</p>
<ul>
<li>a function scope fixture ‘resource_c’</li>
<li>that uses a module scoped fixture ‘fixture_b’</li>
<li>that uses a session scoped fixture ‘fixture_a’</li>
</ul>
<p>This all works fine.<br/>Also in this example, I’ve added a few autouse fixtures just for fun.</p>
<p><strong>conftest.py:</strong> <code/></p>

		<div id="crayon-56d590249772d671214057" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d590249772d671214057-1">1</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-2">2</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-3">3</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-4">4</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-5">5</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-6">6</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-7">7</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-8">8</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-9">9</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-10">10</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-11">11</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-12">12</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-13">13</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-14">14</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-15">15</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-16">16</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-17">17</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-18">18</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-19">19</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-20">20</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-21">21</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-22">22</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-23">23</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-24">24</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-25">25</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-26">26</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-27">27</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-28">28</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-29">29</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-30">30</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-31">31</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-32">32</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-33">33</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-34">34</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-35">35</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-36">36</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-37">37</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-38">38</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-39">39</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-40">40</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-41">41</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-42">42</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-43">43</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-44">44</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-45">45</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-46">46</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-47">47</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-48">48</p><p class="crayon-num" data-line="crayon-56d590249772d671214057-49">49</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d590249772d671214057-1"><span class="crayon-e">import </span><span class="crayon-i">pytest</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-2"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-3"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"session"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-4"><span class="crayon-e">def </span><span class="crayon-e">resource_a</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-5"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'In resource_a()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-6"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-7"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">resource_a_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-8"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn resource_a_fin()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-9"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">resource_a_fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-10"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-11"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"module"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-12"><span class="crayon-e">def </span><span class="crayon-e">resource_b</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">resource_a</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-13"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'In resource_b()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-14"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-15"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">resource_b_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-16"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn resource_b_fin()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-17"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">resource_b_fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-18"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-19"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"function"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-20"><span class="crayon-e">def </span><span class="crayon-e">resource_c</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">resource_b</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-21"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'In resource_c()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-22"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-23"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">resource_c_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-24"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn resource_c_fin()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-25"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">resource_c_fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-26"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-27"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-28"><span class="crayon-p"># these are just some fun dividiers to make the output pretty</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-29"><span class="crayon-p"># completely unnecessary, I was just playing with autouse fixtures</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-30"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"function"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">autouse</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-31"><span class="crayon-e">def </span><span class="crayon-e">divider_function</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-32"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n        --- function %s() start ---'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-t">function</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-33"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-34"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'        --- function %s() done ---'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-t">function</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-35"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-36"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-37"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"module"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">autouse</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-38"><span class="crayon-e">def </span><span class="crayon-e">divider_module</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-39"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n    ------- module %s start ---------'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-40"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-41"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'    ------- module %s done ---------'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-42"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-43"> </p><p class="crayon-line" id="crayon-56d590249772d671214057-44"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"session"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">autouse</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-45"><span class="crayon-e">def </span><span class="crayon-e">divider_session</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-46"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n----------- session start ---------------'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-47"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-48"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'----------- session done ---------------'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249772d671214057-49"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p><strong>test_one_two.py:</strong> <code/></p>

		<div id="crayon-56d5902497735210653925" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5902497735210653925-1"><span class="crayon-e">def </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-v">resource_c</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497735210653925-2"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'In test_one()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497735210653925-3"> </p><p class="crayon-line" id="crayon-56d5902497735210653925-4"><span class="crayon-e">def </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-v">resource_c</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497735210653925-5"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_two()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p><strong>test_three_four.py:</strong> <code/></p>

		<div id="crayon-56d590249773a674191050" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d590249773a674191050-1"><span class="crayon-e">def </span><span class="crayon-e">test_three</span><span class="crayon-sy">(</span><span class="crayon-v">resource_c</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249773a674191050-2"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_three()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773a674191050-3"> </p><p class="crayon-line" id="crayon-56d590249773a674191050-4"><span class="crayon-e">def </span><span class="crayon-e">test_four</span><span class="crayon-sy">(</span><span class="crayon-v">resource_c</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d590249773a674191050-5"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn test_four()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>This seems reasonable to me.<br/>What do you think will happen?</p>
<p><strong>output:</strong> <code/></p>

		<div id="crayon-56d590249773f856446934" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d590249773f856446934-1">1</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-2">2</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-3">3</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-4">4</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-5">5</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-6">6</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-7">7</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-8">8</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-9">9</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-10">10</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-11">11</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-12">12</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-13">13</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-14">14</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-15">15</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-16">16</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-17">17</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-18">18</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-19">19</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-20">20</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-21">21</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-22">22</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-23">23</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-24">24</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-25">25</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-26">26</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-27">27</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-28">28</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-29">29</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-30">30</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-31">31</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-32">32</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-33">33</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-34">34</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-35">35</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-36">36</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-37">37</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-38">38</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-39">39</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-40">40</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-41">41</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-42">42</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-43">43</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-44">44</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-45">45</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-46">46</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-47">47</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-48">48</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-49">49</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-50">50</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-51">51</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-52">52</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-53">53</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-54">54</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-55">55</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-56">56</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-57">57</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-58">58</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-59">59</p><p class="crayon-num" data-line="crayon-56d590249773f856446934-60">60</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d590249773f856446934-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-v">test</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-v">v</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-3"><span class="crayon-e">platform </span><span class="crayon-v">darwin</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.5</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-o">-</span><span class="crayon-cn">1.4.20</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.5.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">usr</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-e">python</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-4"><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-e">items </span></p><p class="crayon-line" id="crayon-56d590249773f856446934-5"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-6"><span class="crayon-v">test_one_two</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test_one</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d590249773f856446934-7"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">session </span><span class="crayon-v">start</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-8"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-9"><span class="crayon-h">    </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">module </span><span class="crayon-e">test_one_two </span><span class="crayon-v">start</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-10"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-11"><span class="crayon-h">        </span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">start</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-12"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_a</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-13"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_b</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-14"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_c</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-15"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-16"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-17"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_c_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-18"><span class="crayon-h">        </span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-19"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-20"><span class="crayon-v">test_one_two</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">4</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test_two</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d590249773f856446934-21"><span class="crayon-h">        </span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">start</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-22"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_c</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-23"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-24"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-25"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-26"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_c_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-27"><span class="crayon-h">        </span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-28"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-29"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_b_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-30"><span class="crayon-h">    </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">module </span><span class="crayon-e">test_one_two </span><span class="crayon-v">done</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-31"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-32"><span class="crayon-v">test_three_four</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">1</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test_three</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d590249773f856446934-33"><span class="crayon-h">    </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">module </span><span class="crayon-e">test_three_four </span><span class="crayon-v">start</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-34"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-35"><span class="crayon-h">        </span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">test_three</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">start</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-36"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_b</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-37"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_c</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-38"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-39"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_three</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-40"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-41"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_c_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-42"><span class="crayon-h">        </span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">test_three</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-43"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-44"><span class="crayon-v">test_three_four</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">4</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test_four</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d590249773f856446934-45"><span class="crayon-h">        </span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">test_four</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">start</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-46"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_c</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-47"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-48"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">test_four</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-49"><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-50"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_c_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-51"><span class="crayon-h">        </span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">test_four</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-v">done</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-52"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-53"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_b_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-54"><span class="crayon-h">    </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">module </span><span class="crayon-e">test_three_four </span><span class="crayon-v">done</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-55"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-56"><span class="crayon-st">In</span><span class="crayon-h"> </span><span class="crayon-e">resource_a_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-57"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">session </span><span class="crayon-v">done</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d590249773f856446934-58"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-59"> </p><p class="crayon-line" id="crayon-56d590249773f856446934-60"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.02</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h3 id="warning">WARNING: you gotta use bigger and bigger scope</h3>
<p>If you do this in the wrong order, things go haywire.</p>
<p>Let’s swap scope on a couple of items.</p>
<p><strong>conftest.py:</strong> <code/></p>

		<div id="crayon-56d5902497746822698026" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5902497746822698026-1"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-2"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"module"</span><span class="crayon-sy">)</span><span class="crayon-h">   </span><span class="crayon-p"># session -&gt; module</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-3"><span class="crayon-e">def </span><span class="crayon-e">resource_a</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-4"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'In resource_a()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-5"> </p><p class="crayon-line" id="crayon-56d5902497746822698026-6"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">resource_a_fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-7"><span class="crayon-h">            </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nIn resource_a_fin()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-8"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">resource_a_fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-9"> </p><p class="crayon-line" id="crayon-56d5902497746822698026-10"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"session"</span><span class="crayon-sy">)</span><span class="crayon-h">   </span><span class="crayon-p"># module -&gt; session</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-11"><span class="crayon-e">def </span><span class="crayon-e">resource_b</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">resource_a</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5902497746822698026-12"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>We will get some warning like this (or several): <code/></p>

		<div id="crayon-56d590249774b323711036" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d590249774b323711036-1"><span class="crayon-i">E</span><span class="crayon-h">           </span><span class="crayon-v">ScopeMismatchError</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">You </span><span class="crayon-e">tried </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">access </span><span class="crayon-i">the</span><span class="crayon-h"> </span><span class="crayon-s">'module'</span><span class="crayon-h"> </span><span class="crayon-e">scoped </span><span class="crayon-i">fixture</span><span class="crayon-h"> </span><span class="crayon-s">'resource_a'</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d590249774b323711036-2"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-i">with</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-s">'session'</span><span class="crayon-h"> </span><span class="crayon-e">scoped </span><span class="crayon-e">request </span><span class="crayon-t">object</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">involved </span><span class="crayon-i">factories</span></p><p class="crayon-line" id="crayon-56d590249774b323711036-3"><span class="crayon-i">E</span><span class="crayon-h">           </span><span class="crayon-v">conftest</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">18</span><span class="crayon-o">:</span><span class="crayon-h">  </span><span class="crayon-e">def </span><span class="crayon-e">resource_c</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">resource_b</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249774b323711036-4"><span class="crayon-i">E</span><span class="crayon-h">           </span><span class="crayon-v">conftest</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">10</span><span class="crayon-o">:</span><span class="crayon-h">  </span><span class="crayon-e">def </span><span class="crayon-e">resource_b</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">resource_a</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d590249774b323711036-5"><span class="crayon-i">E</span><span class="crayon-h">           </span><span class="crayon-v">conftest</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">2</span><span class="crayon-o">:</span><span class="crayon-h">  </span><span class="crayon-e">def </span><span class="crayon-e">resource_a</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>So. Don’t do that.</p>
<h3 id="warning-applies-to-built-in-fixtures">Warning applies to built in fixtures</h3>
<p>Pytest includes some <a href="http://pytest.org/latest/builtin.html#builtin-fixtures-function-arguments">built in fixtures</a>. I believe all of them are function scoped.<br/>This means that you cannot use them from anything other than functions or function scoped fixtures.</p>
<h2 id="further">Taking it further</h2>
<p>The code I’ve shown is for simple run at the beginning and end type fixtures.<br/>However, there’s more you can do with session fixtures.<br/>The pytest.org site has a cool example, <a href="http://pytest.org/latest/example/special.html">A session-fixture which can look at all collected tests</a>.</p>
<h2 id="question">What are you using session fixtures for?</h2>
<p>I’d love to hear examples and use cases for session fixtures.<br/>Please leave a comment or let me know <a href="https://twitter.com/brianokken"><span class="citation">@brianokken</span></a> of how you are using them.</p>

</div></div></body></html>