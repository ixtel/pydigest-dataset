<html><body><div><div class="postentry">
				
<p><a href="http://jenyay.net/blog/2015/06/30/tablicy-v-outwiker-opros-polzovatelejj/">Некоторое время назад</a> я советовался с вами, пользователями OutWiker, относительно того, как можно улучшить создание таблиц в этой программе. Тогда совместными усилиями решили, что лучше сделать новые вики-команды, напоминающие поведение <a href="http://www.pmwiki.org/wiki/PmWikiRu/TableDirectives">pmWiki</a> с некоторыми исправлениями. В новой версии OutWiker 1.9.0.776 реализовал эти возможности, о чем и расскажу поподробнее в этом посте.</p>
<p><span id="more-5254"/></p>
<p>В версии 1.9.0.776 появилась новые викикоманды (:table:), (:row:) и (:cell:) / (:hcell:), которые создают соответственно таблицу, обозначают начало новой строки и ячейки / заголовочной ячейки соответственно. Эти команды по сути близки к HTML-тегам &lt;table&gt;, &lt;tr&gt;, &lt;td&gt; / &lt;th&gt; с той разницей, что эти команды не нужно закрывать (хотя можно это делать) за исключением команды (:table:). Синтаксис этих команд выглядит следующим образом:</p>
<blockquote><p>(:table параметры:)<br/>
(:row параметры:)<br/>
(:hcell параметры:) Текст заголовочной ячейки<br/>
(:hcell параметры:) Текст заголовочной ячейки<br/>
…<br/>
(:row параметры:)<br/>
(:cell параметры:) Текст ячейки<br/>
(:cell параметры:) Текст ячейки<br/>
…<br/>
(:tableend:)</p></blockquote>
<p>Параметры в этих командах могут быть те же самые, что и атрибуты в соответствующих HTML-тегах. Например, такой код:</p>
<blockquote><p>(:table border=1:)<br/>
(:row:)<br/>
(:hcell:)ячейка 1<br/>
(:hcell:)ячейка 2<br/>
(:hcell:)ячейка 3<br/>
(:row:)<br/>
(:cell:)ячейка 4<br/>
(:cell:)ячейка 5<br/>
(:cell:)ячейка 6<br/>
(:tableend:)</p></blockquote>
<p>создаст следующую простую таблицу:</p>

<p>В командах (:cell:) / (:hcell:) можно использовать параметры <i>colspan</i> и <i>rowspan</i> для объединения соседних ячеек по горизонтали и по вертикали соответственно. Например, следующий код:</p>
<blockquote><p>(:table border=1 align=center:)<br/>
(:row:)<br/>
(:cell colspan=2 align=center:)ячейка 1<br/>
(:cell rowspan=2:)ячейка 2<br/>
(:row:)<br/>
(:cell:)ячейка 4<br/>
(:cell:)ячейка 5<br/>
(:tableend:)</p></blockquote>
<p>создаст такую таблицу:</p>

<p>Из-за особенностей работы википарсера (части программы OutWiker, который преобразует викинотацию в код HTML), чтобы одна таблица располагалась в ячейке другой таблицы, недостаточно одной команды (:table:) (в этом случае википарсер не будет знать, где заканчивается таблица верхнего уровня, а где вложенная таблица), поэтому для явного указания начала и конца вложенных таблиц были добавлены команды (:table:) с номерами, т.е. команды (:table1:), (:table2:), (:table3:), (:table4:) и (:table5:). Они могут использоваться точно также, как и команда (:table:), но создавались они именно для создания вложенных таблиц. Обратите внимание, что эти команды закрываются с помощью выражения (:table1end:), (:table2end:), (:table3end:), (:table4end:) и (:table5end:) соответственно.</p>
<p>Внутри команды вида (:tableN:) для создания строк и ячеек должны использоваться также нумерованные команды (:rowN:) и (:cellN:) / (:hcellN:) соответственно. Эта особенность добавляет наглядности, какой таблице какая строка или ячейка принадлежит.</p>
<p>Например:</p>
<table border="1">
<tbody>
<tr>
<th>Викинотация</th>
<th>Результат</th>
</tr>
<tr>
<td>(:table border=1 align=center:)<br/>
(:row:)<br/>
(:cell:)(:table2 border=1:)<br/>
(:row2:)<br/>
(:cell2:)Таблица 2. Ячейка 1<br/>
(:cell2:)Таблица 2. Ячейка 2<br/>
(:cell2:)Таблица 2. Ячейка 3<br/>
(:row2:)<br/>
(:cell2:)Таблица 2. Ячейка 4<br/>
(:cell2:)Таблица 2. Ячейка 5<br/>
(:cell2:)Таблица 2. Ячейка 6<br/>
(:table2end:)(:cell:)ячейка 2<br/>
(:cell:)ячейка 3(:row:)<br/>
(:cell:)ячейка 4<br/>
(:cell:)ячейка 5<br/>
(:cell:)ячейка 6<br/>
(:tableend:)</td>
<td>
<table border="1" align="center">
<tbody>
<tr>
<td>
<table border="1">
<tbody>
<tr>
<td>Таблица 2. Ячейка 1</td>
<td>Таблица 2. Ячейка 2</td>
<td>Таблица 2. Ячейка 3</td>
</tr>
<tr>
<td>Таблица 2. Ячейка 4</td>
<td>Таблица 2. Ячейка 5</td>
<td>Таблица 2. Ячейка 6</td>
</tr>
</tbody>
</table>
</td>
<td>ячейка 2</td>
<td>ячейка 3</td>
</tr>
<tr>
<td>ячейка 4</td>
<td>ячейка 5</td>
<td>ячейка 6</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>Нумерация таблиц не обязательно должна показывать уровень вложенности.</p>
<p>Для облегчения жизни пользователей я сделал диалоги для вставки новых таблиц и строк в уже существующие таблицы. Эти диалоги выглядят примерно одинаково с той лишь разницей, что в диалоге вставки таблицы можно задать толщину рамки таблицы.</p>

<p>Я пока не стал добавлять много параметров в диалог, в принципе, в будущем его можно будет расширять. Аналогичные диалоги были добавлены и для HTML-страниц.</p>
<p>При нажатии кнопки вставки таблицы или строк таблицы, программа сама определит необходимый уровень вложенности. Например, если курсор стоит внутри команды (:table:)…(:tableend:), и вы создаете еще одну таблицу, то будет вставлена команда (:table2:)…(:table2end:), а если вы находитесь внутри команды (:table2:)…(:table2end:), то будет вставлена команда (:table3:)…(:table3end:) и так далее.</p>
<p>Аналогично и со строками, если вы находитесь внутри команды (:table2:)…(:table2end:), то будут вставлены команды (:row2:) и (:cell2:) / (:hcell2:).</p>
<hr/>
<p>Кроме команд для вставки таблиц в новой версии были добавлены несколько новых стилей, присланных пользователями программы. За новые стили спасибо Роману Соболеву и пользователю Gabrielle Ramires.</p>
<hr/>
<p>Как вы знаете, к концу года я хочу выложить уже релиз OutWiker 1.9. Времени остается не так много, поэтому новые возможности, которые требуют много времени на реализацию и вылизывание, оставлю на следующую версию, а пока буду подчищать то, что имеется и добавлю некоторые возможности для плагинов, что будет полезно в будущем.</p>
<p>Скачать последнюю нестабильную версию можно как обычно по ссылке — <a href="http://jenyay.net/Outwiker/Unstable">http://jenyay.net/Outwiker/Unstable</a></p>
							</div>
			</div></body></html>