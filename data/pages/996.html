<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-transforming-code-into-beautiful-idiomatic-python" class="anchor" href="#transforming-code-into-beautiful-idiomatic-python" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Transforming Code into Beautiful, Idiomatic Python</h1>

<p>Notes from Raymond Hettinger's talk at pycon US 2013 <a href="http://www.youtube.com/watch?feature=player_embedded&amp;v=OSGv2VnC0go">video</a>, <a href="https://speakerdeck.com/pyconslides/transforming-code-into-beautiful-idiomatic-python-by-raymond-hettinger-1">slides</a>.</p>

<p>The code examples and direct quotes are all from Raymond's talk. I've reproduced them here for my own edification and the hopes that others will find them as handy as I have!</p>

<h2><a id="user-content-looping-over-a-range-of-numbers" class="anchor" href="#looping-over-a-range-of-numbers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Looping over a range of numbers</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> i <span class="pl-k">in</span> [<span class="pl-c1">0</span>, <span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>, <span class="pl-c1">4</span>, <span class="pl-c1">5</span>]:
    <span class="pl-c1">print</span> i<span class="pl-k">**</span><span class="pl-c1">2</span>

<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">6</span>):
    <span class="pl-c1">print</span> i<span class="pl-k">**</span><span class="pl-c1">2</span></pre></div>

<h3><a id="user-content-better" class="anchor" href="#better" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-v">xrange</span>(<span class="pl-c1">6</span>):
    <span class="pl-c1">print</span> i<span class="pl-k">**</span><span class="pl-c1">2</span></pre></div>

<p><code>xrange</code> creates an iterator over the range producing the values one at a time. This approach is much more memory efficient than <code>range</code>. <code>xrange</code> was renamed to <code>range</code> in python 3.</p>

<h2><a id="user-content-looping-over-a-collection" class="anchor" href="#looping-over-a-collection" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Looping over a collection</h2>

<div class="highlight highlight-source-python"><pre>colors <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>]

<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">len</span>(colors)):
    <span class="pl-c1">print</span> colors[i]</pre></div>

<h3><a id="user-content-better-1" class="anchor" href="#better-1" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> color <span class="pl-k">in</span> colors:
    <span class="pl-c1">print</span> color</pre></div>

<h2><a id="user-content-looping-backwards" class="anchor" href="#looping-backwards" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Looping backwards</h2>

<div class="highlight highlight-source-python"><pre>colors <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>]

<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">len</span>(colors)<span class="pl-k">-</span><span class="pl-c1">1</span>, <span class="pl-k">-</span><span class="pl-c1">1</span>, <span class="pl-k">-</span><span class="pl-c1">1</span>):
    <span class="pl-c1">print</span> colors[i]</pre></div>

<h3><a id="user-content-better-2" class="anchor" href="#better-2" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> color <span class="pl-k">in</span> <span class="pl-c1">reversed</span>(colors):
    <span class="pl-c1">print</span> color</pre></div>

<h2><a id="user-content-looping-over-a-collection-and-indices" class="anchor" href="#looping-over-a-collection-and-indices" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Looping over a collection and indices</h2>

<div class="highlight highlight-source-python"><pre>colors <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>]

<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">len</span>(colors)):
    <span class="pl-c1">print</span> i, <span class="pl-s"><span class="pl-pds">'</span>---&gt;<span class="pl-pds">'</span></span>, colors[i]</pre></div>

<h3><a id="user-content-better-3" class="anchor" href="#better-3" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> i, color <span class="pl-k">in</span> <span class="pl-c1">enumerate</span>(colors):
    <span class="pl-c1">print</span> i, <span class="pl-s"><span class="pl-pds">'</span>---&gt;<span class="pl-pds">'</span></span>, color</pre></div>

<blockquote>
<p>It's fast and beautiful and saves you from tracking the individual indices and incrementing them.</p>

<p>Whenever you find yourself manipulating indices [in a collection], you're probably doing it wrong.</p>
</blockquote>

<h2><a id="user-content-looping-over-two-collections" class="anchor" href="#looping-over-two-collections" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Looping over two collections</h2>

<div class="highlight highlight-source-python"><pre>names <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>raymond<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rachel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>matthew<span class="pl-pds">'</span></span>]
colors <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>]

n <span class="pl-k">=</span> <span class="pl-c1">min</span>(<span class="pl-c1">len</span>(names), <span class="pl-c1">len</span>(colors))
<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(n):
    <span class="pl-c1">print</span> names[i], <span class="pl-s"><span class="pl-pds">'</span>---&gt;<span class="pl-pds">'</span></span>, colors[i]

<span class="pl-k">for</span> name, color <span class="pl-k">in</span> <span class="pl-c1">zip</span>(names, colors):
    <span class="pl-c1">print</span> name, <span class="pl-s"><span class="pl-pds">'</span>---&gt;<span class="pl-pds">'</span></span>, color</pre></div>

<h3><a id="user-content-better-4" class="anchor" href="#better-4" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> name, color <span class="pl-k">in</span> izip(names, colors):
    <span class="pl-c1">print</span> name, <span class="pl-s"><span class="pl-pds">'</span>---&gt;<span class="pl-pds">'</span></span>, color</pre></div>

<p><code>zip</code> creates a new list in memory and takes more memory. <code>izip</code> is more efficient than <code>zip</code>.
Note: in python 3 <code>izip</code> was renamed to <code>zip</code> and promoted to a builtin replacing the old <code>zip</code>.</p>

<h2><a id="user-content-looping-in-sorted-order" class="anchor" href="#looping-in-sorted-order" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Looping in sorted order</h2>

<div class="highlight highlight-source-python"><pre>colors <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>]

<span class="pl-c"># Forward sorted order</span>
<span class="pl-k">for</span> color <span class="pl-k">in</span> <span class="pl-c1">sorted</span>(colors):
    <span class="pl-c1">print</span> colors

<span class="pl-c"># Backwards sorted order</span>
<span class="pl-k">for</span> color <span class="pl-k">in</span> <span class="pl-c1">sorted</span>(colors, <span class="pl-v">reverse</span><span class="pl-k">=</span><span class="pl-c1">True</span>):
    <span class="pl-c1">print</span> colors</pre></div>

<h2><a id="user-content-custom-sort-order" class="anchor" href="#custom-sort-order" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Custom Sort Order</h2>

<div class="highlight highlight-source-python"><pre>colors <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>yellow<span class="pl-pds">'</span></span>]

<span class="pl-k">def</span> <span class="pl-en">compare_length</span>(<span class="pl-smi">c1</span>, <span class="pl-smi">c2</span>):
    <span class="pl-k">if</span> <span class="pl-c1">len</span>(c1) <span class="pl-k">&lt;</span> <span class="pl-c1">len</span>(c2): <span class="pl-k">return</span> <span class="pl-k">-</span><span class="pl-c1">1</span>
    <span class="pl-k">if</span> <span class="pl-c1">len</span>(c1) <span class="pl-k">&gt;</span> <span class="pl-c1">len</span>(c2): <span class="pl-k">return</span> <span class="pl-c1">1</span>
    <span class="pl-k">return</span> <span class="pl-c1">0</span>

<span class="pl-c1">print</span> <span class="pl-c1">sorted</span>(colors, <span class="pl-v">cmp</span><span class="pl-k">=</span>compare_length)</pre></div>

<h3><a id="user-content-better-5" class="anchor" href="#better-5" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-c1">print</span> <span class="pl-c1">sorted</span>(colors, <span class="pl-v">key</span><span class="pl-k">=</span><span class="pl-c1">len</span>)</pre></div>

<p>The original is slow and unpleasant to write. Also, comparison functions are no longer available in python 3.</p>

<h2><a id="user-content-call-a-function-until-a-sentinel-value" class="anchor" href="#call-a-function-until-a-sentinel-value" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Call a function until a sentinel value</h2>

<div class="highlight highlight-source-python"><pre>blocks <span class="pl-k">=</span> []
<span class="pl-k">while</span> <span class="pl-c1">True</span>:
    block <span class="pl-k">=</span> f.read(<span class="pl-c1">32</span>)
    <span class="pl-k">if</span> block <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>:
        <span class="pl-k">break</span>
    blocks.append(block)</pre></div>

<h3><a id="user-content-better-6" class="anchor" href="#better-6" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre>blocks <span class="pl-k">=</span> []
<span class="pl-k">for</span> block <span class="pl-k">in</span> <span class="pl-c1">iter</span>(partial(f.read, <span class="pl-c1">32</span>), <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>):
    blocks.append(block)</pre></div>

<p><code>iter</code> takes two arguments. The first you call over and over again and the second is a sentinel value.</p>

<h2><a id="user-content-distinguishing-multiple-exit-points-in-loops" class="anchor" href="#distinguishing-multiple-exit-points-in-loops" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Distinguishing multiple exit points in loops</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">find</span>(<span class="pl-smi">seq</span>, <span class="pl-smi">target</span>):
    found <span class="pl-k">=</span> <span class="pl-c1">False</span>
    <span class="pl-k">for</span> i, value <span class="pl-k">in</span> <span class="pl-c1">enumerate</span>(seq):
        <span class="pl-k">if</span> value <span class="pl-k">==</span> target:
            found <span class="pl-k">=</span> <span class="pl-c1">True</span>
            <span class="pl-k">break</span>
    <span class="pl-k">if</span> <span class="pl-k">not</span> found:
        <span class="pl-k">return</span> <span class="pl-k">-</span><span class="pl-c1">1</span>
    <span class="pl-k">return</span> i</pre></div>

<h3><a id="user-content-better-7" class="anchor" href="#better-7" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">find</span>(<span class="pl-smi">seq</span>, <span class="pl-smi">target</span>):
    <span class="pl-k">for</span> i, value <span class="pl-k">in</span> <span class="pl-c1">enumerate</span>(seq):
        <span class="pl-k">if</span> value <span class="pl-k">==</span> target:
            <span class="pl-k">break</span>
    <span class="pl-k">else</span>:
        <span class="pl-k">return</span> <span class="pl-k">-</span><span class="pl-c1">1</span>
    <span class="pl-k">return</span> i</pre></div>

<p>Inside of every <code>for</code> loop is an <code>else</code>.</p>

<h2><a id="user-content-looping-over-dicitonary-keys" class="anchor" href="#looping-over-dicitonary-keys" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Looping over dicitonary keys</h2>

<div class="highlight highlight-source-python"><pre>d <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>matthew<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rachel<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>raymond<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>}

<span class="pl-k">for</span> k <span class="pl-k">in</span> d:
    <span class="pl-c1">print</span> k

<span class="pl-k">for</span> k <span class="pl-k">in</span> d.keys():
    <span class="pl-k">if</span> k.startswith(<span class="pl-s"><span class="pl-pds">'</span>r<span class="pl-pds">'</span></span>):
        <span class="pl-k">del</span> d[k]</pre></div>

<p>When should you use the second and not the first? When you're mutating the dictionary.</p>

<blockquote>
<p>If you mutate something while you're iterating over it, you're living in a state of sin and deserve what ever happens to you.</p>
</blockquote>

<p><code>d.keys()</code> makes a copy of all the keys and stores them in a list. Then you can modify the dictionary.
Note: in python 3 to iterate through a dictionary you have to explicidly write: <code>list(d.keys())</code> because <code>d.keys()</code> returns a "dictionary view" (an iterable that provide a dynamic view on the dictionary’s keys). See <a href="https://docs.python.org/3/library/stdtypes.html#dict-views">documentation</a>.</p>

<h2><a id="user-content-looping-over-dicitonary-keys-and-values" class="anchor" href="#looping-over-dicitonary-keys-and-values" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Looping over dicitonary keys and values</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Not very fast, has to re-hash every key and do a lookup</span>
<span class="pl-k">for</span> k <span class="pl-k">in</span> d:
    <span class="pl-c1">print</span> k, <span class="pl-s"><span class="pl-pds">'</span>---&gt;<span class="pl-pds">'</span></span>, d[k]

<span class="pl-c"># Makes a big huge list</span>
<span class="pl-k">for</span> k, v <span class="pl-k">in</span> d.items():
    <span class="pl-c1">print</span> k, <span class="pl-s"><span class="pl-pds">'</span>---&gt;<span class="pl-pds">'</span></span>, v</pre></div>

<h3><a id="user-content-better-8" class="anchor" href="#better-8" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> k, v <span class="pl-k">in</span> d.iteritems():
    <span class="pl-c1">print</span> k, <span class="pl-s"><span class="pl-pds">'</span>---&gt;<span class="pl-pds">'</span></span>, v</pre></div>

<p><code>iteritems()</code> is better as it returns an iterator.
Note: in python 3 there is no <code>iteritems()</code> and <code>items()</code> behaviour is close to what <code>iteritems()</code> had. See <a href="https://docs.python.org/3/library/stdtypes.html#dict-views">documentation</a>.</p>

<h2><a id="user-content-construct-a-dictionary-from-pairs" class="anchor" href="#construct-a-dictionary-from-pairs" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Construct a dictionary from pairs</h2>

<div class="highlight highlight-source-python"><pre>names <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>raymond<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rachel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>matthew<span class="pl-pds">'</span></span>]
colors <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>]

d <span class="pl-k">=</span> <span class="pl-c1">dict</span>(izip(names, colors))
<span class="pl-c"># {'matthew': 'blue', 'rachel': 'green', 'raymond': 'red'}</span></pre></div>

<p>For python 3: <code>d = dict(zip(names, colors))</code></p>

<h2><a id="user-content-counting-with-dictionaries" class="anchor" href="#counting-with-dictionaries" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Counting with dictionaries</h2>

<div class="highlight highlight-source-python"><pre>colors <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>]

<span class="pl-c"># Simple, basic way to count. A good start for beginners.</span>
d <span class="pl-k">=</span> {}
<span class="pl-k">for</span> color <span class="pl-k">in</span> colors:
    <span class="pl-k">if</span> color <span class="pl-k">not</span> <span class="pl-k">in</span> d:
        d[color] <span class="pl-k">=</span> <span class="pl-c1">0</span>
    d[color] <span class="pl-k">+=</span> <span class="pl-c1">1</span>

<span class="pl-c"># {'blue': 1, 'green': 2, 'red': 3}</span></pre></div>

<h3><a id="user-content-better-9" class="anchor" href="#better-9" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre>d <span class="pl-k">=</span> {}
<span class="pl-k">for</span> color <span class="pl-k">in</span> colors:
    d[color] <span class="pl-k">=</span> d.get(color, <span class="pl-c1">0</span>) <span class="pl-k">+</span> <span class="pl-c1">1</span>

<span class="pl-c"># Slightly more modern but has several caveats, better for advanced users</span>
<span class="pl-c"># who understand the intricacies</span>
d <span class="pl-k">=</span> defaultdict(<span class="pl-c1">int</span>)
<span class="pl-k">for</span> color <span class="pl-k">in</span> colors:
d[color] <span class="pl-k">+=</span> <span class="pl-c1">1</span></pre></div>

<h2><a id="user-content-grouping-with-dictionaries----part-i-and-ii" class="anchor" href="#grouping-with-dictionaries----part-i-and-ii" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Grouping with dictionaries -- Part I and II</h2>

<div class="highlight highlight-source-python"><pre>names <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>raymond<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rachel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>matthew<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>roger<span class="pl-pds">'</span></span>,
         <span class="pl-s"><span class="pl-pds">'</span>betty<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>melissa<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>judith<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>charlie<span class="pl-pds">'</span></span>]

<span class="pl-c"># In this example, we're grouping by name length</span>
d <span class="pl-k">=</span> {}
<span class="pl-k">for</span> name <span class="pl-k">in</span> names:
    key <span class="pl-k">=</span> <span class="pl-c1">len</span>(name)
    <span class="pl-k">if</span> key <span class="pl-k">not</span> <span class="pl-k">in</span> d:
        d[key] <span class="pl-k">=</span> []
    d[key].append(name)

<span class="pl-c"># {5: ['roger', 'betty'], 6: ['rachel', 'judith'], 7: ['raymond', 'matthew', 'melissa', 'charlie']}</span>

d <span class="pl-k">=</span> {}
<span class="pl-k">for</span> name <span class="pl-k">in</span> names:
    key <span class="pl-k">=</span> <span class="pl-c1">len</span>(name)
    d.setdefault(key, []).append(name)</pre></div>

<h3><a id="user-content-better-10" class="anchor" href="#better-10" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre>d <span class="pl-k">=</span> defaultdict(<span class="pl-c1">list</span>)
<span class="pl-k">for</span> name <span class="pl-k">in</span> names:
    key <span class="pl-k">=</span> <span class="pl-c1">len</span>(name)
    d[key].append(name)</pre></div>

<h2><a id="user-content-is-a-dictionary-popitem-atomic" class="anchor" href="#is-a-dictionary-popitem-atomic" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Is a dictionary popitem() atomic?</h2>

<div class="highlight highlight-source-python"><pre>d <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>matthew<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>blue<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rachel<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>green<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>raymond<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>}

<span class="pl-k">while</span> d:
    key, value <span class="pl-k">=</span> d.popitem()
    <span class="pl-c1">print</span> key, <span class="pl-s"><span class="pl-pds">'</span>--&gt;<span class="pl-pds">'</span></span>, value</pre></div>

<p><code>popitem</code> is atomic so you don't have to put locks around it to use it in threads.</p>

<h2><a id="user-content-linking-dictionaries" class="anchor" href="#linking-dictionaries" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Linking dictionaries</h2>

<div class="highlight highlight-source-python"><pre>defaults <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">'</span>color<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>red<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>user<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>guest<span class="pl-pds">'</span></span>}
parser <span class="pl-k">=</span> argparse.ArgumentParser()
parser.add_argument(<span class="pl-s"><span class="pl-pds">'</span>-u<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>--user<span class="pl-pds">'</span></span>)
parser.add_argument(<span class="pl-s"><span class="pl-pds">'</span>-c<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>--color<span class="pl-pds">'</span></span>)
namespace <span class="pl-k">=</span> parser.parse_args([])
command_line_args <span class="pl-k">=</span> {k:v <span class="pl-k">for</span> k, v <span class="pl-k">in</span> <span class="pl-c1">vars</span>(namespace).items() <span class="pl-k">if</span> v}

<span class="pl-c"># The common approach below allows you to use defaults at first, then override them</span>
<span class="pl-c"># with environment variables and then finally override them with command line arguments.</span>
<span class="pl-c"># It copies data like crazy, unfortunately.</span>
d <span class="pl-k">=</span> defaults.copy()
d.update(os.environ)
d.update(command_line_args)</pre></div>

<h3><a id="user-content-better-11" class="anchor" href="#better-11" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre>d <span class="pl-k">=</span> ChainMap(command_line_args, os.environ, defaults)</pre></div>

<p><code>ChainMap</code> has been introduced into python 3. Fast and beautiful.</p>

<h2><a id="user-content-improving-clarity" class="anchor" href="#improving-clarity" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Improving Clarity</h2>

<ul>
<li>Positional arguments and indicies are nice</li>
<li>Keywords and names are better</li>
<li>The first way is convenient for the computer</li>
<li>The second corresponds to how human’s think</li>
</ul>

<h2><a id="user-content-clarify-function-calls-with-keyword-arguments" class="anchor" href="#clarify-function-calls-with-keyword-arguments" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Clarify function calls with keyword arguments</h2>

<div class="highlight highlight-source-python"><pre>twitter_search(<span class="pl-s"><span class="pl-pds">'</span>@obama<span class="pl-pds">'</span></span>, <span class="pl-c1">False</span>, <span class="pl-c1">20</span>, <span class="pl-c1">True</span>)</pre></div>

<h3><a id="user-content-better-12" class="anchor" href="#better-12" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre>twitter_search(<span class="pl-s"><span class="pl-pds">'</span>@obama<span class="pl-pds">'</span></span>, <span class="pl-v">retweets</span><span class="pl-k">=</span><span class="pl-c1">False</span>, <span class="pl-v">numtweets</span><span class="pl-k">=</span><span class="pl-c1">20</span>, <span class="pl-v">popular</span><span class="pl-k">=</span><span class="pl-c1">True</span>)</pre></div>

<p>Is slightly (microseconds) slower but is worth it for the code clarity and developer time savings.</p>

<h2><a id="user-content-clarify-multiple-return-values-with-named-tuples" class="anchor" href="#clarify-multiple-return-values-with-named-tuples" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Clarify multiple return values with named tuples</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Old testmod return value</span>
doctest.testmod()
<span class="pl-c"># (0, 4)</span>
<span class="pl-c"># Is this good or bad? You don't know because it's not clear.</span></pre></div>

<h3><a id="user-content-better-13" class="anchor" href="#better-13" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># New testmod return value, a namedTuple</span>
doctest.testmod()
<span class="pl-c"># TestResults(failed=0, attempted=4)</span></pre></div>

<p>A namedTuple is a subclass of tuple so they still work like a regular tuple, but are more friendly.</p>

<p>To make a namedTuple:</p>

<div class="highlight highlight-source-python"><pre>TestResults <span class="pl-k">=</span> namedTuple(<span class="pl-s"><span class="pl-pds">'</span>TestResults<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>failed<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>attempted<span class="pl-pds">'</span></span>])</pre></div>

<h2><a id="user-content-unpacking-sequences" class="anchor" href="#unpacking-sequences" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Unpacking sequences</h2>

<div class="highlight highlight-source-python"><pre>p <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Raymond<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>Hettinger<span class="pl-pds">'</span></span>, <span class="pl-c1"><span class="pl-k">0x</span>30</span>, <span class="pl-s"><span class="pl-pds">'</span>python@example.com<span class="pl-pds">'</span></span>

<span class="pl-c"># A common approach / habit from other languages</span>
fname <span class="pl-k">=</span> p[<span class="pl-c1">0</span>]
lname <span class="pl-k">=</span> p[<span class="pl-c1">1</span>]
age <span class="pl-k">=</span> p[<span class="pl-c1">2</span>]
email <span class="pl-k">=</span> p[<span class="pl-c1">3</span>]</pre></div>

<h3><a id="user-content-better-14" class="anchor" href="#better-14" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre>fname, lname, age, email <span class="pl-k">=</span> p</pre></div>

<p>The second approach uses tuple unpacking and is faster and more readable.</p>

<h2><a id="user-content-updating-multiple-state-variables" class="anchor" href="#updating-multiple-state-variables" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Updating multiple state variables</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">fibonacci</span>(<span class="pl-smi">n</span>):
    x <span class="pl-k">=</span> <span class="pl-c1">0</span>
    y <span class="pl-k">=</span> <span class="pl-c1">1</span>
    <span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(n):
        <span class="pl-c1">print</span> x
        t <span class="pl-k">=</span> y
        y <span class="pl-k">=</span> x <span class="pl-k">+</span> y
        x <span class="pl-k">=</span> t</pre></div>

<h3><a id="user-content-better-15" class="anchor" href="#better-15" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">fibonacci</span>(<span class="pl-smi">n</span>):
    x, y <span class="pl-k">=</span> <span class="pl-c1">0</span>, <span class="pl-c1">1</span>
    <span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(n):
        <span class="pl-c1">print</span> x
        x, y <span class="pl-k">=</span> y, x <span class="pl-k">+</span> y</pre></div>

<p>Problems with first approach</p>

<ul>
<li>x and y are state, and state should be updated all at once or in between lines that state is mis-matched and a common source of issues</li>
<li>ordering matters</li>
<li>it's too low level</li>
</ul>

<p>The second approach is more high-level, doesn't risk getting the order wrong and is fast.</p>

<h2><a id="user-content-simultaneous-state-updates" class="anchor" href="#simultaneous-state-updates" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Simultaneous state updates</h2>

<div class="highlight highlight-source-python"><pre>tmp_x <span class="pl-k">=</span> x <span class="pl-k">+</span> dx <span class="pl-k">*</span> t
tmp_y <span class="pl-k">=</span> y <span class="pl-k">+</span> dy <span class="pl-k">*</span> t
tmp_dx <span class="pl-k">=</span> influence(m, x, y, dx, dy, <span class="pl-v">partial</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>x<span class="pl-pds">'</span></span>)
tmp_dy <span class="pl-k">=</span> influence(m, x, y, dx, dy, <span class="pl-v">partial</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>y<span class="pl-pds">'</span></span>)
x <span class="pl-k">=</span> tmp_x
y <span class="pl-k">=</span> tmp_y
dx <span class="pl-k">=</span> tmp_dx
dy <span class="pl-k">=</span> tmp_dy</pre></div>

<h3><a id="user-content-better-16" class="anchor" href="#better-16" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre>x, y, dx, dy <span class="pl-k">=</span> (x <span class="pl-k">+</span> dx <span class="pl-k">*</span> t,
                y <span class="pl-k">+</span> dy <span class="pl-k">*</span> t,
                influence(m, x, y, dx, dy, <span class="pl-v">partial</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>x<span class="pl-pds">'</span></span>),
                influence(m, x, y, dx, dy, <span class="pl-v">partial</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>y<span class="pl-pds">'</span></span>))</pre></div>

<h2><a id="user-content-efficiency" class="anchor" href="#efficiency" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Efficiency</h2>

<ul>
<li>An optimization fundamental rule</li>
<li>Don’t cause data to move around unnecessarily</li>
<li>It takes only a little care to avoid O(n**2) behavior instead of linear behavior</li>
</ul>

<blockquote>
<p>Basically, just don't move data around unecessarily.</p>
</blockquote>

<h2><a id="user-content-concatenating-strings" class="anchor" href="#concatenating-strings" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Concatenating strings</h2>

<div class="highlight highlight-source-python"><pre>names <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>raymond<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rachel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>matthew<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>roger<span class="pl-pds">'</span></span>,
         <span class="pl-s"><span class="pl-pds">'</span>betty<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>melissa<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>judith<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>charlie<span class="pl-pds">'</span></span>]

s <span class="pl-k">=</span> names[<span class="pl-c1">0</span>]
<span class="pl-k">for</span> name <span class="pl-k">in</span> names[<span class="pl-c1">1</span>:]:
    s <span class="pl-k">+=</span> <span class="pl-s"><span class="pl-pds">'</span>, <span class="pl-pds">'</span></span> <span class="pl-k">+</span> name
<span class="pl-c1">print</span> s</pre></div>

<h3><a id="user-content-better-17" class="anchor" href="#better-17" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>



<h2><a id="user-content-updating-sequences" class="anchor" href="#updating-sequences" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Updating sequences</h2>

<div class="highlight highlight-source-python"><pre>names <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">'</span>raymond<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rachel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>matthew<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>roger<span class="pl-pds">'</span></span>,
         <span class="pl-s"><span class="pl-pds">'</span>betty<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>melissa<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>judith<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>charlie<span class="pl-pds">'</span></span>]

<span class="pl-k">del</span> names[<span class="pl-c1">0</span>]
<span class="pl-c"># The below are signs you're using the wrong data structure</span>
names.pop(<span class="pl-c1">0</span>)
names.insert(<span class="pl-c1">0</span>, <span class="pl-s"><span class="pl-pds">'</span>mark<span class="pl-pds">'</span></span>)</pre></div>

<h3><a id="user-content-better-18" class="anchor" href="#better-18" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre>names <span class="pl-k">=</span> deque([<span class="pl-s"><span class="pl-pds">'</span>raymond<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>rachel<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>matthew<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>roger<span class="pl-pds">'</span></span>,
               <span class="pl-s"><span class="pl-pds">'</span>betty<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>melissa<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>judith<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>charlie<span class="pl-pds">'</span></span>])

<span class="pl-c"># More efficient with deque</span>
<span class="pl-k">del</span> names[<span class="pl-c1">0</span>]
names.popleft()
names.appendleft(<span class="pl-s"><span class="pl-pds">'</span>mark<span class="pl-pds">'</span></span>)</pre></div>

<h2><a id="user-content-decorators-and-context-managers" class="anchor" href="#decorators-and-context-managers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Decorators and Context Managers</h2>

<ul>
<li>Helps separate business logic from administrative logic</li>
<li>Clean, beautiful tools for factoring code and improving code reuse</li>
<li>Good naming is essential.</li>
<li>Remember the Spiderman rule: With great power, comes great responsibility!</li>
</ul>

<h2><a id="user-content-using-decorators-to-factor-out-administrative-logic" class="anchor" href="#using-decorators-to-factor-out-administrative-logic" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Using decorators to factor-out administrative logic</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Mixes business / administrative logic and is not reusable</span>
<span class="pl-k">def</span> <span class="pl-en">web_lookup</span>(<span class="pl-smi">url</span>, <span class="pl-smi">saved</span><span class="pl-k">=</span>{}): <span class="pl-k">if</span> url <span class="pl-k">in</span> saved:
        <span class="pl-k">return</span> saved[url]
    page <span class="pl-k">=</span> urllib.urlopen(url).read()
    saved[url] <span class="pl-k">=</span> page
    <span class="pl-k">return</span> page</pre></div>

<h3><a id="user-content-better-19" class="anchor" href="#better-19" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@cache</span>
<span class="pl-k">def</span> <span class="pl-en">web_lookup</span>(<span class="pl-smi">url</span>):
    <span class="pl-k">return</span> urllib.urlopen(url).read()</pre></div>

<p>Note: since python 3.2 there is a decorator for this in the standard library: <code>functools.lru_cache</code>.</p>

<h2><a id="user-content-factor-out-temporary-contexts" class="anchor" href="#factor-out-temporary-contexts" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Factor-out temporary contexts</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Saving the old, restoring the new</span>
old_context <span class="pl-k">=</span> getcontext().copy()
getcontext().prec <span class="pl-k">=</span> <span class="pl-c1">50</span>
<span class="pl-c1">print</span> Decimal(<span class="pl-c1">355</span>) <span class="pl-k">/</span> Decimal(<span class="pl-c1">113</span>)
setcontext(old_context)</pre></div>

<h3><a id="user-content-better-20" class="anchor" href="#better-20" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">with</span> localcontext(Context(<span class="pl-v">prec</span><span class="pl-k">=</span><span class="pl-c1">50</span>)):
    <span class="pl-c1">print</span> Decimal(<span class="pl-c1">355</span>) <span class="pl-k">/</span> Decimal(<span class="pl-c1">113</span>)</pre></div>

<h2><a id="user-content-how-to-open-and-close-files" class="anchor" href="#how-to-open-and-close-files" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How to open and close files</h2>

<div class="highlight highlight-source-python"><pre>f <span class="pl-k">=</span> <span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">'</span>data.txt<span class="pl-pds">'</span></span>)
<span class="pl-k">try</span>:
    data <span class="pl-k">=</span> f.read()
<span class="pl-k">finally</span>:
    f.close()</pre></div>

<h3><a id="user-content-better-21" class="anchor" href="#better-21" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">with</span> <span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">'</span>data.txt<span class="pl-pds">'</span></span>) <span class="pl-k">as</span> f:
    data <span class="pl-k">=</span> f.read()</pre></div>

<h2><a id="user-content-how-to-use-locks" class="anchor" href="#how-to-use-locks" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>How to use locks</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Make a lock</span>
lock <span class="pl-k">=</span> threading.Lock()

<span class="pl-c"># Old-way to use a lock</span>
lock.acquire()
<span class="pl-k">try</span>:
    <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">'</span>Critical section 1<span class="pl-pds">'</span></span>
    <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">'</span>Critical section 2<span class="pl-pds">'</span></span>
<span class="pl-k">finally</span>:
    lock.release()</pre></div>

<h3><a id="user-content-better-22" class="anchor" href="#better-22" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># New-way to use a lock</span>
<span class="pl-k">with</span> lock:
    <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">'</span>Critical section 1<span class="pl-pds">'</span></span>
    <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">'</span>Critical section 2<span class="pl-pds">'</span></span></pre></div>

<h2><a id="user-content-factor-out-temporary-contexts-1" class="anchor" href="#factor-out-temporary-contexts-1" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Factor-out temporary contexts</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-k">try</span>:
    os.remove(<span class="pl-s"><span class="pl-pds">'</span>somefile.tmp<span class="pl-pds">'</span></span>)
<span class="pl-k">except</span> <span class="pl-c1">OSError</span>:
    <span class="pl-k">pass</span></pre></div>

<h3><a id="user-content-better-23" class="anchor" href="#better-23" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">with</span> ignored(<span class="pl-c1">OSError</span>):
    os.remove(<span class="pl-s"><span class="pl-pds">'</span>somefile.tmp<span class="pl-pds">'</span></span>)</pre></div>

<p><code>ignored</code> is is new in python 3.4, <a href="http://docs.python.org/dev/library/contextlib.html#contextlib.ignored">documentation</a>.
Note: <code>ignored</code> is actually called <code>suppress</code> in the standard library.</p>

<p>To make your own <code>ignored</code> context manager in the meantime:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@contextmanager</span>
<span class="pl-k">def</span> <span class="pl-en">ignored</span>(<span class="pl-k">*</span><span class="pl-smi">exceptions</span>):
    <span class="pl-k">try</span>:
        <span class="pl-k">yield</span>
    <span class="pl-k">except</span> exceptions:
        <span class="pl-k">pass</span></pre></div>

<blockquote>
<p>Stick that in your utils directory and you too can ignore exceptions</p>
</blockquote>

<h2><a id="user-content-factor-out-temporary-contexts-2" class="anchor" href="#factor-out-temporary-contexts-2" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Factor-out temporary contexts</h2>

<div class="highlight highlight-source-python"><pre><span class="pl-c"># Temporarily redirect standard out to a file and then return it to normal</span>
<span class="pl-k">with</span> <span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">'</span>help.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>w<span class="pl-pds">'</span></span>) <span class="pl-k">as</span> f:
    oldstdout <span class="pl-k">=</span> sys.stdout
    sys.stdout <span class="pl-k">=</span> f
    <span class="pl-k">try</span>:
        <span class="pl-c1">help</span>(<span class="pl-c1">pow</span>)
    <span class="pl-k">finally</span>:
        sys.stdout <span class="pl-k">=</span> oldstdout</pre></div>

<h3><a id="user-content-better-24" class="anchor" href="#better-24" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">with</span> <span class="pl-c1">open</span>(<span class="pl-s"><span class="pl-pds">'</span>help.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>w<span class="pl-pds">'</span></span>) <span class="pl-k">as</span> f:
    <span class="pl-k">with</span> redirect_stdout(f):
        <span class="pl-c1">help</span>(<span class="pl-c1">pow</span>)</pre></div>

<p><code>redirect_stdout</code> is proposed for python 3.4, <a href="http://bugs.python.org/issue15805">bug report</a>.</p>

<p>To roll your own <code>redirect_stdout</code> context manager</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@contextmanager</span>
<span class="pl-k">def</span> <span class="pl-en">redirect_stdout</span>(<span class="pl-smi">fileobj</span>):
    oldstdout <span class="pl-k">=</span> sys.stdout
    sys.stdout <span class="pl-k">=</span> fileobj
    <span class="pl-k">try</span>:
        <span class="pl-k">yield</span> fieldobj
    <span class="pl-k">finally</span>:
        sys.stdout <span class="pl-k">=</span> oldstdout</pre></div>

<h2><a id="user-content-concise-expressive-one-liners" class="anchor" href="#concise-expressive-one-liners" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Concise Expressive One-Liners</h2>

<p>Two conflicting rules:</p>

<ul>
<li>Don’t put too much on one line</li>
<li>Don’t break atoms of thought into subatomic particles</li>
</ul>

<p>Raymond’s rule:</p>

<ul>
<li>One logical line of code equals one sentence in English</li>
</ul>

<h2><a id="user-content-list-comprehensions-and-generator-expressions" class="anchor" href="#list-comprehensions-and-generator-expressions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>List Comprehensions and Generator Expressions</h2>

<div class="highlight highlight-source-python"><pre>result <span class="pl-k">=</span> []
<span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">10</span>):
s <span class="pl-k">=</span> i <span class="pl-k">**</span> <span class="pl-c1">2</span>
    result.append(s)
<span class="pl-c1">print</span> <span class="pl-c1">sum</span>(result)</pre></div>

<h3><a id="user-content-better-25" class="anchor" href="#better-25" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Better</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-c1">print</span> <span class="pl-c1">sum</span>(i<span class="pl-k">**</span><span class="pl-c1">2</span> <span class="pl-k">for</span> i <span class="pl-k">in</span> <span class="pl-v">xrange</span>(<span class="pl-c1">10</span>))</pre></div>

<p>First way tells you what to do, second way tells you what you want.</p>
</article>
  </div></body></html>