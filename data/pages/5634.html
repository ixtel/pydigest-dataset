<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-flask-cloudy" class="anchor" href="#flask-cloudy" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Flask-Cloudy</h1>

<h2><a id="user-content-about" class="anchor" href="#about" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>About</h2>

<p>A Flask extension to <strong>access, upload, download, save and delete</strong> files on cloud storage providers such as: 
AWS S3, Google Storage, Microsoft Azure, Rackspace Cloudfiles, and even Local file system.</p>

<p>For local file storage, it also provides a flask endpoint to access the files.</p>

<p>Version: 0.13.*</p>

<hr/>

<h2><a id="user-content-tldr-quick-example" class="anchor" href="#tldr-quick-example" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>TLDR; Quick Example</h2>

<pre><code>from flask import Flask, request
from flask_cloudy import Storage

app = Flask(__name__)

# Update the config 
app.config.update({
    "STORAGE_PROVIDER": "LOCAL", # Can also be S3, GOOGLE_STORAGE, etc... 
    "STORAGE_KEY": "",
    "STORAGE_SECRET": "",
    "STORAGE_CONTAINER": "./",  # a directory path for local, bucket name of cloud
    "STORAGE_SERVER": True,
    "STORAGE_SERVER_URL": "/files" # The url endpoint to access files on LOCAL provider
})

# Setup storage
storage = Storage()
storage.init_app(app) 

@app.route("/upload", methods=["POST", "GET"]):
def upload():
    if request.method == "POST":
        file = request.files.get("file")
        my_upload = storage.upload(file)

        # some useful properties
        name = my_upload.name
        extension = my_upload.extension
        size = my_upload.size
        url = my_upload.url

        return url

# Pretending the file uploaded is "my-picture.jpg"    
# it will return a url in the format: http://domain.com/files/my-picture.jpg


# A download endpoint, to download the file
@app.route("/download/&lt;path:object_name&gt;"):
def download(object_name):
    my_object = storage.get(object_name)
    if my_object:
        download_url = my_object.download()
        return download_url
    else:   
        abort(404, "File doesn't exist")
</code></pre>

<hr/>

<p>Go to the "example" directory to get a workable flask-cloud example</p>

<hr/>

<h3><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Features:</h3>

<ul>
<li><p>Browse files</p></li>
<li><p>Upload files</p></li>
<li><p>Download files</p></li>
<li><p>Delete files</p></li>
<li><p>Serve files via http</p></li>
</ul>

<h3><a id="user-content-supported-storage" class="anchor" href="#supported-storage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Supported storage:</h3>



<p><strong>Dependecies:</strong> (They will be installed upon setup)</p>



<hr/>

<h2><a id="user-content-install--config" class="anchor" href="#install--config" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Install &amp; Config</h2>

<pre><code>pip install flask-cloudy
</code></pre>

<hr/>

<p>(To use it as standalone, refer to API documentaion below)</p>

<h2><a id="user-content-config-for-flask" class="anchor" href="#config-for-flask" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Config for Flask</h2>

<p>Within your Flask application's settings you can provide the following settings to control
the behavior of Flask-Cloudy</p>

<p><strong>- STORAGE_PROVIDER</strong> (str) </p>

<ul>
<li>LOCAL</li>
<li>S3</li>
<li>S3_US_WEST</li>
<li>S3_US_WEST_OREGON</li>
<li>S3_EU_WEST</li>
<li>S3_AP_SOUTHEAST</li>
<li>S3_AP_NORTHEAST</li>
<li>GOOGLE_STORAGE</li>
<li>AZURE_BLOBS</li>
<li>CLOUDFILES</li>
</ul>

<p><strong>- STORAGE_KEY</strong> (str)</p>

<p>The access key of the cloud storage provider</p>

<p>None for LOCAL</p>

<p><strong>- STORAGE_SECRET</strong> (str)</p>

<p>The access secret  key of the cloud storage provider</p>

<p>None for LOCAL</p>

<p><strong>- STORAGE_CONTAINER</strong> (str)</p>

<p>The <em>BUCKET NAME</em> for cloud storage providers</p>

<p>For <em>LOCAL</em> provider, this is the local directory path </p>

<p><strong>STORAGE_ALLOWED_EXTENSIONS</strong> (list)</p>

<p>List of all extensions to allow</p>

<p>Example: ["png", "jpg", "jpeg", "mp3"]</p>

<p><strong>STORAGE_SERVER</strong> (bool)</p>

<p>For <em>LOCAL</em> provider only. </p>

<p>True to expose the files in the container so they can be accessed</p>

<p>Default: <em>True</em></p>

<p><strong>STORAGE_SERVER_URL</strong> (str)</p>

<p>For <em>LOCAL</em> provider only.</p>

<p>The endpoint to access the files from the local storage. </p>

<p>Default: <em>/files</em></p>

<hr/>

<h2><a id="user-content-api-documention" class="anchor" href="#api-documention" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>API Documention</h2>

<p>Flask-Cloudy is a wrapper around Apache-Libcloud, the Storage class gives you access to Driver and Container of Apache-Libcloud.</p>

<p><em>Lexicon:</em></p>

<p>Object: A file or a file path. </p>

<p>Container: The main directory, or a bucket name containing all the objects</p>

<p>Provider: The method </p>

<p>Storage: </p>

<h3><a id="user-content-flask_cloudystorage" class="anchor" href="#flask_cloudystorage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>flask_cloudy.Storage</h3>

<p>The <strong>Storage</strong> class allows you to access, upload, get an object from the Storage. </p>

<h5><a id="user-content-storageprovider-keynone-secretnone-containernone-allowed_extensionsnone" class="anchor" href="#storageprovider-keynone-secretnone-containernone-allowed_extensionsnone" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Storage(provider, key=None, secret=None, container=None, allowed_extensions=None)</h5>

<ul>
<li><p>provider: the storage provider:</p>

<ul>
<li>LOCAL</li>
<li>S3</li>
<li>S3_US_WEST</li>
<li>S3_US_WEST_OREGON</li>
<li>S3_EU_WEST</li>
<li>S3_AP_SOUTHEAST</li>
<li>S3_AP_NORTHEAST</li>
<li>GOOGLE_STORAGE</li>
<li>AZURE_BLOBS</li>
<li>CLOUDFILES</li>
</ul></li>
<li><p>key: The access key of the cloud storage. None when provider is LOCAL</p></li>
<li><p>secret: The secret access key of the cloud storage. None when provider is LOCAL</p></li>
<li><p>container: </p>

<ul>
<li><p>For cloud storage, use the <strong>BUCKET NAME</strong> </p></li>
<li><p>For LOCAL provider, it's the directory path where to access the files </p></li>
</ul></li>
<li><p>allowed_extensions: List of extensions to upload to upload</p></li>
</ul>

<h5><a id="user-content-storageinit_appapp" class="anchor" href="#storageinit_appapp" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Storage.init_app(app)</h5>

<p>To initiate the Storage via Flask config.</p>

<p>It will also setup a server endpoint when STORAGE_PROVIDER == LOCAL</p>

<pre><code>from flask import Flask, request
from flask_cloudy import Storage

app = Flask(__name__)

# Update the config 
app.config.update({
    "STORAGE_PROVIDER": "LOCAL", # Can also be S3, GOOGLE_STORAGE, etc... 
    "STORAGE_KEY": "",
    "STORAGE_SECRET": "",
    "STORAGE_CONTAINER": "./",  # a directory path for local, bucket name of cloud
    "STORAGE_SERVER": True,
    "STORAGE_SERVER_URL": "/files"
})

# Setup storage
storage = new Storage()
storage.init_app(app) 

@app.route("/upload", methods=["POST", "GET"]):
def upload():
    if request.method == "POST":
        file = request.files.get("file")
        my_upload = storage.upload(file)

        # some useful properties
        name = my_upload.name
        extension = my_upload.extension
        size = my_upload.size
        url = my_upload.url

        return url

# Pretending the file uploaded is "my-picture.jpg"    
# it will return a url in the format: http://domain.com/files/my-picture.jpg
</code></pre>

<h5><a id="user-content-storagegetobject_name" class="anchor" href="#storagegetobject_name" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Storage.get(object_name)</h5>

<p>Get an object in the storage by name, relative to the container.</p>

<p>It will return an instance of <strong>flask_cloudy.Object</strong></p>

<ul>
<li>object_name: The name of the object.</li>
</ul>

<p>Some valid object names, they can contains slashes to indicate it's a directory</p>

<pre><code>- file.txt

- my_dir/file.txt

- my_dir/sub_dir/file.txt
</code></pre>

<p>.</p>

<pre><code>storage = Storage(provider, key, secret, container)
object_name = "hello.txt"
my_object = storage.get(object_name)
</code></pre>

<h5><a id="user-content-storageuploadfile-namenone-prefixnone-allowed_extesion-overwriteflase-publicfalse" class="anchor" href="#storageuploadfile-namenone-prefixnone-allowed_extesion-overwriteflase-publicfalse" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Storage.upload(file, name=None, prefix=None, allowed_extesion=[], overwrite=Flase, public=False)</h5>

<p>To save or upload a file in the container</p>

<ul>
<li><p>file: the string of the file location or a file object</p></li>
<li><p>name: to give the file a new name</p></li>
<li><p>prefix: a name to add in front of the file name. Add a slash at the end of 
prefix to make it a directory otherwise it will just append it to the name</p></li>
<li><p>allowed_extensions: list of extensions</p></li>
<li><p>overwrite: If True it will overwrite existing files, otherwise it will add a uuid in the file name to make it unique</p></li>
<li><p>public: Bool - To set the <strong>acl</strong> to <em>public-read</em> when True, <em>private</em> when False</p></li>
</ul>

<p>.</p>

<pre><code>storage = Storage(provider, key, secret, container)
my_file = "my_dir/readme.md"
</code></pre>

<p><strong>1) This example will upload the file, an assign the object the name of the file</strong></p>

<pre><code>storage.upload(my_file) 
</code></pre>

<p><strong>2) This example will upload the file, an assign the object the name of the file</strong></p>

<pre><code>storage.upload(my_file, name="new_readme")
</code></pre>

<p>The uploaded file will be named: <strong>new_readme.md</strong></p>

<p><strong>3) Put the uploaded file under a different location using <code>prefix</code></strong></p>

<pre><code>storage.upload(my_file, name="new_readme", prefix="my_dir/")
</code></pre>

<p>now the filename becomes <strong>my_dir/new_readme.md</strong></p>

<p>On LOCAL it will create the directory <em>my_dir</em> if it doesn't exist. </p>

<pre><code>storage.upload(my_file, name="new_readme", prefix="my_new_path-")
</code></pre>

<p>now the filename becomes <strong>my_new_path-new_readme.md</strong></p>

<p><strong>4a.) Public upload</strong></p>

<pre><code>storage.upload(my_file, public=True)
</code></pre>

<p><strong>4b.) Private upload</strong></p>

<pre><code>storage.upload(my_file, public=False)
</code></pre>

<h5><a id="user-content-storagecreateobject_name-size0-hashnone-extranone-metda_datanone" class="anchor" href="#storagecreateobject_name-size0-hashnone-extranone-metda_datanone" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Storage.create(object_name, size=0, hash=None, extra=None, metda_data=None)</h5>

<p>Explicitly create an object that may exist already. Usually, when paramameters (name, size, hash, etc...) are already saved, let's say in the database, and you want Storage to manipulate the file. </p>

<pre><code>storage = Storage(provider, key, secret, container)
existing_name = "holla.txt"
existing_size = "8000" # in bytes
new_object = storage.create(object_name=existing_name, size=existing_size)

# Now I can do
url = new_object.url 
size = len(new_object)
</code></pre>

<p><em>It's Pythonic!!!</em></p>

<h5><a id="user-content-iterate-through-all-the-objects-in-the-container" class="anchor" href="#iterate-through-all-the-objects-in-the-container" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Iterate through all the objects in the container</h5>

<p>Each object is an instance on <strong>flask_cloudy.Object</strong></p>

<pre><code>storage = Storage(provider, key, secret, container)
for obj in storage:
    print(obj.name)
</code></pre>

<h5><a id="user-content-get-the-total-objects-in-the-container" class="anchor" href="#get-the-total-objects-in-the-container" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Get the total objects in the container</h5>

<pre><code>storage = Storage(provider, key, secret, container)
total_items = len(storage)
</code></pre>

<h5><a id="user-content-check-to-see-if-an-object-exists-in-the-container" class="anchor" href="#check-to-see-if-an-object-exists-in-the-container" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Check to see if an object exists in the container</h5>

<pre><code>storage = Storage(provider, key, secret, container)
my_file = "hello.txt"

if my_file in storage:
    print("File is in the storage")
</code></pre>

<hr/>

<h3><a id="user-content-flask_cloudyobject" class="anchor" href="#flask_cloudyobject" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>flask_cloudy.Object</h3>

<p>The class <strong>Object</strong> is an entity of an object in the container.</p>

<p>Usually, you will get a cloud object by accessing an object in the container.</p>

<pre><code>storage = Storage(provider, key, secret, container)
my_object = storage.get("my_object.txt")
</code></pre>

<p>Properties:</p>

<h5><a id="user-content-objectname" class="anchor" href="#objectname" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.name</h5>

<p>The name of the object</p>

<h5><a id="user-content-objectsize" class="anchor" href="#objectsize" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.size</h5>

<p>The size in bytes of the object</p>

<h5><a id="user-content-objectextension" class="anchor" href="#objectextension" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.extension</h5>

<p>The extension of the object</p>

<h5><a id="user-content-objecturl" class="anchor" href="#objecturl" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.url</h5>

<p>Return the url of the object</p>

<p>On LOCAL, it will return the url without the domain name ( ie: /files/my-file.jpg )</p>

<p>For cloud providers it will return the full url</p>

<h5><a id="user-content-objectfull_url" class="anchor" href="#objectfull_url" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.full_url</h5>

<p>Returns the full url of the object</p>

<p>Specially for LOCAL provider, it will return the url with the domain.</p>

<p>For cloud providers, it will return the full url just like <strong>Object.url</strong></p>

<h5><a id="user-content-objectsecure_url" class="anchor" href="#objectsecure_url" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.secure_url</h5>

<p>Return a secured url, with <strong>https://</strong> </p>

<h5><a id="user-content-objectpath" class="anchor" href="#objectpath" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.path</h5>

<p>The path of the object relative to the container</p>

<h5><a id="user-content-objectprovider_name" class="anchor" href="#objectprovider_name" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.provider_name</h5>

<p>The provider name: ie: Local, S3,...</p>

<h5><a id="user-content-objecttype" class="anchor" href="#objecttype" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.type</h5>

<p>The type of the object, ie: IMAGE, AUDIO, TEXT,... OTHER</p>

<p>Methods:</p>

<h5><a id="user-content-objectsave_todestination-namenone-overwritefalse-delete_on_failuretrue" class="anchor" href="#objectsave_todestination-namenone-overwritefalse-delete_on_failuretrue" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.save_to(destination, name=None, overwrite=False, delete_on_failure=True)</h5>

<p>To save the object to a local path </p>

<ul>
<li><p>destination: The directory to save the object to</p></li>
<li><p>name: To rename the file in the local directory. Do not put the extension of the file, it will append automatically</p></li>
<li><p>overwrite: bool - To overwrite the file if it exists</p></li>
<li><p>delete_on_failure: bool - To delete the file it fails to save</p></li>
</ul>

<p>.</p>

<pre><code>storage = Storage(provider, key, secret, container)
my_object = storage.get("my_object.txt")
my_new_path = "/my/new/path"
my_new_file = my_object.save_to(my_new_path)

print(my_new_file) # Will print -&gt; /my/new/path/my_object.txt
</code></pre>

<h5><a id="user-content-objectdownload_urltimeout60-namenone" class="anchor" href="#objectdownload_urltimeout60-namenone" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Object.download_url(timeout=60, name=None)</h5>

<p>Return a URL that triggers the browser download of the file. On cloud providers it will return a signed url.</p>

<ul>
<li><p>timeout: int - The time in seconds to give access to the url</p></li>
<li><p>name: str - for LOCAL only, to rename the file being downloaded</p></li>
</ul>

<p>.</p>

<pre><code>storage = Storage(provider, key, secret, container)
my_object = storage.get("my_object.txt")
download_url = my_object.download_url() 

# or with flask

@app.route("/download/&lt;path:object_name&gt;"):
def download(object_name):
    my_object = storage.get(object_name)
    if my_object:
        download_url = my_object.download_url()
        return redirect(download_url)
    else:   
        abort(404, "File doesn't exist")
</code></pre>

<hr/>

<p>I hope you find this library useful, enjoy!</p>

<p>Mardix :) </p>

<hr/>

<p>License: MIT - Copyright 2015 Mardix</p>
</article>
  </div></body></html>