<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-astrid" class="anchor" href="#astrid" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>astrid</h1>
<a href="https://travis-ci.org/Parkayun/astrid"><img alt="Build Status" src="https://camo.githubusercontent.com/cffa764432fb4fb6404e540e65eb5dab8bd3f9e6/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f5061726b6179756e2f6173747269642e7376673f6272616e63683d6d6173746572" data-canonical-src="https://secure.travis-ci.org/Parkayun/astrid.svg?branch=master"/></a>
<a href="https://coveralls.io/r/Parkayun/astrid"><img alt="Coverage Status" src="https://camo.githubusercontent.com/fe3b0c1eb2aef92ffbd056634c5b718415f511c1/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f5061726b6179756e2f6173747269642e737667" data-canonical-src="https://img.shields.io/coveralls/Parkayun/astrid.svg"/>
</a>
<p>A simple web framework based on aiohttp.</p>
<a name="user-content-installing"/>
<h2><a id="user-content-installing" class="anchor" href="#installing" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installing</h2>
<p>This is under development, You should install via Github.</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-k">~</span> $ pip install git+https://github.com/Parkayun/astrid.git</pre></div>
<a name="user-content-quick-start"/>
<h2><a id="user-content-quick-start" class="anchor" href="#quick-start" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Quick start</h2>
<p>app.py</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> os

<span class="pl-k">from</span> astrid <span class="pl-k">import</span> Astrid

<span class="pl-k">from</span> sample <span class="pl-k">import</span> container


<span class="pl-c1">BASE_DIR</span> <span class="pl-k">=</span> os.path.dirname(os.path.abspath(<span class="pl-c1">__file__</span>))
<span class="pl-c1">TEMPLATES</span> <span class="pl-k">=</span> os.path.join(<span class="pl-c1">BASE_DIR</span>, <span class="pl-s"><span class="pl-pds">'</span>templates<span class="pl-pds">'</span></span>)

astrid <span class="pl-k">=</span> Astrid(<span class="pl-v">template_path</span><span class="pl-k">=</span><span class="pl-c1">TEMPLATES</span>)

astrid.register_container(container, <span class="pl-v">prefix</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>/test<span class="pl-pds">'</span></span>)

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:
    astrid.run()</pre></div>
<p>sample.py</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> astrid.http <span class="pl-k">import</span> render, response
<span class="pl-k">from</span> astrid.utils <span class="pl-k">import</span> MessageType
<span class="pl-k">from</span> astrid.container <span class="pl-k">import</span> Container


container <span class="pl-k">=</span> Container()


<span class="pl-en">@container.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">index_handler</span>(<span class="pl-smi">request</span>):
    <span class="pl-k">return</span> response(<span class="pl-s"><span class="pl-pds">"</span>Hello 세계<span class="pl-pds">"</span></span>)

<span class="pl-en">@container.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/json<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">json_handler</span>(<span class="pl-smi">request</span>):
    <span class="pl-k">return</span> response({<span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>세계<span class="pl-pds">"</span></span>})

<span class="pl-en">@container.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/render<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">render_handler</span>(<span class="pl-smi">request</span>):
    <span class="pl-k">return</span> render(<span class="pl-s"><span class="pl-pds">'</span>index.html<span class="pl-pds">'</span></span>, {<span class="pl-s"><span class="pl-pds">'</span>message<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>})

<span class="pl-en">@container.route</span>(<span class="pl-s"><span class="pl-pds">'</span>/ws<span class="pl-pds">'</span></span>, <span class="pl-v">is_websocket</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
<span class="pl-k">def</span> <span class="pl-en">websocket_handler</span>(<span class="pl-smi">request</span>, <span class="pl-smi">ws</span>):
    ws.prepare(request)
    <span class="pl-k">for</span> msg <span class="pl-k">in</span> ws:
        <span class="pl-k">if</span> msg.tp <span class="pl-k">==</span> MessageType.text:
            <span class="pl-k">if</span> msg.data <span class="pl-k">!=</span> <span class="pl-s"><span class="pl-pds">"</span>close<span class="pl-pds">"</span></span>:
                ws.send_str(<span class="pl-s"><span class="pl-pds">"</span>Hello Websocket<span class="pl-pds">"</span></span>)
            <span class="pl-k">else</span>:
                ws.close()
        <span class="pl-k">elif</span> msg.tp <span class="pl-k">==</span> MessageType.error:
            <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>Exception: <span class="pl-c1">%s</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> ws.exception())
    <span class="pl-k">return</span> ws</pre></div>
<a name="user-content-working-with-gunicorn"/>
<h2><a id="user-content-working-with-gunicorn" class="anchor" href="#working-with-gunicorn" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Working with Gunicorn</h2>
<div class="highlight highlight-source-shell"><pre><span class="pl-k">~</span> $ gunicorn app:astrid.app --worker-class aiohttp.worker.GunicornWebWorker</pre></div>
<p>Reload</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-k">~</span> $ <span class="pl-c1">kill</span> -9 {gunicorn pid}</pre></div>

</article>
  </div></body></html>