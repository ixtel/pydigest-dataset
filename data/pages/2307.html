<html><body><div><div class="post_content">
            <p>   Очередной мой перевод полезной статьи найденной pythondigest.ru. Читал как про себя, хотя я и не такой древний ;-)</p>
<p>   Далее перевод поста из блога <noindex><a class="profile-name-link g-profile" rel="nofollow" href="https://plus.google.com/114710737877360929965" target="_blank">David Taylor</a>`a который зовет себя человеком эпохи Возрождения.</noindex></p>
<p>   - - - </p>
<p>   Я програмирую всю свою жизнь, но никогда не работал программистом. Большая часть моих работ были сделаны на Visual Basic, потому что он был для меня наиболее комфортным, а также на некоторых других языках (R, C, JavaScript, и т.д. ... Pascal, AppleScript, гипертекст и другие, которые я узнал в 1979 году, если посмотреть достаточно далеко назад). </p>
<p>Пару лет назад, я решил перейти на Python исключительно, чтобы улучшить свой код. И в результате я заново начал изобретать множество велосипедов, этому я не сильно сопротивлялся, поскольку мне нравится решать головоломки. <br/>Иногда это хорошо, для повышения питонячести (<span><em>owlman: не знаю как по другому перевести - Pythonesque</em></span>), но время от времени я ловил себя на, "ага!" в моментах, когда понимал, что делаю код грубым и избыточным без причины.</p>
<p>   Вот список из десяти Python идиом, которые сделали бы мою жизнь намного легче, найди я их раньше. В этот список не попали некоторые идиомы, такие как списковые и лямбда-функции, которые являются очень питонячими и очень эффективными и замечательными, но их очень трудно не заметить, потому что они часто упоминаются в ответах на StackOverflow! Также не упомянуты '<span><em>x if y else z</em>'</span> конструкции, декораторы и генераторы, потому что я использую их не очень часто.</p>
<p> </p>
<h2 id="1-python-3-style-printing-in-python-2">1. Python 3-стиль вывода в Python 2</h2>
<p>   Одна из вещей, которые заставили меня сосредоточиться на Python 2, это фиаско Python 3. Наконец, я начал с Python 2, потому что большинство библиотек, которые я хотел использовать не были совместимы c Python 3, и я решил, что если мне потребуется, то я хоть и с трудом но переведу свой код позже.<br/><br/>   Но на самом деле, наибольшие различия в повседневном программировании являются печать и деление, в связи с этим я просто использую стиль из будущего. Теперь, когда почти все библиотеки, которые использую в значительной степени являются v3-совместимым, я делаю переключатель в будущее.</p>
<pre><code class="python">mynumber = <span class="number">5</span>

<span class="keyword">print</span> <span class="string">"Python 2:"</span>
<span class="keyword">print</span> <span class="string">"The number is %d"</span> % (mynumber)
<span class="keyword">print</span> mynumber / <span class="number">2</span>,
<span class="keyword">print</span> mynumber // <span class="number">2</span>

<span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function
<span class="keyword">from</span> __future__ <span class="keyword">import</span> division

<span class="keyword">print</span>(<span class="string">'\nPython 3:'</span>)
<span class="keyword">print</span>(<span class="string">"The number is {}"</span>.format(mynumber))
<span class="keyword">print</span>(mynumber / <span class="number">2</span>, end=<span class="string">' '</span>)
<span class="keyword">print</span>(mynumber // <span class="number">2</span>)</code></pre>
<pre><code class="bash"><span class="comment">#Результат:</span>
Python <span class="number">2</span>: 
The number is <span class="number">5</span> 
<span class="number">2</span> <span class="number">2</span>
Python <span class="number">3</span>: 
The number is <span class="number">5</span> 
<span class="number">2.5</span> <span class="number">2</span></code></pre>
<p>Да, и вот пасхальное яйцо для C программистов:</p>
<pre><code class="python"><span class="keyword">from</span> __future__ <span class="keyword">import</span> braces</code></pre>
<pre><code class="bash"><span class="comment">#Результат:</span>
File <span class="string">""</span>, line <span class="number">1</span>
      from __future__ import braces
SyntaxError: not a chance</code></pre>
<p> </p>
<h2 id="2-enumerate-list-">2. enumerate(list)</h2>
<p><span>   Это может показаться очевидным, что можно перебрать список по индексам, но я использовал переменные счетчика или срезы, выполнявшиеся длительное время.</span></p>
<pre><code class="python">mylist = [<span class="string">"It's"</span>, <span class="string">'only'</span>, <span class="string">'a'</span>, <span class="string">'model'</span>]

<span class="keyword">for</span> index, item <span class="keyword">in</span> enumerate(mylist):
    <span class="keyword">print</span>(index, item)</code></pre>
<pre><code class="bash"><span class="comment">#Результат:</span>
<span class="number">0</span> It's 
<span class="number">1</span> only 
<span class="number">2</span> a 
<span class="number">3</span> model</code></pre>
<p> </p>
<h2 id="3-chained-comparison-operators">3. Цепочки операторов сравнения</h2>
<p>   Так как я привык к статически типизированным языкам, то мне никогда не приходило в голову поставить два оператора сравнения в одном выражении. Во многих языках, "4 &gt; 3 &gt; 2" вернется как ложные, потому что (4 &gt; 3) будет оцениваться как логическое, а затем (True &gt; 2) будет оцениваться как ложное.</p>
<pre><code class="python">mynumber = <span class="number">3</span>

<span class="keyword">if</span> <span class="number">4</span> &gt; mynumber &gt; <span class="number">2</span>:
    <span class="keyword">print</span>(<span class="string">"Chained comparison operators work! \n"</span> * <span class="number">3</span>)</code></pre>
<pre><code class="bash"><span class="comment">#Результат:</span>
Chained comparison operators work! 
Chained comparison operators work! 
Chained comparison operators work!</code></pre>
<p> </p>
<h2 id="4-collections-counter">4. collections.Counter</h2>
<p>   Библиотека collections - лучшее, что когда-либо было. Stackoverflow вовремя развернул меня к упорядоченным словарям, но я продолжал использовать снипет для создания словаря с нумерацией вывода результатов в своём коде. Однажды, я открыл для себя использование collections.deque.</p>
<pre><code class="python"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter
<span class="keyword">from</span> random <span class="keyword">import</span> randrange
<span class="keyword">import</span> pprint
mycounter = Counter()
<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):
    random_number = randrange(<span class="number">10</span>)
    mycounter[random_number] += <span class="number">1</span>
<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):
    <span class="keyword">print</span>(i, mycounter[i])</code></pre>
<pre><code class="bash"><span class="comment">#Результат:</span>
<span class="number">0</span> <span class="number">10</span> 
<span class="number">1</span> <span class="number">10</span> 
<span class="number">2</span> <span class="number">13</span> 
<span class="number">3</span> <span class="number">6</span> 
<span class="number">4</span> <span class="number">6</span> 
<span class="number">5</span> <span class="number">11</span> 
<span class="number">6</span> <span class="number">10</span> 
<span class="number">7</span> <span class="number">14</span> 
<span class="number">8</span> <span class="number">12</span> 
<span class="number">9</span> <span class="number">8</span></code></pre>
<p> </p>
<h2 id="5-dict-comprehensions">5. Постижение Dict</h2>
<p>   Посвещение в Python программиста это постижение списков, но в конце концов я понял, что постижение Dict так же полезно - особенно для их реверсирования.</p>
<pre><code class="python">my_phrase = [<span class="string">"No"</span>, <span class="string">"one"</span>, <span class="string">"expects"</span>, <span class="string">"the"</span>, <span class="string">"Spanish"</span>, <span class="string">"Inquisition"</span>]
my_dict = {key: value <span class="keyword">for</span> value, key <span class="keyword">in</span> enumerate(my_phrase)}
<span class="keyword">print</span>(my_dict)
reversed_dict = {value: key <span class="keyword">for</span> key, value <span class="keyword">in</span> my_dict.items()}
<span class="keyword">print</span>(reversed_dict)</code></pre>
<pre><code class="vala"><span class="preprocessor">#Результат:</span>
{<span class="string">'Inquisition'</span>: <span class="number">5</span>, <span class="string">'No'</span>: <span class="number">0</span>, <span class="string">'expects'</span>: <span class="number">2</span>, <span class="string">'one'</span>: <span class="number">1</span>, <span class="string">'Spanish'</span>: <span class="number">4</span>, <span class="string">'the'</span>: <span class="number">3</span>} 
{<span class="number">0</span>: <span class="string">'No'</span>, <span class="number">1</span>: <span class="string">'one'</span>, <span class="number">2</span>: <span class="string">'expects'</span>, <span class="number">3</span>: <span class="string">'the'</span>, <span class="number">4</span>: <span class="string">'Spanish'</span>, <span class="number">5</span>: <span class="string">'Inquisition'</span>}</code></pre>
<p> </p>
<h2>6. Выполнение shell команд с субпроцессами</h2>
<p>   Для работы с файлами я использую библиотеки операционной системы; Теперь я могу даже программным путем вызывать сложные инструменты командной строки, такие как FFmpeg для редактирования видео</p>
<p>   (И да, я использую Windows, как и все мои клиенты. Но у меня есть хороший комплекс стесняться этого!)</p>
<p>   Обратите внимание, что отдельный подпроцесс я бы сделал библиотекой ОС; Просто хотел чтобы все команды были знакомы. И вообще, shell=True это очень плохая идея, я использовал его здесь, так чтобы вывод команды отображался в клетки блокнота IPython. Дети, не пытайтесь повторять это дома!</p>
<pre><code class="python"><span class="keyword">import</span> subprocess
output = subprocess.check_output(<span class="string">'dir'</span>, shell=<span class="built_in">True</span>)
<span class="keyword">print</span>(output)</code></pre>
<pre><code class="bash"><span class="comment">#Результат:</span>
 Volume <span class="keyword">in</span> drive C is OS
 Volume Serial Number is [REDACTED]
 Directory of C:\Users\David\Documents\[REDACTED]

<span class="number">2014</span>-<span class="number">11</span>-<span class="number">26</span>  <span class="number">06</span>:<span class="number">04</span> AM    &lt;DIR&gt;          .
<span class="number">2014</span>-<span class="number">11</span>-<span class="number">26</span>  <span class="number">06</span>:<span class="number">04</span> AM    &lt;DIR&gt;          ..
<span class="number">2014</span>-<span class="number">11</span>-<span class="number">23</span>  <span class="number">11</span>:<span class="number">47</span> AM    &lt;DIR&gt;          .git
<span class="number">2014</span>-<span class="number">11</span>-<span class="number">26</span>  <span class="number">06</span>:<span class="number">06</span> AM    &lt;DIR&gt;          .ipynb_checkpoints
<span class="number">2014</span>-<span class="number">11</span>-<span class="number">23</span>  <span class="number">08</span>:<span class="number">59</span> AM    &lt;DIR&gt;          CCCma
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM            <span class="number">19</span>,<span class="number">450</span> colorbrewdict.py
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM            <span class="number">92</span>,<span class="number">175</span> imagecompare.ipynb
<span class="number">2014</span>-<span class="number">11</span>-<span class="number">23</span>  <span class="number">08</span>:<span class="number">41</span> AM    &lt;DIR&gt;          Japan_Earthquakes
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM             <span class="number">1</span>,<span class="number">100</span> LICENSE
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM             <span class="number">5</span>,<span class="number">263</span> monty_monte.ipynb
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM            <span class="number">31</span>,<span class="number">082</span> pocket_tumblr_reddit_api.ipynb
<span class="number">2014</span>-<span class="number">11</span>-<span class="number">26</span>  <span class="number">06</span>:<span class="number">04</span> AM             <span class="number">3</span>,<span class="number">211</span> README.md
<span class="number">2014</span>-<span class="number">11</span>-<span class="number">26</span>  <span class="number">06</span>:<span class="number">14</span> AM            <span class="number">19</span>,<span class="number">898</span> top_10_python_idioms.ipynb
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM             <span class="number">5</span>,<span class="number">813</span> tree_convert_mega_to_gexf.ipynb
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM             <span class="number">5</span>,<span class="number">453</span> tree_convert_mega_to_json.ipynb
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM             <span class="number">1</span>,<span class="number">211</span> tree_convert_newick_to_json.py
<span class="number">2014</span>-<span class="number">09</span>-<span class="number">03</span>  <span class="number">06</span>:<span class="number">58</span> AM            <span class="number">55</span>,<span class="number">970</span> weather_ML.ipynb
              <span class="number">11</span> File(s)        <span class="number">240</span>,<span class="number">626</span> bytes
               <span class="number">6</span> Dir(s)  <span class="number">180</span>,<span class="number">880</span>,<span class="number">490</span>,<span class="number">496</span> bytes free</code></pre>
<h2 id="7-dict-get-and-iteritems-methods">7. Методы словаря .get() и .iteritems()</h2>
<p>Имеем значение по умолчанию, если ключ не существует, также как enumerate() для списков, вы можете перебрать цепочки ключ - значение в словарях.</p>
<pre><code class="python">my_dict = {<span class="string">'name'</span>: <span class="string">'Lancelot'</span>, <span class="string">'quest'</span>: <span class="string">'Holy Grail'</span>, <span class="string">'favourite_color'</span>: <span class="string">'blue'</span>}

<span class="keyword">print</span>(my_dict.get(<span class="string">'airspeed velocity of an unladen swallow'</span>, <span class="string">'African or European?\n'</span>))

<span class="keyword">for</span> key, value <span class="keyword">in</span> my_dict.iteritems():
    <span class="keyword">print</span>(key, value, sep=<span class="string">": "</span>)</code></pre>
<pre><code class="bash"><span class="comment">#Результат:</span>
African or European?

quest: Holy Grail
name: Lancelot
favourite_color: blue</code></pre>
<p> </p>
<h2 id="8-tuple-unpacking-for-switching-variables">8. Кортеж распаковки для переключения переменных</h2>
<p>   Знаете сколько раз я использовал третью, промежуточную переменную в VB? <span>c = a; a = b; b = c?</span></p>
<pre><code class="python">a = <span class="string">'Spam'</span>
b = <span class="string">'Eggs'</span>

<span class="keyword">print</span>(a, b)

a, b = b, a

<span class="keyword">print</span>(a, b)</code></pre>
<pre><code class="bash"><span class="comment">#Результат</span>
Spam Eggs
Eggs Spam</code></pre>
<p> </p>

<p>Я был в курсе dir(), потому как я полагал, что help() будет делать то же самое, что и в IPython`e? Магическая команда. Она делает намного больше. (Последний раз это сообщение было обновлено после какого-то великого совета от Reddit в /r/python, который, на самом деле, я хотел бы я знать и раньше!)</p>
<pre><code class="python">my_dict = {<span class="string">'That'</span>: <span class="string">'an ex-parrot!'</span>}
    
help(my_dict)</code></pre>
<pre><code class="bash"><span class="comment">#Результат</span>
Help on dict object:

class dict(object)
 |  dict() -&gt; new empty dictionary
 |  dict(mapping) -&gt; new dictionary initialized from a mapping object's
 |      (key, value) pairs
 |  dict(iterable) -&gt; new dictionary initialized as <span class="keyword">if</span> via:
 |      d = {}
 |      <span class="keyword">for</span> k, v <span class="keyword">in</span> iterable:
 |          d[k] = v
 |  dict(**kwargs) -&gt; new dictionary initialized with the name=value pairs
 |      <span class="keyword">in</span> the keyword argument list.  For example:  dict(one=<span class="number">1</span>, two=<span class="number">2</span>)
 |  
 |  Methods defined here:
 |  
 |  __cmp__(...)
 |      x.__cmp__(y) &lt;==&gt; cmp(x,y)
 |  
 |  __contains__(...)
 |      D.__contains__(k) -&gt; True <span class="keyword">if</span> D has a key k, <span class="keyword">else</span> False
 |  
 |  __delitem__(...)
 |      x.__delitem__(y) &lt;==&gt; del x[y]
 |  
 |  __eq__(...)
 |      x.__eq__(y) &lt;==&gt; x==y
 |  
 
[TRUNCATED FOR SPACE]

 |  
 |  update(...)
 |      D.update([E, ]**F) -&gt; None.  Update D from dict/iterable E and F.
 |      If E present and has a .keys() method, does:     <span class="keyword">for</span> k <span class="keyword">in</span> E: D[k] = E[k]
 |      If E present and lacks .keys() method, does:     <span class="keyword">for</span> (k, v) <span class="keyword">in</span> E: D[k] = v
 |      In either case, this is followed by: <span class="keyword">for</span> k <span class="keyword">in</span> F: D[k] = F[k]
 |  
 |  values(...)
 |      D.values() -&gt; list of D's values
 |  
 |  viewitems(...)
 |      D.viewitems() -&gt; a <span class="keyword">set</span>-like object providing a view on D's items
 |  
 |  viewkeys(...)
 |      D.viewkeys() -&gt; a <span class="keyword">set</span>-like object providing a view on D's keys
 |  
 |  viewvalues(...)
 |      D.viewvalues() -&gt; an object providing a view on D's values
 |  
 |  ----------------------------------------------------------------------
 |  Data and other attributes defined here:
 |  
 |  __hash__ = None
 |  
 |  __new__ = 
 |      T.__new__(S, ...) -&gt; a new object with type S, a subtype of T</code></pre>
<p> </p>
<h2 id="10-pep-8-compliant-string-chaining">10. PEP-8 совместимые цепочки кода</h2>
<p><noindex>   <a href="https://www.python.org/dev/peps/pep-0008">PEP8</a></noindex><span> руководство по</span> стилю Python кода. Среди прочего, он рекомендует, чтобы строки кода не были более 80 символов длиной и без пробелов в конце строк.<br/> <br/>   Это может быть достигнуто с помощью комбинации обратных косых черт "\;" круглые скобки "()" с запятыми, ";" или операцией сложения "+", но каждое из этих решений неудобно для многострочных строк. Есть многострочная строка - тройная цитата, но она не влезает без пробелов.</p>
<pre><code class="python">my_long_text = (<span class="string">"We are no longer the knights who say Ni! "</span>
                <span class="string">"We are now the knights who say ekki-ekki-"</span>
                <span class="string">"ekki-p'tang-zoom-boing-z'nourrwringmm!"</span>)
<span class="keyword">print</span>(my_long_text)</code></pre>
<pre><code class="bash"><span class="comment">#Результат</span>
We are no longer the knights who say Ni! We are now the knights who say ekki-ekki-ekki-p'tang-z<br/><span>oom-boing-z'nourrwringmm!</span></code></pre>
<p> </p>
<p><em>Источник на английском: <noindex><a rel="nofollow" href="http://prooffreaderplus.blogspot.ca/2014/11/top-10-python-idioms-i-wished-id.html" target="_blank">prooffreaderplus.blogspot.ca</a></noindex></em></p>
      </div>
</div></body></html>