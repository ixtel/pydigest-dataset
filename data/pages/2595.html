<html><body><div><div class="post-body entry-content">
<p/><p>By </p><a href="http://www.dancingbison.com">Vasudev Ram</a><p/><a href=""/><p/><a href=""/>
<a href="https://github.com/web2py/pydal/blob/master/README.md">pyDAL</a><p> is a pure Python Database Abstraction Layer. So it seems to be something like the lower layer of </p><b>SQLAlchemy</b><p>, i.e. </p><b>SQLAlchemy Core</b><p>, the library that is used by the upper layer, </p><b>SQLAlchemy ORM</b><p>. See </p><a href="http://docs.sqlalchemy.org/en/rel_0_8/">the SQLAlchemy (0.8) documentation</a><p>.
</p><p>
From the </p><a href="https://github.com/web2py/pydal/">pyDAL site</a><p>:
</p><p>
[ It dynamically </p><b>generates the SQL</b><p> in real time using the specified </p><b>dialect for the database back end</b><p>, so that you do not have to write SQL code or learn different SQL dialects (the term SQL is used generically), and your </p><b>code will be portable</b><p> among different types of databases.
</p><p>
pyDAL comes from the original </p><b>web2py's DAL</b><p>, with the aim of being wide-compatible. pyDAL doesn't require web2py and can be used in any Python context. ]
</p><p>
IOW, pyDAL has been separated out into a different project from </p><a href="http://web2py.com/">web2py, a Python web framework</a><p>, of which it was originally a part. 
</p><p>
The use of an </p><a href="http://en.wikipedia.org/wiki/Object-relational_mapping">ORM (Object Relational Mapper)</a><p> vs. writing plain SQL code (vs. using an intermediate option like pyDAL or SQLAlchemy Core), can be </p><b>controversial</b><p>; there are at least some pros and cons on both (or all 3) sides. I've read some about this, and have got some experience with using some of these options in different projects, but am not an expert on which is the best approach, and also, it can vary depending on your project's needs, so I'm not getting into that topic in this post.
</p><p>
pyDAL seems to support many popular databases, mostly SQL ones, but also a NoSQL one or two, and even IMAP. Here is a list, from the site: SQLite, PostgreSQL, MySQL, Oracle, MSSQL, FireBird, DB2, Informix, Ingres, Cubrid, Sybase, Teradata, SAPDB, MongoDB, IMAP.
</p><p>
For some of those databases, it uses </p><b><a href="http://jugad2.blogspot.in/2014/11/pymysql-pure-python-client-library-for.html">PyMySQL</a>, <a href="http://jugad2.blogspot.in/2013/03/pypyodbc-pure-python-odbc-library.html">pyodbc</a> or <a href="http://jugad2.blogspot.in/2014/01/by-vasudev-ram-pdf-firebird-is-cross.html">fbd</a></b><p>, which are all Python database libraries that I had blogged about earlier.
</p><p>
I tried out pyDAL a little, with this simple program, adapted from its documentation:
</p><pre>import sys
import time
from pydal import DAL, Field
db = DAL('sqlite://storage.db')
db.define_table('product', Field('name'))
t1 = time.time()
num_rows = int(sys.argv[1])
for product_number in range(num_rows):
    db.product.insert(name='Product-'.format(str(product_number).zfill(4)))
t2 = time.time()
print "time to insert {} rows = {} seconds".format(num_rows, int(t2 - t1))
query = db.product.name
t1 = time.time()
rows = db(query).select()
for idx, row in enumerate(rows):
    #print idx, row.name
    pass
t2 = time.time()
print "time to select {} rows = {} seconds".format(num_rows, int(t2 - t1))
</pre><p>
It worked, and gave this output:
</p><p>
$ python test_pydal2.py 100000</p><p>
No handlers could be found for logger "web2py"</p><p>
time to insert 100000 rows = 18 seconds</p><p>
time to select 100000 rows = 7 seconds
</p><p>
Note: I first ran it with this statement uncommented:
</p><pre>#print idx, row.name
</pre><p>to confirm that it did select the records, and then commented it and replaced it with "pass" in order to time the select without the overhead of displaying the records to the screen.
</p><p>
I'll check out pyDAL some more, for other commonly needed database operations, and may write about it here.</p><p>
There may be a way to disable that message about a logger.
</p><p>
The timing statements in the code and the time output can be ignored for now, since they are not meaningful without doing a comparison against the same operations done without pyDAL (i.e. just using SQL from Python with the DB API). I will do a comparison later on and blog about it if anything interesting is found.
</p><p>
- </p><a href="http://jugad2.blogspot.in/p/about-vasudev-ram.html">Vasudev Ram - Dancing Bison Enterprises - Python training and consulting</a><p/><p/><p/><b><a href="mailto:vasudevram@gmail.com?subject=Email%20me%20about%20your%20new%20products%20and%20services">Signup to hear about new products or services from me.</a></b> <p/><p/><a href="http://www.dancingbison.com/contact.html">Contact Page</a>

   
<p/>
</div>
</div></body></html>