<html><body><div><div class="content html_format"><p>
      Доброго времени суток, хабровчане!</p>

<img src="https://habrastorage.org/getpro/habr/post_images/208/d6d/e7e/208d6de7ef8762b926d4907b655f6ff2.png"/><p>
Думаю многих из вас когда-либо посещала мысль «вот бы сохранить статьи с Хабра».</p><p>
Такая же мысль посетила и меня два дня назад. Сохранить захотел не просто каждую статью, а только те, что в избранном, да не поштучно, а сразу всё скопом.</p><p>
Первая мысль — надо написать скрипт, который всё это вытянет. Python я </p><a href="http://habrahabr.ru/post/148597/">уже</a> <a href="http://habrahabr.ru/post/171937/">подучил</a><p>, но вот с генерацией PDF на нем сталкиваться ещё не приходилось.
</p><p>
Закручинился я было… Но OpenSource и Хабр спасли меня!
</p><div class="spoiler"><b class="spoiler_title">Краткая суть статьи для тех, кому не интересно много читать</b><div class="spoiler_text"><p>В статье описан доработанный скрипт на Python </p><a href="https://github.com/icoz/fav2pdf">fav2pdf</a><p>.</p><p>
Изначальный автор скрипта </p><a href="http://habrahabr.ru/users/vrtx/" class="user_link">vrtx</a><p>, за что ему большое спасибо.</p><p>
«Usage — лучше тысячи слов!»
</p><pre><code>usage: fav2pdf.py [-h] [-d OUTPUT_DIR] [--from-date FROM_DATE]
                  [--to-date TO_DATE] [--all-in-one]
                  [--only-hubs [ONLY_HUBS [ONLY_HUBS ...]]] [--no-comments]
                  [--no-symlinks]
                  user

Tool for save favorite posts from habrahabr.ru in pdf's or html's

positional arguments:
  user                  habrahabr.ru username

optional arguments:
  -h, --help            show this help message and exit
  -d OUTPUT_DIR, --output-dir OUTPUT_DIR
                        Directory for output
  --from-date FROM_DATE
                        From date
  --to-date TO_DATE     To date
  --all-in-one          Save all posts in one PDF-file
  --only-hubs [ONLY_HUBS [ONLY_HUBS ...]]
                        Save only posts from hubs. For multiple: "--only-hubs
                        Hub1 Hub2 --"
  --no-comments         Dont save comments from posts
  --no-symlinks         Dont create symlinks to posts
  --create-html         Create html's instead of pdf's
  --create-url-list     Just save user.txt with all links
</code></pre>
</div></div>
<a name="habracut"/>
<div class="spoiler"><b class="spoiler_title">Из чего собрана картинка</b><div class="spoiler_text"><p>Ещё раз спасибо Хабру. КДПВ собрана из двух, которые были в статьях </p><a href="http://habrahabr.ru/post/91231/">раз</a><p> и </p><a href="http://habrahabr.ru/post/190364/">два</a><p>.
</p></div></div><p>
После первой мысли меня посетила вторая. Наверняка не я один над этим задумывался. И стал методично обыскивать Хабр в поисках чего-нибудь вкусненького. И довольно быстро наткнулся на </p><a href="http://habrahabr.ru/post/111411/">статью</a><p> товарища </p><a href="http://habrahabr.ru/users/vrtx/" class="user_link">vrtx</a><p>, где он описывал примерно то, что я и хотел.
</p><p>
Но как всегда есть </p><strong>НО</strong><p>:</p><p>
его скрипт </p><em>fav2pdf.py</em><p> собирает все статьи из избранного и сливает их в один PDF, да ещё и без комментариев, а в них часто намного больше ценной информации, чем бывает в самой статье.</p><p>
Мне же хотелось иметь по отдельной PDF-ке на статью. Иметь возможность выбора: с коментариями или без, иметь или нет разбивку по хабам...
</p><p>
Сделав форк скрипта </p><a href="https://github.com/vrtx64/fav2pdf"><em>fav2pdf.py</em></a><p> (за что низкий поклон движению OpenSource), я сначала сделал </p><a href="https://gist.github.com/icoz/8360969">мелкие доработки</a><p>, чтобы всё сохранялось по отдельным файлам. </p><a href="http://habrahabr.ru/post/111411/#comment_7186750">Порадовал автора</a><p> тем, что его наработки кому-то пригодились.
</p><p>
Правда потом мне стало немного стыдно. Я кое-как поправил скрипт и сделал, что было нужно мне. Но не все же хабражители знают python и могут поправить скрипт под свои нужды.
</p><p>
Поэтому я потратил ещё немного времени и допилил скрипт </p><a href="https://github.com/icoz/fav2pdf">fav2pdf</a><p> до вполне себе полезной утилиты.</p><p>
Теперь скрипт дает возможность:</p><p>
 — выбрать директорию, куда можно сохранить pdf (правда для набора pdf'ок будут созданы подпапки posts и hubs)</p><p>
 — задать ограничение по времени (например, сохранить только статьи за 2013 год)</p><p>
 — выбрать сохранять или нет комментарии</p><p>
 — сохранить все в один pdf или разбить на много pdf'ок</p><p>
 — если много pdf'ок, то можно ещё создать рубрикатор из симлинков (подпапки hubs/hub_name с симлинками на posts/post_id.pdf), чтобы можно было легче ориентироваться в коллекции.

</p><div class="spoiler"><b class="spoiler_title">Зависимости скрипта</b><p class="spoiler_text"> Для корректной работы скрипта мне понадобилось через <em>pip</em> (для pyhton2) поставить следующие пакеты:<br/>
 — pisa<br/>
 — reportlab<br/>
 — html5lib<br/>
 — requests<br/>
 — lxml<br/>
</p></div>
<div class="spoiler"><b class="spoiler_title">Параметры командной строки утилиты</b><div class="spoiler_text"><pre><code>usage: fav2pdf.py [-h] [-d OUTPUT_DIR] [--from-date FROM_DATE]
                  [--to-date TO_DATE] [--all-in-one]
                  [--only-hubs [ONLY_HUBS [ONLY_HUBS ...]]] [--no-comments]
                  [--no-symlinks]
                  user

Tool for save favorite posts from habrahabr.ru in pdf's or html's

positional arguments:
  user                  habrahabr.ru username

optional arguments:
  -h, --help            show this help message and exit
  -d OUTPUT_DIR, --output-dir OUTPUT_DIR
                        Directory for output
  --from-date FROM_DATE
                        From date
  --to-date TO_DATE     To date
  --all-in-one          Save all posts in one PDF-file
  --only-hubs [ONLY_HUBS [ONLY_HUBS ...]]
                        Save only posts from hubs. For multiple: "--only-hubs
                        Hub1 Hub2 --"
  --no-comments         Dont save comments from posts
  --no-symlinks         Dont create symlinks to posts
  --create-html         Create html's instead of pdf's
  --create-url-list     Just save user.txt with all links
</code></pre>
</div></div>
<p>
На сим всё. Если кому понравилось, то пользуйтесь на здоровье!</p><p>
Если кому-то чего-то не хватает, то пишите фич-реквест в комментах, по мере сил постараюсь реализовать.
</p><p>
PS. Реализован вывод в html. (В спойлерах обновлены описания командной строки.)</p><p>
PS2. Реализован вывод в txt простого списка url постов. Все ограничения, что вы можете задать из командной строки (даты, хабы), распространяются и на этот список. (В спойлерах обновлены описания командной строки. )

      
      </p><p class="clear"/>
    </div>

    
  </div></body></html>