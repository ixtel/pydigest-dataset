<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-hillary-clinton-emails" class="anchor" href="#hillary-clinton-emails" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>hillary-clinton-emails</h1>

<p><em>This is a work in progress - any help normalizing and extracting this data's much appreciated!</em></p>

<p>This repo contains code to transform <a href="https://foia.state.gov/Search/Results.aspx?collection=Clinton_Email">Hillary Clinton's emails released through the FOIA request</a> from raw PDF documents to CSV files and a SQLite database, making it easier to understand and analyze the documents.</p>

<p><strong><a href="https://www.kaggle.com/c/hillary-clinton-emails/data">A zip of the extracted data is available for download on Kaggle</a></strong>.</p>

<p>Check out some analytics on this data on <strong><a href="https://www.kaggle.com/c/hillary-clinton-emails/scripts">Kaggle Scripts</a></strong>.</p>

<p>Note that conversion is very imprecise: there's plenty of room to improve the PDF conversion, the sender/receiver extraction, and the body text extraction.</p>

<h1><a id="user-content-extracted-data" class="anchor" href="#extracted-data" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Extracted data</h1>

<p>There are five main output files this produces: four CSV files and one SQLite database.</p>

<p>Note that each table contains a numeric <code>Id</code> column. This <code>Id</code> column is only meant to be used to join the tables: it is internally consistent, but each entity may have a different <code>Id</code> when the data's updated.</p>

<h2><a id="user-content-emailscsv" class="anchor" href="#emailscsv" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Emails.csv</h2>

<p>This file currently contains the following fields:</p>

<ul>
<li><strong>Id</strong> - unique identifier for internal reference</li>
<li><strong>DocNumber</strong> - FOIA document number</li>
<li><strong>MetadataSubject</strong> - Email SUBJECT field (from the FOIA metadata)</li>
<li><strong>MetadataTo</strong> - Email TO field (from the FOIA metadata)</li>
<li><strong>MetadataFrom</strong> - Email FROM field (from the FOIA metadata)</li>
<li><strong>SenderPersonId</strong> - PersonId of the email sender (linking to Persons table)</li>
<li><strong>MetadataDateSent</strong> - Date the email was sent (from the FOIA metadata)</li>
<li><strong>MetadataDateReleased</strong> - Date the email was released (from the FOIA metadata)</li>
<li><strong>MetadataPdfLink</strong> - Link to the original PDF document (from the FOIA metadata)</li>
<li><strong>MetadataCaseNumber</strong> - Case number (from the FOIA metadata)</li>
<li><strong>MetadataDocumentClass</strong> - Document class (from the FOIA metadata)</li>
<li><strong>ExtractedSubject</strong> - Email SUBJECT field (extracted from the PDF)</li>
<li><strong>ExtractedTo</strong> - Email TO field (extracted from the PDF)</li>
<li><strong>ExtractedFrom</strong> - Email FROM field (extracted from the PDF)</li>
<li><strong>ExtractedCc</strong> - Email CC field (extracted from the PDF)</li>
<li><strong>ExtractedDateSent</strong> - Date the email was sent (extracted from the PDF)</li>
<li><strong>ExtractedCaseNumber</strong> - Case number (extracted from the PDF)</li>
<li><strong>ExtractedDocNumber</strong> - Doc number (extracted from the PDF)</li>
<li><strong>ExtractedDateReleased</strong> - Date the email was released (extracted from the PDF)</li>
<li><strong>ExtractedReleaseInPartOrFull</strong> - Whether the email was partially censored (extracted from the PDF)</li>
<li><strong>ExtractedBodyText</strong> - Attempt to only pull out the text in the body that the email sender wrote (extracted from the PDF)</li>
<li><strong>RawText</strong> - Raw email text (extracted from the PDF)</li>
</ul>

<h2><a id="user-content-personscsv" class="anchor" href="#personscsv" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Persons.csv</h2>

<ul>
<li><strong>Id</strong> - unique identifier for internal reference</li>
<li><strong>Name</strong> - person's name</li>
</ul>

<h2><a id="user-content-aliasescsv" class="anchor" href="#aliasescsv" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Aliases.csv</h2>

<ul>
<li><strong>Id</strong> - unique identifier for internal reference</li>
<li><strong>Alias</strong> - text in the From/To email fields that refers to the person</li>
<li><strong>PersonId</strong> - person that the alias refers to</li>
</ul>

<h2><a id="user-content-emailreceiverscsv" class="anchor" href="#emailreceiverscsv" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>EmailReceivers.csv</h2>

<ul>
<li><strong>Id</strong> - unique identifier for internal reference</li>
<li><strong>EmailId</strong> - Id of the email</li>
<li><strong>PersonId</strong> - Id of the person that received the email</li>
</ul>

<h2><a id="user-content-databasesqlite" class="anchor" href="#databasesqlite" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>database.sqlite</h2>

<p>This SQLite database contains all of the above tables (Emails, Persons, Aliases, and EmailReceivers) with their corresponding fields. You can see the schema and ingest code under <a href="https://github.com/benhamner/hillary-clinton-emails/blob/master/scripts/sqliteImport.sql">scripts/sqlImport.sql</a></p>

<h1><a id="user-content-contributing-next-steps" class="anchor" href="#contributing-next-steps" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Contributing: next steps</h1>

<ul>
<li>Improve the From/To address extraction mechanisms</li>
<li>Normalize various email address representations to people</li>
<li>Improve the BodyText extraction</li>
</ul>

<h1><a id="user-content-running-the-download-and-extraction-code" class="anchor" href="#running-the-download-and-extraction-code" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Running the download and extraction code</h1>

<p>Running <code>make all</code> in the root directory will download the data (~162mb total) and create the output files, assuming you have all the requirements installed.</p>

<h1><a id="user-content-requirements" class="anchor" href="#requirements" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Requirements</h1>

<p><em>This has only been tested on OS X, it may or may not work on other operating systems.</em></p>

<ul>
<li>python3

</li>
<li>pdftotext (utility to transform a PDF document to text)</li>
<li>GNU make</li>
<li>sqlite3</li>
</ul>

<h1><a id="user-content-references" class="anchor" href="#references" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>References</h1>

<p>The source PDF documents for this repo were downlaoded from the <a href="http://graphics.wsj.com/hillary-clinton-email-documents/">WSJ Clinton Inbox search</a>.</p>

<p>I created this project before I realized the WSJ also open-sourced some code they used to create the Inbox Search. Subsequently, I've included some material from their open source project as well: I used their <a href="https://raw.githubusercontent.com/wsjdata/clinton-email-cruncher/d8dc1916465b90e4147460f9e432cf9cafc8d3b5/HRCEMAIL_names.csv">HRCEMAIL_names.csv</a> to seed <a href="https://github.com/benhamner/hillary-clinton-emails/blob/master/versionedInput/alias_person.csv">alias_person.csv</a>. I also scraped metadata from foia.state.gov in a similar fashion as they did in <a href="https://github.com/wsjdata/clinton-email-cruncher/blob/master/downloadMetadata.py">downloadMetadata.py</a>.</p>
</article>
  </div></body></html>