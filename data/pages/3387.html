<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-bynamodb" class="anchor" href="#bynamodb" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>BynamoDB</h1>
<p>High-Level DynamoDB Interface for Python wrapping Low-Level Interface of boto</p>
<a name="user-content-installation"/>
<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>
<p>From PyPi:</p>
<pre>$ pip install bynamodb
</pre>
<p>From GitHub:</p>
<pre>$ pip install git+https://github.com/teddychoi/BynamoDB#egg=bynamodb
</pre>
<a name="user-content-patch-dynamodbconnection"/>
<h2><a id="user-content-patch-dynamodbconnection" class="anchor" href="#patch-dynamodbconnection" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Patch DynamoDBConnection</h2>
<p>Set DynamoDBConnection default host and port.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> bynamodb.patcher <span class="pl-k">import</span> patch_dynamodb_connection

patch_dynamodb_connection(<span class="pl-v">host</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>localhost<span class="pl-pds">'</span></span>, <span class="pl-v">port</span><span class="pl-k">=</span><span class="pl-c1">8000</span>)</pre></div>
<a name="user-content-model-definition"/>
<h2><a id="user-content-model-definition" class="anchor" href="#model-definition" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Model Definition</h2>
<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> datetime
<span class="pl-k">from</span> bynamodb.attributes <span class="pl-k">import</span> StringAttribute, StringSetAttribute
<span class="pl-k">from</span> bynamodb.indexes <span class="pl-k">import</span> GlobalAllIndex
<span class="pl-k">from</span> bynamodb.model <span class="pl-k">import</span> Model

<span class="pl-k">class</span> <span class="pl-en">Article</span>(<span class="pl-e">Model</span>):
    published_at <span class="pl-k">=</span> StringAttribute(<span class="pl-v">hash_key</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
    <span class="pl-c1">id</span> <span class="pl-k">=</span> StringAttribute(<span class="pl-v">range_key</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
    title <span class="pl-k">=</span> StringAttribute()
    content <span class="pl-k">=</span> StringAttribute()
    author <span class="pl-k">=</span> StringAttribute()
    write_time <span class="pl-k">=</span> StringAttribute(
        <span class="pl-v">default</span><span class="pl-k">=</span><span class="pl-k">lambda</span>: <span class="pl-c1">str</span>(datetime.datetime.now()))
    tags <span class="pl-k">=</span> StringSetAttribute(<span class="pl-v">default</span><span class="pl-k">=</span><span class="pl-c1">set</span>())
    thumbnail <span class="pl-k">=</span> StringAttribute(<span class="pl-v">null</span><span class="pl-k">=</span><span class="pl-c1">True</span>)

    <span class="pl-k">class</span> <span class="pl-en">AuthorIndex</span>(<span class="pl-e">GlobalAllIndex</span>):
        read_throughput <span class="pl-k">=</span> <span class="pl-c1">5</span>
        write_throughput <span class="pl-k">=</span> <span class="pl-c1">5</span>
        hash_key <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>author<span class="pl-pds">'</span></span>
        range_key <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>published_at<span class="pl-pds">'</span></span></pre></div>
<a name="user-content-put-item-get-item"/>
<h2><a id="user-content-put-item--get-item" class="anchor" href="#put-item--get-item" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Put Item &amp; Get Item</h2>
<div class="highlight highlight-source-python"><pre>Article.put_item(
    <span class="pl-v">published_at</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>2014-12-09<span class="pl-pds">'</span></span>,
    <span class="pl-v">id</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>,
    <span class="pl-v">title</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>This is the title<span class="pl-pds">'</span></span>,
    <span class="pl-v">content</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>This is the content<span class="pl-pds">'</span></span>,
    <span class="pl-v">author</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>Bochul Choi<span class="pl-pds">'</span></span>
)
article <span class="pl-k">=</span> Article.get_item(<span class="pl-v">hash_key</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>2014-12-09<span class="pl-pds">'</span></span>, <span class="pl-v">range_key</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>)</pre></div>
<a name="user-content-get-item-from-raw-data"/>
<h2><a id="user-content-get-item-from-raw-data" class="anchor" href="#get-item-from-raw-data" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Get Item from Raw Data</h2>
<p>You can get items from raw data retrieved from boto's low level API</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> boto.dynamodb2.layer1 <span class="pl-k">import</span> DynamoDBConnection

conn <span class="pl-k">=</span> DynamoDBConnection()
raw_data <span class="pl-k">=</span> conn.get_item(
    <span class="pl-s"><span class="pl-pds">'</span>Article<span class="pl-pds">'</span></span>,
    {
        <span class="pl-s"><span class="pl-pds">'</span>published_at<span class="pl-pds">'</span></span>: {<span class="pl-s"><span class="pl-pds">'</span>S<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>2014-12-09<span class="pl-pds">'</span></span>},
        <span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span>: {<span class="pl-s"><span class="pl-pds">'</span>S<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>}
    }
)
article <span class="pl-k">=</span> Article.from_raw_data(raw_data[<span class="pl-s"><span class="pl-pds">'</span>Item<span class="pl-pds">'</span></span>])</pre></div>
<a name="user-content-simple-scan-query"/>
<h2><a id="user-content-simple-scan--query" class="anchor" href="#simple-scan--query" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Simple Scan &amp; Query</h2>
<div class="highlight highlight-source-python"><pre><span class="pl-c"># Scan all articles that the title starts with "Title"</span>
articles <span class="pl-k">=</span> Article.scan(<span class="pl-v">title__startswith</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>Title<span class="pl-pds">'</span></span>)
<span class="pl-c"># Get the total count of matching items</span>
count <span class="pl-k">=</span> articles.count()
<span class="pl-c"># Get the iterator of matching items</span>
items <span class="pl-k">=</span> <span class="pl-c1">iter</span>(articles)

<span class="pl-c"># Query articles that author is "Bochul Choi"</span>
articles <span class="pl-k">=</span> Article.query(<span class="pl-v">author__eq</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>Bochul Choi<span class="pl-pds">'</span></span>, <span class="pl-v">index_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>AuthorIndex<span class="pl-pds">'</span></span>)
<span class="pl-c"># The query result also provide the count method and iterator</span>
count <span class="pl-k">=</span> articles.count()
items <span class="pl-k">=</span> <span class="pl-c1">iter</span>(articles)</pre></div>
<a name="user-content-complex-lookups-in-scan-query"/>
<h2><a id="user-content-complex-lookups-in-scan--query" class="anchor" href="#complex-lookups-in-scan--query" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Complex lookups in Scan &amp; Query</h2>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> bynamodb.filterexps <span class="pl-k">import</span> Contains, <span class="pl-c1">GT</span>

keyword <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>bynamodb<span class="pl-pds">'</span></span>
filter_exp <span class="pl-k">=</span> GT(<span class="pl-s"><span class="pl-pds">'</span>published_at<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>2014-12-01<span class="pl-pds">'</span></span>) <span class="pl-k">&amp;</span> (
    Contains(<span class="pl-s"><span class="pl-pds">'</span>title<span class="pl-pds">'</span></span>, keyword) <span class="pl-k">|</span> Contains(<span class="pl-s"><span class="pl-pds">'</span>content<span class="pl-pds">'</span></span>, keyword.upper()))

<span class="pl-c"># Scan all articles that match the filter expression</span>
articles <span class="pl-k">=</span> Article.scan(filter_exp)

<span class="pl-c"># Query articles that match the filter expression and the author condition</span>
author <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>Bochul Choi<span class="pl-pds">'</span></span>
articles <span class="pl-k">=</span> Atricle.query(<span class="pl-v">author__eq</span><span class="pl-k">=</span>author, <span class="pl-v">filter_builder</span><span class="pl-k">=</span>filter_exp,
                         <span class="pl-v">index_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>AuthorIndex<span class="pl-pds">'</span></span>)</pre></div>
<a name="user-content-batch-writing-batch-reading"/>
<h2><a id="user-content-batch-writing--batch-reading" class="anchor" href="#batch-writing--batch-reading" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Batch Writing &amp; Batch Reading</h2>
<div class="highlight highlight-source-python"><pre><span class="pl-k">with</span> Article.batch_write() <span class="pl-k">as</span> batch:
    batch.put_item({
        <span class="pl-s"><span class="pl-pds">'</span>published_at<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>2015-02-23<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>title<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Article 1<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>content<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>This is the content<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>author<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Bochul Choi<span class="pl-pds">'</span></span>
    })
    batch.put_item({
        <span class="pl-s"><span class="pl-pds">'</span>published_at<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>2015-02-23<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>id<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>2<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>title<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Article 2<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>content<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>This is the content<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>author<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>Bochul Choi<span class="pl-pds">'</span></span>
    })

articles <span class="pl-k">=</span> Article.batch_get(
    (<span class="pl-s"><span class="pl-pds">'</span>2015-02-23<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>),
    (<span class="pl-s"><span class="pl-pds">'</span>2015-02-23<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>2<span class="pl-pds">'</span></span>),
)</pre></div>
<a name="user-content-changelog"/>
<h2><a id="user-content-changelog" class="anchor" href="#changelog" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Changelog</h2>
<dl>
<dt>0.1.6</dt>
<dd><ul>
<li>Fix ResultSet to stop fetching items regardless of the limit param.</li>
</ul>
</dd>
<dt>0.1.5</dt>
<dd><ul>
<li>Add support scan_index_forward and limit pamareter for Query API.</li>
</ul>
</dd>
<dt>0.1.4</dt>
<dd><ul>
<li>Set ExclusiveStartKey as the untransformed LastEvaluatedKey.</li>
</ul>
</dd>
<dt>0.1.3</dt>
<dd><ul>
<li>Model.delete needs to use encoded key.</li>
</ul>
</dd>
<dt>0.1.2</dt>
<dd><ul>
<li>Model.put_item returns created item.</li>
</ul>
</dd>
<dt>0.1.1</dt>
<dd><ul>
<li>NumberAttribute is only saved as number in db.</li>
</ul>
</dd>
</dl>

</article>
  </div></body></html>