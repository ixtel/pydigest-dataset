<html><body><div><div id="content">

            

            
        


            <div class="section">
              <h1>django-db-storage 1.0.2</h1>

              


<p>Custom Database Storage for Django</p>








<a href="https://travis-ci.org/derekkwok/django-db-storage" rel="nofollow"><img src="https://travis-ci.org/derekkwok/django-db-storage.svg?branch=master"/></a>
<a href="https://coveralls.io/github/derekkwok/django-db-storage?branch=master" rel="nofollow"><img src="https://coveralls.io/repos/github/derekkwok/django-db-storage/badge.svg?branch=master"/></a>
<a href="https://badge.fury.io/py/django-db-storage" rel="nofollow"><img src="https://badge.fury.io/py/django-db-storage.svg"/>
</a>
<div id="overview">
<h2>Overview</h2>
<p>Warning: In many cases, storing files in the database is a BAD idea. Your database will easily become bloated and the performance can degrade rapidly. See this <a href="http://programmers.stackexchange.com/questions/150669/is-it-a-bad-practice-to-store-large-files-10-mb-in-a-database" rel="nofollow">StackExchange post</a> for more information.</p>
<p>This is a custom storage backend for storing files in the database instead of the file system and is a drop-in replacement for Django’s FileSystemStorage. Some benefits of this application:</p>
<ul>
<li>no changes needed to existing models, it just works (and if it doesn’t, open a ticket!)</li>
<li>django-admin is implemented and can be used to search, upload, download and manage files</li>
<li>100% code coverage with unit tests</li>
</ul>
<a href="http://i.imgur.com/4g9tmEZ.png" rel="nofollow"><img src="http://i.imgur.com/4g9tmEZt.png"/></a>
<a href="http://i.imgur.com/A2F8xlr.png" rel="nofollow"><img src="http://i.imgur.com/A2F8xlrt.png"/></a>
</div>
<div id="requirements">
<h2>Requirements</h2>
<ul>
<li>Python (2.7, 3.4, 3.5)</li>
<li>Django (1.8, 1.9)</li>
</ul>
</div>
<div id="installation">
<h2>Installation</h2>
<p>Installation using pip:</p>
<pre>$ pip install django-db-storage
</pre>
<p>Update <tt>settings.py</tt></p>
<pre><span class="c1"># Add 'dbstorage' to INSTALLED_APPS</span>
<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'dbstorage'</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># Optionally set DEFAULT_FILE_STORAGE</span>
<span class="n">DEFAULT_FILE_STORAGE</span> <span class="o">=</span> <span class="s1">'dbstorage.storage.DBStorage'</span>

<span class="c1"># Choose a root url for uploaded files</span>
<span class="n">MEDIA_URL</span> <span class="o">=</span> <span class="s1">'/media/'</span>
</pre>
<p>Update <tt>urls.py</tt></p>
<pre><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="n">dbstorage_url</span><span class="p">(),</span>
<span class="p">]</span>
</pre>
<p>Run database migrations</p>
<pre>$ python manage.py migrate
</pre>
</div>
<div id="how-to-use">
<h2>How to Use</h2>
<p>No modification are needed for models to work properly.</p>
<pre><span class="k">def</span> <span class="nf">user_directory_path</span><span class="p">(</span><span class="n">instance</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
    <span class="k">return</span> <span class="s1">'user_{0}/{1}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">instance</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>

    <span class="n">file_field1</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">()</span>
    <span class="n">file_field2</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s1">'uploads/%Y/%m/</span><span class="si">%d</span><span class="s1">/'</span><span class="p">)</span>
    <span class="n">file_field3</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">FileField</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="n">user_directory_path</span><span class="p">)</span>
</pre>
</div>



<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>0</span> downloads in the last week
  </li>
  <li>
    <span>0</span> downloads in the last month
  </li>
</ul>









            </div>


          </div>
          </div></body></html>