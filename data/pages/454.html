<html><body><div><div class="entry-content" itemprop="text"><p>I’d like to wrap up this recent series of pytest fixture posts by presenting my version of some sort of reference.<br/>Since this post is running a bit long, here are some links to the content buried in here.</p>

<p><span id="more-3115"/></p>
<p>Since I’m planning on using this for my own reference, I’ll throw a couple more links in here at the top to stuff I find useful regarding pytest fixtures.</p>

<p>And… while I’m throwing links around, here are the other posts in the series:</p>

<p>I’m trying to keep the examples in this post kind of small-ish.<br/>However, I do run the risk of being too terse. (or too verbose).<br/>It’s also possible that the order I’ve laid things out is odd. I’ve done a lot of copy/paste from code editor and bash window to get this post put together.</p>
<p>Please let me know:</p>
<ul>
<li>if I’ve mucked up some copy/paste and there is something bizarre in here.</li>
<li>if I’ve been too terse or unclear.</li>
<li>if what I’m stating is completely wrong. <strong>Especially this one</strong></li>
<li>if you actually made it to the end without wanting to throw something at me.</li>
</ul>
<h2 id="note-about-common-code">Note about common code</h2>
<p>For all the examples, the test file I’m running has this at the top:</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6c20561716469" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c20561716469-1"><span class="crayon-e">from </span><span class="crayon-e">__future__ </span><span class="crayon-e">import </span><span class="crayon-e">print_function</span></p><p class="crayon-line" id="crayon-56d59731b6c20561716469-2"><span class="crayon-e">import </span><span class="crayon-v">pytest</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>However, I’m not going to copy it into every code block below.<br/>I’m also running each example with: <code/></p>
<p/>

		

<p/>
<p/>
<h2 id="bare">Bare bones example</h2>
<p>Here’s a super basic fixture, and a couple tests that use it. <code/></p>
<p/>

		<div id="crayon-56d59731b6c34150802206" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c34150802206-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c34150802206-2"><span class="crayon-e">def </span><span class="crayon-e">before</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c34150802206-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nbefore each test'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c34150802206-4"><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d59731b6c34150802206-5"><span class="crayon-e">def </span><span class="crayon-e">test_1</span><span class="crayon-sy">(</span><span class="crayon-v">before</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c34150802206-6"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_1()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c34150802206-7"> </p><p class="crayon-line" id="crayon-56d59731b6c34150802206-8"><span class="crayon-e">def </span><span class="crayon-e">test_2</span><span class="crayon-sy">(</span><span class="crayon-v">before</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c34150802206-9"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_2()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>With the default parameters for ‘pytest.fixture()’, the fixture is going to be called for every test that names the fixture in it’s parameter list.<br/>Output: <code/></p>
<p/>

		<div id="crayon-56d59731b6c3b253351150" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c3b253351150-1"><span class="crayon-e">before </span><span class="crayon-st">each</span><span class="crayon-h"> </span><span class="crayon-e">test</span></p><p class="crayon-line" id="crayon-56d59731b6c3b253351150-2"><span class="crayon-e">test_1</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c3b253351150-3"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c3b253351150-4"><span class="crayon-e">before </span><span class="crayon-st">each</span><span class="crayon-h"> </span><span class="crayon-e">test</span></p><p class="crayon-line" id="crayon-56d59731b6c3b253351150-5"><span class="crayon-e">test_2</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c3b253351150-6"><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h2 id="use">Three ways to use a fixture</h2>
<ol>
<li><strong>name it</strong> from the test.<br/> Just like the top example</li>
<li><strong>usefixtures decorator</strong><br/> You can mark a test or a test class with ‘pytest.mark.usefixtures()’ and include a list of fixtures to be used with the test or class of tests.<br/> This is especially convenient when dealing with test classes.<br/> It also is useful when converting unittest classes to use pytest fixtures.<br/> I’ll give an example shortly.</li>
<li><strong>autouse</strong><br/> Powerful, but possibly dangerous.<br/> Covered in the <a href="#autouse">next section</a>.</li>
</ol>
<h3 id="usefixtures">Usefixtures example</h3>
<p>Here’s a quick example of the decorator.<br/>The <a href="#bare">first example</a> can be written like this: <code/></p>
<p/>

		<div id="crayon-56d59731b6c43360917991" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c43360917991-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-v">mark</span><span class="crayon-sy">.</span><span class="crayon-e">usefixtures</span><span class="crayon-sy">(</span><span class="crayon-s">"before"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d59731b6c43360917991-2"><span class="crayon-e">def </span><span class="crayon-e">test_1</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c43360917991-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_1()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c43360917991-4"> </p><p class="crayon-line" id="crayon-56d59731b6c43360917991-5"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-v">mark</span><span class="crayon-sy">.</span><span class="crayon-e">usefixtures</span><span class="crayon-sy">(</span><span class="crayon-s">"before"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d59731b6c43360917991-6"><span class="crayon-e">def </span><span class="crayon-e">test_2</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c43360917991-7"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_2()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>Or, this: <code/></p>
<p/>

		<div id="crayon-56d59731b6c49992884901" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c49992884901-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Test</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c49992884901-2"><span class="crayon-h">    </span><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-v">mark</span><span class="crayon-sy">.</span><span class="crayon-e">usefixtures</span><span class="crayon-sy">(</span><span class="crayon-s">"before"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c49992884901-3"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_1</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c49992884901-4"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_1()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c49992884901-5"> </p><p class="crayon-line" id="crayon-56d59731b6c49992884901-6"><span class="crayon-h">    </span><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-v">mark</span><span class="crayon-sy">.</span><span class="crayon-e">usefixtures</span><span class="crayon-sy">(</span><span class="crayon-s">"before"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c49992884901-7"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_2</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c49992884901-8"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_2()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>Or, this: <code/></p>
<p/>

		<div id="crayon-56d59731b6c4f860194063" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c4f860194063-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-v">mark</span><span class="crayon-sy">.</span><span class="crayon-e">usefixtures</span><span class="crayon-sy">(</span><span class="crayon-s">"before"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c4f860194063-2"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Test</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c4f860194063-3"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_1</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c4f860194063-4"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_1()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c4f860194063-5"> </p><p class="crayon-line" id="crayon-56d59731b6c4f860194063-6"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_2</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c4f860194063-7"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_2()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>All with the same effect.</p>
<h2 id="features">Fixture features</h2>
<p>If I fill in the default parameters for ‘pytest.fixture()’ and add a request param to my fixture, it looks like this, but doesn’t run any different. <code/></p>
<p/>

		<div id="crayon-56d59731b6c55143574948" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c55143574948-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">'function'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-o">=</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">autouse</span><span class="crayon-o">=</span><span class="crayon-t">False</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c55143574948-2"><span class="crayon-e">def </span><span class="crayon-e">before</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c55143574948-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nbefore()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c55143574948-4"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">None</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p> Now lets take a look at these features.</p>

<h3 id="return_value">Return value</h3>
<p>In the <a href="#bare">bare bones example</a>, the fixture returns ‘None’.<br/>That’s becuase it’s just some code I want to run before my test, like traditional setup functions from <a href="http://pythontesting.net/framework/nose/nose-introduction" title="nose tutorial">nose</a> or <a href="http://pythontesting.net/framework/unittest/unittest-introduction" title="unittest tutorial">unittest</a>.</p>
<p>However, you can return anything you want from the fixture function.<br/>If your fixture is setting up some data, or reading a file, or opening a connection to a database, then access to that data or resources is what you ought to return from the fixture.</p>
<p>Returning some data from a fixture. <code/></p>
<p/>

		<div id="crayon-56d59731b6c5e768783338" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c5e768783338-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c5e768783338-2"><span class="crayon-e">def </span><span class="crayon-e">some_data</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c5e768783338-3"><span class="crayon-h">    </span><span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-s">'foo'</span><span class="crayon-o">:</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'bar'</span><span class="crayon-o">:</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'baz'</span><span class="crayon-o">:</span><span class="crayon-cn">3</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d59731b6c5e768783338-4"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">data</span></p><p class="crayon-line" id="crayon-56d59731b6c5e768783338-5"> </p><p class="crayon-line" id="crayon-56d59731b6c5e768783338-6"><span class="crayon-e">def </span><span class="crayon-e">test_foo</span><span class="crayon-sy">(</span><span class="crayon-v">some_data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c5e768783338-7"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">some_data</span><span class="crayon-sy">[</span><span class="crayon-s">'foo'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p><a id="cheese_example">Returning a database object</a>: <code/></p>
<p/>

		<div id="crayon-56d59731b6c64226809259" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-20">20</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-21">21</p><p class="crayon-num" data-line="crayon-56d59731b6c64226809259-22">22</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c64226809259-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-2"><span class="crayon-e">def </span><span class="crayon-e">cheese_db</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n[setup] cheese_db, connect to db'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-4"><span class="crayon-h">    </span><span class="crayon-p"># code to connect to your db </span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-5"><span class="crayon-h">    </span><span class="crayon-v">a_dictionary_for_now</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-s">'Brie'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'No.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'Camenbert'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Ah! We have Camenbert, yessir.'</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-6"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-7"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n[teardown] cheese_db finalizer, disconnect from db'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-8"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-9"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">a_dictionary_for_now</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-10"> </p><p class="crayon-line" id="crayon-56d59731b6c64226809259-11"><span class="crayon-e">def </span><span class="crayon-e">test_cheese_database</span><span class="crayon-sy">(</span><span class="crayon-v">cheese_db</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-12"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_cheese_database()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-13"><span class="crayon-h">    </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">variety </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">.</span><span class="crayon-e">keys</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-14"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'%s : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">variety</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">[</span><span class="crayon-v">variety</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-15"> </p><p class="crayon-line" id="crayon-56d59731b6c64226809259-16"><span class="crayon-e">def </span><span class="crayon-e">test_brie</span><span class="crayon-sy">(</span><span class="crayon-v">cheese_db</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-17"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_brie()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-18"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">[</span><span class="crayon-s">'Brie'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'No.'</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-19"> </p><p class="crayon-line" id="crayon-56d59731b6c64226809259-20"><span class="crayon-e">def </span><span class="crayon-e">test_camenbert</span><span class="crayon-sy">(</span><span class="crayon-v">cheese_db</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-21"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_camenbert()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c64226809259-22"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">[</span><span class="crayon-s">'Camenbert'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">'No.'</span><span class="crayon-h"> </span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h3 id="finalizer">Finalizer is teardown</h3>
<p>In the <a href="#cheese_example">previous code example</a>, the ‘cheese_db’ fixture has this bit of code:</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6c6c954915121" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c6c954915121-1"><span class="crayon-e">def </span><span class="crayon-e">cheese_db</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c6c954915121-2"><span class="crayon-h">    </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c6c954915121-3"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c6c954915121-4"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n[teardown] cheese_db finalizer, disconnect from db'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c6c954915121-5"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c6c954915121-6"><span class="crayon-h">    </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>The ‘fin’ function is acting as the ‘teardown’ for the fixture.<br/>There’s nothing special about the name.<br/>You can name it ‘teardown’ or ‘cheese_db_teardown’ or ‘something_else’.<br/>It doesn’t matter.</p>
<p>The finalizer is called after all of the tests that use the fixture.<br/>If you’ve used <a href="#params">parameterized fixtures</a>, the finalizer is called between instances of the parameterized fixture changes.</p>
<h3 id="scope">Scope</h3>
<p>Scope controls how often a fixture gets called. The default is "function".<br/>Here are the options for scope:</p>
<table>
<tbody>
<tr class="odd">
<td align="left"><strong>function</strong></td>
<td align="left">Run once per test</td>
</tr>
<tr class="even">
<td align="left"><strong>class</strong></td>
<td align="left">Run once per class of tests</td>
</tr>
<tr class="odd">
<td align="left"><strong>module</strong></td>
<td align="left">Run once per module</td>
</tr>
<tr class="even">
<td align="left"><strong>session</strong></td>
<td align="left">Run once per session</td>
</tr>
</tbody>
</table>
<p>Since the default scope is "function", the <a href="#cheese_example">cheese db example</a> will open and close the db for every test. <code/></p>
<p/>

		<div id="crayon-56d59731b6c74774413992" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c74774413992-1"><span class="crayon-sy">[</span><span class="crayon-v">setup</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">connect </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">db</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-2"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_cheese_database</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-3"><span class="crayon-v">Camenbert</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">Ah</span><span class="crayon-o">!</span><span class="crayon-h"> </span><span class="crayon-e">We </span><span class="crayon-e">have </span><span class="crayon-v">Camenbert</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">yessir</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-4"><span class="crayon-v">Brie</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">No</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-5"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-6"><span class="crayon-sy">[</span><span class="crayon-v">teardown</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">cheese_db </span><span class="crayon-v">finalizer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">disconnect </span><span class="crayon-e">from </span><span class="crayon-i">db</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-7"> </p><p class="crayon-line" id="crayon-56d59731b6c74774413992-8"><span class="crayon-sy">[</span><span class="crayon-v">setup</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">connect </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">db</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-9"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_brie</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-10"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-11"><span class="crayon-sy">[</span><span class="crayon-v">teardown</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">cheese_db </span><span class="crayon-v">finalizer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">disconnect </span><span class="crayon-e">from </span><span class="crayon-i">db</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-12"> </p><p class="crayon-line" id="crayon-56d59731b6c74774413992-13"><span class="crayon-sy">[</span><span class="crayon-v">setup</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">connect </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">db</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-14"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_camenbert</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-15"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c74774413992-16"><span class="crayon-sy">[</span><span class="crayon-v">teardown</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">cheese_db </span><span class="crayon-v">finalizer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">disconnect </span><span class="crayon-e">from </span><span class="crayon-v">db</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>This doesn’t really make sense. Especially if connecting is a time consuming operation.</p>
<p>Change the scope: <code/></p>
<p/>

		<div id="crayon-56d59731b6c7c188361800" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c7c188361800-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"module"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c7c188361800-2"><span class="crayon-e">def </span><span class="crayon-e">cheese_db</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c7c188361800-3"><span class="crayon-h">  </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>And let’s re-run it: <code/></p>
<p/>

		<div id="crayon-56d59731b6c82442621851" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c82442621851-1"><span class="crayon-sy">[</span><span class="crayon-v">setup</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">connect </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">db</span></p><p class="crayon-line" id="crayon-56d59731b6c82442621851-2"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_cheese_database</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c82442621851-3"><span class="crayon-v">Camenbert</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">Ah</span><span class="crayon-o">!</span><span class="crayon-h"> </span><span class="crayon-e">We </span><span class="crayon-e">have </span><span class="crayon-v">Camenbert</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">yessir</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c82442621851-4"><span class="crayon-v">Brie</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">No</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c82442621851-5"><span class="crayon-sy">.</span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_brie</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c82442621851-6"><span class="crayon-sy">.</span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_camenbert</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c82442621851-7"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c82442621851-8"><span class="crayon-sy">[</span><span class="crayon-v">teardown</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">cheese_db </span><span class="crayon-v">finalizer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">disconnect </span><span class="crayon-e">from </span><span class="crayon-v">db</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>That’s better.</p>
<h3 id="request_objects">Request objects</h3>
<p>In the <a href="#cheese_example">cheese db example</a>, the fixture includes a request parameter. You need the request parameter to a fixture to add a finilizer.</p>
<p>However, it has other uses too.</p>
<p>In the example below, I’m showing the use (well, printing stuff) of some of the items. See <a href="http://pytest.org/latest/builtin.html#fixtures-and-requests" title="Pytest API:fixtures and requests">pytest API</a> for a full list.</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6c88797337446" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-20">20</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-21">21</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-22">22</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-23">23</p><p class="crayon-num" data-line="crayon-56d59731b6c88797337446-24">24</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c88797337446-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-2"><span class="crayon-e">def </span><span class="crayon-e">my_fixture</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n-----------------'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-4"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'fixturename : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">fixturename</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-5"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'scope       : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">scope</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-6"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'function    : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-t">function</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-7"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'cls         : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">cls</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-8"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'module      : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-9"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'fspath      : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">fspath</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-10"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'-----------------'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-11"> </p><p class="crayon-line" id="crayon-56d59731b6c88797337446-12"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-t">function</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'test_three'</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-13"><span class="crayon-h">        </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">applymarker</span><span class="crayon-sy">(</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-v">mark</span><span class="crayon-sy">.</span><span class="crayon-v">xfail</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-14"> </p><p class="crayon-line" id="crayon-56d59731b6c88797337446-15"><span class="crayon-e">def </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-v">my_fixture</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-16"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_one():'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-17"> </p><p class="crayon-line" id="crayon-56d59731b6c88797337446-18"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">TestClass</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-19"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">my_fixture</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-20"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_two()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-21"> </p><p class="crayon-line" id="crayon-56d59731b6c88797337446-22"><span class="crayon-e">def </span><span class="crayon-e">test_three</span><span class="crayon-sy">(</span><span class="crayon-v">my_fixture</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-23"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_three()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c88797337446-24"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-t">False</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h3 id="params">Params</h3>
<p>An optional parameter to the fixture decorator is ‘params’.<br/>It defaults to ‘None’.</p>
<p>For each value in params, the fixture will be called with request.param filled in with that value.<br/>Tests that use the fixture will be called once FOR EACH value in params.</p>
<h4 id="toy">Toy example</h4>
<p>An example is in order here.</p>
<p>This first example is a silly one, but does show the mechanics, and the utility of both the -v flag and how well py.test deals with failures of parameterized tests.</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6c90200956751" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c90200956751-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c90200956751-2"><span class="crayon-e">def </span><span class="crayon-e">test_data</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c90200956751-3"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">param</span></p><p class="crayon-line" id="crayon-56d59731b6c90200956751-4"> </p><p class="crayon-line" id="crayon-56d59731b6c90200956751-5"><span class="crayon-e">def </span><span class="crayon-e">test_not_2</span><span class="crayon-sy">(</span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c90200956751-6"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_data: %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c90200956751-7"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">test_data</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>This should run ‘test_not_2’ three times, and fail when 2 is passed in.<br/>I’ll run it both without and with the -v flag <code/></p>
<p/>

		<div id="crayon-56d59731b6c97454028103" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-20">20</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-21">21</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-22">22</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-23">23</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-24">24</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-25">25</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-26">26</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-27">27</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-28">28</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-29">29</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-30">30</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-31">31</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-32">32</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-33">33</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-34">34</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-35">35</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-36">36</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-37">37</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-38">38</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-39">39</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-40">40</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-41">41</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-42">42</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-43">43</p><p class="crayon-num" data-line="crayon-56d59731b6c97454028103-44">44</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6c97454028103-1"><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-e">test </span><span class="crayon-v">test_params</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-3"><span class="crayon-e">platform </span><span class="crayon-v">win32</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.4.2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-4"><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-e">items</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-5"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-6"><span class="crayon-v">test_params</span><span class="crayon-sy">.</span><span class="crayon-i">py</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-v">F</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-7"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-8"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">FAILURES</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-9"><span class="crayon-e">________________________________ </span><span class="crayon-v">test_not_2</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">________________________________</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-10"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-11"><span class="crayon-v">test_data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-12"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-13"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_not_2</span><span class="crayon-sy">(</span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-14"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_data: %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-15"><span class="crayon-o">&gt;</span><span class="crayon-h">       </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">test_data</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-16"><span class="crayon-i">E</span><span class="crayon-h">       </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-17"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-18"><span class="crayon-v">test_params</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">10</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">AssertionError</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-19"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">Captured </span><span class="crayon-v">stdout</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-20"><span class="crayon-v">test_data</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-21"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-v">failed</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.02</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-22"><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-v">test</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-v">test_params</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-23"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-24"><span class="crayon-e">platform </span><span class="crayon-v">win32</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.4.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">C</span><span class="crayon-o">:</span><span class="crayon-sy">\</span><span class="crayon-v">Python27</span><span class="crayon-sy">\</span><span class="crayon-v">python2</span><span class="crayon-sy">.</span><span class="crayon-cn">7.exe</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-25"><span class="crayon-i">collecting</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-e">items</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-26"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-27"><span class="crayon-v">test_params</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">8</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test_not_2</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">PASSED</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-28"><span class="crayon-v">test_params</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">8</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test_not_2</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">FAILED</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-29"><span class="crayon-v">test_params</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">8</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test_not_2</span><span class="crayon-sy">[</span><span class="crayon-cn">3</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">PASSED</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-30"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-31"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">FAILURES</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-32"><span class="crayon-e">________________________________ </span><span class="crayon-v">test_not_2</span><span class="crayon-sy">[</span><span class="crayon-cn">2</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">________________________________</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-33"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-34"><span class="crayon-v">test_data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-35"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-36"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_not_2</span><span class="crayon-sy">(</span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-37"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'test_data: %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-38"><span class="crayon-o">&gt;</span><span class="crayon-h">       </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">test_data</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-39"><span class="crayon-i">E</span><span class="crayon-h">       </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-40"> </p><p class="crayon-line" id="crayon-56d59731b6c97454028103-41"><span class="crayon-v">test_params</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">10</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">AssertionError</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-42"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">Captured </span><span class="crayon-v">stdout</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-43"><span class="crayon-v">test_data</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">2</span></p><p class="crayon-line" id="crayon-56d59731b6c97454028103-44"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-v">failed</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.02</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h4 id="real">Real example</h4>
<p>Now for a more real world usage of parameterization, input and expected output.</p>
<p>Here’s a rewrite of the markdown test from the <a href="http://pythontesting.net/framework/pytest/pytest-introduction/#testing_markdown" title="pytest tutorial">pytest introduction</a> post.<br/>The ‘run_markdown’ function is a <a href="http://pythontesting.net/strategy/software-api-cli-interface-adapters" title="software API adapter">software API adapter</a>, which takes care of calling the markdown script on the command line.</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6ca1679964833" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6ca1679964833-19">19</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6ca1679964833-1"><span class="crayon-e">from </span><span class="crayon-e">markdown_adapter </span><span class="crayon-e">import </span><span class="crayon-v">run</span><span class="crayon-sy">_</span>markdown</p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-2"><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-3"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-o">=</span><span class="crayon-sy">[</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-4"><span class="crayon-h">    </span><span class="crayon-p"># tuple with (input, expectedOutput)</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-5"><span class="crayon-h">    </span><span class="crayon-sy">(</span><span class="crayon-s">'regular text'</span><span class="crayon-h">   </span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'regular text&lt;/p&gt;'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-6"><span class="crayon-h">    </span><span class="crayon-sy">(</span><span class="crayon-s">'*em tags*'</span><span class="crayon-h">      </span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;p&gt;&lt;em&gt;em tags&lt;/em&gt;&lt;/p&gt;'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-7"><span class="crayon-h">    </span><span class="crayon-sy">(</span><span class="crayon-s">'**strong tags**'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;p&gt;&lt;strong&gt;strong tags&lt;/strong&gt;&lt;/p&gt;'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-8"><span class="crayon-h">    </span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-9"><span class="crayon-e">def </span><span class="crayon-e">test_data</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-10"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">param</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-11"> </p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-12"><span class="crayon-e">def </span><span class="crayon-e">test_markdown</span><span class="crayon-sy">(</span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-13"><span class="crayon-h">    </span><span class="crayon-sy">(</span><span class="crayon-v">the_input</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">the_expected_output</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">test_data</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-14"><span class="crayon-e">    </span><span class="crayon-v">the_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">run_markdown</span><span class="crayon-sy">(</span><span class="crayon-v">the_input</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-15"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\ntest_markdown():'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-16"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'  input   : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">the_input</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-17"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'  output  : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">the_output</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-18"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'  expected: %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">the_expected_output</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ca1679964833-19"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">the_output</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">the_expected_output</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>The output makes it clear that the one test ‘test_markdown’ is called 3 times.<br/>Of course, the print statements are unnecessary.<br/>I left them in for demo purposes.</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6ca8704275226" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-20">20</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-21">21</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-22">22</p><p class="crayon-num" data-line="crayon-56d59731b6ca8704275226-23">23</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6ca8704275226-1"><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-v">test</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h">  </span><span class="crayon-v">test_markdown</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-3"><span class="crayon-e">platform </span><span class="crayon-v">win32</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.4.2</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-4"><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-e">items</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-5"> </p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-6"><span class="crayon-v">test_markdown</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-7"><span class="crayon-e">test_markdown</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-8"><span class="crayon-h">  </span><span class="crayon-v">input</span><span class="crayon-h">   </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">regular </span><span class="crayon-e">text</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-9"><span class="crayon-e">  </span><span class="crayon-v">output</span><span class="crayon-h">  </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">regular </span><span class="crayon-e">text</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-10"><span class="crayon-e">  </span><span class="crayon-v">expected</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">regular </span><span class="crayon-i">text</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-11"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-12"><span class="crayon-e">test_markdown</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-13"><span class="crayon-h">  </span><span class="crayon-v">input</span><span class="crayon-h">   </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-e">em </span><span class="crayon-e ">tags*</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-14"><span class="crayon-h">  </span><span class="crayon-v">output</span><span class="crayon-h">  </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">em</span><span class="crayon-o">&gt;</span><span class="crayon-e">em </span><span class="crayon-v">tags</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">em</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-15"><span class="crayon-h">  </span><span class="crayon-v">expected</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">em</span><span class="crayon-o">&gt;</span><span class="crayon-e">em </span><span class="crayon-v">tags</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">em</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-16"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-17"><span class="crayon-e">test_markdown</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-18"><span class="crayon-h">  </span><span class="crayon-v">input</span><span class="crayon-h">   </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-e">strong </span><span class="crayon-e ">tags*</span><span class="crayon-o">*</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-19"><span class="crayon-h">  </span><span class="crayon-v">output</span><span class="crayon-h">  </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">strong</span><span class="crayon-o">&gt;</span><span class="crayon-e">strong </span><span class="crayon-v">tags</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">strong</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-20"><span class="crayon-h">  </span><span class="crayon-v">expected</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">strong</span><span class="crayon-o">&gt;</span><span class="crayon-e">strong </span><span class="crayon-v">tags</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">strong</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-21"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-22"> </p><p class="crayon-line" id="crayon-56d59731b6ca8704275226-23"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.11</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>Normally, you don’t need the print statements to see what’s going on.</p>
<p>I’m going to take the print statements out, and change the ‘expected’ string of the last input value to show how py.test is quite helpful in pointing out the data set that fails.</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6caf417866506" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6caf417866506-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-v">params</span><span class="crayon-o">=</span><span class="crayon-sy">[</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-2"><span class="crayon-h">    </span><span class="crayon-p"># tuple with (input, expectedOutput)</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-3"><span class="crayon-h">    </span><span class="crayon-sy">(</span><span class="crayon-s">'regular text'</span><span class="crayon-h">   </span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'regular text&lt;/p&gt;'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-4"><span class="crayon-h">    </span><span class="crayon-sy">(</span><span class="crayon-s">'*em tags*'</span><span class="crayon-h">      </span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;p&gt;&lt;em&gt;em tags&lt;/em&gt;&lt;/p&gt;'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-5"><span class="crayon-h">    </span><span class="crayon-sy">(</span><span class="crayon-s">'**strong tags**'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;p&gt;&lt;strong&gt;strong tags&lt;/em&gt;&lt;/p&gt;'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-6"><span class="crayon-h">    </span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-7"><span class="crayon-e">def </span><span class="crayon-e">test_data</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-8"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">param</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-9"> </p><p class="crayon-line" id="crayon-56d59731b6caf417866506-10"><span class="crayon-e">def </span><span class="crayon-e">test_markdown</span><span class="crayon-sy">(</span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-11"><span class="crayon-h">    </span><span class="crayon-sy">(</span><span class="crayon-v">the_input</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">the_expected_output</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">test_data</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-12"><span class="crayon-e">    </span><span class="crayon-v">the_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">run_markdown</span><span class="crayon-sy">(</span><span class="crayon-v">the_input</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6caf417866506-13"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">the_output</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">the_expected_output</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>output: <code/></p>
<p/>

		<div id="crayon-56d59731b6cb6929453448" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-20">20</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-21">21</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-22">22</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-23">23</p><p class="crayon-num" data-line="crayon-56d59731b6cb6929453448-24">24</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6cb6929453448-1"><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-e">test </span><span class="crayon-v">test_markdown2</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-3"><span class="crayon-e">platform </span><span class="crayon-v">win32</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.4.2</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-4"><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-h"> </span><span class="crayon-e">items</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-5"> </p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-6"><span class="crayon-v">test_markdown2</span><span class="crayon-sy">.</span><span class="crayon-i">py</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-v">F</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-7"> </p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-8"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">FAILURES</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-9"><span class="crayon-e">__________________________ </span><span class="crayon-v">test_markdown</span><span class="crayon-sy">[</span><span class="crayon-v">test_data2</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">__________________________</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-10"> </p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-11"><span class="crayon-v">test_data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">'**strong tags**'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;strong&gt;strong tags&lt;/em&gt;&lt;/p&gt;'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-12"> </p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-13"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">test_markdown</span><span class="crayon-sy">(</span><span class="crayon-v">test_data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-14"><span class="crayon-h">        </span><span class="crayon-sy">(</span><span class="crayon-v">the_input</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">the_expected_output</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">test_data</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-15"><span class="crayon-e">        </span><span class="crayon-v">the_output</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">run_markdown</span><span class="crayon-sy">(</span><span class="crayon-v">the_input</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-16"><span class="crayon-o">&gt;</span><span class="crayon-h">       </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">the_output</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">the_expected</span><span class="crayon-sy">_</span>output</p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-17"><span class="crayon-i">E</span><span class="crayon-h">       </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;p&gt;&lt;strong&gt;s...&lt;/strong&gt;&lt;/p&gt;'</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;p&gt;&lt;strong&gt;st...tags&lt;/em&gt;&lt;/p&gt;'</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-18"><span class="crayon-v">E</span><span class="crayon-h">         </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">p</span><span class="crayon-o">&gt;</span><span class="crayon-o">&lt;</span><span class="crayon-v">strong</span><span class="crayon-o">&gt;</span><span class="crayon-e">strong </span><span class="crayon-v">tags</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">strong</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-19"><span class="crayon-i">E</span><span class="crayon-h">         </span><span class="crayon-sy">?</span><span class="crayon-h">                         </span><span class="crayon-o">^</span><span class="crayon-o">^</span><span class="crayon-o">^</span><span class="crayon-o">^</span><span class="crayon-o">^</span><span class="crayon-o">^</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-20"><span class="crayon-v">E</span><span class="crayon-h">         </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">strong</span><span class="crayon-o">&gt;</span><span class="crayon-e">strong </span><span class="crayon-v">tags</span><span class="crayon-o">&lt;</span><span class="crayon-o">/</span><span class="crayon-v">em</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-21"><span class="crayon-i">E</span><span class="crayon-h">         </span><span class="crayon-sy">?</span><span class="crayon-h">                         </span><span class="crayon-o">^</span><span class="crayon-o">^</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-22"> </p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-23"><span class="crayon-v">test_markdown2</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-o">:</span><span class="crayon-cn">17</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">AssertionError</span></p><p class="crayon-line" id="crayon-56d59731b6cb6929453448-24"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-v">failed</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.11</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h3 id="autouse">Autouse</h3>
<p>An optional parameter to the fixture decorator is ‘autouse’.<br/>It defaults to ‘False’.</p>
<p>With the value of ‘False’, tests that wish to use the fixture need to either name it in their parameter list, or have a use fixtures decorator applied to the test.</p>
<p>See the first two items in section ‘<a href="#use">three ways to use a fixture</a>‘ for more information.</p>
<p>With the value set to ‘True’, all tests in this session just use the fixture automatically.</p>
<p>Yes, <a href="http://en.wikiquote.org/wiki/Stan_Lee">with great power comes great responsibility</a>.</p>
<p>So use it carefully.</p>
<p>However, it is quite handy in places where you would have used the <a href="http://pythontesting.net/framework/pytest/pytest-xunit-style-fixtures/" title="xunit style setup/teardown fixtures">xunit style setup_module</a></p>
<p>For our example, let’s just say I’ve got some reporting code I’d like to run at the top of module and at the top of a test funcion.</p>
<p>The tests themselves don’t need a handle to the fixtures, since they aren’t returning any data.</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6cc0251867773" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6cc0251867773-19">19</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6cc0251867773-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"module"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">autouse</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-2"><span class="crayon-e">def </span><span class="crayon-e">mod_header</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n-----------------'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-4"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'user        : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">getpass</span><span class="crayon-sy">.</span><span class="crayon-e">getuser</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-5"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'module      : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">module</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-6"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'-----------------'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-7"> </p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-8"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"function"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">autouse</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-9"><span class="crayon-e">def </span><span class="crayon-e">func_header</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-10"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n-----------------'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-11"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'function    : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-t">function</span><span class="crayon-sy">.</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-12"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'time        : %s'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-v">time</span><span class="crayon-sy">.</span><span class="crayon-e">asctime</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-13"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'-----------------'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-14"> </p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-15"><span class="crayon-e">def </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-16"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_one()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-17"> </p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-18"><span class="crayon-e">def </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cc0251867773-19"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_two()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>output: <code/></p>
<p/>

		<div id="crayon-56d59731b6cc6851323591" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-20">20</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-21">21</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-22">22</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-23">23</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-24">24</p><p class="crayon-num" data-line="crayon-56d59731b6cc6851323591-25">25</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6cc6851323591-1"><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-v">test</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-v">test_autouse</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-3"><span class="crayon-e">platform </span><span class="crayon-v">win32</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.4.2</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-4"><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">items</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-5"> </p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-6"><span class="crayon-v">test_autouse</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-7"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-8"><span class="crayon-v">user</span><span class="crayon-h">        </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">okken</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-9"><span class="crayon-v">module</span><span class="crayon-h">      </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test_autouse</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-10"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-11"> </p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-12"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-13"><span class="crayon-t">function</span><span class="crayon-h">    </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">test_one</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-14"><span class="crayon-v">time</span><span class="crayon-h">        </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Tue </span><span class="crayon-i">Feb</span><span class="crayon-h"> </span><span class="crayon-cn">04</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-o">:</span><span class="crayon-cn">31</span><span class="crayon-o">:</span><span class="crayon-cn">20</span><span class="crayon-h"> </span><span class="crayon-cn">2014</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-15"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-16"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-17"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-18"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-19"><span class="crayon-t">function</span><span class="crayon-h">    </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">test_two</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-20"><span class="crayon-v">time</span><span class="crayon-h">        </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Tue </span><span class="crayon-i">Feb</span><span class="crayon-h"> </span><span class="crayon-cn">04</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-o">:</span><span class="crayon-cn">31</span><span class="crayon-o">:</span><span class="crayon-cn">20</span><span class="crayon-h"> </span><span class="crayon-cn">2014</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-21"><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">--</span><span class="crayon-o">-</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-22"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-23"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-24"> </p><p class="crayon-line" id="crayon-56d59731b6cc6851323591-25"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.02</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h3 id="multiple">Multiple fixtures</h3>
<p>In the examples I’ve used so far, tests only are using at most one named fixture.<br/>You can use more.</p>
<p>Simple example: <code/></p>
<p/>

		<div id="crayon-56d59731b6ccd209535467" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-20">20</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-21">21</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-22">22</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-23">23</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-24">24</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-25">25</p><p class="crayon-num" data-line="crayon-56d59731b6ccd209535467-26">26</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6ccd209535467-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"module"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-2"><span class="crayon-e">def </span><span class="crayon-e">foo</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nfoo setup - module fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-4"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-5"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'foo teardown - module fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-6"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-7"> </p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-8"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-9"><span class="crayon-e">def </span><span class="crayon-e">bar</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-10"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'bar setup - function fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-11"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-12"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'bar teardown - function fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-13"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-14"> </p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-15"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-16"><span class="crayon-e">def </span><span class="crayon-e">baz</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-17"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'baz setup - function fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-18"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-19"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'baz teardown - function fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-20"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-21"> </p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-22"><span class="crayon-e">def </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-v">foo</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bar</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">baz</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-23"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_one()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-24"> </p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-25"><span class="crayon-e">def </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-v">foo</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bar</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">baz</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ccd209535467-26"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_two()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>output: <code/></p>
<p/>

		<div id="crayon-56d59731b6cd4110884626" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6cd4110884626-20">20</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6cd4110884626-1"><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-v">test</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-v">test_multiple</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-3"><span class="crayon-e">platform </span><span class="crayon-v">win32</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.4.2</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-4"><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">items</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-5"> </p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-6"><span class="crayon-v">test_multiple</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-7"><span class="crayon-e">foo </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">module </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-8"><span class="crayon-e">bar </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-9"><span class="crayon-e">baz </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-10"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-11"><span class="crayon-sy">.</span><span class="crayon-e">baz </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-12"><span class="crayon-e">bar </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-13"><span class="crayon-e">bar </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-14"><span class="crayon-e">baz </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-15"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-16"><span class="crayon-sy">.</span><span class="crayon-e">baz </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-17"><span class="crayon-e">bar </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-18"><span class="crayon-e">foo </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">module </span><span class="crayon-v">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-19"> </p><p class="crayon-line" id="crayon-56d59731b6cd4110884626-20"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.01</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h3 id="modular">Modularity: fixtures using other fixtures</h3>
<p>Tests can use one or more fixture.</p>
<p>Fixtures themselves can also use one or more fixtures.</p>
<p>I’ll rewrite the previous example, but instead of having the tests include all foo, bar, and baz fixtures, I’ll chain them together.</p>
<p>And one more wrinkle, ‘test_two’ will only include ‘bar’.</p>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6cdc038947718" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-18">18</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-19">19</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-20">20</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-21">21</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-22">22</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-23">23</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-24">24</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-25">25</p><p class="crayon-num" data-line="crayon-56d59731b6cdc038947718-26">26</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6cdc038947718-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"module"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-2"><span class="crayon-e">def </span><span class="crayon-e">foo</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\nfoo setup - module fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-4"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-5"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'foo teardown - module fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-6"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-7"> </p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-8"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-9"><span class="crayon-e">def </span><span class="crayon-e">bar</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">foo</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-10"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'bar setup - function fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-11"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-12"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'bar teardown - function fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-13"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-14"> </p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-15"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-16"><span class="crayon-e">def </span><span class="crayon-e">baz</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">bar</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-17"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'baz setup - function fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-18"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">fin</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-19"><span class="crayon-h">        </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'baz teardown - function fixture'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-20"><span class="crayon-h">    </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-e">addfinalizer</span><span class="crayon-sy">(</span><span class="crayon-v">fin</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-21"> </p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-22"><span class="crayon-e">def </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-v">baz</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-23"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_one()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-24"> </p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-25"><span class="crayon-e">def </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-v">bar</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-p"># only use bar</span></p><p class="crayon-line" id="crayon-56d59731b6cdc038947718-26"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_two()'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p>output <code/></p>
<p/>

		<div id="crayon-56d59731b6ce3349757504" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-1">1</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-2">2</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-3">3</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-4">4</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-5">5</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-6">6</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-7">7</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-8">8</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-9">9</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-10">10</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-11">11</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-12">12</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-13">13</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-14">14</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-15">15</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-16">16</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-17">17</p><p class="crayon-num" data-line="crayon-56d59731b6ce3349757504-18">18</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6ce3349757504-1"><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-v">test</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-v">test_modular</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-3"><span class="crayon-e">platform </span><span class="crayon-v">win32</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.2</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.4.2</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-4"><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">items</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-5"> </p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-6"><span class="crayon-v">test_modular</span><span class="crayon-sy">.</span><span class="crayon-e">py</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-7"><span class="crayon-e">foo </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">module </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-8"><span class="crayon-e">bar </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-9"><span class="crayon-e">baz </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-10"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-11"><span class="crayon-sy">.</span><span class="crayon-e">baz </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-12"><span class="crayon-e">bar </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-13"><span class="crayon-e">bar </span><span class="crayon-v">setup</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-14"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_two</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-15"><span class="crayon-sy">.</span><span class="crayon-e">bar </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-16"><span class="crayon-e">foo </span><span class="crayon-v">teardown</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-e">module </span><span class="crayon-v">fixture</span></p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-17"> </p><p class="crayon-line" id="crayon-56d59731b6ce3349757504-18"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.02</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<h2 id="experimental"><strike>Experimental and </strike>still to cover</h2>
<p>In this section, I’m listing the <strike>experimental features</strike>, and features I haven’t fully tested and/or don’t quite understand yet.</p>

<h3 id="yield">yield_fixture</h3>
<p>Thank you Johannes for pointed out this feature in the comments.</p>
<p>You can use ‘yield_fixture’ instead of the ‘fixture’ decorator for functions that yield their value rather than returning them.</p>
<p>The benefits are:</p>
<ul>
<li>It works like a context manager.</li>
<li>You don’t have to register a teardown function via addfinalizer.</li>
<li>Therfore, you don’t have to include the request parameter just for the addfinalizer function.</li>
</ul>
<p>Caveats:</p>
<ul>
<li><strike>It’s still "experimental", so supposedly the syntax/behavior might change in the future.</strike> <strong>As of pytest 2.7.0, it’s no longer considered experimental. It will stay.</strong></li>
<li>Probably more, but I haven’t used it much to know what else to be careful of.</li>
</ul>
<p>Here’s a quick example. (Yep. Staight from the comment.) <code/></p>
<p/>

		<div id="crayon-56d59731b6ceb069340969" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6ceb069340969-1"><span class="crayon-sy">@</span><span class="crayon-v">pytest</span><span class="crayon-sy">.</span><span class="crayon-e">yield_fixture</span><span class="crayon-sy">(</span><span class="crayon-v">scope</span><span class="crayon-o">=</span><span class="crayon-s">"module"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-2"><span class="crayon-e">def </span><span class="crayon-e">cheese_db</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-3"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n[setup] cheese_db, connect to db'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-4"><span class="crayon-h">    </span><span class="crayon-v">a_dictionary_for_now</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-s">'Brie'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'No.'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'Camenbert'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">'Ah! We have Camenbert, yessir.'</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-5"><span class="crayon-h">    </span><span class="crayon-e">yield </span><span class="crayon-e">a_dictionary_for_now</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-6"><span class="crayon-e">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'\n[teardown] cheese_db finalizer, disconnect from db'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-7"> </p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-8"><span class="crayon-e">def </span><span class="crayon-e">test_brie</span><span class="crayon-sy">(</span><span class="crayon-v">cheese_db</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-9"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_brie()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-10"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">[</span><span class="crayon-s">'Brie'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'No.'</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-11"> </p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-12"><span class="crayon-e">def </span><span class="crayon-e">test_camenbert</span><span class="crayon-sy">(</span><span class="crayon-v">cheese_db</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-13"><span class="crayon-h">    </span><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-s">'in test_camenbert()'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6ceb069340969-14"><span class="crayon-h">    </span><span class="crayon-st">assert</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">[</span><span class="crayon-s">'Camenbert'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">'No.'</span><span class="crayon-h"> </span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p><code/></p>
<p/>

		<div id="crayon-56d59731b6cf3668842040" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d59731b6cf3668842040-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-sy">.</span><span class="crayon-v">test</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-v">pytestfixtures</span><span class="crayon-o">/</span><span class="crayon-v">test_yield</span><span class="crayon-sy">.</span><span class="crayon-v">py</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-2"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">test </span><span class="crayon-e">session </span><span class="crayon-v">starts</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-3"><span class="crayon-e">platform </span><span class="crayon-v">darwin</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-i">Python</span><span class="crayon-h"> </span><span class="crayon-cn">2.7.5</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">py</span><span class="crayon-o">-</span><span class="crayon-cn">1.4.20</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-h"> </span><span class="crayon-v">pytest</span><span class="crayon-o">-</span><span class="crayon-cn">2.5.2</span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-4"><span class="crayon-i">collected</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">items </span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-5"> </p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-6"><span class="crayon-v">pytestfixtures</span><span class="crayon-o">/</span><span class="crayon-v">test_yield</span><span class="crayon-sy">.</span><span class="crayon-i">py</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-7"><span class="crayon-sy">[</span><span class="crayon-v">setup</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">cheese_db</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">connect </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">db</span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-8"><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_brie</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-9"><span class="crayon-sy">.</span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">test_camenbert</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-10"><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-11"><span class="crayon-sy">[</span><span class="crayon-v">teardown</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-e">cheese_db </span><span class="crayon-v">finalizer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">disconnect </span><span class="crayon-e">from </span><span class="crayon-v">db</span></p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-12"> </p><p class="crayon-line" id="crayon-56d59731b6cf3668842040-13"><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-h"> </span><span class="crayon-e">passed </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-cn">0.01</span><span class="crayon-h"> </span><span class="crayon-v">seconds</span><span class="crayon-h"> </span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">===</span><span class="crayon-o">=</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p/>
<p><strong>WARNING:</strong> My recommendation is to be aware of this feature, but use ‘addfinalizer’ for production test code.<br/>This is a cool feature. But since it’s still listed as ‘experimental’, and I haven’t done much testing with it or testing of it, I can’t in good conscience recommend it’s use.</p>
<p><em>Hey pytest devs: Let me know if this WARNING is too strong.</em></p>
<p>I DO recommend you use it IFF you are either solo or on a small team where you are able to easily change the test code in the future if the syntax/behavior changes in future pytest releases.</p>
<h3 id="ids">ids</h3>
<p>More information at <a href="http://pytest.org/latest/builtin.html#fixtures-and-requests">pytest.org</a></p>
<p>I played around with this a bit, but couldn’t get anything to work.<br/>I’m sure I was just doing something wrong.<br/>If anyone has a working example they could share, please do.</p>
<h2 id="feedback">Feedback</h2>
<p>Leave a comment. Let me know if this is helpful or confusing. If you end up finding some bell or whistle of pytest fixtures that I missed, let me know.</p>

</div></div></body></html>