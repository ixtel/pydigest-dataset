<html><body><div><div class="entry-content">
                    <p>In my previous <a class="reference external" href="http://pydanny.com/awesome-slugify-human-readable-url-slugs-from-any-string.html">blog post</a> I covered using <a class="reference external" href="https://pypi.python.org/pypi/awesome-slugify">awesome-slugify</a> to capture slugs in both ASCII and unicode. Today I'm covering the definition custom language <tt class="docutils literal">slugify</tt> translation functions.</p>
<div class="section" id="defining-custom-language-slugify-translation-functions">
<h2>Defining Custom Language <tt class="docutils literal">slugify</tt> Translation Functions</h2>
<p>For those times we need ASCII representation of unicode characters, we can't always use the default unicode-to-ASCII mappings. A powerful feature of <strong>awesome-slugify</strong> is we can quickly and easily create our own translation functions. Just follow these two steps:</p>
<ol class="arabic simple">
<li>Define a translation dictionary. Keys are the names of things you want translated, and the associated values are what the keys are translated into.</li>
<li>Generate a translation function using <tt class="docutils literal">slugify.main.get_slugify()</tt>.</li>
</ol>
<p>Explaining this in depth will take paragraphs of text, so I'll just demonstrate it using <a class="reference external" href="https://en.wikipedia.org/wiki/Emoji">emoji</a>:</p>
<div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="c"># test_slugify_emoji.py</span>

<span class="kn">from</span> <span class="nn">slugify</span> <span class="kn">import</span> <span class="n">get_slugify</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="c"># Step 1: Define the translation dictionary</span>
<span class="n">ALT_EMOJI</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">u'ʘ‿ʘ'</span><span class="p">:</span> <span class="s">u'smiling'</span><span class="p">,</span>
    <span class="s">u'ಠ_ಠ'</span><span class="p">:</span> <span class="s">u'disapproval'</span><span class="p">,</span>
    <span class="s">u'♥‿♥'</span><span class="p">:</span> <span class="s">u'enamored'</span><span class="p">,</span>
    <span class="s">u'♥'</span><span class="p">:</span> <span class="s">u'love'</span><span class="p">,</span>
<span class="p">}</span>

<span class="c"># Step 2: Generate a translation function</span>
<span class="n">slugify_emoji</span> <span class="o">=</span> <span class="n">get_slugify</span><span class="p">(</span><span class="n">pretranslate</span><span class="o">=</span><span class="n">ALT_EMOJI</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_basic_emoji</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">slugify_emoji</span><span class="p">(</span><span class="s">u"ʘ‿ʘ"</span><span class="p">)</span> <span class="o">==</span> <span class="s">u"smiling"</span>
    <span class="k">assert</span> <span class="n">slugify_emoji</span><span class="p">(</span><span class="s">u"ಠ_ಠ"</span><span class="p">)</span> <span class="o">==</span> <span class="s">u"disapproval"</span>

<span class="k">def</span> <span class="nf">test_sentence</span><span class="p">():</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="s">u"I ♥ Audrey Roy Greenfeld"</span>
    <span class="k">assert</span> <span class="n">slugify_emoji</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="o">==</span> <span class="s">u"I-love-Audrey-Roy-Greenfeld"</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
<img alt="I ♥ your unicode smile" class="align-center" id="i-your-unicode-smile" src="https://s3.amazonaws.com/pydanny/i-♥-your-unicode-smile.png"/>
<div class="section" id="more-practical-applications">
<h3>More Practical Applications</h3>
<p>While writing an <strong>emoji</strong>-based translation function is fun, most of the time we need more practical translation functions. Built into <strong>awesome-slugify</strong> is a cyrillic translation function that works like this:</p>
<div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="c"># test_slugify_cyrillic.py</span>
<span class="kn">from</span> <span class="nn">slugify</span> <span class="kn">import</span> <span class="n">get_slugify</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="c"># The following code is nearly identical to the source code of</span>
<span class="c">#   awesome-slugify. All credit goes to Dmitry Voronin.</span>

<span class="c"># Step 1: Define the translation dictionary</span>
<span class="n">ALT_CYRILLIC</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">u'ё'</span><span class="p">:</span> <span class="s">u'e'</span><span class="p">,</span>    <span class="c"># instead of 'io' / 'yo'</span>
    <span class="s">u'ж'</span><span class="p">:</span> <span class="s">u'j'</span><span class="p">,</span>    <span class="c"># instead of 'zh'</span>
    <span class="s">u'у'</span><span class="p">:</span> <span class="s">u'y'</span><span class="p">,</span>    <span class="c"># instead of 'u'</span>
    <span class="s">u'х'</span><span class="p">:</span> <span class="s">u'h'</span><span class="p">,</span>    <span class="c"># instead of 'kh'</span>
    <span class="s">u'щ'</span><span class="p">:</span> <span class="s">u'sch'</span><span class="p">,</span>  <span class="c"># instead of 'shch'</span>
    <span class="s">u'ю'</span><span class="p">:</span> <span class="s">u'u'</span><span class="p">,</span>    <span class="c"># instead of 'iu' / 'yu'</span>
    <span class="s">u'я'</span><span class="p">:</span> <span class="s">u'ya'</span><span class="p">,</span>   <span class="c"># instead of 'ia'</span>
<span class="p">}</span>

<span class="c"># Step 2: Generate a translation function</span>
<span class="n">slugify_ru</span> <span class="o">=</span> <span class="n">get_slugify</span><span class="p">(</span><span class="n">pretranslate</span><span class="o">=</span><span class="n">ALT_CYRILLIC</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_some_cyrillic</span><span class="p">():</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="s">u"ж and я are really fun letters."</span>
    <span class="k">assert</span> <span class="n">slugify_ru</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="o">==</span> <span class="s">u"j-and-ya-are-really-fun-letters"</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
<p><a class="reference external" href="http://bikeshedder.com/">Michael P. Jung</a> created a German translation function, which I've included below:</p>
<div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="c"># test_slugify_german.py</span>
<span class="kn">from</span> <span class="nn">slugify</span> <span class="kn">import</span> <span class="n">get_slugify</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="c"># Step 1: Define the translation dictionary</span>
<span class="n">ALT_GERMAN</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">u'ä'</span><span class="p">:</span> <span class="s">u'ae'</span><span class="p">,</span>
    <span class="s">u'Ä'</span><span class="p">:</span> <span class="s">u'Ae'</span><span class="p">,</span>
    <span class="s">u'ö'</span><span class="p">:</span> <span class="s">u'oe'</span><span class="p">,</span>
    <span class="s">u'Ö'</span><span class="p">:</span> <span class="s">u'Oe'</span><span class="p">,</span>
    <span class="s">u'ü'</span><span class="p">:</span> <span class="s">u'ue'</span><span class="p">,</span>
    <span class="s">u'Ü'</span><span class="p">:</span> <span class="s">u'Ue'</span>
<span class="p">}</span>

<span class="c"># Step 2: Generate a translation function</span>
<span class="n">slugify_de</span> <span class="o">=</span> <span class="n">get_slugify</span><span class="p">(</span><span class="n">pretranslate</span><span class="o">=</span><span class="n">ALT_GERMAN</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test_german_dumpling</span><span class="p">():</span>
    <span class="c"># According to Michael P. Jung, this looks like ice cream.</span>
    <span class="k">assert</span> <span class="n">slugify_de</span><span class="p">(</span><span class="s">u'Thüringer Klöße'</span><span class="p">)</span> <span class="o">==</span> <span class="s">u"Thueringer-Kloesse"</span>

<span class="k">def</span> <span class="nf">test_german_road</span><span class="p">():</span>
    <span class="n">txt</span> <span class="o">=</span> <span class="s">u"I've never been in a car on a German straße"</span>
    <span class="k">assert</span> <span class="n">slugify_de</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span> <span class="o">==</span> <span class="s">u"Ive-never-been-in-a-car-on-a-German-strasse"</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">pytest</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>I really like the flexibility and power of <strong>awesome-slugify</strong>. During slugification it provides functions to preserve unicode characters, convert unicode characters to ASCII, and even define new translation functions. As <strong>awesome-slugify</strong> is a relatively new project, there are <a class="reference external" href="https://github.com/dimka665/awesome-slugify/issues">a few issues</a>, but most of those are for my quirky edge cases (such as when trying to use parenthesis in translation dictionaries for <a class="reference external" href="https://en.wikipedia.org/wiki/Emoticons">emoticons</a>) or perhaps stem from my poor understanding of how unicode-to-ASCII functions.</p>
<p>In any case, this is a very useful package.</p>
<p><strong>Update 2013/01/23</strong> Thanks to <a class="reference external" href="https://github.com/dimka665">Dmitry Voronin</a>, I removed references to a couple issues with <strong>awesome-slugify</strong>. It no longer forces capitalization in custom translation functions and the <tt class="docutils literal">get_slugify()</tt> can be imported directly from the base <tt class="docutils literal">slugify</tt> package.</p>
</div>

                    
                </div>
                                </div></body></html>