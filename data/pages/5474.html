<html><body><div><div id="content">

            

            
        


            <div class="section">
              <h1>channelpy 0.2</h1>

              


<p>Go Inspired Channels</p>








<p>A basic implementation of <a href="http://golang.org/" rel="nofollow">Go</a> inspired channels.</p>
<p>Use these channels to communicate across Python threads, processes, or
hosts, independent of network location.  Channels are first class
objects that can be passed themselves through the channels.</p>
<p>The current implementation uses <a href="http://www.rabbitmq.com/" rel="nofollow">RabbitMQ</a> as a broker, but it can be
swapped by other queues or even a peer-to-peer transport mechanism
such as <a href="http://zeromq.org/" rel="nofollow">ZeroMQ</a>.  See <a href="#implementation-details" rel="nofollow">the implementation details</a>.</p>
<div id="prerequisite">
<h2>Prerequisite</h2>
<p>Start a RabbitMQ instance by executing the following command in the
root directory of this repository:</p>
<pre>docker-compose up -d
</pre>
</div>
<div id="quickstart">
<h2>Quickstart</h2>
<ul>
<li><p>Create a channel with:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">channelpy</span> <span class="kn">import</span> <span class="n">Channel</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">()</span>
</pre>
</li>
<li><p>Put and get objects to and from the channel:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="s1">'foo'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1"># raises ChannelTimeoutException since channel is empty</span>
</pre>
</li>
<li><p>Pass channels into channels:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">ch1</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch1</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch2</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch2</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">ch1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span> <span class="o">=</span> <span class="n">ch2</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">x</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="mi">5</span>
</pre>
</li>
<li><p>Channels can be instantiated by name:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span><span class="o">.</span><span class="n">name</span>
<span class="s1">'daa0a490f9254c69883335c9f925d74f'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">ch</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">another</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="s1">'foo'</span>
</pre>
<p>Or create them with a specific name:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'my_channel'</span><span class="p">)</span>
</pre>
</li>
<li><p>Multiple consumers and producers can be attached to a
channel. Messages are delivered in round-robin fashion to
consumers. However, a <tt>close_all</tt> can be delivered to all the
consumers to signal a full termination of the channel.</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span> <span class="o">=</span> <span class="n">Channel</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
<span class="o">...</span>         <span class="k">print</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ch</span><span class="p">,))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">f</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ch</span><span class="p">,))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>        <span class="c1"># one of the threads will print 4</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ch</span><span class="o">.</span><span class="n">close_all</span><span class="p">()</span>   <span class="c1"># ChannelClosedException is raised in all threads</span>
</pre>
</li>
<li><p>The broker to use can be configured at instantiation time or by
using the config file <tt><span class="pre">~/.channelpy.yml</span></tt>.  For example:</p>
<pre><span class="l-Scalar-Plain">connection</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">RabbitConnection</span>
  <span class="l-Scalar-Plain">uri</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">amqp://192.168.35.10:5672</span>
</pre>
</li>
</ul>
</div>
<div id="tests">
<h2>Tests</h2>
<p>Run the tests with:</p>
<pre>$ <span class="nv">BROKER</span><span class="o">=</span><span class="s1">'amqp://localhost:5672'</span> py.test -v
</pre>
</div>
<div id="id1">
<span id="implementation-details"/><h2>Implementation Details</h2>
<p>To be written.</p>
</div>


<a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>7</span> downloads in the last week
  </li>
  <li>
    <span>83</span> downloads in the last month
  </li>
</ul>









            </div>


          </div>
          </div></body></html>