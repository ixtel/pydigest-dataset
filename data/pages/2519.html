<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-django-simpleapi-apis-for-everyone" class="anchor" href="#django-simpleapi-apis-for-everyone" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>django-simpleapi: API's for everyone</h1>
<a href="https://travis-ci.org/voidfiles/django-simpleapi"><img src="https://camo.githubusercontent.com/97cfae742700159b49e7feda0f1211bdca8bc83b/68747470733a2f2f6170692e7472617669732d63692e6f72672f766f696466696c65732f646a616e676f2d73696d706c656170692e737667" data-canonical-src="https://api.travis-ci.org/voidfiles/django-simpleapi.svg"/>
</a>
<a href="http://badge.fury.io/py/django-simpleapi"><img alt="https://badge.fury.io/py/django-simpleapi.png" src="https://camo.githubusercontent.com/da2657fda856d18898c2790625457a496133c657/68747470733a2f2f62616467652e667572792e696f2f70792f646a616e676f2d73696d706c656170692e706e67" data-canonical-src="https://badge.fury.io/py/django-simpleapi.png"/></a>
<a href="https://crate.io/packages/django-simpleapi/"><img alt="https://pypip.in/d/django-simpleapi/badge.png" src="https://camo.githubusercontent.com/77e1cb5453f9c86fb6c40072b96ef18cbb58dea2/68747470733a2f2f70797069702e696e2f642f646a616e676f2d73696d706c656170692f62616467652e706e67" data-canonical-src="https://pypip.in/d/django-simpleapi/badge.png"/></a>
<p>django-simpleapi is an MIT Licensed django app, written in Python, for developers.</p>
<p>How many times have you wanted to create a simple JSON api in Django.
I mean simple. There are great tools out their like * and * but sometimes
you just want to send back some JSON.</p>
<p>This app makes it super simple to do that.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> simpleapi <span class="pl-k">import</span> api_handler

<span class="pl-en">@api_handler</span>
<span class="pl-k">def</span> <span class="pl-en">get_some_yak</span>(<span class="pl-smi">request</span>):
    <span class="pl-k">return</span> {
        <span class="pl-s"><span class="pl-pds">'</span>yak<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>yummm<span class="pl-pds">'</span></span>
    }

urlpatterns <span class="pl-k">=</span> patterns(
    <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>,
    url(<span class="pl-sr"><span class="pl-k">r</span><span class="pl-pds">'</span><span class="pl-c1">^</span>get/some/yak<span class="pl-c1">$</span><span class="pl-pds">'</span></span>, get_some_yak),
)</pre></div>
<div class="highlight highlight-source-shell"><pre>curl http://localhost:8000/get/some/yak

{
    <span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>yak<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>yummm<span class="pl-pds">"</span></span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>meta<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>: 200
    }
}</pre></div>
<a name="user-content-features"/>
<h2><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Features</h2>
<ul>
<li>A Simple API for Django</li>
<li>Easy execption handling, creation</li>
<li>Easy addition to meta</li>
</ul>
<a name="user-content-installation"/>
<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>
<p>To install Requests, simply:</p>
<div class="highlight highlight-source-shell"><pre>$ pip install django-simpleapi</pre></div>
<a name="user-content-documentation"/>
<h2><a id="user-content-documentation" class="anchor" href="#documentation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Documentation</h2>
<p>This easyiest way to get started is to use the api_handler decorator.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> simpleapi <span class="pl-k">import</span> api_handler

<span class="pl-en">@api_handler</span>
<span class="pl-k">def</span> <span class="pl-en">get_some_yak</span>(<span class="pl-smi">request</span>):
    <span class="pl-k">return</span> {
        <span class="pl-s"><span class="pl-pds">'</span>yak<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>yummm<span class="pl-pds">'</span></span>
    }</pre></div>
<p>Any view function that returns a dict object will work with this interface.</p>
<p>Next, often in APIs you need to fail for some reason. Validation, missing params, you name it. There is an easy way to make that happen SimpleHttpException</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> simpleapi <span class="pl-k">import</span> api_handler, SimpleHttpException

<span class="pl-en">@api_handler</span>
<span class="pl-k">def</span> <span class="pl-en">get_some_yak</span>(<span class="pl-smi">request</span>):
    required_param <span class="pl-k">=</span> request.<span class="pl-c1">GET</span>.get(<span class="pl-s"><span class="pl-pds">'</span>required_param<span class="pl-pds">'</span></span>)

    <span class="pl-k">if</span> required_param <span class="pl-k">is</span> <span class="pl-c1">None</span>:
        <span class="pl-k">raise</span> SimpleHttpException(<span class="pl-s"><span class="pl-pds">"</span>Missing required_param<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">'</span>missing-required-param<span class="pl-pds">'</span></span>, <span class="pl-c1">400</span>)

    <span class="pl-k">return</span> {
        <span class="pl-s"><span class="pl-pds">'</span>yak<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>yummm<span class="pl-pds">'</span></span>
    }</pre></div>
<p>Now when you request this view and forget to pass required_param you would see something like this.</p>
<div class="highlight highlight-source-shell"><pre>curl http://localhost:8000/get/some/yak

{
    <span class="pl-s"><span class="pl-pds">"</span>meta<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>: 400,
        <span class="pl-s"><span class="pl-pds">"</span>error_message<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Missing required_param<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>error_slug<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>missing-required-param<span class="pl-pds">"</span></span>
    }
}</pre></div>
<p>Not only will the HTTP Status code be in the meta response, it will also be the HTTP Code sent back. Error slug is helpfull in resolving exceptions progrmattically. It's mucher easier then relying on string grepping to figure out what went wrong.</p>
<p>Finally, you might want to add you own information to the meta part of the envelope. This would helpfull for passing information like pagination information.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> simpleapi <span class="pl-k">import</span> api_handler

<span class="pl-en">@api_handler</span>
<span class="pl-k">def</span> <span class="pl-en">get_some_yak</span>(<span class="pl-smi">request</span>):
    request.<span class="pl-c1">META</span>[<span class="pl-s"><span class="pl-pds">'</span>_simple_api_meta<span class="pl-pds">'</span></span>][<span class="pl-s"><span class="pl-pds">'</span>yak_count<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-c1">1</span>

    <span class="pl-k">return</span> {
        <span class="pl-s"><span class="pl-pds">'</span>yak<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>yummm<span class="pl-pds">'</span></span>
    }</pre></div>
<p>The response would now look something like this.</p>
<div class="highlight highlight-source-shell"><pre>curl http://localhost:8000/get/some/yak

{
    <span class="pl-s"><span class="pl-pds">"</span>data<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>yak<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>yummm<span class="pl-pds">"</span></span>
    },
    <span class="pl-s"><span class="pl-pds">"</span>meta<span class="pl-pds">"</span></span>: {
        <span class="pl-s"><span class="pl-pds">"</span>code<span class="pl-pds">"</span></span>: 200,
        <span class="pl-s"><span class="pl-pds">"</span>yak_counter<span class="pl-pds">"</span></span>: 1
    }
}</pre></div>

</article>
  </div></body></html>