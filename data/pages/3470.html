<html><body><div><div class="field-item even" property="schema:articleBody content:encoded"><p>I love <a href="http://python.org/" target="_blank" title="Python Programming Language – Official Website">Python</a>, and I’ve been learning it for a while now. Some time ago, I wrote a Python script where I needed to resize a bunch of images while at the same time keeping the aspect ratio (the proportions) intact. So I looked around and found the <a href="http://www.pythonware.com/products/pil/" target="_blank" title="Python Imaging Library">PIL (Python Imaging Library)</a>.</p>

<p>You will need to install the PIL for the code to work. <em>Note that PIL seems to no longer be maintained, although a "friendly fork" called <a href="https://pillow.readthedocs.org/" target="_blank">Pillow</a> is also available.</em> To install PIL on a <a href="http://www.debian.org/" title="Debian GNU/Linux">Debian</a>-based system, run the following command in your terminal as root:</p>
<p><span class="geshifilter"><code class="text geshifilter-text">aptitude install python-imaging</code></span></p>
<p>And now for the Python code for resizing images while maintaining the aspect ratio.</p>
<p><span class="geshifilter"><code class="text geshifilter-text">import PIL&lt;br&gt;from PIL import Image</code></span></p>
<p><span class="geshifilter"><code class="text geshifilter-text">basewidth = 300&lt;br&gt; img = Image.open(‘fullsized_image.jpg’)&lt;br&gt; wpercent = (basewidth / float(img.size[0]))&lt;br&gt; hsize = int((float(img.size[1]) * float(wpercent)))&lt;br&gt; img = img.resize((basewidth, hsize), PIL.Image.ANTIALIAS)&lt;br&gt; img.save(‘resized_image.jpg’)</code></span></p>
<p>These few lines of Python code will resize an image (<strong>fullsized_image.jpg</strong>) using PIL to a width of 300 pixels, which is set in the variable <strong>basewidth</strong> and a height proportional to the new width. The proportional height is calculated by determining what percentage 300 pixels is of the original width (img.size[0]) and then multiplying the original height (img.size[1]) by that percentage. The resulting height value is saved in the variable <strong>hsize.</strong></p>
<p>You can change <strong>basewidth</strong> to any other number if you need a different width for your images. Also, notice I saved the resized image under a different name, <strong>resized_image.jpg</strong>, because I wanted to preserve the full-size image (<strong>fullsized_image.jpg</strong>) as well. You don’t have to do this, of course. You can use the same filename to overwrite the full-size image with the resized image, if that is what you want.</p>
<p><strong>Note:</strong> If you are using this script in Zope as an External method, you will need the line <strong>from PIL import Image</strong> to avoid namespace clashes with Zope’s <strong>Image</strong>.</p>
<p>If the height is fixed and the width proportionally variable, it’s pretty much the same thing, you just need to switch things around a bit:</p>
<p><span class="geshifilter"><code class="text geshifilter-text">baseheight = 560&lt;br&gt;img = Image.open(‘fullsized_image.jpg’)&lt;br&gt;hpercent = (baseheight / float(img.size[1]))&lt;br&gt;wsize = int((float(img.size[0]) * float(hpercent)))&lt;br&gt;img = img.resize((wsize, baseheight), PIL.Image.ANTIALIAS)&lt;br&gt;img.save(‘resized_image.jpg’)</code></span></p>
<p>Notice <strong>basewidth</strong> is now <strong>baseheight</strong>, since height is fixed. In the third line, we are calculating the height percentage, so we need <strong>img.size[1]</strong> instead of <strong>img.size[0]</strong>. The size attribute is a tuple containing width and height in pixels; size[0] refers to the first tuple element, which is width, and size[1] is the second element, which is height. Line 4 also has this switch between size[0] for width and size[1] for height.</p>
<p><em>Originally published on Dayo Ntwari's <a href="https://dayontwari.wordpress.com/2015/01/06/how-to-resize-images-with-python/" target="_blank">blog</a> and republished under Creative Commons with permission.</em></p>
</div></div></body></html>