<html><body><div><div class="blog-post-content box container-fluid">

                
                <div class="blog-info">

                    <h2>Using Selenium WebDriver to Run Mobile Web Tests</h2>

                    <a href="http://testdroid.com/author/ville-veikko-helppibitbar-com">
                        <img src="http://testdroid.com/wp-content/uploads/2015/01/1c5fba2-150x150.jpg" alt="Ville-Veikko Helppi" class="avatar avatar-32 wp-user-avatar wp-user-avatar-32 alignnone photo"/>                    </a>

                    

                    
                </div> 

                   



                <p/><p><strong>Dear Testdroiders,</strong></p>
<p><a title="The Basics of Mobile Web Testing" href="http://testdroid.com/testdroid/9268/the-basics-of-mobile-web-testing-using-appium-selenium" target="_blank"><strong>The Basics of Mobile Web Testing blog</strong></a> sparked some serious interest and many of you have been curious how to build a very basic script for the mobile web test using Selenium/Appium. I’ll walk you through here with the brief example how to build a simple test for your website, using real devices and real browsers. The script below follows the video example so let’s start with that one.</p>
<p><span id="more-9435"/></p>
<p/>
<p>I’m using Python here so if you don’t have Python installed and configured, <a title="Setting Up Your Machine with Python" href="http://testdroid.com/testdroid/8271/how-to-get-started-with-appium-sample-included#SettingUpYourMachine" target="_blank"><strong>check this out first</strong></a>.</p>
<p>The first thing to do is to do the imports and write a basic function for log outputting.<br/>
<span><br/>
<code>import os</code><br/>
<code>import sys</code><br/>
<code>import time</code><br/>
<code>from time import sleep</code><br/>
<code>from selenium import webdriver</code></span></p>
<p><span><code>##</code><br/>
<code>## More help on writing tests:</code><br/>
<code>## =&gt; http://selenium-python.readthedocs.org/en/latest/navigating.html</code><br/>
<code>##</code></span></p>
<p><span><code>def log(msg):</code><br/>
<code>    print (time.strftime("%H:%M:%S") + ": " + msg)</code></span></p>
<p>As a first real step, define the URL for device access. To access Testdroid Cloud’s devices (both Android and iOS) use the following URL:</p>
<p><span><code>appium_URL = 'http://appium.testdroid.com/wd/hub';</code></span></p>
<p>Then, define your local screenshot path where all taken screenshots will be stored:</p>
<p><span><code>screenshot_path = '/Users/vhelppi/Documents/Appium-Samples/Screenshots/Chrome';</code></span></p>
<p>Let’s take a look at Desired Capabilities. These describe your login credentials, used target (e.g. which web browser do you want to use for the session), project name and test run (by definition what you see under your Testdroid Cloud projects), what device(s) will be used for the session, platform and browser. Make sure you follow the instructions with setting proper desired capabilities – things can quickly go wrong here. Also, please make sure you use correct device names. These can be fetched from <a title="Testdroid Cloud public device listing" href="https://cloud.testdroid.com/#public/devices" target="_blank"><strong>Testdroid Cloud device listing</strong></a> and name defined here must map identically to the one in cloud:</p>
<p><span><code>desired_caps = {}</code><br/>
<code>desired_caps['testdroid_username'] = ‘ville-veikko.helppi@bitbar.com’</code><br/>
<code>desired_caps['testdroid_password'] = 'xxxxxxxx'</code><br/>
<code>desired_caps['testdroid_target'] = 'chrome'</code><br/>
<code>desired_caps['testdroid_project'] = 'Appium Chrome'</code><br/>
<code>desired_caps['testdroid_testrun'] = 'TestRun 1'</code><br/>
<code>desired_caps['testdroid_device'] = 'Asus Google Nexus 7 (2013) ME571KL'</code><br/>
<code>desired_caps['platformName'] = 'android'</code><br/>
<code>desired_caps['deviceName'] = 'AndroidDevice'</code><br/>
<code>desired_caps['browserName'] = 'chrome'</code></span></p>
<p>Now, let’s initiate the Selenium driver by calling <code>Remote()</code> from Selenium library. As a parameter the Appium URL (pointing to Testdroid Cloud) and Desired Capabilities are given. And naturally, it’s always a good idea to output some status information to logs/screen.</p>
<p><span><code>log ("WebDriver request initiated. Waiting for response, this may take a while.")</code><br/>
<code>driver = webdriver.Remote(appium_URL, desired_caps)</code></span></p>
<p>It is also a good idea to take screenshots when ever appropriate. More is surely better, but try to keep number of those manageable. Before we start the session with any browser or URL we’ll take a screenshot of web browser (plain view, nothing shown yet in the browser):</p>
<p><span><code>log ("Taking screenshot of home page: '0_chromeLaunched.png'")</code><br/>
<code>driver.save_screenshot(screenshot_path + "/0_chromeLaunched.png")</code></span></p>
<p>Now, specify your website here. I use our <a title="Testdroid Community page" href="http://www.testdroid.com/" target="_blank"><strong>Testdroid Community</strong></a> page for this test and take a screenshot of it:</p>
<p><span><code>log ("Loading page")</code><br/>
<code>driver.get("http://testdroid.com")</code><br/>
<code>log ("Taking screenshot of home page: '1_home.png'")</code><br/>
<code>driver.save_screenshot(screenshot_path + "/1_home.png")</code></span></p>
<p>The next thing for the script is to find an element – “Products” button on Testdroid Community page. It’s defined as “Menu” and button number “1” (“0″ is the “Why Testdroid?”). The syntax given to <code>find_element_by_xpath</code> function call looks like this:</p>
<p><span><code>log ("Finding 'Products'")</code><br/>
<code>elem = driver.find_element_by_xpath('//*[@id="menu"]/ul/li[1]/a')</code><br/>
<code>log ("Clicking 'Products'")</code><br/>
<code>elem.click()</code></span></p>
<p>Remember that there are a <a title="Selenium Element Location Calls" href="http://selenium-python.readthedocs.org/en/latest/locating-elements.html" target="_blank"><strong>great set of different find_element function calls</strong></a> available in Selenium. For example, you can search elements by <a title="Selenium ID" href="http://selenium-python.readthedocs.org/en/latest/locating-elements.html#locating-by-id" target="_blank"><strong>id</strong></a>, <a title="Selenium Element Name" href="http://selenium-python.readthedocs.org/en/latest/locating-elements.html#locating-by-name" target="_blank"><strong>name</strong></a>, <a title="Selenium element xpath" href="http://selenium-python.readthedocs.org/en/latest/locating-elements.html#locating-by-xpath" target="_blank"><strong>xpath</strong></a>, and many others.</p>
<p>After clicking the “Products” menu item on top of the screen the script takes a screenshot and locates “Learn More” button from the page. As you see, there are several “Learn More” buttons on this page, so searching by name wouldn’t help here. For sake of example, I’ll use xpath again. If you look at the page source code (www.testdroid.com/products -&gt; inspect element) you’ll find this:</p>
<p><a href="testdroid.com/transform-from-traditional-to-agile"><img class="aligncenter size-full wp-image-9309" src="http://testdroid.com/wp-content/uploads/Screen-Shot-2015-01-22-at-1.23.45-PM.png" alt="Element Inspection on Testdroid.com"/></a></p>
<p>Now, based on the implementation, the script locates the right button with “Learn more” text and clicks it:</p>
<p><span><code>log ("Taking screenshot of 'Products' page: '2_products.png'")</code><br/>
<code>driver.save_screenshot(screenshot_path + "/2_products.png")</code><br/>
<code>log ("Finding 'Learn More'")</code><br/>
<code>elem = driver.find_element_by_xpath('//*[@id="products"]/div[1]/div/div[1]/div[3]/a')</code><br/>
<code>log ("Clicking 'Learn More'")</code><br/>
<code>elem.click()</code></span></p>
<p>Allright. Now we’ve inspected some HTML elements, clicked those and some screenshots are taken. In the next few lines, we’ll find “topMenu” and identify “Supported Frameworks” button in that. The element inspection of the page looks like this:</p>
<p><a href="testdroid.com/transform-from-traditional-to-agile"><img class="aligncenter size-full wp-image-9311" src="http://testdroid.com/wp-content/uploads/Screen-Shot-2015-01-22-at-1.32.48-PM.png" alt="Supported Frameworks by Testdroid link"/></a></p>
<p>And again, for sake of using xpath, the code for locating the right link looks like this:</p>
<p><span><code>log ("Taking screenshot of 'Learn More' page: '3_learnmore.png'")</code><br/>
<code>driver.save_screenshot(screenshot_path + "/3_learnmore.png")</code><br/>
<code>log ("Finding 'Supported Frameworks'")</code><br/>
<code>elem = driver.find_element_by_xpath('//*[@id="topMenu"]/div[1]/div/a[2]')</code><br/>
<code>log ("Clicking 'Supported Frameworks'")</code><br/>
<code>elem.click()</code></span></p>
<p>Now we’ve landed to the page where supported test automation frameworks by different Testdroid products are shown.</p>
<p><span><code>log ("Taking screenshot of 'Supported Framworks' page: '4_supportedframeworks.png'")</code><br/>
<code>driver.save_screenshot(screenshot_path + "/4_supportedframeworks.png")</code><br/>
<code>log ("quitting")</code><br/>
<code>driver.quit()</code><br/>
<code>sys.exit()</code></span></p>
<p>If you want to try out this, you can <a title="Python Chrome Example" href="https://www.dropbox.com/s/ai2cganjbo8pdf3/testdroid_chrome.py?dl=0" target="_blank"><strong>download this Python script here</strong></a>.</p>
<p><strong>Happy Web Testing!</strong></p>



                
<hr/>		
<p><em>Want to stay up-to-date with Mobile Testing News? Like us on Facebook.</em></p>

       		 <p class="fb-like" data-href="https://www.facebook.com/BitbarTechnologies" data-width="50" data-layout="standard" data-action="like" data-show-faces="true" data-share="false"/>  <hr/>      

                <p class="blog-tags">
                    <a href="http://testdroid.com/tag/appium" rel="tag">Appium</a> <a href="http://testdroid.com/tag/elements" rel="tag">Elements</a> <a href="http://testdroid.com/tag/selenium" rel="tag">Selenium</a> <a href="http://testdroid.com/tag/web-testing" rel="tag">Web testing</a> <a href="http://testdroid.com/tag/webdriver" rel="tag">Webdriver</a>                </p>

                                 
                

		


        </div> 
        
</div></body></html>