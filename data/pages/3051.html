<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-overloadingpy" class="anchor" href="#overloadingpy" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>overloading.py</h1>

<h6><a id="user-content-function-overloading-for-python-3" class="anchor" href="#function-overloading-for-python-3" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Function overloading for Python 3</h6>

<p><code>overloading</code> is a module that provides function dispatching based on the types and number of runtime arguments.</p>

<p>When an overloaded function is invoked, the dispatcher compares the supplied arguments to available function signatures and calls the implementation that provides the most accurate match.</p>

<h4><a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Features</h4>

<ul>
<li>Function validation upon registration and detailed resolution rules guarantee a unique, well-defined outcome at runtime.</li>
<li>Implements function resolution caching for great performance.</li>
<li>Supports optional parameters (default values) in function signatures.</li>
<li>Evaluates both positional and keyword arguments when resolving the best match.</li>
<li>Supports fallback functions and execution of shared code.</li>
<li>Supports argument polymorphism.</li>
<li>Supports classes and inheritance, including classmethods and staticmethods.</li>
</ul>

<h4><a id="user-content-first-example" class="anchor" href="#first-example" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>First example</h4>

<p>Sample code without overloading:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">DB</span>:

    <span class="pl-k">def</span> <span class="pl-en">get</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-k">*</span><span class="pl-smi">args</span>):
        <span class="pl-k">if</span> <span class="pl-c1">len</span>(args) <span class="pl-k">==</span> <span class="pl-c1">1</span> <span class="pl-k">and</span> <span class="pl-c1">isinstance</span>(args[<span class="pl-c1">0</span>], Query):
            <span class="pl-k">return</span> <span class="pl-v">self</span>.get_by_query(args[<span class="pl-c1">0</span>])
        <span class="pl-k">elif</span> <span class="pl-c1">len</span>(args) <span class="pl-k">==</span> <span class="pl-c1">2</span>:
            <span class="pl-k">return</span> <span class="pl-v">self</span>.get_by_id(<span class="pl-v">id</span><span class="pl-k">=</span>args[<span class="pl-c1">0</span>], <span class="pl-v">model</span><span class="pl-k">=</span>args[<span class="pl-c1">1</span>])
        <span class="pl-k">else</span>:
            <span class="pl-k">raise</span> <span class="pl-c1">TypeError</span>(<span class="pl-c1">...</span>)

    <span class="pl-k">def</span> <span class="pl-en">get_by_query</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">query</span>):
        <span class="pl-c1">...</span>

    <span class="pl-k">def</span> <span class="pl-en">get_by_id</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">id</span>, <span class="pl-smi">model</span>):
        <span class="pl-c1">...</span></pre></div>

<p>The same thing with overloading:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">DB</span>:

    <span class="pl-en">@overloaded</span>
    <span class="pl-k">def</span> <span class="pl-en">get</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">query</span>: Query):
        <span class="pl-c1">...</span>

    <span class="pl-en">@overloads</span>(get)
    <span class="pl-k">def</span> <span class="pl-en">get</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">id</span>, <span class="pl-smi">model</span>):
        <span class="pl-c1">...</span></pre></div>

<h4><a id="user-content-why-use-overloading-instead-of-args--kwargs" class="anchor" href="#why-use-overloading-instead-of-args--kwargs" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Why use overloading instead of *args / **kwargs?</h4>

<ul>
<li>  Explicit function signatures</li>
<li>  No more mechanical argument validation and error throwing in the function body</li>
<li>  Clean way of handling different behaviors in separate functions</li>
</ul>

<h4><a id="user-content-why-use-overloading-instead-of-functions-with-different-names" class="anchor" href="#why-use-overloading-instead-of-functions-with-different-names" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Why use overloading instead of functions with different names?</h4>



<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>

<p><code>pip install overloading</code></p>

<h2><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Usage</h2>

<h4><a id="user-content-basics" class="anchor" href="#basics" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Basics</h4>

<p>Use the <code>overloaded</code> and <code>overloads</code> decorators to register multiple implementations of a function. All variants must differ by parameter type or count. Argument types are specified as <a href="https://www.python.org/dev/peps/pep-3107/">annotations</a>.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> overloading <span class="pl-k">import</span> <span class="pl-k">*</span>

<span class="pl-en">@overloaded</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>():
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>no args<span class="pl-pds">'</span></span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">foo</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>one arg of any type<span class="pl-pds">'</span></span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">foo</span>:<span class="pl-c1">int</span>, <span class="pl-smi">bar</span>:<span class="pl-c1">int</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>two ints<span class="pl-pds">'</span></span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f()
<span class="pl-s"><span class="pl-pds">'</span>no args<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>)
<span class="pl-s"><span class="pl-pds">'</span>one arg of any type<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>, <span class="pl-c1">42</span>)
<span class="pl-c1">TypeError</span>: Invalid <span class="pl-c1">type</span> <span class="pl-k">or</span> number of arguments when calling <span class="pl-s"><span class="pl-pds">'</span>f<span class="pl-pds">'</span></span>.</pre></div>

<p>Keyword arguments can be used as normal:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-v">foo</span><span class="pl-k">=</span><span class="pl-c1">1</span>, <span class="pl-v">bar</span><span class="pl-k">=</span><span class="pl-c1">2</span>)
<span class="pl-s"><span class="pl-pds">'</span>two ints<span class="pl-pds">'</span></span></pre></div>

<h4><a id="user-content-setting-a-default-handler" class="anchor" href="#setting-a-default-handler" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setting a default handler</h4>

<p>One of the functions can be designated as a fallback that will be called in case a match is not found. This is done by including the catch-all variable for positional arguments (<code>*args</code>).</p>

<p>Continuing with the previous example:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>, <span class="pl-c1">42</span>)
<span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span></pre></div>

<p>The default handler may specify required parameters as well. For instance, to accept an arbitrary number of positional arguments while continuing to enforce the requirement that the first two must be integers:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">foo</span>:<span class="pl-c1">int</span>, <span class="pl-smi">bar</span>:<span class="pl-c1">int</span>, <span class="pl-k">*</span><span class="pl-smi">args</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>)
<span class="pl-s"><span class="pl-pds">'</span>two ints<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>)
<span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span></pre></div>

<h4><a id="user-content-argument-polymorphism" class="anchor" href="#argument-polymorphism" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Argument polymorphism</h4>

<p>Subclass instances will satisfy type specifications as one would expect:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">Animal</span>:      <span class="pl-c1">...</span>
<span class="pl-k">class</span> <span class="pl-en">Dog</span>(<span class="pl-e">Animal</span>): <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">creature</span>:Animal):
    <span class="pl-k">return</span> <span class="pl-c1">123</span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(Animal())
<span class="pl-c1">123</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(Dog())
<span class="pl-c1">123</span></pre></div>

<p>The system does not depend on concrete inheritance, so abstract base classes such as <code>collections.Iterable</code> are supported too (but there is <a href="#mro">a limitation</a> on this).</p>

<h4><a id="user-content-decorators" class="anchor" href="#decorators" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Decorators</h4>

<p>Overloading directives can be used together with other decorators.</p>

<p><em>Note:</em> When writing decorators, remember to use <code>functools.wraps()</code> so that the original function can be discovered.</p>

<p>Decorators that are intended to apply to a single implementation must be placed after the overloading directive. In the following example, each decorator affects only the function it appears with:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@overloaded</span>
<span class="pl-en">@d1</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">x</span>:<span class="pl-c1">int</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-en">@d2</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">x</span>:<span class="pl-c1">float</span>):
    <span class="pl-c1">...</span></pre></div>

<p>Decorators placed outside the overloading decorator become associated with the name used in the function declaration. In the following example, <code>decorated</code> will affect all three functions when called through the shared invocation name <code>f</code>:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@decorated</span>
<span class="pl-en">@overloaded</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">x</span>:<span class="pl-c1">int</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">x</span>:<span class="pl-c1">float</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">foo</span>(<span class="pl-smi">x</span>:<span class="pl-c1">str</span>):
    <span class="pl-c1">...</span></pre></div>

<p><em>Exception:</em> <code>classmethod</code> and <code>staticmethod</code> decorators are handled specially and should be repeated for each function declaration.</p>

<h4><a id="user-content-usage-with-classes" class="anchor" href="#usage-with-classes" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Usage with classes</h4>

<p>Everything works the same when overloading methods on classes:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">C</span>:

    <span class="pl-en">@overloaded</span>
    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):
        <span class="pl-c1">...</span>

    <span class="pl-en">@overloads</span>(<span class="pl-c1">__init__</span>)
    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">foo</span>:<span class="pl-c1">list</span>):
        <span class="pl-c1">...</span></pre></div>

<p>Classmethods and staticmethods are supported. The decorator may appear either before or after the overloading decorator.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">C</span>:

    <span class="pl-en">@</span><span class="pl-c1">classmethod</span>
    <span class="pl-en">@overloaded</span>
    <span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>):
        <span class="pl-c1">...</span></pre></div>

<p>Inheritance works as expected, but it is not yet possible to override an already-registered method signature in a subclass.</p>

<p>When adding implementations to a subclass, remember to refer to the dispatcher that is defined in the parent class:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">C</span>:
    <span class="pl-en">@overloaded</span>
    <span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">foo</span>, <span class="pl-smi">bar</span>):
        <span class="pl-c1">...</span>

<span class="pl-k">class</span> <span class="pl-en">S</span>(<span class="pl-c1">C</span>):
    <span class="pl-en">@overloads</span>(<span class="pl-c1">C</span>.f)                <span class="pl-c"># Note `C.f` here.</span>
    <span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">foo</span>, <span class="pl-smi">bar</span>, <span class="pl-smi">baz</span>):
        <span class="pl-c1">...</span></pre></div>

<h4><a id="user-content-function-ordering-and-naming" class="anchor" href="#function-ordering-and-naming" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Function ordering and naming</h4>

<p>The individual functions can be defined in any order. However, the first function (wrapped with the initial <code>overloaded</code> decorator) establishes the shared name by which the overloaded function is invoked.</p>

<p>The names of the subsequent functions are of no importance. They can share the invocation name, have unique names, or be bound to a dummy name to avoid repetition:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@overloaded</span>
<span class="pl-k">def</span> <span class="pl-en">long_function_name</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(long_function_name)
<span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">arg1</span>:<span class="pl-c1">list</span>, <span class="pl-smi">arg2</span>:<span class="pl-c1">int</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(long_function_name)
<span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">arg1</span>:<span class="pl-c1">dict</span>, <span class="pl-smi">arg2</span>:<span class="pl-c1">int</span>):
    <span class="pl-c1">...</span></pre></div>

<h4><a id="user-content-hooks-for-shared-code" class="anchor" href="#hooks-for-shared-code" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Hooks for shared code</h4>

<p>Code that should be executed no matter which implementation is called can be placed in functions labeled with the identifiers <code>'before'</code> and <code>'after'</code>. They are particularly useful in connection with <code>__init__</code> methods.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@overloaded</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">foo</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">g</span>(<span class="pl-smi">foo</span>, <span class="pl-smi">bar</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f, <span class="pl-s"><span class="pl-pds">'</span>before<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">pre</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f, <span class="pl-s"><span class="pl-pds">'</span>after<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">post</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>):
    <span class="pl-c1">...</span></pre></div>

<p>The call <code>f(1, 2)</code> would now be equivalent to <code>pre(1, 2); g(1, 2); post(1, 2);</code>.</p>

<h2><a id="user-content-details" class="anchor" href="#details" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Details</h2>

<p>The dispatching logic is intended to be robust with no surprises. The resolution algorithm is designed so that the most specific match can always be uniquely determined. This means that</p>

<ul>
<li>there is no need to look out for cases where multiple functions might provide an equally good match to a set of arguments</li>
<li>the function definition order does not affect the outcome.</li>
</ul>

<p>Function signatures are validated at registration time to ensure that an ambiguous situation can never arise at runtime. Specifically, <strong>the sequence of required parameters must form a unique signature</strong>.</p>

<p>For example, attempting the following definitions will raise an error because <code>bar</code>, although it varies on type, is not a required parameter and therefore not considered part of the identifying signature.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@overloaded</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">foo</span>, <span class="pl-smi">bar</span>:<span class="pl-c1">int</span><span class="pl-k">=</span><span class="pl-c1">100</span>):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">foo</span>, <span class="pl-smi">bar</span>:<span class="pl-c1">str</span><span class="pl-k">=</span><span class="pl-c1">None</span>):
    <span class="pl-c1">...</span></pre></div>

<p>If the above code was allowed, it would be impossible to decide on the intended function when <code>f</code> is called with only one argument.</p>

<p>There is one exception to the signature uniqueness requirement. The default implementation is allowed to have a signature that also appears elsewhere. Thus, <code>f()</code> and <code>f(*args)</code> are permitted at the same time. To prevent conflicts, the default function takes a lower priority when needed.</p>

<h4><a id="user-content-resolution-rules" class="anchor" href="#resolution-rules" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Resolution rules</h4>

<p>The best match between a set of arguments and a group of function signatures is resolved by applying the following rules until a single function remains:</p>

<ol>
<li> Filter out any functions that cause a mismatch based on argument type, count, or name.</li>
<li> Pick the function that accepts the most arguments to fill its regular parameter slots.</li>
<li> Pick the function whose signature matches the most arguments in terms of types (as opposed to arguments that match because <em>any</em> type is allowed).</li>
<li> Pick the function with the greatest number of exact matches in the previous step (as opposed to matches due to subtyping).</li>
<li> Pick the function that, in terms of parameter order, is the first to provide a better type match than competing functions.</li>
<li> Pick the function whose signature contains the greatest number of required parameters.</li>
<li> Pick the function that is not the default implementation.</li>
</ol>

<h4><a id="user-content-errors" class="anchor" href="#errors" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Errors</h4>

<p>The module will raise an <code>OverloadingError</code> if something goes wrong while the functions are being registered, with the intention that no avoidable errors would have to be raised at invocation time.</p>

<h4><a id="user-content-more-on-naming" class="anchor" href="#more-on-naming" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>More on naming</h4>

<p>If the individual functions are given distinct names, they can also be called directly (except the first one). A direct call will bypass the overloading mechanism, since the dispatcher is bound to the invocation name only.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@overloaded</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">foo</span>:<span class="pl-c1">str</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>expects string<span class="pl-pds">'</span></span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">g</span>(<span class="pl-smi">foo</span>:<span class="pl-c1">int</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>expects integer<span class="pl-pds">'</span></span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">100</span>)
<span class="pl-s"><span class="pl-pds">'</span>expects integer<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>)
<span class="pl-s"><span class="pl-pds">'</span>expects string<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> g(<span class="pl-s"><span class="pl-pds">'</span>hello<span class="pl-pds">'</span></span>)    <span class="pl-c"># Bypass dispatcher and call `g` regardless of arg type.</span>
<span class="pl-s"><span class="pl-pds">'</span>expects integer<span class="pl-pds">'</span></span></pre></div>

<h4><a id="user-content-more-on-argument-polymorphism-and-function-validation" class="anchor" href="#more-on-argument-polymorphism-and-function-validation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a><a name="user-content-mro"/>More on argument polymorphism and function validation</h4>

<p>There is a caveat regarding parameter subtyping. During argument matching, the ranking of candidate functions according to type specificity depends on the classes' inheritance hierarchies (MROs). However, an argument value may be considered an instance of a class even if the MRO does not actually include the class. This is the case with, e.g., abstract base classes.</p>

<p>In practical terms, the matching algorithm is unable to tell whether <code>Iterable</code> or <code>Mapping</code> should be considered a better match for a <code>dict</code> instance. Although in this case the answer is obvious, there is no general solution for classes whose metaclasses implement their own <code>__instancecheck__</code> methods. It is perfectly possible for a value to be considered an instance of two classes that fail a subclass check against each other.</p>

<p>To guard against this, the function validator requires that two different abstract base classes may not occupy the same parameter position on two different functions. For instance, you may not have <code>Iterable</code> as the first type in one function and <code>Mapping</code> in another.</p>

<p>This restriction may be relaxed in the future. A system of abstract base classes that has a consistent derivation hierarchy will be acceptable once the validation and matching algorithms gain the ability to recognize and deal with them.</p>

<h4><a id="user-content-a-note-on-parameters" class="anchor" href="#a-note-on-parameters" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>A note on parameters</h4>

<p>There are no restrictions on the kinds of parameters a function signature may contain. However, the argument matching algorithm only examines <em>regular</em> parameters (those before <code>*</code> or <code>*args</code> if present). In other words, arguments consumed by catch-all variables or Py3-style keyword-only parameters do not count towards match quality.</p>

<h4><a id="user-content-advanced-example-optional-parameters" class="anchor" href="#advanced-example-optional-parameters" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Advanced example: Optional parameters</h4>

<p>Even though optional parameters are ignored when assessing signature uniqueness, they do matter at invocation time when the actual argument matching is carried out.</p>

<div class="highlight highlight-source-python"><pre><span class="pl-en">@overloaded</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-k">*</span><span class="pl-smi">args</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>f<span class="pl-pds">'</span></span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">g</span>(<span class="pl-smi">foo</span>, <span class="pl-smi">bar</span>, <span class="pl-smi">baz</span><span class="pl-k">=</span><span class="pl-c1">None</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>g<span class="pl-pds">'</span></span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">h</span>(<span class="pl-smi">foo</span>, <span class="pl-smi">bar</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-smi">baz</span>:<span class="pl-c1">int</span><span class="pl-k">=</span><span class="pl-c1">None</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>h<span class="pl-pds">'</span></span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">i</span>(<span class="pl-smi">foo</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-smi">bar</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-smi">baz</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>i<span class="pl-pds">'</span></span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f()
<span class="pl-s"><span class="pl-pds">'</span>i<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">100</span>)
<span class="pl-s"><span class="pl-pds">'</span>h<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">100</span>, <span class="pl-c1">200</span>)
<span class="pl-s"><span class="pl-pds">'</span>g<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">100</span>, <span class="pl-c1">200</span>, <span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>)
<span class="pl-s"><span class="pl-pds">'</span>g<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">100</span>, <span class="pl-c1">200</span>, <span class="pl-c1">300</span>)
<span class="pl-s"><span class="pl-pds">'</span>h<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">100</span>, <span class="pl-c1">200</span>, <span class="pl-v">quux</span><span class="pl-k">=</span><span class="pl-c1">1</span>)
<span class="pl-s"><span class="pl-pds">'</span>i<span class="pl-pds">'</span></span></pre></div>

<p>Above, <code>f(100)</code> resolved to <code>h(100)</code> because, other things equal, a signature with fewer optional parameters is considered to be more specific. However, if <code>i</code> were defined as</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">i</span>(<span class="pl-smi">foo</span>:<span class="pl-c1">int</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-smi">bar</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-smi">baz</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-k">**</span><span class="pl-smi">kwargs</span>): <span class="pl-c1">...</span></pre></div>

<p>then <code>f(100)</code> would resolve to <code>i(100)</code> instead. This is because a type-based match always takes precedence.</p>

<h4><a id="user-content-advanced-example-argument-subtyping" class="anchor" href="#advanced-example-argument-subtyping" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Advanced example: Argument subtyping</h4>

<p>Consider a case like this:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">Animal</span>:         <span class="pl-c1">...</span>
<span class="pl-k">class</span> <span class="pl-en">Dog</span>(<span class="pl-e">Animal</span>):    <span class="pl-c1">...</span>

<span class="pl-k">class</span> <span class="pl-en">Vehicle</span>:        <span class="pl-c1">...</span>
<span class="pl-k">class</span> <span class="pl-en">Car</span>(<span class="pl-e">Vehicle</span>):   <span class="pl-c1">...</span>

<span class="pl-en">@overloaded</span>
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">number</span>:<span class="pl-c1">int</span>, <span class="pl-smi">creature</span>:Dog, <span class="pl-smi">thing</span>:Vehicle):
    <span class="pl-c1">...</span>

<span class="pl-en">@overloads</span>(f)
<span class="pl-k">def</span> <span class="pl-en">f</span>(<span class="pl-smi">number</span>:<span class="pl-c1">int</span>, <span class="pl-smi">creature</span>:Animal, <span class="pl-smi">thing</span>:Car):
    <span class="pl-c1">...</span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">1</span>, Dog(), Car())</pre></div>

<p>The function call would seem to result in an equally explicit match with regard to both functions; two of the argument types match exactly and one due to inheritance. The resolution rules address this by directing that the first parameter to produce a ranking will determine the winner. Therefore, in this case, the first function would be chosen, as it provides the best match after the second parameter has been evaluated.</p>

<p>This principle does not depend on exact matches. To illustrate:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">class</span> <span class="pl-en">Retriever</span>(<span class="pl-e">Dog</span>): <span class="pl-c1">...</span>
<span class="pl-k">class</span> <span class="pl-en">Sedan</span>(<span class="pl-e">Car</span>):     <span class="pl-c1">...</span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> f(<span class="pl-c1">1</span>, Retriever(), Sedan())</pre></div>

<p>The first function will again be chosen. <code>Retriever</code> is closer to <code>Dog</code> than to <code>Animal</code> in the type hierarchy, and thus <code>Dog</code> represents a better match at the second position.</p>
</article>
  </div></body></html>