<html><body><div><div class="post-text" itemprop="text">
<p>You're querying the WSGI environment with <code>length = int(env.get('CONTENT_LENGTH', 0))</code> (forum.py:68). I just ran a sample WSGI server (example code taken from the python docs), which outputs all the available environment-variables upon request:</p>

<pre><code>from wsgiref.util import setup_testing_defaults
from wsgiref.simple_server import make_server

# A relatively simple WSGI application. It's going to print out the
# environment dictionary after being updated by setup_testing_defaults
def simple_app(environ, start_response):
    setup_testing_defaults(environ)

    status = '200 OK'
    headers = [('Content-type', 'text/plain')]

    start_response(status, headers)

    ret = ["%s: %s\n" % (key, value)
           for key, value in environ.iteritems()]
    return ret

httpd = make_server('', 8000, simple_app)
print "Serving on port 8000..."
httpd.serve_forever()
</code></pre>

<p>The output I'm getting when querying the test-server is (among a lot of other variables):</p>

<pre><code>SERVER_PORT: 8000
CONTENT_LENGTH: 
GLADE_CATALOG_PATH: :
</code></pre>

<p>You see that the CONTENT_LENGTH variable is empty. This seems to be the case in your application as well.</p>

<p>If the env-dictionary is now queried with <code>env.get('CONTENT_LENGTH', 0)</code>, The <strong><code>CONTENT_LENGTH-key</code></strong> is actually found, but it's value is an empty string - that's why the get() method returns '' and not your specified default value 0.</p>

<p>Since an empty string can't be converted to an int, you're getting the ValueError.</p>

<p>Try catching the exception and your code should work:</p>

<pre><code>try:
    length = int(env.get("CONTENT_LENGTH", 0))
except ValueError:
    length = 0
</code></pre>
    </div>
    </div></body></html>