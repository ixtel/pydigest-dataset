<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-tortilla" class="anchor" href="#tortilla" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Tortilla</h1>

<p><a href="https://travis-ci.org/redodo/tortilla"><img src="https://camo.githubusercontent.com/42635aef253b12dd00a171b4ee7bc1e672d6c429/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f7265646f646f2f746f7274696c6c612e7376673f7374796c653d666c6174" data-canonical-src="https://img.shields.io/travis/redodo/tortilla.svg?style=flat"/></a>
<a href="https://coveralls.io/r/redodo/tortilla"><img src="https://camo.githubusercontent.com/f29b0301bab22dc0e96903e1f1de3d171d939a19/68747470733a2f2f696d672e736869656c64732e696f2f636f766572616c6c732f7265646f646f2f746f7274696c6c612e7376673f7374796c653d666c6174" data-canonical-src="https://img.shields.io/coveralls/redodo/tortilla.svg?style=flat"/></a>
<a href="https://tortilla.readthedocs.org/latest/"><img src="https://camo.githubusercontent.com/b90f8ead83ba17bf0a0e68425657a9bf51d5719e/68747470733a2f2f72656164746865646f63732e6f72672f70726f6a656374732f746f7274696c6c612f62616467652f3f76657273696f6e3d6c6174657374267374796c653d666c6174" data-canonical-src="https://readthedocs.org/projects/tortilla/badge/?version=latest&amp;style=flat"/></a>
<a href="https://pypi.python.org/pypi/tortilla"><img src="https://camo.githubusercontent.com/af9043b07bebb573c39effb918ea1d9d33c2ab71/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f746f7274696c6c612e7376673f7374796c653d666c6174" data-canonical-src="https://img.shields.io/pypi/v/tortilla.svg?style=flat"/></a>
<a href="https://github.com/redodo/tortilla/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/59b4cf7cdeff3a5ec268d2a8c4d671b4aba4e2f4/68747470733a2f2f696d672e736869656c64732e696f2f707970692f6c2f746f7274696c6c612e7376673f7374796c653d666c6174" data-canonical-src="https://img.shields.io/pypi/l/tortilla.svg?style=flat"/></a></p>

<p><em>Wrapping web APIs made easy.</em></p>

<p>Installation via PIP:</p>



<p>Quick usage overview:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">import</span> tortilla
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> github <span class="pl-k">=</span> tortilla.wrap(<span class="pl-s"><span class="pl-pds">'</span>https://api.github.com<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user <span class="pl-k">=</span> github.users.get(<span class="pl-s"><span class="pl-pds">'</span>octocat<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user.location
<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>San Francisco<span class="pl-pds">'</span></span></pre></div>

<h2><a id="user-content-the-basics" class="anchor" href="#the-basics" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>The Basics</h2>

<p>Tortilla uses a bit of magic to wrap APIs. Whenever you get or call an
attribute of a wrapper, the URL is appended by that attribute's name or
method parameter. Let's say we have the following code:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c1">id</span>, count <span class="pl-k">=</span> <span class="pl-c1">71</span>, <span class="pl-c1">20</span>
api <span class="pl-k">=</span> tortilla.wrap(<span class="pl-s"><span class="pl-pds">'</span>https://api.example.org<span class="pl-pds">'</span></span>)
api.video(<span class="pl-c1">id</span>).comments.get(count)</pre></div>

<p>Every attribute and method call represents a part of the URL:</p>

<pre><code>api         -&gt; https://api.example.org
.video      -&gt; /video
(id)        -&gt; /71
.comments   -&gt; /comments
.get(count) -&gt; /20
Final URL   -&gt; https://api.example.org/video/71/comments/20
</code></pre>

<p>The last part of the chain (<code>.get()</code>) executes the request. It also
(optionally) appends one last part to the URL. Which allows you to do
stuff like this:</p>

<div class="highlight highlight-source-python"><pre>api.video.get(<span class="pl-c1">id</span>)
<span class="pl-c"># instead of this</span>
api.video(<span class="pl-c1">id</span>).get()</pre></div>

<p>So to summarize, getting attributes is used to define static parts of a
URL and calling them is used to define dynamic parts of a URL.</p>

<p>Once you've chained everything together, Tortilla will execute the
request and parse the response for you.</p>

<p>At the moment, Tortilla only accepts JSON-formatted responses.
Supporting more formats is on the roadmap for future Tortilla versions.</p>

<p>The parsed response will be <em>bunchified</em> which makes dictionary keys
accessible through attributes. So, say we get the following JSON
response for the user 'john':</p>



<p>If we request this with an already created wrapper, we can access the
response data through attributes:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user <span class="pl-k">=</span> api.users.get(<span class="pl-s"><span class="pl-pds">'</span>john<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user.name
<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>John Doe<span class="pl-pds">'</span></span></pre></div>

<h2><a id="user-content-headers" class="anchor" href="#headers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Headers</h2>

<p>A common requirement for accessing APIs is providing authentication
data. This usually has to be described in the headers of each request.
Tortilla makes it very easy for you to describe those recurring headers:</p>

<div class="highlight highlight-source-python"><pre>api.config.headers.token <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>secret authentication token<span class="pl-pds">'</span></span></pre></div>

<p>You can also define custom headers per request:</p>

<div class="highlight highlight-source-python"><pre>api.endpoint.get(<span class="pl-v">headers</span><span class="pl-k">=</span>{<span class="pl-s"><span class="pl-pds">'</span>this<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>that<span class="pl-pds">'</span></span>})</pre></div>

<p>These headers will be appended to the existing headers of the wrapper.</p>

<h2><a id="user-content-parameters" class="anchor" href="#parameters" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Parameters</h2>

<p>URL parameters can be defined per request in the <code>params</code> option:</p>

<div class="highlight highlight-source-python"><pre>api.search.get(<span class="pl-v">params</span><span class="pl-k">=</span>{<span class="pl-s"><span class="pl-pds">'</span>q<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>search query<span class="pl-pds">'</span></span>})</pre></div>

<h2><a id="user-content-caching" class="anchor" href="#caching" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Caching</h2>

<p>Some APIs have a limit on the amount of requests you can make. In these
cases, caching can be very helpful. You can activate this with the
<code>cache_lifetime</code> parameter:</p>

<div class="highlight highlight-source-python"><pre>api <span class="pl-k">=</span> tortilla.wrap(<span class="pl-s"><span class="pl-pds">'</span>https://api.example.org<span class="pl-pds">'</span></span>, <span class="pl-v">cache_lifetime</span><span class="pl-k">=</span><span class="pl-c1">100</span>)</pre></div>

<p>All the requests made on this wrapper will now be cached for 100
seconds. If you want to ignore the cache in a specific situation, you
can use the <code>ignore_cache</code> parameter:</p>

<div class="highlight highlight-source-python"><pre>api.special.request.get(<span class="pl-v">ignore_cache</span><span class="pl-k">=</span><span class="pl-c1">True</span>)</pre></div>

<p>The response will now be reloaded.</p>

<h2><a id="user-content-url-extensions" class="anchor" href="#url-extensions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>URL Extensions</h2>

<p>APIs like Twitter's require an extension in the URL that specifies the
response format. This can be defined in the <code>extension</code> parameter:</p>

<div class="highlight highlight-source-python"><pre>api <span class="pl-k">=</span> tortilla.wrap(<span class="pl-s"><span class="pl-pds">'</span>https://api.twitter.com/1.1<span class="pl-pds">'</span></span>, <span class="pl-v">extension</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>json<span class="pl-pds">'</span></span>)</pre></div>

<p>This option can be overridden with every request or subwrap:</p>

<div class="highlight highlight-source-python"><pre>api.special.endpoint.extension <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>xml<span class="pl-pds">'</span></span>
api.special.endpoint.get(<span class="pl-v">extension</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>xml<span class="pl-pds">'</span></span>)</pre></div>

<h2><a id="user-content-debugging" class="anchor" href="#debugging" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Debugging</h2>

<p>Activating debug mode can be done with the <code>debug</code> parameter:</p>

<div class="highlight highlight-source-python"><pre>api.debug <span class="pl-k">=</span> <span class="pl-c1">True</span>
<span class="pl-c"># OR</span>
api <span class="pl-k">=</span> tortilla.wrap(<span class="pl-s"><span class="pl-pds">'</span>https://api.example.org<span class="pl-pds">'</span></span>, <span class="pl-v">debug</span><span class="pl-k">=</span><span class="pl-c1">True</span>)</pre></div>

<p>You can override the <code>debug</code> parameter per request:</p>

<div class="highlight highlight-source-python"><pre>api.stuff.get(<span class="pl-v">debug</span><span class="pl-k">=</span><span class="pl-c1">False</span>)
api.other.stuff.get(<span class="pl-v">debug</span><span class="pl-k">=</span><span class="pl-c1">True</span>)</pre></div>

<p>An example using the GitHub API:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> user <span class="pl-k">=</span> github.users.get(<span class="pl-s"><span class="pl-pds">'</span>octocat<span class="pl-pds">'</span></span>)
Executing <span class="pl-c1">GET</span> request:
    <span class="pl-c1">URL</span>:     https:<span class="pl-k">//</span>api.github.com<span class="pl-k">/</span>users<span class="pl-k">/</span>octocat
    headers: {}
    query:   <span class="pl-c1">None</span>
    data:    <span class="pl-c1">None</span>

Got <span class="pl-c1">200</span> <span class="pl-c1">OK</span>:
    {<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>public_repos<span class="pl-pds">'</span></span>: <span class="pl-c1">5</span>, <span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>site_admin<span class="pl-pds">'</span></span>: <span class="pl-c1">...</span></pre></div>

<p><em>Enjoy your data.</em></p>
</article>
  </div></body></html>