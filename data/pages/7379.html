<html><body><div><div class="entry-content" itemprop="mainContentOfPage">
		<p>This post is for all the developers and mathematicians out there that are curious to explore and visualize the bizarre properties of numbers. Although Maths plays an important role in today’s technology, many people likes to <del>ab</del>use it for <strong>recreational purposes</strong>. Part of the appeal of <a href="https://en.wikipedia.org/wiki/Recreational_mathematics" target="_blank">Recreational Maths</a> lies in the challenge to discover something new. Despite what many believe, finding mathematical patterns is very easy; it’s discovering something useful that is incredibly challenging. If you’re up for such a challenge, this tutorial will teach you how to use Python to calculate some of the most <del>in</del>famous numerical sequences.</p>

<p><span id="more-3386"/></p>
<h3><a id="part0"/>Part 0. Unlimited precision</h3>
<p>If you are familiar with Python, it is not uncommon to discover native features which would be challenging to replicate in other languages. One of the most intriguing is the way Python handles 


			<span id="crayon-56d5c8efa72fa263014008" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">long</span></span></span> integers. While standard 


			<span id="crayon-56d5c8efa730d128513669" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">int</span></span></span>s have a 32bit precision, 


			<span id="crayon-56d5c8efa7316662949390" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">long</span></span></span>s can store arbitrarily big integers. This feature is native in Python, and does not requires any additional piece of code: when an 


			<span id="crayon-56d5c8efa731e887428702" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">int</span></span></span> becomes too large, it is automatically cast to 


			<span id="crayon-56d5c8efa7327057375161" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">long</span></span></span>. Compared to Java or C#, Python is perfect to work with very long numbers. The best hidden features of Python have been discussed in the tutorial <a href="http://www.alanzucconi.com/?p=3392" target="_blank">The Top 5 Hidden Features of Python</a>.</p>
<h3><a id="part1"/>Part 1. Working with digits</h3>
<p>Many numerical sequences which are classified as <em>recreational Maths</em> work by manipulating the digits of a number. Converting a number in the list of its digits is surprisingly easy in Python:</p>
<p/>



		<div id="crayon-56d5c8efa7330624152380" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa7330624152380-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">int_to_list</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa7330624152380-2"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-k ">map</span><span class="crayon-sy">(</span><span class="crayon-k ">int</span><span class="crayon-sy">,</span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p>The number is firstly converted into a string using 


			<span id="crayon-56d5c8efa7338760149274" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span></span></span>; it is then passed into 


			<span id="crayon-56d5c8efa7341557387275" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">map</span></span></span> which converts each character of the string into an integer.</p>
<p/>



		<div id="crayon-56d5c8efa7349273657861" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5c8efa7349273657861-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-e">int_to_list</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1234567890</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa7349273657861-2"><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">6</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">7</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">8</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h4>Narcissistic numbers</h4>
<p>Let’s use this to calculate <a href="http://mathworld.wolfram.com/NarcissisticNumber.html" target="_blank">Narcissistic numbers</a> (OEIS <a href="http://oeis.org/A005188" target="_blank">A005188</a>); a number of <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-4e8716946f6a868f015e0d62f28bc540_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="d" title="Rendered by QuickLaTeX.com"/> digits is narcissistic if it’s equal to the sum of the <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-14e9238cdf6949a72b04628de78c04b2_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="d^{th}" title="Rendered by QuickLaTeX.com"/> power of its digits. For instance, <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-b53db9b875dae35c30562eba5f20812d_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="153" title="Rendered by QuickLaTeX.com"/> is narcissistic since <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-05d3e9e9aaec50ee90ad98b1e8f3d8d2_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="153=1^3+5^3+3^3" title="Rendered by QuickLaTeX.com"/>. These numbers are rather useless and they are “<em>very suitable for puzzle columns and likely to amuse amateurs, but there is nothing in them which appeals to the mathematician</em>” (<a href="https://en.wikipedia.org/wiki/G._H._Hardy" target="_blank">G. H. Hardy</a>, 1993).</p>
<p>The following code checks whether a number is narcissistic or not:</p>
<p/>



		<div id="crayon-56d5c8efa7353332569929" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa7353332569929-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">is_narcissistic</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-56d5c8efa7353332569929-2"><span class="crayon-h">	</span><span class="crayon-v">d</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">int_to_list</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5c8efa7353332569929-3"><span class="crayon-h">	</span><span class="crayon-v">e</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa7353332569929-4"><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">x</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">d</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5c8efa7353332569929-5"><span class="crayon-h">		</span><span class="crayon-v">e</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">d</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa7353332569929-6"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">n</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p>The for loop can be replaced by a 


			<span id="crayon-56d5c8efa735b310651379" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">map</span></span></span> function, which calculates the <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-14e9238cdf6949a72b04628de78c04b2_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="d^{th}" title="Rendered by QuickLaTeX.com"/> power of each digit:</p>
<p/>



		<div id="crayon-56d5c8efa7364306662633" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa7364306662633-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">is_narcissistic</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa7364306662633-2"><span class="crayon-h">	</span><span class="crayon-v">d</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">int_to_list</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5c8efa7364306662633-3"><span class="crayon-h">	</span><span class="crayon-v">e</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">sum</span><span class="crayon-sy">(</span><span class="crayon-h">	</span><span class="crayon-k ">map</span><span class="crayon-sy">(</span><span class="crayon-r">lambda</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">d</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">d</span><span class="crayon-sy">)</span><span class="crayon-h">	</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa7364306662633-4"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">e</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">n</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p>To calculate the sequence you can simply leave this piece of code running:</p>
<p/>



		<div id="crayon-56d5c8efa736c748294937" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa736c748294937-1"><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa736c748294937-2"><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5c8efa736c748294937-3"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">is_narcissistic</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa736c748294937-4"><span class="crayon-h">		</span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5c8efa736c748294937-5"><span class="crayon-h">	</span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-o">+</span><span class="crayon-cn">1</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h4>Kaprekar numbers</h4>
<p>A slightly more interesting sequence is the one made of <a href="http://mathworld.wolfram.com/KaprekarNumber.html" target="_blank">Kaprekar numbers</a> (OEIS<a href="http://oeis.org/A006886" target="_blank"> A006886</a>). Consider an <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-b170995d512c659d8668b4e42e1fef6b_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="n" title="Rendered by QuickLaTeX.com"/>-digit number. Square it and add the right <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-b170995d512c659d8668b4e42e1fef6b_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="n" title="Rendered by QuickLaTeX.com"/> digits to the left <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-b170995d512c659d8668b4e42e1fef6b_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="n" title="Rendered by QuickLaTeX.com"/> or <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-f30b71e7fcec69d119f30f67cf09c975_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="n-1" title="Rendered by QuickLaTeX.com"/> digits. If the resultant sum is equal to the original number, then it is a Keprekar number. <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-e99b7c7ddd421682faf67e5b5f865882_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="9" title="Rendered by QuickLaTeX.com"/> satisfies this property, since <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-69b066aaf91acee70d9391b2d83f7933_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="9^2=81" title="Rendered by QuickLaTeX.com"/> and <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-e3c19bc7c372fd285b4cee112f60e9d1_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="8+1= 9" title="Rendered by QuickLaTeX.com"/> itself. Similarly <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-c352ecb394fa91f547afc4655bcfcc67_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="297^2=88209" title="Rendered by QuickLaTeX.com"/> and <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-be27b9c3c3857a95d16dfbff1bb5180f_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="88+209=297" title="Rendered by QuickLaTeX.com"/>.</p>
<p>What makes it more interesting is that it requires to split a number into digits and then to join them. Once again, Python offers a very elegant way of doing this:</p>
<p/>



		<div id="crayon-56d5c8efa7376633304358" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa7376633304358-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">list_to_int</span><span class="crayon-sy">(</span><span class="crayon-v">ns</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa7376633304358-2"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-s">''</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-k ">map</span><span class="crayon-sy">(</span><span class="crayon-k ">str</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ns</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>What we have to do now is to split the left and right side of the digits into two separate lists. To get the left 


			<span id="crayon-56d5c8efa737e411796456" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">n</span></span></span> elements of a list 


			<span id="crayon-56d5c8efa7386237318044" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">d</span></span></span> in Python one can write 


			<span id="crayon-56d5c8efa738e204450550" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">d</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-o">-</span><span class="crayon-v">n</span><span class="crayon-sy">]</span></span></span>; for the right 


			<span id="crayon-56d5c8efa7396921856759" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">n</span></span></span> elements 


			<span id="crayon-56d5c8efa739e768557233" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">d</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">n</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></span></span> can be used instead.</p>



		<div id="crayon-56d5c8efa73a6607919806" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa73a6607919806-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">is_kaprekar</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73a6607919806-2"><span class="crayon-h">	</span><span class="crayon-v">nn</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-h">	</span><span class="crayon-e">int_to_list</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-h">	</span><span class="crayon-sy">)</span><span class="crayon-h">	</span><span class="crayon-c"># Digits original numbers</span></p><p class="crayon-line" id="crayon-56d5c8efa73a6607919806-3"><span class="crayon-h">	</span><span class="crayon-v">d</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">int_to_list</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-cn">2</span><span class="crayon-sy">)</span><span class="crayon-h">			</span><span class="crayon-c"># Square</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73a6607919806-4"><span class="crayon-h">	</span><span class="crayon-v">d_l</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">d</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-o">-</span><span class="crayon-v">nn</span><span class="crayon-sy">]</span><span class="crayon-h">	</span><span class="crayon-c"># Left side</span></p><p class="crayon-line" id="crayon-56d5c8efa73a6607919806-5"><span class="crayon-h">	</span><span class="crayon-v">d_r</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">d</span><span class="crayon-sy">[</span><span class="crayon-o">-</span><span class="crayon-v">nn</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-h">	</span><span class="crayon-c"># Right side</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73a6607919806-6"> </p><p class="crayon-line" id="crayon-56d5c8efa73a6607919806-7"><span class="crayon-h">	</span><span class="crayon-c"># Right term can't be zero (by convention)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73a6607919806-8"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">d_r</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5c8efa73a6607919806-9"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73a6607919806-10"> </p><p class="crayon-line" id="crayon-56d5c8efa73a6607919806-11"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">list_to_int</span><span class="crayon-sy">(</span><span class="crayon-v">d_l</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-e">list_to_int</span><span class="crayon-sy">(</span><span class="crayon-v">d_r</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h3><a id="part2"/>Step 2. Working with sequences</h3>
<p>Some numbers requires a more complex approach. This is the case for <a href="https://en.wikipedia.org/wiki/Happy_number" target="_blank">happy numbers</a> (OEIS <a href="https://oeis.org/A007770" target="_blank">A007770</a>). Finding if a number is happy or sad (not happy) requires an iterative computation. Let’s start with the <strong>happification</strong>, a process in which you take the digits of a number, square and sum them up:</p>
<p>
</p><p class="ql-center-displayed-equation"><span class="ql-right-eqno">   </span><span class="ql-left-eqno">   </span><img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-2b3027ce2c2fc08cd45ddb7fcadb4275_l3.png" class="ql-img-displayed-equation quicklatex-auto-format" alt="\[happy\left( 13\right)=1^2+3^2=10\]" title="Rendered by QuickLaTeX.com"/></p>

<p>A number is happy if repeating this process leads to <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-4868771cbc422b5818f85500909ce433_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="1" title="Rendered by QuickLaTeX.com"/>. In this example, <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-837d0d6b05c238eddf106b68ec9dcfd6_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="13" title="Rendered by QuickLaTeX.com"/> is indeed happy, since <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-b77cb4d713ead66e897c3dc5d2b5e135_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="happy\left( 10\right)=1" title="Rendered by QuickLaTeX.com"/>. An interesting property of the happification is that numbers either end up at <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-4868771cbc422b5818f85500909ce433_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="1" title="Rendered by QuickLaTeX.com"/>, or they get stuck in a loop made of <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-6111a899fd636b7a5238708f8679f6ec_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="4" title="Rendered by QuickLaTeX.com"/>, <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-8dde8d4cade60a4f3ca0e779512b974c_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="16" title="Rendered by QuickLaTeX.com"/>, <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-f376e377e1f60689acd60d0cf526a6aa_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="37" title="Rendered by QuickLaTeX.com"/>, <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-5c04d88fcf64566a852d0a051ac00e70_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="58" title="Rendered by QuickLaTeX.com"/>, <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-b98da7c985053d158d19790d72a1f782_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="89" title="Rendered by QuickLaTeX.com"/>, <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-6de2dbcaaf625937ff5929feb5b7ee47_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="145" title="Rendered by QuickLaTeX.com"/>, <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-663d228316bfd115aace82901fc82ec6_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="42" title="Rendered by QuickLaTeX.com"/> and <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-930d01a5f622cee5952bab4752e56063_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="20" title="Rendered by QuickLaTeX.com"/>. <a href="https://www.youtube.com/watch?v=_DpzAvb3Vk4" target="_blank">Numberphile</a> has covered this in a video in which <a href="https://twitter.com/standupmaths" target="_blank">Matt Parker</a> coined the term <strong>melancoil</strong>.</p>
<p><iframe src="https://www.youtube.com/embed/_DpzAvb3Vk4?feature=oembed" frameborder="0" allowfullscreen="">VIDEO</iframe></p>
<p>The function 


			<span id="crayon-56d5c8efa73b2954008961" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">is_happy</span></span></span> determines whether a number is happy or not; it keeps happifying the number until it gets <img src="http://www.alanzucconi.com/wp-content/ql-cache/quicklatex.com-4868771cbc422b5818f85500909ce433_l3.png" class="ql-img-inline-formula quicklatex-auto-format" alt="1" title="Rendered by QuickLaTeX.com"/> or a loop:</p>
<p/>



		<div id="crayon-56d5c8efa73ba700978668" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5c8efa73ba700978668-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5c8efa73ba700978668-2">2</p><p class="crayon-num" data-line="crayon-56d5c8efa73ba700978668-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5c8efa73ba700978668-4">4</p><p class="crayon-num" data-line="crayon-56d5c8efa73ba700978668-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5c8efa73ba700978668-6">6</p><p class="crayon-num" data-line="crayon-56d5c8efa73ba700978668-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5c8efa73ba700978668-8">8</p><p class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="crayon-56d5c8efa73ba700978668-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5c8efa73ba700978668-10">10</p><p class="crayon-num" data-line="crayon-56d5c8efa73ba700978668-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5c8efa73ba700978668-12">12</p><p class="crayon-num" data-line="crayon-56d5c8efa73ba700978668-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5c8efa73ba700978668-14">14</p><p class="crayon-num" data-line="crayon-56d5c8efa73ba700978668-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5c8efa73ba700978668-16">16</p><p class="crayon-num crayon-marked-num crayon-top crayon-bottom" data-line="crayon-56d5c8efa73ba700978668-17">17</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa73ba700978668-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">is_happy</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">l</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73ba700978668-2"><span class="crayon-h">	</span><span class="crayon-v">seen_numbers</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5c8efa73ba700978668-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73ba700978668-4"><span class="crayon-h">	</span><span class="crayon-c"># End of tree</span></p><p class="crayon-line" id="crayon-56d5c8efa73ba700978668-5"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73ba700978668-6"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">True</span></p><p class="crayon-line" id="crayon-56d5c8efa73ba700978668-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73ba700978668-8"><span class="crayon-h">	</span><span class="crayon-v">ns</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">int_to_list</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5c8efa73ba700978668-9"><span class="crayon-h">	</span><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">sum</span><span class="crayon-sy">(</span><span class="crayon-k ">map</span><span class="crayon-sy">(</span><span class="crayon-r">lambda</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ns</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73ba700978668-10"> </p><p class="crayon-line" id="crayon-56d5c8efa73ba700978668-11"><span class="crayon-h">	</span><span class="crayon-c"># We are looping!</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73ba700978668-12"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-i">s</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">seen_numbers</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5c8efa73ba700978668-13"><span class="crayon-h">		</span><span class="crayon-v">l</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73ba700978668-14"><span class="crayon-h">		</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">False</span></p><p class="crayon-line" id="crayon-56d5c8efa73ba700978668-15"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73ba700978668-16"><span class="crayon-h">	</span><span class="crayon-c"># Recursive step</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5c8efa73ba700978668-17"><span class="crayon-h">	</span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">is_happy</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">l</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p>It’s important to remember that despite Python’s ability to work with arbitrarily large numbers<span>,</span> the function 


			<span id="crayon-56d5c8efa73c3502028051" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">is_happy</span></span></span> cannot. This is because Python has a recursion depth limit. You can extend it using:</p>
<p/>



		<div id="crayon-56d5c8efa73cb301604413" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa73cb301604413-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">sys</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73cb301604413-2"><span class="crayon-k ">sys</span><span class="crayon-sy">.</span><span class="crayon-e">setrecursionlimit</span><span class="crayon-sy">(</span><span class="crayon-cn">10000</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p>Another alternative is to avoid recursion altogether:</p>
<p/>



		<div id="crayon-56d5c8efa73d3888107333" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa73d3888107333-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">is_happy</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73d3888107333-2"><span class="crayon-h">    </span><span class="crayon-v">seen_numbers</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">set</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5c8efa73d3888107333-3"><span class="crayon-h">    </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">seen_numbers</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73d3888107333-4"><span class="crayon-h">        </span><span class="crayon-v">seen_numbers</span><span class="crayon-sy">.</span><span class="crayon-e">add</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5c8efa73d3888107333-5"><span class="crayon-h">        </span><span class="crayon-v">ns</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">int_to_list</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73d3888107333-6"><span class="crayon-h">        </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">sum</span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-k ">map</span><span class="crayon-sy">(</span><span class="crayon-r">lambda</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ns</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5c8efa73d3888107333-7"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p>Since we are storing the numbers in a list, the function is again limited by the amount of memory available. A further improvement is to remove any memory requirement by hard-coding the melancoil numbers in the function:</p>
<p/>



		<div id="crayon-56d5c8efa73dc454826612" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5c8efa73dc454826612-1"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">is_happy</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-56d5c8efa73dc454826612-2"><span class="crayon-h">    </span><span class="crayon-v">melancoil</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-cn">4</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">16</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">37</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">58</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">89</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">145</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">42</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5c8efa73dc454826612-3"><span class="crayon-h">    </span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-i">n</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">melancoil</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73dc454826612-4"><span class="crayon-h">        </span><span class="crayon-v">ns</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">int_to_list</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5c8efa73dc454826612-5"><span class="crayon-h">        </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">sum</span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-k ">map</span><span class="crayon-sy">(</span><span class="crayon-r">lambda</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">x</span><span class="crayon-o">*</span><span class="crayon-o">*</span><span class="crayon-cn">2</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ns</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73dc454826612-6"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p>The above function works only because all the sad numbers eventually end up in the melancoil loop.</p>
<h3><a id="part3"/>Step 3. Visualising graphs</h3>
<p>The happification process naturally links numbers to each other. The result is a network graph which can be hard to see within the Python console. The best way to show the relationships between them is to visualise them with a graph. This is discussed in the tutorial <a href="http://www.alanzucconi.com/?p=3460" target="_blank">Interactive Graphs in the Browser</a>. <strong>You can see the result in the interactive graph below:</strong></p>




<p>You can find a high resolution version (2000x2000px, first 1000 numbers) here: <a href="https://drive.google.com/file/d/0B4nCcaMlgxV2UWVEREdUYUV0SVk/view?usp=sharing" target="_blank">PNG</a>, <a href="https://drive.google.com/file/d/0B4nCcaMlgxV2SUxhakdWTU1lcmM/view?usp=sharing" target="_blank">SVG</a>, <a href="http://www.alanzucconi.com/extra/d3/melancoil_1000/" target="_blank">HTML</a>.</p>
<h3><a id="part4"/>Step 4. Parallel computation</h3>
<p>If the sequence you are trying to calculate works on very big numbers, it might take longer and longer to run. Calculating several numbers in parallel can help speed up the process, especially if you have multiple cores. There are several ways to implement <strong>parallel computation</strong> in Python; this example relies on the 


			<span id="crayon-56d5c8efa73e8242845083" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">joblib</span></span></span> package:</p>
<p/>



		<div id="crayon-56d5c8efa73f0224879875" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5c8efa73f0224879875-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">joblib </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Parallel</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">delayed</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73f0224879875-2"> </p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5c8efa73f0224879875-3"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'__main__'</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73f0224879875-4"><span class="crayon-h">	</span><span class="crayon-v">tasks</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">4</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5c8efa73f0224879875-5"><span class="crayon-h">	</span><span class="crayon-st">with</span><span class="crayon-h"> </span><span class="crayon-e">Parallel</span><span class="crayon-sy">(</span><span class="crayon-v">n_jobs</span><span class="crayon-o">=</span><span class="crayon-v">tasks</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">parallel</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73f0224879875-6"><span class="crayon-h">		</span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span></p><p class="crayon-line" id="crayon-56d5c8efa73f0224879875-7"><span class="crayon-h">		</span><span class="crayon-st">while</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73f0224879875-8"><span class="crayon-h">			</span><span class="crayon-c"># Calculate</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5c8efa73f0224879875-9"><span class="crayon-h">			</span><span class="crayon-v">results</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">parallel</span><span class="crayon-sy">(</span><span class="crayon-e">delayed</span><span class="crayon-sy">(</span><span class="crayon-v">function_to_calculate</span><span class="crayon-sy">)</span><span class="crayon-sy">(</span><span class="crayon-v">n</span><span class="crayon-o">+</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h">	</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">i</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">range</span><span class="crayon-sy">(</span><span class="crayon-v">tasks</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73f0224879875-10"> </p><p class="crayon-line" id="crayon-56d5c8efa73f0224879875-11"><span class="crayon-h">			</span><span class="crayon-c"># Print</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73f0224879875-12"><span class="crayon-h">			</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">result </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-k ">enumerate</span><span class="crayon-sy">(</span><span class="crayon-v">results</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5c8efa73f0224879875-13"><span class="crayon-h">				</span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-o">+</span><span class="crayon-v">i</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"\t"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">result</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5c8efa73f0224879875-14"> </p><p class="crayon-line" id="crayon-56d5c8efa73f0224879875-15"><span class="crayon-h">			</span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">n</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-v">tasks</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p><strong>Line 5</strong> opens a 


			<span id="crayon-56d5c8efa73f9106537622" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-st">with</span></span></span> section which creates four parallel processes. Every process has overhead, so it’s important to use a reasonable number; using too many processes can actually slow down your calculations. Within the parallel block, the computation is done with the function 


			<span id="crayon-56d5c8efa7402322181215" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">parallel</span></span></span>, which is fed four tasks. The function 


			<span id="crayon-56d5c8efa740a511446384" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">delayed</span></span></span> allows the user to specify the name of the function that will be executed separately. Evaluating results forces the program to wait until all of the processes are completed.</p>
<p>It is important to notice that in order for this code to work, everything has to be inside a 


			<span id="crayon-56d5c8efa7412908779947" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">__main__</span></span></span> section; this is because when the processes start they will execute the current file again.</p>
<h3><a id="conclusion"/>Conclusion</h3>
<p>This tutorial has shown how Python can be used effectively to calculate numerical sequences of arbitrary length. Recreational Maths is a very intriguing field, which can sometimes produce beautiful things such as <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" target="_blank">Conway’s Game of Life</a>. I strongly encourage you to explore the bizarre properties of numbers, and see if you can find something new.</p>
<p>If you are interested in this topic, you might also find the following tutorials interesting:</p>

<hr/>



<hr/>

<h5>Ways to Support</h5>
<p>In the past months I've been dedicating more and more of my time to the creation of quality tutorials, mainly about <em>game development</em> and <em>machine learning</em>. If you think these posts have either helped or inspired you, please consider supporting me.</p>

<div><a href="https://www.patreon.com/AlanZucconi" target="_blank"><img class="alignnone size-full wp-image-2844 aligncenter" src="http://www.alanzucconi.com/wp-content/uploads/2015/09/patreon.png" alt="Patreon"/></a><strong>Become a Patron
<a href="https://www.patreon.com/AlanZucconi" target="_blank"><img class="alignnone size-full wp-image-2848" src="http://www.alanzucconi.com/wp-content/uploads/2015/09/Oo4th_patreon_name.png" alt="Oo4th_patreon_name"/></a>
</strong></div>
<div>

<a href="https://www.paypal.me/AlanZucconi" target="_blank"><img class="alignnone size-full wp-image-2844 aligncenter" src="http://www.alanzucconi.com/wp-content/uploads/2015/09/Paypal-Logo-Transparent-png-format-large-size.png" alt="Paypal"/></a><strong>Donate on PayPal
</strong>

</div>

<p/>
					</div>
	

			</div></body></html>