<html><body><div><p>Library for running asynchronous parallel SSH commands over many hosts.</p>
<div id="usage-example">
<h2>Usage Example</h2>
<p>See documentation on <a href="http://parallel-ssh.readthedocs.org/en/latest/" rel="nofollow">read the docs</a> for more complete examples.</p>
<p>Run <cite>ls</cite> on two remote hosts in parallel.</p>
<pre>&gt;&gt;&gt; from pssh import ParallelSSHClient
&gt;&gt;&gt; hosts = ['myhost1', 'myhost2']
&gt;&gt;&gt; client = ParallelSSHClient(hosts)
&gt;&gt;&gt; output = client.run_command('ls -ltrh /tmp/', sudo=True)
&gt;&gt;&gt; print output
{'myhost1': {'exit_code': 0, 'stdout': &lt;generator&gt;, 'stderr': &lt;generator&gt;, 'channel': &lt;channel&gt;, 'cmd' : &lt;greenlet&gt;, 'exception' : None},
 'myhost2': {'exit_code': 0, 'stdout': &lt;generator&gt;, 'stderr': &lt;generator&gt;, 'channel': &lt;channel&gt;, 'cmd' : &lt;greenlet&gt;, 'exception' : None}}
</pre>
<p>Stdout and stderr buffers are available in output. Iterating on them can be used to get output as it becomes available. Iteration ends <em>only when command has finished</em>.</p>
<pre>&gt;&gt;&gt; for host in output:
&gt;&gt;&gt;     for line in output[host]['stdout']:
&gt;&gt;&gt;         print "Host %s - output: %s" % (host, line)
Host myhost1 - output: drwxr-xr-x  6 xxx xxx 4.0K Jan  1 00:00 xxx
Host myhost2 - output: drwxr-xr-x  6 xxx xxx 4.0K Jan  1 00:00 xxx
</pre>
<p>Joining on the connection pool can be used to block and wait for all parallel commands to finish if reading stdout/stderr is not required.</p>
<pre>&gt;&gt;&gt; client.pool.join()
</pre>
</div>
<div id="sftp-scp">
<h2>SFTP/SCP</h2>
<p>SFTP is supported (SCP version 2) natively, no <cite>scp</cite> command required.</p>
<p>For example to copy a local file to remote hosts in parallel</p>
<pre>&gt;&gt;&gt; from pssh import ParallelSSHClient
&gt;&gt;&gt; hosts = ['myhost1', 'myhost2']
&gt;&gt;&gt; client = ParallelSSHClient(hosts)
&gt;&gt;&gt; client.copy_file('../test', 'test_dir/test')
&gt;&gt;&gt; client.pool.join()
Copied local file ../test to remote destination myhost1:test_dir/test
Copied local file ../test to remote destination myhost2:test_dir/test
</pre>
</div>


</div></body></html>