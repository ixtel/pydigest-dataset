<html><body><div><div class="entry-content">
		<p> </p>
<p><a href="https://impythonist.files.wordpress.com/2015/07/python_flute.jpg"><img class="aligncenter  wp-image-1074" src="https://impythonist.files.wordpress.com/2015/07/python_flute.jpg?w=437&amp;h=328" alt="python_flute"/></a></p>
<p>Hello everyone. Now a days developers need to perform many jobs. Like web development, database development, API development and so on. Some companies are just having jobs called API developer on their openings sheet.What role APIs are playing now and why one should learn building them is our topic today. Developing an API with Python is a very easy task when compared to other languages. So,sit back and grab this skill for you. Take my words ,this skill is hot right now in the market.</p>
<h2 id="toc_0">What is a REST API?</h2>
<p>REST (REpresentational State Transfer) is an architectural style, and an approach to communications that is often used in the development of <a href="http://searchsoa.techtarget.com/definition/Web-Services-Glossary">Web services</a>. The use of REST is often preferred over the more heavyweight <a href="http://searchsoa.techtarget.com/definition/SOAP">SOAP</a> (Simple Object Access Protocol) style because REST does not leverage as much bandwidth, which makes it a better fit for use over the Internet. The SOAP approach requires writing or using a provided server program (to serve data) and a client program (to request data).</p>
<p>In simple three lines REST API is a:</p>
<p>1 ) A way to expose your internal system to the outside world.</p>
<p>2) Programmatic way of interfacing third party systems.</p>
<p>3) Communication between different domains and technologies.</p>
<p>I think we are sounding technical. let us jump into practical things.By the end of this tutorial ,you will be comfortable in creating any API using Python and Flask.</p>
<h2 id="toc_0">Ingredients to build our API</h2>
<p>We are going to use these things to build a running API.</p>
<p>*  Python</p>
<p>*  Flask web framework</p>
<p>*  Flask-RESTFul extension</p>
<p>*  SQLite3</p>
<p>* SQLAlchemy</p>
<h2 id="toc_0">Let us build Chicago employees salary API under 30 lines of code</h2>
<p>I am going to build a Salary info API of Chicago city employees. Do you know ?,it is damn easy. An API can give you computation result or data from a remote database in a nice format. It is what API is intended for.API is a bridge between private databases and applications. I am collecting employee salary details from Chicago city data website <a href="https://data.cityofchicago.org">data.cityofchicago.org</a></p>
<p>code of this entire project can be found at this link <a href="https://github.com/narenaryan/Salary-API">https://github.com/narenaryan/Salary-API</a></p>
<p>Let’s begin the show……..</p>
<p>First , i downloaded the data-set as CSV and dumped it into my sqlite database.</p>
<pre class="code-pre "><span>$ sqlite3 salaries.db
sqlite&gt; .mode csv salaries
sqlite&gt; .import employee_chicago.csv salaries</span></pre>
<p>and imported CSV.</p>
<p>Now we are going to build a flask app that serves this data as a REST API.</p>
<pre class="code-pre "><span>$ virtualenv rest-api
$ source rest-api/bin/activate
$ mkdir ~/rest-app
$ cd ~/rest-app</span></pre>
<p>Now we are in the main folder of app.Create a file called app.py in that folder.We need few libraries to finish our task.Install them by typing below commands.</p>
<pre class="code-pre "><span>$ pip install flask
$ pip install flask-restful
$ pip install sqlalchemy</span></pre>
<p>That’s it. We are ready to build a cool salary API that can even be accessed through mobile. Let us recall the REST API design .It has 4 options. GET,PUT,POST,DELETE</p>
<p><a href="https://impythonist.files.wordpress.com/2015/07/rstapi.jpg"><img class="aligncenter size-full wp-image-1077" src="https://impythonist.files.wordpress.com/2015/07/rstapi.jpg?w=1000" alt="rstapi"/></a></p>
<p> </p>
<p>here we are  dealing with an open data which can be accessed by multiple applications. So we implement GET here and remaining REST options becomes quite obvious.</p>
<p> </p>
<pre class="code-pre "><span>from flask import Flask, request
from flask_restful import Resource, Api
from sqlalchemy import create_engine
from json import dumps

#Create a engine for connecting to SQLite3.
#Assuming salaries.db is in your app root folder

e = create_engine('sqlite:///salaries.db')

app = Flask(__name__)
api = Api(app)

class Departments_Meta(Resource):
    def get(self):
        #Connect to databse
        conn = e.connect()
        #Perform query and return JSON data
        query = conn.execute("select distinct DEPARTMENT from salaries")
        return {'departments': [i[0] for i in query.cursor.fetchall()]}

class Departmental_Salary(Resource):
    def get(self, department_name):
        conn = e.connect()
        query = conn.execute("select * from salaries where Department='%s'"%department_name.upper())
        #Query the result and get cursor.Dumping that data to a JSON is looked by extension
        result = {'data': [dict(zip(tuple (query.keys()) ,i)) for i in query.cursor]}
        return result
        #We can have PUT,DELETE,POST here. But in our API GET implementation is sufficient
 
api.add_resource(Departmental_Salary, '/dept/&lt;string:department_name&gt;')
api.add_resource(Departments_Meta, '/departments')

if __name__ == '__main__':
     app.run()
</span></pre>
<p>save it as app.py and run as</p>
<pre class="code-pre "><span> $ python app.py </span></pre>
<p>That’s it. Your salary API is up and running now on localhost , port 5000. There are two rules we defined in the API. One is to get details of all departments available and second is to get employee full detail, who is working in a particular department.</p>
<p>So now go to</p>
<p><a href="http://localhost:5000/departments" rel="nofollow">http://localhost:5000/departments</a></p>
<p>and you will find this.</p>
<p><a href="https://impythonist.files.wordpress.com/2015/07/selection_074.png"><img class="aligncenter size-full wp-image-1081" src="https://impythonist.files.wordpress.com/2015/07/selection_074.png?w=1000" alt="Selection_074"/></a></p>
<p>See how flask is serving database data into JSON through the REST API we defined. Next modify URL to peek all employees who are working in Police department.</p>
<p><a href="http://localhost:5000/dept/police" rel="nofollow">http://localhost:5000/dept/police</a></p>
<p><a href="https://impythonist.files.wordpress.com/2015/07/selection_073.png"><img class="aligncenter size-full wp-image-1083" src="https://impythonist.files.wordpress.com/2015/07/selection_073.png?w=1000" alt="Selection_073"/></a></p>
<p>Oh man, seems like police officers are well paid in Chicago but they can’t beat a Django or Python developer who earns $ 1,00,000 per annum. just kidding.</p>
<p>My code walk-through is as follows</p>
<p>*  I downloaded latest Salary dataset from chicago data site</p>
<p>*  Dumped that CSV  into my SQLite db.</p>
<p>*  Used SQLAlchemy to connect to database and do select operations.</p>
<p>*  Created Flask-Restful classes to map functions with API URL</p>
<p>*  Returned the queried data as JSON ,which can be used universally.</p>
<p>See how simple it is to create a data API. We can also add support to PUT,POST and DELETE on data too.We can also have an authentication system for fetching data through API. Python and Flask are very powerful tools to create API rapidly. GitHub link is given below. Give it a try and extend it with the things mentioned above.</p>
<p><a href="//github.com/narenaryan/Salary-API">https://github.com/narenaryan/Salary-API</a></p>
<p>See you soon with more stories.</p>
		<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded" id="like-post-wrapper-62549587-1068-56d5a03aa80ad" data-src="//widgets.wp.com/likes/#blog_id=62549587&amp;post_id=1068&amp;origin=impythonist.wordpress.com&amp;obj_id=62549587-1068-56d5a03aa80ad" data-name="like-post-frame-62549587-1068-56d5a03aa80ad"><h3 class="sd-title">Like this:</h3><p class="likes-widget-placeholder post-likes-widget-placeholder"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></p><span class="sd-text-color"/><a class="sd-link-color"/></div>
<p id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</p></div>					</div>

	</div></body></html>