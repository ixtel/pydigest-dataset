<html><body><div><div id="content">

            

            
        


            <div class="section">
              <h1>Signaller 1.1.0</h1>

              


<p>Signals and slots implementation with asyncio support</p>








<p>Signals and slots implementation with asyncio support</p>
<p>Slots can be functions, methods or coroutines. Weak references are used by default.
If slot is coroutine, it will be scheduled to run asynchronously with <tt>asyncio.async()</tt>
(but you must run event loop by yourself).</p>
<p>You can also run blocking functions asynchronously by specifying <tt>force_async=True</tt> when
connecting signal to slot (it will only apply to that slot) or when creating signal (it will
apply to all connected slots). ThreadPoolExecutor with 5 worker threads is used by default,
but it can be changed when creating signal with <tt>executor</tt> argument.</p>

<div id="usage">
<h2>Usage</h2>
<p>Example:</p>
<pre><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">signaller</span> <span class="kn">import</span> <span class="n">Signal</span><span class="p">,</span> <span class="n">autoconnect</span>

<span class="c1"># Enable verbose logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="c1"># Creating signals (you can set signal name, but it is not required,</span>
<span class="c1"># signals can be anonymous):</span>
<span class="n">sig_test</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="s1">'sig_test'</span><span class="p">)</span>

<span class="c1"># Connecting signals to slots (uses weak references by default,</span>
<span class="c1"># but you can force strong references by specifying weak=False):</span>
<span class="k">def</span> <span class="nf">slot</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">'slot:'</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>

<span class="n">sig_test</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">slot</span><span class="p">)</span>
<span class="n">sig_test</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span> <span class="n">arg</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s1">'slot_lambda:'</span><span class="p">,</span> <span class="n">arg</span><span class="p">),</span> <span class="n">weak</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="c1"># You can also use decorators for connecting signals to slots:</span>
<span class="nd">@sig_test.connect</span>
<span class="k">def</span> <span class="nf">slot2</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">'slot2:'</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>

<span class="c1"># And keyword arguments can be specified when using decorators too:</span>
<span class="nd">@sig_test.connect</span><span class="p">(</span><span class="n">force_async</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">slot3</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">'slot3:'</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>

<span class="c1"># You can also use decorators on methods, then signals will be connected to instance</span>
<span class="c1"># methods automatically whenever new instance is created. But you must decorate class</span>
<span class="c1"># with @autoconnect decorator for autoconnection to work. Class methods and</span>
<span class="c1"># static methods are not supported.</span>
<span class="nd">@autoconnect</span>
<span class="k">class</span> <span class="nc">Cls</span><span class="p">:</span>
    <span class="nd">@sig_test.connect</span>
    <span class="k">def</span> <span class="nf">slot4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'slot4:'</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">Cls</span><span class="p">()</span>

<span class="c1"># Slots are automatically disconnected from signals</span>
<span class="c1"># when using weak references:</span>
<span class="k">del</span> <span class="n">slot</span>

<span class="c1"># Or you can disconnect slots manually:</span>
<span class="n">sig_test</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">slot2</span><span class="p">)</span>

<span class="c1"># Emitting signals (you can send both positional and keyword</span>
<span class="c1"># arguments to connected slots):</span>
<span class="n">sig_test</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">'Hello world!'</span><span class="p">)</span>
</pre>
<p>Output:</p>
<pre>INFO:signaller:Connecting signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt; to slot &lt;function slot at 0x7f3c46cc6f28&gt;
INFO:signaller:Connecting signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt; to slot &lt;function &lt;lambda&gt; at 0x7f3c468c97b8&gt;
INFO:signaller:Connecting signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt; to slot &lt;function slot2 at 0x7f3c43c9e400&gt;
INFO:signaller:Connecting signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt; to slot &lt;function slot3 at 0x7f3c43c9e598&gt;
DEBUG:signaller:Marking instance method &lt;function Cls.slot4 at 0x7f3c43c9e6a8&gt; for autoconnect to signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt;
INFO:signaller:Connecting signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt; to slot &lt;bound method Cls.slot4 of &lt;__main__.Cls object at 0x7f3c43f11d30&gt;&gt;
DEBUG:signaller:Object &lt;function slot at 0x7f3c46cc6f28&gt; has been deleted
INFO:signaller:Disconnecting slot &lt;Reference (weak) to &lt;function slot at 0x7f3c46cc6f28&gt; (dead)&gt; from signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt;
INFO:signaller:Disconnecting slot &lt;function slot2 at 0x7f3c43c9e400&gt; from signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt;
INFO:signaller:Emitting signal &lt;Signal 'sig_test' at 0x7f3c468bfc50&gt;
DEBUG:signaller:Calling slot &lt;Reference (weak) to &lt;function slot3 at 0x7f3c43c9e598&gt;&gt; asynchronously (in executor &lt;concurrent.futures.thread.ThreadPoolExecutor object at 0x7f3c468bff28&gt;)
slot3: Hello world!
DEBUG:signaller:Calling slot &lt;Reference (strong) to &lt;function &lt;lambda&gt; at 0x7f3c468c97b8&gt;&gt;
slot_lambda: Hello world!
DEBUG:signaller:Calling slot &lt;Reference (weak) to &lt;bound method Cls.slot4 of &lt;__main__.Cls object at 0x7f3c43f11d30&gt;&gt;&gt;
slot4: Hello world!
</pre>
</div>


<a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>58</span> downloads in the last week
  </li>
  <li>
    <span>502</span> downloads in the last month
  </li>
</ul>









            </div>


          </div>
          </div></body></html>