<html><body><div><p>Test-driven source code search for Python.</p>








<p>pytest-nodev is a simple test-driven search engine for live code,
it finds classes and functions matching the behaviour specified by the given tests.</p>
<div id="new-user-faq">
<h2>New user FAQ</h2>
<p><strong>What is pytest-nodev?</strong></p>
<p>To be more precise pytest-nodev is a <a href="https://pytest.org" rel="nofollow">pytest</a> plugin
that helps you execute specification tests on all objects
in the Python standard library and in all the modules you have installed.</p>
<p><strong>Who are pytest-nodev users?</strong></p>
<p>Python developers who’ve got better things to do than reinvent wheels.</p>
<p><strong>Sounds interesting, I need a function that robustly parses a boolean value from a string.</strong>
<strong>Here’s my specification test</strong>:</p>
<pre>def test_parse_bool():
    assert not parse_bool('false')
    assert not parse_bool('FALSE')
    assert not parse_bool('0')

    assert parse_bool('true')
    assert parse_bool('TRUE')
    assert parse_bool('1')
</pre>
<p><strong>Show me how searching with pytest-nodev work.</strong></p>
<p>First, install the <a href="https://pypi.python.org/pypi/pytest-nodev" rel="nofollow">latest version of pytest-nodev</a>
from the Python Package Index:</p>
<pre>$ pip install pytest-nodev
</pre>
<p>Then copy your specification test to the <tt>test_parse_bool.py</tt> file and
instrument it with the <tt>wish</tt> fixture:</p>
<pre>def test_parse_bool(wish):
    parse_bool = wish

    assert not parse_bool('false')
    assert not parse_bool('FALSE')
    assert not parse_bool('0')

    assert parse_bool('true')
    assert parse_bool('TRUE')
    assert parse_bool('1')
</pre>
<p>Finally, instruct pytest-nodev to run your test on all functions in the Python standard library:</p>
<pre>$ py.test test_parse_bool.py --wish-from-stdlib
======================= test session starts ==========================
platform darwin -- Python 3.5.0, pytest-2.8.7, py-1.4.31, pluggy-0.3.1
rootdir: /tmp, inifile: setup.cfg
plugins: nodev-1.0.0, timeout-1.0.0
collected 3259 items

test_parse_bool.py xxxxxxxxxxxx[...]xxxxxxxxXxxxxxxxx[...]xxxxxxxxxxxx

============================== 1 hit =================================

test_parse_bool.py::test_parse_bool[distutils.util:strtobool] HIT

==== 3258 xfailed, 1 xpassed, 27 pytest-warnings in 45.07 seconds ====
</pre>
<p>In less than a minute pytest-nodev collected more than 3000 functions from the standard library
and run your specification test on all of them and you’ve got a HIT.
The <a href="https://docs.python.org/3/distutils/apiref.html#distutils.util.strtobool" rel="nofollow">strtobool</a> function in the distutils.util module passes the test, so
now you should thoroughly review it and if you like it you may use it in your code,
no need to write your own implementation.</p>
<p><strong>Wow! Does it work so well all the times?</strong></p>
<p>To be honest strtobool is a little known gem of the Python standard library that
is just perfect for illustrating all the benefits of the search-by-tests strategy.
Here are some of them in rough order of importance:</p>
<ul>
<li>a function imported is a one less function coded—and tested, documented, debugged,
ported, maintained…</li>
<li>it’s battle tested code—lot’s of old bugs have already been squashed</li>
<li>it’s other people code—there’s an upstream to report new bugs to</li>
<li>it gives you additional useful functionality—for free on top of that</li>
<li>it’s in the Python standard library—no additional dependency required</li>
</ul>
</div>
<div id="big-fat-warning">
<h2>BIG FAT WARNING!</h2>
<p>A lot of functions called with the wrong set of arguments may have unexpected consequences ranging
from slightly annoying, think <tt><span class="pre">os.mkdir('false')</span></tt>,
to <strong>utterly catastrophic</strong>, think <tt><span class="pre">shutil.rmtree('/',</span> True)</tt>.
Serious use of pytest-nodev, in particular using <tt><span class="pre">--wish-from-all</span></tt>,
require operating-system level isolation,
e.g. a dedicated user or even better a dedicated container.</p>
<p>Discussion on how to best help users sandboxing pytest-nodev is ongoing,
see issue <a href="https://github.com/nodev-io/pytest-nodev/issues/16" rel="nofollow">#16</a>.</p>
</div>
</div></body></html>