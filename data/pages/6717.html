<html><body><div><div class="wall_post_text"><a href="/feed?section=search&amp;q=%23python">#python</a> <a href="/feed?section=search&amp;q=%23pynsk">#pynsk</a><p>Пишем web-проекты: Django Admin Actions</p><p>Интерфейс администратора Django достается разработчику "даром". Добавляешь немного строк кода и появляется UI где можно изменять объекты моделей. По умолчаниюю нам предоставляют GRUD возможности.</p><p>Но что если нам надо сделать какие-то дополнительные возможности?</p><p>Для примера такие действия есть в Python Дайджест:</p><a href="/away.php?to=http%3A%2F%2Fpynsk.ru%2Fimages%2Fposts%2Fdjango_actions.png&amp;post=-96469126_396" target="_blank">http://pynsk.ru/images/posts/django_actions.png</a><p>Это реализовано с помощью Django admin actions. </p><p>Примерно так:</p><p>class ItemModeratorAdmin(admin.ModelAdmin):</p><p>....actions = [</p><p>....    '_action_make_moderated',</p><p>....]</p><p>....def _action_set_queue(self, request, queryset):</p><p>....    queryset.update(status='queue')</p><p>...._action_set_queue.short_description = 'В очередь'</p><p>Можно заметить, что добавлена функция, которая принимает request и queryset. queryset - в данном случае это набор выделенных объектов (у тех что галочки стоят). </p><p>Подробная информация по ссылке:</p><a href="/away.php?to=https%3A%2F%2Fdocs.djangoproject.com%2Fen%2F1.8%2Fref%2Fcontrib%2Fadmin%2Factions%2F&amp;post=-96469126_396" target="_blank" title="https://docs.djangoproject.com/en/1.8/ref/contrib/admin/actions/">https://docs.djangoproject.com/en/1.8/ref/contrib/adm..</a></div></div></body></html>