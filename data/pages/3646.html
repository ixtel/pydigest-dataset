<html><body><div><div class="section">
              <h1>django-hijack 1.0.6</h1>

              


<p>django-hijack allows superusers to hijack (=login as) and work on behalf of another user.</p>



<p>
<strong>Latest Version: </strong><a title="Latest Version URL" href="https://pypi.python.org/pypi/django-hijack/2.0.3">
<span>2.0.3</span>
</a>
</p><p>




# Django Hijack</p><p>[![Build Status](https://travis-ci.org/arteria/django-hijack.svg?branch=master)](https://travis-ci.org/arteria/django-hijack)</p><p>![Screenshot of Hijack in action on the admin site.](https://www.arteria.ch/media/imgbucket/hijack_1.png)</p><p>[django-hijack](https://github.com/arteria/django-hijack) allows superusers to hijack (=login as) and work on behalf of other users without knowing their credentials.</p><p>## Table of contents</p><p>- [Installation](#installation)</p><p>- [Usage and modes](#usage-and-modes)</p><p>    - [Hijack Button](#hijack-using-the-hijack-button-on-the-admin-site)</p><p>    - [Hijack over url](#hijack-by-calling-urls-in-the-browsers-address-bar)</p><p>    - [Notify when logged in as a hijacked user](#notify-superusers-when-working-behalf-of-another-user)</p><p>    - [Release the hijack](#releasereverse-hijack)</p><p>        - [Hijack-History](#hijack-history)</p><p>    - [Notify user when they were hijacked](#notify-users-when-they-were-hijacked)</p><p>    - [Allow staff to hijack](#allow-staff-members-to-hijack-other-users)</p><p>    - [Django 1.4 to 1.8 compatibility with django-compat](#django-14---18-compatibility-with-django-compat)</p><p>    - [Custom user models](#support-for-custom-user-models)</p><p>- [Settings](#settings)</p><p>- [Signals](#signals)</p><p>    - [Hijacked](#superuser-logs-in)</p><p>- [TODOs, issues, planned features](#todos-issues-and-planned-features)</p><p>- [FAQ, troubleshooting and hints](#faq-troubleshooting-and-hints)</p><p>    - [SHOW_HIJACKUSER_IN_ADMIN not working](#why-does-the-hijack-button-not-show-up-in-the-admin-site-even-if-i-set-show_hijackuser_in_admin--true-in-my-project-settings)</p><p>- [Similar projects](#similar-projects)</p><p>- [Contribute](#contribute)</p><p>## Installation</p><p>To get the latest stable release from PyPi</p><p>    pip install django-hijack</p><p>To get the latest commit from GitHub</p><p>    pip install -e git+git://github.com/arteria/django-hijack.git#egg=hijack-master</p><p>In your ``settings.py`` add ``hijack`` to your ``INSTALLED_APPS`` and define ``LOGIN_REDIRECT_URL``</p><p>    INSTALLED_APPS = (</p><p>        ...,</p><p>        'hijack',</p><p>        'compat',</p><p>    )</p><p>You can specify a `HIJACK_LOGIN_REDIRECT_URL` and a `REVERSE_HIJACK_LOGIN_REDIRECT_URL`. This settings are used to redirect to a specific url after hijacking or releasing the user. Default for both is the django `LOGIN_REDIRECT_URL`.</p><p>    HIJACK_LOGIN_REDIRECT_URL = "/profile/"  # where you want to be redirected to, after hijacking the user.</p><p>    REVERSE_HIJACK_LOGIN_REDIRECT_URL = "/admin/"  # where you want to be redirected to, after releasing the user.</p><p>Add the ``hijack`` URLs to your ``urls.py``</p><p>    urlpatterns = patterns('',</p><p>        ...</p><p>        url(r'^hijack/', include('hijack.urls')),</p><p>    )</p><p>## Usage and modes</p><p>There are different possibilities to hijack a user and communicate with users.</p><p>###  Hijack using the 'Hijack Button' on the admin site</p><p>Go to Users in the admin backend and push the ‘Hijack’ button to hijack a user. This is the default mode and base version</p><p>of django-hijack. To disable the ‘Hijack’ button on the admin site (by not registrating the HijackUserAdmin) set ``SHOW_HIJACKUSER_IN_ADMIN = False`` in your project settings. If you are using a custom user model, you will have to add support for displaying the button yourself to your own `CustomUserAdmin`. Simply mix in the `hijack.admin.HijackUserAdminMixin`, and add `hijack_field` to `list_display`.</p><p>### Hijack by calling URLs in the browser's address bar</p><p>For advanced superusers, users can be hijacked directly from the address bar by typing:</p><p>* example.com/hijack/``user-id``</p><p>* example.com/hijack/email/``email-address``</p><p>* example.com/hijack/username/``username``</p><p>### Specify which user attributes are allowed to hijack on</p><p>By default all of the above methods (user id, email and username) are allowed. If you want to allow only a subset of these</p><p>you can set ALLOWED_HIJACKING_USER_ATTRIBUTES in your project settings. This will disable the other endpoints.</p><p>The settings take a list of methods to allow, you can select</p><p>from:</p><p>* user_ui</p><p>* email</p><p>* username</p><p>NOTE: The link on the admin page will change in the order listed above. Say that you have enabled *username* and *email* then</p><p>the users email will be used for the hijack link in on the admin page.</p><p>### Notify superusers when working behalf of another user</p><p>This option warns the superuser when working with another user as initally logged in. To activate this option perform</p><p>the following steps:</p><p>* In your base.html add ``{% load hijack_tags %}``, ``{%  load staticfiles %}`` and</p><p>* load the styles using ``&lt;link rel="stylesheet" type="text/css" href="{% static 'hijack/hijack-styles.css' %}"/&gt;``.</p><p>* Place ``{{ request|hijackNotification }}`` just after your opening body tag.</p><p>* In your project settings add ``HIJACK_NOTIFY_ADMIN = True``. The default is True.</p><p>* You need to add ``django.core.context_processors.request`` to your template context processors to be able to use requests and sessions in the templates.</p><p>* Make sure that ``django.contrib.staticfiles`` is included in your ``INSTALLED_APPS``.</p><p>* Do not forget to run ``python manage.py collectstatic``.</p><p>### Release/reverse hijack</p><p>In the visual notification for the superuser (or staff if ``ALLOW_STAFF_TO_HIJACKUSER`` is True), when working on behalf of other users, there</p><p>is a link to release the hijacked user and switch back. After releasing you are redirected to `LOGIN_REDIRECT_URL` or to the URL defined in `REVERSE_HIJACK_LOGIN_REDIRECT_URL`.</p><p>    REVERSE_HIJACK_LOGIN_REDIRECT_URL = '/admin/auth/user/'</p><p>The release/reverse hijack will be executed when the URL `/hijack/release-hijack/` is called (or whatever is linked to the URL with name = "release_hijack").</p><p>#### Hijack history</p><p>If you (A) hijack a superuser (B) and then you hijack another user (C), the release will go backwards through the</p><p> list of hijacked users one by one. After the first release you then are superuser (B), after the second you are superuser (A).</p><p>### Notify users when they were hijacked</p><p>NOTE: This use case is not fully implemented yet!</p><p>This option allows to notify and inform users when they were hijacked by a superuser. To activate this option</p><p>follow these steps:</p><p>* In your base.html add ``{% load hijack_tags %}``, ``{%  load staticfiles %}`` and</p><p>* load the styles using ``&lt;link rel="stylesheet" type="text/css" href="{% static 'hijack/hijack-styles.css' %}"/&gt;``.</p><p>* Place ``{{ request|hijackNotification }}`` just after your opening body tag.</p><p>* In your project settings add ``HIJACK_NOTIFY_USER = True``. The default is False (= silent mode)</p><p>* You need to add ``django.core.context_processors.request`` to your template context processors to be able to use requests and sessions in the templates.</p><p>* Make sure that ``django.contrib.staticfiles`` is included in your ``INSTALLED_APPS``.</p><p>* Do not forget to run ``python manage.py collectstatic``.</p><p>### Allow staff members to hijack other users</p><p>This option allows staff members to hijack other users. In your project settings set ``ALLOW_STAFF_TO_HIJACKUSER`` to ``True``. The default is False.</p><p>Staff members are **not allowed** to hijack admins/superusers. </p><p>### Django 1.4 - 1.8 compatibility with [django-compat](https://github.com/arteria/django-compat)</p><p>All critical imports are carried out with the [compat library](https://github.com/arteria/django-compat) that gives the compatibility for django 1.4 to 1.8</p><p>### Support for custom user models</p><p>django-hijack supports custom user models, all you need to do is to add the hijack button to your custom user `admin.py`. Import HijackUserAdminMixin from hijack admin and add ``hijack_field`` to your ``list_display``.</p><p>    # .. imports ..</p><p>    from hijack.admin import HijackUserAdminMixin</p><p>    class CustomUserAdmin(UserAdmin, HijackUserAdminMixin):</p><p>        # .. code ..</p><p>        list_display = ('email', 'first_name', 'last_name', 'is_staff', 'hijack_field')</p><p>## Settings</p><p>All configuration settings with their default value and description</p><p>    # Hijack button in admin user view; default = True</p><p>    SHOW_HIJACKUSER_IN_ADMIN = True    </p><p>    # Notification for the admin if he is working for an other user; default = True</p><p>    HIJACK_NOTIFY_ADMIN = True    </p><p>    # Allow staff users to hijack; default = False</p><p>    ALLOW_STAFF_TO_HIJACKUSER = False    </p><p>    # Where to go when you hijack someone; default equals the LOGIN_REDIRECT_URL; which has the default '/accounts/profile/'</p><p>    REVERSE_HIJACK_LOGIN_REDIRECT_URL = LOGIN_REDIRECT_URL    </p><p>    # Which methods of hijacking a user is allowed; default = ('user_id', 'email', 'username')</p><p>    ALLOWED_HIJACKING_USER_ATTRIBUTES = ('user_id', 'email', 'username')</p><p>## Signals</p><p>### Superuser logs in</p><p>You can catch a signal when a superuser logs in as another user. Here is an example:</p><p>    from django.dispatch import receiver</p><p>    from signals import post_superuser_login</p><p>    @receiver(post_superuser_login)</p><p>    def set_superuser(sender, **kwargs):</p><p>        print "Superuser hijacked userID %s" % kwargs['user_id']</p><p># TODOs, issues and planned features</p><p>* Handle hijack using URLs on non unique email addresses.</p><p>* unset_superuser example for signals</p><p>* Store info in user's profile (see #3 comments, Use case: 'Notify users when they were hijacked', see above)</p><p>* "got it" Link in notification to remove notification and flag from session. This is useful if hijack is used to switch between users and ``HIJACK_NOTIFY_ADMIN`` is True.</p><p>* Support for named URLs for the hijack button.</p><p>* Handle signals in ``release_hijack(..)``, currently the signals are only triggered in ``login_user(..)`` and ``logout_user(..)``.</p><p>* Graceful support for custom user models that do not feature username / email</p><p>## FAQ, troubleshooting and hints</p><p>### Why does the hijack button not show up in the admin site, even if I set ``SHOW_HIJACKUSER_IN_ADMIN = True`` in my project settings?</p><p>If your ``UserAdmin`` object is already registered in the admin site through another app (here is an example of a Facebook profile, https://github.com/philippeowagner/django_facebook_oauth/blob/master/facebook/admin.py#L8) you could disable the registration of django-hijack by settings ``SHOW_HIJACKUSER_IN_ADMIN = False`` in your project settings.</p><p>Afterwards create a new ``UserAdmin`` class derived from ``HijackUserAdmin``. The Facebook example would look like this:</p><p>    from django.contrib import admin</p><p>    from django.contrib.auth.admin import UserAdmin</p><p>    from django.contrib.auth.models import User</p><p>    from hijack.admin import HijackUserAdmin</p><p>    from .models import FacebookProfile</p><p>    # We want to display our facebook profile, not the default user's profile</p><p>    admin.site.unregister(User)</p><p>    class FacebookProfileInline(admin.StackedInline):</p><p>        model = FacebookProfile</p><p>    class FacebookProfileAdmin(HijackUserAdmin):</p><p>        inlines = [FacebookProfileInline]</p><p>    admin.site.register(User, FacebookProfileAdmin)</p><p>## Similar projects</p><p>Similar projects can be found and compared in the [user-switching](https://www.djangopackages.com/grids/g/user-switching/) or the [support gird](https://www.djangopackages.com/grids/g/support-apps/) of djangopackages.</p><p>## Contribute</p><p>If you want to contribute to this project, simply send us a pull request. Thanks. :)

</p><a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>646</span> downloads in the last week
  </li>
  <li>
    <span>5519</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>