<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-demiurge" class="anchor" href="#demiurge" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>demiurge</h1>

<p>PyQuery-based scraping micro-framework.
Supports Python 2.x and 3.x.</p>

<p><a href="https://travis-ci.org/matiasb/demiurge"><img src="https://camo.githubusercontent.com/fab2f39728bec5e4eb4c20970894c049e2fe79bf/68747470733a2f2f7472617669732d63692e6f72672f6d6174696173622f64656d69757267652e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/matiasb/demiurge.png?branch=master"/></a></p>

<p>Documentation: <a href="http://demiurge.readthedocs.org">http://demiurge.readthedocs.org</a></p>

<h2><a id="user-content-installing-demiurge" class="anchor" href="#installing-demiurge" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installing demiurge</h2>

<pre><code>$ pip install demiurge
</code></pre>

<h2><a id="user-content-quick-start" class="anchor" href="#quick-start" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Quick start</h2>

<p>Define items to be scraped using a declarative (Django-inspired) syntax:</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> demiurge

<span class="pl-k">class</span> <span class="pl-en">TorrentDetails</span>(<span class="pl-e">demiurge</span>.<span class="pl-e">Item</span>):
    label <span class="pl-k">=</span> demiurge.TextField(<span class="pl-v">selector</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>strong<span class="pl-pds">'</span></span>)
    value <span class="pl-k">=</span> demiurge.TextField()

    <span class="pl-k">def</span> <span class="pl-en">clean_value</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">value</span>):
        unlabel <span class="pl-k">=</span> value[value.find(<span class="pl-s"><span class="pl-pds">'</span>:<span class="pl-pds">'</span></span>) <span class="pl-k">+</span> <span class="pl-c1">1</span>:]
        <span class="pl-k">return</span> unlabel.strip()

    <span class="pl-k">class</span> <span class="pl-en">Meta</span>:
        selector <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>div#specifications p<span class="pl-pds">'</span></span>

<span class="pl-k">class</span> <span class="pl-en">Torrent</span>(<span class="pl-e">demiurge</span>.<span class="pl-e">Item</span>):
    url <span class="pl-k">=</span> demiurge.AttributeValueField(
        <span class="pl-v">selector</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>td:eq(2) a:eq(1)<span class="pl-pds">'</span></span>, <span class="pl-v">attr</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>href<span class="pl-pds">'</span></span>)
    name <span class="pl-k">=</span> demiurge.TextField(<span class="pl-v">selector</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>td:eq(2) a:eq(2)<span class="pl-pds">'</span></span>)
    size <span class="pl-k">=</span> demiurge.TextField(<span class="pl-v">selector</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>td:eq(3)<span class="pl-pds">'</span></span>)
    details <span class="pl-k">=</span> demiurge.RelatedItem(
        TorrentDetails, <span class="pl-v">selector</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>td:eq(2) a:eq(2)<span class="pl-pds">'</span></span>, <span class="pl-v">attr</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>href<span class="pl-pds">'</span></span>)

    <span class="pl-k">class</span> <span class="pl-en">Meta</span>:
        selector <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>table.maintable:gt(0) tr:gt(0)<span class="pl-pds">'</span></span>
        base_url <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>http://www.mininova.org<span class="pl-pds">'</span></span>


<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> t <span class="pl-k">=</span> Torrent.one(<span class="pl-s"><span class="pl-pds">'</span>/search/ubuntu/seeds<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> t.name
<span class="pl-s"><span class="pl-pds">'</span>Ubuntu 7.10 Desktop Live CD<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> t.size
<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>695.81<span class="pl-cce">\xa0</span>MB<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> t.url
<span class="pl-s"><span class="pl-pds">'</span>/get/1053846<span class="pl-pds">'</span></span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> t.html
<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>&lt;td&gt;19<span class="pl-cce">\xa0</span>Dec<span class="pl-cce">\xa0</span>07&lt;/td&gt;&lt;td&gt;&lt;a href="/cat/7"&gt;Software&lt;/a&gt;&lt;/td&gt;&lt;td&gt;...<span class="pl-pds">'</span></span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> results <span class="pl-k">=</span> Torrent.all(<span class="pl-s"><span class="pl-pds">'</span>/search/ubuntu/seeds<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-c1">len</span>(results)
<span class="pl-c1">116</span>
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">for</span> t <span class="pl-k">in</span> results[:<span class="pl-c1">3</span>]:
<span class="pl-c1">...</span>     <span class="pl-c1">print</span> t.name, t.size
<span class="pl-c1">...</span>
Ubuntu <span class="pl-c1">7.10</span> Desktop Live <span class="pl-c1">CD</span> <span class="pl-c1">695.81</span> <span class="pl-c1">MB</span>
Super Ubuntu <span class="pl-c1">2008.09</span> <span class="pl-k">-</span> VMware image <span class="pl-c1">871.95</span> <span class="pl-c1">MB</span>
Portable Ubuntu <span class="pl-c1">9.10</span> <span class="pl-k">for</span> Windows <span class="pl-c1">559.78</span> <span class="pl-c1">MB</span>
<span class="pl-c1">...</span>

<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> t <span class="pl-k">=</span> Torrent.one(<span class="pl-s"><span class="pl-pds">'</span>/search/ubuntu/seeds<span class="pl-pds">'</span></span>)
<span class="pl-k">&gt;&gt;</span><span class="pl-k">&gt;</span> <span class="pl-k">for</span> detail <span class="pl-k">in</span> t.details:
<span class="pl-c1">...</span>     <span class="pl-c1">print</span> detail.label, detail.value
<span class="pl-c1">...</span> 
Category: Software <span class="pl-k">&gt;</span> <span class="pl-c1">GNU</span><span class="pl-k">/</span>Linux
Total size: <span class="pl-c1">695.81</span>Â megabyte
Added: <span class="pl-c1">2467</span> days ago by Distribution
Share ratio: <span class="pl-c1">17</span> seeds, <span class="pl-c1">2</span> leechers
Last updated: <span class="pl-c1">35</span> minutes ago
Downloads: <span class="pl-c1">29</span>,<span class="pl-c1">0<span class="pl-ii">85</span></span></pre></div>

<p>See documentation for details: <a href="http://demiurge.readthedocs.org">http://demiurge.readthedocs.org</a></p>

<h2><a id="user-content-why-demiurge" class="anchor" href="#why-demiurge" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Why <em>demiurge</em>?</h2>

<p>Plato, as the speaker Timaeus, refers to the Demiurge frequently in the Socratic
dialogue Timaeus, c. 360 BC. The main character refers to the Demiurge as the
entity who "fashioned and shaped" the material world. Timaeus describes the
Demiurge as unreservedly benevolent, and hence desirous of a world as good as
possible. The world remains imperfect, however, because the Demiurge created
the world out of a chaotic, indeterminate non-being.</p>

<p><a href="http://en.wikipedia.org/wiki/Demiurge">http://en.wikipedia.org/wiki/Demiurge</a></p>

<h2><a id="user-content-contributors" class="anchor" href="#contributors" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Contributors</h2>


</article>
  </div></body></html>