<html><body><div><body class="logged_out   env-production macintosh vis-public page-blob" id="readabilityBody">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>

    
    
    



      
      



    <p id="start-of-content" class="accessibility-aid"/>

      <p id="js-flash-container">
</p>


    <div role="main" class="main-content">
        <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode">
    <div id="js-repo-pjax-container" class="context-loader-container js-repo-nav-next" data-pjax-container="">
      


<div class="container new-discussion-timeline experiment-repo-nav">
  <div class="repository-content">

    

<a href="/lamphej/vmScripts/blob/b53877ddcf189a6235709c0343249ef94247f084/resolution_set.py" class="hidden js-permalink-shortcut" data-hotkey="y">Permalink</a>





<include-fragment class="commit-tease" src="/lamphej/vmScripts/contributors/master/resolution_set.py">
  <p>
    Fetching contributorsâ€¦
  </p>

  <div class="commit-tease-contributors">
    <img alt="" class="loader-loading left" src="https://assets-cdn.github.com/images/spinners/octocat-spinner-32-EAF2F5.gif"/>
    <span class="loader-error">Cannot retrieve contributors at this time</span>
  </div>
</include-fragment>
<div class="file">
  <div class="file-header">
  

  <p class="file-info">
      39 lines (34 sloc)
      <span class="file-info-divider"/>
    1.46 KB
  </p>
</div>

  

  <div itemprop="text" class="blob-wrapper data type-python">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="L1" class="blob-num js-line-number" data-line-number="1"/>
        <td id="LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-s"><span class="pl-pds">"""</span>resolution_set</span></td>
      </tr>
      <tr>
        <td id="L2" class="blob-num js-line-number" data-line-number="2"/>
        <td id="LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="L3" class="blob-num js-line-number" data-line-number="3"/>
        <td id="LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-s">Usage:</span></td>
      </tr>
      <tr>
        <td id="L4" class="blob-num js-line-number" data-line-number="4"/>
        <td id="LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-s">  resolution_set.py &lt;vmxpath&gt; &lt;X&gt; &lt;Y&gt;</span></td>
      </tr>
      <tr>
        <td id="L5" class="blob-num js-line-number" data-line-number="5"/>
        <td id="LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="L6" class="blob-num js-line-number" data-line-number="6"/>
        <td id="LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-s">  vmxpath: "[datastore2] Server 2012 Essentials/Server 2012 Essentials.vmx"</span></td>
      </tr>
      <tr>
        <td id="L7" class="blob-num js-line-number" data-line-number="7"/>
        <td id="LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-s">  environment variables: ESXI_HOST, ESXI_USER, ESXI_PASS</span></td>
      </tr>
      <tr>
        <td id="L8" class="blob-num js-line-number" data-line-number="8"/>
        <td id="LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="L9" class="blob-num js-line-number" data-line-number="9"/>
        <td id="LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> docopt <span class="pl-k">import</span> docopt</td>
      </tr>
      <tr>
        <td id="L10" class="blob-num js-line-number" data-line-number="10"/>
        <td id="LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> paramiko</td>
      </tr>
      <tr>
        <td id="L11" class="blob-num js-line-number" data-line-number="11"/>
        <td id="LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> os <span class="pl-k">import</span> environ <span class="pl-k">as</span> os_env</td>
      </tr>
      <tr>
        <td id="L12" class="blob-num js-line-number" data-line-number="12"/>
        <td id="LC12" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="L13" class="blob-num js-line-number" data-line-number="13"/>
        <td id="LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:</td>
      </tr>
      <tr>
        <td id="L14" class="blob-num js-line-number" data-line-number="14"/>
        <td id="LC14" class="blob-code blob-code-inner js-file-line">    arguments <span class="pl-k">=</span> docopt(<span class="pl-c1">__doc__</span>, <span class="pl-v">version</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>resolution_set<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="L15" class="blob-num js-line-number" data-line-number="15"/>
        <td id="LC15" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="L16" class="blob-num js-line-number" data-line-number="16"/>
        <td id="LC16" class="blob-code blob-code-inner js-file-line">    x_res <span class="pl-k">=</span> <span class="pl-c1">int</span>(arguments[<span class="pl-s"><span class="pl-pds">"</span>&lt;X&gt;<span class="pl-pds">"</span></span>])</td>
      </tr>
      <tr>
        <td id="L17" class="blob-num js-line-number" data-line-number="17"/>
        <td id="LC17" class="blob-code blob-code-inner js-file-line">    y_res <span class="pl-k">=</span> <span class="pl-c1">int</span>(arguments[<span class="pl-s"><span class="pl-pds">"</span>&lt;Y&gt;<span class="pl-pds">"</span></span>])</td>
      </tr>
      <tr>
        <td id="L18" class="blob-num js-line-number" data-line-number="18"/>
        <td id="LC18" class="blob-code blob-code-inner js-file-line">    vRamSize <span class="pl-k">=</span> x_res <span class="pl-k">*</span> y_res <span class="pl-k">*</span> <span class="pl-c1">4</span></td>
      </tr>
      <tr>
        <td id="L19" class="blob-num js-line-number" data-line-number="19"/>
        <td id="LC19" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="L20" class="blob-num js-line-number" data-line-number="20"/>
        <td id="LC20" class="blob-code blob-code-inner js-file-line">    vmx_path <span class="pl-k">=</span> arguments[<span class="pl-s"><span class="pl-pds">"</span>&lt;vmxpath&gt;<span class="pl-pds">"</span></span>]</td>
      </tr>
      <tr>
        <td id="L21" class="blob-num js-line-number" data-line-number="21"/>
        <td id="LC21" class="blob-code blob-code-inner js-file-line">    config_dir <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>/vmfs/volumes/<span class="pl-pds">"</span></span> <span class="pl-k">+</span> vmx_path.split(<span class="pl-s"><span class="pl-pds">'</span>[<span class="pl-pds">'</span></span>)[<span class="pl-c1">1</span>].split(<span class="pl-s"><span class="pl-pds">'</span>]<span class="pl-pds">'</span></span>)[<span class="pl-c1">0</span>].lower() <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span></td>
      </tr>
      <tr>
        <td id="L22" class="blob-num js-line-number" data-line-number="22"/>
        <td id="LC22" class="blob-code blob-code-inner js-file-line">    config_dir <span class="pl-k">+=</span> vmx_path.split(<span class="pl-s"><span class="pl-pds">'</span>] <span class="pl-pds">'</span></span>)[<span class="pl-c1">1</span>].split(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>)[<span class="pl-c1">0</span>]</td>
      </tr>
      <tr>
        <td id="L23" class="blob-num js-line-number" data-line-number="23"/>
        <td id="LC23" class="blob-code blob-code-inner js-file-line">    config_file <span class="pl-k">=</span> vmx_path.split(<span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>)[<span class="pl-k">-</span><span class="pl-c1">1</span>]</td>
      </tr>
      <tr>
        <td id="L24" class="blob-num js-line-number" data-line-number="24"/>
        <td id="LC24" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">"</span>[+] Editing '<span class="pl-c1">%s</span>' via ssh<span class="pl-pds">"</span></span> <span class="pl-k">%</span> config_file</td>
      </tr>
      <tr>
        <td id="L25" class="blob-num js-line-number" data-line-number="25"/>
        <td id="LC25" class="blob-code blob-code-inner js-file-line">    ssh <span class="pl-k">=</span> paramiko.SSHClient()</td>
      </tr>
      <tr>
        <td id="L26" class="blob-num js-line-number" data-line-number="26"/>
        <td id="LC26" class="blob-code blob-code-inner js-file-line">    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())</td>
      </tr>
      <tr>
        <td id="L27" class="blob-num js-line-number" data-line-number="27"/>
        <td id="LC27" class="blob-code blob-code-inner js-file-line">    ssh.connect(os_env[<span class="pl-s"><span class="pl-pds">'</span>ESXI_HOST<span class="pl-pds">'</span></span>], <span class="pl-v">username</span><span class="pl-k">=</span>os_env[<span class="pl-s"><span class="pl-pds">'</span>ESXI_USER<span class="pl-pds">'</span></span>], <span class="pl-v">password</span><span class="pl-k">=</span>os_env[<span class="pl-s"><span class="pl-pds">'</span>ESXI_PASS<span class="pl-pds">'</span></span>])</td>
      </tr>
      <tr>
        <td id="L28" class="blob-num js-line-number" data-line-number="28"/>
        <td id="LC28" class="blob-code blob-code-inner js-file-line">    commands <span class="pl-k">=</span> [</td>
      </tr>
      <tr>
        <td id="L29" class="blob-num js-line-number" data-line-number="29"/>
        <td id="LC29" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"</span>cd <span class="pl-c1">%s</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> config_dir,</td>
      </tr>
      <tr>
        <td id="L30" class="blob-num js-line-number" data-line-number="30"/>
        <td id="LC30" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"</span>echo <span class="pl-c1">%s</span> &gt;&gt; <span class="pl-c1">%s</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> (<span class="pl-s"><span class="pl-pds">'</span>svga.autodetect = "FALSE"<span class="pl-pds">'</span></span>, config_file),</td>
      </tr>
      <tr>
        <td id="L31" class="blob-num js-line-number" data-line-number="31"/>
        <td id="LC31" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"</span>echo <span class="pl-c1">%s</span> &gt;&gt; <span class="pl-c1">%s</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> (<span class="pl-s"><span class="pl-pds">'</span>svga.vramSize = <span class="pl-c1">%s</span><span class="pl-pds">'</span></span> <span class="pl-k">%</span> vRamSize, config_file),</td>
      </tr>
      <tr>
        <td id="L32" class="blob-num js-line-number" data-line-number="32"/>
        <td id="LC32" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"</span>echo <span class="pl-c1">%s</span> &gt;&gt; <span class="pl-c1">%s</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> (<span class="pl-s"><span class="pl-pds">'</span>svga.maxWidth = <span class="pl-c1">%s</span><span class="pl-pds">'</span></span> <span class="pl-k">%</span> x_res, config_file),</td>
      </tr>
      <tr>
        <td id="L33" class="blob-num js-line-number" data-line-number="33"/>
        <td id="LC33" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"</span>echo <span class="pl-c1">%s</span> &gt;&gt; <span class="pl-c1">%s</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> (<span class="pl-s"><span class="pl-pds">'</span>svga.maxHeight = <span class="pl-c1">%s</span><span class="pl-pds">'</span></span> <span class="pl-k">%</span> y_res, config_file)</td>
      </tr>
      <tr>
        <td id="L34" class="blob-num js-line-number" data-line-number="34"/>
        <td id="LC34" class="blob-code blob-code-inner js-file-line">    ]</td>
      </tr>
      <tr>
        <td id="L35" class="blob-num js-line-number" data-line-number="35"/>
        <td id="LC35" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#paramiko doesn't "save state", so you can't cd in one command,</span></td>
      </tr>
      <tr>
        <td id="L36" class="blob-num js-line-number" data-line-number="36"/>
        <td id="LC36" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#then expect to use the files from that dir in the next one</span></td>
      </tr>
      <tr>
        <td id="L37" class="blob-num js-line-number" data-line-number="37"/>
        <td id="LC37" class="blob-code blob-code-inner js-file-line">    full_command <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>; <span class="pl-pds">'</span></span>.join(commands)</td>
      </tr>
      <tr>
        <td id="L38" class="blob-num js-line-number" data-line-number="38"/>
        <td id="LC38" class="blob-code blob-code-inner js-file-line">    ssh.exec_command(full_command)</td>
      </tr>
      <tr>
        <td id="L39" class="blob-num js-line-number" data-line-number="39"/>
        <td id="LC39" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">print</span> <span class="pl-s"><span class="pl-pds">"</span>[+] All Done<span class="pl-pds">"</span></span></td>
      </tr>
</table>

  </div>

</div>

<button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="hidden">Jump to Line</button>


  </div>
  <p class="modal-backdrop"/>
</div>


    </div>
  </div>

    </div>

        



    
    
    

    <div id="ajax-error-message" class="ajax-error-message flash flash-error">
      <svg aria-hidden="true" class="octicon octicon-alert" role="img" version="1.1" viewbox="0 0 16 16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg>
      <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
        <svg aria-hidden="true" class="octicon octicon-x" role="img" version="1.1" viewbox="0 0 12 16"><path d="M7.48 8l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75-1.48-1.48 3.75-3.75L0.77 4.25l1.48-1.48 3.75 3.75 3.75-3.75 1.48 1.48-3.75 3.75z"/></svg>
      </button><p>
      Something went wrong with that request. Please try again.
    </p></div>


      
      
      
      
      
      
    <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner hidden">
      <svg aria-hidden="true" class="octicon octicon-alert" role="img" version="1.1" viewbox="0 0 16 16"><path d="M15.72 12.5l-6.85-11.98C8.69 0.21 8.36 0.02 8 0.02s-0.69 0.19-0.87 0.5l-6.85 11.98c-0.18 0.31-0.18 0.69 0 1C0.47 13.81 0.8 14 1.15 14h13.7c0.36 0 0.69-0.19 0.86-0.5S15.89 12.81 15.72 12.5zM9 12H7V10h2V12zM9 9H7V5h2V9z"/></svg>
      <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
      <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
    </div>
    

  </body>
</div></body></html>