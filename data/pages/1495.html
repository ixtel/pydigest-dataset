<html><body><div><div class="col-md-12">
				<p dir="ltr">All of us at Twilio are over the moon by the possibilities <a href="https://www.twilio.com/blog/2014/09/introducing-twilio-mms-nt.html">now unlocked by the availability of MMS on US phone numbers</a>.  We know from experience that the real ingenuity will come from you – the air around Twilio is electric with anticipation of the amazing things you’ll build.  We’ve got a lot of hacks we’re excited to show you in the weeks that follow along with the best work we find from all of you.</p>
<p dir="ltr">Have a sick MMS hack?  Send it my way – <a href="mailto:rob@twilio.com">rob@twilio.com</a>.  Want to get started? Check out <a href="https://www.twilio.com/blog/2014/09/getting-started-with-twilio-mms.html">this guide by Kevin Whinnery</a>. We can’t wait to see what you build.</p>
<p dir="ltr">To kick off our autumn of MMS hacking, I wanted to share the first thing I did with Twilio MMS.  A couple years ago, my buddy <a href="http://www.aidanfeldman.com/">Aidan Feldman</a> released one of the most critical photo services the Internet has yet seen: <a href="http://mustachify.me/">Mustachify.me</a>.  A truly democratizing technology, Aidan’s killer website makes the august, sophisticated countenance of a long, curly mustache available to everyone.</p>
<p dir="ltr">His magical code can turn this:</p>
<p dir="ltr"><img src="https://lh5.googleusercontent.com/r8yyVVKHHt4yaqoAcMC6r_vYnHxxvwjMSeELGNRELKHdWtaGhkQrT6N8Xyys_8uXa3FlTjObtSuyD2g3FgxCwlyA8XD4VwplUOITGcIoIZsg24iUB78bIAcX5y4nojeXDw" alt=""/></p>
<p dir="ltr">Into this:</p>
<p dir="ltr"><img src="https://lh3.googleusercontent.com/aspZ3EKof3Ku-VbhrDXpZZ4yQeNhAc-cpCnaWDZq3KXI4GmH2jInIMkWy52GjWsLaU2KEsV6w4n3TpP7c4OV9weMMxQodbEOCw7XyaxaMIJCdppeiEUrkTqyp-MNaW1peg" alt=""/></p>
<p id="docs-internal-guid-adbd991c-85d5-7d02-7146-ab31482e392e" dir="ltr">From the second I got my hands on Twilio MMS, I knew I had to extend Aidan’s service to every phone in the United States and Canada.</p>
<p id="docs-internal-guid-adbd991c-85d5-98a6-93c0-49be8b1f8cdf" dir="ltr">Try it now by sending a selfie here:</p>
<ul>
<li>
<h1>US – (646) 846-8238</h1>
</li>
<li>
<h1>Canada – (438) 793-8863</h1>
</li>
</ul>
<p>Now let’s build our own together.</p>
<h3>What You’ll Need</h3>
<p>If you want to cut to the chase and have your own working mustache machine, go ahead and deploy the Mustached Message Service to Heroku immediately:</p>
<p><a href="https://heroku.com/deploy?template=https://github.com/RobSpectre/Mustached-Message-Service"> <img src="https://www.herokucdn.com/deploy/button.png" alt="Deploy"/><br/>
</a></p>
<p id="docs-internal-guid-adbd991c-85d8-734f-c532-9d0a08df689a" dir="ltr">If you’d like to build the service yourself, we can get those glorious mustaches messaging with a few ingredients:</p>
<ul>
<li>Your Twilio account – <a href="http://www.twilio.com/try-twilio">signup for free here</a>.</li>
<li>A <a href="https://www.twilio.com/user/account/phone-numbers/search">Twilio phone number</a> enabled for MMS (available in Canada and the United States only for now)</li>
<li><a href="https://www.python.org/downloads/">Python</a></li>
<li><a href="http://flask.pocoo.org/">Flask</a>, a web microframework for Python.</li>
<li>A web host accessible on the Internet or a localhost tunneling service like the excellent <a href="http://www.ngrok.com">ngrok</a>.</li>
</ul>
<h3>Getting Started</h3>
<p>Awww snap gang – time to bust some hot Pythonic stash action. First, we’ll kick out a little boilerplate to get our Flask app ready to accept some Twilio requests. If you are using <code>pip</code>, you can satisfy these dependencies with a requirements.txt file.</p>

		<div id="crayon-56d5b8ec798e3492147005" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8ec798e3492147005-1"><span class="crayon-v">Flask</span><span class="crayon-o">==</span><span class="crayon-cn">0.10.1</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec798e3492147005-2"><span class="crayon-v">twilio</span><span class="crayon-o">==</span><span class="crayon-cn">3.6.7</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Or directly by running this command:</p>

		

<p>Now let’s cut a little boilerplate to respond with a simple text message.</p>

		<div id="crayon-56d5b8ec79912249046149" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-2">2</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-4">4</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-6">6</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-8">8</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-10">10</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-12">12</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-14">14</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-16">16</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-18">18</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-20">20</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-22">22</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-24">24</p><p class="crayon-num" data-line="crayon-56d5b8ec79912249046149-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79912249046149-26">26</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8ec79912249046149-1"><span class="crayon-c"># Import Flask microframework</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">flask </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Flask</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-3"><span class="crayon-c"># Import Twilio Python module</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">twilio </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">twiml</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-6"><span class="crayon-v">app</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Flask</span><span class="crayon-sy">(</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-8"><span class="crayon-c"># Define the endpoint we'll use for the project. </span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-9"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/sms'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-10"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">sms</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-11"><span class="crayon-h">    </span><span class="crayon-c"># Use the Twilio Python module to craft our response to inbound MMS.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-12"><span class="crayon-h">    </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">Response</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-13"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-14"><span class="crayon-h">    </span><span class="crayon-c"># For now, send a text message back.</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-15"><span class="crayon-h">    </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-s">"Boiler plate, snacky!"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-16"> </p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-17"><span class="crayon-h">    </span><span class="crayon-c"># Casting the object as a string will format our response into TwiML </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-18"><span class="crayon-h">    </span><span class="crayon-c"># that Twilio can read and parse.</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-19"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-20"> </p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-21"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"__main__"</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-22"><span class="crayon-h">    </span><span class="crayon-c"># Since this is a development project, we will keep debug on to make our</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-23"><span class="crayon-h">    </span><span class="crayon-c"># lives easier. We would want to configure our app more conservatively</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-24"><span class="crayon-h">    </span><span class="crayon-c"># in production.</span></p><p class="crayon-line" id="crayon-56d5b8ec79912249046149-25"><span class="crayon-h">    </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">debug</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">True</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79912249046149-26"><span class="crayon-h">    </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h3>Configuring Your Twilio Number</h3>
<p>Now we’ll take the basic endpoint we created and point a Twilio phone number to it. First, we need to go to our Twilio account and purchase a MMS-enabled number. <em>(Note: MMS enabled phone numbers are only available for numbers in the United States and Canada)</em></p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2014/09/Selection_001.png"><img class="alignnone wp-image-13927" src="https://www.twilio.com/blog/wp-content/uploads/2014/09/Selection_001.png" alt="Selection_001"/></a></p>
<p>Next we’ll set up that number with the publicly accessible address of the application we created above. Like we specified in our app’s only route, we’ll point to <code>/sms</code> for our domain.</p>
<p><img src="https://lh4.googleusercontent.com/SjMPHNAI2i0annVoLyL0RucMBtURr9uLBOWUvW3yywZlru2UiXQUVw-EyTpz4NW6souqvZpG6aqt2kgPA-ZdKmNkDuyniVcpLLaWMI1oy1ev8k66_i7vzCm_IlUKkgOQHA" alt=""/></p>
<p id="docs-internal-guid-875c0599-8616-def0-7e52-e3786681608c" dir="ltr">Awesome – now after we click save, we should be able to send a message to the number and get a response from our boilerplate app.</p>
<h3>Echoing Back MMS Messages</h3>
<p>Next, let’s adjust our app to echo back to the user the messages he/she sends to our Twilio MMS-enabled number. We can leverage <a href="https://www.twilio.com/docs/api/twiml/sms/message#nouns">the &lt;Media&gt; noun</a> and Flask’s <code>request</code> object to send the photo our app receives back to the user as a visual echo statement.</p>

		<div id="crayon-56d5b8ec79925473431121" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-2">2</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-4">4</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-6">6</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-8">8</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-10">10</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-12">12</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-14">14</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-16">16</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-18">18</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-20">20</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-22">22</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-24">24</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-26">26</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-28">28</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79925473431121-30">30</p><p class="crayon-num" data-line="crayon-56d5b8ec79925473431121-31">31</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8ec79925473431121-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">flask </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Flask</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-2"><span class="crayon-c"># Import the request object from Flask.</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-3"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">flask </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">request</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-4"> </p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-5"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">twilio </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">twiml</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-6"> </p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-7"><span class="crayon-v">app</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Flask</span><span class="crayon-sy">(</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-8"> </p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-9"><span class="crayon-c"># Define the endpoint we'll use for the project. </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-10"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/sms'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-11"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">sms</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-12"><span class="crayon-h">    </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">Response</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-13"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-14"><span class="crayon-h">    </span><span class="crayon-c"># Check if we have media in the message.</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-15"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">form</span><span class="crayon-sy">[</span><span class="crayon-s">'NumMedia'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">'0'</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-16"><span class="crayon-h">        </span><span class="crayon-c"># If we do, echo back the media to the user.</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-17"><span class="crayon-h">        </span><span class="crayon-st">with</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-18"><span class="crayon-h">            </span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"I received this image."</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-19"><span class="crayon-h">            </span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-e">media</span><span class="crayon-sy">(</span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">form</span><span class="crayon-sy">[</span><span class="crayon-s">'MediaUrl0'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-20"><span class="crayon-h">    </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-21"><span class="crayon-h">        </span><span class="crayon-c"># If we do not, indicate such to user.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-22"><span class="crayon-h">        </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-s">"Could not find an image in your message."</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-23"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-24"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-25"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-26"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"__main__"</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-27"><span class="crayon-h">    </span><span class="crayon-c"># Since this is a development project, we will keep debug on to make our</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-28"><span class="crayon-h">    </span><span class="crayon-c"># lives easier. We would want to configure our app more conservatively</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-29"><span class="crayon-h">    </span><span class="crayon-c"># in production.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79925473431121-30"><span class="crayon-h">    </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">debug</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">True</span></p><p class="crayon-line" id="crayon-56d5b8ec79925473431121-31"><span class="crayon-h">    </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Rad – now that we can receive an image and then send it back to the user.</p>
<h3>Stashing The Faces</h3>
<p>Now we can use Aidan’s mustachify.me service to apply upon every face it can fine with a killer curly cookie duster. Fortunately, mustachify’s interface is a simple URL param with the MediaUrl we receive from Twilio.</p>

		<div id="crayon-56d5b8ec79937686348426" class="crayon-syntax crayon-theme-solarized-dark crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-2">2</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-4">4</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-6">6</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-8">8</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-10">10</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-12">12</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-14">14</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-16">16</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-18">18</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-20">20</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-22">22</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-24">24</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-26">26</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-28">28</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8ec79937686348426-30">30</p><p class="crayon-num" data-line="crayon-56d5b8ec79937686348426-31">31</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8ec79937686348426-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">flask </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">Flask</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">flask </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">request</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">twilio </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">twiml</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-6"><span class="crayon-v">app</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Flask</span><span class="crayon-sy">(</span><span class="crayon-v">__name__</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-8"><span class="crayon-c"># Define the URL for the service mustaching our photos.</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-9"><span class="crayon-v">MUSTACHIFY_URL</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"http://mustachify.me/?src="</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-10"> </p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-11"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/sms'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-12"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">sms</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-13"><span class="crayon-h">    </span><span class="crayon-v">response</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">twiml</span><span class="crayon-sy">.</span><span class="crayon-e">Response</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-14"> </p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-15"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">form</span><span class="crayon-sy">[</span><span class="crayon-s">'NumMedia'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">!=</span><span class="crayon-h"> </span><span class="crayon-s">'0'</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-16"><span class="crayon-h">        </span><span class="crayon-st">with</span><span class="crayon-h"> </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">message</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-17"><span class="crayon-h">            </span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-v">body</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"STASHED."</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-18"><span class="crayon-h">            </span><span class="crayon-c"># Give mustachify.me our MediaUrl</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-19"><span class="crayon-h">            </span><span class="crayon-v">message</span><span class="crayon-sy">.</span><span class="crayon-e">media</span><span class="crayon-sy">(</span><span class="crayon-s">"{0}{1}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-v">MUSTACHIFY_URL</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-20"><span class="crayon-h">                                          </span><span class="crayon-v">request</span><span class="crayon-sy">.</span><span class="crayon-v">form</span><span class="crayon-sy">[</span><span class="crayon-s">'MediaUrl0'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-21"><span class="crayon-h">    </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-22"><span class="crayon-h">        </span><span class="crayon-v">response</span><span class="crayon-sy">.</span><span class="crayon-e">message</span><span class="crayon-sy">(</span><span class="crayon-s">"Could not find an image in your message."</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-23"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-24"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-k ">str</span><span class="crayon-sy">(</span><span class="crayon-v">response</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-25"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-26"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">__name__</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"__main__"</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-27"><span class="crayon-h">    </span><span class="crayon-c"># Since this is a development project, we will keep debug on to make our</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-28"><span class="crayon-h">    </span><span class="crayon-c"># lives easier. We would want to configure our app more conservatively</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-29"><span class="crayon-h">    </span><span class="crayon-c"># in production.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8ec79937686348426-30"><span class="crayon-h">    </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-v">debug</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">True</span></p><p class="crayon-line" id="crayon-56d5b8ec79937686348426-31"><span class="crayon-h">    </span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">run</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Now if we give it a try, every photo gets some distinguished upperlipholstery.</p>
<p>Check out what the Twilio Devangel crew did with this already:<br/>
<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0"><param name="flashvars" value="offsite=true&amp;lang=en-us&amp;page_show_url=%2Fphotos%2Ftwilio%2Fsets%2F72157647330484147%2Fshow%2F&amp;page_show_back_url=%2Fphotos%2Ftwilio%2Fsets%2F72157647330484147%2F&amp;set_id=72157647330484147&amp;jump_to="/><param name="allowFullScreen" value="true"/><param name="src" value="https://www.flickr.com/apps/slideshow/show.swf?v=1811922554"/><param name="allowfullscreen" value="true"/><embed type="application/x-shockwave-flash" src="https://www.flickr.com/apps/slideshow/show.swf?v=1811922554" flashvars="offsite=true&amp;lang=en-us&amp;page_show_url=%2Fphotos%2Ftwilio%2Fsets%2F72157647330484147%2Fshow%2F&amp;page_show_back_url=%2Fphotos%2Ftwilio%2Fsets%2F72157647330484147%2F&amp;set_id=72157647330484147&amp;jump_to=" allowfullscreen="allowfullscreen"/></object></p>
<h3>Next Steps</h3>
<p id="docs-internal-guid-adbd991c-8619-f6d3-2495-43ba05b68e1e" dir="ltr">If you’d like to see a more fully fleshed version of this application, be sure to check out the <a href="https://github.com/RobSpectre/Mustached-Message-Service">Github Repo here</a>. You can also find the code for Aidan’s <a href="https://github.com/afeld/mustachio">mean mustaching machine here</a>.</p>
<p dir="ltr">While mustaches make everything more fun, this is just the entertaining tip of the iceberg of what is possible with receiving and sending Twilio MMS.  Here are just a few of the MMS-powered image manipulation use cases we’ve kicked around:</p>
<ul>
<li>Funhouse mirror photobooths</li>
<li>Using optical character recognition to translate signs into different languages</li>
<li>Chromakey / alpha channel replacement transporting photo subjects to different places</li>
<li>Apply Instagram style vintage filters</li>
</ul>
<p>We know from experience that no matter how imaginative we get with the services we create, those ideas serve as a mere horizon of the world of wonder you – the Twilio developer – have built time and time again.  We can’t wait to see it – reach out to me at <a href="http://twitter.com/dn0t">@dn0t on Twitter</a> or via email at <a href="mailto:rob@twilio.com">rob@twilio.com</a> with your MMS hacks!</p>
			</div>
					</div></body></html>