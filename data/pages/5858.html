<html><body><div><p>Cobble is a Python library that allows easy creation of data objects,
including implementations of common methods such as <tt>__eq__</tt> and <tt>__repr__</tt>.</p>
<div id="examples">
<h2>Examples</h2>
<pre><span class="kn">import</span> <span class="nn">cobble</span>

<span class="nd">@cobble.data</span>
<span class="k">class</span> <span class="nc">Song</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">cobble</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
    <span class="n">artist</span> <span class="o">=</span> <span class="n">cobble</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
    <span class="n">album</span> <span class="o">=</span> <span class="n">cobble</span><span class="o">.</span><span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>


<span class="n">song</span> <span class="o">=</span> <span class="n">Song</span><span class="p">(</span><span class="s2">"MFEO"</span><span class="p">,</span> <span class="n">artist</span><span class="o">=</span><span class="s2">"Jack's Mannequin"</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">song</span><span class="p">)</span> <span class="c1"># Prints "Song(name='MFEO', artist="Jack's Mannequin", album=None)"</span>
</pre>
<pre><span class="k">class</span> <span class="nc">Expression</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@cobble.data</span>
<span class="k">class</span> <span class="nc">Literal</span><span class="p">(</span><span class="n">Expression</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">cobble</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>

<span class="nd">@cobble.data</span>
<span class="k">class</span> <span class="nc">Add</span><span class="p">(</span><span class="n">Expression</span><span class="p">):</span>
    <span class="n">left</span> <span class="o">=</span> <span class="n">cobble</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>
    <span class="n">right</span> <span class="o">=</span> <span class="n">cobble</span><span class="o">.</span><span class="n">field</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">Evaluator</span><span class="p">(</span><span class="n">cobble</span><span class="o">.</span><span class="n">visitor</span><span class="p">(</span><span class="n">Expression</span><span class="p">)):</span>
    <span class="k">def</span> <span class="nf">visit_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">literal</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">literal</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span> <span class="nf">visit_add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>

<span class="n">Evaluator</span><span class="p">()</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">Add</span><span class="p">(</span><span class="n">Literal</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">Literal</span><span class="p">(</span><span class="mi">4</span><span class="p">)))</span> <span class="c1"># 6</span>
</pre>
<pre><span class="k">class</span> <span class="nc">Expression</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@cobble.visitable</span>
<span class="k">class</span> <span class="nc">Literal</span><span class="p">(</span><span class="n">Expression</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

<span class="nd">@cobble.visitable</span>
<span class="k">class</span> <span class="nc">Add</span><span class="p">(</span><span class="n">Expression</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>

<span class="k">class</span> <span class="nc">Evaluator</span><span class="p">(</span><span class="n">cobble</span><span class="o">.</span><span class="n">visitor</span><span class="p">(</span><span class="n">Expression</span><span class="p">)):</span>
    <span class="k">def</span> <span class="nf">visit_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">literal</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">literal</span><span class="o">.</span><span class="n">value</span>

    <span class="k">def</span> <span class="nf">visit_add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">left</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>

<span class="n">Evaluator</span><span class="p">()</span><span class="o">.</span><span class="n">visit</span><span class="p">(</span><span class="n">Add</span><span class="p">(</span><span class="n">Literal</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">Literal</span><span class="p">(</span><span class="mi">4</span><span class="p">)))</span> <span class="c1"># 6</span>
</pre>
</div>
</div></body></html>