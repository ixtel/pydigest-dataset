<html><body><div><article class="post-content">
		<p><a href="http://www.mathandpencil.com">Math and Pencil</a> writes a lot of unit tests in Django. Over the years, we have compiled a number of helpers we use across multiple projects. Here is a list of “best practices” we have compiled.</p>

<h4 id="directory-structure">Directory Structure</h4>

<p>Split your unit tests into separate files. It makes maintaining them much easier, and it also allows you to run a single test or a set of tests from the command line. The following is an example directory structure from a Math &amp; Pencil</p>

<p><img src="/images/posts/unit_test_directories.png" alt="My helpful screenshot"/></p>

<h4 id="writing-unit-tests-with-session-data">Writing Unit Tests With Session Data</h4>

<p>In general, avoid storing state-based data in a session. If you are going to store something in a session, and you want a unit test to make sure the view or code is working properly, you can bootstrap your session in your setUp function as follows:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
 <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
 <span class="n">engine</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">SESSION_ENGINE</span><span class="p">)</span>
 <span class="n">store</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">SessionStore</span><span class="p">()</span>
 <span class="n">store</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>  
 <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">cookies</span><span class="p">[</span><span class="n">settings</span><span class="o">.</span><span class="n">SESSION_COOKIE_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">session_key</span>
 <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">session</span>
 <span class="n">session</span><span class="p">[</span><span class="s">'page_id'</span><span class="p">]</span> <span class="o">=</span> <span class="n">test_settings</span><span class="o">.</span><span class="n">TEST_PAGE_ID</span>
 <span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></code></pre></div>

<p>In the example above, I am bootstrapping my session with the variable <code>page_id</code>.</p>

<h4 id="using-djangorequest">Using Django.Request</h4>

<p>Sometimes private functions in Django can take requests as input parameters. If you need to unit test these
functions, you are going to need access to a Django request. You can use this class to gain access to the request object</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">RequestFactory</span><span class="p">(</span><span class="n">Client</span><span class="p">):</span>  
	<span class="sd">"""	 </span>
<span class="sd">	Class that lets you create mock Request objects for use in testing.	</span>
<span class="sd">	Helpful when trying add data to a sessions </span>

<span class="sd">	Usage:	</span>

<span class="sd">	rf = RequestFactory()  </span>
<span class="sd">	get_request = rf.get('/hello/')	 </span>
<span class="sd">	post_request = rf.post('/submit/', {'foo': 'bar'})	</span>

<span class="sd">	This class re-uses the django.test.client.Client interface, docs here:	</span>
<span class="sd">	http://www.djangoproject.com/documentation/testing/#the-test-client	 </span>

<span class="sd">	Once you have a request object you can pass it to any view function,   </span>
<span class="sd">	just as if that view had been hooked up using a URLconf.  </span>

<span class="sd">	"""</span>	 
	<span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">request</span><span class="p">):</span>  
		<span class="sd">"""	 </span>
<span class="sd">		Similar to parent class, but returns the request object as soon as it  </span>
<span class="sd">		has created it.	 </span>
<span class="sd">		"""</span>	 
		<span class="n">environ</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s">'HTTP_COOKIE'</span><span class="p">:</span>       <span class="bp">self</span><span class="o">.</span><span class="n">cookies</span><span class="o">.</span><span class="n">output</span><span class="p">(</span><span class="n">header</span><span class="o">=</span><span class="s">''</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s">'; '</span><span class="p">),</span>
		<span class="s">'REQUEST_METHOD'</span><span class="p">:</span>    <span class="s">'GET'</span><span class="p">,</span>
		<span class="s">'SERVER_NAME'</span><span class="p">:</span>       <span class="s">'testserver'</span><span class="p">,</span>
		<span class="s">'SERVER_PORT'</span><span class="p">:</span>       <span class="s">'80'</span><span class="p">,</span>
		<span class="s">'SERVER_PROTOCOL'</span><span class="p">:</span>   <span class="s">'HTTP/1.1'</span><span class="p">,</span>
		<span class="s">'wsgi.version'</span><span class="p">:</span>      <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
		<span class="s">'wsgi.url_scheme'</span><span class="p">:</span>   <span class="s">'http'</span><span class="p">,</span>
		<span class="s">'wsgi.input'</span><span class="p">:</span>        <span class="n">FakePayload</span><span class="p">(</span><span class="s">''</span><span class="p">),</span>
		<span class="s">'wsgi.errors'</span><span class="p">:</span>       <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span>
		<span class="s">'wsgi.multiprocess'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
		<span class="s">'wsgi.multithread'</span><span class="p">:</span>  <span class="bp">False</span><span class="p">,</span>
		<span class="s">'wsgi.run_once'</span><span class="p">:</span>     <span class="bp">False</span><span class="p">,</span>
		<span class="p">}</span>		

		<span class="n">environ</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaults</span><span class="p">)</span>  
		<span class="n">environ</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>	 
		<span class="n">request</span> <span class="o">=</span> <span class="n">WSGIRequest</span><span class="p">(</span><span class="n">environ</span><span class="p">)</span>	
		<span class="n">handler</span> <span class="o">=</span> <span class="n">BaseHandler</span><span class="p">()</span>	 
		<span class="n">handler</span><span class="o">.</span><span class="n">load_middleware</span><span class="p">()</span>  
		<span class="k">for</span> <span class="n">middleware_method</span> <span class="ow">in</span> <span class="n">handler</span><span class="o">.</span><span class="n">_request_middleware</span><span class="p">:</span>  
			<span class="k">if</span> <span class="n">middleware_method</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>	
				<span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">"Couldn't create request mock object - "</span>  
								 <span class="s">"request middleware returned a response"</span><span class="p">)</span>	
		<span class="k">return</span> <span class="n">request</span></code></pre></div>

<p>Your unit test would look something like this:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">setUp</span><span class="p">():</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">rf</span> <span class="o">=</span> <span class="n">RequestFactory</span><span class="p">()</span>
<span class="o">...</span>

<span class="n">request</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="s">'/hello_world'</span><span class="p">)</span></code></pre></div>

<h4 id="use-python-mock">Use Python Mock</h4>

<p>The <a href="https://pypi.python.org/pypi/mock">mock module</a> has a number of built in methods that enhance unit testing. You can use the module to mock api calls, patch classes/functions, deleting attributes, etc. Add this to your arsenal as soon as possible.</p>

<h4 id="faker">Faker</h4>

<p>If you have account data, user data, company data, address, etc … you no longer have to hard code them thanks to <a href="https://github.com/joke2k/faker">Faker</a>. Faker generates a variety of different data, randomly, and is extremely useful in unit tests and for bootstrapping data.</p>

<h4 id="testing-ajax-calls">Testing AJAX Calls</h4>

<p>Testing AJAX calls isn’t hard, but you should always load the response as JSON (using your favorite JSON module) and then write test to ensure the correct data is returned.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">'add-question'</span><span class="p">),</span> <span class="p">{},</span> <span class="n">HTTP_X_REQUESTED</span><span class="o">=</span><span class="s">'XMLHttpRequest'</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>	
<span class="n">response_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">response_json</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">response_json</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">'first_question_url'</span><span class="p">):</span>
	<span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s">"missing first_question_url: </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="n">response_json</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">survey_url</span> <span class="o">=</span> <span class="n">response_json</span><span class="p">[</span><span class="s">'first_question_url'</span><span class="p">]</span>
<span class="bp">self</span><span class="o">.</span><span class="n">instance_id</span> <span class="o">=</span> <span class="n">response_json</span><span class="p">[</span><span class="s">'instance_id'</span><span class="p">]</span></code></pre></div>

<h4 id="testing-emails">Testing emails</h4>

<p>If you have a view or function that sends and email, Django has built in unit testing modules to let you test if the email was sent. It also lets you check the content (subject + body) of the email.</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span><span class="mi">200</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mail</span><span class="o">.</span><span class="n">outbox</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">mail</span><span class="o">.</span><span class="n">outbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">subject</span><span class="p">,</span> <span class="n">GENERIC_SOCIALQ_WELCOME_EMAIL_SUBJECT</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span> <span class="s">'newuser@socialq.com'</span> <span class="ow">in</span> <span class="n">mail</span><span class="o">.</span><span class="n">outbox</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to</span><span class="p">)</span></code></pre></div>

<h4 id="mocking-the-facebook-api">Mocking the Facebook API</h4>

<p>Do you use Facebook’s Graph API? If so, we develop this class to mock the facebook API in unit tests:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">MockGraphAPI</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="n">me_profile</span><span class="o">=</span><span class="n">FACEBOOK_ME</span>
	<span class="n">me_checkins</span><span class="o">=</span><span class="n">FACEBOOK_ME_CHECKINS</span>
	<span class="n">me_friends</span><span class="o">=</span><span class="n">FACEBOOK_ME_FRIENDS</span>
	<span class="n">me_accounts</span><span class="o">=</span><span class="n">FACEBOOK_ME_ACCOUNTS</span>
	<span class="n">account_posts</span><span class="o">=</span><span class="n">FACEBOOK_ACCOUNT_POSTS</span>
	<span class="n">post_insights</span><span class="o">=</span><span class="n">FACEBOOK_POST_INSIGHTS</span>
	<span class="n">other_profiles</span><span class="o">=</span><span class="n">FACEBOOK_OTHER_PROFILES</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
		<span class="n">access_token</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">me_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">me_profile</span><span class="p">[</span><span class="s">'id'</span><span class="p">]</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">access_token</span> <span class="o">=</span> <span class="n">access_token</span>
	
	<span class="k">def</span> <span class="nf">_is_me</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
		<span class="k">return</span> <span class="nb">id</span><span class="o">==</span><span class="s">"me"</span> <span class="ow">or</span> <span class="nb">id</span><span class="o">==</span><span class="bp">self</span><span class="o">.</span><span class="n">me_id</span>

	<span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="s">"MOCKED:: GraphAPI </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">self</span><span class="o">.</span><span class="n">access_token</span>

	<span class="k">def</span> <span class="nf">get_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">"[MOCKGraphAPI get_object] id=</span><span class="si">%s</span><span class="s"> args=</span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_me</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">me_profile</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">other_profiles</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
			<span class="n">logging</span><span class="o">.</span><span class="n">exception</span><span class="p">(</span><span class="s">"Failed to find id.  Add it or maybe you wanted the failure..."</span><span class="p">)</span>
			<span class="k">return</span> <span class="p">{</span>
			   <span class="s">"error"</span><span class="p">:</span> <span class="p">{</span>
			      <span class="s">"message"</span><span class="p">:</span> <span class="s">"(#803) Some of the aliases you requested do not exist: "</span> <span class="o">+</span> <span class="nb">id</span><span class="p">,</span>
			      <span class="s">"type"</span><span class="p">:</span> <span class="s">"OAuthException"</span><span class="p">,</span>
			      <span class="s">"code"</span><span class="p">:</span> <span class="mi">803</span>
			   <span class="p">}</span>
			<span class="p">}</span>

	<span class="k">def</span> <span class="nf">get_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">"[MOCKGraphAPI get_objects] ids=</span><span class="si">%s</span><span class="s"> args=</span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">ids</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
		<span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">_is_me</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">]):</span>
			<span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
			<span class="n">d</span><span class="p">[</span><span class="s">"me"</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">me_profile</span>

			<span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">FACEBOOK_FRIENDS_PROFILES</span><span class="p">)</span>
			<span class="k">return</span> <span class="n">d</span>
		<span class="k">return</span> <span class="n">FACEBOOK_FRIENDS_PROFILES</span>

	<span class="k">def</span> <span class="nf">get_connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">connection_name</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="p">):</span>
		<span class="n">date_format</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'date_format'</span><span class="p">,</span> <span class="s">'c'</span><span class="p">)</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="bp">None</span>
		<span class="n">id_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_me</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="ow">and</span> <span class="s">"me(</span><span class="si">%s</span><span class="s">)"</span><span class="o">%</span><span class="nb">id</span> <span class="ow">or</span> <span class="nb">id</span>
		<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">"[MOCKGraphAPI get_connections] id=</span><span class="si">%s</span><span class="s"> getting '</span><span class="si">%s</span><span class="s">', args=</span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">id_str</span><span class="p">,</span> <span class="n">connection_name</span><span class="p">,</span> <span class="n">args</span><span class="p">))</span>
		<span class="k">if</span> <span class="n">connection_name</span> <span class="o">==</span> <span class="s">"friends"</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_me</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
				<span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">me_friends</span>
		<span class="k">elif</span> <span class="n">connection_name</span> <span class="o">==</span> <span class="s">"likes"</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_me</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
				<span class="n">ret</span> <span class="o">=</span> <span class="n">FACEBOOK_ME_LIKES</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">ret</span> <span class="o">=</span> <span class="n">FACEBOOK_FRIENDS_LIKES</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)]</span>
		<span class="k">elif</span> <span class="n">connection_name</span> <span class="o">==</span> <span class="s">"checkins"</span><span class="p">:</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">me_checkins</span>
		<span class="k">elif</span> <span class="n">connection_name</span> <span class="o">==</span> <span class="s">"scores"</span><span class="p">:</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="s">'data'</span><span class="p">:</span> <span class="p">[]}</span>
		<span class="k">elif</span> <span class="n">connection_name</span> <span class="o">==</span> <span class="s">"feed"</span><span class="p">:</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="n">FACEBOOK_ME_FEED</span>
		<span class="k">elif</span> <span class="n">connection_name</span> <span class="o">==</span> <span class="s">"accounts"</span><span class="p">:</span>
			<span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">me_accounts</span>
		<span class="k">elif</span> <span class="n">connection_name</span> <span class="o">==</span> <span class="s">"posts"</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_me</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
				<span class="k">raise</span> <span class="ne">NotImplementedError</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">account_posts</span>
		<span class="k">elif</span> <span class="n">connection_name</span> <span class="o">==</span> <span class="s">"insights"</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_me</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
				<span class="k">raise</span> <span class="ne">NotImplementedError</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">post_insights</span>
			<span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">"[MOCKGraphAPI get_connections] returning </span><span class="si">%s</span><span class="s">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">ret</span><span class="p">),</span> <span class="n">colorize</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
		
		<span class="k">if</span> <span class="n">ret</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">NotImplementedError</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">put_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent_object</span><span class="p">,</span> <span class="n">connection_name</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">put_wall_post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">attachment</span><span class="o">=</span><span class="p">{},</span> <span class="n">profile_id</span><span class="o">=</span><span class="s">"me"</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">put_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_id</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">put_like</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_id</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">delete_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span>

	<span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">post_args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">()</span></code></pre></div>

<p>You can use this class in a unit tests as follows:</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="bp">self</span><span class="o">.</span><span class="n">mock_graphapi_patcher</span> <span class="o">=</span> <span class="n">patch</span><span class="p">(</span><span class="s">'vendor.facebook.facebook.GraphAPI'</span><span class="p">,</span>
<span class="n">new_callable</span><span class="o">=</span><span class="n">getMockGraphAPI</span><span class="p">())</span>
<span class="bp">self</span><span class="o">.</span><span class="n">mock_graphapi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mock_graphapi_patcher</span><span class="o">.</span><span class="n">start</span><span class="p">()</span></code></pre></div>

<p>If you are interested in Django, machine learning, math, and/or statistics you can following me on twitter: <a href="https://www.twitter.com/josephmisiti">@josephmisiti</a></p>

<p>If you need help with Django or Machine Learning, contact my firm at info@mathandpencil.com</p>

	</article>
</div></body></html>