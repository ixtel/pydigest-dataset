<html><body><div><div class="post-body entry-content" id="post-body-5811997486029816985" itemprop="description articleBody">
<span>Today I'm happy to present you another library to aid with testing, this time related to tests that need network conectivity: <a href="https://github.com/kevin1024/vcrpy">VCR.py</a></span>
<span><br/></span>
<span>VCR.py, a Python version of Ruby's VCR, works by recording the HTTP requests and responses your test makes, and then replays them when the tests is run again, thus achieving network independence. As a side effect, it also makes the test much faster, which is always nice.</span>
<span><br/></span>
<span>Using it on a typical test is very easy, you just need to import it, and then surround the test that will interact with the network with a with </span><span>vcr.cassete()</span><span> block:</span>

<span/>
<a name="more"/><span><br/></span>
<pre class="prettyprint">def test_colors_from_mapi(self):
    with vcr.use_cassette('tests/assets/vcr_cassettes/'\
            'color_mismatches-colors_from_mapi.yaml'):
        expected_result = set(self.mapi_colors)
        actual_result = color_mismatches.colors_from_mapi()

        self.assertEqual(expected_result, actual_result)
</pre>

<span>Here, I had a test that was making a request to an API, and building a color list with it. By adding the </span><span>vcr </span><span>block, and running the test once, a cassette in the path I specified was created with the contents of the HTTP interaction. When I run the test again, I could see by the speed that it was not making the request anymore, but working straight from the cassette.</span>
<span><br/></span>
<span>You can find many configuration options on the <a href="https://github.com/kevin1024/vcrpy">repo</a> for the library, I will not explain them here because I didn't even need them, which tells a lot about the simplicity of the tool ;)</span>
<span><br/></span>
<span>This is yet another time when I find a library in Python doing just what I needed compared to when I was coding in Ruby (remember <a href="http://www.developingandstuff.com/2013/12/freezegun-time-travel-for-python-tests.html">freezegun</a>?). The switch between both languages is being much easier than I expected :)</span>
<span><br/></span>
<span><br/></span>
<p/>
</div>
</div></body></html>