<html><body><div><div id="installation">
<h2>Installation</h2>
<ol>
<li>In a new project folder for your bot:</li>
</ol>
<pre>$ mkdir myslackbot
$ <span class="nb">cd</span> myslackbot
</pre>
<ol>
<li>Install <tt>gendobot</tt> from <em>pypi</em>.</li>
</ol>
<pre>$ pip install gendobot
</pre>
<ol>
<li>Next make another file for your bot’s logic:</li>
</ol>
<pre>$ touch mybot.py
</pre>
<ol>
<li>Also in your favorite text editor, edit <em>mybot.py</em> with the following:</li>
</ol>
<pre><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>
<span class="kn">from</span> <span class="nn">gendo</span> <span class="kn">import</span> <span class="n">Gendo</span>
<span class="n">gendo</span> <span class="o">=</span> <span class="n">Gendo</span><span class="p">(</span><span class="s2">"xoxb-1234567890-replace-this-with-token-from-slack"</span><span class="p">)</span>


<span class="nd">@gendo.listen_for</span><span class="p">(</span><span class="s1">'morning'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">morning</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">"mornin' @{user.username}"</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
   <span class="n">gendo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre>
<ol>
<li>Now try running it, run the following command then say “<em>morning</em>” in Slack.</li>
</ol>
<pre>$ python mybot.py
</pre>
</div>
<div id="basic-usage">
<h2>Basic Usage</h2>
<p>To start your project, you’ll first need to import gendo by adding
<tt>from gendo import Gendo</tt> to the top of your file.</p>
<p>Next you’ll need to create an instance of Gendo and configure your Slack token.
This can be done using a yaml config file or passing it explicitly to the
initialization.</p>
<pre><span class="c1"># Option 1: YAML config:</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">gendo</span> <span class="kn">import</span> <span class="n">Gendo</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>
<span class="n">path_to_yaml</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">'config.yaml'</span><span class="p">)</span>
<span class="n">gendo</span> <span class="o">=</span> <span class="n">Gendo</span><span class="o">.</span><span class="n">config_from_yaml</span><span class="p">(</span><span class="n">path_to_yaml</span><span class="p">)</span>
</pre>
<pre><span class="c1"># Option 2: Hardcoded slack token</span>
<span class="kn">from</span> <span class="nn">gendo</span> <span class="kn">import</span> <span class="n">Gendo</span>
<span class="n">gendo</span> <span class="o">=</span> <span class="n">Gendo</span><span class="p">(</span><span class="s2">"xoxb-1234567890-replace-this-with-token-from-slack"</span><span class="p">)</span>
</pre>
<p>Now its time to write your <tt>response</tt> functions, these functions get wrapped
with the <tt>listen_for</tt> decorator, which registers a pattern to watch the slack
conversation for and which python method should handle it once its said.</p>
<p>In the following example, the method is setup to listen for the word “<em>cookies</em>”.
Notice that the decorator passes two arguments to the function, first the
<tt>user</tt> object which contains information about the user who triggered the
event (in this case the Slack user who said the word cookies) and <tt>message</tt>,
which is a string of the complete message.</p>
<pre><span class="nd">@gendo.listen_for</span><span class="p">(</span><span class="s1">'cookies'</span><span class="p">)</span>
 <span class="k">def</span> <span class="nf">cookies</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
     <span class="c1"># do something when someone say's "cookies" here.</span>
</pre>
<p>Finally your script needs to sit inside a loop, monitor whats said in a slack
channel and respond to the messages accordingly. To do this we add the
following to the end of your script:</p>
<pre><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
   <span class="n">gendo</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre>
<div id="crontab">
<h3>Crontab</h3>
<p>Sometimes you’ll run into situations where you want Slack messages to be sent
periodically rather than in direct response to a keyword, for this Gendo ships
with a single-threaded Python implementation of Cron.</p>
<p>Let’s pretend we want to send a message to everyone in a channel every five
minutes, simply add the following to your <em>mybot.py</em> file:</p>
<pre><span class="nd">@gendo.cron</span><span class="p">(</span><span class="s1">'*/5 * * * *'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">some_task</span><span class="p">():</span>
    <span class="n">gendo</span><span class="o">.</span><span class="n">speak</span><span class="p">(</span><span class="s2">"Hay Ride!"</span><span class="p">,</span> <span class="s2">"#general"</span><span class="p">)</span>
</pre>
<p>See <a href="https://en.wikipedia.org/wiki/Cron#Configuration_file" rel="nofollow">https://en.wikipedia.org/wiki/Cron#Configuration_file</a> for more details on
crontab syntax.</p>
</div>
</div>


</div></body></html>