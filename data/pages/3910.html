<html><body><div><div class="post-content" itemprop="articleBody">
<p dir="ltr">
<span>Years of writing and maintaining Python code have taught us the value of automated tools for code formatting, but the existing ones didn’t quite do what we wanted. In the best traditions of the open source community, it was time to write yet another Python formatter.</span></p>
<b><br/></b>
<div dir="ltr">
<a href="https://github.com/google/yapf"><span>YAPF</span></a><span> takes a different approach to formatting Python code: it reformats the entire program, not just individual lines or constructs that violate a style guide rule. The ultimate goal is to let  engineers focus on the bigger picture and not worry about the formatting. The end result should look the same as if an engineer </span><span>had</span><span> worried about the formatting.</span></div>
<b><br/></b>
<p dir="ltr">
<span>You can run YAPF on the entire program or just a part of the program. It’s also possible to flag certain parts of a program which YAPF shouldn’t alter, which is useful for generated files or sections with large literals.</span></p>
<b><br/></b>
<p dir="ltr">
<span>Consider this horribly-formatted code:</span></p>
<b><span><br/></span></b>
<p dir="ltr">
<span><span>x = {  'a':37,'b':42,</span></span></p>
<b><span><br/></span></b>
<p dir="ltr">
<span><span>'c':927}</span></span></p>
<b><span><br/></span></b>
<p dir="ltr">
<span><span>y = 'hello ''world'</span></span></p>
<p dir="ltr">
<span><span>z = 'hello '+'world'</span></span></p>
<p dir="ltr">
<span><span>a = 'hello {}'.format('world')</span></span></p>
<p dir="ltr">
<span><span>class foo  (     object  ):</span></span></p>
<p dir="ltr">
<span><span>  def f    (self   ):</span></span></p>
<p dir="ltr">
<span><span>    return       \</span></span></p>
<p dir="ltr">
<span><span>37*-+2</span></span></p>
<p dir="ltr">
<span><span>  def g(self, x,y=42):</span></span></p>
<p dir="ltr">
<span><span>      return y</span></span></p>
<p dir="ltr">
<span><span>def f  (   a ) :</span></span></p>
<p dir="ltr">
<span><span>  return      37+-+a[42-x :  y**3]</span></span></p>
<b><br/></b>
<p dir="ltr">
<span>YAPF reformats this into something much more consistent and readable:</span></p>
<b><span><br/></span></b>
<p dir="ltr">
<span><span>x = {'a': 37, 'b': 42, 'c': 927}</span></span></p>
<b><span><br/></span></b>
<p dir="ltr">
<span><span>y = 'hello ' 'world'</span></span></p>
<p dir="ltr">
<span><span>z = 'hello ' + 'world'</span></span></p>
<p dir="ltr">
<span><span>a = 'hello {}'.format('world')</span></span></p>
<b><span><br/></span></b>
<p dir="ltr">
<span><span>class foo(object):</span></span></p>
<p dir="ltr">
<span><span>    def f(self):</span></span></p>
<p dir="ltr">
<span><span>        return 37 * -+2</span></span></p>
<b><span><br/></span></b>
<p dir="ltr">
<span><span>    def g(self, x, y=42):</span></span></p>
<p dir="ltr">
<span><span>        return y</span></span></p>
<b><span><br/></span></b>
<p dir="ltr">
<span><span>def f(a):</span></span></p>
<p dir="ltr">
<span><span>    return 37 + -+a[42 - x:y ** 3]</span></span></p>
<b><br/></b>
<div dir="ltr">
<span>Head to </span><a href="https://github.com/google/yapf"><span>YAPF's GitHub page</span></a><span> for more information on how to use it, and take a look at YAPF’s own source code to see a much larger example of the output it produces.</span></div>
<span>by Bill Wendling, YouTube Code Health Team</span>
</div>
</div></body></html>