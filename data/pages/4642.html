<html><body><div><div class="post-text" itemprop="text">

<p>The Python <code>tarfile</code> library does not detect a broken tar.</p>

<pre><code>user@host$ wc -c good.tar
143360 good.tar

user@host$ head -c 130000 good.tar &gt; cut.tar

user@host$ tar -tf cut.tar 
...
tar: Unexpected EOF in archive
tar: Error is not recoverable: exiting now
</code></pre>

<p>Very nice, the command line tool  recognizes an unexpected EOF.</p>

<pre><code>user@host$ python
Python 2.7.6 (default, Mar 22 2014, 22:59:56) 
&gt;&gt;&gt; import tarfile
&gt;&gt;&gt; tar=tarfile.open('cut.tar')
&gt;&gt;&gt; tar.extractall()
</code></pre>

<p>Not nice. The Python library decodes the file, but raises no exception.</p>

<p>How to detect unexpected EOF with the Python library? I want to avoid the <code>subprocess</code> module.</p>

<p>The parameter <code>errorlevel</code> does not help. I tried errorlevel=1 and errorlevel=2.</p>
    </div>
    </div></body></html>