<html><body><div><div id="configuration">
<h2>Configuration</h2>
<p>Set <tt>SIXPACK_HOST</tt> and (optionally) <tt>SIXPACK_TIMEOUT</tt> in your settings file.</p>
<p>If <tt>SIXPACK_HOST</tt> is unset, it will fall back to <tt><span class="pre">sixpack-py</span></tt>’s default, which is <tt><span class="pre">http://localhost:5000</span></tt>. If <tt>SIXPACK_HOST</tt> is set to <tt>None</tt>, <tt><span class="pre">django-sixpack</span></tt> will
operate in test mode, which means that the control alternative (the first one listed) will be
returned for all <tt>participate</tt> calls, all <tt>convert</tt> calls will be successful, and the exertnal
sixpack server will not be contacted.</p>
</div>
<div id="usage">
<h2>Usage</h2>
<p>First, define a test somewhere:</p>
<pre><span class="kn">from</span> <span class="nn">djsixpack.djsixpack</span> <span class="kn">import</span> <span class="n">SixpackTest</span>

<span class="k">class</span> <span class="nc">ButtonColorTest</span><span class="p">(</span><span class="n">SixpackTest</span><span class="p">):</span>
   <span class="n">alternatives</span> <span class="o">=</span> <span class="p">(</span>
      <span class="s1">'RED'</span><span class="p">,</span>
      <span class="s1">'BLUE'</span>
   <span class="p">)</span>
</pre>
<p>If you go into the Sixpack web dashboard, you’ll see this as a test called <tt>button_color</tt>, with
the control being the alternative <tt>RED</tt> (the first alternative listed will be considered the control).</p>
<p>When it’s time to add a user to the test:</p>
<pre><span class="n">expt</span> <span class="o">=</span> <span class="n">ButtonColorTest</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
<span class="n">bucket</span> <span class="o">=</span> <span class="n">expt</span><span class="o">.</span><span class="n">participate</span><span class="p">()</span>

<span class="n">context</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">if</span> <span class="n">bucket</span> <span class="o">==</span> <span class="n">ButtonColorTest</span><span class="o">.</span><span class="n">RED</span><span class="p">:</span>
   <span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'color'</span><span class="p">:</span> <span class="s1">'#FF0000'</span><span class="p">}</span>
<span class="k">elif</span> <span class="n">bucket</span> <span class="o">==</span> <span class="n">ButtonColorTest</span><span class="o">.</span><span class="n">BLUE</span><span class="p">:</span>
   <span class="n">context</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'color'</span><span class="p">:</span> <span class="s1">'#0000FF'</span><span class="p">}</span>
</pre>
<p><tt>SixpackTest.participate</tt> will return the alternative <tt>request.user</tt> is bucketed into - and all alternatives
will be available as class properties.</p>
<p>When instantiating a <tt>SixpackTest</tt> test, the only argument the constructor takes is the model instance
which is used to represent the person seeing this test. By default, <tt>SixpackTest</tt> will use the instance’s
<tt>pk</tt> attribute as the unique identifier to represent this person - but this can be overridden by setting the
<tt>unique_attr</tt> class attribute.</p>
<p>For example, you could have a <tt>Business</tt> model class which represents a person, and it has a attribute called
<tt>global_id</tt> which represents a cross-platform way of identifying a particular <tt>Business</tt>. In that case,
you could do:</p>
<pre><span class="kn">from</span> <span class="nn">djsixpack.djsixpack</span> <span class="kn">import</span> <span class="n">SixpackTest</span>

<span class="k">class</span> <span class="nc">ButtonColorTest</span><span class="p">(</span><span class="n">SixpackTest</span><span class="p">):</span>
   <span class="n">unique_attr</span> <span class="o">=</span> <span class="s1">'global_id'</span>
   <span class="n">alternatives</span> <span class="o">=</span> <span class="p">(</span>
      <span class="s1">'RED'</span><span class="p">,</span>
      <span class="s1">'BLUE'</span>
   <span class="p">)</span>
</pre>
<p>At any point, you can check the <tt>SixpackTest.client_id</tt> property to see what’s being used as the <tt>client_id</tt>.</p>
<p>If something ever goes wrong - a request times out, the <tt>sixpack</tt> server disappears, etc. - all <tt>participate</tt>
calls will return the control alternative, and all <tt>convert</tt> calls will seem successful (and we’ll note this happend
in the log).</p>
</div>
</div></body></html>