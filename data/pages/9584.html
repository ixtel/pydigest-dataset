<html><body><div><div id="content">

            

            
        


            <div class="section">
              <h1>singularity-cli 0.1.5</h1>

              


<p>Opinionated CLI for Singularity PAAS</p>








<div id="singularity-cli">
<h2>Singularity CLI</h2>
<p>A CLI for the Singularity REST API with some opinionated configuration
management for Singularity Requests and Deploys.</p>
<div id="installation">
<h3>Installation</h3>
<p>If you don’t use <tt>pipsi</tt>, you’re missing out. Here are <a href="https://github.com/mitsuhiko/pipsi#readme" rel="nofollow">installation
instructions</a>.</p>
<p>After setting up <tt>pipsi</tt> you may need to add the following to your
PATH environment variable:</p>
<p><tt><span class="pre">$HOME/bin:$HOME/.local/bin</span></tt></p>
<p>Simply run:</p>
<pre>$ pipsi install .
</pre>
</div>
<div id="usage">
<h3>Usage</h3>
<p>To use it:</p>
<p><tt>singularity <span class="pre">--help</span></tt></p>
<p>and</p>
<p><tt>$ singularity COMMAND <span class="pre">--help</span></tt></p>
</div>
<div id="global-options">
<h3>Global options</h3>
<pre>-h, --singularity-host TEXT  Singularity host url
-k, --insecure               Allow connections to SSL sites without certs (H)
</pre>
</div>
<div id="environment-variables">
<h3>Environment variables</h3>
<p>The <tt><span class="pre">--singularity-host</span></tt> and <tt><span class="pre">--insecure</span></tt> global options can also be
specified and set with the following environment variables:</p>
<pre>SINGULARITY_URL      Set to the Singularity url
SINGULARITY_INSECURE Set to a truthy/falsey value. (e.g. 0|1|true|false)
</pre>
</div>
<div id="commands">
<h3>Commands</h3>
<div id="state">
<h4>state</h4>
<p>Get the overall state of Singularity in terms of the number of requests,
tasks, racks, slaves each broken down various states</p>
</div>
<div id="request">
<h4>request</h4>
<p>Get or update Singularity requests.</p>
<div id="sync">
<h5>sync</h5>
<p>Synchronize requests and associated deploys from JSON files on the
filesystem. The sync command can take either a specific file to sync
with the <tt><span class="pre">--file</span></tt> option or a directory containing a set of files to
sync with the <tt><span class="pre">--dir</span></tt> option. Each file that is processed must be a
valid JSON file with the following structure:</p>
<p>{ “request”:
<a href="https://github.com/HubSpot/Singularity/blob/master/Docs/reference/api.md#model-SingularityRequest" rel="nofollow">SingularityRequest</a>,
“deploy”:
<a href="https://github.com/HubSpot/Singularity/blob/master/Docs/reference/api.md#model-SingularityDeploy" rel="nofollow">SingularityDeploy</a>
}</p>
</div>
<div id="bounce">
<h5>bounce</h5>
<p>Restart the tasks for a given request</p>
</div>
<div id="delete">
<h5>delete</h5>
<p>Delete the request and stop all tasks associated with it</p>
</div>

<div id="list">
<h5>list</h5>
<p>Get a list of requests by their state</p>
</div>
<div id="instances">
<h5>instances</h5>
<p>Scale the number of tasks running for a given request</p>
</div>
<div id="pause">
<h5>pause</h5>
<p>Pause the request to disallow new deploys against it. Optionally kill
all tasks for the request while paused.</p>
</div>
<div id="run">
<h5>run</h5>
<p>Run a on-demand or scheduled request now.</p>
</div>
<div id="unpause">
<h5>unpause</h5>
<p>Unpause a request that was previously paused</p>
</div>
</div>
</div>
</div>
<div id="examples">
<h2>Examples</h2>
<div id="get-the-state-of-singularity">
<h3>Get the state of Singularity</h3>
<pre>$ singularity -k state
Requests

  Active    Paused    Cooling Down    Pending    Cleaning
--------  --------  --------------  ---------  ----------
       3         1               0          0           0
Tasks

  Active    Scheduled    Overdue    Cleaning    Load Balancer Cleanup
--------  -----------  ---------  ----------  -----------------------
       1            1          0           0                        0
Racks

  Active    Decommissioning    Inactive
--------  -----------------  ----------
       3                  0           0
Slaves

  Active    Decommissioning    Inactive    Unknown
--------  -----------------  ----------  ---------
       6                  0           0          0
</pre>
</div>
<div id="get-the-list-of-all-requests">
<h3>Get the list of all requests</h3>
<pre>$ singularity -k request list
Id                 State    Type         Instances    Deploy Id
-----------------  -------  ---------  -----------  -----------
yb-echo            ACTIVE   SERVICE              1            9
yb-on-demand-test  ACTIVE   ON_DEMAND            1            1
test.ondemand      PAUSED   ON_DEMAND            1            1
yb-scheduled-test  ACTIVE   SCHEDULED            1            3
</pre>
</div>
<div id="get-the-list-of-all-active-requests">
<h3>Get the list of all active requests</h3>
<pre>$ singularity -k request list -t active
Id                 State    Type         Instances    Deploy Id
-----------------  -------  ---------  -----------  -----------
yb-echo            ACTIVE   SERVICE              1            9
yb-on-demand-test  ACTIVE   ON_DEMAND            1            1
yb-scheduled-test  ACTIVE   SCHEDULED            1            3
</pre>
</div>
<div id="get-the-state-of-a-request">
<h3>Get the state of a request</h3>
<pre>$ singularity -k request get yb-echo
--------------  ------------------------
Id              yb-echo
State           ACTIVE
Type            SERVICE
Instances       1
Rack Sensitive  False
Load Balanced   False
Owners          [u'dwhite@yieldbot.com']
Deploy Id       9
--------------  ------------------------
</pre>
</div>
<div id="synchronize-the-state-of-a-request-without-a-deploy-change">
<h3>Synchronize the state of a request (without a deploy change)</h3>
<pre>$ singularity -k request sync --file ~/src/skeeter/clusters/platform/prd/singularity/yb-echo.json
syncronized request yb-echo
</pre>
</div>
<div id="synchronize-the-state-of-a-request-with-a-deploy-change">
<h3>Synchronize the state of a request (with a deploy change)</h3>
<pre>$ singularity -k request sync --file ~/src/skeeter/clusters/platform/prd/singularity/yb-echo.json
syncronized request yb-echo
syncronized deploy 10 for request yb-echo
</pre>
</div>
<div id="pause-unpause-a-request">
<h3>Pause/unpause a request</h3>
<pre>$ singularity -k request pause yb-echo
paused request yb-echo with killTasks=False

$ singularity -k request get yb-echo
--------------  ------------------------
Id              yb-echo
State           PAUSED
Type            SERVICE
Instances       1
Rack Sensitive  False
Load Balanced   False
Owners          [u'dwhite@yieldbot.com']
Deploy Id       10
--------------  ------------------------

$ singularity -k request unpause yb-echo
unpaused request yb-echo

$ singularity -k request get yb-echo
--------------  ------------------------
Id              yb-echo
State           ACTIVE
Type            SERVICE
Instances       1
Rack Sensitive  False
Load Balanced   False
Owners          [u'dwhite@yieldbot.com']
Deploy Id       10
--------------  ------------------------
</pre>
</div>
<div id="scale-a-request">
<h3>Scale a request</h3>
<pre>$ singularity -k request instances yb-echo 2
setting instances to 2 for request yb-echo

$ singularity -k request get yb-echo
--------------  ------------------------
Id              yb-echo
State           ACTIVE
Type            SERVICE
Instances       2
Rack Sensitive  False
Load Balanced   False
Owners          [u'dwhite@yieldbot.com']
Deploy Id       10
--------------  ------------------------

$ singularity -k request instances yb-echo 1
setting instances to 1 for request yb-echo

$ singularity -k request get yb-echo
--------------  ------------------------
Id              yb-echo
State           ACTIVE
Type            SERVICE
Instances       1
Rack Sensitive  False
Load Balanced   False
Owners          [u'dwhite@yieldbot.com']
Deploy Id       10
--------------  ------------------------
</pre>
</div>
<div id="bounce-a-request-restarts-all-tasks-for-the-request">
<h3>Bounce a request (restarts all tasks for the request)</h3>
<pre>$ singularity -k request bounce yb-echo
bounced request yb-echo
</pre>
</div>
</div>
<div id="todo">
<h2>TODO</h2>
<ul>
<li>Tests, tests, tests…</li>
<li>Flesh out remaining cli commands based on what’s available in the
<a href="https://github.com/HubSpot/Singularity/blob/master/Docs/reference/api.md" rel="nofollow">Singularity
API</a></li>
</ul>
</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>104</span> downloads in the last week
  </li>
  <li>
    <span>897</span> downloads in the last month
  </li>
</ul>









            </div>


          </div>
          </div></body></html>