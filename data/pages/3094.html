<html><body><div><div class="body"><div itemscope="" itemtype="http://schema.org/Article"><h1 class="title" itemprop="name">Quick tracing</h1><p class="date"> Mon 28 April 2014</p><div itemprop="articleBody"><p>Here's a quick way to see what code is actually run when calling some library.</p><p>Just create a file <tt class="docutils literal">shell.py</tt> with this in it:</p><pre class="literal-block">
import code
con = code.InteractiveConsole()
con.interact()
</pre><div class="note"><p class="first admonition-title">Note</p><p class="last"><tt class="docutils literal">code</tt>, <tt class="docutils literal">codeop</tt>, <tt class="docutils literal">__future__</tt> modules are ignored so you don't see the trace for the code handling the <a class="reference external" href="http://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a>.</p></div><p>Then run:</p><pre class="literal-block">
python -mtrace --ignore-module=code,codeop,__future__ --trace shell.py
</pre><p>Ta-da!</p><div class="highlight"><pre><span/><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
<span class="go"> --- modulename: utf_8, funcname: decode</span>
<span class="go">utf_8.py(16):     return codecs.utf_8_decode(input, errors, True)</span>
<span class="go"> --- modulename: genericpath, funcname: isfile</span>
<span class="go">genericpath.py(28):     try:</span>
<span class="go">genericpath.py(29):         st = os.stat(path)</span>
<span class="go">genericpath.py(32):     return stat.S_ISREG(st.st_mode)</span>
<span class="go"> --- modulename: stat, funcname: S_ISREG</span>
<span class="go">stat.py(50):     return S_IFMT(mode) == S_IFREG</span>
<span class="go"> --- modulename: stat, funcname: S_IFMT</span>
<span class="go">stat.py(25):     return mode &amp; 0170000</span>
<span class="go">False</span>
</pre></div></div><p class="tags">This entry was tagged as <a href="https://blog.ionelmc.ro/tag/python/"><span itemprop="keywords">python</span></a><a href="https://blog.ionelmc.ro/tag/debugging/"><span itemprop="keywords">debugging</span></a></p></div><p id="disqus_thread"/><noscript> Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div></div></body></html>