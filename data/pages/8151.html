<html><body><div><div id="instalacion">
<h4>Instalación</h4>
<p>Cómo con cualquier programa con python, es recomendable usar un entorno
virtual (virtualenv), pero eso queda a elección del usuario. Se puede
escoger entre los siguientes metodos:</p>
<p>Instalar usando pip:</p>
<pre>$ su -c "pip3 install gnusrss"
</pre>
<p>Clonar el repositorio:</p>
<pre>$ git clone git://daemons.cf/gnusrss
# O ...
$ git clone https://notabug.org/drymer/gnusrss/
$ cd gnusrss
$ su -c "pip3 install -r requirements.txt"
$ su -c "python3 setup.py install"
</pre>
<p>Si se usa parabola:</p>
<pre>$ su -c "pacman -S gnusrss"
</pre>
</div>
<div id="configuracion">
<h4>Configuración</h4>
<p>El programa es (o debería ser) bastante intuitivo. Ejecutando lo
siguiente, deberia verse lo básico:</p>
<pre>$ gnusrss.py
usage: gnusrss [-h] [-c file_name] [-C] [-p config_file] [-P] [-k file_name]

Post feeds to GNU Social

optional arguments:
    -h, --help            show this help message and exit
    -c file_name, --create-config file_name
                    creates a config file
    -C, --create-db       creates the database
    -p config_file, --post config_file
                    posts feeds
    -P, --post-all        posts all feeds
    -k file_name, --populate-database file_name
                    fetch the RSS and save it in the database
</pre>
<p>En cualquier caso, si no queda claro, leer lo siguiente.</p>
<p>Para el primer uso, la base de datos y el primer archivo de
configuración deben ser creados. Podemos hacerlo usando la misma orden,
tal que así:</p>
<pre>$ gnusrss.py --create-db --create-config daemons
</pre>
<p>A continuación hará varias preguntas para configurar el primer archivo
de configuración. Debería verse así:</p>
<pre>Database created!
Hi! Now we'll create de config file!
Please introduce the feed's url: https://daemons.cf/rss.xml
Please introduce your username (user@server.com): drymer@quitter.se
Please introduce your password: contraseñaFalsa
Do you need to shorten the urls that you post? Please take in account
that you should only use it if your node only has 140 characters.
Answer with "yes" or just press enter if you don't want to use it:
Please introduce your feed's fallbackurl. If you don't want or have one,
just press enter:
Now we're gona fetch the feed. Please wait...
Done! The tags are:
   tags
   title_detail
   link
   authors
   links
   author_detail
   published_parsed
   title
   summary
   id
   author
   published
   guidislink
   summary_detail
The XML has been parsed. Choose wich format you want:
Please put the tags inside the square brackets
Ex: {title} - {link} by @{author}: {title} - {link} by @{author}
</pre>
<p>El archivo se guardará con el nombre ‘daemons.ini’. Después de todas
estas preguntas, debería verse similar a esto:</p>
<pre>[feeds]
feed = https://daemons.cf/rss.xml
user = drymer@quitter.se
password = contraseñaFalsa
shorten =
fallback_feed =
format = {title} - {link} by @{author}
</pre>
<p>Se pueden crear todos los archivos de configuración que se quieran. Al
haber creado el archivo anterior, se han metido en la base de datos
todos los feeds que habian hasta el momento. Por lo tanto, cuando se
ejecuta <strong>gnusrss</strong> por primera vez, no posteará nada en GNU Social, a
menos que el feed tenga nueva información. Para postear los feeds de un
archivo o todos, ejecutar, respectivamente, lo siguiente:</p>
<pre>$ gnusrss.py -p daemons.ini
$ gnusrss.py -P
</pre>
<p>Si el archivo de configuración ha sido creado manualmente y no se quiere
postear el contenido del feed, sólo hay que ejecutar la opción
–populate-database para guardar estos en la base de datos:</p>
<pre>$ gnusrss.py -k otherFile.ini
</pre>
</div>
<div id="id2">
<h4>Crontab</h4>
<p>El modo recomendado de ejecución de gnusrss es usando el crontab. Cada
vez que se ejecute posteará un sólo elemento del feed para evitar el
flood. Según la cantidad de feeds que se publiquen, se deberia escoger
un tiempo de ejecución distinto. Para un blog que publique una vez al
día, con poner lo siguiente, deberia valer:</p>
<pre>* 12 * * * cd $rutaDEgnusrss &amp;&amp; gnusrss.py -p daemons.cf
</pre>
<p>Así se ejecuta una vez al día, a las doce de la mañana. Si, en cambio,
lo usasemos con <a href="http://daemons.cf/cgit/twitter2rss/" rel="nofollow">twitter2rss</a>,
se recomienda poner que se ejecute cada cinco minutos. Hay que recordar
que es importante que se ejecute en el directorio en el que se ha creado
la base de datos, ya que es ahí dónde la buscará.</p>
</div>
<div id="uso-con-twitter2rss-y-o-gnu-social">
<h4>Uso con twitter2rss y/o GNU Social</h4>
<p>Funciona igual que con cualquier feed, exceptuando el campo que se
publica. En ambos hay que escoger <tt>{summary}</tt>. Un ejemplo de archivo
de configuración sería el siguiente:</p>
<pre>[feeds]
feed = https://quitter.se/api/statuses/user_timeline/127168.atom
user = drymer@quitter.se
password = contraseñaFalsa
shorten =
fallback_feed =
format = {summary}
</pre>
<p>El feed se puede conseguir mirando el código fuente de la página de la
cuenta que se quiere. En el caso de
<a href="http://daemons.cf/cgit/twitter2rss" rel="nofollow">twitter2rss</a>, se puede hostear o
se puede usar esta <a href="http://daemons.cf/twitter2rss" rel="nofollow">web</a>.</p>
</div>
</div></body></html>