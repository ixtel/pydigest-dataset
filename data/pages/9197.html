<html><body><div><div id="specify-template-loaders">
<h3>Specify template loaders</h3>
<p>You also need to enable the loader in the settings, similar to Django’s
cached template loader. The loader takes an iterable (list or tuple) of
loaders to find the templates. Example - and probably most used - set-up:</p>
<pre><span class="n">TEMPLATES</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">'BACKEND'</span><span class="p">:</span> <span class="s1">'django.template.backends.django.DjangoTemplates'</span><span class="p">,</span>
        <span class="c1"># APP_DIRS must be False if you specify the loaders yourself</span>
        <span class="s1">'APP_DIRS'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
        <span class="s1">'DIRS'</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">PROJECT_DIR</span><span class="p">,</span> <span class="s1">'templates'</span><span class="p">),</span>
        <span class="p">],</span>
        <span class="s1">'OPTIONS'</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">'loaders'</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">(</span><span class="s1">'label_templates.loaders.Loader'</span><span class="p">,</span> <span class="p">[</span>
                    <span class="s1">'django.template.loaders.filesystem.Loader'</span><span class="p">,</span>
                    <span class="s1">'django.template.loaders.app_directories.Loader'</span><span class="p">,</span>
                <span class="p">]),</span>
            <span class="p">],</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">]</span>
</pre>
<p>If you wish, this template loader can also be wrapped in other loaders,
like <tt>django.template.loaders.cached.Loader</tt>.</p>
</div>
<div id="configure-the-site-labels">
<h3>Configure the site labels</h3>
<p>For the final step, one extra custom settings is required: <tt>SITELABELS</tt>.</p>
<pre><span class="c1"># the import is safe and does NOT depend on django.conf.settings</span>
<span class="kn">from</span> <span class="nn">label_templates.sites</span> <span class="kn">import</span> <span class="n">SiteLabels</span><span class="p">,</span> <span class="n">SiteChoice</span>

<span class="k">class</span> <span class="nc">SITELABELS</span><span class="p">(</span><span class="n">SiteLabels</span><span class="p">):</span>
    <span class="n">site</span> <span class="o">=</span> <span class="n">SiteChoice</span><span class="p">(</span><span class="s1">'example.com'</span><span class="p">,</span> <span class="n">site_id</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">site2</span> <span class="o">=</span> <span class="n">SiteChoice</span><span class="p">(</span><span class="s1">'example2.com'</span><span class="p">,</span> <span class="n">site_id</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre>
<p>This settings is used to look up the label-prefix for the templates. The site
with <tt>ID=1</tt> will resolve to a subfolder <tt>site/</tt>, so to load the template
<tt>example.html</tt>, the loader will try to find <tt>site/example.html</tt> first, and
failing that, will try to just load <tt>example.html</tt>.</p>
<p>For the site with <tt>ID=2</tt>, the prefix <tt>site2</tt> is used.</p>
<div>
<p>Note</p>
<p>To find the matching site, the loader tries to get the label for the
<tt>SiteChoice</tt> based on <tt>django.contrib.sites.models.Site.name</tt>, with a
fallback to <tt>domain</tt>. So, for the first argument of <tt>SiteChoice</tt>, it’s
safest to enter the <tt>Site.name</tt> value.</p>
</div>
</div>
</div></body></html>