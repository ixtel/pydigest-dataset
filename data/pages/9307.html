<html><body><div><div class="entry-content">
                    <p>On the <a class="reference external" href="https://github.com/audreyr/cookiecutter">Cookiecutter</a> project, recently we added <a class="reference external" href="http://conda.pydata.org/">conda</a> to the open source packaging systems we officially support (You can find Cookiecutter on <a class="reference external" href="https://pypi.python.org/pypi/cookiecutter">PyPI</a>, <a class="reference external" href="https://github.com/Homebrew/homebrew/blob/master/Library/Formula/cookiecutter.rb">homebrew</a>, and apparently some Linux distros).</p>
<div class="section" id="creating-a-conda-recipe-from-a-pypi-package">
<h2>Creating a conda recipe from a PyPI package</h2>
<p>Prequisites:</p>

<p>Once those are ready, create a conda recipe for Cookiecutter.</p>
<div class="highlight"><pre><span class="nv">$ </span>conda skeleton pypi cookiecutter
</pre></div>
<p>This will create a conda recipe, which is a directory named <tt class="docutils literal">cookiecutter</tt> that contains several text files.</p>
<p>Inside the new <tt class="docutils literal">cookiecutter</tt> recipe directory, find the <tt class="docutils literal">meta.yaml</tt> file and change the appropriate sections to have this content:</p>
<div class="highlight"><pre><span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span>
    <span class="c1"># Change to match the most recent release</span>
    <span class="l-Scalar-Plain">git_tag</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.9.1</span>
    <span class="l-Scalar-Plain">git_url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://github.com/audreyr/cookiecutter.git</span>

<span class="l-Scalar-Plain">package</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cookiecutter</span>
    <span class="l-Scalar-Plain">version</span><span class="p-Indicator">:</span> <span class="p-Indicator">{{</span> <span class="nv">environ</span><span class="p-Indicator">[</span><span class="s">'GIT_DESCRIBE_TAG'</span><span class="p-Indicator">]</span> <span class="p-Indicator">}}</span>

<span class="l-Scalar-Plain">build</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">number</span><span class="p-Indicator">:</span> <span class="p-Indicator">{{</span> <span class="nv">environ.get('GIT_DESCRIBE_NUMBER'</span><span class="p-Indicator">,</span> <span class="nv">0)</span> <span class="p-Indicator">}}</span>

    <span class="c1"># Note that this will override the default build string with the Python</span>
    <span class="c1"># and NumPy versions</span>
    <span class="l-Scalar-Plain">string</span><span class="p-Indicator">:</span> <span class="p-Indicator">{{</span> <span class="nv">environ.get('GIT_BUILD_STR'</span><span class="p-Indicator">,</span> <span class="s">''</span><span class="nv">)</span> <span class="p-Indicator">}}</span>
</pre></div>
</div>
<div class="section" id="building-a-conda-package">
<h2>Building a conda package</h2>
<p>Use the conda recipe to build a package for my operating system (in this case, Mac OS X):</p>
<div class="highlight"><pre><span class="nv">$ </span>conda build cookiecutter
</pre></div>
<p>This creates a Cookiecutter conda package at <tt class="docutils literal"><span class="pre">~/miniconda/conda-bld/osx-64/cookiecutter-0.9.1_BUILDNUM.tar.bz2</span></tt>.</p>
<p><strong>Note:</strong> The official conda recipe for <strong>cookiecutter</strong> is at <a class="reference external" href="https://github.com/conda/conda-recipes/tree/master/cookiecutter">https://github.com/conda/conda-recipes/tree/master/cookiecutter</a>.</p>
</div>
<div class="section" id="converting-the-conda-package-to-other-systems">
<h2>Converting the conda package to other systems</h2>
<p>Let's convert that to Windows and Linux systems:</p>
<div class="highlight"><pre><span class="nv">$ </span>conda convert ~/miniconda/conda-bld/osx-64/cookiecutter-0.9.1_BUILDNUM.tar.bz2 -p all
</pre></div>
<p>This creates five new directories, each with a new package. It looks something like this:</p>
<div class="highlight"><pre><span class="nv">$ </span>ls
linux-32
linux-64
osx-64
win-32
win-64
</pre></div>
<p>Each one of these directories contains a conda build also named <tt class="docutils literal"><span class="pre">cookiecutter-0.9.1_BUILDNUM.tar.bz2</span></tt>.</p>
<p><strong>Note:</strong> I never left the Mac OSX operating system, yet I have packages that are pretty much garaunteed to work on Windows and Linux. That said, Cookiecutter is pure python and it's dependencies already have conda packages. I haven't tried this yet on anything that includes compiling C or C++, much less Fortran.</p>
</div>
<div class="section" id="uploading-conda-packages-to-binstar">
<h2>Uploading conda packages to Binstar</h2>
<p>With these packages created, it's time to upload them to <a class="reference external" href="http://binstar.org">binstar</a>, the primary conda package index.</p>
<p>First, <a class="reference external" href="https://binstar.org/account/register">register your binstar account</a>.</p>
<p>Then use conda to install the binstar client:</p>

<p>Finally, start uploading the new packages:</p>
<div class="highlight"><pre><span class="nv">$ </span>binstar upload linux-32/cookiecutter-0.9.1-BUILDNUM.tar.bz2
<span class="nv">$ </span>binstar upload linux-64/cookiecutter-0.9.1-BUILDNUM.tar.bz2
<span class="nv">$ </span>binstar upload osx-64/cookiecutter-0.9.1-BUILDNUM.tar.bz2
<span class="nv">$ </span>binstar upload win-32/cookiecutter-0.9.1-BUILDNUM.tar.bz2
<span class="nv">$ </span>binstar upload win-64/cookiecutter-0.9.1-BUILDNUM.tar.bz2
</pre></div>
<p><a class="reference external" href="https://binstar.org/pydanny/cookiecutter">Check out the results of my work</a> or take a look right below at what's on <a class="reference external" href="http://binstar.org">binstar</a>:</p>
<a class="reference external image-reference" href="https://binstar.org/search?q=cookiecutter"><img alt="http://pydanny.com/static/packages.png" class="align-center" id="packages" src="http://pydanny.com/static/packages.png"/></a>
</div>
<div class="section" id="try-installing-cookiecutter-with-conda">
<h2>Try installing Cookiecutter with conda!</h2>
<p>If you have <strong>conda</strong> installed, you should be able to get Cookiecutter thus:</p>
<div class="highlight"><pre><span class="nv">$ </span>conda config --add channels https://conda.binstar.org/pydanny
<span class="nv">$ </span>conda install cookiecutter
</pre></div>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>Writing about how to package software is hard, so figuring this out was a <a class="reference external" href="https://github.com/audreyr/cookiecutter/issues/232#issuecomment-71552905">bit of detective work</a>. I think that's going to change, as the company behind conda, <a class="reference external" href="http://www.continuum.io/">Continuum Analytics</a> has stated their intentions to improve conda's documentation. Furthermore, just as many <a class="reference external" href="https://github.com/audreyr/cookiecutter#python">for-python cookiecutter templates</a> include carefully researched <tt class="docutils literal">setup.py</tt> modules for use with <tt class="docutils literal">distutils</tt>, in 2015 I think we'll begin to see many of these templates include carefully research conda recipes and instructions.</p>
<p>Many thanks go to <a class="reference external" href="https://twitter.com/fperez_org">Fernando Perez</a> for inspiring me to actually delve into conda. <a class="reference external" href="https://twitter.com/tswicegood">Travis Swicegood</a> gave me some useful pointers. Last, but not least, none of this would have been figured out without the help of <a class="reference external" href="https://twitter.com/westurner">Wes Turner</a>.</p>
</div>
<div class="section" id="updates">
<h2>Updates</h2>
<ul class="simple">
<li>2015/01/31 - Fixed a broken binstar link thanks to Russ Ferriday.</li>
<li>2015/01/30 - Wes Turner corrected a couple typos in the conda command statements.</li>
</ul>
</div>

                    
                </div>
                                </div></body></html>