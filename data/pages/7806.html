<html><body><div><div class="post-text" itemprop="text">

<p>I am designing a Python app by calling a C++ DLL, I have posted my interaction between my DLL and Python 3.4 <a href="http://stackoverflow.com/questions/33377764/error-using-callback-in-python">here</a>. But now I need to do some process in streaming involving a threading based model and my callback function looks to put in a queue all the <code>print</code>s and only when my streaming has ended, all the Info is printed.</p>

<pre><code>def callbackU(OutList, ConList, nB):
    for i in range(nB):
        out_list_item = cast(OutList[i], c_char_p).value
        print("{}\t{}".format(ConList[i], out_list_item))
    return 0
</code></pre>

<p>I have tried to use the next ways, but all of them looks to work in the same way:</p>

<pre><code>from threading import Lock

print_lock = Lock()
def save_print(*args, **kwargs):
    with print_lock:
    print (*args, **kwargs)

def callbackU(OutList, ConList, nB):
    for i in range(nB):
        out_list_item = cast(OutList[i], c_char_p).value
        save_print(out_list_item))
    return 0
</code></pre>

<p>and:</p>

<pre><code>import sys
def callbackU(OutList, ConList, nB):
    for i in range(nB):
        a = cast(OutList[i], c_char_p).value
        sys.stdout.write(a)
        sys.stdout.flush()
    return 0
</code></pre>

<p>I would like that my callback prints its message when the it is called, not when the whole process ends.</p>
    </div>
    </div></body></html>