<html><body><div><article class="readme file wiki-content">
        
          <h1 class="title">pdb++, a drop-in replacement for pdb</h1>
<div class="section" id="rst-header-what-is-it">
<h2>What is it?</h2>
<p>This module is an extension of the <a class="reference external" href="http://docs.python.org/library/pdb.html">pdb</a> module of the standard library.  It is
meant to be fully compatible with its predecessor, yet it introduces a number
of new features to make your debugging experience as nice as possible.</p>
<img alt="http://bitbucket.org/antocuni/pdb/raw/0c86c93cee41/screenshot.png" src="http://bitbucket.org/antocuni/pdb/raw/0c86c93cee41/screenshot.png"/>
<p><tt class="docutils literal">pdb++</tt> features include:</p>
<blockquote>
<ul class="simple">
<li>colorful TAB completion of Python expressions (through <a class="reference external" href="http://bitbucket.org/antocuni/fancycompleter">fancycompleter</a>)</li>
<li>optional syntax highlighting of code listings (through <a class="reference external" href="http://pygments.org/">pygments</a>)</li>
<li><a class="reference internal" href="#rst-header-sticky-mode">sticky mode</a></li>
<li>several new commands to be used from the interactive <tt class="docutils literal"><span class="pre">(Pdb++)</span></tt> prompt</li>
<li><a class="reference internal" href="#rst-header-smart-command-parsing">smart command parsing</a> (hint: have you ever typed <tt class="docutils literal">r</tt> or <tt class="docutils literal">c</tt> at the
prompt to print the value of some variable?)</li>
<li>additional convenience functions in the <tt class="docutils literal">pdb</tt> module, to be used from
your program</li>
</ul>
</blockquote>
<p><tt class="docutils literal">pdb++</tt> is meant to be a drop-in replacement for <tt class="docutils literal">pdb</tt>. If you find some
unexpected behavior, please report it as a bug.</p>
</div>
<div class="section" id="rst-header-installation">
<h2>Installation</h2>
<p>Since <tt class="docutils literal">pdb++</tt> is not a valid identifier for <tt class="docutils literal">pip</tt> and <tt class="docutils literal">easy_install</tt>,
you have to install <tt class="docutils literal">pdbpp</tt> instead:</p>
<pre class="literal-block">
$ pip install pdbpp

-- OR --

$ easy_install pdbpp
</pre>
<p>Alternatively, you can just put <tt class="docutils literal">pdb.py</tt> somewhere inside your
<tt class="docutils literal">PYTHONPATH</tt>.</p>
<p>Note that the module is called <tt class="docutils literal">pdb.py</tt> so that <tt class="docutils literal">pdb++</tt> will automatically
be used in all places that do <tt class="docutils literal">import pdb</tt> (e.g., <tt class="docutils literal">py.test <span class="pre">--pdb</span></tt> will
give you a <tt class="docutils literal">pdb++</tt> prompt).  The old <tt class="docutils literal">pdb</tt> module is still available by
doing e.g. <tt class="docutils literal">import pdb; pdb.pdb.set_trace()</tt></p>
</div>
<div class="section" id="rst-header-new-interactive-commands">
<h2>New interactive commands</h2>
<p>The following are new commands that you can use from the interative
<tt class="docutils literal"><span class="pre">(Pdb++)</span></tt> prompt.</p>
<dl class="docutils" id="rst-header-sticky-mode">
<dt><tt class="docutils literal">sticky [start end]</tt></dt>
<dd>Toggle <strong>sticky mode</strong>.  When in this mode, every time the current position
changes, the screen is repainted and the whole function shown.  Thus, when
doing step-by-step execution you can easily follow the flow of the
execution.  If <tt class="docutils literal">start</tt> and <tt class="docutils literal">end</tt> are given, sticky mode is enabled and
only lines within that range (extremes included) will be displayed.</dd>
<dt><tt class="docutils literal">longlist</tt> (<tt class="docutils literal">ll</tt>)</dt>
<dd>List source code for the current function.  Different from the normal pdb
<tt class="docutils literal">list</tt> command, <tt class="docutils literal">longlist</tt> displays the whole function.  The current
line is marked with <tt class="docutils literal"><span class="pre">-&gt;</span></tt>.  In case of post-mortem debugging, the line
which actually raised the exception is marked with <tt class="docutils literal">&gt;&gt;</tt>.  If the
<tt class="docutils literal">highlight</tt> <a class="reference internal" href="#rst-header-config-option">config option</a> is set and <a class="reference external" href="http://pygments.org/">pygments</a> is installed, the source
code is highlighted.</dd>
<dt><tt class="docutils literal">interact</tt></dt>
<dd>Start an interative interpreter whose global namespace contains all the
names found in the current scope.</dd>
<dt><tt class="docutils literal">track EXPRESSION</tt></dt>
<dd>Display a graph showing which objects are the value of the expression refers
to and are referred by.  This command requires the <tt class="docutils literal">pypy</tt> source code to
be importable.</dd>
<dt><tt class="docutils literal">display EXPRESSION</tt></dt>
<dd>Add an expression to the <strong>display list</strong>; expressions in this list are
evaluated at each step, and printed every time its value changes.
<strong>WARNING</strong>: since these expressions are evaluated multiple times, make sure
not to put expressions with side-effects in the display list.</dd>
<dt><tt class="docutils literal">undisplay EXPRESSION</tt>:</dt>
<dd>Remove <tt class="docutils literal">EXPRESSION</tt> from the display list.</dd>
<dt><tt class="docutils literal">source EXPRESSION</tt></dt>
<dd>Show the source code for the given function/method/class.</dd>
<dt><tt class="docutils literal">edit EXPRESSION</tt></dt>
<dd>Open the editor in the right position to edit the given
function/method/class.  The editor used is specified in a <a class="reference internal" href="#rst-header-config-option">config
option</a>.</dd>
<dt><tt class="docutils literal">hf_unhide</tt>, <tt class="docutils literal">hf_hide</tt>, <tt class="docutils literal">hf_list</tt></dt>
<dd>Some frames might be marked as "hidden" by e.g. using the <a class="reference internal" href="#rst-header-pdb-hideframe">@pdb.hideframe</a>
function decorator.  By default, hidden frames are not shown in the stack
trace, and cannot be reached using <tt class="docutils literal">up</tt> and <tt class="docutils literal">down</tt>.  You can use
<tt class="docutils literal">hf_unhide</tt> to tell pdb to ignore the hidden status (i.e., to treat hidden
frames as normal ones), and <tt class="docutils literal">hf_hide</tt> to hide them again.  <tt class="docutils literal">hf_list</tt>
prints a list of hidden frames.</dd>
</dl>
</div>
<div class="section" id="rst-header-smart-command-parsing">
<h2>Smart command parsing</h2>
<p>By default, pdb tries hard to interpret what you enter at the command prompt
as one of its builtin commands.  However, this is inconvenient if you want to
just print the value of a local variable which happens to have the same name
as one of the commands. E.g.:</p>
<pre class="literal-block">
(Pdb) list
  1
  2     def fn():
  3         c = 42
  4         import pdb;pdb.set_trace()
  5  -&gt;     return c
(Pdb) c
</pre>
<p>In the example above, instead of printing 42 pdb interprets the input as the
command <tt class="docutils literal">continue</tt>, and then you loose your prompt.  It's even worse than
that, because it happens even if you type e.g. <tt class="docutils literal">c.__class__</tt>.</p>
<p>pdb++ fixes this unfriendly (from the author's point of view, of course :-))
behavior by always prefering variable in scope, if it exists.  If you really
want to execute the corresponding command, you can prefix it with <tt class="docutils literal">!!</tt>.
Thus, the example above becomes:</p>
<pre class="literal-block">
(Pdb++) list
  1
  2     def fn():
  3         c = 42
  4         import pdb;pdb.set_trace()
  5  -&gt;     return c
(Pdb++) c
42
(Pdb++) !!c
</pre>
<p>Note that the "smart" behavior takes place only when there is ambiguity, i.e.
if there exists a variable with the same name as a command: in all other
cases, everything works as usual.</p>
</div>
<div class="section" id="rst-header-additional-functions-in-the-pdb-module">
<h2>Additional functions in the <tt class="docutils literal">pdb</tt> module</h2>
<p>The <tt class="docutils literal">pdb</tt> module that comes with pdb++ includes all the functions and
classes that are in the module from the standard library.  If you find any
difference, please report it as a bug.</p>
<p>In addition, there are some new convenience functions that are unique to
pdb++.</p>
<dl class="docutils">
<dt><tt class="docutils literal">pdb.xpm()</tt></dt>
<dd>eXtended Post Mortem: it is equivalent to
<tt class="docutils literal"><span class="pre">pdb.post_mortem(sys.exc_info()[2])</span></tt>.  If used inside an <tt class="docutils literal">except</tt>
clause, it will start a post-mortem pdb prompt from the line that raised the
exception being caught.</dd>
<dt><tt class="docutils literal">pdb.disable()</tt></dt>
<dd>Disable <tt class="docutils literal">pdb.set_trace()</tt>: any subsequent call to it will be ignored.</dd>
<dt><tt class="docutils literal">pdb.enable()</tt></dt>
<dd>Re-enable <tt class="docutils literal">pdb.set_trace()</tt>, in case it was disabled by <tt class="docutils literal">pdb.disable()</tt>.</dd>
</dl>
<dl class="docutils" id="rst-header-pdb-hideframe">
<dt><tt class="docutils literal">@pdb.hideframe</tt></dt>
<dd>A function decorator that tells pdb++ to hide the frame corresponding to the
function.  Hidden frames do not show up when using interactive commands such
as <tt class="docutils literal">up</tt>, <tt class="docutils literal">down</tt> or <tt class="docutils literal">where</tt>, unless <tt class="docutils literal">hf_unhide</tt> is invoked.</dd>
</dl>
<p><tt class="docutils literal">@pdb.break_on_setattr(attrname, condition=always)</tt></p>
<blockquote>
<p>class decorator: break the execution of program every time the
attribute <tt class="docutils literal">attrname</tt> is set on any instance of the class. <tt class="docutils literal">condition</tt> is
a callable that takes the target object of the <tt class="docutils literal">setattr</tt> and the actual value;
by default, it breaks every time the attribute is set. E.g.:</p>
<pre class="literal-block">
@break_on_setattr('bar')
class Foo(object):
    pass
f = Foo()
f.bar = 42    # the program breaks here
</pre>
<p>If can be used even after the class has already been created, e.g. if we
want to break when some attribute of a particular object is set:</p>
<pre class="literal-block">
class Foo(object):
    pass
a = Foo()
b = Foo()

def break_if_a(obj, value):
    return obj is a

break_on_setattr('bar', condition=break_if_a)(Foo)
b.bar = 10   # no break
a.bar = 42   # the program breaks here
</pre>
</blockquote>
</div>
<div class="section" id="rst-header-configuration-and-customization">
<h2>Configuration and customization</h2>
<p id="rst-header-config-option">To customize pdb++, you can put a file named <tt class="docutils literal">.pdbrc.py</tt> in your home
directory.  The file must contain a class named <tt class="docutils literal">Config</tt> inheriting from
<tt class="docutils literal">pdb.DefaultConfig</tt> and override the desired values.</p>
<p>The following is a list of the options you can customize, together with their
default value:</p>
<dl class="docutils">
<dt><tt class="docutils literal">prompt = <span class="pre">'(Pdb++)</span> '</tt></dt>
<dd>The prompt to show when in interactive mode.</dd>
<dt><tt class="docutils literal">highlight = True</tt></dt>
<dd>Highlight line numbers and the current line when showing the <tt class="docutils literal">longlist</tt> of
a function or when in <strong>sticky mode</strong>.</dd>
<dt><tt class="docutils literal">encoding = <span class="pre">'utf-8'</span></tt></dt>
<dd>File encoding. Useful when there are international characters in your string
literals or comments.</dd>
<dt><tt class="docutils literal">sticky_by_default = False</tt></dt>
<dd>Determine whether pdb++ starts in sticky mode or not.</dd>
<dt><tt class="docutils literal">line_number_color = Color.turquoise</tt></dt>
<dd>The color to use for line numbers.</dd>
<dt><tt class="docutils literal">filename_color = Color.yellow</tt></dt>
<dd>The color to use for file names when printing the stack entries.</dd>
<dt><tt class="docutils literal">current_line_color = 44</tt></dt>
<dd>The background color to use to highlight the current line; the background
color is set by using the ANSI escape sequence <tt class="docutils literal">^[Xm</tt> where <tt class="docutils literal">^</tt> is the
ESC character and <tt class="docutils literal">X</tt> is the background color. 44 corresponds to "blue".</dd>
<dt><tt class="docutils literal">use_pygments = True</tt></dt>
<dd>If <a class="reference external" href="http://pygments.org/">pygments</a> is installed and <tt class="docutils literal">highlight == True</tt>, apply syntax highlight
to the source code when showing the <tt class="docutils literal">longlist</tt> of a function or when in
<strong>sticky mode</strong>.</dd>
<dt><tt class="docutils literal">bg = 'dark'</tt></dt>
<dd>Passed directly to the <tt class="docutils literal">pygments.formatters.TerminalFormatter</tt> constructor.
Selects the color scheme to use, depending on the background color of your
terminal. If you have a light background color, try to set it to
<tt class="docutils literal">'light'</tt>.</dd>
<dt><tt class="docutils literal">colorscheme = None</tt></dt>
<dd>Passed directly to the <tt class="docutils literal">pygments.formatters.TerminalFormatter</tt> constructor.
It expects a dictionary that maps token types to (lightbg, darkbg) color names or
<tt class="docutils literal">None</tt> (default: <tt class="docutils literal">None</tt> = use builtin colorscheme).</dd>
<dt><tt class="docutils literal">editor = <span class="pre">'${EDITOR:-vi}'</span></tt></dt>
<dd>The command to invoke when using the <tt class="docutils literal">edit</tt> command. By default, it uses
<tt class="docutils literal">$EDITOR</tt> if set, else <tt class="docutils literal">vi</tt>.  The command must support the standard
notation <tt class="docutils literal">COMMAND +n filename</tt> to open filename at line <tt class="docutils literal">n</tt>. <tt class="docutils literal">emacs</tt>
and <tt class="docutils literal">vi</tt> are known to support this.</dd>
<dt><tt class="docutils literal">truncate_long_lines = True</tt></dt>
<dd>Truncate lines which exceed the terminal width.</dd>
<dt><tt class="docutils literal">exec_if_unfocused = None</tt></dt>
<dd>Shell command to execute when starting the pdb prompt and the terminal
window is not focused.  Useful to e.g. play a sound to alert the user that
the execution of the program stopped. It requires the <a class="reference external" href="http://bitbucket.org/antocuni/wmctrl">wmctrl</a> module.</dd>
<dt><tt class="docutils literal">disable_pytest_capturing = True</tt></dt>
<dd>Old versions of <a class="reference external" href="http://pytest.org">py.test</a> crash when you execute <tt class="docutils literal">pdb.set_trace()</tt> in a
test, but the standard output is captured (i.e., without the <tt class="docutils literal"><span class="pre">-s</span></tt> option,
which is the default behavior).  When this option is on, the stdout
capturing is automatically disabled before showing the interactive prompt.</dd>
<dt><tt class="docutils literal">def setup(self, pdb): pass</tt></dt>
<dd>This method is called during the initialization of the <tt class="docutils literal">Pdb</tt> class. Useful
to do complex setup.</dd>
</dl>
</div>

        
      </article>
    </div></body></html>