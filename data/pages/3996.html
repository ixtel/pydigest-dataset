<html><body><div><article>
        <header>
          <h2>
            Quickstart: Add your first Python function to Blockspring.
          </h2>
        </header>
        <p>
          In this tutorial we'll show you how to add a Python function to Blockspring. Doing so is helpful if you need to:
          </p><ul>
            <li>
              <b class="text-success">Expose your function to the world.</b> Need some Python in your Rails app, iOS app, Arduino, or even in Google Spreadsheets? You'll be able to run your function from any application and device by simply copy/pasting a single line of code.
            </li>
            <br/>
            <li>
              <b class="text-info">Share your function with anyone.</b> You'll automatically generate a simple form and webpage documentation. Never spend time explaining your code, or running it for other people.
            </li>
            <br/>
            <li>
              <b class="text-danger">Combine Blockspring functions together.</b> You can mix/match Blockspring functions like building blocks. And the system gets really fast when it knows ahead of time which functions you're about to run together.
            </li>
            <br/>
            <li>
              <b class="text-warning">Add really, really powerful caching.</b> Don't just cache when you run a function, use Blockspring's social caching. What's the point of recalculating when someone's already done the calculating?
            </li>
          </ul>
        
        <p>
          Let's get started!
        </p>
        <br/>
        <h3>
          <b class="text-success">Expose your function to the world.</b>
        </h3>
        <hr/>
        <p>
          This is going to be insanely fast. In 30 seconds, you're going to add a function to Blockspring that scrapes text from Yahoo.com.

          </p><pre class="bs-style"><code class="code"><span class="keyword">import</span> urllib
<span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup

html = urllib.urlopen(<span class="string">"https://www.yahoo.com"</span>).read()
soup = BeautifulSoup(html)

for script in soup([<span class="string">"script"</span>, <span class="string">"style"</span>]):
    script.extract()

text = soup.get_text()

<span class="keyword">print</span> text.encode(<span class="string">"utf-8"</span>)</code></pre>
        
        <p>
          <b><a href="https://open.blockspring.com/blocks/new?block=c959e1c889c10478f118140fa39bb1d0" target="_blank">Click to populate the Blockspring editor</a></b> with the code above, click Publish, and you're done!
        </p>
        <br/>
        <p>
          <b>What just happened?</b><br/>
        </p>
        <p>
          When you published your function, Blockspring automatically deployed it to the cloud, gave it an API, generated a webpage, and exposed it to all of the Blockspring client libraries.
        </p>
        <br/>
        <p>
          <b>Why is this awesome?</b><br/>
        </p>
        <p>
          Your Python function is now in the cloud. That means you can run it from any application or internet-enabled device with a single command. What once took 6 lines of Python, now is 1 line in any language. For instance, to run your scraper in Node.js, just type the following:
          </p><pre class="bs-style"><code class="code"><span class="keyword">var</span> blockspring = require(<span class="string">"blockspring"</span>);

<span class="comment">// call scraper (https://open.blockspring.com/blocks/c959e1c889c10478f118140fa39bb1d0)</span>
blockspring.runParsed(<span class="string">"c959e1c889c10478f118140fa39bb1d0"</span>, <span class="keyword">function</span>(res){ console.log(res); });</code></pre>
        
        <br/>
        <p>
          <b>Where do I learn more about using my function?</b>
        </p>
        <p>
          Your published function should like something like this <a href="https://open.blockspring.com/blocks/c959e1c889c10478f118140fa39bb1d0" target="_blank">scraper</a>. On each Blockspring function page you can click <b>"Integrations"</b>, and depending on where you need to use your function, copy/paste the associated one line of code to run it. Check out the <a href="/docs/python-quickstart-run" target="_blank">run Python in Blockspring</a> quickstart to learn more.
        </p>
        <br/>
        <p>
          <b>That was fast. Can you show me how to publish again?</b>
        </p>
        <p>
          Here's a quick video that shows you how to publish step-by-step.
          </p><p class="videoWrapper">
            <iframe src="https://www.youtube.com/embed/MHyWf2dIu0c?rel=0" frameborder="0" allowfullscreen="">VIDEO</iframe>
          </p>
        
        <br/>
        <h3><b class="text-info">Share your function with anyone.</b></h3>
        <hr/>
        <p>
          Blockspring lets you share your work with programmers and non-programmers alike because we generate the webpage and docs.
        </p>
        <p>
          Currently, the webpage for your scraper function is just a "Submit" button. That's because this function doesn't take any inputs.
        </p>
        <img class="documentation-img-max-width documentation-img-outline" src="/assets/docs/python/submit_only_form-301085bcf56d0fccf7d068c4c66817c5.gif" alt="Submit only form"/>
        <br/>
        <br/>
        <p>
          Let's tell Blockspring that your function accepts inputs. For instance, try scraping any website, not just Yahoo.
        </p>
        <p>
          <b><a href="https://open.blockspring.com/blocks/new?block=ba24a71b96ca430f2e319c1fd908e1af" target="_blank">Click to populate the Blockspring editor</a></b> with the code below, click Publish, and you'll have a nice form for your function.
        </p>
        <pre class="bs-style"><code class="code"><span class="keyword">import</span> urllib
<span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup
<span class="keyword">import</span> blockspring

<span class="keyword">def</span> block(request, response):
    html = urllib.urlopen(request.params[<span class="string">"url"</span>]).read()
    soup = BeautifulSoup(html)

    for script in soup([<span class="string">"script"</span>, <span class="string">"style"</span>]):
        script.extract()

    text = soup.get_text()

    response.addOutput(<span class="string">"text"</span>, text.encode(<span class="string">"utf-8"</span>))
    response.end()

blockspring.define(block)</code></pre>
        
        <p>
          Take a look at the <a href="https://open.blockspring.com/blocks/ba24a71b96ca430f2e319c1fd908e1af" target="_blank">final product</a>. Here's a video that shows the process step-by-step:
        </p>
        <br/>
        <p class="videoWrapper">
          <iframe src="https://www.youtube.com/embed/FperJimPz5s?rel=0" frameborder="0" allowfullscreen="">VIDEO</iframe>
        </p>
        <br/>
        <p>
          <b>What just happened?</b><br/>
        </p>
        <p>
          You updated your function in four ways:
          </p><ul>
            <li>
              <b>Import the library</b>. You imported the blockspring library with <code>import blockspring</code>. Blockspring captures outputs by reading what is printed. That's why we're suppressing loading messages.
            </li>
            <li>
              <b>Define the function</b>. You wrapped the function in a <code>blockspring.define()</code>. This tells Blockspring what function run.
            </li>
            <li>
              <b>Get the inputs</b>. Receiving the url input in <code>request.params["url"]</code>. All function inputs will be found in <code>request.params</code>. The "url" name is defined when you added a parameter through the Blockspring code editor.
            </li>
            <li>
              <b>Declare the outputs</b>. Adding the scraped output using <code>response.addOutput</code>. Blockspring passes inputs and outputs as JSON. This is adding your output to the JSON response.
            </li>
          </ul>
          Learn more with the Python <a href="/docs/python-api-reference" target="_blank">API reference</a>.
        
        <br/>
        <p>
          <b>Why is this awesome?</b><br/>
        </p>
        <p>
          You can now share a parameterized function without doing any extra work. By telling Blockspring about your inputs, you automatically get a form so anyone can run your function manually. Learn more about <a href="/docs/inputs" target="_blank">input parameter types</a>.
        </p>
        <br/>
        <p>
          <b>Wait - how do I run my function in other languages with inputs?</b><br/>
        </p>
        <p>
          Check out <a href="/docs/python-quickstart-run" target="_blank">running Python functions</a> to get a refresher on running Blockspring functions. Here's the updated Node one-liner:
          </p><pre class="bs-style"><code class="code"><span class="keyword">var</span> blockspring = require(<span class="string">"blockspring"</span>);

<span class="comment">// call scraper (https://open.blockspring.com/blocks/c959e1c889c10478f118140fa39bb1d0)</span>
blockspring.runParsed(<span class="string">"ba24a71b96ca430f2e319c1fd908e1af"</span>, {
  url: <span class="string">"http://www.twitter.com"</span>
}, <span class="keyword">function</span>(res){
  console.log(res.params["text"]);
});</code></pre>
        
        <p>
            While we're at it, we can also call our function from Javascript. Check out this <a href="http://bl.ocks.org/pkpp1233/665e32765fc7da1b373a" target="_blank">d3 wordcloud</a> that uses our function:
        </p>
        






        <p>
            You're running Python right from Javascript!
        </p>
        <br/>
        <h3>Now it's your turn.</h3>
        <hr/>
        <p>
          Congratulations young grasshopper. You've learned to add a Python function to your Blockspring library. Write a function, get an application. Now go build!
        </p>
        <br/>
        <a href="/blocks/new" class="center btn btn-success btn-lg">Create a new function</a>
        <a href="https://jobs.lever.co/blockspring" target="_blank" class="center btn btn-primary btn-lg">Work at Blockspring</a>
        <br/>
        <br/>
      </article>
    </div></body></html>