<html><body><div><div class="entry-content">
						<p>Python 3.5 introduces <em>type hinting</em> to help code-writing during development. Let’s take a look at this feature and show it in action.</p>
<div id="motivation">
<h2>Motivation</h2>
<p>Some folks, but not all, like help from their tools when writing code and documentation. For example, lint-like tools can spot errors before your code executes, and editors and IDEs can harness that to show you mistakes, as you type. Particularly for large code bases and large teams, such help is quite valuable.</p>
<p>These mistakes can include passing the wrong type of value to a function. Wouldn’t it be great if you could get that help once typed, or even as you are typing (autocompletion)? Other languages have some concept of type checking. We don’t want to turn Python into a statically-typed language. But can’t we get a little help?</p>
<p>Python’s <a href="https://www.python.org/dev/peps/pep-0484"><strong>PEP 484</strong></a> brings <em>optional</em> type <em>hinting</em> to Python 3.5. Using the <a title="(in Python v3.5)" href="https://docs.python.org/3.5/library/typing.html#module-typing"><code>typing</code></a> module, you can provide type hint information in your code. This can be used by yourself or others to flag certain problems, while you are developing.</p>
</div>
<div id="quick-example">
<h2>Quick Example</h2>
<p>Code speaks, so let’s start with an example. <code>mypy</code> was the originator of Python 3.5’s <a title="(in Python v3.5)" href="https://docs.python.org/3.5/library/typing.html#module-typing"><code>typing</code></a> module. Let’s use one of its <a href="http://mypy.readthedocs.org/en/latest/basics.html#function-signatures">examples</a>:</p>
<div>
<div>


		<div id="crayon-56d5989ace387077351853" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace387077351853-1"><span class="crayon-e">def </span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace387077351853-2"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">'Hello, {}'</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>This example shows the most important part of type hinting: it is <em>optional</em>. Python hasn’t changed to suddenly require static typing. But if we add a little more:</p>
<div>
<div>


		<div id="crayon-56d5989ace392678021762" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace392678021762-1"><span class="crayon-e">def </span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace392678021762-2"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">'Hello, {}'</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>…then we can let an IDE such as PyCharm help us:</p>
<p><a href="http://blog.jetbrains.com/pycharm/files/2015/11/02a.png"><img class="alignnone size-full wp-image-3546" alt="02a" src="http://blog.jetbrains.com/pycharm/files/2015/11/02a.png"/></a></p>
</div>
<div id="what-is-and-isn-t-type-hinting">
<h2>What Is (and Isn’t) Type Hinting?</h2>
<p>There’s a lot of apprehension out there about this new language feature. Before showing more in-depth code, let’s try to clear this up. First, here’s what type hinting <em>is</em> for:</p>
<ul>
<li><em>Develop better/faster</em>. Think of it like linting, or as Guido said, “linting on steroids”. With the right tools, it can surface mistakes more quickly.</li>
<li><em>Help users of your code</em>. If someone wants to use your function, type hinting helps explain (autocomplete) and flag when they mess up.</li>
<li><em>Documentation</em>. Rather than pack argument and response type information into carefully-formatted docstrings, use something in the language.</li>
</ul>
<p>So that’s the benefit, but what is type hinting <em>not</em>?</p>
<ul>
<li><em>Not required</em>. You can ignore it. You can use it a little. You can use it a lot. It’s all the same. Heck, Python itself (at runtime) ignores type hinting.</li>
<li><em>Not static typing</em>. This is not, not, <em>not</em> changing Python into Java. The language is not enforcing anything.</li>
<li><em>Not Performance boosting</em>. Providing type information makes people think of compilation speedups. But this has no impact on Python execution. Also, the Cython and PyPy teams have said these type hints are unlikely to make a difference to them for speedups.</li>
<li><em>Not incompatible</em>. The extra characters added into your code are ignored by older versions of Python 3. This requirement – to be syntactically-valid pre-3.5 – was a constraint on the options for expressing the hints. If you’re one that thinks the syntax is ugly, this constraint is likely to blame.</li>
</ul>
<p>Type hinting is most useful when you share your code with a consumer: when you publish a library, or code in a project with others, or helping out your future self who needs to live with the sins of your current self.</p>
<p>With all that preface out of the way, let’s take a look at some usages.</p>
</div>
<div id="generics">
<h2>Generics</h2>
<p>The teeny-tiny examples above just cover a single argument or return value. What if I want to say hello to a list of names?</p>
<p>Python 3.5’s type hinting provides an answer for this. Namely, you can express the hint as “a list of strings”:</p>
<div>
<div>


		<div id="crayon-56d5989ace396642562311" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace396642562311-1"><span class="crayon-e">from </span><span class="crayon-e">typing </span><span class="crayon-e">import </span><span class="crayon-e">List</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace396642562311-2"> </p><p class="crayon-line" id="crayon-56d5989ace396642562311-3"><span class="crayon-e">def </span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace396642562311-4"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">'Hello, {}'</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-s">', '</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5989ace396642562311-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace396642562311-6"><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">'jane'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'john'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'judy'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>What happens if we ignore the hint and supply a list of integers? PyCharm warns us:</p>
<p><a href="http://blog.jetbrains.com/pycharm/files/2015/11/04a.png"><img class="alignnone size-full wp-image-3547" alt="04a" src="http://blog.jetbrains.com/pycharm/files/2015/11/04a.png"/></a></p>
<p>PEP 484 refers to hints such as <code>List</code> as “generics”. That is, a hint that contains other hints. An <code>Iterator</code> for example is a list-y kind of generic. As you would expect, dictionaries are supported:</p>
<div>
<div>


		<div id="crayon-56d5989ace39a504550404" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace39a504550404-1"><span class="crayon-e">from </span><span class="crayon-e">typing </span><span class="crayon-e">import </span><span class="crayon-v">Dict</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39a504550404-2"> </p><p class="crayon-line" id="crayon-56d5989ace39a504550404-3"><span class="crayon-p"># Let's pass in a dictionary</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39a504550404-4"><span class="crayon-e">def </span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">Dict</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace39a504550404-5"><span class="crayon-h">    </span><span class="crayon-v">keys</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">names</span><span class="crayon-sy">.</span><span class="crayon-e">keys</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39a504550404-6"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">'Hello, {}'</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-s">', '</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-v">keys</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5989ace39a504550404-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39a504550404-8"><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-sy">{</span><span class="crayon-s">'jane'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">10</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'john'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">11</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'judy'</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">12</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>In this case we see an unusual-looking structure: <code>Dict[str, int]</code>. Think of the values between the brackets as “arguments” to the generic <code>Dict</code> type. The first argument is the type of the dictionary keys. The second is the type of the dictionary values.</p>
</div>
<div id="optional-values">
<h2>Optional Values</h2>
<p>We are now passing in a string to use for formatting. But maybe we’d like our class to provide a default string. Let’s allow <code>None</code> as a value that can be passed in, in addition to a string:</p>
<div>
<div>


		<div id="crayon-56d5989ace39d526529404" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace39d526529404-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Greeter</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39d526529404-2"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace39d526529404-3"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39d526529404-4"><span class="crayon-h">            </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">fmt</span></p><p class="crayon-line" id="crayon-56d5989ace39d526529404-5"><span class="crayon-e">        </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39d526529404-6"><span class="crayon-h">            </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Hi there, {}'</span></p><p class="crayon-line" id="crayon-56d5989ace39d526529404-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39d526529404-8"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">greet</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace39d526529404-9"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39d526529404-10"> </p><p class="crayon-line" id="crayon-56d5989ace39d526529404-11"><span class="crayon-v">greeting</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Greeter</span><span class="crayon-sy">(</span><span class="crayon-v">None</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace39d526529404-12"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">greeting</span><span class="crayon-sy">.</span><span class="crayon-e">greet</span><span class="crayon-sy">(</span><span class="crayon-s">'jane'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>Alas, type hinting now warns us that the first argument has to be a string:</p>
<p><a href="http://blog.jetbrains.com/pycharm/files/2015/11/07.png"><img class="alignnone size-full wp-image-3548" alt="07" src="http://blog.jetbrains.com/pycharm/files/2015/11/07.png"/></a></p>
<p>Fortunately there are several ways to solve this, each useful in various circumstances. For example, we could use regular Python and make this a keyword option with a default:</p>
<div>
<div>


		<div id="crayon-56d5989ace3a1780069580" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3a1780069580-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Greeter</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a1780069580-2"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">None</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3a1780069580-3"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a1780069580-4"><span class="crayon-h">            </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">fmt</span></p><p class="crayon-line" id="crayon-56d5989ace3a1780069580-5"><span class="crayon-e">        </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a1780069580-6"><span class="crayon-h">            </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Hi there, {}'</span></p><p class="crayon-line" id="crayon-56d5989ace3a1780069580-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a1780069580-8"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">greet</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3a1780069580-9"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a1780069580-10"> </p><p class="crayon-line" id="crayon-56d5989ace3a1780069580-11"><span class="crayon-v">greeting</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Greeter</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a1780069580-12"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">greeting</span><span class="crayon-sy">.</span><span class="crayon-e">greet</span><span class="crayon-sy">(</span><span class="crayon-s">'jane'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>With this, you can omit passing in a format string and instead use a value of <code>None</code>. (Of course, you could skip the following test and just make the format string the keyword default.) If you pass in an integer, though, you’ll get warned:</p>
<p><a href="http://blog.jetbrains.com/pycharm/files/2015/11/07a-broken.png"><img class="alignnone size-full wp-image-3549" alt="07a-broken" src="http://blog.jetbrains.com/pycharm/files/2015/11/07a-broken.png"/></a></p>
<p>Here’s another variation: allow your users to pass in a formatting string or <code>False</code>:</p>
<div>
<div>


		<div id="crayon-56d5989ace3a4604504455" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3a4604504455-1"><span class="crayon-e">from </span><span class="crayon-e">typing </span><span class="crayon-e">import </span><span class="crayon-e">Union</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a4604504455-2"> </p><p class="crayon-line" id="crayon-56d5989ace3a4604504455-3"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Greeter</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a4604504455-4"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">Union</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">bool</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3a4604504455-5"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a4604504455-6"><span class="crayon-h">            </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">fmt</span></p><p class="crayon-line" id="crayon-56d5989ace3a4604504455-7"><span class="crayon-e">        </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a4604504455-8"><span class="crayon-h">            </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Hi there, {}'</span></p><p class="crayon-line" id="crayon-56d5989ace3a4604504455-9"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a4604504455-10"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">greet</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3a4604504455-11"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a4604504455-12"> </p><p class="crayon-line" id="crayon-56d5989ace3a4604504455-13"><span class="crayon-v">greeting</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Greeter</span><span class="crayon-sy">(</span><span class="crayon-t">False</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a4604504455-14"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">greeting</span><span class="crayon-sy">.</span><span class="crayon-e">greet</span><span class="crayon-sy">(</span><span class="crayon-s">'jane'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>The <code>Union</code> type from <code>typing</code>, as shown here, lets the type be from any of the provided type values. In this case, <code>str</code> or <code>bool</code>.</p>
<p>Here, though, is the approach that best conveys the meaning of optional:</p>
<div>
<div>


		<div id="crayon-56d5989ace3a7791935171" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3a7791935171-1"><span class="crayon-e">from </span><span class="crayon-e">typing </span><span class="crayon-e">import </span><span class="crayon-e">Optional</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a7791935171-2"> </p><p class="crayon-line" id="crayon-56d5989ace3a7791935171-3"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Greeter</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a7791935171-4"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">Optional</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">None</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3a7791935171-5"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a7791935171-6"><span class="crayon-h">            </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">fmt</span></p><p class="crayon-line" id="crayon-56d5989ace3a7791935171-7"><span class="crayon-e">        </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a7791935171-8"><span class="crayon-h">            </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Hi there, {}'</span></p><p class="crayon-line" id="crayon-56d5989ace3a7791935171-9"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a7791935171-10"><span class="crayon-h">    </span><span class="crayon-e">def </span><span class="crayon-e">greet</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3a7791935171-11"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">fmt</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a7791935171-12"> </p><p class="crayon-line" id="crayon-56d5989ace3a7791935171-13"><span class="crayon-v">greeting</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Greeter</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3a7791935171-14"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-v">greeting</span><span class="crayon-sy">.</span><span class="crayon-e">greet</span><span class="crayon-sy">(</span><span class="crayon-s">'jane'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>That is, PEP 484 type hinting defines a generic type of <code>Optional</code>.</p>
</div>
<div id="string-based-hints">
<h2>String-Based Hints</h2>
<p>I follow a pattern where I use a static method on my class to query for instances. Hey, I saw someone smart post it once, don’t judge me. For example, in a SQLAlchemy model:</p>
<div>
<div>


		<div id="crayon-56d5989ace3aa511088322" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3aa511088322-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">ToDo</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3aa511088322-2"><span class="crayon-h">    </span><span class="crayon-v">__tablename__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'todo'</span></p><p class="crayon-line" id="crayon-56d5989ace3aa511088322-3"><span class="crayon-h">    </span><span class="crayon-v">id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-t">Integer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3aa511088322-4"><span class="crayon-h">    </span><span class="crayon-v">title</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Text</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5989ace3aa511088322-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3aa511088322-6"><span class="crayon-h">    </span><span class="crayon-sy">@</span><span class="crayon-e">classmethod</span></p><p class="crayon-line" id="crayon-56d5989ace3aa511088322-7"><span class="crayon-e">    </span><span class="crayon-e">def </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-v">cls</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-v">ToDo</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3aa511088322-8"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-v">cls</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">order_by</span><span class="crayon-sy">(</span><span class="crayon-v">cls</span><span class="crayon-sy">.</span><span class="crayon-v">title</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>Unfortunately, that fails. As the <code>mypy</code> docs explain: “Python does not allow references to a class object before the class is defined.”:</p>
<p><a href="http://blog.jetbrains.com/pycharm/files/2015/11/09-broken.png"><img class="alignnone size-full wp-image-3550" alt="09-broken" src="http://blog.jetbrains.com/pycharm/files/2015/11/09-broken.png"/></a></p>
<p>To fix this, type hinting has the concept of a <em>forward reference</em>. In the location where you would normally provide the hint, just provide that same hint, but in a string:</p>
<div>
<div>


		<div id="crayon-56d5989ace3ae648879925" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3ae648879925-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">ToDo</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3ae648879925-2"><span class="crayon-h">    </span><span class="crayon-v">__tablename__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'todo'</span></p><p class="crayon-line" id="crayon-56d5989ace3ae648879925-3"><span class="crayon-h">    </span><span class="crayon-v">id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-t">Integer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3ae648879925-4"><span class="crayon-h">    </span><span class="crayon-v">title</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Text</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5989ace3ae648879925-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3ae648879925-6"><span class="crayon-h">    </span><span class="crayon-sy">@</span><span class="crayon-e">classmethod</span></p><p class="crayon-line" id="crayon-56d5989ace3ae648879925-7"><span class="crayon-e">    </span><span class="crayon-e">def </span><span class="crayon-e">list</span><span class="crayon-sy">(</span><span class="crayon-v">cls</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-s">'ToDo'</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3ae648879925-8"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-v">cls</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">order_by</span><span class="crayon-sy">(</span><span class="crayon-v">cls</span><span class="crayon-sy">.</span><span class="crayon-v">title</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>This lets the Python interpreter parse the module at import time, then deal with the type hinting later.</p>
</div>
<div id="stub-files">
<h2>Stub Files</h2>
<p>As mentioned in the introduction, some people might find all this type hinting to be noise that distracts from the readability of the code. Wouldn’t it be great if you could get the benefits of type hinting, but keep that information separate? Or in other cases, you can’t actually put in the type hints: it’s in old version of Python code (before function annotations), or in C code, or in code you don’t control.</p>
<p>For these cases, Python type hinting provides <em>stub files</em>. These are extra files, named the same as the module they are stubbing, which contain the type hints. For example, imagine we have a simple function in a module with a filename of <code>greeting.py</code>:</p>
<div>
<div>


		<div id="crayon-56d5989ace3b1964393576" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3b1964393576-1"><span class="crayon-e">def </span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b1964393576-2"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">'Hello, {}'</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>No type hinting. Then, imagine a second file, in the same directory, named <code>greeting.pyi</code>:</p>
<div>
<div>


		<div id="crayon-56d5989ace3b4218165867" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3b4218165867-1"><span class="crayon-e">def </span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>The addition of the <code>.pyi</code> suffix makes this shadow the original module. PyCharm helps by denoting the stubbing with an asterisk in the gutter, and a mouseover gives more detail:</p>
<p><a href="http://blog.jetbrains.com/pycharm/files/2015/11/greeting-broken1.png"><img class="alignnone size-full wp-image-3551" alt="greeting-broken1" src="http://blog.jetbrains.com/pycharm/files/2015/11/greeting-broken1.png"/></a></p>
<p>If we now try to “break the rules” of type hinting, we’ll get the same effect we would if we put the type hints directly in our code:</p>
<p><a href="http://blog.jetbrains.com/pycharm/files/2015/11/greeting-broken2.png"><img class="alignnone size-full wp-image-3552" alt="greeting-broken2" src="http://blog.jetbrains.com/pycharm/files/2015/11/greeting-broken2.png"/></a></p>
</div>
<div id="type-aliases">
<h2>Type Aliases</h2>
<p>Sometimes the function arguments and return values can get quite unwieldy. Imagine a <code>greeting</code> function which could accept either a list of strings, or a dictionary where each value is a list of strings. Based on this, you’d also need return different types of values.</p>
<p>Here’s what the type hinting would look like:</p>
<div>
<div>


		<div id="crayon-56d5989ace3b7476923086" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-2">2</p><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-4">4</p><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-6">6</p><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-8">8</p><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-10">10</p><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-12">12</p><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-14">14</p><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-16">16</p><p class="crayon-num" data-line="crayon-56d5989ace3b7476923086-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3b7476923086-18">18</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3b7476923086-1"><span class="crayon-e">from </span><span class="crayon-e">typing </span><span class="crayon-e">import </span><span class="crayon-v">Union</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Dict</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-2"> </p><p class="crayon-line" id="crayon-56d5989ace3b7476923086-3"><span class="crayon-e">def </span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">Union</span><span class="crayon-sy">[</span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Dict</span><span class="crayon-sy">[</span><span class="crayon-t">int</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Union</span><span class="crayon-sy">[</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-4"><span class="crayon-h">        </span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Dict</span><span class="crayon-sy">[</span><span class="crayon-t">int</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3b7476923086-5"><span class="crayon-h">    </span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Hello, {}'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-6"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">isinstance</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dict</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3b7476923086-7"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">(</span><span class="crayon-v">k</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-s">', '</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-v">v</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-st">in</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-8"><span class="crayon-h">                </span><span class="crayon-v">names</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5989ace3b7476923086-9"><span class="crayon-h">    </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-10"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-s">', '</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5989ace3b7476923086-11"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-12"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">'jane'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'john'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'judy'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5989ace3b7476923086-13"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-14"><span class="crayon-h">    </span><span class="crayon-sy">{</span><span class="crayon-cn">10</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'jane'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'judy'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5989ace3b7476923086-15"><span class="crayon-h">     </span><span class="crayon-cn">11</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'john'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-16"><span class="crayon-h">     </span><span class="crayon-cn">12</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'judy'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'john'</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5989ace3b7476923086-17"><span class="crayon-h">     </span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3b7476923086-18"><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>Gorgeous, isn’t it? Well, not so much. For cases like this, Python 3.5 type hinting provides a <em>type alias</em>: a way to define the type hint information in one place, then use it in one or more other places. Let’s define a type alias for a GreetingType:</p>
<div>
<div>


		<div id="crayon-56d5989ace3bb777910072" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-2">2</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-4">4</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-6">6</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-8">8</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-10">10</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-12">12</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-14">14</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-16">16</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5989ace3bb777910072-18">18</p><p class="crayon-num" data-line="crayon-56d5989ace3bb777910072-19">19</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5989ace3bb777910072-1"><span class="crayon-e">from </span><span class="crayon-e">typing </span><span class="crayon-e">import </span><span class="crayon-v">Union</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">Dict</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-2"> </p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-3"><span class="crayon-v">GreetingType</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Union</span><span class="crayon-sy">[</span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Dict</span><span class="crayon-sy">[</span><span class="crayon-t">int</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">List</span><span class="crayon-sy">[</span><span class="crayon-v">str</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-4"> </p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-5"><span class="crayon-e">def </span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">GreetingType</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">-&gt;</span><span class="crayon-h"> </span><span class="crayon-v">GreetingType</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-6"><span class="crayon-h">    </span><span class="crayon-v">fmt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Hello, {}'</span></p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-7"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">isinstance</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">dict</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-8"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">(</span><span class="crayon-v">k</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-s">', '</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-v">v</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-v">k</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">v</span><span class="crayon-h"> </span><span class="crayon-st">in</span></p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-9"><span class="crayon-h">                </span><span class="crayon-v">names</span><span class="crayon-sy">.</span><span class="crayon-e">items</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-10"><span class="crayon-h">    </span><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-11"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">fmt</span><span class="crayon-sy">.</span><span class="crayon-e">format</span><span class="crayon-sy">(</span><span class="crayon-s">', '</span><span class="crayon-sy">.</span><span class="crayon-e">join</span><span class="crayon-sy">(</span><span class="crayon-v">names</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-12"> </p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-13"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">'jane'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'john'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'judy'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-14"><span class="crayon-e">print</span><span class="crayon-sy">(</span><span class="crayon-e">greeting</span><span class="crayon-sy">(</span></p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-15"><span class="crayon-h">    </span><span class="crayon-sy">{</span><span class="crayon-cn">10</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'jane'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'judy'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-16"><span class="crayon-h">     </span><span class="crayon-cn">11</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'john'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-17"><span class="crayon-h">     </span><span class="crayon-cn">12</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">'judy'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'john'</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5989ace3bb777910072-18"><span class="crayon-h">     </span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5989ace3bb777910072-19"><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


</div>
</div>
<p>That’s a lot tidier, letting the function usage concentrate on the meaning and the declaration contain the noise….erm, provide the detail.</p>
<p>And yes, this section was added in response to a StackOverflow complaint about the unwieldy syntax.</p>
</div>
<div id="downsides">
<h2>Downsides</h2>
<p>For the audience that wants tools to warn them earlier, Python 3.5 type hinting is very valuable. But not everybody falls into that category. They might use simpler editors. Or they might view those extra characters as seriously breaking Python’s readability.</p>
<p>In theory the answer is simple: “Then don’t use type hinting, it’s optional.” But the worry is that if type hinting becomes “best practice”, library authors will be pressured into supporting it. At that point, adoption will go up and you’ll constantly come across Python code that gouges your eyeballs. It won’t feel so optional then.</p>
<p>On the other side of the argument, some might wish it went further. Perhaps it should cover more cases. Perhaps it should bend the language syntax further to avoid the forward-reference comment-based type hinting, or provide a less line-noise-looking way to express complicated typings.</p>
</div>
<div id="conclusion">
<h2>Conclusion</h2>
<p>That’s a walkthrough Python 3.5 type hinting: what it is and isn’t, and ways that it can help you write quality code faster. This article isn’t an exhaustive treatment of all the options. For more information, take a look at the <code>mypy</code> <a href="http://mypy.readthedocs.org/en/latest/basics.html#function-signatures">examples</a> and <a href="https://www.python.org/dev/peps/pep-0484"><strong>PEP 484</strong></a>.</p>
</div>
											</div>


					</div></body></html>