<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-gendo-for-slack" class="anchor" href="#gendo-for-slack" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Gendo for Slack</h1>
<a href="https://pypi.python.org/pypi/gendobot/"><img src="https://camo.githubusercontent.com/3195111bc130470557d454f615e74f8704c54852/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f67656e646f626f742e737667" data-canonical-src="https://img.shields.io/pypi/v/gendobot.svg"/>
</a>
<a href="https://pypi.python.org/pypi/gendobot/"><img src="https://camo.githubusercontent.com/e319478f29bab34c5119b32efba89a5482d3e158/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f67656e646f626f742e737667" data-canonical-src="https://img.shields.io/pypi/dm/gendobot.svg"/>
</a>
<a href="https://pypi.python.org/pypi/gendobot/"><img src="https://camo.githubusercontent.com/78325b348ee7a9319f2f7948214370ef739cd41c/68747470733a2f2f696d672e736869656c64732e696f2f707970692f707976657273696f6e732f67656e646f626f742e737667" data-canonical-src="https://img.shields.io/pypi/pyversions/gendobot.svg"/>
</a>
<a href="https://travis-ci.org/nficano/gendo"><img alt="https://travis-ci.org/nficano/gendo.svg?branch=master" src="https://camo.githubusercontent.com/bed5a0ab8897a2c86898036f90dc3413cd39173a/68747470733a2f2f7472617669732d63692e6f72672f6e666963616e6f2f67656e646f2e7376673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/nficano/gendo.svg?branch=master"/></a>
<a href="https://coveralls.io/github/nficano/gendo?branch=master"><img alt="https://coveralls.io/repos/nficano/gendo/badge.svg?branch=master&amp;service=github&amp;cb=321" src="https://camo.githubusercontent.com/a702d90d70b2b206cbe6b7bf8ef1e811f545e9c8/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6e666963616e6f2f67656e646f2f62616467652e7376673f6272616e63683d6d617374657226736572766963653d6769746875622663623d333231" data-canonical-src="https://coveralls.io/repos/nficano/gendo/badge.svg?branch=master&amp;service=github&amp;cb=321"/></a>
<a name="user-content-description"/>
<h2><a id="user-content-description" class="anchor" href="#description" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Description</h2>
<p>Gendo is a lightweight Slackbot framework that abstracts away all the
boilerplate code required to write bots, allowing you to focus on the problem
at hand.</p>
<a name="user-content-installation"/>
<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>
<ol>
<li>In a new project folder for your bot:</li>
</ol>
<div class="highlight highlight-source-shell"><pre>$ mkdir myslackbot
$ <span class="pl-c1">cd</span> myslackbot</pre></div>
<ol start="2">
<li>Install <code>gendobot</code> from <em>pypi</em>.</li>
</ol>

<ol start="3">
<li>Next make another file for your bot's logic:</li>
</ol>

<ol start="4">
<li>Also in your favourate text editor, edit <em>mybot.py</em> with the following:</li>
</ol>
<div class="highlight highlight-source-python"><pre><span class="pl-c">#!/usr/bin/env python</span>
<span class="pl-c"># -*- coding: utf-8 -*-</span>
<span class="pl-k">from</span> gendo <span class="pl-k">import</span> Gendo
gendo <span class="pl-k">=</span> Gendo(<span class="pl-s"><span class="pl-pds">"</span>xoxb-1234567890-replace-this-with-token-from-slack<span class="pl-pds">"</span></span>)


<span class="pl-en">@gendo.listen_for</span>(<span class="pl-s"><span class="pl-pds">'</span>morning<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">morning</span>(<span class="pl-smi">user</span>, <span class="pl-smi">message</span>):
    <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>mornin' @<span class="pl-c1">{user.username}</span><span class="pl-pds">"</span></span>

<span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:
   gendo.run()</pre></div>
<ol start="5">
<li>Now try running it, run the following command then say "<em>morning</em>" in Slack.</li>
</ol>

<a name="user-content-basic-usage"/>
<h2><a id="user-content-basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Basic Usage</h2>
<p>To start your project, you'll first need to import gendo by adding
<code>from gendo import Gendo</code> to the top of your file.</p>
<p>Next you'll need to create an instance of Gendo and configure your Slack token.
This can be done using a yaml config file or passing it explicitly to the
initialization.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c"># Option 1: YAML config:</span>
<span class="pl-k">import</span> os
<span class="pl-k">from</span> gendo <span class="pl-k">import</span> Gendo

path <span class="pl-k">=</span> os.path.dirname(os.path.abspath(<span class="pl-c1">__file__</span>))
path_to_yaml <span class="pl-k">=</span> os.path.join(path, <span class="pl-s"><span class="pl-pds">'</span>config.yaml<span class="pl-pds">'</span></span>)
gendo <span class="pl-k">=</span> Gendo.config_from_yaml(path_to_yaml)</pre></div>
<div class="highlight highlight-source-python"><pre><span class="pl-c"># Option 2: Hardcoded slack token</span>
<span class="pl-k">from</span> gendo <span class="pl-k">import</span> Gendo
gendo <span class="pl-k">=</span> Gendo(<span class="pl-s"><span class="pl-pds">"</span>xoxb-1234567890-replace-this-with-token-from-slack<span class="pl-pds">"</span></span>)</pre></div>
<p>Now its time to write your <code>response</code> functions, these functions get wrapped
with the <code>listen_for</code> decorator, which registers a pattern to watch the slack
conversation for and which python method should handle it once its said.</p>
<p>In the following example, the method is setup to listen for the word "<em>cookies</em>".
Notice that the decorator passes two arguments to the function, first the
<code>user</code> object which contains information about the user who triggered the
event (in this case the Slack user who said the word cookies) and <code>message</code>,
which is a string of the complete message.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-en">@gendo.listen_for</span>(<span class="pl-s"><span class="pl-pds">'</span>cookies<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">cookies</span>(<span class="pl-smi">user</span>, <span class="pl-smi">message</span>):
    <span class="pl-c"># do something when someone say's "cookies" here.</span></pre></div>
<p>You can also set more complicated rules with callables, and you can stack them!
Here's an example.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">nicks_joke_rule</span>(<span class="pl-smi">name</span>, <span class="pl-smi">message</span>):
    is_nick <span class="pl-k">=</span> name <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>nficano<span class="pl-pds">'</span></span>
    is_telling_a_joke <span class="pl-k">=</span> message.lower().count(<span class="pl-s"><span class="pl-pds">'</span>knock<span class="pl-pds">'</span></span>) <span class="pl-k">==</span> <span class="pl-c1">2</span>
    <span class="pl-k">return</span> is_nick <span class="pl-k">and</span> is_telling_a_joke


<span class="pl-k">def</span> <span class="pl-en">bens_joke_rule</span>(<span class="pl-smi">name</span>, <span class="pl-smi">message</span>):
    is_ben <span class="pl-k">=</span> name <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>johnbenjaminlewis<span class="pl-pds">'</span></span>
    is_telling_a_joke <span class="pl-k">=</span> message.lower().count(<span class="pl-s"><span class="pl-pds">'</span>knock<span class="pl-pds">'</span></span>) <span class="pl-k">==</span> <span class="pl-c1">2</span>


<span class="pl-en">@gendo.listen_for</span>(nicks_joke_rule)
<span class="pl-en">@gendo.listen_for</span>(bens_joke_rule)
<span class="pl-k">def</span> <span class="pl-en">another_joke</span>(<span class="pl-smi">name</span>, <span class="pl-smi">message</span>):
    <span class="pl-k">if</span> name <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>johnbenjaminlewis<span class="pl-pds">'</span></span>:
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>@johnbenjaminlewis, nice try. But no.<span class="pl-pds">'</span></span>
    <span class="pl-k">elif</span> name <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>nficano<span class="pl-pds">'</span></span>:
        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">"</span>@here Nick's telling a joke! Who's there?!?<span class="pl-pds">"</span></span></pre></div>
<p>Finally your script needs to sit inside a loop, monitor whats said in a slack
channel and respond to the messages accordingly. To do this we add the
following to the end of your script:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:
   gendo.run()</pre></div>
<a name="user-content-crontab"/>
<h3><a id="user-content-crontab" class="anchor" href="#crontab" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Crontab</h3>
<p>Sometimes you'll run into situations where you want Slack messages to be sent
periodically rather than in direct response to a keyword, for this Gendo ships
with a single-threaded Python implementation of Cron.</p>
<p>Let's pretend we want to send a message to everyone in a channel every five
minutes, simply add the following to your <em>mybot.py</em> file:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-en">@gendo.cron</span>(<span class="pl-s"><span class="pl-pds">'</span>*/5 * * * *<span class="pl-pds">'</span></span>)
<span class="pl-k">def</span> <span class="pl-en">some_task</span>():
    gendo.speak(<span class="pl-s"><span class="pl-pds">"</span>Hay Ride!<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>#general<span class="pl-pds">"</span></span>)</pre></div>
<p>See <a href="https://en.wikipedia.org/wiki/Cron#Configuration_file">https://en.wikipedia.org/wiki/Cron#Configuration_file</a> for more details on
crontab syntax.</p>

</article>
  </div></body></html>