<html><body><div><div class="section">
              <h1>django-redis-metrics 0.8.2</h1>

              


<p>django-redis-metrics is a Django application for tracking application metrics backed by Redis.</p>

<p>
   <a href="http://pythonhosted.org/django-redis-metrics/">Package Documentation</a>
</p>

<p>
<strong>Latest Version: </strong><a title="Latest Version URL" href="https://pypi.python.org/pypi/django-redis-metrics/1.1.0">
<span>1.1.0</span>
</a>
</p>




<a href="http://travis-ci.org/bradmontgomery/django-redis-metrics" rel="nofollow"><img src="https://secure.travis-ci.org/bradmontgomery/django-redis-metrics.png"/></a>
<a href="https://crate.io/packages/django-redis-metrics/" rel="nofollow"><img src="https://pypip.in/d/django-redis-metrics/badge.png"/></a>
<p>This app allows you do define various named metrics (such as ‘New Users’,
‘Downloads’, or ‘Purchases’) and record when they happen.</p>
<p>Eat metric can be assigned a Category or an optional Expiration time, and is
stored at the second, minute, hourly, daily, weekly, monthly, and yearly level,
so you can see the frequency of your data at different granularities.</p>
<p>Here’s a sneak peak at how it works:</p>
<pre>&gt;&gt;&gt; from redis_metrics.utils import metric
&gt;&gt;&gt; metric("Downloads", category="User Metrics")
</pre>
<p>See the <a href="#usage" rel="nofollow">usage</a> section for more examples.</p>
<div id="inspiration">
<h2>Inspiration</h2>
<p>This app was inspired by Frank Wiles <tt><span class="pre">django-app-metrics</span></tt>. It offers a
similar feature set but:</p>
<ul>
<li>It is <em>only</em> backed by Redis</li>
<li>Does not require Celery</li>
<li>Does not include any Timing</li>
</ul>
</div>
<div id="requirements">
<h2>Requirements</h2>
<p>This app works with Python 2.7 and Django 1.4, 1.6, 1.7 and requires <a href="https://github.com/andymccurdy/redis-py" rel="nofollow">redis-py</a>.</p>
<p>If you’d like to run the tests, install the packages listed in
<tt>requirements/test.txt</tt>, which includes coverage and mock.</p>
</div>
<div id="installation">
<h2>Installation</h2>
<p>To install the current version, run <tt>pip install <span class="pre">django-redis-metrics</span></tt>.</p>
<p>You can also install the development version with
<tt>pip install <span class="pre">-e</span> <span class="pre">git://github.com/bradmontgomery/django-redis-metrics.git#egg=redis_metrics-dev</span></tt></p>
<p>To use the built-in views, add <tt>redis_metrics</tt> to your <tt>INSTALLED_APPS</tt>,
and include the following in your Root URLconf:</p>
<pre>url(r'^metrics/', include('redis_metrics.urls')),
</pre>
<p>Then, to view your metrics, visit the /metrics/ url, (i.e. run the development
server and go to <a href="http://127.0.0.1:8000/metrics/" rel="nofollow">http://127.0.0.1:8000/metrics/</a>)</p>
</div>
<div id="upgrading-to-0-8-x">
<h2>Upgrading to 0.8.x</h2>
<p>If you used a version of this app prior to 0.8.0, it’s likely that
you’ll run into this error:</p>
<pre>WRONGTYPE Operation against a key holding the wrong kind of value
</pre>
<p>To fix this, run the <tt>fix_redis_metrics_keys</tt> command, which should mitgrate
data for metrics, gauges, and categories.</p>
</div>
<div id="settings">
<h2>Settings</h2>
<ul>
<li><tt>REDIS_METRICS_HOST</tt> - Hostname of redis server, defaults to ‘localhost’</li>
<li><tt>REDIS_METRICS_PORT</tt> - redis port, defaults to ‘6379’</li>
<li><tt>REDIS_METRICS_DB</tt> - redis database number to use, defaults to 0</li>
<li><tt>REDIS_METRICS_PASSWORD</tt> - redis database password to use, defaults to None</li>
<li><tt>REDIS_METRICS_SOCKET_TIMEOUT</tt> - redis database socket timeout, defaults to None</li>
<li><tt>REDIS_METRICS_SOCKET_CONNECTION_POOL</tt> - redis database socket connection
pool, defaults to None</li>
<li><tt>REDIS_METRICS_MIN_GRANULARITY</tt> - The minimum-time granularity for your
metrics (default is ‘daily’)</li>
<li><tt>REDIS_METRICS_MAX_GRANULARITY</tt> - The maximum-time granularity for your
metrics (default is ‘yearly’)</li>
<li><tt>REDIS_METRICS_MONDAY_FIRST_DAY_OF_WEEK</tt> - set to True if week should start on monday, defaults to False</li>
</ul>
</div>
<div id="id1">
<span id="usage"/><h2>Usage</h2>
<p>Use the <tt>metric</tt> shortcut to start recording metrics.</p>
<pre>from redis_metrics import metric

# Increment the metric by one
metric('new-user-signup')

# Increment the metric by some other number
metric('new-user-signup', 4)
</pre>
<p>Metrics can also be categorized. To record a metric and add it to a category,
specify a <tt>category</tt> keyword parameter</p>
<pre># Increment the metric, and add it to a category
metric('new-user-signup', category="User Metrics")
</pre>
<p>Metrics can also expire after a specified number of seconds</p>
<pre># The 'foo' metric will expire in 5 minutes
metric('foo', expire=300)
</pre>
<p>You can also <em>reset</em> a metric with the <tt>set_metric</tt> function. This will
replace any existing values for the metric, rather than incrementing them. It’s
api is similar to <tt>metric</tt>’s.</p>
<pre>from redis_metrics import set_metric

# Reset the Download count.
set_metric("downloads", 0)
</pre>
<p>There are also <tt>gauge</tt>’s. A <tt>gauge</tt> is great for storing a <em>cumulative</em>
value, and when you don’t care about keeping a history for the metric.</p>
<pre>from redis_metrics import gauge

# Create a gauge
gauge('total-downloads', 0)

# Update the gauge
gauge('total-downloads', 9999)
</pre>
<p>There’s also an <tt>R</tt> class which is a lightweight wrapper around <tt>redis</tt>.
You can use it directly to set metrics or gauges and to retrieve data.</p>
<pre>&gt;&gt;&gt; from redis_metrics.models import R
&gt;&gt;&gt; r = R()
&gt;&gt;&gt; r.metric('new-user-signup')
&gt;&gt;&gt; r.get_metric('new-user-signup')
{
    'second': 0,
    'minute': 0,
    'hour': 1,
    'day': '29',
    'month': '29',
    'week': '29',
    'year': '29'
}

# list the slugs you've used to create metrics
&gt;&gt;&gt; r.metric_slugs()
set(['new-user-signup', 'user-logins'])

# Get metrics for multiple slugs
&gt;&gt;&gt; r.get_metrics(['new-user-signup', 'user-logins'])
[
    {'new-user-signup': {
        'second': '0', 'minute': '0', 'hour': '1',
        'day': '7', 'month': '7', 'week': '7', 'year': '7'}},
    {'user-logins':
        'second': '0', 'minute': '0', 'hour': '1',
        'day': '7', 'month': '7', 'week': '7', 'year': '7'}},
]

# Delete a metric
&gt;&gt;&gt; r.delete_metric("app-errors")
</pre>
</div>
<div id="contributing">
<h2>Contributing</h2>
<p>Feel free to submit bug reports or pull requests on <a href="https://github.com/bradmontgomery/django-redis-metrics" rel="nofollow">the github repo</a>.</p>
<p>If you do submit a pull request, please consider running the tests and (if
applicable) adding test coverage for your changes. Thank You!</p>
</div>
<div id="license">
<h2>License</h2>
<p>This code is distributed under the terms of the MIT license. See the
<tt>LICENSE.txt</tt> file.</p>
</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>141</span> downloads in the last week
  </li>
  <li>
    <span>1296</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>