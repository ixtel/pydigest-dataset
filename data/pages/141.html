<html><body><div><div class="post-body entry-content"><p>
Python template engines offer high reusability of markup code and the following features are used by content developers most of the time:

</p><ul>
<li>
<i>Includes</i>: useful to incorporate some snippets of content that in most cases are common to the site, e.g. footer, scripts, styles, etc.
</li>

<li>
<i>Extends</i>: useful to define a master layout for the majority of the site content with placeholders, e.g. sidebar, horizontal menu, content, etc. The content developers extend the master layout by substituting available placeholders.
</li>

<li>
<i>Widgets</i>: usually small snippets of highly reusable markup, e.g. list item, button, etc. The content developers use widgets to increase readability and enforce consistency of design.
</li>
</ul><p>

We will examine all mentioned features above. Test is executed in isolated environment using CPython 2.7. Latest available versions (April 2, 2015):

</p><ol>
<li><a href="https://www.djangoproject.com/">django</a> 1.8</li>
<li><a href="http://jinja.pocoo.org/">jinja2</a> 2.7.3</li>
<li><a href="http://www.makotemplates.org/">mako</a> 1.0.1</li>
<li><a href="http://www.kuwata-lab.com/tenjin/">tenjin</a> 1.1.1</li>
<li><a href="http://www.tornadoweb.org/documentation/template.html">tornado</a> 4.1</li>
<li><a href="https://bitbucket.org/akorn/wheezy.template">wheezy.template</a> 0.1.159</li>
</ol>

<i>Includes &amp; Extends</i><p>: in this test case an initial version of HTML content is refactored to use </p><i>include</i><p> and </p><i>extend</i><p> features of respective template engine.

</p>

<i>Widgets</i><p>: the test case is around how widget is built and used.

</p>


<i>02-single</i><p> - a widget is built in a way that loop is inside; </p><i>03-loop</i><p> - a widget represent an item that is rendered in a loop.

</p><a name="more"/><p>

Here are raw numbers:
</p><pre>
05-template

len(items) == 0

01-initial         msec    rps  tcalls  funcs
django            14148   7068     162     52
jinja2             2508  39874      27     21
mako               6634  15073      47     35
tenjin             2178  45911      27     21
tornado            2441  40965      30     18
wheezy.template     428 233700      14      8

02-include         msec    rps  tcalls  funcs
django            30875   3239     384     65
jinja2            12579   7950     109     39
mako              25971   3850     149     49
tenjin             7022  14241      88     27
tornado            2452  40787      37     18
wheezy.template     930 107577      29     13

03-extends         msec    rps  tcalls  funcs
django            47068   2125     621     83
jinja2            15531   6439     162     45
mako              36221   2761     225     63
tenjin            10336   9675     118     35
tornado            2530  39521      42     18
wheezy.template    1693  59065      47     18

04-preprocess      msec    rps  tcalls  funcs
django                 not available
jinja2                 not available
mako                   not available
tenjin                 not available
tornado                not available
wheezy.template     428 233559      14      8

len(items) == 10

01-initial         msec    rps  tcalls  funcs
django           109984    909    1321     61
jinja2             9093  10997     118     21
mako              11140   8976     136     35
tenjin             4723  21175      46     21
tornado            7438  13444     181     18
wheezy.template    1663  60130      73      8

02-include         msec    rps  tcalls  funcs
django           129224    774    1543     72
jinja2            19485   5132     200     39
mako              30257   3305     238     49
tenjin             9721  10287     107     27
tornado            7506  13323     188     18
wheezy.template    2188  45703      88     13

03-extends         msec    rps  tcalls  funcs
django           145839    686    1780     88
jinja2            23096   4330     275     45
mako              41884   2388     314     63
tenjin            13674   7313     155     38
tornado            7721  12952     193     18
wheezy.template    3056  32723     106     18

04-preprocess      msec    rps  tcalls  funcs
django                 not available
jinja2                 not available
mako                   not available
tenjin                 not available
tornado                not available
wheezy.template    1636  61125      73      8

06-widgets

len(names) == 0

01-initial         msec    rps  tcalls  funcs
django             7003  14280      78     40
jinja2             1740  57481      17     15
mako               5237  19096      35     32
tenjin             1470  68009      24     20
tornado            1895  52782      18     15
wheezy.template     212 471948       8      7

02-single          msec    rps  tcalls  funcs
django            12089   8272     131     41
jinja2             5190  19269      44     37
mako              11703   8545      74     50
tenjin             2958  33802      45     24
tornado            5133  19483      49     28
wheezy.template     390 256581      14      9

03-loop            msec    rps  tcalls  funcs
django             7459  13407      78     40
jinja2             4017  24896      33     31
mako              11387   8782      65     49
tenjin             1446  69149      24     20
tornado            1629  61386      18     15
wheezy.template     286 349846       9      8

len(names) == 1

01-initial         msec    rps  tcalls  funcs
django            12767   7833     138     56
jinja2             2502  39961      22     19
mako               5888  16985      42     35
tenjin             1971  50726      26     21
tornado            2315  43191      30     18
wheezy.template     360 277594      12      8

02-single          msec    rps  tcalls  funcs
django            21315   4691     191     57
jinja2             6184  16169      49     41
mako              11839   8447      81     52
tenjin             3615  27663      47     25
tornado            5511  18146      61     31
wheezy.template     551 181354      18     10

03-loop            msec    rps  tcalls  funcs
django            18787   5323     191     57
jinja2             6096  16404      49     40
mako              12241   8169      81     52
tenjin             3468  28838      43     25
tornado            6080  16448      61     31
wheezy.template     561 178407      18     10

len(names) == 10

01-initial         msec    rps  tcalls  funcs
django            52911   1890     660     56
jinja2             6754  14805      67     19
mako               9697  10312     105     35
tenjin             3636  27505      44     21
tornado            6618  15111     138     18
wheezy.template    1073  93161      48      8

02-single          msec    rps  tcalls  funcs
django            60454   1654     713     57
jinja2            11482   8709      94     41
mako              15761   6345     144     52
tenjin             5867  17045      65     25
tornado            9884  10118     169     31
wheezy.template    1401  71395      54     10

03-loop            msec    rps  tcalls  funcs
django           114332    875    1190     57
jinja2            20982   4766     193     40
mako              20198   4951     225     52
tenjin            22042   4537     214     25
tornado           45955   2176     448     31
wheezy.template    2596  38516      99     10
</pre>

<i>msec</i><p> - a total time taken in milliseconds, </p><i>rps</i><p> - requests processed per second, </p><i>tcalls</i><p> - total number of calls made by corresponding template engine, </p><i>funcs</i><p> - a number of unique functions used.

</p><h4>Setup and Run</h4><p>

Prerequisites to be able run this in a clean debian testing installation.

</p><pre class="sh_sh">
apt-get install make python-dev python-virtualenv \
    unzip
</pre><p>

The </p><a href="https://bitbucket.org/akorn/helloworld/src">source code</a><p> is hosted on bitbucket, clone it into some directory and setup virtual environment (this will download all necessary package dependencies per framework listed above).

</p><pre>
hg clone https://bitbucket.org/akorn/helloworld
cd helloworld
make env -sC 05-template
make env -sC 06-widgets
</pre><p>

Note, you can run this benchmark using any version of python, including pypy. Here are make targets to use:
</p><pre>
make env VERSION=3.3
make pypy
</pre><p>

Once environment is ready, cd to benchmark directory and run:
</p><pre>
env/bin/python benchmark.py
</pre><p>

Environment Specification:
</p><ul>
<li>Intel Core 2 Duo @ 2.4 GHz x 2</li>
<li>OS X 10.10, Python 2.7.9</li>
</ul><p>

Python has a number of </p><a href="http://wiki.python.org/moin/Templating">template engines</a><p>. A trivial use case gives you an idea where particular template engine stands in terms of performance and internal effectivity.
</p><p/>
</div>
</div></body></html>