<html><body><div><div class="entry-content">
        
      <h1 class="post-title entry-title">Python for Android Tutorial #3 – User Interface with Kivy Designer</h1>
      <h3 id="welcome">Welcome!</h3>

<p>This is the third post about mobile development with Python.</p>

<p>It’s a short tutorial, just to help you to understand and learn how to work with Python for Mobile.</p>

<p>In this post you will see how to create user interfaces with Kivy Designer. This post is compatible with any OS supported by Kivy.</p>

<figure class="center ">
  <a href="/images/python-mobile.png"><img src="/images/python-mobile.png" alt=""/></a>
  <figcaption>Python Mobile course</figcaption>
</figure>




<p><ins class="adsbygoogle" data-ad-client="ca-pub-7559770887681599" data-ad-slot="6312284669" data-ad-format="auto"/>
</p>

<h2 id="iii---about-this-tutorial">III - About this tutorial</h2>

<p>In this post you will learn about <a href="https://github.com/kivy/kivy-designer">Kivy Designer.</a></p>

<p>This tool still in Alpha version, but it’s very helpful.</p>

<p>Prequisites:</p>

<ul>
  <li>Kivy 1.8+</li>
  <li>The following Python modules (available via pip)
    
  </li>
  <li>The FileBrowser widget from the <a href="http://kivy.org/docs/api-kivy.garden.html">Kivy garden</a></li>
</ul>

<p>To install the FileBrowser enter the console (on winodws use kivy.bat in the kivy folder):</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">pip install kivy-garden
garden install filebrowser</code></pre></figure>

<p>With the perquisites installed, you can use the designer:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">  
git clone http://github.com/kivy/kivy-designer/
<span class="nb">cd </span>kivy-designer
python main.py</code></pre></figure>

<p>If you get any error in this step, feel free to comment here :)</p>

<h2 id="iv---a-sample-app">IV - A Sample App</h2>

<p>To test Kivy Designer, create a <strong>New Project</strong> and let’s use the <strong>TabbedPanel</strong> template.</p>

<figure class="center ">
  <a href="/images/kd_tabbed_template.png"><img src="/images/kd_tabbed_template.png" alt=""/></a>
  <figcaption>New Project</figcaption>
</figure>

<p>This is your Kivy Designer:</p>
<figure class="center ">
  <a href="/images/kd_tabbed_template.png"><img src="/images/kd_tabbed_template.png" alt=""/></a>
  <figcaption>Kivy Designer Screen</figcaption>
</figure>

<p>First, if you want to learn more about it, make some changes in the KV Lang Area, and check how it modify your UI.
You can learn more <a href="http://kivy.org/docs/guide/lang.html">about KV Lang here.</a> Next, open the <strong>Toolbox</strong> tab and add new widgets just to test.</p>

<p>Now, to start our project, in the <strong>Item 1</strong>, add two <strong>Buttons</strong>: ‘New Tab’ and ‘Close Tab’ inside the <strong>BoxLayout</strong>. You can remove the others tabs.
In the <strong>events</strong> tab, edit the signal <strong>on_press</strong> and theses buttons.</p>

<p>In an event, you need to set the method name. First a prefix, <strong>app</strong> for a <strong>MainApp</strong> method, or root for a <strong>RootWidget</strong> method.</p>

<p>In this tutorial, I’ll create two callbacks, <strong>btn_new_on_press()</strong> and <strong>btn_close_on_press()</strong>, both of them in the <strong>RootWidget</strong> object.</p>

<p>Now we have the following KV code:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&lt;</span><span class="n">RootWidget</span><span class="o">&gt;</span><span class="p">:</span>
    <span class="n">TabbedPanel</span><span class="p">:</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">tab_panel</span>
        <span class="n">do_default_tab</span><span class="p">:</span> <span class="bp">False</span>

        <span class="n">TabbedPanelItem</span><span class="p">:</span>
            <span class="nb">id</span><span class="p">:</span> <span class="n">tab_1</span>
            <span class="n">text</span><span class="p">:</span> <span class="s">'Tab 1'</span>
            <span class="n">BoxLayout</span><span class="p">:</span>
                <span class="n">Button</span><span class="p">:</span>
                    <span class="n">on_press</span><span class="p">:</span>   <span class="n">root</span><span class="o">.</span><span class="n">btn_new_on_press</span><span class="p">()</span>
                    <span class="n">text</span><span class="p">:</span> <span class="s">'New Tab'</span>
                <span class="n">Button</span><span class="p">:</span>
                    <span class="n">on_press</span><span class="p">:</span>  <span class="n">root</span><span class="o">.</span><span class="n">btn_close_on_press</span><span class="p">()</span>
                	<span class="n">text</span><span class="p">:</span> <span class="s">'Close tab'</span>  </code></pre></figure>

<p>Now we will add some Python code.</p>

<p>When you click in the <strong>New Tab</strong>, a new Tab will be created with the same content of the first one. <strong>Close Tab</strong> will close the current tab.</p>

<p>Open your main.py file and add the methods in the <strong>RootWidget</strong> class:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">__version__</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="kn">from</span> <span class="nn">kivy.uix.tabbedpanel</span> <span class="kn">import</span> <span class="n">TabbedPanel</span>
<span class="kn">from</span> <span class="nn">kivy.lang</span> <span class="kn">import</span> <span class="n">Builder</span>
<span class="kn">from</span> <span class="nn">kivy.app</span> <span class="kn">import</span> <span class="n">App</span>
<span class="kn">from</span> <span class="nn">kivy.uix.floatlayout</span> <span class="kn">import</span> <span class="n">FloatLayout</span>


<span class="k">class</span> <span class="nc">RootWidget</span><span class="p">(</span><span class="n">FloatLayout</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="c">#init the obj</span>
		<span class="nb">super</span><span class="p">(</span><span class="n">RootWidget</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">=</span> <span class="mi">1</span>

	<span class="k">def</span> <span class="nf">btn_close_on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="c">#callback. Close the current tab</span>
		<span class="n">panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="o">.</span><span class="n">tab_panel</span> <span class="c">#get the tab_panel by id</span>
		<span class="n">tab</span> <span class="o">=</span> <span class="n">panel</span><span class="o">.</span><span class="n">current_tab</span> <span class="c">#get the current tab</span>
		<span class="n">panel</span><span class="o">.</span><span class="n">remove_widget</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span> <span class="c">#remove tab from tablist</span>

	<span class="k">def</span> <span class="nf">btn_new_on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="c"># callback; Add a new Tab</span>
		<span class="n">panel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ids</span><span class="o">.</span><span class="n">tab_panel</span>
		<span class="c">#create a tab by KV string</span>
		<span class="n">tab_str</span> <span class="o">=</span> <span class="s">'''
TabbedPanelItem:
	id: tab_</span><span class="si">%</span><span class="s">d
	text: 'Tab </span><span class="si">%</span><span class="s">d'
	BoxLayout:
		Button:
			id: btn_new
            text: 'New Tab'
        Button:
            id: btn_close
            text: 'Close tab'
		'''</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">max_id</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c">#max tab id</span>
		<span class="n">tab</span> <span class="o">=</span> <span class="n">Builder</span><span class="o">.</span><span class="n">load_string</span><span class="p">(</span><span class="n">tab_str</span> <span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span><span class="p">))</span> <span class="c">#create a widget by string</span>
		<span class="n">tab</span><span class="o">.</span><span class="n">ids</span><span class="o">.</span><span class="n">btn_new</span><span class="o">.</span><span class="n">on_press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">btn_new_on_press</span> <span class="c">#set events</span>
		<span class="n">tab</span><span class="o">.</span><span class="n">ids</span><span class="o">.</span><span class="n">btn_close</span><span class="o">.</span><span class="n">on_press</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">btn_close_on_press</span>
		<span class="n">panel</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span> <span class="c"># add the tab</span>


<span class="k">class</span> <span class="nc">MainApp</span><span class="p">(</span><span class="n">App</span><span class="p">):</span>		
	<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">RootWidget</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">MainApp</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span></code></pre></figure>

<p>Now save your project and check if it’s running.</p>

<h2 id="v---running-on-android-and-ios">V - Running on Android and iOS</h2>

<p>Popen your terminal, and inside the project folder run the command bellow to create a buildozer project:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">  
buildozer init</code></pre></figure>

<p>Now, open <strong>buildozer.spec</strong> and edit if necessary.</p>

<p>To run on Android, run the command:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">buildozer</span> <span class="n">android</span> <span class="n">debug</span> <span class="n">deploy</span> <span class="n">run</span></code></pre></figure>

<p>Or, if you are going to run on iOS, run:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">buildozer</span> <span class="n">ios</span> <span class="n">debug</span> <span class="n">deploy</span> <span class="n">run</span></code></pre></figure>

<p>This is the app running on my Android device:</p>

<figure class="center ">
  <a href="/images/p4a3.png"><img src="/images/p4a3.png" alt=""/></a>
</figure>

<p>That’s all. Thanks for reading, if you have any problem or anything else, comment here :)</p>


<center>
  <ins class="adsbygoogle" data-ad-client="ca-pub-7559770887681599" data-ad-slot="1350374663">
  </ins>
</center>



      <footer class="entry-meta">
        <span class="entry-tags"><a href="/tags#Android" title="Pages tagged Android" class="tag"><span class="term">Android</span></a><a href="/tags#code" title="Pages tagged code" class="tag"><span class="term">code</span></a><a href="/tags#design" title="Pages tagged design" class="tag"><span class="term">design</span></a><a href="/tags#designer" title="Pages tagged designer" class="tag"><span class="term">designer</span></a><a href="/tags#interface" title="Pages tagged interface" class="tag"><span class="term">interface</span></a><a href="/tags#ios" title="Pages tagged ios" class="tag"><span class="term">ios</span></a><a href="/tags#kivy" title="Pages tagged kivy" class="tag"><span class="term">kivy</span></a><a href="/tags#mobile" title="Pages tagged mobile" class="tag"><span class="term">mobile</span></a><a href="/tags#python" title="Pages tagged python" class="tag"><span class="term">python</span></a><a href="/tags#tabs" title="Pages tagged tabs" class="tag"><span class="term">tabs</span></a><a href="/tags#Tutorial" title="Pages tagged Tutorial" class="tag"><span class="term">Tutorial</span></a><a href="/tags#user" title="Pages tagged user" class="tag"><span class="term">user</span></a></span>
        
        <span class="author vcard"><span class="fn">Aron Bordin</span></span>
        

      </footer>
    </div>
    </div></body></html>