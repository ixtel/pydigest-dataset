<html><body><div><div><p>Around six years ago, I decided to start a website called packetlife.net. Maybe you've heard of it. Most people turn to a purpose-built content management system like Wordpress or Drupal for such an endeavor, but I needed greater flexibility to achieve some of the projects I had in mind. This meant I needed to learn a programming language and write a good amount of the site's logic myself.</p>
<p>I already had some experience dabbling in PHP, but wasn't thrilled with it. I figured if I was going to learn a new language, it should be useful as a general purpose language and not just for building a web site. After a bit of research and deliberation, I chose <a href="http://python.org/">Python</a> (and the <a href="http://djangoproject.com/">Django web framework</a>).</p>
<p>The purpose of this post is to convince networkers with little to no experience writing code to learn Python. In the past I've encouraged fellow networkers to pick up <em>any</em> programming language, as it's more important to think like a programmer than it is to gain proficiency in a particular language. However, I've realized that many people get stuck on which language they want to learn, lose motivation, and end up not growing proficient in anything. So, I've started telling people to skip that first step and just learn Python.</p>


<h2>Why Python?</h2>
<p>So why should you learn Python, specifically? Here are some reasons. (To the more contrary readers among you, please recognize that these are reasons <em>for</em> learning Python and not to be taken as slights against any other language.)</p>
<p><strong>It's a general purpose language.</strong> Python can be used to script out device configs, crunch data, serve a website (like this one), generate packets, play games - whatever you want it to do.</p>
<p><strong>It's easy to learn.</strong> Even if you have zero programming experience, chances are you'll be able to pick up Python pretty quickly. There are many excellent free resources available, which are listed toward the end of this article.</p>
<p><strong>It's quick to write.</strong> Python is an <a href="http://en.wikipedia.org/wiki/Interpreted_language">interpreted language</a> and light on syntax. It's similar to a scripting language, but made far more powerful through the inclusion of external libraries.</p>
<p><strong>It's convenient.</strong> Python's interactive command interpreter makes for quick and fun code experiments. Small chunks of code are easily copied and pasted for evaluation.</p>
<p><strong>It's mature and widely supported.</strong> Python has been around for more than two decades. There are <a href="https://pypi.python.org/pypi">many thousands of packages</a> available for it.</p>
<p><strong>It's preferred by many network vendors.</strong> <a href="http://www.cisco.com/c/en/us/td/docs/switches/datacenter/sw/6_x/nx-os/fundamentals/configuration/guide/b_Cisco_Nexus_7000_Series_NX-OS_Fundamentals_Configuration_Guide_Release_6-x/b_Cisco_Nexus_7000_Series_NX-OS_Fundamentals_Configuration_Guide_Release_6-x_chapter_01011.html">Cisco</a> and <a href="https://techwiki.juniper.net/Automation_Scripting/Scripts_by_Languages/Python">Juniper</a> both provide Python APIs to some of their network operating systems, and Arista's CLI is actually built on it. Python appears to be the language of choice for many network vendors.</p>
<h2>What can I do with Python?</h2>
<p>Lots of stuff. You can quickly script out configuration commands to copy and paste:</p>
<pre>
&gt;&gt;&gt; <strong>for i in range(0, 48):</strong>
...   <strong>print "set interface xe-0/0/%d.0 family inet address 10.0.%d.1/24" % (i, i)</strong>
... 
set interface xe-0/0/0.0 family inet address 10.0.0.1/24
set interface xe-0/0/1.0 family inet address 10.0.1.1/24
set interface xe-0/0/2.0 family inet address 10.0.2.1/24
set interface xe-0/0/3.0 family inet address 10.0.3.1/24
...
</pre>

<p>You can use it to send email:</p>
<pre>
&gt;&gt;&gt; <strong>import smtplib</strong>
&gt;&gt;&gt; <strong>s = smtplib.SMTP('localhost', 1025)</strong>
&gt;&gt;&gt; <strong>s.sendmail('me@example.com', 'you@example.com', "Python is awesome!")</strong>
</pre>

<p>And receive email:</p>
<pre>
$ <strong>python -m smtpd -n -c DebuggingServer localhost:1025</strong>
---------- MESSAGE FOLLOWS ----------
Python is awesome!
------------ END MESSAGE ------------
</pre>

<p>Populate <a href="https://osl.uoregon.edu/redmine/projects/netdot">NetDot</a> with hundreds of objects in just minutes using bulk HTTP requests:</p>
<pre>
import requests
i = 0
for rack in range(101, 121) + range(201, 221) + range(301, 321):
    for d in ['tor%sa' % rack, 'tor%sb' % rack, 'mgmt%s' % rack]:
        r = requests.post('http://netdot.local/netdot/management/host_tasks.html',
            data = {
                'add_host_address': '10.1.0.%d' % i,
                'name': "%s.example.com" % d,
            },
        )
        i += 1
</pre>

<p>Send, receive, and manipulate packets with <a href="/blog/2011/may/23/introduction-scapy/">Scapy</a>:</p>
<pre>
Welcome to Scapy (2.2.0)
&gt;&gt;&gt; <strong>sr1(IP(dst='8.8.8.8')/UDP()/DNS(rd=1,qd=DNSQR(qname='packetlife.net')))</strong>
Begin emission:
Finished to send 1 packets.
.*
Received 2 packets, got 1 answers, remaining 0 packets
&lt;IP  version=4L ihl=5L tos=0x20 len=76 id=34777 flags= frag=0L ttl=41 proto=udp chksum=0xcd5e src=8.8.8.8 dst=192.168.0.67 options=[] |&lt;UDP  sport=domain dport=domain len=56 chksum=0x230 |&lt;DNS  id=0 qr=1L opcode=QUERY aa=0L tc=0L rd=1L ra=1L z=0L rcode=ok qdcount=1 ancount=1 nscount=0 arcount=0 qd=&lt;DNSQR  qname='packetlife.net.' qtype=A qclass=IN |&gt; an=&lt;DNSRR  rrname='packetlife.net.' type=A rclass=IN ttl=3153 rdata='173.255.200.61' |&gt; ns=None ar=None |&gt;&gt;&gt;
</pre>

<p>Dump the routing table from a Nexus 9000 <a href="http://keepingitclassless.net/2014/02/cisco-aci-nexus-9000-nxapi/">using NX-API</a> (code courtesy of <a href="http://twitter.com/mierdin">Matt Oswalt</a>):</p>
<pre>
&gt;&gt;&gt; <strong>from nxapi_utils import *</strong>
&gt;&gt;&gt; <strong>thisNXAPI = NXAPI()</strong>
&gt;&gt;&gt; <strong>thisNXAPI.set_target_url('http://10.1.1.1/ins')</strong>
&gt;&gt;&gt; <strong>thisNXAPI.set_username('admin')</strong>
&gt;&gt;&gt; <strong>thisNXAPI.set_password('cisco')</strong>
&gt;&gt;&gt; <strong>thisNXAPI.set_msg_type('cli_show')</strong>
&gt;&gt;&gt; <strong>thisNXAPI.set_cmd('show ip route')</strong>
&gt;&gt;&gt; <strong>returnData = thisNXAPI.send_req()</strong>
&gt;&gt;&gt; <strong>print returnData</strong>
&lt;?xml version="1.0"?&gt;
&lt;ins_api&gt;
    &lt;type&gt;cli_show&lt;/type&gt;
    &lt;version&gt;0.1&lt;/version&gt;
    &lt;sid&gt;eoc&lt;/sid&gt;
    &lt;outputs&gt;
...
</pre>

<p>Write a quick-and-dirty syslog daemon:</p>
<pre>
&gt;&gt;&gt; <strong>from socket import *</strong>
&gt;&gt;&gt; <strong>syslogd = socket(AF_INET, SOCK_DGRAM)</strong>
&gt;&gt;&gt; <strong>syslogd.bind(('localhost', 514))</strong>
&gt;&gt;&gt; <strong>while True:</strong>
...     <strong>message, source = syslogd.recvfrom(2048)</strong>
...     <strong>print "[%s] %s" % (source[0], message)</strong>
... 
[10.10.8.1] %SYSTEM-0-ENVIRONMENTAL: Supervisor 0 has caught fire. Dispersing halon...
</pre>

<p>...and <strong>lots</strong> more! Whenever you encounter an operational challenge, the odds are good are that Python can help solve it.</p>
<h2>Where can I learn Python?</h2>
<p><strong><a href="http://www.learnpython.org/">LearnPython.org</a></strong> is the go-to resource for many newbies. The tutorials include a live Python shell directly within your web browser, so you can get started without even needing to install anything.</p>
<p><strong><a href="http://learnpythonthehardway.org/">Learn Python the Hard Way</a></strong> is a great starting place for people with zero previous experience writing code. Worthwhile if you stick with it through the more monotonous parts.</p>
<p><strong><a href="http://www.codecademy.com/tracks/python">Codecademy</a></strong> provides a very immersive, experimentation-driven approach with lots of practical examples.</p>
<p>These are just a few of numerous resources available. <a href="https://wiki.python.org/moin/BeginnersGuide/Download">Download Python today</a> and see what you can do! </p></div>
</div></body></html>