<html><body><div><p>This will add a field named “captcha” to MyForm. However, nothing else
need be done: the decorator takes care of adding the field and ensuring
it is always updated when a new form instance is created, as well as
validating bound forms and providing useful error messages for users.</p>
<div id="advanced-use">
<h3>Advanced Use</h3>
<div id="configuring-simplecaptcha">
<h4>Configuring simplecaptcha</h4>
<p>simplecaptcha, as its name implies, is simple. It works straight out of
the box without any need to add any configuration in your Django
project. However, if you do want to modify its behavior, you can do that
as well, by simply adding any of these settings to your Django project’s
settings module:</p>
<ul>
<li><tt>SIMPLECAPTCHA_DURATION</tt>: Defines how long (in seconds) a captcha
is considered valid for; default: 300 seconds (5 minutes)</li>
<li><tt>SIMPLECAPTCHA_ITERATIONS</tt>: The cryptographic signature passed to
the client and used to validate the captcha is hashed multiple times
for security. You can change the number of iterations used with this
setting; default: 1024</li>
<li><tt>SIMPLECAPTCHA_DEFAULT_FIELD_NAME</tt>: The default field name used in
the <tt>captcha</tt> decorator; default: ‘captcha’</li>
</ul>
</div>
<div id="controlling-field-order">
<h4>Controlling Field Order</h4>
<p>The decorator will always add the captcha field to the end of your form.
If this is undesirable for any reason, you can of course always manually
render your form fields as <a href="https://docs.djangoproject.com/en/1.7/topics/forms/#rendering-fields-manually" rel="nofollow">decribed in the Django
docs</a>.</p>
<p>Another option is to simply add a “dummy” field to your form with the
same name as that used by the decorator. The decorator would then
effectively replace the field in your form:</p>
<pre><span class="kn">from</span> <span class="nn">simplecaptcha</span> <span class="kn">import</span> <span class="n">captcha</span>
<span class="kn">from</span> <span class="nn">simplecaptcha.fields</span> <span class="kn">import</span> <span class="n">CaptchaField</span>

<span class="nd">@captcha</span>
<span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">field1</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">field2</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
    <span class="n">captcha</span> <span class="o">=</span> <span class="n">CaptchaField</span><span class="p">()</span>
    <span class="n">field3</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">()</span>
</pre>
<p>(NOTE: Since the decorator will <em>replace</em> the field of the same name, it
does not matter what type of field you specify when using this approach.
Because of the way Django processes Form classes, however, you <em>must</em>
specify a Django field, or else Django will ignore it and you won’t get
the desired effect.)</p>
<p>Now when you render MyForm in your template, fields will be ordered
precisely as they are in your source: field1, then field2, followed by
captcha, and finally field3.</p>
</div>
<div id="specifying-the-field-name">
<h4>Specifying the Field Name</h4>
<p>If for any reason you don’t want your captcha field to be named
“captcha”, and you don’t want to set
<tt>SIMPLECAPTCHA_DEFAULT_FIELD_NAME</tt> in your Django settings module, you
can use the <tt>@captchaform</tt> decorator and supply the desired field name
as an argument, like so:</p>
<pre><span class="kn">from</span> <span class="nn">simplecaptcha</span> <span class="kn">import</span> <span class="n">captchaform</span>

<span class="nd">@captchaform</span><span class="p">(</span><span class="s1">'securitycheck'</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="k">pass</span>
</pre>
<p>This will add a field named “securitycheck” to MyForm that will contain
the form’s captcha.</p>
<p>If you wish to do this and use the method in the previous section to
specify the field order, note that the “dummy” field you add must match
the name you passed into the decorator.</p>
</div>
<div id="multiple-captcha-fields">
<h4>Multiple Captcha Fields</h4>
<p>It is possible to add multiple captcha fields to your form simply by
decorating your form multiple times. However note that field order in
your form will be the <em>reverse</em> of the order that you write your
decorators:</p>
<pre><span class="kn">from</span> <span class="nn">simplecaptcha</span> <span class="kn">import</span> <span class="n">captchaform</span>

<span class="nd">@captchaform</span><span class="p">(</span><span class="s1">'captcha'</span><span class="p">)</span>
<span class="nd">@captchaform</span><span class="p">(</span><span class="s1">'captcha2'</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="k">pass</span>
</pre>
<p>In this example, when MyForm is rendered in your template, “captcha2”
will appear <em>first</em>, and then “captcha”. This is a consequence of how
decorators in Python are processed; you simply have to remember that the
last captcha decorated into your form is the first one that will appear
in your templates.</p>
</div>
</div>
</div></body></html>