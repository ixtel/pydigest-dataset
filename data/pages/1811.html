<html><body><div><div class="post-body entry-content" id="post-body-1188700100012330406" itemprop="description articleBody"><p>
They say that if you sat an infinite number of monkeys with an infinite number of typewriters, then they would write the complete works of Shakespeare. This is known as the </p><a href="http://en.wikipedia.org/wiki/Infinite_monkey_theorem">Infinite Monkey Theorem</a><p>. I always feel it would be nice to try the actual experiment out. I mean all these monkeys with typewriters would be kinda cool.

</p>

<p>
However wouldn't it be easier to get one monkey and one typewriter and give him an infinite amount of time to see how he goes?
</p><p>
Although in theory it sounds simpler, getting hold of even a single monkey is not that easy.
</p><p>
But what if we created a simulated monkey in Python? Now we are talking! That would be easy, and unlike a real monkey our simulated one could work all day and all night. No food required.
</p><p>
Sounds like a plan for a blog post.
</p><p>
However I want to give our virtual monkey a chance. If he managed to type the complete works of Shakespeare without worrying about punctuation, we would be happy right? Same goes for capital letters, let's just ignore them for now. We want to give him a fighting chance of completing his task.
</p><p>
To help you get started I have taken a text file of the complete works of Shakespeare, and removed all punctuation and made all letters small. If any of you are thinking I did that by hand, think again. Python is your friend for automating tasks like that.
</p><p>
Because the complete works is a large tome, I have also included a similar file, with just Hamlet. You can choose which one you want your monkey to attempt!
</p><p>
As with all my blog posts I will give you the complete program first of all. Have a read through this and see how much of it you understand. Try and figure out those sections you donâ€™t. I will then go through the program a line at a time explaining it in more detail.

</p><pre><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">string</span>

<span class="k">def</span> <span class="nf">typeShakespeare</span><span class="p">(</span><span class="n">scriptRead</span><span class="p">):</span>
    <span class="n">monkeyTyped</span> <span class="o">=</span> <span class="s">''</span>
    <span class="k">while</span> <span class="n">monkeyTyped</span> <span class="o">==</span> <span class="s">''</span> <span class="ow">or</span> <span class="n">scriptRead</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">monkeyTyped</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">monkeyTyped</span> <span class="o">=</span> <span class="n">monkeyTyped</span> <span class="o">+</span> <span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_lowercase</span> <span class="o">+</span> <span class="s">' '</span><span class="p">))</span>
            
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">monkeyTyped</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

<span class="n">script</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'Shakespeare.txt'</span><span class="p">,</span><span class="s">'r'</span><span class="p">)</span> <span class="c"># opens the files</span>
<span class="n">scriptRead</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">script</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">keyPresses</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">monkeyTyped</span> <span class="o">=</span> <span class="s">''</span>
<span class="k">while</span> <span>len</span>(<span class="n">monkeyTyped)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">scriptRead</span><span class="p">):</span> <span class="c">## infinite loop ... unless the monkey does it!</span>

    <span class="n">monkeyTyped</span> <span class="o">=</span> <span class="n">typeShakespeare</span><span class="p">(</span><span class="n">scriptRead</span><span class="p">)</span>
    <span class="n">keyPresses</span> <span class="o">=</span> <span class="n">keyPresses</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">monkeyTyped</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">monkeyTyped</span><span class="p">)</span> <span class="o">&gt;=</span><span class="mi">5</span><span class="p">:</span>
        <span class="n">monkeyTyped</span> <span class="o">=</span> <span class="s">"'"</span><span class="o">+</span><span class="n">monkeyTyped</span><span class="o">+</span><span class="s">"'"</span>
        <span class="k">print</span> <span class="n">monkeyTyped</span><span class="p">,</span> <span class="n">keyPresses</span>
    <span class="k">if</span> <span class="n">keyPresses</span><span class="o">%</span><span class="mi">10000</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">keyPresses</span></pre>
<p>
The first thing we do is import a couple of libraries we will use. We want our monkey to type some random letters, so we will call on the random library. We will also be needing strings (many letters joined together) so we should import the string library as well.

</p><pre><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">string</span></pre>
<p>
There is now a function called typeShakespeare(). It will make sense to explain this when we call it, so lets skip it for now.
</p><p>
The aim of the program is to work out if the monkey has managed to type the complete works of Shakespeare, or Hamlet, if thats what you prefer. To do this we need to judge his effort against the finished script. Therefore we will open the file with the completed text.

</p><pre><span class="n">script</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'Shakespeare.txt'</span><span class="p">,</span><span class="s">'r'</span><span class="p">)</span> <span class="c"># opens the files</span></pre>
<p>
Change this to read Hamlet.txt if you want to use Hamlet instead.
</p><p>
We then store the text into a variable called scriptRead. To do this we use the .read() command on the script we have opened. Finally as we have the data stored in memory we will close the script.

</p><pre><span class="n">scriptRead</span> <span class="o">=</span> <span class="n">script</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">script</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></pre>
<p>
I have now created a variable called keyPresses and set this to 0. There are two reasons for this. When he has typed a word worth reporting I want to know how many key presses it took before he got there. I also want to keep an eye on my monkey, to make sure he is working. Therefore every time he has pressed a key a set number of times I will report back.

</p><pre><span class="n">keyPresses</span> <span class="o">=</span> <span class="mi">0</span></pre>
<p>
We also need to know what the monkey has typed and to keep an eye on that. Every-time he types a letter we will check he is on the right path. If he isn't, we will get him to start from scratch. We will create a blank string to store his effort in.

</p><pre><span class="n">monkeyTyped</span> <span class="o">=</span> <span class="s">''</span></pre>
<p>
Now we enter into our main loop which is a while loop.
</p><p>
We want the monkey to keep typing until he has finished the job. If he hasn't then we will make him keep going. The first line of our while loop checks to see if what is stored in monkeyTyped is as long as the file we are looking into him typing. As we are checking the monkey is on the right track every letter, should he type something the length of the complete works of Shakespeare, then we will know he has achieved his goal.

</p><pre><span class="k">while</span> <span>len</span>(<span class="n">monkeyTyped)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">scriptRead</span><span class="p">):</span> <span class="c">## infinite loop ... unless the monkey does it!</span></pre>
<p>
<span class="c"><br/></span></p><p>
Now we call the function typeShakespeare we skipped over earlier and we store the result into monkeyTyped.

</p><pre>    <span class="n">monkeyTyped</span> <span class="o">=</span> <span class="n">typeShakespeare</span><span class="p">(</span><span class="n">scriptRead</span><span class="p">)</span></pre>
<p>
I think it would be a good time to now go and write that function. It is in this function that the monkey does most of his work. He tries to type the complete works of Shakespeare. We will check his work every time he presses a key. If he is on the right track, we will let him continue. If what he has typed is not in Shakespeare, we will return his best efforts to our main program.
</p><p>
So directly below import string we should type

</p><pre><span class="k">def</span> <span class="nf">typeShakespeare</span><span class="p">(</span><span class="n">scriptRead</span><span class="p">):</span></pre>
<p>
This defines our function and tells us we are passing scriptRead into it.
</p><p>
As I mentioned we are going to be in this function while the monkey types something. The first thing we need to do is to set monkeyTyped to = ''

</p><pre>    <span class="n">monkeyTyped</span> <span class="o">=</span> <span class="s">''</span></pre>
<p>
Now we enter a new while loop. This one needs to keep looping while the monkey has typed something which appears in Shakespeare.

</p><pre>    <span class="k">while</span> <span class="n">monkeyTyped</span> <span class="o">==</span> <span class="s">''</span> <span class="ow">or</span> <span class="n">scriptRead</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">monkeyTyped</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span></pre>
<p>
We do this by using scriptRead.count(monkeyTyped) &gt;= 1 What does that even mean? Well we take the complete works of Shakespeare stored in scriptRead, and we do a count of how many times the thing in the brackets appears. If we put monkeyTyped into the brackets then it will count how many times monkeyCount appeared in scriptRead. We only need it to appear once but if it appears more than once, then that is ok as well. We check this with the greater than or equal to symbol &gt;=.
</p><p>
But the line also has monkeyTyped = ''. Why is that? Well when we start off this while loop the monkey has not typed anything, as we have set the variable to = '' , which means an empty string. This would mean our while loop would be false straight away, and our monkey would never start typing.
</p><p>
To get around this we us an or condition. We check that monkeyTyped is '' or scriptRead.count(monkeyTyped) &gt;= 1
</p><p>
The next line is the line which does the actual typing.

</p><pre><span class="n">monkeyTyped</span> <span class="o">=</span> <span class="n">monkeyTyped</span> <span class="o">+</span> <span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_lowercase</span> <span class="o">+</span> <span class="s">' '</span><span class="p">))</span></pre>
<p>
We take monkeyTyped and we add the result of (random.choice(string.ascii_lowercase + ' ')) onto it and save the result as monkeyTyped.
</p><p>
What on earth is (random.choice(string.ascii_lowercase + ' ')) ?
</p><p>
Well we want to simulate the monkey typing on a keyboard. We have already said to make it easy we will not ask for punctuation, although we should ask him for a space between words. Thats not too much to ask is it? We also said we will not be too concerned about it being in capital letters.
</p><p>
So random.choice picks something from inside the brackets by random selection. So what have we put in the brackets. The first thing is
</p><p>
string.ascii_lowercase
</p><p>
This creates a string of the lower case ascii letters. i.e
</p><p>
abcdefghijklmnopqrstuvwxyz
</p><p>
We also add onto the end of that a space using ' '
</p><p>
Now remember this has a space between the two speech-marks. This is different from when we are creating a blank string, which doesn't have a space.
</p><p>
Once he has typed a word, the loop will start again and check if what has been typed is in the complete works. If it is he will continue. If not he will go to the else statement.

</p><pre>    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">monkeyTyped</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></pre>
<p>
Here we return what he has typed. However remember we only get to this place if what is typed is not in the complete works. That's no use to us! We will need to remove the last letter of what he typed, as it was that last letter we know to have made perfect Shakespeare prose into gibberish.
</p><p>
So we return monkeyTyped[:-1] which returns everything up to the last letter but not the last letter.
</p><p>
Ok back to where we were in the main program.
</p><p>
Remember we said we would keep track of the number of key presses? Well lets update that now. We know the monkey has just typed a word, so it is easy to determine the size of that word and increase keyPresses by that amount. Oh but the monkey typed a letter which turned his prose into gibberish. We should add that on as well as we want our count to be accurate!

</p><pre>    <span class="n">keyPresses</span> <span class="o">=</span> <span class="n">keyPresses</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">monkeyTyped</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span></pre>
<p>
Whats the point of doing something if no one knows about it? Mmmmm... this blog post is perhaps not the best place to get into a philosophical debate. We want our monkey to report back if he has typed some Shakespeare. However we don't want him reporting back if he has just typed one letter do we? Â No one likes a show off!
</p><p>
We only want to be informed if the length of what he has typed is greater than 5, although you can vary this depending on how much chat you want with your monkey.

</p><pre>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">monkeyTyped</span><span class="p">)</span> <span class="o">&gt;=</span><span class="mi">5</span><span class="p">:</span></pre>
<p>
As we are reporting the monkeys best effort in that round of typing, and his efforts are going to be set back to the beginning, it doesn't matter if we play around with our monkeyTyped variable to help make his reporting a little nicer. Lets first of all add speech marks onto his typing, so we can see what he has typed.

</p><pre>        <span class="n">monkeyTyped</span> <span class="o">=</span> <span class="s">"'"</span><span class="o">+</span><span class="n">monkeyTyped</span><span class="o">+</span><span class="s">"'"</span></pre>
<p>
Pay careful attention to those speech marks in there. Each side is a single quote ' surrounded by double quotes "
</p><p>
Now we will print what the monkey has typed, and the number of keyPresses he has made in total so far.

</p><pre>        <span class="k">print</span> <span class="n">monkeyTyped</span><span class="p">,</span> <span class="n">keyPresses</span></pre>
<p>
Finally if you are only checking for big words the monkey may be away working some time before he gets to report back. I think its wise to check in on him every so often.

</p><pre>    <span class="k">if</span> <span class="n">keyPresses</span><span class="o">%</span><span class="mi">10000</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">keyPresses</span></pre>
<p>
This line checks to see if the number of key presses he has made is a multiple of 10,000. The % checks if keyPresses / 10,000 has no remainder i.e. it is a multiple of 10,000. If it is then it will print the number of key-presses made. This only works if the key-presses are an exact multiple of 10,000. There will be times when the monkey is in the middle of a word when this happen, so it will not report back. However it reports enough to make you realise the monkey is still working and not fallen asleep.
</p><p>
Remember to press F5 to save and run your program.
</p><p>
That is the end of the program. All you need now it to download the complete works of Shakespeare or just Hamlet if thats what you want to use. Use the links below to do that.

</p><a href="https://drive.google.com/file/d/0B87aGq7vEpoFUkVRUHJObVNyNGs/view?usp=sharing" target="_blank">Download complete works of Shakespeare</a>

<a href="https://drive.google.com/file/d/0B87aGq7vEpoFb08zeUNISmlrZEk/view?usp=sharing" target="_blank">Download Hamlet</a>
<p>
Well I hope you have enjoyed this simple program, and that it helped you learn a little bit of Python! Good luck to all your Monkeys typing away, let me know how they get on!
</p><p>
I have created a version of this program which tweets the monkeys' progress. Check out the twitter feedÂ </p><a href="https://twitter.com/TheMonkeyBard" target="_blank">@TheMonkeyBard</a><p>.
</p><p/>
</div>
</div></body></html>