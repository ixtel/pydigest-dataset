<html><body><div><p>Various logging-related utilities for Django projects.</p>








<p>Various logging-related utilities for Django projects. For now, it provides
a LoggingMiddleware class and an EventLogger class.</p>
<div id="loggingmiddleware">
<h2>LoggingMiddleware</h2>
<p>LoggingMiddleware is middleware class for Django, that logs extra
request-related information. To use it in your Django projects, add it to
your <tt>MIDDLEWARE_CLASSES</tt> setting:</p>
<pre>MIDDLEWARE_CLASSES = (
    ...
    'django_logutils.middleware.LoggingMiddleware',
    ...
)
</pre>
<p>The extra information consists of:</p>
<ul>
<li>event (default: ‘request’)</li>
<li>remote ip address: the remote ip address of the user doing the request.</li>
<li>user email: the email address of the requesting user, if available</li>
<li>request method: post or get</li>
<li>request url path</li>
<li>response status code</li>
<li>content length of the response body</li>
<li>request time</li>
</ul>
<p>N.B.: event can be overriden by using the <tt>LOGUTILS_LOGGING_MIDDLEWARE_EVENT</tt>
setting in your project.</p>
<p>The log message itself is a string composed of the remote ip address, the user
email, the request method, the request url, the status code, the content
length of the body and the request time. Additionally, a dictionary with the
log items are added as an extra keyword argument when sending a logging
statement.</p>
<p>If settings.DEBUG is True or the request time is more than 1 second, two
additional parameters are added to the logging dictionary: <tt>nr_queries</tt> that
represents the number of queries executed during the request-response cycle
and <tt>sql_time</tt> that represents the time it took to execute those queries.
Slow requests are also raised to a loglevel of <tt>WARNING</tt>.</p>
<p>N.B.: the time threshold for slow requests can be overriden by using the
<tt>LOGUTILS_REQUEST_TIME_THRESHOLD</tt> setting in your project.</p>
</div>
<div id="eventlogger">
<h2>EventLogger</h2>
<p>The EventLogger class makes it easy to create dictionary-based logging
statements, that can be used by log processors like Logstash. Log events can be
used to track metrics and/or to create visualisations.</p>
<p>Here’s an example of how you can use it:</p>
<pre>&gt;&gt;&gt; from django_logutils.utils import EventLogger
&gt;&gt;&gt; log_event = EventLogger('my_logger')
&gt;&gt;&gt; log_event('my_event', {'action': 'push_button'})
</pre>
</div>
<div id="development">
<h2>Development</h2>
<p>Install the test requirements:</p>
<pre>$ pip install -r requirements/test.txt
</pre>
<p>Run the tests to check everything is fine:</p>
<pre>$ make test
</pre>
<p>To run the tests and opening the coverage html in your browser:</p>
<pre>$ make coverage
</pre>
<p>To run flake8 and pylint, do:</p>
<pre>$ make lint
</pre>
<p>To generate the documentation, do:</p>
<pre>$ make docs
</pre>
</div>
</div></body></html>