<html><body><div><table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="file-arithmetic-py-L1" class="blob-num js-line-number" data-line-number="1"/>
        <td id="file-arithmetic-py-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L2" class="blob-num js-line-number" data-line-number="2"/>
        <td id="file-arithmetic-py-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-s">This implements a fairly simple expression language via a Pratt-style parser.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L3" class="blob-num js-line-number" data-line-number="3"/>
        <td id="file-arithmetic-py-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L4" class="blob-num js-line-number" data-line-number="4"/>
        <td id="file-arithmetic-py-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-s">The language supports fairly standard floating point literals, such as:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L5" class="blob-num js-line-number" data-line-number="5"/>
        <td id="file-arithmetic-py-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L6" class="blob-num js-line-number" data-line-number="6"/>
        <td id="file-arithmetic-py-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    5</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L7" class="blob-num js-line-number" data-line-number="7"/>
        <td id="file-arithmetic-py-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    1.09</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L8" class="blob-num js-line-number" data-line-number="8"/>
        <td id="file-arithmetic-py-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    .16</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L9" class="blob-num js-line-number" data-line-number="9"/>
        <td id="file-arithmetic-py-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L10" class="blob-num js-line-number" data-line-number="10"/>
        <td id="file-arithmetic-py-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    12e7</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L11" class="blob-num js-line-number" data-line-number="11"/>
        <td id="file-arithmetic-py-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    12.34e-45</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L12" class="blob-num js-line-number" data-line-number="12"/>
        <td id="file-arithmetic-py-LC12" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    .34e-2</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L13" class="blob-num js-line-number" data-line-number="13"/>
        <td id="file-arithmetic-py-LC13" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L14" class="blob-num js-line-number" data-line-number="14"/>
        <td id="file-arithmetic-py-LC14" class="blob-code blob-code-inner js-file-line"><span class="pl-s">It also supports basic arithmetic operators (which obey arithmetic precedence):</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L15" class="blob-num js-line-number" data-line-number="15"/>
        <td id="file-arithmetic-py-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L16" class="blob-num js-line-number" data-line-number="16"/>
        <td id="file-arithmetic-py-LC16" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    + (addition)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L17" class="blob-num js-line-number" data-line-number="17"/>
        <td id="file-arithmetic-py-LC17" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    - (subtraction)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L18" class="blob-num js-line-number" data-line-number="18"/>
        <td id="file-arithmetic-py-LC18" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    * (multiplication)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L19" class="blob-num js-line-number" data-line-number="19"/>
        <td id="file-arithmetic-py-LC19" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    / (division)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L20" class="blob-num js-line-number" data-line-number="20"/>
        <td id="file-arithmetic-py-LC20" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    ^ (exponentiation)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L21" class="blob-num js-line-number" data-line-number="21"/>
        <td id="file-arithmetic-py-LC21" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    % (modulus)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L22" class="blob-num js-line-number" data-line-number="22"/>
        <td id="file-arithmetic-py-LC22" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L23" class="blob-num js-line-number" data-line-number="23"/>
        <td id="file-arithmetic-py-LC23" class="blob-code blob-code-inner js-file-line"><span class="pl-s">Parentheses are also supported.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L24" class="blob-num js-line-number" data-line-number="24"/>
        <td id="file-arithmetic-py-LC24" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L25" class="blob-num js-line-number" data-line-number="25"/>
        <td id="file-arithmetic-py-LC25" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    1 + 2 * 3   -- evaluates to 7</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L26" class="blob-num js-line-number" data-line-number="26"/>
        <td id="file-arithmetic-py-LC26" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    (1 + 2) * 3 -- evaluates to 9</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L27" class="blob-num js-line-number" data-line-number="27"/>
        <td id="file-arithmetic-py-LC27" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L28" class="blob-num js-line-number" data-line-number="28"/>
        <td id="file-arithmetic-py-LC28" class="blob-code blob-code-inner js-file-line"><span class="pl-s">Support for simple functions is also included, which take single and multiple</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L29" class="blob-num js-line-number" data-line-number="29"/>
        <td id="file-arithmetic-py-LC29" class="blob-code blob-code-inner js-file-line"><span class="pl-s">arguments:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L30" class="blob-num js-line-number" data-line-number="30"/>
        <td id="file-arithmetic-py-LC30" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L31" class="blob-num js-line-number" data-line-number="31"/>
        <td id="file-arithmetic-py-LC31" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    sin 3.1415926   -- Functions can be called like in ML...</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L32" class="blob-num js-line-number" data-line-number="32"/>
        <td id="file-arithmetic-py-LC32" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    sin(3.1415926)  -- ... or with parenthesis delimiting the argument.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L33" class="blob-num js-line-number" data-line-number="33"/>
        <td id="file-arithmetic-py-LC33" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    logN(64, 8)     -- Multiple arguments are handled via tuples.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L34" class="blob-num js-line-number" data-line-number="34"/>
        <td id="file-arithmetic-py-LC34" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L35" class="blob-num js-line-number" data-line-number="35"/>
        <td id="file-arithmetic-py-LC35" class="blob-code blob-code-inner js-file-line"><span class="pl-s">Finally, the language also supports tuples (which are typically used for function</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L36" class="blob-num js-line-number" data-line-number="36"/>
        <td id="file-arithmetic-py-LC36" class="blob-code blob-code-inner js-file-line"><span class="pl-s">arguments, as in the logN example above):</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L37" class="blob-num js-line-number" data-line-number="37"/>
        <td id="file-arithmetic-py-LC37" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L38" class="blob-num js-line-number" data-line-number="38"/>
        <td id="file-arithmetic-py-LC38" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    1,2         -- Denotes a tuple with two elements, 1 and 2</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L39" class="blob-num js-line-number" data-line-number="39"/>
        <td id="file-arithmetic-py-LC39" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    1+2, 3+4    -- Tuples bind looser than arithmetic operators, so this...</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L40" class="blob-num js-line-number" data-line-number="40"/>
        <td id="file-arithmetic-py-LC40" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    (1+2),(3+4) -- ... and this are equivalent</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L41" class="blob-num js-line-number" data-line-number="41"/>
        <td id="file-arithmetic-py-LC41" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L42" class="blob-num js-line-number" data-line-number="42"/>
        <td id="file-arithmetic-py-LC42" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    (1,)        -- Singleton tuples are also allowed, as in Python</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L43" class="blob-num js-line-number" data-line-number="43"/>
        <td id="file-arithmetic-py-LC43" class="blob-code blob-code-inner js-file-line"><span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L44" class="blob-num js-line-number" data-line-number="44"/>
        <td id="file-arithmetic-py-LC44" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> collections <span class="pl-k">import</span> deque, namedtuple</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L45" class="blob-num js-line-number" data-line-number="45"/>
        <td id="file-arithmetic-py-LC45" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> enum <span class="pl-k">import</span> Enum</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L46" class="blob-num js-line-number" data-line-number="46"/>
        <td id="file-arithmetic-py-LC46" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> functools <span class="pl-k">import</span> singledispatch</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L47" class="blob-num js-line-number" data-line-number="47"/>
        <td id="file-arithmetic-py-LC47" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> math</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L48" class="blob-num js-line-number" data-line-number="48"/>
        <td id="file-arithmetic-py-LC48" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> operator</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L49" class="blob-num js-line-number" data-line-number="49"/>
        <td id="file-arithmetic-py-LC49" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> random</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L50" class="blob-num js-line-number" data-line-number="50"/>
        <td id="file-arithmetic-py-LC50" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> string</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L51" class="blob-num js-line-number" data-line-number="51"/>
        <td id="file-arithmetic-py-LC51" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L52" class="blob-num js-line-number" data-line-number="52"/>
        <td id="file-arithmetic-py-LC52" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">Operators</span>(<span class="pl-e">Enum</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L53" class="blob-num js-line-number" data-line-number="53"/>
        <td id="file-arithmetic-py-LC53" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L54" class="blob-num js-line-number" data-line-number="54"/>
        <td id="file-arithmetic-py-LC54" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Different types of operators which can be applied to expressions.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L55" class="blob-num js-line-number" data-line-number="55"/>
        <td id="file-arithmetic-py-LC55" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L56" class="blob-num js-line-number" data-line-number="56"/>
        <td id="file-arithmetic-py-LC56" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">ADD</span> <span class="pl-k">=</span> <span class="pl-c1">1</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L57" class="blob-num js-line-number" data-line-number="57"/>
        <td id="file-arithmetic-py-LC57" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">SUB</span> <span class="pl-k">=</span> <span class="pl-c1">2</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L58" class="blob-num js-line-number" data-line-number="58"/>
        <td id="file-arithmetic-py-LC58" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">MUL</span> <span class="pl-k">=</span> <span class="pl-c1">3</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L59" class="blob-num js-line-number" data-line-number="59"/>
        <td id="file-arithmetic-py-LC59" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">DIV</span> <span class="pl-k">=</span> <span class="pl-c1">4</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L60" class="blob-num js-line-number" data-line-number="60"/>
        <td id="file-arithmetic-py-LC60" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">MOD</span> <span class="pl-k">=</span> <span class="pl-c1">5</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L61" class="blob-num js-line-number" data-line-number="61"/>
        <td id="file-arithmetic-py-LC61" class="blob-code blob-code-inner js-file-line">    <span class="pl-c1">POW</span> <span class="pl-k">=</span> <span class="pl-c1">6</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L62" class="blob-num js-line-number" data-line-number="62"/>
        <td id="file-arithmetic-py-LC62" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L63" class="blob-num js-line-number" data-line-number="63"/>
        <td id="file-arithmetic-py-LC63" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># The glyph used to represent each particular operator in expressions</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L64" class="blob-num js-line-number" data-line-number="64"/>
        <td id="file-arithmetic-py-LC64" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">SYMBOL_TO_OPERATOR</span> <span class="pl-k">=</span> {</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L65" class="blob-num js-line-number" data-line-number="65"/>
        <td id="file-arithmetic-py-LC65" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>+<span class="pl-pds">'</span></span>: Operators.<span class="pl-c1">ADD</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L66" class="blob-num js-line-number" data-line-number="66"/>
        <td id="file-arithmetic-py-LC66" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>-<span class="pl-pds">'</span></span>: Operators.<span class="pl-c1">SUB</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L67" class="blob-num js-line-number" data-line-number="67"/>
        <td id="file-arithmetic-py-LC67" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>*<span class="pl-pds">'</span></span>: Operators.<span class="pl-c1">MUL</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L68" class="blob-num js-line-number" data-line-number="68"/>
        <td id="file-arithmetic-py-LC68" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>: Operators.<span class="pl-c1">DIV</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L69" class="blob-num js-line-number" data-line-number="69"/>
        <td id="file-arithmetic-py-LC69" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>%<span class="pl-pds">'</span></span>: Operators.<span class="pl-c1">MOD</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L70" class="blob-num js-line-number" data-line-number="70"/>
        <td id="file-arithmetic-py-LC70" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>^<span class="pl-pds">'</span></span>: Operators.<span class="pl-c1">POW</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L71" class="blob-num js-line-number" data-line-number="71"/>
        <td id="file-arithmetic-py-LC71" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L72" class="blob-num js-line-number" data-line-number="72"/>
        <td id="file-arithmetic-py-LC72" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L73" class="blob-num js-line-number" data-line-number="73"/>
        <td id="file-arithmetic-py-LC73" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># The functions used to evaluate each type of arithmetic expression</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L74" class="blob-num js-line-number" data-line-number="74"/>
        <td id="file-arithmetic-py-LC74" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">OPERATOR_EVAL</span> <span class="pl-k">=</span> {</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L75" class="blob-num js-line-number" data-line-number="75"/>
        <td id="file-arithmetic-py-LC75" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">ADD</span>: operator.add,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L76" class="blob-num js-line-number" data-line-number="76"/>
        <td id="file-arithmetic-py-LC76" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">SUB</span>: operator.sub,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L77" class="blob-num js-line-number" data-line-number="77"/>
        <td id="file-arithmetic-py-LC77" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">MUL</span>: operator.mul,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L78" class="blob-num js-line-number" data-line-number="78"/>
        <td id="file-arithmetic-py-LC78" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">DIV</span>: operator.truediv,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L79" class="blob-num js-line-number" data-line-number="79"/>
        <td id="file-arithmetic-py-LC79" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">MOD</span>: operator.mod,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L80" class="blob-num js-line-number" data-line-number="80"/>
        <td id="file-arithmetic-py-LC80" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">POW</span>: operator.pow,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L81" class="blob-num js-line-number" data-line-number="81"/>
        <td id="file-arithmetic-py-LC81" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L82" class="blob-num js-line-number" data-line-number="82"/>
        <td id="file-arithmetic-py-LC82" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L83" class="blob-num js-line-number" data-line-number="83"/>
        <td id="file-arithmetic-py-LC83" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Maps functions in the evaluator to Python built-in functions. Note that</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L84" class="blob-num js-line-number" data-line-number="84"/>
        <td id="file-arithmetic-py-LC84" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># functions with &gt;1 argument must be unpacked explicitly, since the evaluator</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L85" class="blob-num js-line-number" data-line-number="85"/>
        <td id="file-arithmetic-py-LC85" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># uses tuples for providing multiple arguments.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L86" class="blob-num js-line-number" data-line-number="86"/>
        <td id="file-arithmetic-py-LC86" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">FUNC_TABLE</span> <span class="pl-k">=</span> {</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L87" class="blob-num js-line-number" data-line-number="87"/>
        <td id="file-arithmetic-py-LC87" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>sin<span class="pl-pds">'</span></span>: math.sin,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L88" class="blob-num js-line-number" data-line-number="88"/>
        <td id="file-arithmetic-py-LC88" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>cos<span class="pl-pds">'</span></span>: math.cos,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L89" class="blob-num js-line-number" data-line-number="89"/>
        <td id="file-arithmetic-py-LC89" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>tan<span class="pl-pds">'</span></span>: math.tan,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L90" class="blob-num js-line-number" data-line-number="90"/>
        <td id="file-arithmetic-py-LC90" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>acos<span class="pl-pds">'</span></span>: math.acos,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L91" class="blob-num js-line-number" data-line-number="91"/>
        <td id="file-arithmetic-py-LC91" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>asin<span class="pl-pds">'</span></span>: math.asin,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L92" class="blob-num js-line-number" data-line-number="92"/>
        <td id="file-arithmetic-py-LC92" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>atan<span class="pl-pds">'</span></span>: math.atan,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L93" class="blob-num js-line-number" data-line-number="93"/>
        <td id="file-arithmetic-py-LC93" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L94" class="blob-num js-line-number" data-line-number="94"/>
        <td id="file-arithmetic-py-LC94" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>radians<span class="pl-pds">'</span></span>: math.radians,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L95" class="blob-num js-line-number" data-line-number="95"/>
        <td id="file-arithmetic-py-LC95" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>degrees<span class="pl-pds">'</span></span>: math.degrees,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L96" class="blob-num js-line-number" data-line-number="96"/>
        <td id="file-arithmetic-py-LC96" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L97" class="blob-num js-line-number" data-line-number="97"/>
        <td id="file-arithmetic-py-LC97" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>ceil<span class="pl-pds">'</span></span>: math.ceil,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L98" class="blob-num js-line-number" data-line-number="98"/>
        <td id="file-arithmetic-py-LC98" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>floor<span class="pl-pds">'</span></span>: math.floor,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L99" class="blob-num js-line-number" data-line-number="99"/>
        <td id="file-arithmetic-py-LC99" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>trunc<span class="pl-pds">'</span></span>: math.trunc,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L100" class="blob-num js-line-number" data-line-number="100"/>
        <td id="file-arithmetic-py-LC100" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L101" class="blob-num js-line-number" data-line-number="101"/>
        <td id="file-arithmetic-py-LC101" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>factorial<span class="pl-pds">'</span></span>: math.factorial,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L102" class="blob-num js-line-number" data-line-number="102"/>
        <td id="file-arithmetic-py-LC102" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L103" class="blob-num js-line-number" data-line-number="103"/>
        <td id="file-arithmetic-py-LC103" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>exp<span class="pl-pds">'</span></span>: math.exp,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L104" class="blob-num js-line-number" data-line-number="104"/>
        <td id="file-arithmetic-py-LC104" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>gamma<span class="pl-pds">'</span></span>: math.gamma,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L105" class="blob-num js-line-number" data-line-number="105"/>
        <td id="file-arithmetic-py-LC105" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>log<span class="pl-pds">'</span></span>: math.log,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L106" class="blob-num js-line-number" data-line-number="106"/>
        <td id="file-arithmetic-py-LC106" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>log10<span class="pl-pds">'</span></span>: math.log10,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L107" class="blob-num js-line-number" data-line-number="107"/>
        <td id="file-arithmetic-py-LC107" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>log2<span class="pl-pds">'</span></span>: math.log2,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L108" class="blob-num js-line-number" data-line-number="108"/>
        <td id="file-arithmetic-py-LC108" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># logN(value, base)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L109" class="blob-num js-line-number" data-line-number="109"/>
        <td id="file-arithmetic-py-LC109" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>logN<span class="pl-pds">'</span></span>: <span class="pl-k">lambda</span> <span class="pl-smi">x</span>: math.log(x[<span class="pl-c1">0</span>], x[<span class="pl-c1">1</span>]),</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L110" class="blob-num js-line-number" data-line-number="110"/>
        <td id="file-arithmetic-py-LC110" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>sqrt<span class="pl-pds">'</span></span>: math.sqrt,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L111" class="blob-num js-line-number" data-line-number="111"/>
        <td id="file-arithmetic-py-LC111" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L112" class="blob-num js-line-number" data-line-number="112"/>
        <td id="file-arithmetic-py-LC112" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># random(min, max)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L113" class="blob-num js-line-number" data-line-number="113"/>
        <td id="file-arithmetic-py-LC113" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>random<span class="pl-pds">'</span></span>: <span class="pl-k">lambda</span> <span class="pl-smi">x</span>: random.uniform(x[<span class="pl-c1">0</span>], x[<span class="pl-c1">1</span>]),</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L114" class="blob-num js-line-number" data-line-number="114"/>
        <td id="file-arithmetic-py-LC114" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># normal(mean, sigma)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L115" class="blob-num js-line-number" data-line-number="115"/>
        <td id="file-arithmetic-py-LC115" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>normal<span class="pl-pds">'</span></span>: <span class="pl-k">lambda</span> <span class="pl-smi">x</span>: random.normalvariate(x[<span class="pl-c1">0</span>], x[<span class="pl-c1">1</span>]),</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L116" class="blob-num js-line-number" data-line-number="116"/>
        <td id="file-arithmetic-py-LC116" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L117" class="blob-num js-line-number" data-line-number="117"/>
        <td id="file-arithmetic-py-LC117" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">'</span>print<span class="pl-pds">'</span></span>: <span class="pl-k">lambda</span> <span class="pl-smi">x</span>: (<span class="pl-c1">print</span>(x), x)[<span class="pl-c1">1</span>]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L118" class="blob-num js-line-number" data-line-number="118"/>
        <td id="file-arithmetic-py-LC118" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L119" class="blob-num js-line-number" data-line-number="119"/>
        <td id="file-arithmetic-py-LC119" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L120" class="blob-num js-line-number" data-line-number="120"/>
        <td id="file-arithmetic-py-LC120" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># The precedence table for binary operators.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L121" class="blob-num js-line-number" data-line-number="121"/>
        <td id="file-arithmetic-py-LC121" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">PRECEDENCE_TABLE</span> <span class="pl-k">=</span> {</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L122" class="blob-num js-line-number" data-line-number="122"/>
        <td id="file-arithmetic-py-LC122" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">ADD</span>: <span class="pl-c1">3</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L123" class="blob-num js-line-number" data-line-number="123"/>
        <td id="file-arithmetic-py-LC123" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">SUB</span>: <span class="pl-c1">3</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L124" class="blob-num js-line-number" data-line-number="124"/>
        <td id="file-arithmetic-py-LC124" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L125" class="blob-num js-line-number" data-line-number="125"/>
        <td id="file-arithmetic-py-LC125" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">MUL</span>: <span class="pl-c1">4</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L126" class="blob-num js-line-number" data-line-number="126"/>
        <td id="file-arithmetic-py-LC126" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">DIV</span>: <span class="pl-c1">4</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L127" class="blob-num js-line-number" data-line-number="127"/>
        <td id="file-arithmetic-py-LC127" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L128" class="blob-num js-line-number" data-line-number="128"/>
        <td id="file-arithmetic-py-LC128" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">MOD</span>: <span class="pl-c1">5</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L129" class="blob-num js-line-number" data-line-number="129"/>
        <td id="file-arithmetic-py-LC129" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">POW</span>: <span class="pl-c1">6</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L130" class="blob-num js-line-number" data-line-number="130"/>
        <td id="file-arithmetic-py-LC130" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L131" class="blob-num js-line-number" data-line-number="131"/>
        <td id="file-arithmetic-py-LC131" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L132" class="blob-num js-line-number" data-line-number="132"/>
        <td id="file-arithmetic-py-LC132" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># The prefix table for unary operators.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L133" class="blob-num js-line-number" data-line-number="133"/>
        <td id="file-arithmetic-py-LC133" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">PREFIX_PRECEDENCE_TABLE</span> <span class="pl-k">=</span> {</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L134" class="blob-num js-line-number" data-line-number="134"/>
        <td id="file-arithmetic-py-LC134" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">ADD</span>: <span class="pl-c1">11</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L135" class="blob-num js-line-number" data-line-number="135"/>
        <td id="file-arithmetic-py-LC135" class="blob-code blob-code-inner js-file-line">    Operators.<span class="pl-c1">SUB</span>: <span class="pl-c1">11</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L136" class="blob-num js-line-number" data-line-number="136"/>
        <td id="file-arithmetic-py-LC136" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L137" class="blob-num js-line-number" data-line-number="137"/>
        <td id="file-arithmetic-py-LC137" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L138" class="blob-num js-line-number" data-line-number="138"/>
        <td id="file-arithmetic-py-LC138" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># All the different tokens, which are produced by the lexer and consumed by the</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L139" class="blob-num js-line-number" data-line-number="139"/>
        <td id="file-arithmetic-py-LC139" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># parser.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L140" class="blob-num js-line-number" data-line-number="140"/>
        <td id="file-arithmetic-py-LC140" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L141" class="blob-num js-line-number" data-line-number="141"/>
        <td id="file-arithmetic-py-LC141" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># In general, each of these have three primary pieces of functionality, implemented</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L142" class="blob-num js-line-number" data-line-number="142"/>
        <td id="file-arithmetic-py-LC142" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># by the singledispatch generic functions that follow:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L143" class="blob-num js-line-number" data-line-number="143"/>
        <td id="file-arithmetic-py-LC143" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L144" class="blob-num js-line-number" data-line-number="144"/>
        <td id="file-arithmetic-py-LC144" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># - a particular precedence (higher means tighter binding)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L145" class="blob-num js-line-number" data-line-number="145"/>
        <td id="file-arithmetic-py-LC145" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># - a prefix mode, which is called when the token appears at the beginning</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L146" class="blob-num js-line-number" data-line-number="146"/>
        <td id="file-arithmetic-py-LC146" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   of an expression.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L147" class="blob-num js-line-number" data-line-number="147"/>
        <td id="file-arithmetic-py-LC147" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># - an infix mode, which is called when the token appears in the middle of an</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L148" class="blob-num js-line-number" data-line-number="148"/>
        <td id="file-arithmetic-py-LC148" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   expression</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L149" class="blob-num js-line-number" data-line-number="149"/>
        <td id="file-arithmetic-py-LC149" class="blob-code blob-code-inner js-file-line">NameToken <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>NameToken<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L150" class="blob-num js-line-number" data-line-number="150"/>
        <td id="file-arithmetic-py-LC150" class="blob-code blob-code-inner js-file-line">NumberToken <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>NumberToken<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>value<span class="pl-pds">'</span></span>])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L151" class="blob-num js-line-number" data-line-number="151"/>
        <td id="file-arithmetic-py-LC151" class="blob-code blob-code-inner js-file-line">BeginGroup <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>BeginGroup<span class="pl-pds">'</span></span>, [])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L152" class="blob-num js-line-number" data-line-number="152"/>
        <td id="file-arithmetic-py-LC152" class="blob-code blob-code-inner js-file-line">EndGroup <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>EndGroup<span class="pl-pds">'</span></span>, [])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L153" class="blob-num js-line-number" data-line-number="153"/>
        <td id="file-arithmetic-py-LC153" class="blob-code blob-code-inner js-file-line">CommaToken <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>CommaToken<span class="pl-pds">'</span></span>, [])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L154" class="blob-num js-line-number" data-line-number="154"/>
        <td id="file-arithmetic-py-LC154" class="blob-code blob-code-inner js-file-line">OperatorToken <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>OperatorToken<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>operator<span class="pl-pds">'</span></span>])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L155" class="blob-num js-line-number" data-line-number="155"/>
        <td id="file-arithmetic-py-LC155" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L156" class="blob-num js-line-number" data-line-number="156"/>
        <td id="file-arithmetic-py-LC156" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># All the types of expressions which the parser can generate. The only useful</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L157" class="blob-num js-line-number" data-line-number="157"/>
        <td id="file-arithmetic-py-LC157" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># things you can do with these is evaluate them.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L158" class="blob-num js-line-number" data-line-number="158"/>
        <td id="file-arithmetic-py-LC158" class="blob-code blob-code-inner js-file-line">NumberExpression <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>NumberExpression<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>value<span class="pl-pds">'</span></span>])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L159" class="blob-num js-line-number" data-line-number="159"/>
        <td id="file-arithmetic-py-LC159" class="blob-code blob-code-inner js-file-line">CallExpression <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>CallExpression<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>func<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>arg<span class="pl-pds">'</span></span>])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L160" class="blob-num js-line-number" data-line-number="160"/>
        <td id="file-arithmetic-py-LC160" class="blob-code blob-code-inner js-file-line">BinaryExpression <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>BinaryExpression<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>left<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>right<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>func<span class="pl-pds">'</span></span>])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L161" class="blob-num js-line-number" data-line-number="161"/>
        <td id="file-arithmetic-py-LC161" class="blob-code blob-code-inner js-file-line">Tuple <span class="pl-k">=</span> namedtuple(<span class="pl-s"><span class="pl-pds">'</span>Tuple<span class="pl-pds">'</span></span>, [<span class="pl-s"><span class="pl-pds">'</span>elems<span class="pl-pds">'</span></span>])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L162" class="blob-num js-line-number" data-line-number="162"/>
        <td id="file-arithmetic-py-LC162" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L163" class="blob-num js-line-number" data-line-number="163"/>
        <td id="file-arithmetic-py-LC163" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Precedences for all other kinds of tokens, which are not operators</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L164" class="blob-num js-line-number" data-line-number="164"/>
        <td id="file-arithmetic-py-LC164" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">TOKEN_PRECEDENCE_TABLE</span> <span class="pl-k">=</span> {</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L165" class="blob-num js-line-number" data-line-number="165"/>
        <td id="file-arithmetic-py-LC165" class="blob-code blob-code-inner js-file-line">    NameToken: <span class="pl-c1">9</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L166" class="blob-num js-line-number" data-line-number="166"/>
        <td id="file-arithmetic-py-LC166" class="blob-code blob-code-inner js-file-line">    BeginGroup: <span class="pl-c1">10</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L167" class="blob-num js-line-number" data-line-number="167"/>
        <td id="file-arithmetic-py-LC167" class="blob-code blob-code-inner js-file-line">    EndGroup: <span class="pl-c1">1</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L168" class="blob-num js-line-number" data-line-number="168"/>
        <td id="file-arithmetic-py-LC168" class="blob-code blob-code-inner js-file-line">    CommaToken: <span class="pl-c1">2</span>,</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L169" class="blob-num js-line-number" data-line-number="169"/>
        <td id="file-arithmetic-py-LC169" class="blob-code blob-code-inner js-file-line">}</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L170" class="blob-num js-line-number" data-line-number="170"/>
        <td id="file-arithmetic-py-LC170" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L171" class="blob-num js-line-number" data-line-number="171"/>
        <td id="file-arithmetic-py-LC171" class="blob-code blob-code-inner js-file-line"><span class="pl-c">##### Indenting Pretty Printer #####</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L172" class="blob-num js-line-number" data-line-number="172"/>
        <td id="file-arithmetic-py-LC172" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">pretty</span>(<span class="pl-smi">expr</span>, <span class="pl-smi">indent</span><span class="pl-k">=</span><span class="pl-c1">0</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L173" class="blob-num js-line-number" data-line-number="173"/>
        <td id="file-arithmetic-py-LC173" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L174" class="blob-num js-line-number" data-line-number="174"/>
        <td id="file-arithmetic-py-LC174" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Pretty formats an expression, indenting all the sub-expressions relative to</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L175" class="blob-num js-line-number" data-line-number="175"/>
        <td id="file-arithmetic-py-LC175" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    their parents. Useful for debugging, or for visualizing the parser's results.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L176" class="blob-num js-line-number" data-line-number="176"/>
        <td id="file-arithmetic-py-LC176" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L177" class="blob-num js-line-number" data-line-number="177"/>
        <td id="file-arithmetic-py-LC177" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">isinstance</span>(expr, <span class="pl-c1">tuple</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L178" class="blob-num js-line-number" data-line-number="178"/>
        <td id="file-arithmetic-py-LC178" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> (indent <span class="pl-k">*</span> <span class="pl-s"><span class="pl-pds">'</span>  <span class="pl-pds">'</span></span>) <span class="pl-k">+</span> <span class="pl-c1">str</span>(expr) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\n</span><span class="pl-pds">'</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L179" class="blob-num js-line-number" data-line-number="179"/>
        <td id="file-arithmetic-py-LC179" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L180" class="blob-num js-line-number" data-line-number="180"/>
        <td id="file-arithmetic-py-LC180" class="blob-code blob-code-inner js-file-line">    buffer <span class="pl-k">=</span> (indent <span class="pl-k">*</span> <span class="pl-s"><span class="pl-pds">'</span>  <span class="pl-pds">'</span></span>) <span class="pl-k">+</span> <span class="pl-c1">str</span>(<span class="pl-c1">type</span>(expr).<span class="pl-c1">__name__</span>) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\n</span><span class="pl-pds">'</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L181" class="blob-num js-line-number" data-line-number="181"/>
        <td id="file-arithmetic-py-LC181" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> <span class="pl-c1">isinstance</span>(expr, Tuple):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L182" class="blob-num js-line-number" data-line-number="182"/>
        <td id="file-arithmetic-py-LC182" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># Tuples contain sequences, and must be handled specially, by extracting</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L183" class="blob-num js-line-number" data-line-number="183"/>
        <td id="file-arithmetic-py-LC183" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># the internal expression (so the loop iterates it correctly)</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L184" class="blob-num js-line-number" data-line-number="184"/>
        <td id="file-arithmetic-py-LC184" class="blob-code blob-code-inner js-file-line">        expr <span class="pl-k">=</span> expr.elems</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L185" class="blob-num js-line-number" data-line-number="185"/>
        <td id="file-arithmetic-py-LC185" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L186" class="blob-num js-line-number" data-line-number="186"/>
        <td id="file-arithmetic-py-LC186" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> <span class="pl-c1">tuple</span>(expr):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L187" class="blob-num js-line-number" data-line-number="187"/>
        <td id="file-arithmetic-py-LC187" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">for</span> child <span class="pl-k">in</span> <span class="pl-c1">tuple</span>(expr):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L188" class="blob-num js-line-number" data-line-number="188"/>
        <td id="file-arithmetic-py-LC188" class="blob-code blob-code-inner js-file-line">            buffer <span class="pl-k">+=</span>  pretty(child, indent<span class="pl-k">+</span><span class="pl-c1">1</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L189" class="blob-num js-line-number" data-line-number="189"/>
        <td id="file-arithmetic-py-LC189" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> buffer</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L190" class="blob-num js-line-number" data-line-number="190"/>
        <td id="file-arithmetic-py-LC190" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L191" class="blob-num js-line-number" data-line-number="191"/>
        <td id="file-arithmetic-py-LC191" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> buffer</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L192" class="blob-num js-line-number" data-line-number="192"/>
        <td id="file-arithmetic-py-LC192" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L193" class="blob-num js-line-number" data-line-number="193"/>
        <td id="file-arithmetic-py-LC193" class="blob-code blob-code-inner js-file-line"><span class="pl-c">##### Token Precedence #####</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L194" class="blob-num js-line-number" data-line-number="194"/>
        <td id="file-arithmetic-py-LC194" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># These are responsible for figuring out the precedence of each type of token.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L195" class="blob-num js-line-number" data-line-number="195"/>
        <td id="file-arithmetic-py-LC195" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L196" class="blob-num js-line-number" data-line-number="196"/>
        <td id="file-arithmetic-py-LC196" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Note that each token can discriminate based upon whether it is being used</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L197" class="blob-num js-line-number" data-line-number="197"/>
        <td id="file-arithmetic-py-LC197" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># in the prefix position or the infix position, although most of them don't</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L198" class="blob-num js-line-number" data-line-number="198"/>
        <td id="file-arithmetic-py-LC198" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># care. Only the + and - operators change their precedence depending upon</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L199" class="blob-num js-line-number" data-line-number="199"/>
        <td id="file-arithmetic-py-LC199" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># their position.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L200" class="blob-num js-line-number" data-line-number="200"/>
        <td id="file-arithmetic-py-LC200" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L201" class="blob-num js-line-number" data-line-number="201"/>
        <td id="file-arithmetic-py-LC201" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@singledispatch</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L202" class="blob-num js-line-number" data-line-number="202"/>
        <td id="file-arithmetic-py-LC202" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">token_precedence</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">prefix</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L203" class="blob-num js-line-number" data-line-number="203"/>
        <td id="file-arithmetic-py-LC203" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L204" class="blob-num js-line-number" data-line-number="204"/>
        <td id="file-arithmetic-py-LC204" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Gets the precedence of a token.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L205" class="blob-num js-line-number" data-line-number="205"/>
        <td id="file-arithmetic-py-LC205" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L206" class="blob-num js-line-number" data-line-number="206"/>
        <td id="file-arithmetic-py-LC206" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Note that prefix is True when the operator is in the prefix position,</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L207" class="blob-num js-line-number" data-line-number="207"/>
        <td id="file-arithmetic-py-LC207" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    otherwise it is False when the operator is in the infix position.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L208" class="blob-num js-line-number" data-line-number="208"/>
        <td id="file-arithmetic-py-LC208" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L209" class="blob-num js-line-number" data-line-number="209"/>
        <td id="file-arithmetic-py-LC209" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-c1">TOKEN_PRECEDENCE_TABLE</span>[<span class="pl-c1">type</span>(tok)]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L210" class="blob-num js-line-number" data-line-number="210"/>
        <td id="file-arithmetic-py-LC210" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L211" class="blob-num js-line-number" data-line-number="211"/>
        <td id="file-arithmetic-py-LC211" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@token_precedence.register</span>(OperatorToken)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L212" class="blob-num js-line-number" data-line-number="212"/>
        <td id="file-arithmetic-py-LC212" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">prefix</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L213" class="blob-num js-line-number" data-line-number="213"/>
        <td id="file-arithmetic-py-LC213" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> prefix:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L214" class="blob-num js-line-number" data-line-number="214"/>
        <td id="file-arithmetic-py-LC214" class="blob-code blob-code-inner js-file-line">        precedence <span class="pl-k">=</span> <span class="pl-c1">PREFIX_PRECEDENCE_TABLE</span>.get(tok.operator, <span class="pl-c1">None</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L215" class="blob-num js-line-number" data-line-number="215"/>
        <td id="file-arithmetic-py-LC215" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> tok <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L216" class="blob-num js-line-number" data-line-number="216"/>
        <td id="file-arithmetic-py-LC216" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-c1">{}</span> is not a valid prefix operator<span class="pl-pds">'</span></span>.format(tok))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L217" class="blob-num js-line-number" data-line-number="217"/>
        <td id="file-arithmetic-py-LC217" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> precedence</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L218" class="blob-num js-line-number" data-line-number="218"/>
        <td id="file-arithmetic-py-LC218" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L219" class="blob-num js-line-number" data-line-number="219"/>
        <td id="file-arithmetic-py-LC219" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">PRECEDENCE_TABLE</span>[tok.operator]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L220" class="blob-num js-line-number" data-line-number="220"/>
        <td id="file-arithmetic-py-LC220" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L221" class="blob-num js-line-number" data-line-number="221"/>
        <td id="file-arithmetic-py-LC221" class="blob-code blob-code-inner js-file-line"><span class="pl-c">##### Prefix Operations #####</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L222" class="blob-num js-line-number" data-line-number="222"/>
        <td id="file-arithmetic-py-LC222" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># These take each different type of token, and generate expressions which result</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L223" class="blob-num js-line-number" data-line-number="223"/>
        <td id="file-arithmetic-py-LC223" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># from the token being used as a prefix operator. For example, +1 would call the</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L224" class="blob-num js-line-number" data-line-number="224"/>
        <td id="file-arithmetic-py-LC224" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># prefix operation of +.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L225" class="blob-num js-line-number" data-line-number="225"/>
        <td id="file-arithmetic-py-LC225" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L226" class="blob-num js-line-number" data-line-number="226"/>
        <td id="file-arithmetic-py-LC226" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># Note that the number tokens, although they are not operators, need this since</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L227" class="blob-num js-line-number" data-line-number="227"/>
        <td id="file-arithmetic-py-LC227" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># they *do* appear in the prefix position.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L228" class="blob-num js-line-number" data-line-number="228"/>
        <td id="file-arithmetic-py-LC228" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L229" class="blob-num js-line-number" data-line-number="229"/>
        <td id="file-arithmetic-py-LC229" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># In summary:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L230" class="blob-num js-line-number" data-line-number="230"/>
        <td id="file-arithmetic-py-LC230" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># - NameToken in the prefix position indicates a call to a function, and consumes</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L231" class="blob-num js-line-number" data-line-number="231"/>
        <td id="file-arithmetic-py-LC231" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   its one argument (&gt;1 arguments are represented by tuples).</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L232" class="blob-num js-line-number" data-line-number="232"/>
        <td id="file-arithmetic-py-LC232" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># - BeginGroup searches for the matching EndGroup, and returns the expression</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L233" class="blob-num js-line-number" data-line-number="233"/>
        <td id="file-arithmetic-py-LC233" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   between them. Groups are not actually a type of expression, but a way of</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L234" class="blob-num js-line-number" data-line-number="234"/>
        <td id="file-arithmetic-py-LC234" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   delimiting precedence.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L235" class="blob-num js-line-number" data-line-number="235"/>
        <td id="file-arithmetic-py-LC235" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># - OperatorToken can be either a + or a -, both of which act as signs to the</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L236" class="blob-num js-line-number" data-line-number="236"/>
        <td id="file-arithmetic-py-LC236" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   expressions following them. Other operators are syntax errors.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L237" class="blob-num js-line-number" data-line-number="237"/>
        <td id="file-arithmetic-py-LC237" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L238" class="blob-num js-line-number" data-line-number="238"/>
        <td id="file-arithmetic-py-LC238" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@singledispatch</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L239" class="blob-num js-line-number" data-line-number="239"/>
        <td id="file-arithmetic-py-LC239" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">parse_prefix</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">parser</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L240" class="blob-num js-line-number" data-line-number="240"/>
        <td id="file-arithmetic-py-LC240" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L241" class="blob-num js-line-number" data-line-number="241"/>
        <td id="file-arithmetic-py-LC241" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Returns the expression which results when using the given token as a prefix</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L242" class="blob-num js-line-number" data-line-number="242"/>
        <td id="file-arithmetic-py-LC242" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    operator.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L243" class="blob-num js-line-number" data-line-number="243"/>
        <td id="file-arithmetic-py-LC243" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L244" class="blob-num js-line-number" data-line-number="244"/>
        <td id="file-arithmetic-py-LC244" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># By default, a token cannot serve as a prefix operator.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L245" class="blob-num js-line-number" data-line-number="245"/>
        <td id="file-arithmetic-py-LC245" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Expecting prefix operator, but <span class="pl-c1">{}</span> was found<span class="pl-pds">'</span></span>.format(tok))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L246" class="blob-num js-line-number" data-line-number="246"/>
        <td id="file-arithmetic-py-LC246" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L247" class="blob-num js-line-number" data-line-number="247"/>
        <td id="file-arithmetic-py-LC247" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@parse_prefix.register</span>(NameToken)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L248" class="blob-num js-line-number" data-line-number="248"/>
        <td id="file-arithmetic-py-LC248" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">parser</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L249" class="blob-num js-line-number" data-line-number="249"/>
        <td id="file-arithmetic-py-LC249" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># Names indicate function calls, which must be postfixed by a single value</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L250" class="blob-num js-line-number" data-line-number="250"/>
        <td id="file-arithmetic-py-LC250" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># (multiple arguments are passed in via tuples).</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L251" class="blob-num js-line-number" data-line-number="251"/>
        <td id="file-arithmetic-py-LC251" class="blob-code blob-code-inner js-file-line">    arg <span class="pl-k">=</span> parser.parse(<span class="pl-c1">TOKEN_PRECEDENCE_TABLE</span>[NameToken])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L252" class="blob-num js-line-number" data-line-number="252"/>
        <td id="file-arithmetic-py-LC252" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> arg <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L253" class="blob-num js-line-number" data-line-number="253"/>
        <td id="file-arithmetic-py-LC253" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Hit end of expression while reading arguments to <span class="pl-c1">{}</span><span class="pl-pds">'</span></span>.format(tok))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L254" class="blob-num js-line-number" data-line-number="254"/>
        <td id="file-arithmetic-py-LC254" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L255" class="blob-num js-line-number" data-line-number="255"/>
        <td id="file-arithmetic-py-LC255" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> CallExpression(tok.name, arg)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L256" class="blob-num js-line-number" data-line-number="256"/>
        <td id="file-arithmetic-py-LC256" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L257" class="blob-num js-line-number" data-line-number="257"/>
        <td id="file-arithmetic-py-LC257" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@parse_prefix.register</span>(NumberToken)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L258" class="blob-num js-line-number" data-line-number="258"/>
        <td id="file-arithmetic-py-LC258" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">parser</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L259" class="blob-num js-line-number" data-line-number="259"/>
        <td id="file-arithmetic-py-LC259" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> NumberExpression(tok.value)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L260" class="blob-num js-line-number" data-line-number="260"/>
        <td id="file-arithmetic-py-LC260" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L261" class="blob-num js-line-number" data-line-number="261"/>
        <td id="file-arithmetic-py-LC261" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@parse_prefix.register</span>(BeginGroup)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L262" class="blob-num js-line-number" data-line-number="262"/>
        <td id="file-arithmetic-py-LC262" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">parser</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L263" class="blob-num js-line-number" data-line-number="263"/>
        <td id="file-arithmetic-py-LC263" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># (by a 'group', I mean a pair of parenthesis. The group (1+2) is a group</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L264" class="blob-num js-line-number" data-line-number="264"/>
        <td id="file-arithmetic-py-LC264" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># which contains the expression 1+2).</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L265" class="blob-num js-line-number" data-line-number="265"/>
        <td id="file-arithmetic-py-LC265" class="blob-code blob-code-inner js-file-line">    expr <span class="pl-k">=</span> parser.parse(<span class="pl-c1">TOKEN_PRECEDENCE_TABLE</span>[EndGroup])</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L266" class="blob-num js-line-number" data-line-number="266"/>
        <td id="file-arithmetic-py-LC266" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> expr <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L267" class="blob-num js-line-number" data-line-number="267"/>
        <td id="file-arithmetic-py-LC267" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Hit end of expression while reading sub-expression inside (<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L268" class="blob-num js-line-number" data-line-number="268"/>
        <td id="file-arithmetic-py-LC268" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L269" class="blob-num js-line-number" data-line-number="269"/>
        <td id="file-arithmetic-py-LC269" class="blob-code blob-code-inner js-file-line">    end_paren <span class="pl-k">=</span> parser.next_token()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L270" class="blob-num js-line-number" data-line-number="270"/>
        <td id="file-arithmetic-py-LC270" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> end_paren <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L271" class="blob-num js-line-number" data-line-number="271"/>
        <td id="file-arithmetic-py-LC271" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Hit end of expression while waiting for )<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L272" class="blob-num js-line-number" data-line-number="272"/>
        <td id="file-arithmetic-py-LC272" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">elif</span> <span class="pl-k">not</span> <span class="pl-c1">isinstance</span>(end_paren, EndGroup):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L273" class="blob-num js-line-number" data-line-number="273"/>
        <td id="file-arithmetic-py-LC273" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Got a <span class="pl-c1">{}</span> when a ) was expected<span class="pl-pds">'</span></span>.format(end_paren))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L274" class="blob-num js-line-number" data-line-number="274"/>
        <td id="file-arithmetic-py-LC274" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> expr</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L275" class="blob-num js-line-number" data-line-number="275"/>
        <td id="file-arithmetic-py-LC275" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L276" class="blob-num js-line-number" data-line-number="276"/>
        <td id="file-arithmetic-py-LC276" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@parse_prefix.register</span>(OperatorToken)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L277" class="blob-num js-line-number" data-line-number="277"/>
        <td id="file-arithmetic-py-LC277" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">parser</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L278" class="blob-num js-line-number" data-line-number="278"/>
        <td id="file-arithmetic-py-LC278" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> tok.operator <span class="pl-k">is</span> Operators.<span class="pl-c1">ADD</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L279" class="blob-num js-line-number" data-line-number="279"/>
        <td id="file-arithmetic-py-LC279" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># Unary positive, such as +3</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L280" class="blob-num js-line-number" data-line-number="280"/>
        <td id="file-arithmetic-py-LC280" class="blob-code blob-code-inner js-file-line">        operand <span class="pl-k">=</span> parser.parse(token_precedence(tok, <span class="pl-v">prefix</span><span class="pl-k">=</span><span class="pl-c1">True</span>))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L281" class="blob-num js-line-number" data-line-number="281"/>
        <td id="file-arithmetic-py-LC281" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> operand <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L282" class="blob-num js-line-number" data-line-number="282"/>
        <td id="file-arithmetic-py-LC282" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Expected value after +<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L283" class="blob-num js-line-number" data-line-number="283"/>
        <td id="file-arithmetic-py-LC283" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L284" class="blob-num js-line-number" data-line-number="284"/>
        <td id="file-arithmetic-py-LC284" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> operand</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L285" class="blob-num js-line-number" data-line-number="285"/>
        <td id="file-arithmetic-py-LC285" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">elif</span> tok.operator <span class="pl-k">is</span> Operators.<span class="pl-c1">SUB</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L286" class="blob-num js-line-number" data-line-number="286"/>
        <td id="file-arithmetic-py-LC286" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># Unary negative, such as -5</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L287" class="blob-num js-line-number" data-line-number="287"/>
        <td id="file-arithmetic-py-LC287" class="blob-code blob-code-inner js-file-line">        operand <span class="pl-k">=</span> parser.parse(token_precedence(tok, <span class="pl-v">prefix</span><span class="pl-k">=</span><span class="pl-c1">True</span>))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L288" class="blob-num js-line-number" data-line-number="288"/>
        <td id="file-arithmetic-py-LC288" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> operand <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L289" class="blob-num js-line-number" data-line-number="289"/>
        <td id="file-arithmetic-py-LC289" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Expected value after -<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L290" class="blob-num js-line-number" data-line-number="290"/>
        <td id="file-arithmetic-py-LC290" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L291" class="blob-num js-line-number" data-line-number="291"/>
        <td id="file-arithmetic-py-LC291" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> MulExpression(NumberExpression(<span class="pl-k">-</span><span class="pl-c1">1</span>), operand)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L292" class="blob-num js-line-number" data-line-number="292"/>
        <td id="file-arithmetic-py-LC292" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L293" class="blob-num js-line-number" data-line-number="293"/>
        <td id="file-arithmetic-py-LC293" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-c1">{}</span> is not a prefix operator<span class="pl-pds">'</span></span>.format(tok))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L294" class="blob-num js-line-number" data-line-number="294"/>
        <td id="file-arithmetic-py-LC294" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L295" class="blob-num js-line-number" data-line-number="295"/>
        <td id="file-arithmetic-py-LC295" class="blob-code blob-code-inner js-file-line"><span class="pl-c">##### Infix Operations #####</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L296" class="blob-num js-line-number" data-line-number="296"/>
        <td id="file-arithmetic-py-LC296" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># The following functions take the token given, as well as the expression to the</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L297" class="blob-num js-line-number" data-line-number="297"/>
        <td id="file-arithmetic-py-LC297" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># left of the token, and return a new expression which results from using the</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L298" class="blob-num js-line-number" data-line-number="298"/>
        <td id="file-arithmetic-py-LC298" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># token as an infix operator.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L299" class="blob-num js-line-number" data-line-number="299"/>
        <td id="file-arithmetic-py-LC299" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L300" class="blob-num js-line-number" data-line-number="300"/>
        <td id="file-arithmetic-py-LC300" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># There are only two types of infix operators:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L301" class="blob-num js-line-number" data-line-number="301"/>
        <td id="file-arithmetic-py-LC301" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># - CommaToken is used to construct tuples, in basically the same way as Python.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L302" class="blob-num js-line-number" data-line-number="302"/>
        <td id="file-arithmetic-py-LC302" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   It reads further CommaTokens, until it hits either and ending parenthesis or</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L303" class="blob-num js-line-number" data-line-number="303"/>
        <td id="file-arithmetic-py-LC303" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   a non-comma (caring about the ending parenthesis allows singleton tuples to</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L304" class="blob-num js-line-number" data-line-number="304"/>
        <td id="file-arithmetic-py-LC304" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#   be represented by (1,) as they are in Python).</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L305" class="blob-num js-line-number" data-line-number="305"/>
        <td id="file-arithmetic-py-LC305" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># - OperatorToken is used to construct binary expressions.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L306" class="blob-num js-line-number" data-line-number="306"/>
        <td id="file-arithmetic-py-LC306" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L307" class="blob-num js-line-number" data-line-number="307"/>
        <td id="file-arithmetic-py-LC307" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@singledispatch</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L308" class="blob-num js-line-number" data-line-number="308"/>
        <td id="file-arithmetic-py-LC308" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">parse_infix</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">left</span>, <span class="pl-smi">parser</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L309" class="blob-num js-line-number" data-line-number="309"/>
        <td id="file-arithmetic-py-LC309" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L310" class="blob-num js-line-number" data-line-number="310"/>
        <td id="file-arithmetic-py-LC310" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Returns the expression which results when using the given token as an infix</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L311" class="blob-num js-line-number" data-line-number="311"/>
        <td id="file-arithmetic-py-LC311" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    operator.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L312" class="blob-num js-line-number" data-line-number="312"/>
        <td id="file-arithmetic-py-LC312" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L313" class="blob-num js-line-number" data-line-number="313"/>
        <td id="file-arithmetic-py-LC313" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># By default, a token cannot serve as an infix operator.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L314" class="blob-num js-line-number" data-line-number="314"/>
        <td id="file-arithmetic-py-LC314" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Expecting infix operator, but <span class="pl-c1">{}</span> was found<span class="pl-pds">'</span></span>.format(tok))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L315" class="blob-num js-line-number" data-line-number="315"/>
        <td id="file-arithmetic-py-LC315" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L316" class="blob-num js-line-number" data-line-number="316"/>
        <td id="file-arithmetic-py-LC316" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@parse_infix.register</span>(CommaToken)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L317" class="blob-num js-line-number" data-line-number="317"/>
        <td id="file-arithmetic-py-LC317" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">left</span>, <span class="pl-smi">parser</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L318" class="blob-num js-line-number" data-line-number="318"/>
        <td id="file-arithmetic-py-LC318" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># Tuples are chained operators, so we have to go until we find no more commas.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L319" class="blob-num js-line-number" data-line-number="319"/>
        <td id="file-arithmetic-py-LC319" class="blob-code blob-code-inner js-file-line">    items <span class="pl-k">=</span> [left]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L320" class="blob-num js-line-number" data-line-number="320"/>
        <td id="file-arithmetic-py-LC320" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">while</span> <span class="pl-c1">True</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L321" class="blob-num js-line-number" data-line-number="321"/>
        <td id="file-arithmetic-py-LC321" class="blob-code blob-code-inner js-file-line">        next_token <span class="pl-k">=</span> parser.peek_token()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L322" class="blob-num js-line-number" data-line-number="322"/>
        <td id="file-arithmetic-py-LC322" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-c1">isinstance</span>(next_token, EndGroup):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L323" class="blob-num js-line-number" data-line-number="323"/>
        <td id="file-arithmetic-py-LC323" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># Like Python, if we hit a ), then stop constructing a tuple - this</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L324" class="blob-num js-line-number" data-line-number="324"/>
        <td id="file-arithmetic-py-LC324" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># lets us get one-element tuples by using (1,).</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L325" class="blob-num js-line-number" data-line-number="325"/>
        <td id="file-arithmetic-py-LC325" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> Tuple(items)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L326" class="blob-num js-line-number" data-line-number="326"/>
        <td id="file-arithmetic-py-LC326" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L327" class="blob-num js-line-number" data-line-number="327"/>
        <td id="file-arithmetic-py-LC327" class="blob-code blob-code-inner js-file-line">        element <span class="pl-k">=</span> parser.parse(token_precedence(tok, <span class="pl-v">prefix</span><span class="pl-k">=</span><span class="pl-c1">False</span>))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L328" class="blob-num js-line-number" data-line-number="328"/>
        <td id="file-arithmetic-py-LC328" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> element <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L329" class="blob-num js-line-number" data-line-number="329"/>
        <td id="file-arithmetic-py-LC329" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> Tuple(items)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L330" class="blob-num js-line-number" data-line-number="330"/>
        <td id="file-arithmetic-py-LC330" class="blob-code blob-code-inner js-file-line">        items.append(element)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L331" class="blob-num js-line-number" data-line-number="331"/>
        <td id="file-arithmetic-py-LC331" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L332" class="blob-num js-line-number" data-line-number="332"/>
        <td id="file-arithmetic-py-LC332" class="blob-code blob-code-inner js-file-line">        trailing <span class="pl-k">=</span> parser.peek_token()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L333" class="blob-num js-line-number" data-line-number="333"/>
        <td id="file-arithmetic-py-LC333" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> trailing <span class="pl-k">is</span> <span class="pl-c1">None</span> <span class="pl-k">or</span> <span class="pl-k">not</span> <span class="pl-c1">isinstance</span>(trailing, CommaToken):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L334" class="blob-num js-line-number" data-line-number="334"/>
        <td id="file-arithmetic-py-LC334" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># We've hit the end of the tuple, so wrap it up and continue.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L335" class="blob-num js-line-number" data-line-number="335"/>
        <td id="file-arithmetic-py-LC335" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> Tuple(items)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L336" class="blob-num js-line-number" data-line-number="336"/>
        <td id="file-arithmetic-py-LC336" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L337" class="blob-num js-line-number" data-line-number="337"/>
        <td id="file-arithmetic-py-LC337" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># Another comma means another element, so consume the comma before</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L338" class="blob-num js-line-number" data-line-number="338"/>
        <td id="file-arithmetic-py-LC338" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># continuing.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L339" class="blob-num js-line-number" data-line-number="339"/>
        <td id="file-arithmetic-py-LC339" class="blob-code blob-code-inner js-file-line">            parser.next_token()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L340" class="blob-num js-line-number" data-line-number="340"/>
        <td id="file-arithmetic-py-LC340" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L341" class="blob-num js-line-number" data-line-number="341"/>
        <td id="file-arithmetic-py-LC341" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@parse_infix.register</span>(OperatorToken)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L342" class="blob-num js-line-number" data-line-number="342"/>
        <td id="file-arithmetic-py-LC342" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">tok</span>, <span class="pl-smi">left</span>, <span class="pl-smi">parser</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L343" class="blob-num js-line-number" data-line-number="343"/>
        <td id="file-arithmetic-py-LC343" class="blob-code blob-code-inner js-file-line">    precedence <span class="pl-k">=</span> token_precedence(tok, <span class="pl-v">prefix</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L344" class="blob-num js-line-number" data-line-number="344"/>
        <td id="file-arithmetic-py-LC344" class="blob-code blob-code-inner js-file-line">    right <span class="pl-k">=</span> parser.parse(precedence)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L345" class="blob-num js-line-number" data-line-number="345"/>
        <td id="file-arithmetic-py-LC345" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> right <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L346" class="blob-num js-line-number" data-line-number="346"/>
        <td id="file-arithmetic-py-LC346" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Expected expression after binary operator<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L347" class="blob-num js-line-number" data-line-number="347"/>
        <td id="file-arithmetic-py-LC347" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L348" class="blob-num js-line-number" data-line-number="348"/>
        <td id="file-arithmetic-py-LC348" class="blob-code blob-code-inner js-file-line">    expr_func <span class="pl-k">=</span> <span class="pl-c1">OPERATOR_EVAL</span>[tok.operator]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L349" class="blob-num js-line-number" data-line-number="349"/>
        <td id="file-arithmetic-py-LC349" class="blob-code blob-code-inner js-file-line">    result <span class="pl-k">=</span> BinaryExpression(left, right, expr_func)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L350" class="blob-num js-line-number" data-line-number="350"/>
        <td id="file-arithmetic-py-LC350" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> result</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L351" class="blob-num js-line-number" data-line-number="351"/>
        <td id="file-arithmetic-py-LC351" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L352" class="blob-num js-line-number" data-line-number="352"/>
        <td id="file-arithmetic-py-LC352" class="blob-code blob-code-inner js-file-line"><span class="pl-c">##### Expression Evaluation #####</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L353" class="blob-num js-line-number" data-line-number="353"/>
        <td id="file-arithmetic-py-LC353" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># This converts an expression type into a numeric value by interpreting the</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L354" class="blob-num js-line-number" data-line-number="354"/>
        <td id="file-arithmetic-py-LC354" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># expression. This is basically what you'd expect from these functions.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L355" class="blob-num js-line-number" data-line-number="355"/>
        <td id="file-arithmetic-py-LC355" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L356" class="blob-num js-line-number" data-line-number="356"/>
        <td id="file-arithmetic-py-LC356" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@singledispatch</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L357" class="blob-num js-line-number" data-line-number="357"/>
        <td id="file-arithmetic-py-LC357" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">evaluate_expr</span>(<span class="pl-smi">expr</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L358" class="blob-num js-line-number" data-line-number="358"/>
        <td id="file-arithmetic-py-LC358" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-c1">float</span>(<span class="pl-s"><span class="pl-pds">'</span>NaN<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L359" class="blob-num js-line-number" data-line-number="359"/>
        <td id="file-arithmetic-py-LC359" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L360" class="blob-num js-line-number" data-line-number="360"/>
        <td id="file-arithmetic-py-LC360" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@evaluate_expr.register</span>(NumberExpression)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L361" class="blob-num js-line-number" data-line-number="361"/>
        <td id="file-arithmetic-py-LC361" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">expr</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L362" class="blob-num js-line-number" data-line-number="362"/>
        <td id="file-arithmetic-py-LC362" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> expr.value</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L363" class="blob-num js-line-number" data-line-number="363"/>
        <td id="file-arithmetic-py-LC363" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L364" class="blob-num js-line-number" data-line-number="364"/>
        <td id="file-arithmetic-py-LC364" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@evaluate_expr.register</span>(CallExpression)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L365" class="blob-num js-line-number" data-line-number="365"/>
        <td id="file-arithmetic-py-LC365" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">expr</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L366" class="blob-num js-line-number" data-line-number="366"/>
        <td id="file-arithmetic-py-LC366" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">try</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L367" class="blob-num js-line-number" data-line-number="367"/>
        <td id="file-arithmetic-py-LC367" class="blob-code blob-code-inner js-file-line">        func <span class="pl-k">=</span> <span class="pl-c1">FUNC_TABLE</span>[expr.func]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L368" class="blob-num js-line-number" data-line-number="368"/>
        <td id="file-arithmetic-py-LC368" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> func(evaluate_expr(expr.arg))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L369" class="blob-num js-line-number" data-line-number="369"/>
        <td id="file-arithmetic-py-LC369" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">except</span> <span class="pl-c1">KeyError</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L370" class="blob-num js-line-number" data-line-number="370"/>
        <td id="file-arithmetic-py-LC370" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Unknown function <span class="pl-c1">{}</span><span class="pl-pds">'</span></span>.format(expr.func))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L371" class="blob-num js-line-number" data-line-number="371"/>
        <td id="file-arithmetic-py-LC371" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L372" class="blob-num js-line-number" data-line-number="372"/>
        <td id="file-arithmetic-py-LC372" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@evaluate_expr.register</span>(BinaryExpression)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L373" class="blob-num js-line-number" data-line-number="373"/>
        <td id="file-arithmetic-py-LC373" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">expr</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L374" class="blob-num js-line-number" data-line-number="374"/>
        <td id="file-arithmetic-py-LC374" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> expr.func(evaluate_expr(expr.left), evaluate_expr(expr.right))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L375" class="blob-num js-line-number" data-line-number="375"/>
        <td id="file-arithmetic-py-LC375" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L376" class="blob-num js-line-number" data-line-number="376"/>
        <td id="file-arithmetic-py-LC376" class="blob-code blob-code-inner js-file-line"><span class="pl-en">@evaluate_expr.register</span>(Tuple)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L377" class="blob-num js-line-number" data-line-number="377"/>
        <td id="file-arithmetic-py-LC377" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">_</span>(<span class="pl-smi">expr</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L378" class="blob-num js-line-number" data-line-number="378"/>
        <td id="file-arithmetic-py-LC378" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> <span class="pl-c1">tuple</span>(evaluate_expr(elem) <span class="pl-k">for</span> elem <span class="pl-k">in</span> expr.elems)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L379" class="blob-num js-line-number" data-line-number="379"/>
        <td id="file-arithmetic-py-LC379" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L380" class="blob-num js-line-number" data-line-number="380"/>
        <td id="file-arithmetic-py-LC380" class="blob-code blob-code-inner js-file-line"><span class="pl-c">##### Lexer #####</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L381" class="blob-num js-line-number" data-line-number="381"/>
        <td id="file-arithmetic-py-LC381" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># This turns a character stream into a stream of tokens. The only interesting</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L382" class="blob-num js-line-number" data-line-number="382"/>
        <td id="file-arithmetic-py-LC382" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># functions (besides lex()) are lex_number() and lex_name() - these more-or-less</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L383" class="blob-num js-line-number" data-line-number="383"/>
        <td id="file-arithmetic-py-LC383" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># reimplement the state machines which would underly the regular expressions</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L384" class="blob-num js-line-number" data-line-number="384"/>
        <td id="file-arithmetic-py-LC384" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># representing names and numbers. Their state machines are clearly laid-out,</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L385" class="blob-num js-line-number" data-line-number="385"/>
        <td id="file-arithmetic-py-LC385" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># so don't expect any trouble understanding them.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L386" class="blob-num js-line-number" data-line-number="386"/>
        <td id="file-arithmetic-py-LC386" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L387" class="blob-num js-line-number" data-line-number="387"/>
        <td id="file-arithmetic-py-LC387" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">DIGITS</span> <span class="pl-k">=</span> [<span class="pl-c1">str</span>(x) <span class="pl-k">for</span> x <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">0</span>, <span class="pl-c1">9</span><span class="pl-k">+</span><span class="pl-c1">1</span>)]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L388" class="blob-num js-line-number" data-line-number="388"/>
        <td id="file-arithmetic-py-LC388" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">LETTERS</span> <span class="pl-k">=</span> string.ascii_letters</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L389" class="blob-num js-line-number" data-line-number="389"/>
        <td id="file-arithmetic-py-LC389" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">OPERATORS</span> <span class="pl-k">=</span> <span class="pl-c1">list</span>(<span class="pl-c1">SYMBOL_TO_OPERATOR</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L390" class="blob-num js-line-number" data-line-number="390"/>
        <td id="file-arithmetic-py-LC390" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">SPACES</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span> <span class="pl-cce">\r\t\n\v</span><span class="pl-pds">'</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L391" class="blob-num js-line-number" data-line-number="391"/>
        <td id="file-arithmetic-py-LC391" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L392" class="blob-num js-line-number" data-line-number="392"/>
        <td id="file-arithmetic-py-LC392" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># This is explained below, but basically, it is faster to use this than call</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L393" class="blob-num js-line-number" data-line-number="393"/>
        <td id="file-arithmetic-py-LC393" class="blob-code blob-code-inner js-file-line"><span class="pl-c"># int() for single digits.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L394" class="blob-num js-line-number" data-line-number="394"/>
        <td id="file-arithmetic-py-LC394" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">NUM_TO_INT</span> <span class="pl-k">=</span> {<span class="pl-c1">str</span>(x): x <span class="pl-k">for</span> x <span class="pl-k">in</span> <span class="pl-c1">range</span>(<span class="pl-c1">0</span>, <span class="pl-c1">9</span><span class="pl-k">+</span><span class="pl-c1">1</span>)}</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L395" class="blob-num js-line-number" data-line-number="395"/>
        <td id="file-arithmetic-py-LC395" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L396" class="blob-num js-line-number" data-line-number="396"/>
        <td id="file-arithmetic-py-LC396" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">lex_number</span>(<span class="pl-smi">stream</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L397" class="blob-num js-line-number" data-line-number="397"/>
        <td id="file-arithmetic-py-LC397" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L398" class="blob-num js-line-number" data-line-number="398"/>
        <td id="file-arithmetic-py-LC398" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Lexes a floating point number, which consists of four parts:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L399" class="blob-num js-line-number" data-line-number="399"/>
        <td id="file-arithmetic-py-LC399" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L400" class="blob-num js-line-number" data-line-number="400"/>
        <td id="file-arithmetic-py-LC400" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    - An integer part, which are digits before the .</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L401" class="blob-num js-line-number" data-line-number="401"/>
        <td id="file-arithmetic-py-LC401" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    - A decimal part, which are digits after the .</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L402" class="blob-num js-line-number" data-line-number="402"/>
        <td id="file-arithmetic-py-LC402" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    - An exponential sign, which is the sign after the E or e</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L403" class="blob-num js-line-number" data-line-number="403"/>
        <td id="file-arithmetic-py-LC403" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    - An exponent, which is the number after the exponential sign</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L404" class="blob-num js-line-number" data-line-number="404"/>
        <td id="file-arithmetic-py-LC404" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L405" class="blob-num js-line-number" data-line-number="405"/>
        <td id="file-arithmetic-py-LC405" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># State Machine</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L406" class="blob-num js-line-number" data-line-number="406"/>
        <td id="file-arithmetic-py-LC406" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># =============</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L407" class="blob-num js-line-number" data-line-number="407"/>
        <td id="file-arithmetic-py-LC407" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L408" class="blob-num js-line-number" data-line-number="408"/>
        <td id="file-arithmetic-py-LC408" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># BEGIN</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L409" class="blob-num js-line-number" data-line-number="409"/>
        <td id="file-arithmetic-py-LC409" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; 0 1 2 3 4 5 6 7 8 9 --&gt; READ_INTEGER</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L410" class="blob-num js-line-number" data-line-number="410"/>
        <td id="file-arithmetic-py-LC410" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; .                   --&gt; READ_DECIMAL</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L411" class="blob-num js-line-number" data-line-number="411"/>
        <td id="file-arithmetic-py-LC411" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L412" class="blob-num js-line-number" data-line-number="412"/>
        <td id="file-arithmetic-py-LC412" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># READ_INTEGER</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L413" class="blob-num js-line-number" data-line-number="413"/>
        <td id="file-arithmetic-py-LC413" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; 0 1 2 3 4 5 6 7 8 9 --&gt; READ_INTEGER</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L414" class="blob-num js-line-number" data-line-number="414"/>
        <td id="file-arithmetic-py-LC414" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; .                   --&gt; READ_DECIMAL</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L415" class="blob-num js-line-number" data-line-number="415"/>
        <td id="file-arithmetic-py-LC415" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; E e                 --&gt; READ_EXPONENTIAL_SIGN</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L416" class="blob-num js-line-number" data-line-number="416"/>
        <td id="file-arithmetic-py-LC416" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L417" class="blob-num js-line-number" data-line-number="417"/>
        <td id="file-arithmetic-py-LC417" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># READ_DECIMAL</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L418" class="blob-num js-line-number" data-line-number="418"/>
        <td id="file-arithmetic-py-LC418" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; 0 1 2 3 4 5 6 7 8 9 --&gt; READ_DECIMAL</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L419" class="blob-num js-line-number" data-line-number="419"/>
        <td id="file-arithmetic-py-LC419" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; E e                 --&gt; READ_EXPONENTIAL_SIGN</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L420" class="blob-num js-line-number" data-line-number="420"/>
        <td id="file-arithmetic-py-LC420" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L421" class="blob-num js-line-number" data-line-number="421"/>
        <td id="file-arithmetic-py-LC421" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># READ_EXPONENTIAL_SIGN</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L422" class="blob-num js-line-number" data-line-number="422"/>
        <td id="file-arithmetic-py-LC422" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; + -                 --&gt; READ_EXPONENT</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L423" class="blob-num js-line-number" data-line-number="423"/>
        <td id="file-arithmetic-py-LC423" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; 0 1 2 3 4 5 6 7 8 9 --&gt; READ_EXPONENT</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L424" class="blob-num js-line-number" data-line-number="424"/>
        <td id="file-arithmetic-py-LC424" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L425" class="blob-num js-line-number" data-line-number="425"/>
        <td id="file-arithmetic-py-LC425" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># READ_EXPONENT</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L426" class="blob-num js-line-number" data-line-number="426"/>
        <td id="file-arithmetic-py-LC426" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   |--&gt; 0 1 2 3 4 5 6 7 8 9 --&gt; READ_EXPONENT</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L427" class="blob-num js-line-number" data-line-number="427"/>
        <td id="file-arithmetic-py-LC427" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L428" class="blob-num js-line-number" data-line-number="428"/>
        <td id="file-arithmetic-py-LC428" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># Conventions of these state functions:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L429" class="blob-num js-line-number" data-line-number="429"/>
        <td id="file-arithmetic-py-LC429" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># - Returning non-None 'accepts' the given character, and uses the returned</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L430" class="blob-num js-line-number" data-line-number="430"/>
        <td id="file-arithmetic-py-LC430" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#   function as the new state.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L431" class="blob-num js-line-number" data-line-number="431"/>
        <td id="file-arithmetic-py-LC431" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># - Returning None terminates the number, not accepting the given input</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L432" class="blob-num js-line-number" data-line-number="432"/>
        <td id="file-arithmetic-py-LC432" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L433" class="blob-num js-line-number" data-line-number="433"/>
        <td id="file-arithmetic-py-LC433" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># Note that 'None' is given to the function if the input stream is exhausted,</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L434" class="blob-num js-line-number" data-line-number="434"/>
        <td id="file-arithmetic-py-LC434" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># so that the state can check whether or not it is allowed to be the end state.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L435" class="blob-num js-line-number" data-line-number="435"/>
        <td id="file-arithmetic-py-LC435" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L436" class="blob-num js-line-number" data-line-number="436"/>
        <td id="file-arithmetic-py-LC436" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># In order to explicitly 'reject' a character, raising a SyntaxError is </span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L437" class="blob-num js-line-number" data-line-number="437"/>
        <td id="file-arithmetic-py-LC437" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># necessary.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L438" class="blob-num js-line-number" data-line-number="438"/>
        <td id="file-arithmetic-py-LC438" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L439" class="blob-num js-line-number" data-line-number="439"/>
        <td id="file-arithmetic-py-LC439" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">begin</span>(<span class="pl-smi">char</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L440" class="blob-num js-line-number" data-line-number="440"/>
        <td id="file-arithmetic-py-LC440" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"</span>Picks out the starting state from the first character<span class="pl-pds">"</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L441" class="blob-num js-line-number" data-line-number="441"/>
        <td id="file-arithmetic-py-LC441" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L442" class="blob-num js-line-number" data-line-number="442"/>
        <td id="file-arithmetic-py-LC442" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_integer</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L443" class="blob-num js-line-number" data-line-number="443"/>
        <td id="file-arithmetic-py-LC443" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L444" class="blob-num js-line-number" data-line-number="444"/>
        <td id="file-arithmetic-py-LC444" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_decimal</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L445" class="blob-num js-line-number" data-line-number="445"/>
        <td id="file-arithmetic-py-LC445" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L446" class="blob-num js-line-number" data-line-number="446"/>
        <td id="file-arithmetic-py-LC446" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Invalid start to numeric literal: <span class="pl-c1">{}</span><span class="pl-pds">'</span></span>.format(char))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L447" class="blob-num js-line-number" data-line-number="447"/>
        <td id="file-arithmetic-py-LC447" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L448" class="blob-num js-line-number" data-line-number="448"/>
        <td id="file-arithmetic-py-LC448" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">read_integer</span>(<span class="pl-smi">char</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L449" class="blob-num js-line-number" data-line-number="449"/>
        <td id="file-arithmetic-py-LC449" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L450" class="blob-num js-line-number" data-line-number="450"/>
        <td id="file-arithmetic-py-LC450" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_integer</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L451" class="blob-num js-line-number" data-line-number="451"/>
        <td id="file-arithmetic-py-LC451" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L452" class="blob-num js-line-number" data-line-number="452"/>
        <td id="file-arithmetic-py-LC452" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_decimal</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L453" class="blob-num js-line-number" data-line-number="453"/>
        <td id="file-arithmetic-py-LC453" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span> <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-s"><span class="pl-pds">'</span>Ee<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L454" class="blob-num js-line-number" data-line-number="454"/>
        <td id="file-arithmetic-py-LC454" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_exponential_sign</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L455" class="blob-num js-line-number" data-line-number="455"/>
        <td id="file-arithmetic-py-LC455" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L456" class="blob-num js-line-number" data-line-number="456"/>
        <td id="file-arithmetic-py-LC456" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">read_decimal</span>(<span class="pl-smi">char</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L457" class="blob-num js-line-number" data-line-number="457"/>
        <td id="file-arithmetic-py-LC457" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span> <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L458" class="blob-num js-line-number" data-line-number="458"/>
        <td id="file-arithmetic-py-LC458" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_decimal</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L459" class="blob-num js-line-number" data-line-number="459"/>
        <td id="file-arithmetic-py-LC459" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span> <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-s"><span class="pl-pds">'</span>Ee<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L460" class="blob-num js-line-number" data-line-number="460"/>
        <td id="file-arithmetic-py-LC460" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_exponential_sign</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L461" class="blob-num js-line-number" data-line-number="461"/>
        <td id="file-arithmetic-py-LC461" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L462" class="blob-num js-line-number" data-line-number="462"/>
        <td id="file-arithmetic-py-LC462" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>More than one decimal point in number literal<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L463" class="blob-num js-line-number" data-line-number="463"/>
        <td id="file-arithmetic-py-LC463" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L464" class="blob-num js-line-number" data-line-number="464"/>
        <td id="file-arithmetic-py-LC464" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">read_exponential_sign</span>(<span class="pl-smi">char</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L465" class="blob-num js-line-number" data-line-number="465"/>
        <td id="file-arithmetic-py-LC465" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span> <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L466" class="blob-num js-line-number" data-line-number="466"/>
        <td id="file-arithmetic-py-LC466" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_exponent</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L467" class="blob-num js-line-number" data-line-number="467"/>
        <td id="file-arithmetic-py-LC467" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span> <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-s"><span class="pl-pds">'</span>+-<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L468" class="blob-num js-line-number" data-line-number="468"/>
        <td id="file-arithmetic-py-LC468" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># There isn't a 'READ_EXPONENT_TENTATIVE' state in the state diagram</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L469" class="blob-num js-line-number" data-line-number="469"/>
        <td id="file-arithmetic-py-LC469" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># given above, so what gives? Well, if the state machine above</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L470" class="blob-num js-line-number" data-line-number="470"/>
        <td id="file-arithmetic-py-LC470" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># were implemented directly, it would allow monstrosities like the</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L471" class="blob-num js-line-number" data-line-number="471"/>
        <td id="file-arithmetic-py-LC471" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># following to rear their ugly heads:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L472" class="blob-num js-line-number" data-line-number="472"/>
        <td id="file-arithmetic-py-LC472" class="blob-code blob-code-inner js-file-line">            <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L473" class="blob-num js-line-number" data-line-number="473"/>
        <td id="file-arithmetic-py-LC473" class="blob-code blob-code-inner js-file-line">            <span class="pl-c">#   2.2e-</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L474" class="blob-num js-line-number" data-line-number="474"/>
        <td id="file-arithmetic-py-LC474" class="blob-code blob-code-inner js-file-line">            <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L475" class="blob-num js-line-number" data-line-number="475"/>
        <td id="file-arithmetic-py-LC475" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># That is, when we read the sign, the next state is 'READ_EXPONENT'</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L476" class="blob-num js-line-number" data-line-number="476"/>
        <td id="file-arithmetic-py-LC476" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># according to the diagram, which allows its input to be None. But,</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L477" class="blob-num js-line-number" data-line-number="477"/>
        <td id="file-arithmetic-py-LC477" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># if the sign is there, then we can't be sure the number is really</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L478" class="blob-num js-line-number" data-line-number="478"/>
        <td id="file-arithmetic-py-LC478" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># valid! So, this artificial 'READ_EXPONENT_TENTATIVE' state is mean</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L479" class="blob-num js-line-number" data-line-number="479"/>
        <td id="file-arithmetic-py-LC479" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># to patch up that hole - if it is given None, then it will die, unlike</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L480" class="blob-num js-line-number" data-line-number="480"/>
        <td id="file-arithmetic-py-LC480" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># 'READ_EXPONENT'.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L481" class="blob-num js-line-number" data-line-number="481"/>
        <td id="file-arithmetic-py-LC481" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_exponent_tentative</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L482" class="blob-num js-line-number" data-line-number="482"/>
        <td id="file-arithmetic-py-LC482" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L483" class="blob-num js-line-number" data-line-number="483"/>
        <td id="file-arithmetic-py-LC483" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Expected sign or digit after E<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L484" class="blob-num js-line-number" data-line-number="484"/>
        <td id="file-arithmetic-py-LC484" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L485" class="blob-num js-line-number" data-line-number="485"/>
        <td id="file-arithmetic-py-LC485" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">read_exponent_tentative</span>(<span class="pl-smi">char</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L486" class="blob-num js-line-number" data-line-number="486"/>
        <td id="file-arithmetic-py-LC486" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">is</span> <span class="pl-c1">None</span> <span class="pl-k">or</span> char <span class="pl-k">not</span> <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L487" class="blob-num js-line-number" data-line-number="487"/>
        <td id="file-arithmetic-py-LC487" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Expected exponent after exponential sign<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L488" class="blob-num js-line-number" data-line-number="488"/>
        <td id="file-arithmetic-py-LC488" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> read_exponent(char)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L489" class="blob-num js-line-number" data-line-number="489"/>
        <td id="file-arithmetic-py-LC489" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L490" class="blob-num js-line-number" data-line-number="490"/>
        <td id="file-arithmetic-py-LC490" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">read_exponent</span>(<span class="pl-smi">char</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L491" class="blob-num js-line-number" data-line-number="491"/>
        <td id="file-arithmetic-py-LC491" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span> <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L492" class="blob-num js-line-number" data-line-number="492"/>
        <td id="file-arithmetic-py-LC492" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_exponent</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L493" class="blob-num js-line-number" data-line-number="493"/>
        <td id="file-arithmetic-py-LC493" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L494" class="blob-num js-line-number" data-line-number="494"/>
        <td id="file-arithmetic-py-LC494" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># Note that I *could* just call float() on the parsed output, but it would</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L495" class="blob-num js-line-number" data-line-number="495"/>
        <td id="file-arithmetic-py-LC495" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># just be duplicating our work here, and it isn't difficult once the number</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L496" class="blob-num js-line-number" data-line-number="496"/>
        <td id="file-arithmetic-py-LC496" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># has been parsed.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L497" class="blob-num js-line-number" data-line-number="497"/>
        <td id="file-arithmetic-py-LC497" class="blob-code blob-code-inner js-file-line">    integer_part <span class="pl-k">=</span> <span class="pl-c1">0</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L498" class="blob-num js-line-number" data-line-number="498"/>
        <td id="file-arithmetic-py-LC498" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L499" class="blob-num js-line-number" data-line-number="499"/>
        <td id="file-arithmetic-py-LC499" class="blob-code blob-code-inner js-file-line">    decimal_part <span class="pl-k">=</span> <span class="pl-c1">0</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L500" class="blob-num js-line-number" data-line-number="500"/>
        <td id="file-arithmetic-py-LC500" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># The 'scale' of the next number, which decreases as more digits are added.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L501" class="blob-num js-line-number" data-line-number="501"/>
        <td id="file-arithmetic-py-LC501" class="blob-code blob-code-inner js-file-line">    decimal_multiplier <span class="pl-k">=</span> <span class="pl-c1">0.1</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L502" class="blob-num js-line-number" data-line-number="502"/>
        <td id="file-arithmetic-py-LC502" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L503" class="blob-num js-line-number" data-line-number="503"/>
        <td id="file-arithmetic-py-LC503" class="blob-code blob-code-inner js-file-line">    exponent_sign <span class="pl-k">=</span> <span class="pl-k">+</span><span class="pl-c1">1</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L504" class="blob-num js-line-number" data-line-number="504"/>
        <td id="file-arithmetic-py-LC504" class="blob-code blob-code-inner js-file-line">    exponent_part <span class="pl-k">=</span> <span class="pl-c1">0</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L505" class="blob-num js-line-number" data-line-number="505"/>
        <td id="file-arithmetic-py-LC505" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L506" class="blob-num js-line-number" data-line-number="506"/>
        <td id="file-arithmetic-py-LC506" class="blob-code blob-code-inner js-file-line">    char <span class="pl-k">=</span> stream.popleft()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L507" class="blob-num js-line-number" data-line-number="507"/>
        <td id="file-arithmetic-py-LC507" class="blob-code blob-code-inner js-file-line">    state <span class="pl-k">=</span> begin(char)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L508" class="blob-num js-line-number" data-line-number="508"/>
        <td id="file-arithmetic-py-LC508" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> state <span class="pl-k">is</span> read_integer:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L509" class="blob-num js-line-number" data-line-number="509"/>
        <td id="file-arithmetic-py-LC509" class="blob-code blob-code-inner js-file-line">        integer_part <span class="pl-k">*=</span> <span class="pl-c1">10</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L510" class="blob-num js-line-number" data-line-number="510"/>
        <td id="file-arithmetic-py-LC510" class="blob-code blob-code-inner js-file-line">        integer_part <span class="pl-k">+=</span> <span class="pl-c1">NUM_TO_INT</span>[char]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L511" class="blob-num js-line-number" data-line-number="511"/>
        <td id="file-arithmetic-py-LC511" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">elif</span> state <span class="pl-k">is</span> read_decimal:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L512" class="blob-num js-line-number" data-line-number="512"/>
        <td id="file-arithmetic-py-LC512" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># Ignore this, since the only way this can happen is if the first</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L513" class="blob-num js-line-number" data-line-number="513"/>
        <td id="file-arithmetic-py-LC513" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># character is the '.', and we don't consume that.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L514" class="blob-num js-line-number" data-line-number="514"/>
        <td id="file-arithmetic-py-LC514" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">pass</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L515" class="blob-num js-line-number" data-line-number="515"/>
        <td id="file-arithmetic-py-LC515" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L516" class="blob-num js-line-number" data-line-number="516"/>
        <td id="file-arithmetic-py-LC516" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">while</span> stream <span class="pl-k">and</span> (state <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L517" class="blob-num js-line-number" data-line-number="517"/>
        <td id="file-arithmetic-py-LC517" class="blob-code blob-code-inner js-file-line">        char <span class="pl-k">=</span> stream[<span class="pl-c1">0</span>]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L518" class="blob-num js-line-number" data-line-number="518"/>
        <td id="file-arithmetic-py-LC518" class="blob-code blob-code-inner js-file-line">        old_state <span class="pl-k">=</span> state</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L519" class="blob-num js-line-number" data-line-number="519"/>
        <td id="file-arithmetic-py-LC519" class="blob-code blob-code-inner js-file-line">        state <span class="pl-k">=</span> state(char)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L520" class="blob-num js-line-number" data-line-number="520"/>
        <td id="file-arithmetic-py-LC520" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L521" class="blob-num js-line-number" data-line-number="521"/>
        <td id="file-arithmetic-py-LC521" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># Only consume the character if the state explicitly handles it,</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L522" class="blob-num js-line-number" data-line-number="522"/>
        <td id="file-arithmetic-py-LC522" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># because we don't want to accidentally consume things like ')'</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L523" class="blob-num js-line-number" data-line-number="523"/>
        <td id="file-arithmetic-py-LC523" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># which are significant to the syntax.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L524" class="blob-num js-line-number" data-line-number="524"/>
        <td id="file-arithmetic-py-LC524" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> state <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L525" class="blob-num js-line-number" data-line-number="525"/>
        <td id="file-arithmetic-py-LC525" class="blob-code blob-code-inner js-file-line">            stream.popleft()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L526" class="blob-num js-line-number" data-line-number="526"/>
        <td id="file-arithmetic-py-LC526" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L527" class="blob-num js-line-number" data-line-number="527"/>
        <td id="file-arithmetic-py-LC527" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># Why use NUM_TO_INT vs int()? Because int() is approximately twice</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L528" class="blob-num js-line-number" data-line-number="528"/>
        <td id="file-arithmetic-py-LC528" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># as slow as using a dict, for translating single digits into integers</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L529" class="blob-num js-line-number" data-line-number="529"/>
        <td id="file-arithmetic-py-LC529" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># (according to a quick timeit benchmark). No point slowing things down</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L530" class="blob-num js-line-number" data-line-number="530"/>
        <td id="file-arithmetic-py-LC530" class="blob-code blob-code-inner js-file-line">            <span class="pl-c"># unnecessarily, since the slower alternative really isn't any simpler.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L531" class="blob-num js-line-number" data-line-number="531"/>
        <td id="file-arithmetic-py-LC531" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">if</span> old_state <span class="pl-k">is</span> read_integer <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L532" class="blob-num js-line-number" data-line-number="532"/>
        <td id="file-arithmetic-py-LC532" class="blob-code blob-code-inner js-file-line">                integer_part <span class="pl-k">*=</span> <span class="pl-c1">10</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L533" class="blob-num js-line-number" data-line-number="533"/>
        <td id="file-arithmetic-py-LC533" class="blob-code blob-code-inner js-file-line">                integer_part <span class="pl-k">+=</span> <span class="pl-c1">NUM_TO_INT</span>[char]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L534" class="blob-num js-line-number" data-line-number="534"/>
        <td id="file-arithmetic-py-LC534" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">elif</span> old_state <span class="pl-k">is</span> read_decimal <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L535" class="blob-num js-line-number" data-line-number="535"/>
        <td id="file-arithmetic-py-LC535" class="blob-code blob-code-inner js-file-line">                decimal_part <span class="pl-k">+=</span> <span class="pl-c1">NUM_TO_INT</span>[char] <span class="pl-k">*</span> decimal_multiplier</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L536" class="blob-num js-line-number" data-line-number="536"/>
        <td id="file-arithmetic-py-LC536" class="blob-code blob-code-inner js-file-line">                decimal_multiplier <span class="pl-k">/=</span> <span class="pl-c1">10</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L537" class="blob-num js-line-number" data-line-number="537"/>
        <td id="file-arithmetic-py-LC537" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">elif</span> old_state <span class="pl-k">is</span> read_exponential_sign <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-s"><span class="pl-pds">'</span>+-<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L538" class="blob-num js-line-number" data-line-number="538"/>
        <td id="file-arithmetic-py-LC538" class="blob-code blob-code-inner js-file-line">                exponent_sign <span class="pl-k">=</span> <span class="pl-k">-</span><span class="pl-c1">1</span> <span class="pl-k">if</span> char <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>-<span class="pl-pds">'</span></span> <span class="pl-k">else</span> <span class="pl-k">+</span><span class="pl-c1">1</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L539" class="blob-num js-line-number" data-line-number="539"/>
        <td id="file-arithmetic-py-LC539" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">elif</span> old_state <span class="pl-k">is</span> read_exponential_sign <span class="pl-k">and</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L540" class="blob-num js-line-number" data-line-number="540"/>
        <td id="file-arithmetic-py-LC540" class="blob-code blob-code-inner js-file-line">                exponent_part <span class="pl-k">*=</span> <span class="pl-c1">10</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L541" class="blob-num js-line-number" data-line-number="541"/>
        <td id="file-arithmetic-py-LC541" class="blob-code blob-code-inner js-file-line">                exponent_part <span class="pl-k">+=</span> <span class="pl-c1">NUM_TO_INT</span>[char]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L542" class="blob-num js-line-number" data-line-number="542"/>
        <td id="file-arithmetic-py-LC542" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">elif</span> old_state <span class="pl-k">in</span> (read_exponent_tentative, read_exponent):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L543" class="blob-num js-line-number" data-line-number="543"/>
        <td id="file-arithmetic-py-LC543" class="blob-code blob-code-inner js-file-line">                exponent_part <span class="pl-k">*=</span> <span class="pl-c1">10</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L544" class="blob-num js-line-number" data-line-number="544"/>
        <td id="file-arithmetic-py-LC544" class="blob-code blob-code-inner js-file-line">                exponent_part <span class="pl-k">+=</span> <span class="pl-c1">NUM_TO_INT</span>[char]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L545" class="blob-num js-line-number" data-line-number="545"/>
        <td id="file-arithmetic-py-LC545" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L546" class="blob-num js-line-number" data-line-number="546"/>
        <td id="file-arithmetic-py-LC546" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> state <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L547" class="blob-num js-line-number" data-line-number="547"/>
        <td id="file-arithmetic-py-LC547" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># In this case, we hit the end of the expression, rather than the</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L548" class="blob-num js-line-number" data-line-number="548"/>
        <td id="file-arithmetic-py-LC548" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># number running out 'naturally'. Ensure that the final state will</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L549" class="blob-num js-line-number" data-line-number="549"/>
        <td id="file-arithmetic-py-LC549" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># allow this. We don't care about its return state - just that it doesn't</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L550" class="blob-num js-line-number" data-line-number="550"/>
        <td id="file-arithmetic-py-LC550" class="blob-code blob-code-inner js-file-line">        <span class="pl-c"># throw a SyntaxError.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L551" class="blob-num js-line-number" data-line-number="551"/>
        <td id="file-arithmetic-py-LC551" class="blob-code blob-code-inner js-file-line">        state(<span class="pl-c1">None</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L552" class="blob-num js-line-number" data-line-number="552"/>
        <td id="file-arithmetic-py-LC552" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L553" class="blob-num js-line-number" data-line-number="553"/>
        <td id="file-arithmetic-py-LC553" class="blob-code blob-code-inner js-file-line">    value <span class="pl-k">=</span> (integer_part <span class="pl-k">+</span> decimal_part) <span class="pl-k">*</span> (<span class="pl-c1">10</span> <span class="pl-k">**</span> (exponent_sign <span class="pl-k">*</span> exponent_part))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L554" class="blob-num js-line-number" data-line-number="554"/>
        <td id="file-arithmetic-py-LC554" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> NumberToken(value)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L555" class="blob-num js-line-number" data-line-number="555"/>
        <td id="file-arithmetic-py-LC555" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L556" class="blob-num js-line-number" data-line-number="556"/>
        <td id="file-arithmetic-py-LC556" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">lex_name</span>(<span class="pl-smi">stream</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L557" class="blob-num js-line-number" data-line-number="557"/>
        <td id="file-arithmetic-py-LC557" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L558" class="blob-num js-line-number" data-line-number="558"/>
        <td id="file-arithmetic-py-LC558" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Lexes a name, which can consist of a letter, followed by any number</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L559" class="blob-num js-line-number" data-line-number="559"/>
        <td id="file-arithmetic-py-LC559" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    of letters or numbers.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L560" class="blob-num js-line-number" data-line-number="560"/>
        <td id="file-arithmetic-py-LC560" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L561" class="blob-num js-line-number" data-line-number="561"/>
        <td id="file-arithmetic-py-LC561" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># READ_FIRST</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L562" class="blob-num js-line-number" data-line-number="562"/>
        <td id="file-arithmetic-py-LC562" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># |--&gt; A B C ... X Y Z a b c ... x y z                 --&gt; READ_REST</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L563" class="blob-num js-line-number" data-line-number="563"/>
        <td id="file-arithmetic-py-LC563" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L564" class="blob-num js-line-number" data-line-number="564"/>
        <td id="file-arithmetic-py-LC564" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># READ_REST</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L565" class="blob-num js-line-number" data-line-number="565"/>
        <td id="file-arithmetic-py-LC565" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># |--&gt; A B C ... X Y Z a b c ... x y z 0 1 2 ... 7 8 9 --&gt; READ_REST</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L566" class="blob-num js-line-number" data-line-number="566"/>
        <td id="file-arithmetic-py-LC566" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L567" class="blob-num js-line-number" data-line-number="567"/>
        <td id="file-arithmetic-py-LC567" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># For the ideas behind this, see lex_number for an idea of how</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L568" class="blob-num js-line-number" data-line-number="568"/>
        <td id="file-arithmetic-py-LC568" class="blob-code blob-code-inner js-file-line">    <span class="pl-c"># these functions work together to make the state machine.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L569" class="blob-num js-line-number" data-line-number="569"/>
        <td id="file-arithmetic-py-LC569" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">read_first</span>(<span class="pl-smi">char</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L570" class="blob-num js-line-number" data-line-number="570"/>
        <td id="file-arithmetic-py-LC570" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">in</span> <span class="pl-c1">LETTERS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L571" class="blob-num js-line-number" data-line-number="571"/>
        <td id="file-arithmetic-py-LC571" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_rest</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L572" class="blob-num js-line-number" data-line-number="572"/>
        <td id="file-arithmetic-py-LC572" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L573" class="blob-num js-line-number" data-line-number="573"/>
        <td id="file-arithmetic-py-LC573" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Expected name, but hit end of expression<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L574" class="blob-num js-line-number" data-line-number="574"/>
        <td id="file-arithmetic-py-LC574" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L575" class="blob-num js-line-number" data-line-number="575"/>
        <td id="file-arithmetic-py-LC575" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-c1">{}</span> is an invalid first character to a name<span class="pl-pds">'</span></span>.format(char))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L576" class="blob-num js-line-number" data-line-number="576"/>
        <td id="file-arithmetic-py-LC576" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L577" class="blob-num js-line-number" data-line-number="577"/>
        <td id="file-arithmetic-py-LC577" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">read_rest</span>(<span class="pl-smi">char</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L578" class="blob-num js-line-number" data-line-number="578"/>
        <td id="file-arithmetic-py-LC578" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">in</span> <span class="pl-c1">LETTERS</span> <span class="pl-k">or</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L579" class="blob-num js-line-number" data-line-number="579"/>
        <td id="file-arithmetic-py-LC579" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> read_rest</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L580" class="blob-num js-line-number" data-line-number="580"/>
        <td id="file-arithmetic-py-LC580" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">in</span> <span class="pl-c1">SPACES</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L581" class="blob-num js-line-number" data-line-number="581"/>
        <td id="file-arithmetic-py-LC581" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L582" class="blob-num js-line-number" data-line-number="582"/>
        <td id="file-arithmetic-py-LC582" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L583" class="blob-num js-line-number" data-line-number="583"/>
        <td id="file-arithmetic-py-LC583" class="blob-code blob-code-inner js-file-line">    state <span class="pl-k">=</span> read_first</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L584" class="blob-num js-line-number" data-line-number="584"/>
        <td id="file-arithmetic-py-LC584" class="blob-code blob-code-inner js-file-line">    buffer <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L585" class="blob-num js-line-number" data-line-number="585"/>
        <td id="file-arithmetic-py-LC585" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">while</span> stream <span class="pl-k">and</span> (state <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L586" class="blob-num js-line-number" data-line-number="586"/>
        <td id="file-arithmetic-py-LC586" class="blob-code blob-code-inner js-file-line">        char <span class="pl-k">=</span> stream[<span class="pl-c1">0</span>]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L587" class="blob-num js-line-number" data-line-number="587"/>
        <td id="file-arithmetic-py-LC587" class="blob-code blob-code-inner js-file-line">        state <span class="pl-k">=</span> state(char)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L588" class="blob-num js-line-number" data-line-number="588"/>
        <td id="file-arithmetic-py-LC588" class="blob-code blob-code-inner js-file-line">        </td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L589" class="blob-num js-line-number" data-line-number="589"/>
        <td id="file-arithmetic-py-LC589" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> state <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L590" class="blob-num js-line-number" data-line-number="590"/>
        <td id="file-arithmetic-py-LC590" class="blob-code blob-code-inner js-file-line">            buffer <span class="pl-k">+=</span> char</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L591" class="blob-num js-line-number" data-line-number="591"/>
        <td id="file-arithmetic-py-LC591" class="blob-code blob-code-inner js-file-line">            stream.popleft()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L592" class="blob-num js-line-number" data-line-number="592"/>
        <td id="file-arithmetic-py-LC592" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L593" class="blob-num js-line-number" data-line-number="593"/>
        <td id="file-arithmetic-py-LC593" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> state <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L594" class="blob-num js-line-number" data-line-number="594"/>
        <td id="file-arithmetic-py-LC594" class="blob-code blob-code-inner js-file-line">        state(<span class="pl-c1">None</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L595" class="blob-num js-line-number" data-line-number="595"/>
        <td id="file-arithmetic-py-LC595" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L596" class="blob-num js-line-number" data-line-number="596"/>
        <td id="file-arithmetic-py-LC596" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> NameToken(buffer)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L597" class="blob-num js-line-number" data-line-number="597"/>
        <td id="file-arithmetic-py-LC597" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L598" class="blob-num js-line-number" data-line-number="598"/>
        <td id="file-arithmetic-py-LC598" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">lex</span>(<span class="pl-smi">expr</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L599" class="blob-num js-line-number" data-line-number="599"/>
        <td id="file-arithmetic-py-LC599" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L600" class="blob-num js-line-number" data-line-number="600"/>
        <td id="file-arithmetic-py-LC600" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    Converts the expression into a list of tokens.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L601" class="blob-num js-line-number" data-line-number="601"/>
        <td id="file-arithmetic-py-LC601" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L602" class="blob-num js-line-number" data-line-number="602"/>
        <td id="file-arithmetic-py-LC602" class="blob-code blob-code-inner js-file-line">    char_stream <span class="pl-k">=</span> deque(expr)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L603" class="blob-num js-line-number" data-line-number="603"/>
        <td id="file-arithmetic-py-LC603" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">while</span> char_stream:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L604" class="blob-num js-line-number" data-line-number="604"/>
        <td id="file-arithmetic-py-LC604" class="blob-code blob-code-inner js-file-line">        char <span class="pl-k">=</span> char_stream[<span class="pl-c1">0</span>]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L605" class="blob-num js-line-number" data-line-number="605"/>
        <td id="file-arithmetic-py-LC605" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> char <span class="pl-k">in</span> <span class="pl-c1">DIGITS</span> <span class="pl-k">or</span> char <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L606" class="blob-num js-line-number" data-line-number="606"/>
        <td id="file-arithmetic-py-LC606" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">yield</span> lex_number(char_stream)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L607" class="blob-num js-line-number" data-line-number="607"/>
        <td id="file-arithmetic-py-LC607" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">in</span> <span class="pl-c1">LETTERS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L608" class="blob-num js-line-number" data-line-number="608"/>
        <td id="file-arithmetic-py-LC608" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">yield</span> lex_name(char_stream)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L609" class="blob-num js-line-number" data-line-number="609"/>
        <td id="file-arithmetic-py-LC609" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">in</span> <span class="pl-c1">OPERATORS</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L610" class="blob-num js-line-number" data-line-number="610"/>
        <td id="file-arithmetic-py-LC610" class="blob-code blob-code-inner js-file-line">            char_stream.popleft()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L611" class="blob-num js-line-number" data-line-number="611"/>
        <td id="file-arithmetic-py-LC611" class="blob-code blob-code-inner js-file-line">            operator <span class="pl-k">=</span> <span class="pl-c1">SYMBOL_TO_OPERATOR</span>[char]</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L612" class="blob-num js-line-number" data-line-number="612"/>
        <td id="file-arithmetic-py-LC612" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">yield</span> OperatorToken(operator)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L613" class="blob-num js-line-number" data-line-number="613"/>
        <td id="file-arithmetic-py-LC613" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>,<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L614" class="blob-num js-line-number" data-line-number="614"/>
        <td id="file-arithmetic-py-LC614" class="blob-code blob-code-inner js-file-line">            char_stream.popleft()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L615" class="blob-num js-line-number" data-line-number="615"/>
        <td id="file-arithmetic-py-LC615" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">yield</span> CommaToken()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L616" class="blob-num js-line-number" data-line-number="616"/>
        <td id="file-arithmetic-py-LC616" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>(<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L617" class="blob-num js-line-number" data-line-number="617"/>
        <td id="file-arithmetic-py-LC617" class="blob-code blob-code-inner js-file-line">            char_stream.popleft()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L618" class="blob-num js-line-number" data-line-number="618"/>
        <td id="file-arithmetic-py-LC618" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">yield</span> BeginGroup()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L619" class="blob-num js-line-number" data-line-number="619"/>
        <td id="file-arithmetic-py-LC619" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>)<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L620" class="blob-num js-line-number" data-line-number="620"/>
        <td id="file-arithmetic-py-LC620" class="blob-code blob-code-inner js-file-line">            char_stream.popleft()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L621" class="blob-num js-line-number" data-line-number="621"/>
        <td id="file-arithmetic-py-LC621" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">yield</span> EndGroup()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L622" class="blob-num js-line-number" data-line-number="622"/>
        <td id="file-arithmetic-py-LC622" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> char <span class="pl-k">in</span> <span class="pl-c1">SPACES</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L623" class="blob-num js-line-number" data-line-number="623"/>
        <td id="file-arithmetic-py-LC623" class="blob-code blob-code-inner js-file-line">            char_stream.popleft()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L624" class="blob-num js-line-number" data-line-number="624"/>
        <td id="file-arithmetic-py-LC624" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L625" class="blob-num js-line-number" data-line-number="625"/>
        <td id="file-arithmetic-py-LC625" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">SyntaxError</span>(<span class="pl-s"><span class="pl-pds">'</span>Unexpected character: "<span class="pl-c1">{}</span>"<span class="pl-pds">'</span></span>.format(char))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L626" class="blob-num js-line-number" data-line-number="626"/>
        <td id="file-arithmetic-py-LC626" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L627" class="blob-num js-line-number" data-line-number="627"/>
        <td id="file-arithmetic-py-LC627" class="blob-code blob-code-inner js-file-line"><span class="pl-c">##### Parser #####</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L628" class="blob-num js-line-number" data-line-number="628"/>
        <td id="file-arithmetic-py-LC628" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">LookaheadIterator</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L629" class="blob-num js-line-number" data-line-number="629"/>
        <td id="file-arithmetic-py-LC629" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L630" class="blob-num js-line-number" data-line-number="630"/>
        <td id="file-arithmetic-py-LC630" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    An iterator which allows for a single token of lookahead.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L631" class="blob-num js-line-number" data-line-number="631"/>
        <td id="file-arithmetic-py-LC631" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L632" class="blob-num js-line-number" data-line-number="632"/>
        <td id="file-arithmetic-py-LC632" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">iterable</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L633" class="blob-num js-line-number" data-line-number="633"/>
        <td id="file-arithmetic-py-LC633" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.iterator <span class="pl-k">=</span> <span class="pl-c1">iter</span>(iterable)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L634" class="blob-num js-line-number" data-line-number="634"/>
        <td id="file-arithmetic-py-LC634" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.has_lookahead <span class="pl-k">=</span> <span class="pl-c1">False</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L635" class="blob-num js-line-number" data-line-number="635"/>
        <td id="file-arithmetic-py-LC635" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.lookahead <span class="pl-k">=</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L636" class="blob-num js-line-number" data-line-number="636"/>
        <td id="file-arithmetic-py-LC636" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.finished <span class="pl-k">=</span> <span class="pl-c1">False</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L637" class="blob-num js-line-number" data-line-number="637"/>
        <td id="file-arithmetic-py-LC637" class="blob-code blob-code-inner js-file-line">    </td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L638" class="blob-num js-line-number" data-line-number="638"/>
        <td id="file-arithmetic-py-LC638" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__iter__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L639" class="blob-num js-line-number" data-line-number="639"/>
        <td id="file-arithmetic-py-LC639" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">self</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L640" class="blob-num js-line-number" data-line-number="640"/>
        <td id="file-arithmetic-py-LC640" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L641" class="blob-num js-line-number" data-line-number="641"/>
        <td id="file-arithmetic-py-LC641" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__next__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L642" class="blob-num js-line-number" data-line-number="642"/>
        <td id="file-arithmetic-py-LC642" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-v">self</span>.finished:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L643" class="blob-num js-line-number" data-line-number="643"/>
        <td id="file-arithmetic-py-LC643" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">StopIteration</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L644" class="blob-num js-line-number" data-line-number="644"/>
        <td id="file-arithmetic-py-LC644" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">elif</span> <span class="pl-v">self</span>.has_lookahead:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L645" class="blob-num js-line-number" data-line-number="645"/>
        <td id="file-arithmetic-py-LC645" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">self</span>.has_lookahead <span class="pl-k">=</span> <span class="pl-c1">False</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L646" class="blob-num js-line-number" data-line-number="646"/>
        <td id="file-arithmetic-py-LC646" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-v">self</span>.lookahead</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L647" class="blob-num js-line-number" data-line-number="647"/>
        <td id="file-arithmetic-py-LC647" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L648" class="blob-num js-line-number" data-line-number="648"/>
        <td id="file-arithmetic-py-LC648" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">try</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L649" class="blob-num js-line-number" data-line-number="649"/>
        <td id="file-arithmetic-py-LC649" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">return</span> <span class="pl-c1">next</span>(<span class="pl-v">self</span>.iterator)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L650" class="blob-num js-line-number" data-line-number="650"/>
        <td id="file-arithmetic-py-LC650" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">except</span> <span class="pl-c1">StopIteration</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L651" class="blob-num js-line-number" data-line-number="651"/>
        <td id="file-arithmetic-py-LC651" class="blob-code blob-code-inner js-file-line">                <span class="pl-v">self</span>.finished <span class="pl-k">=</span> <span class="pl-c1">True</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L652" class="blob-num js-line-number" data-line-number="652"/>
        <td id="file-arithmetic-py-LC652" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">raise</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L653" class="blob-num js-line-number" data-line-number="653"/>
        <td id="file-arithmetic-py-LC653" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L654" class="blob-num js-line-number" data-line-number="654"/>
        <td id="file-arithmetic-py-LC654" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">peek</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L655" class="blob-num js-line-number" data-line-number="655"/>
        <td id="file-arithmetic-py-LC655" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L656" class="blob-num js-line-number" data-line-number="656"/>
        <td id="file-arithmetic-py-LC656" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        Gets the next element without consuming it.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L657" class="blob-num js-line-number" data-line-number="657"/>
        <td id="file-arithmetic-py-LC657" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L658" class="blob-num js-line-number" data-line-number="658"/>
        <td id="file-arithmetic-py-LC658" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        Note that if no element is available, then a StopIteration exception is thrown.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L659" class="blob-num js-line-number" data-line-number="659"/>
        <td id="file-arithmetic-py-LC659" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L660" class="blob-num js-line-number" data-line-number="660"/>
        <td id="file-arithmetic-py-LC660" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-v">self</span>.finished:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L661" class="blob-num js-line-number" data-line-number="661"/>
        <td id="file-arithmetic-py-LC661" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">raise</span> <span class="pl-c1">StopIteration</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L662" class="blob-num js-line-number" data-line-number="662"/>
        <td id="file-arithmetic-py-LC662" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L663" class="blob-num js-line-number" data-line-number="663"/>
        <td id="file-arithmetic-py-LC663" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-v">self</span>.has_lookahead:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L664" class="blob-num js-line-number" data-line-number="664"/>
        <td id="file-arithmetic-py-LC664" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-v">self</span>.lookahead</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L665" class="blob-num js-line-number" data-line-number="665"/>
        <td id="file-arithmetic-py-LC665" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L666" class="blob-num js-line-number" data-line-number="666"/>
        <td id="file-arithmetic-py-LC666" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">try</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L667" class="blob-num js-line-number" data-line-number="667"/>
        <td id="file-arithmetic-py-LC667" class="blob-code blob-code-inner js-file-line">                <span class="pl-v">self</span>.lookahead <span class="pl-k">=</span> <span class="pl-c1">next</span>(<span class="pl-v">self</span>.iterator)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L668" class="blob-num js-line-number" data-line-number="668"/>
        <td id="file-arithmetic-py-LC668" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">except</span> <span class="pl-c1">StopIteration</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L669" class="blob-num js-line-number" data-line-number="669"/>
        <td id="file-arithmetic-py-LC669" class="blob-code blob-code-inner js-file-line">                <span class="pl-v">self</span>.finished <span class="pl-k">=</span> <span class="pl-c1">True</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L670" class="blob-num js-line-number" data-line-number="670"/>
        <td id="file-arithmetic-py-LC670" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">raise</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L671" class="blob-num js-line-number" data-line-number="671"/>
        <td id="file-arithmetic-py-LC671" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">self</span>.has_lookahead <span class="pl-k">=</span> <span class="pl-c1">True</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L672" class="blob-num js-line-number" data-line-number="672"/>
        <td id="file-arithmetic-py-LC672" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-v">self</span>.lookahead</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L673" class="blob-num js-line-number" data-line-number="673"/>
        <td id="file-arithmetic-py-LC673" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L674" class="blob-num js-line-number" data-line-number="674"/>
        <td id="file-arithmetic-py-LC674" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">Parser</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L675" class="blob-num js-line-number" data-line-number="675"/>
        <td id="file-arithmetic-py-LC675" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L676" class="blob-num js-line-number" data-line-number="676"/>
        <td id="file-arithmetic-py-LC676" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    The core of the Pratt parser, which reads in tokens and builds expressions</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L677" class="blob-num js-line-number" data-line-number="677"/>
        <td id="file-arithmetic-py-LC677" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    using those tokens.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L678" class="blob-num js-line-number" data-line-number="678"/>
        <td id="file-arithmetic-py-LC678" class="blob-code blob-code-inner js-file-line"><span class="pl-s">    <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L679" class="blob-num js-line-number" data-line-number="679"/>
        <td id="file-arithmetic-py-LC679" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">stream</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L680" class="blob-num js-line-number" data-line-number="680"/>
        <td id="file-arithmetic-py-LC680" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.stream <span class="pl-k">=</span> LookaheadIterator(stream)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L681" class="blob-num js-line-number" data-line-number="681"/>
        <td id="file-arithmetic-py-LC681" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.stream_iter <span class="pl-k">=</span> <span class="pl-c1">iter</span>(<span class="pl-v">self</span>.stream)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L682" class="blob-num js-line-number" data-line-number="682"/>
        <td id="file-arithmetic-py-LC682" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L683" class="blob-num js-line-number" data-line-number="683"/>
        <td id="file-arithmetic-py-LC683" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">next_token</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L684" class="blob-num js-line-number" data-line-number="684"/>
        <td id="file-arithmetic-py-LC684" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L685" class="blob-num js-line-number" data-line-number="685"/>
        <td id="file-arithmetic-py-LC685" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        Gets the next token, or None if no more tokens follow.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L686" class="blob-num js-line-number" data-line-number="686"/>
        <td id="file-arithmetic-py-LC686" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L687" class="blob-num js-line-number" data-line-number="687"/>
        <td id="file-arithmetic-py-LC687" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">try</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L688" class="blob-num js-line-number" data-line-number="688"/>
        <td id="file-arithmetic-py-LC688" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">next</span>(<span class="pl-v">self</span>.stream_iter)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L689" class="blob-num js-line-number" data-line-number="689"/>
        <td id="file-arithmetic-py-LC689" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">except</span> <span class="pl-c1">StopIteration</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L690" class="blob-num js-line-number" data-line-number="690"/>
        <td id="file-arithmetic-py-LC690" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L691" class="blob-num js-line-number" data-line-number="691"/>
        <td id="file-arithmetic-py-LC691" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L692" class="blob-num js-line-number" data-line-number="692"/>
        <td id="file-arithmetic-py-LC692" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">peek_token</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L693" class="blob-num js-line-number" data-line-number="693"/>
        <td id="file-arithmetic-py-LC693" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L694" class="blob-num js-line-number" data-line-number="694"/>
        <td id="file-arithmetic-py-LC694" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        Gets the next token, without consuming it, or None if not tokens follow.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L695" class="blob-num js-line-number" data-line-number="695"/>
        <td id="file-arithmetic-py-LC695" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L696" class="blob-num js-line-number" data-line-number="696"/>
        <td id="file-arithmetic-py-LC696" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">try</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L697" class="blob-num js-line-number" data-line-number="697"/>
        <td id="file-arithmetic-py-LC697" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-v">self</span>.stream.peek()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L698" class="blob-num js-line-number" data-line-number="698"/>
        <td id="file-arithmetic-py-LC698" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">except</span> <span class="pl-c1">StopIteration</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L699" class="blob-num js-line-number" data-line-number="699"/>
        <td id="file-arithmetic-py-LC699" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L700" class="blob-num js-line-number" data-line-number="700"/>
        <td id="file-arithmetic-py-LC700" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L701" class="blob-num js-line-number" data-line-number="701"/>
        <td id="file-arithmetic-py-LC701" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">peek_precedence</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">limit</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L702" class="blob-num js-line-number" data-line-number="702"/>
        <td id="file-arithmetic-py-LC702" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L703" class="blob-num js-line-number" data-line-number="703"/>
        <td id="file-arithmetic-py-LC703" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        Gets either:</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L704" class="blob-num js-line-number" data-line-number="704"/>
        <td id="file-arithmetic-py-LC704" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L705" class="blob-num js-line-number" data-line-number="705"/>
        <td id="file-arithmetic-py-LC705" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        - The next token which has a precedence above the limit.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L706" class="blob-num js-line-number" data-line-number="706"/>
        <td id="file-arithmetic-py-LC706" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        - None, if the next token's precedence is too high, or there are no</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L707" class="blob-num js-line-number" data-line-number="707"/>
        <td id="file-arithmetic-py-LC707" class="blob-code blob-code-inner js-file-line"><span class="pl-s">          tokens left.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L708" class="blob-num js-line-number" data-line-number="708"/>
        <td id="file-arithmetic-py-LC708" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L709" class="blob-num js-line-number" data-line-number="709"/>
        <td id="file-arithmetic-py-LC709" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        Why above the limit? Well, this is because we want to ensure that</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L710" class="blob-num js-line-number" data-line-number="710"/>
        <td id="file-arithmetic-py-LC710" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        whatever gets returned from here binds more tightly than whatever</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L711" class="blob-num js-line-number" data-line-number="711"/>
        <td id="file-arithmetic-py-LC711" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        the resulting expression is getting sent back to. </span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L712" class="blob-num js-line-number" data-line-number="712"/>
        <td id="file-arithmetic-py-LC712" class="blob-code blob-code-inner js-file-line"><span class="pl-s"/></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L713" class="blob-num js-line-number" data-line-number="713"/>
        <td id="file-arithmetic-py-LC713" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        If we're being called by a '+' operator, then we need to ensure</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L714" class="blob-num js-line-number" data-line-number="714"/>
        <td id="file-arithmetic-py-LC714" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        that any '*' we come across (in general, anything with a higher precedence</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L715" class="blob-num js-line-number" data-line-number="715"/>
        <td id="file-arithmetic-py-LC715" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        than '+') are processed, so that the order of operations is preserved.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L716" class="blob-num js-line-number" data-line-number="716"/>
        <td id="file-arithmetic-py-LC716" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L717" class="blob-num js-line-number" data-line-number="717"/>
        <td id="file-arithmetic-py-LC717" class="blob-code blob-code-inner js-file-line">        next_tok <span class="pl-k">=</span> <span class="pl-v">self</span>.peek_token()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L718" class="blob-num js-line-number" data-line-number="718"/>
        <td id="file-arithmetic-py-LC718" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> next_tok <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L719" class="blob-num js-line-number" data-line-number="719"/>
        <td id="file-arithmetic-py-LC719" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L720" class="blob-num js-line-number" data-line-number="720"/>
        <td id="file-arithmetic-py-LC720" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L721" class="blob-num js-line-number" data-line-number="721"/>
        <td id="file-arithmetic-py-LC721" class="blob-code blob-code-inner js-file-line">            precedence <span class="pl-k">=</span> token_precedence(next_tok, <span class="pl-v">prefix</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L722" class="blob-num js-line-number" data-line-number="722"/>
        <td id="file-arithmetic-py-LC722" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">if</span> precedence <span class="pl-k">&gt;</span> limit:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L723" class="blob-num js-line-number" data-line-number="723"/>
        <td id="file-arithmetic-py-LC723" class="blob-code blob-code-inner js-file-line">                <span class="pl-c"># Consume it, so the caller doesn't have to</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L724" class="blob-num js-line-number" data-line-number="724"/>
        <td id="file-arithmetic-py-LC724" class="blob-code blob-code-inner js-file-line">                <span class="pl-v">self</span>.next_token()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L725" class="blob-num js-line-number" data-line-number="725"/>
        <td id="file-arithmetic-py-LC725" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">return</span> next_tok</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L726" class="blob-num js-line-number" data-line-number="726"/>
        <td id="file-arithmetic-py-LC726" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L727" class="blob-num js-line-number" data-line-number="727"/>
        <td id="file-arithmetic-py-LC727" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">return</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L728" class="blob-num js-line-number" data-line-number="728"/>
        <td id="file-arithmetic-py-LC728" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L729" class="blob-num js-line-number" data-line-number="729"/>
        <td id="file-arithmetic-py-LC729" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">parse</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>, <span class="pl-smi">precedence_min</span><span class="pl-k">=</span><span class="pl-k">-</span><span class="pl-c1">1</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L730" class="blob-num js-line-number" data-line-number="730"/>
        <td id="file-arithmetic-py-LC730" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L731" class="blob-num js-line-number" data-line-number="731"/>
        <td id="file-arithmetic-py-LC731" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        Parses an expression, using the given precedence as the minimum bound. </span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L732" class="blob-num js-line-number" data-line-number="732"/>
        <td id="file-arithmetic-py-LC732" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        By default, the entire expression will be parsed.</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L733" class="blob-num js-line-number" data-line-number="733"/>
        <td id="file-arithmetic-py-LC733" class="blob-code blob-code-inner js-file-line"><span class="pl-s">        <span class="pl-pds">"""</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L734" class="blob-num js-line-number" data-line-number="734"/>
        <td id="file-arithmetic-py-LC734" class="blob-code blob-code-inner js-file-line">        tok <span class="pl-k">=</span> <span class="pl-v">self</span>.next_token()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L735" class="blob-num js-line-number" data-line-number="735"/>
        <td id="file-arithmetic-py-LC735" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> tok <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L736" class="blob-num js-line-number" data-line-number="736"/>
        <td id="file-arithmetic-py-LC736" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L737" class="blob-num js-line-number" data-line-number="737"/>
        <td id="file-arithmetic-py-LC737" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L738" class="blob-num js-line-number" data-line-number="738"/>
        <td id="file-arithmetic-py-LC738" class="blob-code blob-code-inner js-file-line">        expr <span class="pl-k">=</span> parse_prefix(tok, <span class="pl-v">self</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L739" class="blob-num js-line-number" data-line-number="739"/>
        <td id="file-arithmetic-py-LC739" class="blob-code blob-code-inner js-file-line">        tok <span class="pl-k">=</span> <span class="pl-v">self</span>.peek_precedence(precedence_min)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L740" class="blob-num js-line-number" data-line-number="740"/>
        <td id="file-arithmetic-py-LC740" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">while</span> tok <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L741" class="blob-num js-line-number" data-line-number="741"/>
        <td id="file-arithmetic-py-LC741" class="blob-code blob-code-inner js-file-line">            expr <span class="pl-k">=</span> parse_infix(tok, expr, <span class="pl-v">self</span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L742" class="blob-num js-line-number" data-line-number="742"/>
        <td id="file-arithmetic-py-LC742" class="blob-code blob-code-inner js-file-line">            tok <span class="pl-k">=</span> <span class="pl-v">self</span>.peek_precedence(precedence_min)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L743" class="blob-num js-line-number" data-line-number="743"/>
        <td id="file-arithmetic-py-LC743" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L744" class="blob-num js-line-number" data-line-number="744"/>
        <td id="file-arithmetic-py-LC744" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> expr</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L745" class="blob-num js-line-number" data-line-number="745"/>
        <td id="file-arithmetic-py-LC745" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L746" class="blob-num js-line-number" data-line-number="746"/>
        <td id="file-arithmetic-py-LC746" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">evaluate</span>(<span class="pl-smi">expr</span>):</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L747" class="blob-num js-line-number" data-line-number="747"/>
        <td id="file-arithmetic-py-LC747" class="blob-code blob-code-inner js-file-line">    <span class="pl-s"><span class="pl-pds">"</span>Evaluates an expression.<span class="pl-pds">"</span></span></td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L748" class="blob-num js-line-number" data-line-number="748"/>
        <td id="file-arithmetic-py-LC748" class="blob-code blob-code-inner js-file-line">    toks <span class="pl-k">=</span> lex(expr)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L749" class="blob-num js-line-number" data-line-number="749"/>
        <td id="file-arithmetic-py-LC749" class="blob-code blob-code-inner js-file-line">    parser <span class="pl-k">=</span> Parser(toks)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L750" class="blob-num js-line-number" data-line-number="750"/>
        <td id="file-arithmetic-py-LC750" class="blob-code blob-code-inner js-file-line">    expr <span class="pl-k">=</span> parser.parse()</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L751" class="blob-num js-line-number" data-line-number="751"/>
        <td id="file-arithmetic-py-LC751" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">if</span> expr <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L752" class="blob-num js-line-number" data-line-number="752"/>
        <td id="file-arithmetic-py-LC752" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">float</span>(<span class="pl-s"><span class="pl-pds">'</span>NaN<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L753" class="blob-num js-line-number" data-line-number="753"/>
        <td id="file-arithmetic-py-LC753" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">else</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L754" class="blob-num js-line-number" data-line-number="754"/>
        <td id="file-arithmetic-py-LC754" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">try</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L755" class="blob-num js-line-number" data-line-number="755"/>
        <td id="file-arithmetic-py-LC755" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> evaluate_expr(expr)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L756" class="blob-num js-line-number" data-line-number="756"/>
        <td id="file-arithmetic-py-LC756" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">except</span> <span class="pl-c1">ValueError</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L757" class="blob-num js-line-number" data-line-number="757"/>
        <td id="file-arithmetic-py-LC757" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">return</span> <span class="pl-c1">float</span>(<span class="pl-s"><span class="pl-pds">'</span>NaN<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L758" class="blob-num js-line-number" data-line-number="758"/>
        <td id="file-arithmetic-py-LC758" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L759" class="blob-num js-line-number" data-line-number="759"/>
        <td id="file-arithmetic-py-LC759" class="blob-code blob-code-inner js-file-line"><span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">'</span>__main__<span class="pl-pds">'</span></span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L760" class="blob-num js-line-number" data-line-number="760"/>
        <td id="file-arithmetic-py-LC760" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">while</span> <span class="pl-c1">True</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L761" class="blob-num js-line-number" data-line-number="761"/>
        <td id="file-arithmetic-py-LC761" class="blob-code blob-code-inner js-file-line">        expr <span class="pl-k">=</span> <span class="pl-c1">input</span>(<span class="pl-s"><span class="pl-pds">'</span>&gt; <span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L762" class="blob-num js-line-number" data-line-number="762"/>
        <td id="file-arithmetic-py-LC762" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">try</span>:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L763" class="blob-num js-line-number" data-line-number="763"/>
        <td id="file-arithmetic-py-LC763" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">'</span>=<span class="pl-pds">'</span></span>, evaluate(expr))</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L764" class="blob-num js-line-number" data-line-number="764"/>
        <td id="file-arithmetic-py-LC764" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">except</span> <span class="pl-c1">Exception</span> <span class="pl-k">as</span> ex:</td>
      </tr>
      <tr>
        <td id="file-arithmetic-py-L765" class="blob-num js-line-number" data-line-number="765"/>
        <td id="file-arithmetic-py-LC765" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">'</span>...<span class="pl-pds">'</span></span>, ex)</td>
      </tr>
</table>

  </div></body></html>