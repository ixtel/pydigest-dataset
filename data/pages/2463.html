<html><body><div><div class="atomentry" id="why-zip-when-you-can-map">

<p class="meta"><abbr class="published" title="2014-12-16">2014-12-16</abbr> • <a href="/tag/python" rel="tag">Python</a> • <a href="/articles/why-zip-when-you-can-map#disqus_thread">Comments</a></p>
<p><a href="http://en.wikipedia.org/wiki/Zipper"><img src="/images/zip.jpg" title="Why zip?" alt="Why zip?"/></a>
   <a href="http://www.strava.com/activities/158661061"><img src="/images/dundry-thunder.jpg" alt="when you can map?" title="when you can map!"/></a>
</p>
<p>You’ve got a couple of parallel lists you’d like to combine and output, a line for each pair. Here’s one way to do it: use <code>zip</code> to do the combining.
</p>
<div class="typocode">

<pre class="prettyprint">&gt;&gt;&gt; times = [42.12, 42.28, 42.34, 42.40, 42.45]
&gt;&gt;&gt; names = ['Hickman', 'Guest', 'Burns', 'Williams']
&gt;&gt;&gt; fmt = '{:20} {:.2f}'.format
&gt;&gt;&gt; print('\n'.join(fmt(n, t) for n, t in zip(names, times)))
Hickman              42.12
Guest                42.28
Burns                42.34
Williams             42.40

</pre>

</div>

<p>Slightly more succinctly:
</p>
<div class="typocode">

<pre class="prettyprint">&gt;&gt;&gt; print('\n'.join(fmt(*nt) for nt in zip(names, times)))
...

</pre>

</div>

<p>If you look at the generator expression passed into <code>str.join</code>, you can see we’re just mapping <code>fmt</code> to the zipped <code>names</code> and <code>times</code> lists.
</p>
<p>Well, sort of.
</p>
<div class="typocode">

<pre class="prettyprint">&gt;&gt;&gt; print('\n'.join(map(fmt, zip(names, times))))
Traceback (most recent call last):
...
IndexError: tuple index out of range

</pre>

</div>

<p>To fix this, we <strong>could</strong> use <code>itertools.starmap</code> which effectively unpacks the zipped pairs.
</p>
<div class="typocode">

<pre class="prettyprint">&gt;&gt;&gt; from itertools import starmap
&gt;&gt;&gt; print('\n'.join(starmap(fmt, zip(names, times))))
Hickman              42.12
Guest                42.28
Burns                42.34
Williams             42.40

</pre>

</div>

<p>This latest version looks clean enough but there’s something odd about zipping two lists together only to unpack the resulting 2-tuples for consumption by the format function.
</p>
<p>Don’t forget, <code>map</code> happily accepts more than one sequence! There’s no need to <code>zip</code> after all.
</p>
<div class="typocode"><p class="codetitle">Don’t zip, map!</p>

<pre class="prettyprint">&gt;&gt;&gt; print('\n'.join(map(fmt, names, times)))
...

</pre>

</div>
</div>

</div></body></html>