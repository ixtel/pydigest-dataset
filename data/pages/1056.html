<html><body><div><div class="entry-content">
				<p>I use Python as my go to tool for command-line scripts. So I find myself often parsing command-line arguments for these script. Since I use various programming languages I don't remember anything, so I'm constantly looking at documentation and sadly, Python docs are a bit challenging to read.</p>
<p>So, in a similar vein as my [Python String Format Cookbook][1], I wrote my own docs for argument parsing which I'll use myself as a reference and hopefully useful to you.</p>
<h2>What Library to Use</h2>
<p>I don't know the history but there are a couple of different standard libraries that can be used for parsing arguments. The one you want to use is <strong>argparse</strong> module. Similiar in name to <strong>optparse</strong> which is the older deprecated module.</p>
<p>Also confusingly there is a <strong>getopt</strong> module which handles more or less the same parsing of command-line arguements but is a bit more complicated and usually requires more code to be written.</p>
<h2>Basic Example</h2>
<p>First, up a simple example which is just grabbing a single argument and no flags or other parameters passed in. For this case, you can just use <code>sys.argv</code> array which contains all of the parameters passed in.</p>
<p>The first element in <code>sys.argv</code> is the script itself. So a parameter passed in will be in the second element: <code>sys.argv[1]</code></p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="mi">1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span> <span class="s2">"~ Script: "</span> <span class="o">+</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
    <span class="k">print</span><span class="p">(</span> <span class="s2">"~ Arg   : "</span> <span class="o">+</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">" No arguments "</span><span class="p">)</span>
</pre></div>


<p>Saving as <code>test.py</code> and running gives:</p>
<div class="highlight"><pre>$ python test.py Foo
~ Script: test.py
~ Arg   : Foo
</pre></div>


<h3>Multiple Arguments with sys.argv</h3>
<p>Since <code>sys.argv</code> is simply a list, you can grab blocks of arguments togther or slice around as you would any other list.</p>
<p>Last argument: <code>sys.argv[-1]</code></p>
<p>All args after first: <code>" ".join(sys.argv[2:])</code></p>
<h2>Flag Parameters</h2>
<p>You need to start using a module when you want to start including flags such as <code>--help</code> or want to have optional arguments, or varying length parameters. As mentioned, the best standard module to use is <strong>argparse</strong>.</p>
<h3>Help and Verbose Examples</h3>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">'Demo'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--verbose'</span><span class="p">,</span>
    <span class="n">action</span><span class="o">=</span><span class="s1">'store_true'</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s1">'verbose flag'</span> <span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"~ Verbose!"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"~ Not so verbose"</span><span class="p">)</span>
</pre></div>


<p>Here's how to run the above example:</p>
<div class="highlight"><pre>$ python test.py
~ Not so verbose

$ python test.py --verbose
~ Verbose!
</pre></div>


<p>The action parameter tells argparse to store true if the flag is found, otherwise it stores false. Also a great thing about using <code>argparse</code> is you get built-in help. You can try it out by passing in an unknown parameter, <code>-h</code> or <code>--help</code></p>
<div class="highlight"><pre>$ python test.py --help
usage: test.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--verbose<span class="o">]</span>

Demo

optional arguments:
  -h, --help  show this <span class="nb">help</span> message and <span class="nb">exit</span>
    --verbose   verbose output
</pre></div>


<p>A side effect of using argparse, you will get an error if a user passes in a command-line argument not expected, this includes flags or just an extra argument.</p>
<div class="highlight"><pre>$ python test.py filename
usage: test.py <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>--verbose<span class="o">]</span>
test.py: error: unrecognized arguments: filename
</pre></div>


<h3>Multiple, Short or Long Flags</h3>
<p>You can specify multiple flags for one argument, typically this is down with short and long flags, such as <code>--verbose</code> and <code>-v</code></p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--verbose'</span><span class="p">,</span> <span class="s1">'-v'</span><span class="p">,</span>
    <span class="n">action</span><span class="o">=</span><span class="s1">'store_true'</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s1">'verbose flag'</span> <span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"~ Verbose!"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">"~ Not so verbose"</span><span class="p">)</span>
</pre></div>


<h3>Required Flags</h3>
<p>You can make a flag required by setting, <code>required=True</code> this will cause an error if the flag is not specified</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--limit'</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>


<h2>Positional Arguments</h2>
<p>The examples so far have been about flags, parameters starting with <code>--</code>, argparse also handles the positional args which are just specified without the flag. Here's an example to illustrate.</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'filename'</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Filename: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py filename.txt
~ Filename: filename.txt
</pre></div>


<h2>Number of Arguments</h2>
<p>Argparse determines the number of argument based on the action specified, for our verbose example, the store_true action takes no arguments. By default, argparse will look for a single argument, shown above in the filename example.</p>
<p>If you want your parameter to accept a list of items you can specify <code>nargs=n</code> for how many arguments to accept.</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'nums'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Nums: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">nums</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py <span class="m">5</span> 2
~ Nums: <span class="o">[</span><span class="s1">'5'</span>, <span class="s1">'2'</span><span class="o">]</span>
</pre></div>


<h3>Variable Number of Parameters</h3>
<p>The nargs argument accepts a couple of extra special parameters. If you want the argument to accept all of the parameters, you can use <code>*</code> which will return all parameters if present, or empty list if none.</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'nums'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">'*'</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Nums: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">nums</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py <span class="m">5</span> <span class="m">2</span> 4
~ Nums: <span class="o">[</span><span class="s1">'5'</span>, <span class="s1">'2'</span>, <span class="s1">'4'</span><span class="o">]</span>
</pre></div>


<p>If you want to require, 1 or more parameters, use <code>nargs='+'</code></p>
<p>Positional arguments are determine by the position specified. This can be combined with the <code>nargs='*'</code> for example if you want to define a filename and a list of values to store.</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'filename'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'nums'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">'*'</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Filename: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">filename</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">"~ Nums: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">nums</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py file.txt <span class="m">5</span> <span class="m">2</span> 4
~ Fileanme: file.txt
~ Nums: <span class="o">[</span><span class="s1">'5'</span>, <span class="s1">'2'</span>, <span class="s1">'4'</span><span class="o">]</span>
</pre></div>


<p>You can also specify <code>nargs='?'</code> if you want to make a positional argument optional, but you need to be careful how you combine ? and * parameters, especially if you put an optional positional parameter before another one.</p>
<p>This makes sense, not requiring the last args:</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'filename'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'nums'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">'?'</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py test.txt 3
~ Filename: test.txt
~ Nums: 3

$ python test.py test.txt
~ Filename: test.txt
~ Nums: None
</pre></div>


<p>However, using the <code>nargs='?'</code> first will give unexpected results when arguments are missing, for example:</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'filename'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">'?'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'nums'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">'*'</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py <span class="m">3</span> <span class="m">2</span> 1
~ Filename: 3
~ Nums: <span class="o">[</span><span class="s1">'2'</span>, <span class="s1">'1'</span><span class="o">]</span>
</pre></div>


<p>You can use <code>nargs</code> with flag arguments as well</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--geo'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--pos'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'type'</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py --geo <span class="m">5</span> <span class="m">10</span> --pos <span class="m">100</span> <span class="m">50</span> square
~ Geo: <span class="o">[</span><span class="s1">'5'</span>, <span class="s1">'10'</span><span class="o">]</span>
~ Pos: <span class="o">[</span><span class="s1">'100'</span>, <span class="s1">'50'</span><span class="o">]</span>
~ Type: square
</pre></div>


<h2>Variable Type</h2>
<p>You might notice that the parameters passed in are being treated like strings and not numbers, you can specify the variable type by specifying <code>type=int</code>. By specifying the type, argparse will also fail if an invalid type is passed in.</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'nums'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Nums: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">nums</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py <span class="m">5</span> 2
~ Nums: <span class="o">[</span>5, 2<span class="o">]</span>
</pre></div>


<h3>File Types</h3>
<p>Argparse has some built in filetypes which makes it easier to open files specified on the command line. Here's an example reading a file, you can do the same writing a file.</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'f'</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">'r'</span><span class="p">))</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">f</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="p">)</span>
</pre></div>


<h2>Default Value</h2>
<p>You may specify a default value if the user does not pass one in. Here's an example using a flag.</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--limit'</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Limit: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">limit</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py
~ Limit: 5
</pre></div>


<h2>Remainder</h2>
<p>If want to gather the extra arguments passed in, you can use remainder which gathers up all arguments not specified into a list</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">argparse</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--verbose'</span><span class="p">,</span>
    <span class="n">action</span><span class="o">=</span><span class="s1">'store_true'</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s1">'verbose flag'</span> <span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'args'</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">REMAINDER</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
</pre></div>


<p>Specifying remainder will create a list of all remaining arguments:</p>
<div class="highlight"><pre>$ python test.py --verbose foo bar
<span class="o">[</span><span class="s1">'foo'</span>, <span class="s1">'bar'</span><span class="o">]</span>
</pre></div>


<h2>Actions</h2>
<p>The default action is to assign the variable specified, but there are a couple of other actions that can be specified.</p>
<h3>Booleans</h3>
<p>We have already seen the boolean flag action which is <code>action='store_true'</code> which also has a counter action for <code>action='store_false'</code></p>
<h3>Count</h3>
<p>You can use the count action, which will return how many times a flag was called, this can be useful for verbosity or silent flags</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'--verbose'</span><span class="p">,</span> <span class="s1">'-v'</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">'count'</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Verbose: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py
~ Verbose: None

$ python test.py --verbose
~ Verbose: 1

$ python test.py --verbose -v --verbose
~ Verbose: 3
</pre></div>


<h3>Append</h3>
<p>You can also use the append action to create a list if multiple flags are passed in.</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-c'</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">'append'</span><span class="p">)</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ C: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">c</span><span class="p">))</span>
</pre></div>


<p>Output:</p>
<div class="highlight"><pre>$ python test.py
~ C: None

$ python test.py -c hi
~ C: <span class="o">[</span><span class="s1">'hi'</span><span class="o">]</span>

$ python test.py -c hi -c hello -c hey
~ C: <span class="o">[</span><span class="s1">'hi'</span>, <span class="s1">'hello'</span>, <span class="s1">'hey'</span><span class="o">]</span>
</pre></div>


<h2>Choices</h2>
<p>If you only want a set of allowed values to be used, you can set the choices list, which will display an error if invalid entry.</p>
<div class="highlight"><pre><span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">prog</span><span class="o">=</span><span class="s1">'roshambo.py'</span><span class="p">)</span>
<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'throw'</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">'rock'</span><span class="p">,</span> <span class="s1">'paper'</span><span class="p">,</span> <span class="s1">'scissors'</span><span class="p">])</span>
<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Throw: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">throw</span><span class="p">))</span>
</pre></div>


<h2>Examples</h2>
<p>I'll end with two examples, many of the example above are not as complete I would use in reality, they were kept short to focus on the idea being illustrated.</p>
<h3>Copy Script Example</h3>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">'script to copy one file to another'</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-v'</span><span class="p">,</span> <span class="s1">'--verbose'</span><span class="p">,</span>
    <span class="n">action</span><span class="o">=</span><span class="s2">"store_true"</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"verbose output"</span> <span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-R'</span><span class="p">,</span>
    <span class="n">action</span><span class="o">=</span><span class="s2">"store_false"</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"Copy all files and directories recursively"</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'infile'</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">'r'</span><span class="p">),</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"file to be copied"</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'outfile'</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">FileType</span><span class="p">(</span><span class="s1">'w'</span><span class="p">),</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"file to be created"</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
</pre></div>


<h3>Bug Script Example</h3>
<p>Here is an example for a script that closes a bug</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">'close bug'</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-v'</span><span class="p">,</span> <span class="s1">'--verbose'</span><span class="p">,</span>
    <span class="n">action</span><span class="o">=</span><span class="s2">"store_true"</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"verbose output"</span> <span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'-s'</span><span class="p">,</span>
    <span class="n">default</span><span class="o">=</span><span class="s2">"closed"</span><span class="p">,</span>
    <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s1">'closed'</span><span class="p">,</span> <span class="s1">'wontfix'</span><span class="p">,</span> <span class="s1">'notabug'</span><span class="p">],</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"bug status"</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'bugnum'</span><span class="p">,</span>
    <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"Bug number to be closed"</span><span class="p">)</span>

<span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span>
    <span class="n">nargs</span><span class="o">=</span><span class="s1">'*'</span><span class="p">,</span>
    <span class="n">help</span><span class="o">=</span><span class="s2">"optional message"</span><span class="p">)</span>

<span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s2">"~ Bug Num: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">bugnum</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">"~ Verbose: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">verbose</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">"~ Status : {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">arg</span><span class="o">.</span><span class="n">s</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s2">"~ Message: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">" "</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">message</span><span class="p">)))</span>
</pre></div>


<h2>Resources</h2>

			</div>

			</div></body></html>