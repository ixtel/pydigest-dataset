<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-lasagne-implementation-of-deep-residual-networks" class="anchor" href="#lasagne-implementation-of-deep-residual-networks" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Lasagne implementation of Deep Residual Networks</h1>

<p>Recreating the Deep Residual Learning for Image Recognition</p>

<p><a href="http://arxiv.org/abs/1512.03385">http://arxiv.org/abs/1512.03385</a></p>

<h2><a id="user-content-dependancies" class="anchor" href="#dependancies" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Dependancies</h2>

<p>Note: CUDA and CuDNN might require root privileges.</p>

<ul>
<li>Ubuntu 14.04</li>
<li>CUDA 6.5 (might work with lower, have not tested lower)</li>
<li>Follow the lasagne installation lasagne.readthedocs.org/en/latest/user/installation.html

<ul>
<li>Python2.7</li>
<li>Numpy</li>
<li>Theano (NOT pip install)</li>
<li>Lasagne (should only require 0.1 from pip install, but have only tested on 0.2dev)</li>
</ul></li>
<li>CuDNN (only tested with v2)</li>
</ul>

<h2><a id="user-content-cudnn" class="anchor" href="#cudnn" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>CuDNN</h2>

<p>The code is setup with CuDNN. If you do not have access to CuDNN then you need to comment out:</p>

<ul>
<li>github.com/alrojo/lasagne_residual_network/blob/master/Deep_Residual_Network_mnist.py#L21</li>
<li>github.com/alrojo/lasagne_residual_network/blob/master/Deep_Residual_Network_mnist.py#L86</li>
</ul>

<p>And remove comments from</p>

<ul>
<li>github.com/alrojo/lasagne_residual_network/blob/master/Deep_Residual_Network_mnist.py#L85</li>
</ul>

<h2><a id="user-content-set-up-and-run" class="anchor" href="#set-up-and-run" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Set-up and run</h2>

<p>The code is based on lasagnes own mnist example: github.com/Lasagne/Lasagne/blob/master/examples/mnist.py</p>

<p>The data is placed in the main folder for ease of use, but if you do not have the data Deep_Residual_Network_mnist.py will automatically download it.</p>

<p>To get an overview of commandline inputs, run</p>

<blockquote>
<blockquote>
<p>python Deep_Residual_Network_mnist.py -h</p>
</blockquote>
</blockquote>

<p>An example of running with num_filters=8, num_bottlenecks per layer=3 and num_epochs=500</p>

<blockquote>
<blockquote>
<p>python Deep_Residual_Network_mnist.py 8 3 500</p>
</blockquote>
</blockquote>

<h2><a id="user-content-batchnormlayer" class="anchor" href="#batchnormlayer" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>BatchNormLayer</h2>

<p>Using a different version of BatchNormLayer (f0k's original PR before turning to cuDNN style) see  github.com/Lasagne/Lasagne/pull/467 for more information.</p>

<p>If you want to use the Lasagne's implementation then change:
github.com/alrojo/lasagne_residual_network/blob/master/Deep_Residual_Network_mnist.py#L22</p>

<p>to</p>

<p>import lasagne.layers.BatchNormLayer</p>

<h2><a id="user-content-note" class="anchor" href="#note" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>NOTE</h2>

<p>If any of the provided steps does not work for you please let me know and report an issue/PR.</p>
</article>
  </div></body></html>