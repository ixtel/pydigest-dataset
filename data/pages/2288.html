<html><body><div><div class="post-text" itemprop="text">

<p>Consider the following sample code:</p>

<pre><code>data = []
try:
    print data[0]
except IndexError as error:
    print error.message
</code></pre>

<p>There is nothing syntactically wrong (using Python2.7) with the code except that if you run python <a href="https://docs.python.org/2/library/warnings.html#the-warnings-filter">with  warnings turned on</a>, you would see a <code>DeprecationWarning</code>:</p>

<pre><code>$ python -W always test.py
test.py:5: DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
  print error.message
list index out of range
</code></pre>

<p>FYI, this is because <a href="https://stackoverflow.com/questions/1272138/baseexception-message-deprecated-in-python-2-6"><code>.message</code> was deprecated since python2.6 and removed in python3</a>.</p>

<p>Now, I'd like to find all places in the project where <code>.message</code> is called on any exception instance <em>by using static code analysis</em> tools. As an end goal, I'm planning to have this check running as a part of a daily build&amp;test&amp;code quality check task and raise an error if the syntax is still used.</p>

<p>Is it possible? Is it something that <code>pylint</code>, <code>pyflakes</code> or other code analysis tools are capable of?</p>

<hr/>

<p>I found that <a href="https://github.com/jcrocholl/pep8"><code>pep8</code> tool</a> has several similar checks implemented, for instance, <code>has_key()</code> usage check:</p>

<pre><code>$ cat test.py
my_dict = {}
print my_dict.has_key('test')
$ pep8 test.py
test.py:2:14: W601 .has_key() is deprecated, use 'in'
</code></pre>

<p>As an alternative solution, I can treat all warnings as errors (like suggested <a href="https://stackoverflow.com/a/16457346/771848">here</a>) and make my tests fail but this has its disadvantages:</p>

<ul>
<li>there are other deprecation warnings coming from third-party packages that I cannot fix</li>
<li>strictly speaking, this requires 100% coverage, which is difficult to maintain </li>
</ul>
    </div>
    </div></body></html>