<html><body><div><div class="col-md-9 content">
      
  <div class="section" id="plone-on-heroku">
<h1>Plone on Heroku<a class="headerlink" href="#plone-on-heroku" title="Permalink to this headline">¶</a></h1>
<p><em>Dear Plone, welcome to 2015</em></p>
<p>Picture it. The year was 2014. I was incredibly moved and inspired by this blog entry:</p>

<p>Someone had finally done it. (<a class="reference external" href="https://github.com/zupo">zupo</a> in this case, kudos!) Someone had finally beat me to implementing the dream of <code class="docutils literal"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">heroku</span> <span class="pre">plone</span></code>. And I could not have been happier.</p>
<p>But something nagging would not let go: I still <strong>didn’t fully understand how the buildpack worked</strong>. Today I’m happy to say: that nag is gone and I now fully understand how Heroku buildpacks work… thanks to… wait for it… a <a class="reference external" href="https://github.com/plock/buildpack/blob/master/bin/compile">Buildpack for Plock</a>.</p>
<div class="section" id="plock-buildpack">
<h2>Plock Buildpack<a class="headerlink" href="#plock-buildpack" title="Permalink to this headline">¶</a></h2>
<p>There’s a lot of the same things going on in both the <a class="reference external" href="https://github.com/plone/heroku-buildpack-plone">Plone Buildpack</a> and the <a class="reference external" href="https://github.com/plock/buildpack/blob/master/bin/compile">Plock Buildpack</a>, with some exceptions.</p>
<div class="section" id="experimental">
<h3>Experimental<a class="headerlink" href="#experimental" title="Permalink to this headline">¶</a></h3>
<p>The <strong>Plock buildpack is highly experimental, still in development and possibly innovative</strong>. Here’s what it currently does:</p>
<ul class="simple">
<li>Configures Python user site directory in Heroku cache</li>
<li>Installs setuptools in user site</li>
<li>Installs pip in user site</li>
<li>Installs Buildout in user site</li>
<li>Installs Plone in cache</li>
<li>Copies cache to build directory</li>
<li>Installs a portion of “user Plone” (the Heroku app’s buildout.cfg) in the build directory (not the cache)</li>
<li>Relies on the app to install the remainder (the Heroku app’s heroku.cfg). <strong>Most importantly the app runs Buildout which finishes quickly thanks to the cache &amp; configures the port which is only available to the app (not the buildpack.)</strong></li>
</ul>
<p>Here’s <a class="reference external" href="https://github.com/ACLARKNET/plone-demo">an example</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span/># buildout.cfg
[buildout]
extends = https://raw.github.com/plock/pins/master/plone-4-3

[user]
packages = collective.loremipsum
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span/># heroku.cfg
[buildout]
extends = buildout.cfg

[plone]
http-address = ${env:PORT}
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span/># Procfile
web: buildout -c heroku.cfg; plone console
</pre></div>
</div>
</div>
<div class="section" id="opinionated">
<h3>Opinionated<a class="headerlink" href="#opinionated" title="Permalink to this headline">¶</a></h3>
<p>The Plock Buildpack is built on Plock, an “opinionated” installer for Plone. It may eventually use <a class="reference external" href="https://pypi.python.org/pypi/plock/0.4.0">Plock</a> itself, but currently only uses <a class="reference external" href="https://github.com/plock/pins">Plock Pins</a>.</p>
</div>
</div>
</div>

  

    </div>
      
  </div></body></html>