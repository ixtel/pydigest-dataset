<html><body><div><p>A CRUD like manager for Flask.</p>
<div id="is-flexible">
<h2>Is Flexible</h2>
<p>Save in a hello.py:</p>
<pre><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_manager</span> <span class="kn">import</span> <span class="n">crud</span><span class="p">,</span> <span class="n">controller</span><span class="p">,</span> <span class="n">rules</span> <span class="k">as</span> <span class="n">rules_</span>

<span class="n">all_items</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">i</span><span class="p">:</span> <span class="p">{</span><span class="s1">'id'</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span> <span class="s1">'title'</span><span class="p">:</span> <span class="s1">'Title - {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">next_id</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">class</span> <span class="nc">Controller</span><span class="p">(</span><span class="n">controller</span><span class="o">.</span><span class="n">Controller</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">order_by</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">all_items</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_items</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">all_items</span><span class="p">[</span><span class="n">pk</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">create_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="c1"># wtforms does not support dicts :( (I think:P)</span>
        <span class="k">global</span> <span class="n">next_id</span>
        <span class="n">all_items</span><span class="p">[</span><span class="n">next_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">'id'</span><span class="p">:</span> <span class="n">next_id</span><span class="p">,</span> <span class="s1">'title'</span><span class="p">:</span> <span class="s1">'Title - {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">next_id</span><span class="p">)}</span>
        <span class="n">next_id</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">update_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="c1"># wtforms does not support dicts :( (I think:P)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">delete_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
        <span class="k">del</span> <span class="n">all_items</span><span class="p">[</span><span class="n">pk</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">Crud</span><span class="p">(</span><span class="n">crud</span><span class="o">.</span><span class="n">Crud</span><span class="p">):</span>
    <span class="n">controller</span> <span class="o">=</span> <span class="n">Controller</span><span class="p">()</span>
    <span class="c1"># you may merge read/update to "form" if using the same columns</span>
    <span class="n">rules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'list'</span><span class="p">:</span> <span class="n">rules</span><span class="o">.</span><span class="n">ColumnSet</span><span class="p">([</span><span class="s1">'title'</span><span class="p">]),</span>
        <span class="s1">'create'</span><span class="p">:</span> <span class="n">rules</span><span class="o">.</span><span class="n">FormFieldSet</span><span class="p">([</span><span class="s1">'title'</span><span class="p">]),</span>
        <span class="s1">'read'</span><span class="p">:</span> <span class="n">rules</span><span class="o">.</span><span class="n">DataFieldSet</span><span class="p">([</span><span class="s1">'title'</span><span class="p">]),</span>
        <span class="s1">'update'</span><span class="p">:</span> <span class="n">rules</span><span class="o">.</span><span class="n">FormFieldSet</span><span class="p">([</span><span class="s1">'title'</span><span class="p">]),</span>
        <span class="s1">'delete'</span><span class="p">:</span> <span class="n">rules</span><span class="o">.</span><span class="n">DataFieldSetWithConfirm</span><span class="p">([</span><span class="s1">'title'</span><span class="p">]),</span>
    <span class="p">}</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
    <span class="n">admin</span> <span class="o">=</span> <span class="n">crud</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="s1">'My Admin'</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Crud</span><span class="p">(</span><span class="s1">'My Crud'</span><span class="p">),</span>
    <span class="p">])</span>
    <span class="n">app</span><span class="o">.</span><span class="n">register_blueprint</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">create_blueprint</span><span class="p">())</span>
</pre>
<p>Then execute:</p>
<pre>$ pip install flask-manager
$ python hello.py
</pre>
</div>


</div></body></html>