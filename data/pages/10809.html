<html><body><div><p>Skytap is a set of modules that we use to manage aspects of our Skytap infrastructure here at <a href="http://fulcrum.net" rel="nofollow">Fulcrum Technologies</a>.</p>
<div id="usage">
<h2>Usage</h2>
<p>To use the module, you’ll need to create at least two environment variables:</p>
<pre>SKYTAP_USER=kermit.frog@fulcrum.net
SKYTAP_TOKEN=79824879aeb2b34534e112d23a3c
</pre>
<p>Optionally, you can also add:</p>
<pre>SKYTAP_LOG_LEVEL=20
</pre>
<p>This can be a number between 0-50 and corresponds to the logging module from Python. If you move the log level to “DEBUG” (10), you’ll also see logging from the requests module that this module leverages, which will display the direct URL calls. This can be verbose, but helpful for troubleshooting.</p>
<p>An easy way to do this is to create a .skytap file in your home directory (~/.skytap) with the variables in there:</p>
<pre>export SKYTAP_USER=kermit.frog@fulcrum.net
export SKYTAP_TOKEN=79824879aeb2b34534e112d23a3c
</pre>
<p>Then you can source the file:</p>
<pre>source ~/.skytap
</pre>
<p>to load the variables, or add that same source command to your ~/.bash_profile or equivalent file to have it done automatically.</p>
<div id="via-the-command-line">
<h3>Via the command line</h3>
<p>Most modules can be accessed directly from the command line to get simple information. This functionally returns the JSON from the Skytap API:</p>
<pre>python -m skytap.Environments
python -m skytap.Users
</pre>
<p>You’ll get back a JSON for the request, something like:</p>
<pre>[
  {
    "id": "12345",
    "url": "https://cloud.skytap.com/users/12345",
    "login_name": "kermit.frog@fulcrum.net",
    "first_name": "Kermit",
    "last_name": "The Frog",
    "title": "Master of Ceremonies",
    "email": "kermit.frog@fulcrum.net",
    "created_at": "2012-01-02T12:43:05-08:00",
    "deleted": false
  }
]
</pre>
</div>
<div id="via-python-script">
<h3>Via Python script</h3>
<p>To use this, simply import it:</p>
<pre>import skytap
</pre>
<p>Then you can access the resource groups of interest.</p>
<p>A simple example:</p>
<pre>import skytap
users = skytap.Users()
for u in users:
    print(u.name + ' : ' + u.email)
</pre>
<p>This can also help automate running and suspending VMs:</p>
<pre>import skytap
envs = skytap.Environments()

envs[123456].suspend()  # or .suspend(True) if you want the script to wait.
</pre>
<p>Doing this will, by default, add a note to the environment of it’s action, so someone checking the environment can see why it’s not running.</p>
</div>
</div>
</div></body></html>