<html><body><div><div><p><img alt="Annoucing Prophet v0.1" src="/static/img/announcing-prophet.png"/></p> <p>Today I released <a href="http://prophet.michaelsu.io/">Prophet</a>, a microframework for analyzing financial markets. Prophet strives to let the programmer focus on modeling financial strategies, portfolio management, and analyzing backtests. It achieves this by having few functions to learn to hit the ground running, yet being flexible enough to accomodate sophistication.</p> <p>Currently it provides a backtester and a method for generating trade orders. I am more than happy to take feature requests or feedback! Please open an issue <a href="https://github.com/Emsu/prophet/issues">here</a>. I hope it helps you <em>prophet</em> from the stock market (hehe).</p> <h2>Why?</h2> <p>I wanted something that is lightweight and easy to pickup. Ideally a library that focuses on just support infrastructure and being performant and places as few restrictions on me as possible. Think Flask vs Django. When using Prophet, you really should primarily just be working with with <a href="http://pandas.pydata.org/">pandas</a> library.</p> <h3>In comparison to Zipline</h3> <p>Prophet provides a slightly smaller API surface so there aren't as many functions you need to know about before you can get up and running. However it is flexible in that you can use the lower-level API to create functions that fit your use case. Also, the backtesting model doesn't have a bias as to the type of data you use to trade. It does provide price data out of the box for convenience but treats all data sources equally. Zipline is more full featured and mature than Prophet and would be a great choice for price-based algorithms. It's API is still very simple but I felt it was biased toward algorithms driven by price.</p> <h3>In comparison to QSTK</h3> <p>QSTK is a huge library with many useful functions. However, lot of them are not well documented and you have to hunt in the source code to find some of the gems. Many functions also tend to be slightly stringy and inflexible. I think Prophet will work well alongside QSTK as QSTK's scope is broader than Prophet. The functions that Prophet provides are for the most part implemented or possible to implement with QSTK. Prophet should be more composable and flexible though, allowing you to play with the data in each step of the process and analyze the performance with a custom set of metrics that you care about. The source code should also be easier to read because it follows more closely to standard Python conventions. Also, Prophet does not to generate artifacts in the form of csv, html, and image files as a byproduct of executing code.</p> <h2>Using Prophet</h2> <p>Prophet requires Python. Install prophet with the following command:</p>  <p>If you want to dive straight into Prophet, here's the "Hello World":</p> <div class="codehilite"><pre><span class="kn">import</span> <span class="nn">datetime</span> <span class="kn">as</span> <span class="nn">dt</span>

<span class="kn">from</span> <span class="nn">prophet</span> <span class="kn">import</span> <span class="n">Prophet</span>
<span class="kn">from</span> <span class="nn">prophet.data</span> <span class="kn">import</span> <span class="n">YahooCloseData</span>
<span class="kn">from</span> <span class="nn">prophet.analyze</span> <span class="kn">import</span> <span class="n">default_analyzers</span>
<span class="kn">from</span> <span class="nn">prophet.orders</span> <span class="kn">import</span> <span class="n">Orders</span>


<span class="k">class</span> <span class="nc">OrderGenerator</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">cash</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c"># Lets buy lots of Apple!</span>
        <span class="n">symbol</span> <span class="o">=</span> <span class="s">"AAPL"</span>
        <span class="n">orders</span> <span class="o">=</span> <span class="n">Orders</span><span class="p">()</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">prices</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">symbol</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">cash</span><span class="p">:</span>
            <span class="n">orders</span><span class="o">.</span><span class="n">add_order</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">orders</span>


<span class="n">prophet</span> <span class="o">=</span> <span class="n">Prophet</span><span class="p">()</span>
<span class="n">prophet</span><span class="o">.</span><span class="n">set_universe</span><span class="p">([</span><span class="s">"AAPL"</span><span class="p">,</span> <span class="s">"XOM"</span><span class="p">])</span>

<span class="n">prophet</span><span class="o">.</span><span class="n">register_data_generators</span><span class="p">(</span><span class="n">YahooCloseData</span><span class="p">())</span>
<span class="n">prophet</span><span class="o">.</span><span class="n">set_order_generator</span><span class="p">(</span><span class="n">OrderGenerator</span><span class="p">())</span>
<span class="n">backtest</span> <span class="o">=</span> <span class="n">prophet</span><span class="o">.</span><span class="n">run_backtest</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2010</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

<span class="n">prophet</span><span class="o">.</span><span class="n">register_portfolio_analyzers</span><span class="p">(</span><span class="n">default_analyzers</span><span class="p">)</span>
<span class="n">analysis</span> <span class="o">=</span> <span class="n">prophet</span><span class="o">.</span><span class="n">analyze_backtest</span><span class="p">(</span><span class="n">backtest</span><span class="p">)</span>
<span class="k">print</span> <span class="n">analysis</span>
<span class="c"># +--------------------------------------+</span>
<span class="c"># | sharpe            |    1.09754359611 |</span>
<span class="c"># | average_return    | 0.00105478425027 |</span>
<span class="c"># | cumulative_return |         2.168833 |</span>
<span class="c"># | volatility        |  0.0152560508189 |</span>
<span class="c"># +--------------------------------------+</span>

<span class="c"># Generate orders for your to execute today</span>
<span class="c"># Using Nov, 10 2014 as the date because there might be no data for today's</span>
<span class="c"># date (Market might not be open) and we don't want examples to fail.</span>
<span class="n">today</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="k">print</span> <span class="n">prophet</span><span class="o">.</span><span class="n">generate_orders</span><span class="p">(</span><span class="n">today</span><span class="p">)</span>
<span class="c"># Orders[Order(symbol='AAPL', shares=100)]</span>
</pre></div> <p>For a more thorough tutorial, please see the <a href="http://prophet.michaelsu.io/">documentation</a>.</p> <h2>On Quant Investing</h2> <p>Quant investing isn't a silver bullet. My personal take on quant investing is that it is really just a magnified reflection of your own investment skill.</p> <blockquote> <p>What formula do you program the computer with? The formula is subject to human tinkering, and at some point enough tinkering creates a human driven computer executed fund.</p> <p>- <a href="http://www.oddballstocks.com/2013/01/thoughts-on-quantitative-value-investing.html">Nate Tobik</a>, Oddball Stocks</p> </blockquote> <p>You could use financial signal processing and catch large market moves. You could implement a quantitative value strategy. Whatever your strategy does is something that - by the fact you wrote the code - you could do by hand, but slower.</p> <h2>Strategies to Explore</h2> <p>So what do I think people using Prophet should focus on? Some strategies need extreme speed (We could all manually implement an arbitrage strategy but the hardware investment some firms have made to be faster than us is significant). Some strategies require you to travel around the world to survey people and places to generate realtime economic statistics. Many strategies are not suitable for the individual investor.</p> <p>Instead, make Prophet a testbed for you to leverage your own expertise, form hypotheses and test them. Remember to learn from mistakes and tests as if it was a scientific experiment. Always be learning.</p> <p>Focus on small-caps that have few to no large institutions covering them. Your code can probably analyze them faster than Joe at the office, who moonlights as a chart trader. Use NLP to find SEC filings that could potentially be the catalyst for interesting event driven trades. If you don't have a finance background, maybe that chaos theory or signal processing expertise can gain you an edge in the market. Work with what you are good at (and learn what will make you better). If you're using Prophet, you already have one advantage over most retail investors (programming knowledge, not Prophet ☺). </p> <h2>Conclusion</h2> <p>I am hoping people find this project interesting and that it provides a simple framework for programmers to explore and try trading strategies. I will personally be implementing a few strategies that have been on my mind for the last couple years.</p> <p>Even if Prophet doesn't meet your needs now, please open an issue <a href="https://github.com/Emsu/prophet/issues">here</a>. I want to build Prophet as flexible as possible but your use case might just be different than mine.</p> <p>Until next time!</p></div> </div></body></html>