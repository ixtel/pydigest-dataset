<html><body><div><div class="post-text" itemprop="text">

<p>I am working on an implementation of a class for inline labeling of line objects. For this purpose I have made a subclass of the <code>Text</code> class which as a <code>Line2D</code> object as an attribute. The code in my <a href="http://stackoverflow.com/questions/33939819/matplotlib-force-line2d-to-be-redrawn-from-within-subclass-of-text">previous post</a> was maybe a bit lengthy, so I have isolated the problem here:</p>

<pre><code>from matplotlib.text import Text
from matplotlib import pyplot as plt
import numpy as np


class LineText(Text):
    def __init__(self,line,*args,**kwargs):
        x_pos = line.get_xdata().mean()
        y_pos = line.get_ydata().mean()
        Text.__init__(self,x=x_pos,y=y_pos,*args,**kwargs)
        self.line = line
    def draw(self,renderer):
        self.line.set_color(self.get_color())
        self.line.draw(renderer = renderer)
        Text.draw(self,renderer)



if __name__ == '__main__':

    x = np.linspace(0,1,20)
    y = np.linspace(0,1,20)
    ax = plt.subplot(1,1,1)
    line = plt.plot(x,y,color = 'r')[0]
    linetext = LineText(line,text = 'abc')
    ax.add_artist(linetext)
    plt.show()
</code></pre>

<p>The class takes the handle of a <code>Line2D</code> as returned from the <code>plot</code> function and in the <code>.draw</code> method, it makes some changes to the line. For illustration purposes I have here simply tried to change its colour. </p>

<p>After changing the colour of the line, I call the lines <code>draw</code>. This does however not have the expected effect. When the figure is first drawn, there seems to be a superposition of a red and a black line. As soon as the figure is resized or otherwise forced to redraw, the line changes its colour as expected. The only way I have found so far to force the figure to be drawn correctly upon opening was to add a <code>plt.draw()</code> before the <code>show()</code>. This does however feel clumsy. </p>

<p>Can I somehow force only the line object to be redrawn? Or am I doing it completely wrong? </p>

<p>Thanks in advance.  </p>
    </div>
    </div></body></html>