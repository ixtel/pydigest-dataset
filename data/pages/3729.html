<html><body><div><div class="section">
              <h1>django-permanent 1.0.3</h1>

              


<p>Yet another approach to provide soft (logical) delete or masking (thrashing) django models instead of deleting them physically from db.</p>



<p>
<strong>Latest Version: </strong><a title="Latest Version URL" href="https://pypi.python.org/pypi/django-permanent/1.0.12">
<span>1.0.12</span>
</a>
</p>




<div id="django-permanent">
<h2>Django Permanent</h2>
<p>Yet another approach to provide soft (logical) delete or masking (thrashing) django models instead of deleting them physically from db.</p>
</div>
<div id="models">
<h2>Models</h2>
<p>To create non-deletable model just inherit it form the PermanentModel.:</p>
<pre>class MyModel(PermanentModel):
    pass
</pre>
<p>It automatically changes delete behaviour, to hide model instead of deleting. restore() method.:</p>
<pre>&gt;&gt;&gt; a = MyModel.objects.create(pk=1)
&gt;&gt;&gt; b = MyModel.objects.create(pk=2)
&gt;&gt;&gt; MyModel.objects.count()
2
&gt;&gt;&gt; a.delete()
&gt;&gt;&gt; MyModel.objects.count()
1
</pre>
<p>To recover model just call its restore method.:</p>
<pre>&gt;&gt;&gt; a.restore()
&gt;&gt;&gt; MyModel.objects.count()
2
</pre>
<p>User Force kwarg to enforce physical deletion.:</p>
<pre>&gt;&gt;&gt; a.delete(force=True) # Will act as the default django delete
&gt;&gt;&gt; MyModel._base_manager.count()
0
</pre>
</div>
<div id="managers">
<h2>Managers</h2>
<p>It changes default model manager to ignore deleted objects. And adds deleted_objects manager to find the last ones.:</p>
<pre>&gt;&gt;&gt; MyModel.objects.count()
2
&gt;&gt;&gt; a.delete()
&gt;&gt;&gt; MyModel.objects.count()
1
&gt;&gt;&gt; MyModel.deleted_objects.count()
1
&gt;&gt;&gt; MyModel.all_objects.count()
2
&gt;&gt;&gt; MyModel._base_manager.count()
2
</pre>
</div>
<div id="queryset">
<h2>QuerySet</h2>
<p>Query set delete method will act as the default django delete, with the one exception - all related  PermanentModel children will be marked as deleted, the usual models will be deleted physically:</p>
<pre>&gt;&gt;&gt; MyModel.objects.all().delete()
</pre>
<p>You can still force django query set physical deletion:</p>
<pre>&gt;&gt;&gt; MyModel.objects.all().delete(force=True)
</pre>
</div>
<div id="using-custom-querysets-requires-django-model-utils">
<h2>Using custom querysets (requires django-model-utils)</h2>
<ol>
<li><p>Inherit your query set from PermanentQuerySet:</p>
<pre>class ServerFileQuerySet(PermanentQuerySet)
    pass
</pre>
</li>
<li><p>Wrap it in the permanent_queryset or deleted_queryset in you model manager declaration:</p>
<pre>class MyModel(PermanentModel)
    objects = MultiPassThroughManager(ServerFileQuerySet, NonDeletedQuerySet)
    deleted_objects = MultiPassThroughManager(ServerFileQuerySet, DeletedQuerySet)
    all_objects = MultiPassThroughManager(ServerFileQuerySet, PermanentQuerySet)
</pre>
</li>
</ol>
</div>
<div id="method-get-restore-or-create">
<h2>Method get_restore_or_create</h2>
<ol>
<li>Check existence of the object.</li>
<li>Restore it was deleted.</li>
<li>Create new one, if it wasn’t ever created.</li>
</ol>
</div>
<div id="field-name">
<h2>Field name</h2>
<p>By default field is named removed, but you can override it by PERMANENT_FIELD variable in you settings.py.:</p>
<pre>PERMANENT_FIELD = 'deleted'
</pre>
</div>
<div id="requirements">
<h2>Requirements</h2>
<p>Django 1.6.x required. To cover Django 1.5 needs use 0.1.4 branch.</p>
</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>192</span> downloads in the last week
  </li>
  <li>
    <span>1130</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>