<html><body><div><div class="entry-content">
		<p>In the <a title="Reuven's Webinar about functional Python" href="https://www.youtube.com/watch?v=lreGOBXHm-k" target="_blank">free Webinar</a> I gave yesterday about functional programming, I mentioned that “map,” or its equivalent (e.g., Python’s list comprehensions), is a powerful tool that I use nearly every day. Once you get into the functional mode of thinking, you’re constantly finding ways to turn one collection into another collection. It’s a mindset that takes time and practice, but allows you to solve many problems quickly and easily. The trick is to see beyond the initial problem, and to understand how you can think in terms of a source collection and a target collection.</p>
<p>For example, I was <a title="Reuven Lerner's courses" href="http://lerner.co.il/courses">teaching an introductory Python course</a> just today, and someone came to me and asked how they can turn a URL query string (e.g., x=1&amp;y=2&amp;z=abc) into a dictionary. Now, this isn’t a super-hard problem, but the reaction on his face to the way in which I solved it demonstrated how he would have used a completely different approach, and that functional thinking didn’t even cross his mind.</p>
<p>The first thing to notice is that in a query string, you’ve got name-value pairs separated by &amp; signs. So the first task is to take the query string, and turn it into a list:</p>
<pre>&gt;&gt;&gt; query_string.split('&amp;')
['x=1', 'y=2', 'z=abc']</pre>
<p>Now that we have these items in a list, we can transform each of them. But wait — transform them?  Yes, and that’s where the “map” mindset comes in. You want to be moving your data into a list, which allows you to transform each element into another one. In this case, I want to transform each of the elements of the list into a dictionary pair.</p>
<p>Fortunately, we see that each name-value pair has a “=” sign between the name and the value. We can use that to our advantage, splitting each of the pairs:</p>
<pre>&gt;&gt;&gt; [item.split('=') for item in query_string.split('&amp;')]
[['x', '1'], ['y', '2'], ['z', 'abc']]</pre>
<p>In other words, we have now created a list of lists, in which the first element of each sub-list is our intended dictionary key, and the second element is our intended dictionary value.</p>
<p>Well, we can use dict() to construct dictionaries in Python. And whadaya know, it works just fine with a sequence of two-element sequences. We normally think of feeding dict() a list of tuples, but it turns out that a list of lists works just fine, as well:</p>
<pre>&gt;&gt;&gt; dict([item.split('=') for item in query_string.split('&amp;')])
{'x': '1', 'y': '2', 'z': 'abc'}</pre>
<p>And just like that, we’ve created our dictionary.</p>
<p>Of course, we could also use a dictionary comprehension:</p>
<pre>&gt;&gt;&gt; { item.split('=')[0] : item.split('=')[1] 
    for item in query_string.split('&amp;') }
{'a': '1', 'b': '2', 'c': 'xyz'}</pre>
<p>Now, none of the steps here was particularly difficult. Indeed, while the syntax of comprehensions can be a bit complex, the real difficulty here was seeing the original string, and immediately thinking, “Wait, if I can just turn that into a list, then I can easily create a dictionary from that.”</p>
<p>These sorts of transformations are everywhere, and they allow us to take seemingly difficult tasks and turn them into relatively simple ones.</p>
	</div>

	
	</div></body></html>