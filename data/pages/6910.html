<html><body><div><article itemscope="" itemtype="http://schema.org/BlogPosting" class="post type-post">
    <p><img src="http://www.idiotinside.com/static/uploads/2015/09/basic-auth-django-flask.png" alt="Basic Authentication in Django &amp; Flask"/></p>

<h2 id="basic-authentication">Basic Authentication</h2>
<p>HTTP Basic authentication implementation is the simplest technique for enforcing access controls to web pages because it doesn't require cookies, session identifier and login pages. Rather, HTTP Basic authentication uses static, standard fields in the HTTP header which means that no handshakes have to be done in anticipation. They are merely encoded with Base64 in transit, but not encrypted or hashed in any way. <em><strong>Basic Authentication is, therefore, typically used over HTTPS.</strong></em></p>

<h2 id="django">Django</h2>
<p>Django is a powerful web framework, created in Python, which follows the DRY (Don't repeat yourself) ideology. Django apps are reusable by design and Extremely easy to unit-test.</p>

<p>Since you landed this tutorial, I am assuming you already know how to create a basic project in Django. 
This basic app deals with creating an app in django, url routing, creating models, enabling administration panel, templating. So basic knowledge in creating django apps is required.</p>

<p>This django application helps to create pages using django administration panel. basic auth is enabled only for pages which are marked as private. 
so when processing a page request, the app processes the request and pops up for authentication if the requested page is selected a protected.</p>

<p>Lets create the django app,</p>

<h4 id="install-django">Install Django</h4>
<p><code>pip install Django</code> <em>It is recommended to use <a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/" target="_blank">Virtual Environment</a>.</em></p>

<h4 id="start-django-project">Start django project</h4>
<p><code>django-admin startproject basic_auth_django</code></p>

<h4 id="create-pages-app">Create pages app</h4>
<p><code>python manage.py startapp pages</code></p>

<p>If you need any modifications in model make changes and migrate new model definition. Or just clone/copy the code for this <a href="https://github.com/sureshdsk/basic-auth-django" target="_blank">demo django application from github</a>.</p>

<h4 id="django-project-structure">Django project structure:</h4>
<ul class="no-left-margin directory-tree">
 <li>basic_auth_django/
  <ul>
   <li>basic_auth_django/
       <ul>
            <li>__init__.py</li>
            <li>settings.py</li>
            <li>urls.py</li>
            <li>wsgi.py</li>
       </ul>
   </li>
   <li>pages/
        <ul>
            <li>migrations/</li>
            <li>__init__.py</li>
            <li>admin.py</li>
            <li>models.py</li>
            <li>tests.py</li>
            <li>urls.py</li>
            <li><em>views.py</em></li>
        </ul>
   </li>
   <li>templates/
        <ul>
            <li>pages/
                <ul>
                    <li>404.html</li>
                    <li>index.html</li>
                    <li>page.html</li>
                </ul>
            </li>
        </ul>
   </li>
   <li>db.sqlite3</li>
   <li>manage.py</li>
   <li>requirements.txt</li>
  </ul>
 </li>
</ul>

<h4 id="create--migrate-models">Create &amp; Migrate models</h4>
<p><code>python manage.py makemigrations pages</code> <br/>
<code>python manage.py migrate</code></p>

<h3 id="basic-authentication-code-snippet">Basic authentication code snippet</h3>
<div class="prism window">

<div class="window-body">
<pre data-line="" class="line-numbers code-output" id="code1">
<code class="prism-code language-python">
import base64
from django.contrib.auth import authenticate
from django.core.exceptions import ObjectDoesNotExist
from django.http import HttpResponse, JsonResponse
from django.shortcuts import render_to_response
from .models import Page


def page_index(request):
    pages = Page.objects.all()
    return render_to_response('pages/index.html', {"pages": pages})

def page_view(request, slug, **kwargs):
    try:
        page = Page.objects.get(page_slug=slug)
    except ObjectDoesNotExist:
        return render_to_response('pages/404.html')

    # If private page do basic auth
    if page.is_private:
        if 'HTTP_AUTHORIZATION' in request.META:
            auth = request.META['HTTP_AUTHORIZATION'].split()
            if len(auth) == 2:
                if auth[0].lower() == "basic":
                    uname, passwd = base64.b64decode(auth[1]).split(':')
                    user = authenticate(username=uname, password=passwd)
                    if user is not None and user.is_active:
                        request.user = user

                        return render_to_response('pages/page.html', {"page": page})

        response = HttpResponse()
        response.status_code = 401
        response['WWW-Authenticate'] = 'Basic realm="%s"' % "Basci Auth Protected"
        return response
    else:
        return render_to_response('pages/page.html', {"page": page})
</code>
</pre>
</div></div>

<h4 id="create-admin">Create admin</h4>
<p>Create new admin user to access django admin panel. <br/>
<code>python manage.py createsuperuser</code></p>

<h2 id="demo">Demo</h2>

<p><code>python manage.py runserver</code></p>

<h5 id="admin-panel">Admin panel</h5>
<p><img src="http://www.idiotinside.com/static/uploads/2015/09/django-admin.png" alt="django"/></p>

<p>Login into the django admin panel via http://127.0.0.1:8000/admin and create pages.</p>

<h5 id="add-pages">Add pages</h5>
<p><img src="http://www.idiotinside.com/static/uploads/2015/09/django-add-pages.png" alt="django"/></p>

<p>visit http://127.0.0.1:8000/pages/ to see list of pages created via django admin. visit one of the private pages and it will prompt for authentication.</p>

<h5 id="basic-auth-demo">Basic auth demo</h5>
<p><img src="http://www.idiotinside.com/static/uploads/2015/09/django-basic-auth.png" alt="django"/></p>

<h3 id="download">Download</h3>
<p class="text-center"><a class="button success no-bottom-margin" href="https://github.com/sureshdsk/basic-auth-django" target="_blank"> <i class="fa fa-github fa-2x"/> Download From Github</a></p>
<p> </p>
<hr/>

<p> </p>

<h2 id="flask">Flask</h2>
<p>Flask is a lightweight, micro web development framework for Python. Compared to the higher-level frameworks, itâs much more flexible with its powerful API.</p>
<p>This below flask app is very simple flat application which has two pages index and /private. private page is protected by basic auth. User name and password can be configured in check_auth method.</p>

<h4 id="install-flask">Install Flask</h4>
<p>You may follow <a href="http://flask.pocoo.org/docs/0.10/installation/" target="_blank">official flask documentation</a>. <em>It is recommended to use <a href="http://docs.python-guide.org/en/latest/dev/virtualenvs/" target="_blank">Virtual Environment</a></em>. Follow Flask docs or simply install flask with <code>pip install Flask</code></p>

<h2 id="code-example-in-flask">Code example in Flask</h2>
<p>Flask project structure:</p>


<div class="prism window">

<div class="window-body">
<pre data-line="" class="line-numbers code-output" id="code2">
<code class="prism-code language-python">
from functools import wraps
from flask import Flask, request, Response
app = Flask(__name__)

def check_auth(username, password):
    """This function is called to check if a username /
    password combination is valid.
    """
    return username == 'admin' and password == 'secret'

def authenticate():
    """Sends a 401 response that enables basic auth"""
    return Response(
    'Could not verify your access level for that URL.\n'
    'You have to login with proper credentials', 401,
    {'WWW-Authenticate': 'Basic realm="Login Required"'})

def requires_auth(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        auth = request.authorization
        if not auth or not check_auth(auth.username, auth.password):
            return authenticate()
        return f(*args, **kwargs)
    return decorated

@app.route("/")
def hello():
    return "Hello World!"

@app.route("/private")
@requires_auth  #requires_auth decorator for basic auth
def private_page():
    return "Hello I'm Private!!"


if __name__ == "__main__":
    app.run()
</code>
</pre>
</div></div>

<h3 id="run-the-flask-application">Run the flask application</h3>
<p><code>python app.py</code></p>

<h3 id="demo-1">Demo</h3>
<p>Visit http://localhost:5000/private and you will be prompted for authentication. User name is admin and Password is secret.
<img src="http://www.idiotinside.com/static/uploads/2015/09/flask-basic-auth.png" alt="django"/></p>

<h4 id="download-1">Download</h4>

<p class="text-center"><a class="button success" href="https://github.com/sureshdsk/basic-auth-flask" target="_blank"> <i class="fa fa-github fa-2x"/> Download From Github</a></p>

  </article>
</div></body></html>