<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-django-push-notifications" class="anchor" href="#django-push-notifications" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>django-push-notifications</h1>
<a href="https://travis-ci.org/jleclanche/django-push-notifications"><img alt="https://api.travis-ci.org/jleclanche/django-push-notifications.png" src="https://camo.githubusercontent.com/9c1f72c4bb9ced7fec8ac7ea98521321b2824a1f/68747470733a2f2f6170692e7472617669732d63692e6f72672f6a6c65636c616e6368652f646a616e676f2d707573682d6e6f74696669636174696f6e732e706e67" data-canonical-src="https://api.travis-ci.org/jleclanche/django-push-notifications.png"/></a>
<p>A minimal Django app that implements Device models that can send messages through APNS and GCM.</p>
<dl>
<dt>The app implements two models: <code>GCMDevice</code> and <code>APNSDevice</code>. Those models share the same attributes:</dt>
<dd><ul>
<li><code>name</code> (optional): A name for the device.</li>
<li><code>active</code> (default True): A boolean that determines whether the device will be sent notifications.</li>
<li><code>user</code> (optional): A foreign key to auth.User, if you wish to link the device to a specific user.</li>
<li><code>device_id</code> (optional): A UUID for the device obtained from Android/iOS APIs, if you wish to uniquely identify it.</li>
<li><code>registration_id</code> (required): The GCM registration id or the APNS token for the device.</li>
</ul>
</dd>
</dl>
<p>The app also implements an admin panel, through which you can test single and bulk notifications. Select one or more
GCM or APNS devices and in the action dropdown, select "Send test message" or "Send test message in bulk", accordingly.
Note that sending a non-bulk test message to more than one device will just iterate over the devices and send multiple
single messages.</p>
<a name="user-content-dependencies"/>
<h2><a id="user-content-dependencies" class="anchor" href="#dependencies" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Dependencies</h2>
<p>Django 1.8 is required. Support for older versions is available in the release 1.2.1.</p>
<p>Tastypie support should work on Tastypie 0.11.0 and newer.</p>
<p>Django REST Framework support should work on DRF version 3.0 and newer.</p>
<a name="user-content-setup"/>
<h2><a id="user-content-setup" class="anchor" href="#setup" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setup</h2>
<p>You can install the library directly from pypi using pip:</p>
<div class="highlight highlight-source-shell"><pre>$ pip install django-push-notifications</pre></div>
<p>Edit your settings.py file:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">INSTALLED_APPS</span> <span class="pl-k">=</span> (
        <span class="pl-c1">...</span>
        <span class="pl-s"><span class="pl-pds">"</span>push_notifications<span class="pl-pds">"</span></span>
)

<span class="pl-c1">PUSH_NOTIFICATIONS_SETTINGS</span> <span class="pl-k">=</span> {
        <span class="pl-s"><span class="pl-pds">"</span>GCM_API_KEY<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>[your api key]<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>APNS_CERTIFICATE<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>/path/to/your/certificate.pem<span class="pl-pds">"</span></span>,
}</pre></div>
<div>
<p>Note</p>
<p>If you are planning on running your project with <code>DEBUG=True</code>, then make sure you have set the
<em>development</em> certificate as your <code>APNS_CERTIFICATE</code>. Otherwise the app will not be able to connect to the correct host. See <a href="#settings">settings</a> for details.</p>
</div>
<p>You can learn more about APNS certificates <a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/ProvisioningDevelopment.html">here</a>.</p>
<p>Native Django migrations are in use. <code>manage.py migrate</code> will install and migrate all models.</p>
<a name="user-content-settings-list"/>
<h2><a id="user-content-settings-list" class="anchor" href="#settings-list" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Settings list</h2>
<p>All settings are contained in a <code>PUSH_NOTIFICATIONS_SETTINGS</code> dict.</p>
<p>In order to use GCM, you are required to include <code>GCM_API_KEY</code>.
For APNS, you are required to include <code>APNS_CERTIFICATE</code>.</p>
<ul>
<li><p><code>APNS_CERTIFICATE</code>: Absolute path to your APNS certificate file. Certificates with passphrases are not supported.</p>
</li>
<li><p><code>APNS_CA_CERTIFICATES</code>: Absolute path to a CA certificates file for APNS. Optional - do not set if not needed. Defaults to None.</p>
</li>
<li><p><code>GCM_API_KEY</code>: Your API key for GCM.</p>
</li>
<li><dl>
<dt><code>APNS_HOST</code>: The hostname used for the APNS sockets.</dt>
<dd><ul>
<li>When <code>DEBUG=True</code>, this defaults to <code>gateway.sandbox.push.apple.com</code>.</li>
<li>When <code>DEBUG=False</code>, this defaults to <code>gateway.push.apple.com</code>.</li>
</ul>
</dd>
</dl>
</li>
<li><p><code>APNS_PORT</code>: The port used along with APNS_HOST. Defaults to 2195.</p>
</li>
<li><p><code>GCM_POST_URL</code>: The full url that GCM notifications will be POSTed to. Defaults to <a href="https://android.googleapis.com/gcm/send">https://android.googleapis.com/gcm/send</a>.</p>
</li>
<li><p><code>GCM_MAX_RECIPIENTS</code>: The maximum amount of recipients that can be contained per bulk message. If the <code>registration_ids</code> list is larger than that number, multiple bulk messages will be sent. Defaults to 1000 (the maximum amount supported by GCM).</p>
</li>
<li><p><code>USER_MODEL</code>: Your user model of choice. Eg. <code>myapp.User</code>. Defaults to <code>settings.AUTH_USER_MODEL</code>.</p>
</li>
</ul>
<a name="user-content-sending-messages"/>
<h2><a id="user-content-sending-messages" class="anchor" href="#sending-messages" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Sending messages</h2>
<p>GCM and APNS services have slightly different semantics. The app tries to offer a common interface for both when using the models.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> push_notifications.models <span class="pl-k">import</span> APNSDevice, GCMDevice

device <span class="pl-k">=</span> GCMDevice.objects.get(<span class="pl-v">registration_id</span><span class="pl-k">=</span>gcm_reg_id)
<span class="pl-c"># The first argument will be sent as "message" to the intent extras Bundle</span>
<span class="pl-c"># Retrieve it with intent.getExtras().getString("message")</span>
device.send_message(<span class="pl-s"><span class="pl-pds">"</span>You've got mail<span class="pl-pds">"</span></span>)
<span class="pl-c"># If you want to customize, send an extra dict and a None message.</span>
<span class="pl-c"># the extras dict will be mapped into the intent extras Bundle.</span>
<span class="pl-c"># For dicts where all values are keys this will be sent as url parameters,</span>
<span class="pl-c"># but for more complex nested collections the extras dict will be sent via</span>
<span class="pl-c"># the bulk message api.</span>
device.send_message(<span class="pl-c1">None</span>, <span class="pl-v">extra</span><span class="pl-k">=</span>{<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>})

device <span class="pl-k">=</span> APNSDevice.objects.get(<span class="pl-v">registration_id</span><span class="pl-k">=</span>apns_token)
device.send_message(<span class="pl-s"><span class="pl-pds">"</span>You've got mail<span class="pl-pds">"</span></span>) <span class="pl-c"># Alert message may only be sent as text.</span>
device.send_message(<span class="pl-c1">None</span>, <span class="pl-v">badge</span><span class="pl-k">=</span><span class="pl-c1">5</span>) <span class="pl-c"># No alerts but with badge.</span>
device.send_message(<span class="pl-c1">None</span>, <span class="pl-v">badge</span><span class="pl-k">=</span><span class="pl-c1">1</span>, <span class="pl-v">extra</span><span class="pl-k">=</span>{<span class="pl-s"><span class="pl-pds">"</span>foo<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>bar<span class="pl-pds">"</span></span>}) <span class="pl-c"># Silent message with badge and added custom data.</span></pre></div>
<div>
<p>Note</p>
<p>APNS does not support sending payloads that exceed 2048 bytes (increased from 256 in 2014).
The message is only one part of the payload, if
once constructed the payload exceeds the maximum size, an <code>APNSDataOverflow</code> exception will be raised before anything is sent.</p>
</div>
<a name="user-content-sending-messages-in-bulk"/>
<h2><a id="user-content-sending-messages-in-bulk" class="anchor" href="#sending-messages-in-bulk" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Sending messages in bulk</h2>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> push_notifications.models <span class="pl-k">import</span> APNSDevice, GCMDevice

devices <span class="pl-k">=</span> GCMDevice.objects.filter(<span class="pl-v">user__first_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>James<span class="pl-pds">"</span></span>)
devices.send_message(<span class="pl-s"><span class="pl-pds">"</span>Happy name day!<span class="pl-pds">"</span></span>)</pre></div>
<p>Sending messages in bulk makes use of the bulk mechanics offered by GCM and APNS. It is almost always preferable to send
bulk notifications instead of single ones.</p>
<a name="user-content-sending-messages-to-topic-members"/>
<h2><a id="user-content-sending-messages-to-topic-members" class="anchor" href="#sending-messages-to-topic-members" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Sending messages to topic members</h2>
<p>GCM topic messaging allows your app server to send a message to multiple devices that have opted in to a particular topic. Based on the publish/subscribe model, topic messaging supports unlimited subscriptions per app. Developers can choose any topic name that matches the regular expression, "/topics/[a-zA-Z0-9-_.~%]+".</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> push_notifications.gcm <span class="pl-k">import</span> gcm_send_message

<span class="pl-c"># First param is "None" because no Registration_id is needed, the message will be sent to all devices subscribed to the topic.</span>
gcm_send_message(<span class="pl-c1">None</span>, <span class="pl-s"><span class="pl-pds">"</span>Hello members of my_topic!<span class="pl-pds">"</span></span>, <span class="pl-v">topic</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>/topics/my_topic<span class="pl-pds">'</span></span>)</pre></div>
<p>Reference: <a href="https://developers.google.com/cloud-messaging/topic-messaging">GCM Documentation</a></p>
<a name="user-content-administration"/>
<h2><a id="user-content-administration" class="anchor" href="#administration" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Administration</h2>
<p>APNS devices which are not receiving push notifications can be set to inactive by two methods.  The web admin interface for
APNS devices has a "prune devices" option.  Any selected devices which are not receiving notifications will be set to inactive <a href="#id2" id="user-content-id1">[1]</a>.
There is also a management command to prune all devices failing to receive notifications:</p>
<div class="highlight highlight-source-shell"><pre>$ python manage.py prune_devices</pre></div>
<p>This removes all devices which are not receiving notifications.</p>
<p>For more information, please refer to the APNS feedback <a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/CommunicatingWIthAPS.html">service</a>.</p>
<a name="user-content-exceptions"/>
<h2><a id="user-content-exceptions" class="anchor" href="#exceptions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Exceptions</h2>
<ul>
<li><code>NotificationError(Exception)</code>: Base exception for all notification-related errors.</li>
<li><code>gcm.GCMError(NotificationError)</code>: An error was returned by GCM. This is never raised when using bulk notifications.</li>
<li><code>apns.APNSError(NotificationError)</code>: Something went wrong upon sending APNS notifications.</li>
<li><code>apns.APNSDataOverflow(APNSError)</code>: The APNS payload exceeds its maximum size and cannot be sent.</li>
</ul>
<a name="user-content-tastypie-support"/>
<h2><a id="user-content-tastypie-support" class="anchor" href="#tastypie-support" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Tastypie support</h2>
<p>The app includes tastypie-compatible resources in push_notifications.api.tastypie. These can be used as-is, or as base classes
for more involved APIs.
The following resources are available:</p>
<ul>
<li><code>APNSDeviceResource</code></li>
<li><code>GCMDeviceResource</code></li>
<li><code>APNSDeviceAuthenticatedResource</code></li>
<li><code>GCMDeviceAuthenticatedResource</code></li>
</ul>
<p>The base device resources will not ask for authentication, while the authenticated ones will link the logged in user to
the device they register.
Subclassing the authenticated resources in order to add a <code>SameUserAuthentication</code> and a user <code>ForeignKey</code> is recommended.</p>
<p>When registered, the APIs will show up at <code>&lt;api_root&gt;/device/apns</code> and <code>&lt;api_root&gt;/device/gcm</code>, respectively.</p>
<a name="user-content-django-rest-framework-drf-support"/>
<h2><a id="user-content-django-rest-framework-drf-support" class="anchor" href="#django-rest-framework-drf-support" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Django REST Framework (DRF) support</h2>
<p>ViewSets are available for both APNS and GCM devices in two permission flavors:</p>

<p>When creating an <code>APNSDevice</code>, the <code>registration_id</code> is validated to be a 64-character or 200-character hexadecimal string. Since 2016, device tokens are to be increased from 32 bytes to 100 bytes.</p>
<p>Routes can be added one of two ways:</p>

<pre>from push_notifications.api.rest_framework import APNSDeviceAuthorizedViewSet, GCMDeviceAuthorizedViewSet
from rest_framework.routers import DefaultRouter

router = DefaultRouter()
router.register(r'device/apns', APNSDeviceAuthorizedViewSet)
router.register(r'device/gcm', GCMDeviceAuthorizedViewSet)

urlpatterns = patterns('',
        # URLs will show up at &lt;api_root&gt;/device/apns
        url(r'^', include(router.urls)),
        # ...
)
</pre>
<ul>
<li>Using <a href="http://www.django-rest-framework.org/tutorial/6-viewsets-and-routers#binding-viewsets-to-urls-explicitly">as_view</a> (specify which views to include)</li>
</ul>
<pre>from push_notifications.api.rest_framework import APNSDeviceAuthorizedViewSet

urlpatterns = patterns('',
        # Only allow creation of devices by authenticated users
        url(r'^device/apns/?$', APNSDeviceAuthorizedViewSet.as_view({'post': 'create'}), name='create_apns_device'),
        # ...
)
</pre>
<a name="user-content-python-3-support"/>
<h2><a id="user-content-python-3-support" class="anchor" href="#python-3-support" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Python 3 support</h2>
<p><code>django-push-notifications</code> is fully compatible with Python 3.4 &amp; 3.5</p>
<table frame="void" id="user-content-id2" rules="none">

<tbody valign="top">
<tr><td><a href="#id1">[1]</a></td><td>Any devices which are not selected, but are not receiving notifications will not be deactivated on a subsequent call to "prune devices" unless another attempt to send a message to the device fails after the call to the feedback service.</td></tr>
</tbody>
</table>

</article>
  </div></body></html>