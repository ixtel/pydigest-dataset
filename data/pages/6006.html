<html><body><div><p>A simple way of 'extending' json to support additional types like datetime, Decimal and binary data.</p>








<div id="documentation">
<h2>Documentation</h2>
<p>Jsonte is just a simple and well defined way of ‘extending’ json to support some additional types.</p>
<p>The primary goal is to add support for data types that are commonly used in databases.  In particular:</p>
<ul>
<li>dates, times, and timestamps (both with and without timezones)</li>
<li>arbitrary precision numeric entries</li>
<li>binary data</li>
</ul>
<p>A secondary goal was to do this in such a way that the resulting json was easily human readable, and
also programming language agnostic.</p>
<p>The format is simple, and is always itself valid json.</p>
<pre>* A date:      { "#date": "2015-05-28" }
* A time:      { "#time": "22:12:42.381000" }
* A timestamp: { "#tstamp": "2015-05-28T22:13:42.381000" }
</pre>
<p>These are just the ISO formats for each of the above items.</p>
<pre>* A numeric entry:  { "#num": "1234.0000" }
* Some binary data: { "#bin": "SGVsbG8gV29ybGQhAA==" }
</pre>
<p>The numeric entry is encoded as a string so the degree of precision is not lost.
The binary data is just base64 encoded.</p>
<div id="key-escaping">
<h3>Key Escaping</h3>
<p>Keys in objects that start with either a hash (#) or a tidle (~) are escaped by a tidle (~) being prefixed to the key.
This is to avoid any accidental collisions with the ‘special’ object keys used.</p>
<p>So an object that would normally be encoded as { “#bin”: 1234 } would become { “~#bin”: 1234 } when encoded by jsonte,
and { “~foo”: “bar” } would become { “~~foo”: “bar” }</p>
</div>
</div>
<div id="python-implementation">
<h2>Python Implementation</h2>
<p>The python implementation is designed to be a drop-in replacement for the standard json library.</p>
<pre>import datetime
import decimal
import dateutil.tz
import jsonte

timezone = dateutil.tz.gettz('Australia/Victoria')
data = { 'now': datetime.datetime.now(),
         'now_with_tz': datetime.datetime.now(timezone),
         'today': datetime.date.today(),
         'the_time': datetime.datetime.now().time(),
         'cost': decimal.Decimal('12.50'),
         'binary': bytearray('Hello World!\x00\x01\x02'),
         '%foo': 'a',
         '#num': 1,
         '~baz': 2.0 }

serialiser = jsonte.JsonteSerialiser(indent=4, sort_keys=True)
s = serialiser.dumps(data)
data2 = serialiser.loads(s)
</pre>
<p>At this point we have</p>
<pre>&gt;&gt;&gt; data is data2
False
&gt;&gt;&gt; data == data2
True
&gt;&gt;&gt; print s
{
    "%foo": "a",
    "binary": {
        "#bin": "SGVsbG8gV29ybGQhAAEC"
    },
    "cost": {
        "#num": "12.50"
    },
    "now": {
        "#tstamp": "2015-05-28T23:43:40.454000"
    },
    "now_with_tz": {
        "#tstamp": "2015-05-28T23:43:40.454000+10:00"
    },
    "the_time": {
        "#time": "23:43:40.454000"
    },
    "today": {
        "#date": "2015-05-28"
    },
    "~#num": 1,
    "~~baz": 2.0
}
</pre>
</div>
</div></body></html>