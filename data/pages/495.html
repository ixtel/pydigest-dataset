<html><body><div><article id="post-3824" class="post-3824 post type-post status-publish format-standard hentry category-uncategorized series-python-sqlalchemy-database-tutorial" itemprop="articleBody">
				<p class="alert alert-info">Update: A review of PonyORM has been added.</p>
<h2>Overview of Python ORMs</h2>
<p>As a wonderful language, Python has lots of ORM libraries besides <a href="http://www.sqlalchemy.org/" target="_blank">SQLAlchemy</a>. In this article, we are going to take a look at several popular alternative <a href="https://en.wikipedia.org/wiki/Object-relational_mapping" target="_blank">ORM</a> libraries to better understand the big picture of the Python ORM landscape. By writing a script that reads and writes to a simple database with two tables, <code>person</code> and <code>address</code>, we will gain a better understanding about the pros and cons of each ORM library.</p>
<h2>SQLObject</h2>
<p><a title="SQLObject" href="http://sqlobject.org/" target="_blank">SQLObject</a> is a Python ORM that maps objects between a SQL database and Python. It is becoming more popular in the programming community due to its similarity to Ruby on Rails' ActiveRecord pattern. The first version of SQLObject was released in October 2002. It is licensed under LGPL.</p>
<p>In <a title="SQLObject" href="http://sqlobject.org/" target="_blank">SQLObject</a>, database concepts are mapped into Python in a way that's very similar to SQLAlchemy, where tables are mapped as classes, rows as instances and columns as attributes. It also provides a Python-object-based query language that makes <a href="https://en.wikipedia.org/wiki/SQL" target="_blank">SQL</a> more abstract, thus providing database agnosticity for applications.</p>
<p/>
		<div id="crayon-56d5aa9b44510634283407" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-2">2</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-4">4</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-6">6</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-8">8</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-10">10</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-12">12</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-14">14</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-16">16</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-18">18</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-20">20</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44510634283407-22">22</p><p class="crayon-num" data-line="crayon-56d5aa9b44510634283407-23">23</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44510634283407-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">pip </span><span class="crayon-e">install </span><span class="crayon-e">sqlobject</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-2"><span class="crayon-v">Downloading</span><span class="crayon-o">/</span><span class="crayon-e">unpacking </span><span class="crayon-e">sqlobject</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-3"><span class="crayon-e">Downloading </span><span class="crayon-v">SQLObject</span><span class="crayon-o">-</span><span class="crayon-cn">1.5.1.tar.gz</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">276kB</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">276kB</span><span class="crayon-h"> </span><span class="crayon-e">downloaded</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-4"><span class="crayon-e">Running </span><span class="crayon-v">setup</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-e">egg_info </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">package</span><span class="crayon-h"> </span><span class="crayon-e">sqlobject</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-6"><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no </span><span class="crayon-e">files </span><span class="crayon-e">found </span><span class="crayon-i">matching</span><span class="crayon-h"> </span><span class="crayon-s">'*.html'</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-7"><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no </span><span class="crayon-e">files </span><span class="crayon-e">found </span><span class="crayon-i">matching</span><span class="crayon-h"> </span><span class="crayon-s">'*.css'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-8"><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no </span><span class="crayon-e">files </span><span class="crayon-e">found </span><span class="crayon-i">matching</span><span class="crayon-h"> </span><span class="crayon-s">'docs/*.html'</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-9"><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no </span><span class="crayon-e">files </span><span class="crayon-e">found </span><span class="crayon-i">matching</span><span class="crayon-h"> </span><span class="crayon-s">'*.py'</span><span class="crayon-h"> </span><span class="crayon-e">under </span><span class="crayon-i">directory</span><span class="crayon-h"> </span><span class="crayon-s">'tests'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-10"><span class="crayon-e">Requirement </span><span class="crayon-e">already </span><span class="crayon-e">satisfied</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-st">use</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">upgrade </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-v">upgrade</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">FormEncode</span><span class="crayon-o">&gt;=</span><span class="crayon-cn">1.1.1</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">Users</span><span class="crayon-o">/</span><span class="crayon-v">xiaonuogantan</span><span class="crayon-o">/</span><span class="crayon-v">python2</span><span class="crayon-o">-</span><span class="crayon-v">workspace</span><span class="crayon-o">/</span><span class="crayon-v">lib</span><span class="crayon-o">/</span><span class="crayon-v">python2</span><span class="crayon-sy">.</span><span class="crayon-cn">7</span><span class="crayon-o">/</span><span class="crayon-v">site</span><span class="crayon-o">-</span><span class="crayon-e">packages</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">from </span><span class="crayon-v">sqlobject</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-11"><span class="crayon-e">Installing </span><span class="crayon-e">collected </span><span class="crayon-v">packages</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">sqlobject</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-12"><span class="crayon-e">Running </span><span class="crayon-v">setup</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-e">install </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">sqlobject</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-13"><span class="crayon-e">changing </span><span class="crayon-e">mode </span><span class="crayon-e">of </span><span class="crayon-v">build</span><span class="crayon-o">/</span><span class="crayon-v">scripts</span><span class="crayon-o">-</span><span class="crayon-cn">2.7</span><span class="crayon-o">/</span><span class="crayon-v">sqlobject</span><span class="crayon-o">-</span><span class="crayon-e">admin </span><span class="crayon-i">from</span><span class="crayon-h"> </span><span class="crayon-cn">644</span><span class="crayon-h"> </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-cn">755</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-14"><span class="crayon-e">changing </span><span class="crayon-e">mode </span><span class="crayon-e">of </span><span class="crayon-v">build</span><span class="crayon-o">/</span><span class="crayon-v">scripts</span><span class="crayon-o">-</span><span class="crayon-cn">2.7</span><span class="crayon-o">/</span><span class="crayon-v">sqlobject</span><span class="crayon-o">-</span><span class="crayon-e">convertOldURI </span><span class="crayon-i">from</span><span class="crayon-h"> </span><span class="crayon-cn">644</span><span class="crayon-h"> </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-cn">755</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-15"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-16"><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no </span><span class="crayon-e">files </span><span class="crayon-e">found </span><span class="crayon-i">matching</span><span class="crayon-h"> </span><span class="crayon-s">'*.html'</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-17"><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no </span><span class="crayon-e">files </span><span class="crayon-e">found </span><span class="crayon-i">matching</span><span class="crayon-h"> </span><span class="crayon-s">'*.css'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-18"><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no </span><span class="crayon-e">files </span><span class="crayon-e">found </span><span class="crayon-i">matching</span><span class="crayon-h"> </span><span class="crayon-s">'docs/*.html'</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-19"><span class="crayon-v">warning</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no </span><span class="crayon-e">files </span><span class="crayon-e">found </span><span class="crayon-i">matching</span><span class="crayon-h"> </span><span class="crayon-s">'*.py'</span><span class="crayon-h"> </span><span class="crayon-e">under </span><span class="crayon-i">directory</span><span class="crayon-h"> </span><span class="crayon-s">'tests'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-20"><span class="crayon-e">changing </span><span class="crayon-e">mode </span><span class="crayon-v">of</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">Users</span><span class="crayon-o">/</span><span class="crayon-v">xiaonuogantan</span><span class="crayon-o">/</span><span class="crayon-v">python2</span><span class="crayon-o">-</span><span class="crayon-v">workspace</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-v">sqlobject</span><span class="crayon-o">-</span><span class="crayon-e">admin </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-cn">755</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-21"><span class="crayon-e">changing </span><span class="crayon-e">mode </span><span class="crayon-v">of</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">Users</span><span class="crayon-o">/</span><span class="crayon-v">xiaonuogantan</span><span class="crayon-o">/</span><span class="crayon-v">python2</span><span class="crayon-o">-</span><span class="crayon-v">workspace</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-v">sqlobject</span><span class="crayon-o">-</span><span class="crayon-e">convertOldURI </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-cn">755</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44510634283407-22"><span class="crayon-e">Successfully </span><span class="crayon-e">installed </span><span class="crayon-e">sqlobject</span></p><p class="crayon-line" id="crayon-56d5aa9b44510634283407-23"><span class="crayon-e">Cleaning </span><span class="crayon-v">up</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p/>
		<div id="crayon-56d5aa9b44518387387834" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44518387387834-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">sqlobject </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">StringCol</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">SQLObject</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ForeignKey</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">sqlhub</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">connectionForURI</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44518387387834-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">sqlhub</span><span class="crayon-sy">.</span><span class="crayon-v">processConnection</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">connectionForURI</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:/:memory:'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44518387387834-3"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44518387387834-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">SQLObject</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b44518387387834-5"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">StringCol</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44518387387834-6"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b44518387387834-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">SQLObject</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44518387387834-8"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">StringCol</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44518387387834-9"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ForeignKey</span><span class="crayon-sy">(</span><span class="crayon-s">'Person'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44518387387834-10"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b44518387387834-11"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-e">createTable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44518387387834-12"><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5aa9b44518387387834-13"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-e">createTable</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44518387387834-14"><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>The code above created two simple tables: <code>person</code> and <code>address</code>. To create or insert records into these two tables, we simply instantiate a person and an address like normal Python objects:</p>
<p/>
		<div id="crayon-56d5aa9b4451b520790722" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4451b520790722-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451b520790722-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-o">=</span><span class="crayon-s">'address'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-o">=</span><span class="crayon-v">p</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4451b520790722-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451b520790722-4"> </p><p class="crayon-line" id="crayon-56d5aa9b4451b520790722-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451b520790722-6"><span class="crayon-o">&lt;</span><span class="crayon-v">address</span><span class="crayon-o">&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p> </p>
<p>To get or retrieve the new records from the database, we use the magical <code>q</code> object attached to the <code>Person</code> and <code>Address</code> classes:</p>
<p/>
		<div id="crayon-56d5aa9b4451d640594452" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4451d640594452-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">persons</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-k ">select</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-v">q</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451d640594452-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">persons</span></p><p class="crayon-line" id="crayon-56d5aa9b4451d640594452-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451d640594452-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">list</span><span class="crayon-sy">(</span><span class="crayon-v">persons</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4451d640594452-5"><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451d640594452-6"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">persons</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5aa9b4451d640594452-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p1</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-i">p</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451d640594452-8"><span class="crayon-t">True</span></p><p class="crayon-line" id="crayon-56d5aa9b4451d640594452-9"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">addresses</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-k ">select</span><span class="crayon-sy">(</span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-v">q</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">p1</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451d640594452-10"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">addresses</span></p><p class="crayon-line" id="crayon-56d5aa9b4451d640594452-11"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451d640594452-12"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">list</span><span class="crayon-sy">(</span><span class="crayon-v">addresses</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4451d640594452-13"><span class="crayon-sy">[</span><span class="crayon-o">&lt;</span><span class="crayon-v">address</span><span class="crayon-o">&gt;</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451d640594452-14"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">addresses</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5aa9b4451d640594452-15"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a1</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-i">a</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4451d640594452-16"><span class="crayon-t">True</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p> </p>
<h2>Storm</h2>
<p><a title="Storm" href="https://storm.canonical.com/" target="_blank">Storm</a> is a Python ORM that maps objects between one or more databases and Python. It allows developers to construct complex queries across multiple database tables to support dynamic storage and retrieval of object information. It was developed in Python at Canonical Ltd., the company behind Ubuntu, for use in the Launchpad and Landscape applications and subsequently released in 2007 as free software. The project is released under the LGPL license and contributors are required to assign copyrights to Canonical.</p>
<p>Like SQLAlchemy and SQLObject, <a title="Storm" href="https://storm.canonical.com/" target="_blank">Storm</a> also maps tables to classes, rows to instances and columns to attributes. Compared to the other two, Storm's table classes do not have to be subclasses of a special framework-specific superclass. In SQLAlchemy, every table class is a subclass of <code>sqlalchemy.ext.declarative.declarative_bas</code>. In SQLObject, every table class is a subclass of <code>sqlobject.SQLObject</code>.</p>
<p>Similar to SQLAlchemy, Storm's <code>Store</code> object acts as a surrogate to the backend database, where all the operations are cached in-memory and <code>committed</code> into the database once the method commit is called on the store. Each store holds its own set of mapped Python database objects, just like a SQLAlchemy session holding different sets of Python objects.</p>
<p>Specific versions of Storm can be downloaded from <a title="Storm Downloads" href="https://launchpad.net/storm/+download" target="_blank">the download page</a>. In this article, the example code is written in Storm version 0.20.</p>
<p/>
		<div id="crayon-56d5aa9b44521043260333" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-2">2</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-4">4</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-6">6</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-8">8</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-10">10</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-12">12</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-14">14</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-16">16</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-18">18</p><p class="crayon-num" data-line="crayon-56d5aa9b44521043260333-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44521043260333-20">20</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44521043260333-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">storm</span><span class="crayon-sy">.</span><span class="crayon-k ">locals</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">Int</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Reference</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">Unicode</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">create_database</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Store</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-2"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-3"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">create_database</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Store</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-6"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-7"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-8"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-k ">object</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-9"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">__storm_table__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'person'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-10"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-k ">id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">Int</span><span class="crayon-sy">(</span><span class="crayon-v">primary</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-11"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">Unicode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-12"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-13"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-14"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-k ">object</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-15"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">__storm_table__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'address'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-16"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-k ">id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">Int</span><span class="crayon-sy">(</span><span class="crayon-v">primary</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-17"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">Unicode</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-18"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">person_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">Int</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44521043260333-19"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Reference</span><span class="crayon-sy">(</span><span class="crayon-v">person_id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44521043260333-20"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>The code above created an in-memory sqlite database and a <em>store</em> to reference that database object. A Storm store is similar to a SQLAlchemy DBSession object, both of which manage the life cycles of instance objects attached to them. For example, the following code creates a person and an address, and inserts both records into the database by flushing the store.</p>
<p/>
		<div id="crayon-56d5aa9b44523809909519" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-2">2</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-4">4</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-6">6</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-8">8</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-10">10</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-12">12</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-14">14</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-16">16</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-18">18</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-20">20</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-22">22</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-24">24</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-26">26</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-28">28</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-30">30</p><p class="crayon-num" data-line="crayon-56d5aa9b44523809909519-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44523809909519-32">32</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44523809909519-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-s">"CREATE TABLE person "</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-2"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-s">"(id INTEGER PRIMARY KEY, name VARCHAR)"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">execute</span><span class="crayon-sy">(</span><span class="crayon-s">"CREATE TABLE address "</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-5"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-s">"(id INTEGER PRIMARY KEY, address VARCHAR, person_id INTEGER, "</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-6"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-s">" FOREIGN KEY(person_id) REFERENCES person(id))"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-8"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-9"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'person'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-10"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-v">person</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-11"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-12"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-13"><span class="crayon-t">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'person'</span><span class="crayon-h"> </span><span class="crayon-c"># Notice that person.id is None since the Person instance is not attached to a valid database store yet.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-14"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">add</span><span class="crayon-sy">(</span><span class="crayon-v">person</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-15"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-16"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-17"><span class="crayon-t">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'person'</span><span class="crayon-h"> </span><span class="crayon-c"># Since the store hasn't flushed the Person instance into the sqlite database yet, person.id is still None.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-18"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">flush</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-19"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-20"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'person'</span><span class="crayon-h"> </span><span class="crayon-c"># Now the store has flushed the Person instance, we got an id value for person.</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-21"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-22"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">person</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-23"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'address'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-24"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">address</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-25"><span class="crayon-t">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'address'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-26"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-e">person</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-27"><span class="crayon-t">True</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-28"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">add</span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-29"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-30"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">flush</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44523809909519-31"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">address</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44523809909519-32"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'address'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>To get or retrieve the inserted Person and Address objects, we call <code>store.find()</code> to find them:</p>
<p/>
		<div id="crayon-56d5aa9b44526818631105" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44526818631105-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44526818631105-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44526818631105-3"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'person'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44526818631105-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-v">Address</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44526818631105-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44526818631105-6"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">store</span><span class="crayon-sy">.</span><span class="crayon-e">find</span><span class="crayon-sy">(</span><span class="crayon-v">Address</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44526818631105-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">address</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44526818631105-8"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'address'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<h2>Django's ORM</h2>
<p><a href="https://www.djangoproject.com/" target="_blank">Django</a> is a free and open source web application framework whose ORM is built tightly into the system. After its initial release, Django becomes more and more popular due to its straightforward design and easy-to-use web-ready features. It was released under the BSD license in July 2005. Since Django's ORM is built tightly into the web framework, it's not recommended, although possible, to use its ORM in a standalone non-Django Python application.</p>
<p>Django, one of the most popular Python web frameworks, has its own dedicated ORM. Compared to SQLAlchemy, Django's ORM is more geared towards direct SQL object manipulation where it exposes a plain and direct mapping between database tables and Python classes.</p>
<p/>
		<div id="crayon-56d5aa9b44529475826149" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-2">2</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-4">4</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-6">6</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-8">8</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-10">10</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-12">12</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-14">14</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-16">16</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-18">18</p><p class="crayon-num" data-line="crayon-56d5aa9b44529475826149-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44529475826149-20">20</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44529475826149-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">django</span><span class="crayon-o">-</span><span class="crayon-v">admin</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-e">startproject </span><span class="crayon-i">demo</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-i">demo</span></p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-3"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-e">syncdb</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-4"><span class="crayon-e">Creating </span><span class="crayon-i">tables</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-5"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">django_admin_log</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-6"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">auth_permission</span></p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-7"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">auth_group_permissions</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-8"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">auth_group</span></p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-9"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">auth_user_groups</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-10"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">auth_user_user_permissions</span></p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-11"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">auth_user</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-12"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">django_content_type</span></p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-13"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">django_session</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-14"> </p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-15"><span class="crayon-e">You </span><span class="crayon-e">just </span><span class="crayon-e">installed </span><span class="crayon-i">Django</span><span class="crayon-s">'s auth system, which means you don'</span><span class="crayon-i">t</span><span class="crayon-h"> </span><span class="crayon-e">have </span><span class="crayon-e">any </span><span class="crayon-e">superusers </span><span class="crayon-v">defined</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-16"><span class="crayon-e">Would </span><span class="crayon-e">you </span><span class="crayon-e">like </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-e">create </span><span class="crayon-e">one </span><span class="crayon-v">now</span><span class="crayon-sy">?</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">yes</span><span class="crayon-o">/</span><span class="crayon-v">no</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">no</span></p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-17"><span class="crayon-e">Installing </span><span class="crayon-e">custom </span><span class="crayon-i">SQL</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-18"><span class="crayon-e">Installing </span><span class="crayon-i">indexes</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b44529475826149-19"><span class="crayon-i">Installed</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-t">object</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-i">from</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44529475826149-20"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-v">shell</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>Since we cannot execute Django's code without creating a project first, we created a Django project 'demo' in the previous shell and entered the Django shell to test our ORM example.</p>
<p/>
		<div id="crayon-56d5aa9b4452c870834102" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b4452c870834102-2">2</p><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b4452c870834102-4">4</p><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b4452c870834102-6">6</p><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b4452c870834102-8">8</p><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b4452c870834102-10">10</p><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b4452c870834102-12">12</p><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b4452c870834102-14">14</p><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b4452c870834102-16">16</p><p class="crayon-num" data-line="crayon-56d5aa9b4452c870834102-17">17</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-1"><span class="crayon-c"># demo/models.py</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452c870834102-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">django</span><span class="crayon-sy">.</span><span class="crayon-e">db </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">models</span></p><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-3"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452c870834102-4"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">models</span><span class="crayon-sy">.</span><span class="crayon-v">Model</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452c870834102-6"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">models</span><span class="crayon-sy">.</span><span class="crayon-e">TextField</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-7"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452c870834102-8"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Meta</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-9"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">         </span><span class="crayon-v">app_label</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'demo'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452c870834102-10"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-11"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452c870834102-12"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">models</span><span class="crayon-sy">.</span><span class="crayon-v">Model</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-13"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">models</span><span class="crayon-sy">.</span><span class="crayon-e">TextField</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452c870834102-14"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">models</span><span class="crayon-sy">.</span><span class="crayon-e">ForeignKey</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-15"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452c870834102-16"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Meta</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b4452c870834102-17"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">         </span><span class="crayon-v">app_label</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'demo'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>The code above declared two Python classes, <code>Person</code> and <code>Address</code>, each of which maps to a database table. Before execute any database manipulation code, we need to create the tables in a local sqlite database.</p>
<p/>
		<div id="crayon-56d5aa9b4452e129038607" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4452e129038607-1"><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-e">syncdb</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452e129038607-2"><span class="crayon-e">Creating </span><span class="crayon-i">tables</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b4452e129038607-3"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">demo_person</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452e129038607-4"><span class="crayon-e">Creating </span><span class="crayon-e">table </span><span class="crayon-e">demo_address</span></p><p class="crayon-line" id="crayon-56d5aa9b4452e129038607-5"><span class="crayon-e">Installing </span><span class="crayon-e">custom </span><span class="crayon-i">SQL</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4452e129038607-6"><span class="crayon-e">Installing </span><span class="crayon-i">indexes</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b4452e129038607-7"><span class="crayon-i">Installed</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-t">object</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-i">from</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-e">fixture</span><span class="crayon-sy">(</span><span class="crayon-v">s</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>To insert a person and an address into the database, we instantiate the corresponding objects and call the <code>save()</code> methods of those objects.</p>
<p/>
		<div id="crayon-56d5aa9b44530244045233" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44530244045233-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">demo</span><span class="crayon-sy">.</span><span class="crayon-e">models </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Person</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Address</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44530244045233-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44530244045233-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44530244045233-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44530244045233-5"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'person'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44530244045233-6"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">person</span><span class="crayon-o">=</span><span class="crayon-v">p</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-o">=</span><span class="crayon-s">'address'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44530244045233-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44530244045233-8"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-v">address</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44530244045233-9"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'address'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>To get or retrieve the person and address objects, we use the magical <code>objects</code> attribute of the model classes to fetch the objects from the database.</p>
<p/>
		<div id="crayon-56d5aa9b44532229587323" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44532229587323-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">persons</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-v">objects</span><span class="crayon-sy">.</span><span class="crayon-k ">filter</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44532229587323-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-i">persons</span></p><p class="crayon-line" id="crayon-56d5aa9b44532229587323-3"><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44532229587323-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">persons</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5aa9b44532229587323-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44532229587323-6"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'person'</span></p><p class="crayon-line" id="crayon-56d5aa9b44532229587323-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">addresses</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-v">objects</span><span class="crayon-sy">.</span><span class="crayon-k ">filter</span><span class="crayon-sy">(</span><span class="crayon-v">person</span><span class="crayon-o">=</span><span class="crayon-v">p</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44532229587323-8"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-i">addresses</span></p><p class="crayon-line" id="crayon-56d5aa9b44532229587323-9"><span class="crayon-sy">[</span><span class="crayon-o">&lt;</span><span class="crayon-v">address</span><span class="crayon-o">&gt;</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44532229587323-10"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">addresses</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5aa9b44532229587323-11"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-v">address</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44532229587323-12"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'address'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p> </p>
<h2>peewee</h2>
<p><a href="https://github.com/coleifer/peewee" target="_blank">peewee</a> is a small, expressive ORM. Compared to other ORMs, <code>peewee</code> focuses on the principal of minimalism where the API is simple and the library is easy to use and understand.</p>
<p/>
		<div id="crayon-56d5aa9b44535323548435" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44535323548435-1"><span class="crayon-e">pip </span><span class="crayon-e">install </span><span class="crayon-e">peewee</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44535323548435-2"><span class="crayon-v">Downloading</span><span class="crayon-o">/</span><span class="crayon-e">unpacking </span><span class="crayon-e">peewee</span></p><p class="crayon-line" id="crayon-56d5aa9b44535323548435-3"><span class="crayon-e">Downloading </span><span class="crayon-v">peewee</span><span class="crayon-o">-</span><span class="crayon-cn">2.1.7.tar.gz</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">1.1MB</span><span class="crayon-sy">)</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">1.1MB</span><span class="crayon-h"> </span><span class="crayon-e">downloaded</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44535323548435-4"><span class="crayon-e">Running </span><span class="crayon-v">setup</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-e">egg_info </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-t">package</span><span class="crayon-h"> </span><span class="crayon-e">peewee</span></p><p class="crayon-line" id="crayon-56d5aa9b44535323548435-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44535323548435-6"><span class="crayon-e">Installing </span><span class="crayon-e">collected </span><span class="crayon-v">packages</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">peewee</span></p><p class="crayon-line" id="crayon-56d5aa9b44535323548435-7"><span class="crayon-e">Running </span><span class="crayon-v">setup</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-e">install </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">peewee</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44535323548435-8"><span class="crayon-e">changing </span><span class="crayon-e">mode </span><span class="crayon-e">of </span><span class="crayon-v">build</span><span class="crayon-o">/</span><span class="crayon-v">scripts</span><span class="crayon-o">-</span><span class="crayon-cn">2.7</span><span class="crayon-o">/</span><span class="crayon-v">pwiz</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-i">from</span><span class="crayon-h"> </span><span class="crayon-cn">644</span><span class="crayon-h"> </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-cn">755</span></p><p class="crayon-line" id="crayon-56d5aa9b44535323548435-9"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44535323548435-10"><span class="crayon-e">changing </span><span class="crayon-e">mode </span><span class="crayon-v">of</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">Users</span><span class="crayon-o">/</span><span class="crayon-v">xiaonuogantan</span><span class="crayon-o">/</span><span class="crayon-v">python2</span><span class="crayon-o">-</span><span class="crayon-v">workspace</span><span class="crayon-o">/</span><span class="crayon-v">bin</span><span class="crayon-o">/</span><span class="crayon-v">pwiz</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-st">to</span><span class="crayon-h"> </span><span class="crayon-cn">755</span></p><p class="crayon-line" id="crayon-56d5aa9b44535323548435-11"><span class="crayon-e">Successfully </span><span class="crayon-e">installed </span><span class="crayon-e">peewee</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44535323548435-12"><span class="crayon-e">Cleaning </span><span class="crayon-v">up</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>To create a database model mapping, we implement a <code>Person</code> class and an <code>Address</code> class that map to the corresponding database tables.</p>
<p/>
		<div id="crayon-56d5aa9b44537075476946" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-2">2</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-4">4</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-6">6</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-8">8</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-10">10</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-12">12</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-14">14</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-16">16</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-18">18</p><p class="crayon-num" data-line="crayon-56d5aa9b44537075476946-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44537075476946-20">20</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44537075476946-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">peewee </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">SqliteDatabase</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">CharField</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ForeignKeyField</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Model</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-2"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">SqliteDatabase</span><span class="crayon-sy">(</span><span class="crayon-s">':memory:'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-4"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">Model</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-6"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">CharField</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-7"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-8"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Meta</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-9"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">         </span><span class="crayon-v">database</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">db</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-10"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-11"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-12"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">Model</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-13"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">CharField</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-14"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">ForeignKeyField</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-15"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-16"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-v">Meta</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-17"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">         </span><span class="crayon-v">database</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-i">db</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-18"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b44537075476946-19"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-e">create_table</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44537075476946-20"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-e">create_table</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>To insert objects into the database, we instantiate the objects and call their <code>save()</code> methods. From object creation point of view, <code>peewee</code> is very similar to Django.</p>
<p/>
		<div id="crayon-56d5aa9b4453a758752206" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4453a758752206-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453a758752206-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4453a758752206-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-o">=</span><span class="crayon-s">'address'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-o">=</span><span class="crayon-v">p</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453a758752206-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-e">save</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>To get or retrieve the objects from the database, we <code>select</code> the objects from their respective classes.</p>
<p/>
		<div id="crayon-56d5aa9b4453c021419801" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4453c021419801-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-k ">select</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">where</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453c021419801-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">person</span></p><p class="crayon-line" id="crayon-56d5aa9b4453c021419801-3"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453c021419801-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">'%r, %r'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4453c021419801-5"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'person'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453c021419801-6"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-k ">select</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">where</span><span class="crayon-sy">(</span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4453c021419801-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">'%r, %r'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">address</span><span class="crayon-sy">.</span><span class="crayon-v">address</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453c021419801-8"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">u</span><span class="crayon-s">'address'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<h2>PonyORM</h2>
<p><a href="http://ponyorm.com/" target="_blank">PonyORM</a> allows you to query the database using Python generators. These generators are translated into SQL and the results are automatically mapped into Python objects. Writing queries as Python generators makes it easy for programmers to quickly construct certain queries.</p>
<p>For example, let's use PonyORM to query the previous <code>Person</code> and <code>Address</code> models in a SQLite database.</p>
<p/>
		<div id="crayon-56d5aa9b4453e888269410" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4453e888269410-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">pony</span><span class="crayon-sy">.</span><span class="crayon-e">orm </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Database</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Required</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">Set</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453e888269410-2"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b4453e888269410-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Database</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">':memory:'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453e888269410-4"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b4453e888269410-5"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453e888269410-6"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">Entity</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b4453e888269410-7"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Required</span><span class="crayon-sy">(</span><span class="crayon-k ">unicode</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453e888269410-8"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">addresses</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">Set</span><span class="crayon-sy">(</span><span class="crayon-s">"Address"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4453e888269410-9"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453e888269410-10"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b4453e888269410-11"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">Entity</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453e888269410-12"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Required</span><span class="crayon-sy">(</span><span class="crayon-k ">unicode</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4453e888269410-13"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Required</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4453e888269410-14"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b4453e888269410-15"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">generate_mapping</span><span class="crayon-sy">(</span><span class="crayon-v">create_tables</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>Now we have a SQLite database in memory and two tables mapped to the <code>db</code> object, we can insert two objects into the database.</p>
<p/>
		<div id="crayon-56d5aa9b44541329244626" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44541329244626-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">"person"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44541329244626-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-o">=</span><span class="crayon-s">"address"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-o">=</span><span class="crayon-v">p</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44541329244626-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">commit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>The call <code>db.commit()</code> actually commits the new objects <code>p</code> and <code>a</code> into the database. Now we can query the database using the generator syntax.</p>
<p/>
		<div id="crayon-56d5aa9b44543854357077" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44543854357077-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">pony</span><span class="crayon-sy">.</span><span class="crayon-e">orm </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">select</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44543854357077-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">select</span><span class="crayon-sy">(</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">Person </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"person"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5aa9b44543854357077-3"><span class="crayon-sy">[</span><span class="crayon-v">Person</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44543854357077-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">select</span><span class="crayon-sy">(</span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">p</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">Person </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">"person"</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">name</span></p><p class="crayon-line" id="crayon-56d5aa9b44543854357077-5"><span class="crayon-i">u</span><span class="crayon-s">'person'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44543854357077-6"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">select</span><span class="crayon-sy">(</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">Address </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5aa9b44543854357077-7"><span class="crayon-sy">[</span><span class="crayon-v">Address</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44543854357077-8"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">select</span><span class="crayon-sy">(</span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">a</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">Address </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-sy">]</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-sy">.</span><span class="crayon-i">address</span></p><p class="crayon-line" id="crayon-56d5aa9b44543854357077-9"><span class="crayon-i">u</span><span class="crayon-s">'address'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<h2>SQLAlchemy</h2>
<p><a title="SQLAlchemy" href="http://www.sqlalchemy.org/" target="_blank">SQLAlchemy</a> is an open source SQL toolkit and ORM for the Python programming language released under the MIT license. It was released initially in February 2006 and written by Michael Bayer. It provides "a full suite of well known enterprise-level persistence patterns, designed for efficient and high-performing database access, adapted into a simple and Pythonic domain language". It has adopted the data mapper pattern (like Hibernate in Java) rather than the active record pattern (like the one in Ruby on Rails).</p>
<p>SQLAlchemy's unit-of-work principal makes it essential to confine all the database manipulation code to a specific database session that controls the life cycles of every object in that session. Similar to other ORMs, we start by defining subclasses of <code>declarative_base()</code> in order to map tables to Python classes.</p>
<p/>
		<div id="crayon-56d5aa9b44546940687541" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-2">2</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-4">4</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-6">6</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-8">8</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-10">10</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-12">12</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-14">14</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-16">16</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-18">18</p><p class="crayon-num" data-line="crayon-56d5aa9b44546940687541-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa9b44546940687541-20">20</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44546940687541-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">sqlalchemy </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">Column</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">String</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">ForeignKey</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-e">orm </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">relationship</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-e">declarative </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">declarative_base</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-4"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Base</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">declarative_base</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-6"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-7"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-8"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-9"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">__tablename__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'person'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-10"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-k ">id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-11"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-k ">String</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-12"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-13"><span class="crayon-o">&gt;&gt;&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-14"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-15"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">__tablename__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'address'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-16"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-k ">id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-17"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">address</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-k ">String</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-18"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">person_id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">ForeignKey</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b44546940687541-19"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-h">     </span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">relationship</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44546940687541-20"><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>Before we write any database code, we need to create an database engine for our db session.</p>
<p/>
		<div id="crayon-56d5aa9b44548049005139" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44548049005139-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">sqlalchemy </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">create_engine</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44548049005139-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">engine</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:///'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>Once we have created a database engine, we can proceed to create a database session and create tables for all the database classes previously defined as <code>Person</code> and <code>Address</code>.</p>
<p/>
		<div id="crayon-56d5aa9b4454b381407496" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4454b381407496-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-e">orm </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">sessionmaker</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4454b381407496-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">session</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">sessionmaker</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4454b381407496-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">configure</span><span class="crayon-sy">(</span><span class="crayon-v">bind</span><span class="crayon-o">=</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4454b381407496-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">Base</span><span class="crayon-sy">.</span><span class="crayon-v">metadata</span><span class="crayon-sy">.</span><span class="crayon-e">create_all</span><span class="crayon-sy">(</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>Now the <code>session</code> object becomes our unit-of-work constructor and all the subsequent database manipulation code and objects will be attached to a db session constructed by calling its <code>__init__()</code> method.</p>
<p/>
		<div id="crayon-56d5aa9b4454d390323032" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4454d390323032-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">session</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4454d390323032-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Person</span><span class="crayon-sy">(</span><span class="crayon-v">name</span><span class="crayon-o">=</span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4454d390323032-3"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">add</span><span class="crayon-sy">(</span><span class="crayon-v">p</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4454d390323032-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Address</span><span class="crayon-sy">(</span><span class="crayon-v">address</span><span class="crayon-o">=</span><span class="crayon-s">'address'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">person</span><span class="crayon-o">=</span><span class="crayon-v">p</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4454d390323032-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">add</span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>To get or retrieve the database objects, we call <code>query()</code> and <code>filter()</code> methods from the db session object.</p>
<p/>
		<div id="crayon-56d5aa9b4454f849985999" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b4454f849985999-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-k ">filter</span><span class="crayon-sy">(</span><span class="crayon-v">Person</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'person'</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4454f849985999-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span></p><p class="crayon-line" id="crayon-56d5aa9b4454f849985999-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4454f849985999-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4454f849985999-5"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'person'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4454f849985999-6"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-v">Address</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-k ">filter</span><span class="crayon-sy">(</span><span class="crayon-v">Address</span><span class="crayon-sy">.</span><span class="crayon-v">person</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">one</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa9b4454f849985999-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-k ">print</span><span class="crayon-h"> </span><span class="crayon-s">"%r, %r"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-k ">id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">a</span><span class="crayon-sy">.</span><span class="crayon-v">address</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b4454f849985999-8"><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'address'</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<p>Notice that so far we haven't committed any changes to the database yet so that the new person and address objects are not actually stored in the database yet. Calling <code>s.commit()</code> will actually commit the changes, i.e., inserting a new person and a new address, into the database.</p>
<p/>
		<div id="crayon-56d5aa9b44551743344895" class="crayon-syntax crayon-theme-idle crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover disable-anim wrap">
		
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa9b44551743344895-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">commit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa9b44551743344895-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-e">close</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div><p/>
<h2>Comparison Between Python ORMs</h2>
<p>For each Python ORM presented in this article, we are going to list their pros and cons here:</p>
<h3>SQLObject</h3>
<p><strong>Pros:</strong></p>
<ol>
<li>Adopted the easy-to-understand ActiveRecord pattern</li>
<li>A relatively small codebase</li>
</ol>
<p><strong>Cons:</strong></p>
<ol>
<li>Naming of methods and classes follow Java's camelCase style</li>
<li>Does not support database sessions to isolate unit of work</li>
</ol>
<h3>Storm</h3>
<p><strong>Pros:</strong></p>
<ol>
<li>A clean and lightweight API leading to short learning curve and long-term maintainability</li>
<li>Does not need special class constructors, nor imperative base classes</li>
</ol>
<p><strong>Cons:</strong></p>
<ol>
<li>Forcing the programmer to write manual table-creation DDL statements instead of automatically deriving it from the model class</li>
<li>Contributors of Storm have to give their contributions' copyrights to Canonical Ltd.</li>
</ol>
<h3>Django's ORM</h3>
<p><strong>Pros:</strong></p>
<ol>
<li>Easy-to-use with a short learning curve</li>
<li>Tightly integrated with Django to make it the de-factor standard when dealing with databases in Django</li>
</ol>
<p><strong>Cons:</strong></p>
<ol>
<li>Does not handle complex queries very well; forcing the developer to go back to raw SQL</li>
<li>Tightly integrated with Django; making it hard to use outside of a Django context</li>
</ol>
<h3>peewee</h3>
<p><strong>Pros:</strong></p>
<ol>
<li>A Django-ish API; making it easy-to-use</li>
<li>A lightweight implementation; making it easy to integrate with any web framework</li>
</ol>
<p><strong>Cons:</strong></p>
<ol>
<li>Does not support automatic schema migrations</li>
<li>Many-to-Many queries are not intuitive to write</li>
</ol>
<h3>SQLAlchemy</h3>
<p><strong>Pros:</strong></p>
<ol>
<li>Enterprise-level APIs; making the code robust and adaptable</li>
<li>Flexible design; making it painless to write complex queries</li>
</ol>
<p><strong>Cons:</strong></p>
<ol>
<li>The Unit-of-work concept is not common</li>
<li>A heavyweight API; leading to a long learning curve</li>
</ol>
<h3>PonyORM</h3>
<p><strong>Pros:</strong></p>
<ol>
<li>A very convenient syntax for writing queries</li>
<li>Automatic query optimization</li>
<li>Simplified setup and usage</li>
</ol>
<p><strong>Cons:</strong></p>
<ol>
<li>Not designed to process hundreds of thousands or millions of records simultaneously</li>
</ol>
<h2>Summary and Tips</h2>
<p>Compared to other ORMs, SQLAlchemy stands out in its focus on the unit-of-work concept which is prevalent whenever you write SQLAlchemy code. The DBSession concept might be hard to understand and use correctly initially, but later you will appreciate the additional complexity which reduces accidental database commit-timing-related bugs to almost zero. Dealing with multiple databases in SQLAlchemy can be tricky since each DB session is confined to one database connection. However, this kind of limitation is actually a good thing since it forces you to think hard about the interaction between multiple databases and make it easier to debug database interaction code.</p>
<p>In the future articles, we are going to fully explore more advanced use cases of SQLAlchemy to truly grasp its immensely powerful APIs.</p>




			</article>
			</div></body></html>