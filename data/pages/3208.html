<html><body><div><div class="post-body entry-content"><p>
By </p><a href="http://www.dancingbison.com">Vasudev Ram</a><p/><a href=""/>

<a href="http://en.wikipedia.org/wiki/HTML5"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/61/HTML5_logo_and_wordmark.svg/240px-HTML5_logo_and_wordmark.svg.png"/></a>
<p>
A while ago I had written this post,

</p><a href="http://jugad2.blogspot.in/2014/03/the-html5lib-python-library-and.html">The <b>html5lib</b> Python library (and Animatron :-)</a>
<p>
which shows basic usage of a </p><b>Python library</b><p> called </p><b>html5lib</b><p>, that lets you </p><b>parse HTML5 documents</b><p> and then </p><b>walk through their structure</b><p>.
</p><p>
That post uses this HTML5 document as input for the program shown in it:

</p><p>
Yesteday I modified the program (</p><b>test_html5lib.py</b><p>) shown in that earlier post, to make it </p><b>recursive</b><p>, thereby </p><b>simplifying</b><p> it. Here is the code for the resulting program, </p><b>html5_dump.py</b><p>.
</p><pre># Demo program to show how to dump the structure of 
# an HTML5 document to text, using html5lib.
# Author: Vasudev Ram.
# Copyright 2015 Vasudev Ram - http://www.dancingbison.com

import html5lib

# Define a function to dump HTML5 element info recursively, 
# given a top-level element.
def print_element(elem, indent, level):
    for sub_elem in elem:
        print "{}{}".format(indent * level, sub_elem)
        # Recursive call to print_element().
        print_element(sub_elem, indent, level + 1)

f = open("html5doc.html")
# Parse the HTML document.
tree = html5lib.parse(f)
indent = '----'
level = 0
print_element(tree, indent, level)
</pre><p>I ran the program with:</p><p>
$ </p><a href="http://jugad2.blogspot.in/2013/04/py-python-launcher-for-windows.html"><b>py</b></a><p> html5_dump.py
</p><p>
where the </p><b>py</b><p> in the command refers to </p><a href="http://jugad2.blogspot.in/2013/04/py-python-launcher-for-windows.html">py, the Python Launcher for Windows</a>
<p>
Here is the program output, which you can see is basically the same as the previous version, but, </p><a href="http://jugad2.blogspot.in/2013/12/google-gets-recursion.html">done</a> <a href="http://jugad2.blogspot.in/2008/12/like-recursion-check-this.html">using</a> <a href="http://jugad2.blogspot.in/2014/10/flattening-arbitrarily-nested-list-in.html">recursion</a><p>.
</p><pre>&lt;Element u'{http://www.w3.org/1999/xhtml}head' at 0x02978938&gt;
&lt;Element u'{http://www.w3.org/1999/xhtml}body' at 0x02978968&gt;
----&lt;Element u'{http://www.w3.org/1999/xhtml}header' at 0x02978980&gt;
--------&lt;Element u'{http://www.w3.org/1999/xhtml}h1' at 0x02978920&gt;
--------&lt;Element u'{http://www.w3.org/1999/xhtml}h2' at 0x02978B00&gt;
--------&lt;Element u'{http://www.w3.org/1999/xhtml}h3' at 0x02978AB8&gt;
----&lt;Element u'{http://www.w3.org/1999/xhtml}p' at 0x02978AE8&gt;
----&lt;Element u'{http://www.w3.org/2000/svg}svg' at 0x02978788&gt;
--------&lt;Element u'{http://www.w3.org/2000/svg}defs' at 0x02A12050&gt;
--------&lt;Element u'{http://www.w3.org/2000/svg}rect' at 0x02A12020&gt;
--------&lt;Element u'{http://www.w3.org/2000/svg}text' at 0x02A12068&gt;
----&lt;Element u'{http://www.w3.org/1999/xhtml}footer' at 0x02A12080&gt;
</pre><p>
The recursion helps in two ways: 1) recursively printing sub-elements, and 2) not having to keep track of the indentation level needed - the Python interpreter's handling of nested calls and backing out of them, takes care of that for us. See the line:
</p><pre>print_element(sub_elem, indent, level + 1)
</pre><p>However, if using deep recursion, we have to remember about </p><a href="https://google.com/search?q=python+recursion+depth">python recursion depth</a><p> issues.
</p><p>
Enjoy.
</p><p>
- </p><a href="http://jugad2.blogspot.in/p/about-vasudev-ram.html">Vasudev Ram - online Python trainer and freelance programmer</a><p/><i>Seeking alpha ...</i>
<p/><b><a href="mailto:vasudevram@gmail.com?subject=Email%20me%20about%20your%20new%20products%20and%20services">Signup to hear about my new software products.</a></b>
<p/><a href="http://www.dancingbison.com/contact.html">Contact Page</a>
<p>
Sub-feeds for my </p><a href="http://jugad2.blogspot.com/search/label/python">posts about Python</a><p> and </p><a href="http://jugad2.blogspot.com/search/label/xtopdf">posts about xtopdf</a><p>.

 </p>  
<p/>
</div>
</div></body></html>