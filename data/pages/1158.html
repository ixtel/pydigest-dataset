<html><body><div><article>
        <header>
            <p class="published">Thu 14 August 2014</p>
            <h1>Новый парсер для allmychanges.com</h1>
            <p id="share_buttons"/>
            
                <p class="tags">
                Tags: <a href="http://dev.svetlyak.ru/tag/allmychanges/">allmychanges</a>, <a href="http://dev.svetlyak.ru/tag/changelogs/">changelogs</a>
                </p>
            
            <p class="translations">
            
            </p>
        </header>
        <p>Как вы возможно знаете, проект <a href="http://allmychanges.com">allmychanges.com</a> появился на свет, как результат нашего участия в Django Dash 2013. С тех пор минул год, и всё это время проект использовал ту версию парсера ченьджлогов, которая была создана в
 Рамках хакатона. Лишь минимальные изменения были сделаны, чтобы улучшить парсинг. Отчасти это объясняется тем, что парсер код созданный второпях, было сложно модифицировать. Поэтому, некоторое время назад, я предпринял попытку переписать парсер с нуля. Так появилась вторая версия.</p>
<p>В настоящий момент оба парсера работают параллельно. Большинству пользователей сервиса видны результаты работы старого парсера, а за новым я слежу по мониторингам и визуально. Основной метрикой является общее количество версий ченьджлога, полученных тем или иным вариантом парсера.</p>
<p>До недавних пор новая версия значительно проигрывала в полноте старой. Она выдавала меньше тысячи версий, тогда как старая более 6 тысяч. Небольшое исследование показало, что происходит это из за того, что новый парсер по умолчанию трактует текст, как Markdown, и ищет номера версий только в заголовках. Однако многие разработчики не используют ни reST, ни Markdown в своих ченьджлогах. Особенно часто это встречается в перловых модулях типа <a href="https://github.com/kraih/mojo/blob/master/Changes">Mojolicious</a>.</p>
<p>Кстати, на днях вспомнил про библиотечку <a href="https://github.com/tech-angels/vandamme#changelogs-convention">Vandamme</a>, которую разработчики <a href="https://gemnasium.com/">Gemnasium</a> предлагают использовать для парсинга ченьджлогов, и еще раз перечитал их readme. Оказалось, что решение которое они придумали — вовсе не подходит для разбора произвольных записей. Все что они предлагают — использовать один, придуманный ими формат для ченьджлогов. Эти ребята явно не учитывают многообразия окружающего их мира. Как быть, например, тем, у кого описание релиза это большой документ? А это так у многих популярных проектов вроде <a href="https://github.com/django/django/tree/master/docs/releases">Django</a>.</p>
<p>Чтобы исправить ситуацию в новом парсере <a href="http://allmychanges.com">allmychanges.com</a>, я написал модуль, обрабатывающий plain text файлы.  Благо новая архитектура позволяет делать это легко и просто. И после релиза настал переломный момент:</p>
<p><img alt="" src="http://img-fotki.yandex.ru/get/6828/13558447.f/0_ae4b5_1a9b188a_L.png"/></p>
<p>Зеленая линия на этом графике — количество версий ченьджлога, выдаваемое новым парсером. Получается, что теперь полнота его даже выше чем у старой версии. Осталось немного последить за работой, сгладить шероховатости, и можно полностью переключаться на него.</p>
<p>Если кто-то хочет поучаствовать в тестировании, пишите мне, я включу вас в группу экспериментаторов.</p>

        
        
        

        
        
    </article>


            </div></body></html>