<html><body><div><div class="entry-content">
		<h1>Introduction</h1>
<p>This series of posts covers our experiences whilst running ‘Coding Dojo’ sessions over a 3 week period. Our intention is to help others to avoid our mistakes and also to provide us with a more formal way to retrospect the experiment.</p>
<p><b>Rationale</b></p>
<p>We’re currently building a product, mainly in Python, which aims to automate IT infrastructure provisioning. Most people in the team come from an ‘ops’ background and have little or no experience as full-time software developers.</p>
<p>For that reason, we wanted to find a way to increase the quality of the code that the team is producing. Increasing our code quality however, is a subset of a larger drive to create a learning environment covering both technical and non-technical topics. This is based on our belief that in order to remain relevant in the fast-paced world of IT, we need to be learning all the time, not just when we think we’re falling behind the curve.</p>
<p>With increased code quality as the main goal for these sessions, we identified the following sub-goals:</p>
<ol>
<li>Establish Test Driven Development as the standard way of implementing new features</li>
<li>Instill refactoring and clean code practices</li>
<li>Increase Python3 proficiency</li>
<li>Make these sorts of educational sessions a ‘normal’ thing that happens within the team each week</li>
</ol>
<p><b>The format</b></p>
<p>Each coding dojo involved one fixed hour of ‘classroom time’ in which the whole team would work on a kata and a second hour of ‘personal time’ which the team members could use during the sprint at a time of their choosing. We did this for two reasons:</p>
<ol>
<li>Since we were thinking of this exercise as an experiment, we wanted to limit the potential risk by trying something small first with the intention of scaling it up if the results were positive.</li>
<li>We thought that using, for example, an entire day would have had too much impact on our sprint and therefore on our planning accuracy.</li>
</ol>
<p>In terms of scope, we had no idea how quickly the team would progress, so we decided that we’d use the first session to test the water, and that we would improvise after that.</p>
<h1>The Exercise</h1>
<p><b>Choosing a kata</b></p>
<p>When choosing material for the sessions we first looked at <a href="http://craftsmanship.sv.cmu.edu/exercises/gilded-rose-kata">The Gilded Rose</a> kata based on a tip from <a href="https://twitter.com/wouterla">@wouterla</a>. (For anyone who is interested I ported the Java version to Python <a href="https://github.com/mrmrcoleman/thegildedrose">here</a>, which was then made more Pythonically beautiful by David Weterings <a href="https://github.com/davidweterings/GildedRose">here</a>.)</p>
<p>The Gilded Rose kata however, starts with an existing code base, which is great for refactoring practice, but we really wanted the team to start with nothing to get used to incrementally driving out features using strict TDD. After some Googling I came across the <a href="http://amirrajan.net/Blog/code-katas-mars-rover/">Mars Rover Kata</a> created by <a href="https://twitter.com/amirrajan">@amirrajan</a>.</p>
<p><strong><strong> </strong></strong>The Mars Rover kata seemed ideal for our purposes as the team were forced to start with almost nothing and also because the solution seemed algorithmically simple (unlike the <a href="http://butunclebob.com/ArticleS.UncleBob.ThePrimeFactorsKata">Prime Factor kata</a>, which can be a bit more involved) which meant that we could focus on TDD, refactoring and clean code instead of head-scratching.</p>
<p>To make best use of the time we had available we prepared a Vagrant project which gave them Python3, a class with a constructor, and a test class with one passing test. You can find it here: <a href="https://github.com/deltaforge/coding-dojo-week-1">https://github.com/deltaforge/coding-dojo-week-1</a></p>
<p><b>The Mars Rover kata</b></p>
<p>Here are the Mars Rover Kata instructions taken from: <a href="http://amirrajan.net/Blog/code-katas-mars-rover/">http://amirrajan.net/Blog/code-katas-mars-rover/</a></p>
<ul>
<li>Develop an api that moves a rover around a grid.</li>
<li>You are given the initial starting point (x,y) of a rover and the direction (N,S,E,W) it is facing.</li>
<li>The rover receives a character array of commands.</li>
<li>Implement commands that move the rover forward/backward (f,b).</li>
<li>Implement commands that turn the rover left/right (l,r).</li>
<li>The only commands you can give the rover are f,b,l, and r.</li>
<li>Implement wrapping from one edge of the grid to another. (planets are spheres after all).</li>
<li>Implement obstacle detection before each move to a new square. If a given sequence of commands encounters an obstacle, the rover moves up to the last possible point and reports the obstacle.</li>
</ul>
<p>And here is the example, which we expected the team to interpret as an <i>acceptance test</i>:</p>
<ul>
<li>Let’s say that the rover is located at 0,0 facing North on a 100×100 grid.</li>
<li>Given the command “ffrff” would put the rover at 2,2 facing East.</li>
</ul>
<p>Apart from the instructions in the kata, we also gave a short introduction in which we emphasized the following:</p>
<ol>
<li>Stick strictly to the (A)TDD workflow: <a href="https://cdn.tutsplus.com/net/uploads/legacy/2106_bdd/bdd_cycle.jpg">https://cdn.tutsplus.com/net/uploads/legacy/2106_bdd/bdd_cycle.jpg</a></li>
<li>If you feel lost, either ask or trust the (above) process to drive the logic out.</li>
<li>Do not use the debugger or print statements to figure out what is going on, trust your tests to tell you what the code is doing.</li>
</ol>
<h1>So how did it go?</h1>
<p><b>Expectations</b></p>
<p>After a ~10 minute introduction to the exercise we left the team to figure it out for themselves. This felt a little bit like throwing them in the deep end, but I was also curious to see how people would deal with being a bit uncomfortable. Who would ask for help? Who would display anger or helplessness? Would the strange setting cause people to ditch the TDD process and return to old ‘scripting’ habits?</p>
<p><b>Observations</b></p>
<p>After observing the sessions and then speaking to each of the team members individually about both their code and their feelings about the session we arrived at the following:</p>
<p><i>Not following the TDD process</i></p>
<p>In most cases we noticed that the TDD process had not been followed. This came down to two main reasons:</p>
<ol>
<li>Some people thought that they had to complete the entire kata in the 2 hours provided, which was not our intention. Due to this perceived time pressure, people dropped the process and went back to old habits.</li>
<li>Others found that although the (A)TDD process was clear on a high-level, actually knowing how to start proved tricky. The result was that people wrote code and added tests later.</li>
</ol>
<p><i>Acceptance tests</i></p>
<p>After writing the initial acceptance test that was given in the example no one added any more. We had expected that features such as grid wrapping and obstacles would get an extra acceptance test as they are analogous to new features.</p>
<p>Also, most people put their acceptance test in test_rover.py. This is minor, but we feel that acceptance tests belong in their own file.</p>
<p><i>Code Quality</i></p>
<p>After reviewing everyone’s code we saw that a few problems were occurring regularly:</p>
<ul>
<li>Error handling not complete</li>
<li>‘Smart’ yet hard-to-read solutions</li>
<li>Too much coupling and nobody breaking off new classes to deal with this</li>
<li>Diverse coding styles</li>
</ul>
<h1>Conclusion</h1>
<p>The idea of a kata is that one sticks rigorously to the process. In that sense, our first session was a failure. The difficulty in teaching any skill is that in a classroom setting it is often hard to make those doing the learning <i>feel the why.</i> Why spend all this extra time writing tests? With an example as small as this one, the advantages may be marginal. One needs to have worked on a larger project with no tests to understand the pain that causes not to mention the feelings of freedom that driving a design out with tests can often bring.</p>
<p>In other ways though, the first session was a huge success. Mainly, because it gave us a lot of information; What are the common coding mistakes in the team? How do the individual team members respond to unfamiliar challenges? Who asks for help? Who works on the code in their own time for way longer than the allotted two hours?</p>
<p>It was also a lot of fun.</p>
<p>Based on our observations we decided that there were some coding specifics that we needed to tackle, but the main challenge was to get the team to stick to the TDD process. After some consideration we decided that the best way to do this would be to help the team to feel the pain of working with untested code.</p>
<p>We’ll explain how we increased the pain in part 2.</p>
<p><i>Links</i></p>
<p>Mars Rover Kata – <a href="http://amirrajan.net/Blog/code-katas-mars-rover/">http://amirrajan.net/Blog/code-katas-mars-rover/</a></p>
<p>(A)TDD process diagram that we borrowed – <a href="https://cdn.tutsplus.com/net/uploads/legacy/2106_bdd/bdd_cycle.jpg">https://cdn.tutsplus.com/net/uploads/legacy/2106_bdd/bdd_cycle.jpg</a></p>
<p>Python3 Vagrant environment – <a href="https://github.com/deltaforge/coding-dojo-week-1">https://github.com/deltaforge/coding-dojo-week-1</a></p>
<p>The Gilded Rose Kata – <a href="http://craftsmanship.sv.cmu.edu/exercises/gilded-rose-kata">http://craftsmanship.sv.cmu.edu/exercises/gilded-rose-kata</a></p>
<p>My Python version – <a href="https://github.com/mrmrcoleman/thegildedrose">https://github.com/mrmrcoleman/thegildedrose</a></p>
<p>David Wetering’s (better) version – <a href="https://github.com/davidweterings/GildedRose">https://github.com/davidweterings/GildedRose</a></p>
<p><strong><strong> </strong></strong>Prime Factors Kata – <a href="http://butunclebob.com/ArticleS.UncleBob.ThePrimeFactorsKata">http://butunclebob.com/ArticleS.UncleBob.ThePrimeFactorsKata</a></p>
	</div>
	
	</div></body></html>