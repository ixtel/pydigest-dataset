<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-django-slack-oauth-" class="anchor" href="#django-slack-oauth-" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Django Slack OAuth <a href="https://pypi.python.org/pypi/django-slack-oauth/0.5"><img alt="version" src="https://camo.githubusercontent.com/f96e56bdd37243971a023d2f8960cfa073ea007d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f707970692d76302e352e302d6f72616e67652e737667" data-canonical-src="https://img.shields.io/badge/pypi-v0.5.0-orange.svg"/>
</a></h1>
<p>Django module for handling Slack OAuth.
In order to use Slack OAuth in your project you need to create application <a href="https://api.slack.com/applications">https://api.slack.com/applications</a>
Users must be authenticated on your site.</p>
<a name="user-content-install"/>
<h2><a id="user-content-install" class="anchor" href="#install" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Install</h2>
<p><code>pip install django-slack-oauth</code></p>
<a name="user-content-set-up"/>
<h2><a id="user-content-set-up" class="anchor" href="#set-up" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Set up</h2>
<ol>
<li>Add <code>django_slack_oauth</code> to your INSTALLED_APPS settings:</li>
</ol>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">INSTALLED_APPS</span> <span class="pl-k">=</span> (
    <span class="pl-c1">...</span>
    <span class="pl-s"><span class="pl-pds">'</span>django_slack_oauth<span class="pl-pds">'</span></span>,
)</pre></div>
<ol start="2">
<li>Run <code>./manage migrate</code>; <code>Django&gt;=1.8</code> is required.</li>
<li>Include the application URLconf in your project urls.py:</li>
</ol>
<p><code>url(r'^slack/', include('django_slack_oauth.urls')),</code></p>
<p>4.1 Set up in your settings, these are required:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">SLACK_CLIENT_ID</span> <span class="pl-k">=</span> os.environ.get(<span class="pl-s"><span class="pl-pds">'</span>SLACK_CLIENT_ID<span class="pl-pds">'</span></span>)
<span class="pl-c1">SLACK_CLIENT_SECRET</span> <span class="pl-k">=</span> os.environ.get(<span class="pl-s"><span class="pl-pds">'</span>SLACK_CLIENT_SECRET<span class="pl-pds">'</span></span>)

<span class="pl-c"># Optional parameters</span>
<span class="pl-c"># Defaults</span>
<span class="pl-c1">SLACK_SCOPE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>identify,read,post<span class="pl-pds">'</span></span>
<span class="pl-c1">SLACK_SUCCESS_REDIRECT_URL</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>/<span class="pl-pds">'</span></span>

<span class="pl-c"># These are in case slack team decides</span>
<span class="pl-c"># to change it's endpoints</span>
<span class="pl-c1">SLACK_AUTHORIZATION_URL</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>https://slack.com/oauth/authorize<span class="pl-pds">'</span></span>
<span class="pl-c1">SLACK_OAUTH_ACCESS_URL</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>https://slack.com/api/oauth.access<span class="pl-pds">'</span></span></pre></div>
<p>With optional settings you could provide custom scope or redirect url upon completion</p>
<p>4.2 To avoid forgery attacks we pass <code>state</code> param in authorization request on slack endpoint. This state is stored in cache. For production environments I'd highly recommend to set up your cache backend using Redis or memcached other than <code>LocMemCache</code>. Example:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">CACHES</span> <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">'</span>default<span class="pl-pds">'</span></span>: {
        <span class="pl-s"><span class="pl-pds">'</span>BACKEND<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>django.core.cache.backends.memcached.MemcachedCache<span class="pl-pds">'</span></span>,
        <span class="pl-s"><span class="pl-pds">'</span>LOCATION<span class="pl-pds">'</span></span>: <span class="pl-s"><span class="pl-pds">'</span>127.0.0.1:11211<span class="pl-pds">'</span></span>,
    }
}</pre></div>
<ol start="5">
<li>Use the url to authenticate your users in your templates</li>
</ol>
<p><code>&lt;a href='{% url 'slack_auth' %}'&gt;Get slacked&lt;/a&gt;</code></p>
<ol start="6">
<li>Find your token in <code>slack_user</code> table</li>
</ol>

</article>
  </div></body></html>