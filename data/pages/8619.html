<html><body><div><div class="post-text" itemprop="text">

<p>I'm making a script which takes has some others script output piped into it. The other script takes a while to complete, and prints the progress onto the console along with the data I want to parse.</p>

<p>Since I'm piping the result to my script, I want to be able to do 2 things. As my input comes, I would like to echo it out onto the screen. After the command completes, I would like to have a list of lines that were passed via stdin.</p>

<p>My first though was to use a simple </p>

<pre><code>for line in sys.stdin:
     sys.stdout.write(line + '\n')
     lines.append(line)
     sys.stdout.flush()
</code></pre>

<p>but to my surprise, the command waits until stdin hits EOF, until it starts yielding lines.</p>

<p>My current workaround is this:</p>

<pre><code>line = sys.stdin.readline()
lines = []
while line:
    sys.stdout.write(line.strip() + '\n')
    lines.append(line.strip())
    sys.stdout.flush()
    line = sys.stdin.readline()
</code></pre>

<p>But this does not always wait until the whole input is used. </p>

<p>Is there any other way to do this? It seems strange that the for solution behaves the way it does.</p>
    </div>
    </div></body></html>