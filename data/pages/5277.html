<html><body><div><div class="single-content">
			<p class="at-above-post addthis_default_style addthis_toolbox at-wordpress-hide" data-title="Treasure Data Python Client; MySQL, PostgreSQL, and Jira connectors; and more" data-url="http://blog.treasuredata.com/blog/2015/07/09/td-python-client-mysql-postgresql-and-jira-connectors/"/><p class="at-above-post-recommended addthis_default_style addthis_toolbox at-wordpress-hide"/><p>Treasure Data has made Python the glue for your end-to-end data analytics pipeline. Now it’s easier than ever to link your data science toolkit directly to a robust and infinitely scalable data storage and analytics pipeline in the cloud and be up and running in minutes!</p>
<p>Maybe you’re brand new to data science, are a manager looking for a fast cycle time, or are an experienced old hand at Data Science.  In addition to connecting directly to staples like <a href="http://blog.treasuredata.com/blog/2015/06/23/data-science-101-interactive-analysis-with-jupyter-pandas-and-treasure-data/" target="_blank">Jupyter and Pandas</a>, you can now pipe in data directly from <a href="http://docs.treasuredata.com/articles/data-connector-mysql" target="_blank">MySQL</a>, <a href="http://docs.treasuredata.com/articles/data-connector-postgresql" target="_blank">Postgre SQL</a> and <a href="http://docs.treasuredata.com/articles/data-connector-jira" target="_blank">Jira</a>, as well as engage Treasure Data Agent directly from Python.  Whatever your skill level, you can leave the analytics infrastructure to us while you focus on your data!<span id="more-568"/></p>
<p>This release also includes a few key Presto enhancements, and a new JDBC Driver.</p>
<p><a href="#python">Treasure Data Client for Python</a></p>
<p><a href="#pandas">Treasure Data and Pandas Connector</a></p>
<p><a href="#connectors">Data Connectors for  MySQL, PostgreSQL and Jira</a></p>
<p><a href="#presto">Presto! New improvements + JDBC driver update</a></p>
<p><a name="python"/></p>
<h3>Treasure Data Client for Python</h3>
<p>Treasure Data is now supported by an <a href="https://github.com/treasure-data/td-client-python" target="_blank">API library for Python</a>.  From Python 2.7 or greater, 3.3 or greater or PyPy, you can now list jobs, run jobs, import data (including bulk import), and kick off Presto or Hive queries:</p>


		<div id="crayon-56d5a04115238281956851" class="crayon-syntax crayon-theme-solarized-light crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a04115238281956851-1"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">pandas</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115238281956851-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">tdclient</span></p><p class="crayon-line" id="crayon-56d5a04115238281956851-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115238281956851-4"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">on_waiting</span><span class="crayon-sy">(</span><span class="crayon-v">cursor</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a04115238281956851-5">    <span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-v">cursor</span><span class="crayon-sy">.</span><span class="crayon-e">job_status</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115238281956851-6"> </p><p class="crayon-line" id="crayon-56d5a04115238281956851-7"><span class="crayon-st">with</span><span class="crayon-h"> </span><span class="crayon-v">tdclient</span><span class="crayon-sy">.</span><span class="crayon-e">connect</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-o">=</span><span class="crayon-s">"sample_datasets"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">type</span><span class="crayon-o">=</span><span class="crayon-s">"presto"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">wait_callback</span><span class="crayon-o">=</span><span class="crayon-v">on_waiting</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">td</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115238281956851-8">    <span class="crayon-v">data</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">pandas</span><span class="crayon-sy">.</span><span class="crayon-e">read_sql</span><span class="crayon-sy">(</span><span class="crayon-s">"SELECT symbol, COUNT(1) AS c FROM nasdaq GROUP BY symbol"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">td</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a04115238281956851-9">    <span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-k ">repr</span><span class="crayon-sy">(</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<p>Get the library from <a href="https://github.com/treasure-data/td-client-python" target="_blank">Github.</a></p>
<p><a name="pandas"/></p>
<h3>Treasure Data and Pandas Connector</h3>
<p>With Treasure Data, you can now munge data and perform analytics directly from the powerhouse library Pandas.  As detailed in <a href="http://blog.treasuredata.com/blog/2015/06/23/data-science-101-interactive-analysis-with-jupyter-pandas-and-treasure-data/" target="_blank">this blogpost</a>, you can run Treasure Data queries and analyze your data right from Pandas and Jupyter (formerly iPython notebook).</p>
<p><a name="connectors"/></p>
<h3>Data Connectors for  MySQL, PostgreSQL and Jira</h3>
<p>These brand new connectors enable you to link up Treasure Data to import data from <a href="http://docs.treasuredata.com/articles/data-connector-mysql" target="_blank">MySQL</a>, <a href="http://docs.treasuredata.com/articles/data-connector-postgresql" target="_blank">PostgreSQL</a> and <a href="http://docs.treasuredata.com/articles/data-connector-jira" target="_blank">Jira</a> directly.</p>
<p>Setting up each connector works similarly.   First, you need to ensure that you’re running  the latest <a href="http://toolbelt.treasuredata.com/" target="_blank">Treasure Data Toolbelt</a>:</p>
<p><span>$ td –version<br/>
0.11.10<br/>
</span></p>
<p>Next you should prepare a seed.yml – basically a Ruby configuration file containing your access information to the respective service.   Here’s the one for the MySQL connector:</p>


		<div id="crayon-56d5a04115247974583564" class="crayon-syntax crayon-theme-solarized-light crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a04115247974583564-1"><span class="crayon-v">config</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115247974583564-2"> <span class="crayon-v">&amp;nbsp</span><span class="crayon-o">:</span><span class="crayon-st">in</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5a04115247974583564-3">    <span class="crayon-v">type</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-i">mysql</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115247974583564-4">    <span class="crayon-v">host</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">mysql_host</span><span class="crayon-sy">_</span>name</p><p class="crayon-line" id="crayon-56d5a04115247974583564-5">    <span class="crayon-v">port</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-cn">3306</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115247974583564-6">    <span class="crayon-v">user</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test</span><span class="crayon-sy">_</span>user</p><p class="crayon-line" id="crayon-56d5a04115247974583564-7">    <span class="crayon-v">password</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test</span><span class="crayon-sy">_</span>password</p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115247974583564-8">    <span class="crayon-v">database</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test</span><span class="crayon-sy">_</span>database</p><p class="crayon-line" id="crayon-56d5a04115247974583564-9">    <span class="crayon-v">table</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">test</span><span class="crayon-sy">_</span>table</p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115247974583564-10">    <span class="crayon-v">select</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-s">"*"</span></p><p class="crayon-line" id="crayon-56d5a04115247974583564-11">  <span class="crayon-v">out</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a04115247974583564-12"><span class="crayon-v">mode</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">replace</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


<p>Treasure Data uses artificial intelligence to guess the file format you’ll be importing from, but you must prompt it first:</p>
<p><span>$ td connector:guess seed.yml -o load.yml<br/>
</span></p>
<p>Then, you can preview how the system will parse the file:</p>
<p><img class="confluence-embedded-image confluence-external-resource" src="http://35fm8uj27so3jjon62kmm4qo.wpengine.netdna-cdn.com/wp-content/uploads/2015/07/Connector_Preview_Load.png" alt="" data-image-src="http://35fm8uj27so3jjon62kmm4qo.wpengine.netdna-cdn.com/wp-content/uploads/2015/07/Connector_Preview_Load.png"/></p>
<p>Finally, import jobs can be scheduled or run as standalone.</p>
<p><img class="confluence-embedded-image confluence-external-resource" src="http://35fm8uj27so3jjon62kmm4qo.wpengine.netdna-cdn.com/wp-content/uploads/2015/07/Connector_List_Schedules.png" alt="" data-image-src="http://35fm8uj27so3jjon62kmm4qo.wpengine.netdna-cdn.com/wp-content/uploads/2015/07/Connector_List_Schedules.png"/></p>
<p>Read the connector docs for <a href="http://docs.treasuredata.com/articles/data-connector-mysql" target="_blank">MySQL</a>, <a href="http://docs.treasuredata.com/articles/data-connector-postgresql" target="_blank">PostgreSQL</a> and <a href="http://docs.treasuredata.com/articles/data-connector-jira" target="_blank">Jira</a> to learn more.</p>
<p><a name="presto"/></p>
<h3>Presto!  New improvements + JDBC driver update</h3>
<p>JDBC Driver<a href="http://docs.treasuredata.com/articles/jdbc-driver" target="_blank"> v0.3.4</a>  supports a new “SELECT 1” query used by a number of BI tools.</p>
<p><a href="https://prestodb.io/docs/current/release/release-0.108.html" target="_blank">Presto</a> engine also contains a number of significant improvements, including a new “<a href="https://prestodb.io/docs/current/connector/blackhole.html" target="_blank">black hole</a>” connector that writes a session’s metadata to memory (like a /dev/null device on Unix) along with some key performance optimizations.  This version also iteratively contains the patches supporting <a href="https://prestodb.io/docs/current/release/release-0.107.html" target="_blank">0.107</a> and <a href="https://prestodb.io/docs/current/release/release-0.106.html" target="_blank">0.106</a> Presto versions.</p>
<p class="at-below-post addthis_default_style addthis_toolbox at-wordpress-hide" data-title="Treasure Data Python Client; MySQL, PostgreSQL, and Jira connectors; and more" data-url="http://blog.treasuredata.com/blog/2015/07/09/td-python-client-mysql-postgresql-and-jira-connectors/"/><p class="at-below-post-recommended addthis_default_style addthis_toolbox at-wordpress-hide"/><p id="om-hjgwrws4lr5sjutl-holder"/>		</div>


		

		</div></body></html>