<html><body><div><div class="readme file wiki-content" data-module="components/mathjax">
              
                <div class="section" id="rst-header-free-kite-power-system-simulator">
<h2>Free Kite Power System Simulator</h2>
<p>This project aims at the development of a free kite-power system simulator
for educational purposes.</p>
<p>Intended use:</p>
<ol class="loweralpha simple">
<li>Provide a learning environment for students who are studying airborne
wind energy.</li>
<li>Training of kite pilots and winch operators. In this case kite and winch
are operated with joysticks.</li>
<li>Development and test of automatic control software for kite-power systems.</li>
</ol>
<p>This software is published under the LGPL license.</p>
<p>If you have any suggestions and fixes to improve this software please write
a posting on <a class="reference external" href="https://groups.google.com/forum/#!forum/free-kitesim">https://groups.google.com/forum/#!forum/free-kitesim</a> .</p>
</div>
<div class="section" id="rst-header-installation">
<h2>Installation</h2>
<p>The installation was tested on Ubuntu 12.04 and 14.04, but it should work on any modern
64 bit Linux computer.</p>
<p>The installation uses the python package manager <a class="reference external" href="http://continuum.io/conda/">conda</a>. There are two
available versions of conda, we usually use Miniconda as it is the smallest package and can be
adjusted to your needs with the least overhead.
Four dependencies will NOT be installed through conda, namely gfortran, freeglut3, git and unxz
so these will need to be installed on the system. For ubuntu just run:</p>
<pre class="literal-block">
sudo apt-get install gfortran freeglut3 git xz-utils
</pre>
<p>Next you'll need to install the conda packages. For convenience we created a meta-packages which
should install all the needed packages. This can be found on our channel on <a class="reference external" href="https://binstar.org/ufechner">Binstar</a>:</p>
<pre class="literal-block">
conda create -n freekitesim -c https://conda.binstar.org/ufechner -c https://conda.binstar.org/mutirri freekitesim
</pre>
<p>This will create a new environment and install all dependencies into it. And that should be all
that is needed to run the simulation and player. Before running you have to enable the environment
however:</p>
<pre class="literal-block">
source activate freekitesim
</pre>
<p>If you would like to develop the simulation we can
recommend installing the package spyder_full:</p>
<pre class="literal-block">
conda install -n freekitesim -c https://conda.binstar.org/ufechner spyder_full
</pre>
<p>This will install spyder with all addons and options set for developing as we use it.</p>
<p>For some packages it is important that the version stays the same even when updating the environment.
These packages therefore need to be pinned to a specific version. To do that cd into your environment folder, here it is assumed that miniconda is in the home folder and the environment is called freekitesim, and run the following commands
in your terminal:</p>
<pre class="literal-block">
cd ~/miniconda/envs/freekitesim/conda-meta
echo 'numba 0.18.2' &gt;&gt; pinned
echo 'boost 1.55.0' &gt;&gt; pinned
echo 'pandas 0.14.1' &gt;&gt; pinned
</pre>
<p>If you questions regarding the installation or the usage, please write
a posting on <a class="reference external" href="https://groups.google.com/forum/#!forum/free-kitesim">https://groups.google.com/forum/#!forum/free-kitesim</a> .</p>
</div>
<div class="section" id="rst-header-how-to-use">
<h2>How to use</h2>
<p>The Software can be used in two different modes at this point.</p>
<ul class="simple">
<li>The log-file viewer allows to replay test-flights by reading the recorded data
and showing the movement in a 3D animation</li>
<li>The dynamic simulator offers the user the possibility to tweak parameters and
test control software with a four-point kite model</li>
</ul>
<p>The two different programs can be run with the executable scripts kitesim.sh and
kiteplayer.sh. Obviously the former runs the simulation and the other the
log-file viewer.</p>
</div>
<div class="section" id="rst-header-how-to-use-the-log-file-viewer">
<h2>How to use the log-file viewer</h2>
<ol class="loweralpha">
<li><p class="first">Unpack compressed log files with the commands:</p>
<pre class="literal-block">
cd ~/00PythonSoftware/FreeKiteSim/00_results
unxz *.xz
</pre>
</li>
<li><p class="first">Run the 3D viewer and the GUI-based log file player:</p>
<pre class="literal-block">
cd ~/00PythonSoftware/FreeKiteSim
./kiteplayer.sh
</pre>
</li>
<li><p class="first">Rearange the windows so that they do not overlap. Select a log file
in the combobox on the left and press play.</p>
</li>
</ol>
<p>Please look also at the <a class="reference external" href="/ufechner/freekitesim/src/b7257db70be5d6dce3f5f0693ebdb350fd6b9d30/freekitesim/src/master/doc/FreeKiteSim.rst">FreeKiteSim</a> manual.
A .pdf version of the documentation can be created with the following commands:</p>
<pre class="literal-block">
cd doc
./make.sh
</pre>
</div>
<div class="section" id="rst-header-how-to-use-the-dynamic-simulator">
<h2>How to use the dynamic simulator</h2>
<p>The dynamic simulation is done with the RADAU solver from the ASSIMULO solver suite.
One simple example can be found in the example folder.</p>
<p>The following files belong to the dynamic simulator:</p>
<ul class="simple">
<li>Timer.py        (timer class, used for benchmarking)</li>
<li>linalg_3d.py    (fast 3D linear algebra routines)</li>
<li>KCU_Sim.py      (simulator for the kite control unit)</li>
<li>KPS4P_v2.py     (Python version of the 4-point kite model)</li>
<li>WinchModel.py   (model of the 20 kW winch of TU Delft)</li>
<li>Kite_4_point.py (script to construct the initial positions of the kite particles)</li>
<li>RTSim.py        (simulator core, based on Assimulo and using the RADAU solver)</li>
<li>KiteViewer3.py  (extended version of the 3D kite viewer)</li>
<li>Logger.py       (Saves the simulation data to a log file if wanted)</li>
</ul>
<p>To run the simulation:</p>
<ol class="arabic">
<li><p class="first">connect a joystick, e.g. Logitech Gamepad F310 or Logitech Extreme 3D Pro (prefered)</p>
</li>
<li><p class="first">open a terminal and enter:</p>
<pre class="literal-block">
cd ~/00PythonSoftware/FreeKiteSim/
./kitesim.sh
</pre>
</li>
<li><p class="first">wait until the message "Simulation started!" is printed in the console</p>
</li>
</ol>
<p>Now you can steer by pushing the joystick to the right or to the left, and operate the
winch by turning (rotating the stick around it's vertical axis) the joystick (if you use
the Extreme 3D joystick).</p>
<p>Apart from the steering, also the depower settings can be influenced with the
joystick. Depowering can be used to lower the forces on the kite in order to
reel in with high speeds. Low depower settings will increase the forces and the
power but might lead to structural failures of the kite. The three possible actions are:</p>
<ul class="simple">
<li>Maximum depower setting - Button 1 + Button 5</li>
<li>Minimum depower setting - Button 1 + Button 3</li>
<li>Normal depower setting  - Button 1 + Button 2</li>
</ul>
<p>The numbering of the buttons might be imprinted on the joystick itself as is the
case for the Extreme 3D joystick. Otherwise it can be tested with the joy_pad.py
script in the main directory which prints the pressed buttons. For the Extreme
3D joystick numbering see the image below.</p>
<img alt="https://bitbucket.org/ufechner/freekitesim/raw/master/doc/joystick_button_numbering.png" src="https://bitbucket.org/ufechner/freekitesim/raw/master/doc/joystick_button_numbering.png"/>
<p>The simulation can be stopped by selecting the terminal window in which the
simulation runs and pressing ^C (Control+c). Then the user will be asked whether
the flight data should be saved as a log-file for later reviewing with the
log-file player. Typing 'yes' will require you to specify the name of the
log-file (a .df is automatically added as the extension so only the actual name
is required).</p>
<p>For real-time simulation speed it is suggested to use a quad-core CPU.</p>
<p>Delft University of Technology, section wind energy, The Netherlands.</p>
</div>

            </div>
          
        </div></body></html>