<html><body><div><div class="entry-content"><p>Например, строка <tt>aabcccccaaa</tt> должна превратиться в <tt>а2b1с5аЗ</tt>. Если «сжатая» строка оказывается длиннее исходной, метод должен вернуть исходную строку.</p><p><span id="more-7251"/></p><div id="crayon-56d5b3226f565737625835" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"/><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="show"/><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b3226f565737625835-1"><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-e">compressBad</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f565737625835-2"><span class="crayon-h">    </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">mystr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">""</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f565737625835-3"><span class="crayon-h">    </span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f565737625835-4"><span class="crayon-h">    </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f565737625835-5"><span class="crayon-h">    </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f565737625835-6"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">// Находим повторяющийся символ</span></p><p class="crayon-line" id="crayon-56d5b3226f565737625835-7"><span class="crayon-h">            </span><span class="crayon-v">count</span><span class="crayon-o">++</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f565737625835-8"><span class="crayon-h">        </span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h">    </span><span class="crayon-c">// Вставляем счетчик символа и обновляем последний символ</span></p><p class="crayon-line" id="crayon-56d5b3226f565737625835-9"><span class="crayon-h">            </span><span class="crayon-v">mystr</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f565737625835-10"><span class="crayon-h">            </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f565737625835-11"><span class="crayon-h">            </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f565737625835-12"><span class="crayon-h">        </span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f565737625835-13"><span class="crayon-h">    </span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f565737625835-14"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">mystr</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f565737625835-15"><span class="crayon-sy">}</span></p></div></td></tr></table></div></div><p> Этот код не отслеживает случай, когда сжатая строка получается длиннее исходной. Но эффективен ли этот алгоритм?</p><p>Давайте оценим время выполнения этого кода: <tt> 0(р + k²)</tt>, где р — размер исходной строки, a k — количество последовательностей символов. Например, если строка aabccdeeaa содержит 6 последовательностей символов. Алгоритм работает медленно, поскольку используется конкатенация строк, требующая обычно <tt>0(n²)</tt> времени.</p><p>Улучшить код можно, используя, например <tt>StringBuffer</tt> в Java:</p><div id="crayon-56d5b3226f575169813209" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"/><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-2">2</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-4">4</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-6">6</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-8">8</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-10">10</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-12">12</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-14">14</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-16">16</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-18">18</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-20">20</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-22">22</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-24">24</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-26">26</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-28">28</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-30">30</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-32">32</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-34">34</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-36">36</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-38">38</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-40">40</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-42">42</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-44">44</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f575169813209-46">46</p><p class="crayon-num" data-line="crayon-56d5b3226f575169813209-47">47</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b3226f575169813209-1"><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-e">compressBetter</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-2"><span class="crayon-h">    </span><span class="crayon-c">/* Проверяем, вдруг сжатие создаст более длинную строку */</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-3"><span class="crayon-h">    </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">countCompression</span><span class="crayon-sy">(</span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-4"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-5"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-6"><span class="crayon-h">    </span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-8"><span class="crayon-h">    </span><span class="crayon-e">StringBuffer </span><span class="crayon-v">mystr</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">StringBuffer</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-9"><span class="crayon-h">    </span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-10"><span class="crayon-h">    </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-11"><span class="crayon-h">    </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h">    </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-12"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">// Найден повторяющийся символ</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-13"><span class="crayon-h">            </span><span class="crayon-v">count</span><span class="crayon-o">++</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-14"><span class="crayon-h">        </span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">// Вставляем счетчик символов, обновляем последний символ</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-15"><span class="crayon-h">            </span><span class="crayon-v">mystr</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">last</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h">    </span><span class="crayon-c">// Вставляем символ</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-16"><span class="crayon-h">            </span><span class="crayon-v">mystr</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h">    </span><span class="crayon-c">// Вставляем счетчик</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-17"><span class="crayon-h">            </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-18"><span class="crayon-h">            </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-19"><span class="crayon-h">        </span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-20"><span class="crayon-h">    </span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-21"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-22"><span class="crayon-h">    </span><span class="crayon-c">/* В строках 15-16 символы вставляются, когда</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-23"><span class="crayon-c">    * изменяется повторяющийся символ. Мы должны обновить строку</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-24"><span class="crayon-c">    * в конце метода, так как    самый последний    повторяющийся символ</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-25"><span class="crayon-c">    * еще не был установлен в    сжатой строке</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-26"><span class="crayon-c">    * */</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-27"><span class="crayon-h">    </span><span class="crayon-v">mystr</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">last</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-28"><span class="crayon-h">    </span><span class="crayon-v">mystr</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-29"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">mystr</span><span class="crayon-sy">.</span><span class="crayon-e">toString</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-30"><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-31"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-32"><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">countCompression</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-33"><span class="crayon-h">    </span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-34"><span class="crayon-h">    </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-35"><span class="crayon-h">    </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-36"><span class="crayon-h">    </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-37"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-38"><span class="crayon-h">            </span><span class="crayon-v">count</span><span class="crayon-o">++</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-39"><span class="crayon-h">        </span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h">    </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-40"><span class="crayon-h">            </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-41"><span class="crayon-h">            </span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-e">valueOf</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-42"><span class="crayon-h">            </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-43"><span class="crayon-h">        </span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-44"><span class="crayon-h">    </span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-45"><span class="crayon-h">    </span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">+=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-e">valueOf</span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f575169813209-46"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">size</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f575169813209-47"><span class="crayon-sy">}</span></p></div></td></tr></table></div></div><p> Этот алгоритм намного эффективнее. Обратите внимание на проверку размера в строках 2—5.</p><p>Если мы не хотим (или не можем) использовать <tt>stringBuffer</tt>, можно решить эту задачу иначе. В строке 2 рассчитывается конечный размер строки, что позволит создать массив подходящего размера:</p><div id="crayon-56d5b3226f57c303725760" class="crayon-syntax crayon-theme-classic crayon-font-courier-new crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover"><p class="crayon-plain-wrap"/><div class="crayon-main"><table class="crayon-table"><tr class="crayon-row"><td class="crayon-nums " data-settings="show"><div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-2">2</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-4">4</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-6">6</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-8">8</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-10">10</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-12">12</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-14">14</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-16">16</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-18">18</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-20">20</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-22">22</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-24">24</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-26">26</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-28">28</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-30">30</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-32">32</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-34">34</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-36">36</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-38">38</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-40">40</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-42">42</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-44">44</p><p class="crayon-num" data-line="crayon-56d5b3226f57c303725760-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b3226f57c303725760-46">46</p></div></td><td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b3226f57c303725760-1"><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-e">compressAlternate</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-2"><span class="crayon-h">    </span><span class="crayon-c">/* Проверяем, вдруг сжатие создаст более длинную строку */</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-3"><span class="crayon-h">    </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">countCompression</span><span class="crayon-sy">(</span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-4"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">size</span><span class="crayon-h"> </span><span class="crayon-o">&gt;=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-5"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-6"><span class="crayon-h">    </span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-8"><span class="crayon-h">    </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-v">size</span><span class="crayon-sy">]</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-9"><span class="crayon-h">    </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">index</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-10"><span class="crayon-h">    </span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-11"><span class="crayon-h">    </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-12"><span class="crayon-h">    </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">length</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-13"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-c">// Найдите повторяющийся символ</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-14"><span class="crayon-h">            </span><span class="crayon-v">count</span><span class="crayon-o">++</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-15"><span class="crayon-h">        </span><span class="crayon-sy">}</span><span class="crayon-h">    </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-16"><span class="crayon-h">            </span><span class="crayon-c">/* Обоновляем счетчик повторяющихся символов */</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-17"><span class="crayon-h">            </span><span class="crayon-v">index</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">setChar</span><span class="crayon-sy">(</span><span class="crayon-v">str</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">index</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-18"><span class="crayon-h">            </span><span class="crayon-v">last</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">.</span><span class="crayon-e">charAt</span><span class="crayon-sy">(</span><span class="crayon-v">i</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-19"><span class="crayon-h">            </span><span class="crayon-v">count</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-20"><span class="crayon-h">        </span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-21"><span class="crayon-h">    </span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-22"> </p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-23"><span class="crayon-h">    </span><span class="crayon-c">/* Обновляем строку с последним набором повторяющихся символов */</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-24"><span class="crayon-h">        </span><span class="crayon-v">index</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">setchar</span><span class="crayon-sy">(</span><span class="crayon-v">str</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">last</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">index</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-25"><span class="crayon-h">                </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-e">valueOf</span><span class="crayon-sy">(</span><span class="crayon-t">array</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-26"><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-27"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-28"><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">setChar</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">char</span><span class="crayon-h"> </span><span class="crayon-v">c</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">index</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-29"><span class="crayon-h">            </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-30"><span class="crayon-h">    </span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-v">index</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">c</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-31"><span class="crayon-h">    </span><span class="crayon-v">index</span><span class="crayon-o">++</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-32"> </p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-33"><span class="crayon-h">    </span><span class="crayon-c">/* Конвертируем счетчик в строку */</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-34"><span class="crayon-h">    </span><span class="crayon-t">char</span><span class="crayon-sy">[</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-v">cnt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">String</span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-e">valueOf</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">count</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-e">toCharArray</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-35"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-36"><span class="crayon-h">    </span><span class="crayon-c">/* Копируем символы от большего разряда к меньшему */</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-37"><span class="crayon-h">    </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-t">char</span><span class="crayon-h"> </span>х<span class="crayon-h"> </span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-v">cnt</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-38"><span class="crayon-h">        </span><span class="crayon-t">array</span><span class="crayon-sy">[</span><span class="crayon-v">index</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span>х<span class="crayon-sy">;</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-39"><span class="crayon-h">        </span><span class="crayon-v">index</span><span class="crayon-o">++</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-40"><span class="crayon-h">    </span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-41"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-v">index</span><span class="crayon-sy">;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-42"><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-43"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-44"><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-e">countCompression</span><span class="crayon-sy">(</span><span class="crayon-t">String</span><span class="crayon-h"> </span><span class="crayon-v">str</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></p><p class="crayon-line" id="crayon-56d5b3226f57c303725760-45"><span class="crayon-h">    </span><span class="crayon-c">/* так же, как и раньше    */</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b3226f57c303725760-46"><span class="crayon-sy">}</span></p></div></td></tr></table></div></div><p> Подобно предыдущему решению, этот код потребует <tt>O(N) </tt>времени и <tt>0(N) </tt> пространства.</p><p><small>Разбор задачи по книге <a href="http://oz.by/books/more10247911.html" target="_blank">«Карьера программиста. Как устроиться на работу в Google, Microsoft или другую ведущую IT-компанию»</a></small></p><p class="mistape_caption"/><footer class="entry-meta clearfix"><p class="vk_like" id="vk_like_bottom_7251"/></footer></div></div></body></html>