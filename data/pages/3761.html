<html><body><div><div class="content html_format"><p>
      Добрый день. Меня зовут Алексей Красноперов и я являюсь основателем и техническим директором проекта </p><a href="http://supl.biz">Supl.biz</a><p> — торговой площадки для малого и среднего бизнеса. Хочу рассказать, как устроен проект изнутри.

</p><h4>Общая архитектура проекта</h4>
<img src="https://habrastorage.org/files/0e0/f04/0e6/0e0f040e6da643f68893a45f3f5c1432.png" alt="Техническая сторона Supl.biz"/>
<a name="habracut"/>
<p>
В основе проекта используются популярные фреймворки Django и AngularJS. Причём, чтобы добавить проекту остроты, фронтенд реализован как Single Page Application, на сервере использован python 3.4, а вся статика выложена в CDN.
</p><p>
Как ни странно, такой выбор технологий не добавил проблем при использовании сайта. Для индексации поисковиками применяется генерация страниц на сервере через PhantomJS. В результате и Google, и Яндекс отлично индексируют проект.
</p><p>
В качестве основного хранилища данных используется PostgreSQL 9.4. Также данные выгружаются в ElasticSearch для быстрого поиска и построения статистических отчётов.
</p><p>
За отправку писем отвечает отдельный пул Postfix серверов. Для нормальной доставляемости писем потребовалось настроить почтовые домены: SPF/DKIM/PTR, а также правильно оформлять технические заголовки писем. В результате есть возможность отслеживать статус доставки каждого отдельного письма и чистить рассылку от неактивных пользователей.
</p><p>
Триггерная рассылка писем на основе поведения пользователей реализована с помощью Mixpanel. Это позволило увеличить вовлечённость аудитории, не тратя времени на разработку сложного функционала.
</p><p>
Сервисы </p><a href="http://postmaster.mail.ru">Postmaster@mail.ru</a><p> и </p><a href="http://postoffice.yandex.ru">Яндекс.Почтовый офис</a><p> предоставляют статистику о почтовых рассылках. А Feedback Loop позволяет узнавать, какие письма пользователи отправляют в спам и делать выводы.

</p><h4>Инфраструктура</h4><p>
Проект развёрнут в облаке Selectel в Санкт-Петербурге. Используются как облачные серверы, так и CDN для статики и пользовательских файлов. Облачная основа проекта позволяет вводить в строй новые серверы и масштабировать проект под текущую нагрузку. 
</p><p>
На данный момент сайт размещается на одном сервере, этого достаточно для обработки 400 000 посещений в день.
</p><p>
Selectel, кроме прочего, предоставляет детальные отчёты по потребляемым ресурсам. Нет необходимости настраивать собственный мониторинг.
</p><p>
Для управления серверами используется Ansible: развёртывание, введение в строй новых серверов и обновление проекта — автоматизированы и запускаются в одну команду.

</p><h4>Разработка</h4><p>
Окружение разработчика максимально приближено к реальному окружению, в котором работает сайт. Для этого миниатюрная копия проекта развёрнута в виртуальной машине Vagrant. Это сводит к минимуму проблемы от различия окружений. К тому же нового разработчика можно ввести в проект всего за один час.
</p><p>
Для разработки применяется Git Workflow. Исходный код хранится в Git на Bitbucket. Новый функционал реализуется и тестируется в отдельных ветках, затем сливается в основную ветвь проекта.
</p><p>
На проекте настроен Continuous Deployment: каждый релиз автоматически публикуется и тестируется в песочнице. Если всё отлично — запускается публикация на рабочий сайт. В день, незаметно для пользователей, публикуется порядка пяти изменений сайта.
</p><p>
Для мониторинга крешей используется Sentry. Мы узнаём о произошедшей ошибке даже раньше, чем пользователь видит сообщение об ошибке.

</p><h4>Развитие</h4><p>
Есть много идей, как развивать проект. Делать их все не хватит никаких ресурсов. Да и зачем? Каждая идея превращается в гипотезу, реализуется минимальный необходимый функционал и проверяются метрики. Развиваются только успешно работающие идеи. 
</p><p>
Ведутся работы по локализации сайта и выводу проекта за пределы России и СНГ.
</p><p>
Планируется запуск мобильного приложения: сайт AngularJS отлично запаковывается в приложение с помощью PhoneGap. Практическая возможность проверена, остаётся поправить UI для отображения на небольших экранах и можно запускать.

</p><h4>P.S.</h4><p>
Проект был реализован и запущен моими силами. С ноября 2014 г. к разработке присоединилась замечательный разработчик Татьяна и уже успела внести свой вклад. Но мне нужны еще светлые головы для дальнейшего развития проекта. </p><a href="http://spark.ru/job/1893">Приглашаю присоединиться к нашей команде</a><p>.

      
      </p><p class="clear"/>
    </div>

    
  </div></body></html>