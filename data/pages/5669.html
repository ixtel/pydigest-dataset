<html><body><div><div class="section">
              <h1>python-etcd 0.4.3</h1>

              


<p>A python client for etcd</p><p>








python-etcd documentation</p><p>=========================</p><p>A python client for Etcd https://github.com/coreos/etcd</p><p>Official documentation: http://python-etcd.readthedocs.org/</p><p>.. image:: https://travis-ci.org/jplana/python-etcd.png?branch=master</p><p>   :target: https://travis-ci.org/jplana/python-etcd</p><p>.. image:: https://coveralls.io/repos/jplana/python-etcd/badge.svg?branch=master&amp;service=github</p><p>   :target: https://coveralls.io/github/jplana/python-etcd?branch=master</p><p>Installation</p><p>------------</p><p>Pre-requirements</p><p>~~~~~~~~~~~~~~~~</p><p>Install etcd (2.0.1 or later). This version of python-etcd will only work correctly with the etcd version 2.0.x or later. If you are running an older version of etcd, please use python-etcd 0.3.3 or earlier.</p><p>This client is known to work with python 2.7 and with python 3.3 or above. It is not tested or expected to work in more outdated versions of python.</p><p>From source</p><p>~~~~~~~~~~~</p><p>.. code:: bash</p><p>    $ python setup.py install</p><p>Usage</p><p>-----</p><p>The basic methods of the client have changed compared to previous versions, to reflect the new API structure; however a compatibility layer has been maintained so that you don't necessarily need to rewrite all your existing code.</p><p>Create a client object</p><p>~~~~~~~~~~~~~~~~~~~~~~</p><p>.. code:: python</p><p>    import etcd</p><p>    client = etcd.Client() # this will create a client against etcd server running on localhost on port 4001</p><p>    client = etcd.Client(port=4002)</p><p>    client = etcd.Client(host='127.0.0.1', port=4003)</p><p>    client = etcd.Client(host='127.0.0.1', port=4003, allow_redirect=False) # wont let you run sensitive commands on non-leader machines, default is true</p><p>    # If you have defined a SRV record for _etcd._tcp.example.com pointing to the clients</p><p>    client = etcd.Client(srv_domain='example.com', protocol="https")</p><p>    # create a client against https://api.example.com:443/etcd</p><p>    client = etcd.Client(host='api.example.com', protocol='https', port=443, version_prefix='/etcd')</p><p>Write a key</p><p>~~~~~~~~~</p><p>.. code:: python</p><p>    client.write('/nodes/n1', 1)</p><p>    # with ttl</p><p>    client.write('/nodes/n2', 2, ttl=4)  # sets the ttl to 4 seconds</p><p>    client.set('/nodes/n2', 1) # Equivalent, for compatibility reasons.</p><p>Read a key</p><p>~~~~~~~~~</p><p>.. code:: python</p><p>    client.read('/nodes/n2').value</p><p>    client.read('/nodes', recursive = True) #get all the values of a directory, recursively.</p><p>    client.get('/nodes/n2').value</p><p>Delete a key</p><p>~~~~~~~~~~~~</p><p>.. code:: python</p><p>    client.delete('/nodes/n1')</p><p>Atomic Compare and Swap</p><p>~~~~~~~~~~~~</p><p>.. code:: python</p><p>    client.write('/nodes/n2', 2, prevValue = 4) # will set /nodes/n2 's value to 2 only if its previous value was 4 and</p><p>    client.write('/nodes/n2', 2, prevExist = False) # will set /nodes/n2 's value to 2 only if the key did not exist before</p><p>    client.write('/nodes/n2', 2, prevIndex = 30) # will set /nodes/n2 's value to 2 only if the key was last modified at index 30</p><p>    client.test_and_set('/nodes/n2', 2, 4) #equivalent to client.write('/nodes/n2', 2, prevValue = 4)</p><p>You can also atomically update a result:</p><p>.. code:: python</p><p>    result = client.read('/foo')</p><p>    print(result.value) # bar</p><p>    result.value += u'bar'</p><p>    updated = client.update(result) # if any other client wrote '/foo' in the meantime this will fail</p><p>    print(updated.value) # barbar</p><p>Watch a key</p><p>~~~~~~~~~~~</p><p>.. code:: python</p><p>    client.read('/nodes/n1', wait = True) # will wait till the key is changed, and return once its changed</p><p>    client.read('/nodes/n1', wait = True, timeout=30) # will wait till the key is changed, and return once its changed, or exit with an exception after 30 seconds.</p><p>    client.read('/nodes/n1', wait = True, waitIndex = 10) # get all changes on this key starting from index 10</p><p>    client.watch('/nodes/n1') #equivalent to client.read('/nodes/n1', wait = True)</p><p>    client.watch('/nodes/n1', index = 10)</p><p>Locking module</p><p>~~~~~~~~~~~~~~</p><p>.. code:: python</p><p>    # Initialize the lock object:</p><p>    # NOTE: this does not acquire a lock yet</p><p>    client = etcd.Client()</p><p>    lock = etcd.Lock(client, 'my_lock_name')</p><p>    # Use the lock object:</p><p>    lock.acquire(blocking=True, # will block until the lock is acquired</p><p>          lock_ttl=None) # lock will live until we release it</p><p>    lock.is_acquired()  #</p><p>    lock.acquire(lock_ttl=60) # renew a lock</p><p>    lock.release() # release an existing lock</p><p>    lock.is_acquired()  # False</p><p>    # The lock object may also be used as a context manager:</p><p>    client = etcd.Client()</p><p>    with etcd.Lock(client, 'customer1') as my_lock:</p><p>        do_stuff()</p><p>        my_lock.is_acquired()  # True</p><p>        my_lock.acquire(lock_ttl = 60)</p><p>    my_lock.is_acquired() # False</p><p>Get machines in the cluster</p><p>~~~~~~~~~~~~~~~~~~~~~~~~~~~</p><p>.. code:: python</p><p>    client.machines</p><p>Get leader of the cluster</p><p>~~~~~~~~~~~~~~~~~~~~~~~~~</p><p>.. code:: python</p><p>    client.leader</p><p>Generate a sequential key in a directory</p><p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p><p>.. code:: python</p><p>    x = client.write("/dir/name", "value", append=True)</p><p>    print("generated key: " + x.key)</p><p>    print("stored value: " + x.value)</p><p>List contents of a directory</p><p>~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p><p>.. code:: python</p><p>    #stick a couple values in the directory</p><p>    client.write("/dir/name", "value1", append=True)</p><p>    client.write("/dir/name", "value2", append=True)</p><p>    directory = client.get("/dir/name")</p><p>    # loop through directory children</p><p>    for result in directory.children:</p><p>      print(result.key + ": " + result.value)</p><p>    # or just get the first child value</p><p>    print(directory.children.next().value)</p><p>Development setup</p><p>-----------------</p><p>To create a buildout,</p><p>.. code:: bash</p><p>    $ python bootstrap.py</p><p>    $ bin/buildout</p><p>to test you should have etcd available in your system path:</p><p>.. code:: bash</p><p>    $ bin/test</p><p>to generate documentation,</p><p>.. code:: bash</p><p>    $ cd docs</p><p>    $ make</p><p>Release HOWTO</p><p>-------------</p><p>To make a release</p><p>    1) Update release date/version in NEWS.txt and setup.py</p><p>    2) Run 'python setup.py sdist'</p><p>    3) Test the generated source distribution in dist/</p><p>    4) Upload to PyPI: 'python setup.py sdist register upload'</p><p>News</p><p>====</p><p>0.4.3</p><p>-----</p><p>*Release date: 14-Dec-2015*</p><p>* Fix check for parameters in case of connection error</p><p>* Python 3.5 compatibility and general python3 cleanups</p><p>* Added authentication and module for managing ACLs</p><p>* Added srv record-based DNS discovery</p><p>* Fixed (again) logging of cluster id changes</p><p>* Fixed leader lookup</p><p>* Properly retry request on exception</p><p>* Client: clean up open connections when deleting</p><p>0.4.2</p><p>-----</p><p>*Release date: 8-Oct-2015*</p><p>* Fixed lock documentation</p><p>* Fixed lock sequences due to etcd 2.2 change</p><p>* Better exception management during response processing</p><p>* Fixed logging of cluster ID changes</p><p>* Fixed subtree results</p><p>* Do not check cluster ID if etcd responses don't contain the ID</p><p>* Added a cause to EtcdConnectionFailed</p><p>0.4.1</p><p>-----</p><p>*Release date: 1-Aug-2015*</p><p>* Added client-side leader election</p><p>* Added stats endpoints</p><p>* Added logging</p><p>* Better exception handling</p><p>* Check for cluster ID on each request</p><p>* Added etcd.Client.members and fixed etcd.Client.leader</p><p>* Removed locking and election etcd support</p><p>* Allow the use of etcd proxies with reconnections</p><p>* Implement pop: Remove key from etc and return the corresponding value.</p><p>* Eternal watcher can be now recursive</p><p>* Fix etcd.Client machines</p><p>* Do not send parameters with `None` value to etcd</p><p>* Support ttl=0 in write.</p><p>* Moved pyOpenSSL into test requirements.</p><p>* Always set certificate information so redirects from http to https work.</p><p>0.3.3</p><p>-----</p><p>*Release date: 12-Apr-2015*</p><p>* Forward leaves_only value in get_subtree() recursive calls</p><p>* Fix README prevExists-&gt;prevExist</p><p>* Added configurable version_prefix</p><p>* Added support for recursive watch</p><p>* Better error handling support (more detailed exceptions)</p><p>* Fixed some unreliable tests</p><p>0.3.2</p><p>-----</p><p>*Release date: 4-Aug-2014*</p><p>* Fixed generated documentation version.</p><p>0.3.1</p><p>-----</p><p>*Release date: 4-Aug-2014*</p><p>* Added consisten read option</p><p>* Fixed timeout parameter in read()</p><p>* Added atomic delete parameter support</p><p>* Fixed delete behaviour</p><p>* Added update method that allows atomic updated on results</p><p>* Fixed checks on write()</p><p>* Added leaves generator to EtcdResult and get_subtree for recursive fetch</p><p>* Added etcd_index to EtcdResult</p><p>* Changed ethernal -&gt; eternal</p><p>* Updated urllib3 &amp; pyOpenSSL libraries</p><p>* Several performance fixes</p><p>* Better parsing of etcd_index and raft_index</p><p>* Removed duplicated tests</p><p>* Added several integration and unit tests</p><p>* Use etcd v0.3.0 in travis</p><p>* Execute test using `python setup.py test` and nose</p><p>0.3.0</p><p>-----</p><p>*Release date: 18-Jan-2014*</p><p>* API v2 support</p><p>* Python 3.3 compatibility</p><p>0.2.1</p><p>-----</p><p>*Release data: 30-Nov-2013*</p><p>* SSL support</p><p>* Added support for subdirectories in results.</p><p>* Improve test</p><p>* Added support for reconnections, allowing death node tolerance.</p><p>0.2.0</p><p>-----</p><p>*Release date: 30-Sep-2013*</p><p>* Allow fetching of multiple keys (sub-nodes)</p><p>0.1</p><p>---</p><p>*Release date: 18-Sep-2013*</p><p>* Initial release

</p><a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>1308</span> downloads in the last week
  </li>
  <li>
    <span>14490</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>