<html><body><div><div class="entry-content clearfix"><p><a href="https://github.com/omab/python-social-auth">Python Social Auth</a> is a library that provides “an easy-to-setup social authentication/registration mechanism with support for several <a href="http://psa.matiasaguirre.net/docs/intro.html#supported-frameworks">frameworks</a> and <a href="http://psa.matiasaguirre.net/docs/intro.html#auth-providers">auth providers</a>”. In this tutorial, we’ll detail how to integrate this library into a Django project to provide user authentication.</p>

<p><strong>What we’re using</strong>:</p>

<ul>
<li>Django==1.7.1</li>
<li>python-social-auth==0.2.1</li>
</ul>


<a name="Django.Setup"/>
<h2>Django Setup</h2>

<blockquote><p>If you already have a project set up and ready to go, feel free to skip this section.</p></blockquote>

<p>Create and activate a virtualenv, install Django, and then start a new Django project:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>django-admin.py startproject django_social_project
</span><span class="line"><span class="nv">$ </span><span class="nb">cd </span>django_social_project
</span><span class="line"><span class="nv">$ </span>python manage.py startapp django_social_app
</span></code></pre></td></tr></table></div></figure>


<p>Set up the initial tables and add a superuser:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>python manage.py migrate
</span><span class="line">Operations to perform:
</span><span class="line">  Apply all migrations: admin, contenttypes, auth, sessions
</span><span class="line">Running migrations:
</span><span class="line">  Applying contenttypes.0001_initial... OK
</span><span class="line">  Applying auth.0001_initial... OK
</span><span class="line">  Applying admin.0001_initial... OK
</span><span class="line">  Applying sessions.0001_initial... OK
</span><span class="line">
</span><span class="line"><span class="nv">$ </span>python manage.py createsuperuser
</span><span class="line">Username <span class="o">(</span>leave blank to use <span class="s1">'michaelherman'</span><span class="o">)</span>: admin
</span><span class="line">Email address: ad@min.com
</span><span class="line">Password:
</span><span class="line">Password <span class="o">(</span>again<span class="o">)</span>:
</span><span class="line">Superuser created successfully.
</span></code></pre></td></tr></table></div></figure>


<p>Create a new directory in the Project root called “templates”, and then add the correct path to the <em>settings.py</em> file:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">TEMPLATE_DIRS</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">'templates'</span><span class="p">),</span>
</span><span class="line"><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Run the development server to ensure all is in order and then navigate to <a href="http://localhost:8000/">http://localhost:8000/</a>. You should see the “It worked!” page.</p>

<p>Your project should look like this:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="err">└──</span> <span class="n">django_social_project</span>
</span><span class="line">    <span class="err">├──</span> <span class="n">db</span><span class="o">.</span><span class="n">sqlite3</span>
</span><span class="line">    <span class="err">├──</span> <span class="n">django_social_app</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">├──</span> <span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">├──</span> <span class="n">admin</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">├──</span> <span class="n">migrations</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">│  </span> <span class="err">└──</span> <span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">├──</span> <span class="n">models</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">├──</span> <span class="n">tests</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">└──</span> <span class="n">views</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">├──</span> <span class="n">django_social_project</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">├──</span> <span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">├──</span> <span class="n">settings</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">├──</span> <span class="n">urls</span><span class="o">.</span><span class="n">py</span>
</span><span class="line">    <span class="err">│  </span> <span class="err">└──</span> <span class="n">wsgi</span><span class="o">.</span><span class="n">py</span>
</span><span class="line"> <span class="err">  </span> <span class="err">├──</span> <span class="n">manage</span><span class="o">.</span><span class="n">py</span>
</span><span class="line"> <span class="err">  </span> <span class="err">└──</span> <span class="n">templates</span>
</span></code></pre></td></tr></table></div></figure>


<a name="Python.Social.Auth.Setup"/>
<h2>Python Social Auth Setup</h2>

<p>Follow the steps below and/or the <a href="http://psa.matiasaguirre.net/docs/index.html">official installation guide</a> to install and setup the basic configuration.</p>

<a name="Installation"/>
<h3>Installation</h3>

<p>Install with pip:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>pip install python-social-auth<span class="o">==</span>0.2.1
</span></code></pre></td></tr></table></div></figure>


<a name="Configuration"/>
<h3>Configuration</h3>

<p>Update <em>settings.py</em> to include/register the library in our project:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">    <span class="s">'django.contrib.admin'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.contrib.auth'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.contrib.contenttypes'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.contrib.sessions'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.contrib.messages'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.contrib.staticfiles'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django_social_project'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'social.apps.django_app.default'</span><span class="p">,</span>
</span><span class="line"><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">TEMPLATE_CONTEXT_PROCESSORS</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">    <span class="s">'django.contrib.auth.context_processors.auth'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.core.context_processors.debug'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.core.context_processors.i18n'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.core.context_processors.media'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.core.context_processors.static'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.core.context_processors.tz'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.contrib.messages.context_processors.messages'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'social.apps.django_app.context_processors.backends'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'social.apps.django_app.context_processors.login_redirect'</span><span class="p">,</span>
</span><span class="line"><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">AUTHENTICATION_BACKENDS</span> <span class="o">=</span> <span class="p">(</span>
</span><span class="line">    <span class="s">'social.backends.facebook.FacebookOAuth2'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'social.backends.google.GoogleOAuth2'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'social.backends.twitter.TwitterOAuth'</span><span class="p">,</span>
</span><span class="line">    <span class="s">'django.contrib.auth.backends.ModelBackend'</span><span class="p">,</span>
</span><span class="line"><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once registered, update the database:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>python manage.py makemigrations
</span><span class="line">Migrations <span class="k">for</span> <span class="s1">'default'</span>:
</span><span class="line">  0002_auto_20141109_1829.py:
</span><span class="line">    - Alter field user on usersocialauth
</span><span class="line">
</span><span class="line"><span class="nv">$ </span>python manage.py migrate
</span><span class="line">Operations to perform:
</span><span class="line">  Apply all migrations: admin, default, contenttypes, auth, sessions
</span><span class="line">Running migrations:
</span><span class="line">  Applying default.0001_initial... OK
</span><span class="line">  Applying default.0002_auto_20141109_1829... OK
</span></code></pre></td></tr></table></div></figure>


<p>Update the Project’s <code>urlpatterns</code> in <em>urls.py</em> to include the main auth URLs:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">urlpatterns</span> <span class="o">=</span> patterns<span class="o">(</span>
</span><span class="line">    <span class="s1">''</span>,
</span><span class="line">    url<span class="o">(</span>r<span class="s1">'^admin/'</span>, include<span class="o">(</span>admin.site.urls<span class="o">))</span>,
</span><span class="line">    url<span class="o">(</span><span class="s1">''</span>, include<span class="o">(</span><span class="s1">'social.apps.django_app.urls'</span>, <span class="nv">namespace</span><span class="o">=</span><span class="s1">'social'</span><span class="o">))</span>,
</span><span class="line"><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next, you need to grab the required authentication keys form each social application that you want to include. The process is similar for many of the popular social networks – like Twitter, Facebook, and Google. Let’s look at Twitter as an example…</p>

<a name="Twitter.Authentication.Keys"/>
<h2>Twitter Authentication Keys</h2>

<p>Create a new application at <a href="https://apps.twitter.com/app/new">https://apps.twitter.com/app/new</a> and make sure to use a callback url of <a href="http://127.0.0.1:8000/complete/twitter">http://127.0.0.1:8000/complete/twitter</a>.</p>

<p>In the “django_social_project” directory, add a new file called <em>config.py</em>. Grab the <code>Consumer Key (API Key)</code> and the <code>Consumer Secret (API Secret)</code> from Twitter under the “Keys and Access Tokens” tab and add them to the config file like so:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">SOCIAL_AUTH_TWITTER_KEY</span> <span class="o">=</span> <span class="s">'update me'</span>
</span><span class="line"><span class="n">SOCIAL_AUTH_TWITTER_SECRET</span> <span class="o">=</span> <span class="s">'update me'</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let’s also add the following URLs to <em>config.py</em> to specify the login and redirect URLs (after a user authenticates):</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">SOCIAL_AUTH_LOGIN_REDIRECT_URL</span> <span class="o">=</span> <span class="s">'/home/'</span>
</span><span class="line"><span class="n">SOCIAL_AUTH_LOGIN_URL</span> <span class="o">=</span> <span class="s">'/'</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add the following import to <em>settings.py</em>:</p>

<figure class="code"><figcaption><span/></figcaption></figure>


<p>Make sure to add <em>config.py</em> to your <em>.gitignore</em> file, as you do <em>not</em> want this file added to version control since it contains sensitive information.</p>

<p>For more info, check the <a href="http://python-social-auth.readthedocs.org/en/latest/backends/twitter.html?highlight=twitter">official docs</a>.</p>

<a name="Sanity.Check"/>
<h2>Sanity Check</h2>

<p>Let’s test this out. Fire up the server and navigate to <a href="http://127.0.0.1:8000/login/twitter">http://127.0.0.1:8000/login/twitter</a>, authorize the app, and if all works out, you should be redirected to <a href="http://127.0.0.1:8000/home/">http://127.0.0.1:8000/home/</a> (the URL associated with <code>SOCIAL_AUTH_LOGIN_REDIRECT_URL</code>). You should see a 404 error since we do not have a route, view, or template set up yet.</p>

<p>Let’s do that now…</p>

<a name="Friendly.Views"/>
<h2>Friendly Views</h2>

<p>For now, we just need two views – login and home.</p>

<a name="URLs"/>
<h3>URLs</h3>

<p>Update the URL patterns in <em>urls.py</em>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span>
</span><span class="line">    <span class="s">''</span><span class="p">,</span>
</span><span class="line">    <span class="n">url</span><span class="p">(</span><span class="s">r'^admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
</span><span class="line">    <span class="n">url</span><span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="s">'social.apps.django_app.urls'</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="s">'social'</span><span class="p">)),</span>
</span><span class="line">    <span class="n">url</span><span class="p">(</span><span class="s">r'^$'</span><span class="p">,</span> <span class="s">'django_social_app.views.login'</span><span class="p">),</span>
</span><span class="line">    <span class="n">url</span><span class="p">(</span><span class="s">r'^home/$'</span><span class="p">,</span> <span class="s">'django_social_app.views.home'</span><span class="p">),</span>
</span><span class="line">    <span class="n">url</span><span class="p">(</span><span class="s">r'^logout/$'</span><span class="p">,</span> <span class="s">'django_social_app.views.logout'</span><span class="p">),</span>
</span><span class="line"><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Besides the <code>/</code> and <code>home/</code> routes, we also added the <code>logout/</code> route.</p>

<a name="Views"/>
<h3>Views</h3>

<p>Next, add the following view functions:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span><span class="p">,</span> <span class="n">redirect</span><span class="p">,</span> <span class="n">render</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">logout</span> <span class="k">as</span> <span class="n">auth_logout</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">django.contrib.auth.decorators</span> <span class="kn">import</span> <span class="n">login_required</span>
</span><span class="line"><span class="c"># from django.template.context import RequestContext</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="line">    <span class="c"># context = RequestContext(request, {</span>
</span><span class="line">    <span class="c">#     'request': request, 'user': request.user})</span>
</span><span class="line">    <span class="c"># return render_to_response('login.html', context_instance=context)</span>
</span><span class="line">    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'login.html'</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="nd">@login_required</span><span class="p">(</span><span class="n">login_url</span><span class="o">=</span><span class="s">'/'</span><span class="p">)</span>
</span><span class="line"><span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">'home.html'</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">logout</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class="line">    <span class="n">auth_logout</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</span><span class="line">    <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>In the <code>login()</code> function, we grab the logged in user with the <code>RequestContext</code>. For your reference, the more explicit method of achieving this is commented out.</p>

<a name="Templates"/>
<h3>Templates</h3>

<p>Add two templates <em>home.html</em> and <em>login.html</em>.</p>




<p><strong>home.html</strong></p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;h1&gt;</span>Welcome<span class="nt">&lt;/h1&gt;</span>
</span><span class="line"><span class="nt">&lt;p&gt;&lt;a</span> <span class="na">href=</span><span class="s">"/logout"</span><span class="nt">&gt;</span>Logout<span class="nt">&lt;/a&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>login.html</strong></p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">{% if user and not user.is_anonymous %}
</span><span class="line">  <span class="nt">&lt;a&gt;</span>Hello, {{ user.get_full_name }}!<span class="nt">&lt;/a&gt;</span>
</span><span class="line">  <span class="nt">&lt;br&gt;</span>
</span><span class="line">  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/logout"</span><span class="nt">&gt;</span>Logout<span class="nt">&lt;/a&gt;</span>
</span><span class="line">{% else %}
</span><span class="line">  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'social:begin' 'twitter' %}?next={{ request.path }}"</span><span class="nt">&gt;</span>Login with Twitter<span class="nt">&lt;/a&gt;</span>
</span><span class="line">{% endif %}
</span></code></pre></td></tr></table></div></figure>


<p>Your project should now look like this:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">└── django_social_project
</span><span class="line">    ├── db.sqlite3
</span><span class="line">    ├── django_social_app
</span><span class="line">    │   ├── __init__.py
</span><span class="line">    │   ├── admin.py
</span><span class="line">    │   ├── migrations
</span><span class="line">    │   │   └── __init__.py
</span><span class="line">    │   ├── models.py
</span><span class="line">    │   ├── tests.py
</span><span class="line">    │   └── views.py
</span><span class="line">    ├── django_social_project
</span><span class="line">    │   ├── __init__.py
</span><span class="line">    │   ├── config.py
</span><span class="line">    │   ├── settings.py
</span><span class="line">    │   ├── urls.py
</span><span class="line">    │   └── wsgi.py
</span><span class="line">    ├── manage.py
</span><span class="line">    └── templates
</span><span class="line">        ├── home.html
</span><span class="line">        └── login.html
</span></code></pre></td></tr></table></div></figure>


<p>Test it out again. Fire up the server. Make sure to first logout, since a user should already be logged in from the last test, and then test logging in and logging out. After login, the user should be redirected to <code>/home</code>.</p>

<a name="Next.Steps"/>
<h2>Next Steps</h2>

<p>At this point, you’ll probably want to add a few more authentication providers – like <a href="http://python-social-auth.readthedocs.org/en/latest/backends/facebook.html">Facebook</a> and <a href="http://python-social-auth.readthedocs.org/en/latest/backends/google.html">Google</a>. The workflow is simple for adding a new social auth provider:</p>

<ol>
<li>Create a new application on the provider’s website.</li>
<li>Set the callback URL.</li>
<li>Grab the keys/tokens and add them to <em>config.py</em>.</li>
<li>Add the new provider to the <code>AUTHENTICATION_BACKENDS</code> tuple in <em>settings.py</em>.</li>
<li>Update the login template by adding the new URL like so – <code>&lt;a href="{% url 'social:begin' 'ADD AUTHENTICATION PROVIDER NAME' %}?next={{ request.path }}"&gt;Login with AUTHENTICATION PROVIDER NAME&lt;/a&gt;</code>.</li>
</ol>


<p>Please review the <a href="http://psa.matiasaguirre.net/docs/">official docs</a> for more information. Leave comments and questions below. Thanks for reading!</p>

<p>Oh – and grab the code from the <a href="https://github.com/realpython/django-social-auth-example">repo</a>.</p>
</div>


      </div></body></html>