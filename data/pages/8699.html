<html><body><div><article class="post-content">
  <p>This post gives a game theoretic explanation as to why we exchange gifts. On
twitter <a href="https://twitter.com/alexip">@alexip</a> tweeted <a href="https://twitter.com/alexip/status/673573450036981762">“‘Let’s agree not to give
each other presents for Christmas’ is just another case of the prisoner’s
dilemma #gametheory”</a>.
This post builds on that and investigates the premise fully in an evolutionary
context investigating different values of how good it feels to give and receive
a gift :)</p>

<p><a href="https://twitter.com/alexip/status/673573450036981762"><img src="/unpeudemath/assets/images/tweet_about_xmas.png" alt="Photo of alex's&#10;tweet"/></a></p>

<p>To illustrate this consider the situation where Alex and Camille are approaching
Christmas:</p>

<blockquote>
  <p>Alex: How about we don’t buy Christmas present for each other this year?</p>
</blockquote>

<blockquote>
  <p>Camille: Sounds great.</p>
</blockquote>

<p><strong>Let us describe how this situation corresponds to a prisoner’s dilemma.</strong></p>

<ul>
  <li>If Alex and Camille <strong>cooperate</strong> and indeed keep their promise of not getting
gifts than let us assume they both get a utility of \(R\) (<em>reward</em>).</li>
  <li>If Alex cooperates but Camille decides to <strong>defect</strong> and nonetheless give a
gift then Alex will feel a bit bad and Camille will feel good, so Alex gets a
utility of \(S\) (<em>sucker</em>) and Camille a utility of \(T\) (<em>temptation</em>).</li>
  <li>Vice versa if Camille cooperates but Alex decides to give a gift.</li>
  <li>If <strong>both</strong> Alex and Camille go against their promise then they both get a
utility of \(P\) (<em>punishment</em>).</li>
</ul>

<p>This looks something like:</p>

<p><img src="/unpeudemath/assets/images/prisonersdilemma.svg" alt="PD"/></p>

<p>If we assume that we feel better when we give gifts and will be keen to ‘cheat’
a promise of not giving then that corresponds to the following inequality of
utilities:</p>



<p>In this case we see that if Camille chooses to cooperate then Alex’s <strong>best
response</strong> is to play defect (as \(T&gt;R\)):</p>

<blockquote>
  <p>If Camille is indeed going to not give a gift, then Alex should give a gift.</p>
</blockquote>

<p><strong>Also</strong> if Camille chooses to defect then Alex’s <strong>best response</strong> is to defect
once again (as \(P&gt;S\)):</p>

<blockquote>
  <p>If Camille is going to ‘break the promise’ then Alex should give a gift.</p>
</blockquote>

<p><strong>So no matter what happens: Alex should defect.</strong></p>

<p>In game theory this is what is called a dominating strategy, and indeed this
situation is referred to as a <a href="https://en.wikipedia.org/wiki/Prisoner%27s_dilemma">Prisoner’s
Dilemma</a> and is what Alex
was referring to in his original tweet.</p>

<h2 id="how-does-reputation-effect-gift-giving">How does reputation effect gift giving?</h2>

<p><strong>So far all we are really modelling is a SINGLE exchange of gifts.</strong>
If we were to exchange gifts every year we would perhaps learn to trust each
other, so that when Camille says they are not going to give a gift Alex has
reason to believe that they will indeed not do so.</p>

<p>This is called an <strong>iterated Prisoner’s dilemma</strong> and has been the subject of a
great amount of academic work.</p>

<p>Let us consider two types of behaviour that Camille and Alex could choose to
exhibit, they could be:</p>

<ul>
  <li>Alternator: give gifts one year and not give gifts the next.</li>
  <li>TitForTat: do whatever the other does the previous year.</li>
</ul>

<p>Let us assume that Alex and Camille will be faced with this situation for 10
years. I’m going to use the Python <a href="http://axelrod.readthedocs.org/en/latest/">Axelrod
library</a> to illustrate things:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">axelrod</span> <span class="kn">as</span> <span class="nn">axl</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">alex</span><span class="p">,</span> <span class="n">camille</span> <span class="o">=</span> <span class="n">axl</span><span class="o">.</span><span class="n">Alternator</span><span class="p">(),</span> <span class="n">axl</span><span class="o">.</span><span class="n">TitForTat</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">match</span> <span class="o">=</span> <span class="n">axl</span><span class="o">.</span><span class="n">Match</span><span class="p">([</span><span class="n">alex</span><span class="p">,</span> <span class="n">camille</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">_</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">sparklines</span><span class="p">(</span><span class="n">c_symbol</span><span class="o">=</span><span class="s">'😀'</span><span class="p">,</span> <span class="n">d_symbol</span><span class="o">=</span><span class="s">'🎁'</span><span class="p">))</span>
<span class="err">😀🎁😀🎁😀🎁😀🎁😀🎁</span>
<span class="err">😀😀🎁😀🎁😀🎁😀🎁😀</span></code></pre></figure>

<p>We see that Alex and Camille never actually exchange gifts the same year (the 😀
means that the particular player cooperates, the 🎁 that they don’t and give a
gift).</p>

<p>Most of the ongoing Iterated Prisoner’s Dilemma research is directly due to a
computer tournament run by <a href="http://www-personal.umich.edu/~axe/">Robert Axelrod</a>
in the 1980s. In that work Axelrod invited a variety of computer strategies to
be submitted and they then played against each other. You can read more about
that here:
<a href="http://axelrod.readthedocs.org/en/latest/reference/description.html">axelrod.readthedocs.org/en/latest/reference/description.html</a>
but the important thing is that there are a bunch of ‘behaviours’ that have been
well studied and that we will look at here:</p>

<ol>
  <li>Cooperator: never give gifts</li>
  <li>Defector: always give gifts</li>
  <li>Alternator: give gifts one year and not give gifts the next.</li>
  <li>TitForTat: do whatever the other does the previous year.</li>
  <li>TwoTitForTat: will start by not giving a gift but if the other player gives a
  gift will give a gift the next two years.</li>
  <li>Grudger: start by not giving gifts but if at any time someone else goes
  against the promise: give a gift no matter what.</li>
</ol>

<p>What we will now do is see how much utility (how people feel about their gift
giving behaviour) if we have a situation where 6 people exchange gifts for 50
years and each person acts according to one of the above behaviours.</p>

<p>For our utility we will use the following values of \(R, P, S, T\):</p>



<p>Here is how we can do this in python:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">family</span> <span class="o">=</span> <span class="p">[</span><span class="n">axl</span><span class="o">.</span><span class="n">Cooperator</span><span class="p">(),</span>
<span class="o">...</span>           <span class="n">axl</span><span class="o">.</span><span class="n">Defector</span><span class="p">(),</span>
<span class="o">...</span>           <span class="n">axl</span><span class="o">.</span><span class="n">Alternator</span><span class="p">(),</span>
<span class="o">...</span>           <span class="n">axl</span><span class="o">.</span><span class="n">TitForTat</span><span class="p">(),</span>
<span class="o">...</span>           <span class="n">axl</span><span class="o">.</span><span class="n">TwoTitsForTat</span><span class="p">(),</span>
<span class="o">...</span>           <span class="n">axl</span><span class="o">.</span><span class="n">Grudger</span><span class="p">()]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">christmas</span> <span class="o">=</span> <span class="n">axl</span><span class="o">.</span><span class="n">Tournament</span><span class="p">(</span><span class="n">family</span><span class="p">,</span> <span class="n">turns</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">repetitions</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">results</span> <span class="o">=</span> <span class="n">christmas</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">results</span><span class="o">.</span><span class="n">scores</span>
<span class="p">[[</span><span class="mi">525</span><span class="p">],</span> <span class="p">[</span><span class="mi">562</span><span class="p">],</span> <span class="p">[</span><span class="mi">417</span><span class="p">],</span> <span class="p">[</span><span class="mi">622</span><span class="p">],</span> <span class="p">[</span><span class="mi">646</span><span class="p">],</span> <span class="p">[</span><span class="mi">646</span><span class="p">]]</span></code></pre></figure>

<p>We see that the people that do the best are the last two: TwoTitForTat and
Grudger. These are people who are quick enough to react to people who won’t
keep their promise but that do give hope to people who will!</p>

<p>## At a population level: evolution of gift giving</p>

<p>We can consider this in an evolutionary context where we see how the behaviour
is allowed to evolve amongst a whole population of people. This particular type
of game theoretic analysis is concerned not in micro interactions but long term
macro stability of the system.</p>

<p>Here is how we can see this using Python:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">evo</span> <span class="o">=</span> <span class="n">axl</span><span class="o">.</span><span class="n">Ecosystem</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">evo</span><span class="o">.</span><span class="n">reproduce</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">axl</span><span class="o">.</span><span class="n">Plot</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">plot</span><span class="o">.</span><span class="n">stackplot</span><span class="p">(</span><span class="n">evo</span><span class="p">)</span></code></pre></figure>

<p><img src="/unpeudemath/assets/images/basic_christmas_evo.svg" alt="Basic Christmas&#10;Evolution"/></p>

<p>What we see is that over time, the population evolves to only Cooperator,
TitForTat, Grudger and TwoTitsForTat, <strong>but</strong> of course in a population with
only those strategies everyone is keeping their promise, cooperating and <strong>not
giving gifts</strong>.</p>

<p>Let us see how this changes for different values of \(R, P, S, T\).</p>

<p>To check if not giving presents is evolutionary stable we just need to see what
the last population numbers are for the Alternator and Defector. Here is a Python function to do this:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="k">def</span> <span class="nf">check_if_end_pop_cooperates</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="o">...</span>                                 <span class="n">digits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="n">family</span><span class="p">,</span> <span class="n">turns</span><span class="o">=</span><span class="mi">10000</span><span class="p">):</span>
<span class="o">...</span>    <span class="s">"""Returns a boolean and the last population vector"""</span>
<span class="o">...</span>    <span class="n">game</span> <span class="o">=</span> <span class="n">axl</span><span class="o">.</span><span class="n">Game</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="n">r</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
<span class="o">...</span>    <span class="n">christmas</span> <span class="o">=</span> <span class="n">axl</span><span class="o">.</span><span class="n">Tournament</span><span class="p">(</span><span class="n">family</span><span class="p">,</span> <span class="n">turns</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">repetitions</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">game</span><span class="o">=</span><span class="n">game</span><span class="p">)</span>
<span class="o">...</span>    <span class="n">results</span> <span class="o">=</span> <span class="n">christmas</span><span class="o">.</span><span class="n">play</span><span class="p">()</span>
<span class="o">...</span>    <span class="n">evo</span> <span class="o">=</span> <span class="n">axl</span><span class="o">.</span><span class="n">Ecosystem</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="o">...</span>    <span class="n">evo</span><span class="o">.</span><span class="n">reproduce</span><span class="p">(</span><span class="n">turns</span><span class="p">)</span>
<span class="o">...</span>    <span class="n">last_pop</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">pop</span><span class="p">,</span> <span class="n">digits</span><span class="p">)</span> <span class="k">for</span> <span class="n">pop</span> <span class="ow">in</span> <span class="n">evo</span><span class="o">.</span><span class="n">population_sizes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
<span class="o">...</span>    <span class="k">return</span> <span class="n">last_pop</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">last_pop</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span> <span class="n">last_pop</span></code></pre></figure>

<p>We see that for the default values of \(R, P, S, T\) we have:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">check_if_end_pop_cooperates</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="p">(</span><span class="bp">True</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.16576</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.26105</span><span class="p">,</span> <span class="mf">0.28659</span><span class="p">,</span> <span class="mf">0.28659</span><span class="p">])</span></code></pre></figure>

<p>As already seen we have that for these values we end up with everyone keeping to the promise.
Let us increase the value of \(T\) by a factor of 100:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="n">check_if_end_pop_cooperates</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
<span class="p">(</span><span class="bp">False</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span></code></pre></figure>

<p>We here see, that if the utility of giving a gift when the receiver is not giving
one in return is very large, the overall population will always give a gift:</p>

<p><img src="/unpeudemath/assets/images/t_factor_of_100_christmas_evo.svg" alt="Increasing t by factor of 100"/></p>

<p>## Seeing the effect of how good giving gifts makes us feel</p>

<p>The final piece of analysis I will carry out is a parameter sweep of the above:</p>

<ul>
  <li>\(5\leq T \leq 100\)</li>
  <li>\(3\leq R &lt; T\)</li>
  <li>\(1\leq P &lt; R\)</li>
  <li>\(0\leq S &lt; P\)</li>
</ul>

<p>All of this data sweep is in <a href="/unpeudemath/assets/code/christmas.csv">this csv
file</a>. Here is the distribution of
parameters for which everyone gives a gift (reneging on the promise):</p>

<p><img src="/unpeudemath/assets/images/parameters_for_which_gifts_are_not_given.svg" alt="Parameters for kept&#10;promise"/></p>

<p>Here is the distribution of parameters for which everyone keeps their promise
and does not give gifts:</p>

<p><img src="/unpeudemath/assets/images/parameters_for_which_gifts_are_given.svg" alt="Parameters for kept&#10;promise"/></p>

<p>We see that people keep their promise if the \(T\) utility (the utility of
being tempted to break the promise) is very high compared to all other
utilities.</p>

<p>Carrying out a simple logistic regression we see the coefficients of each of the variables as follows:</p>

<ul>
  <li>\(P\): 3.121547</li>
  <li>\(R\): -2.942909</li>
  <li>\(S\): 0.007738</li>
  <li>\(T\): -0.107386</li>
</ul>

<p>The parameters that have a positive effect on keeping the promise is \(R\) and
\(S\) which is the reward for the promise being kept and for not giving a gift
but receiving one.</p>

<h2 id="tldr">TLDR</h2>

<p>Agreeing to not give gifts at Christmas can be an evolutionary stable strategy,
but this is only in the specific case where the utility of ‘giving’ is less than
the utility of ‘not giving’. <strong>Given that in practice this promise is almost always broken
(that’s my personal experience anyway) this would suggest that people enjoy
giving gifts a lot more than receiving them.</strong></p>

<p><strong>Merry christmas 🎄🎁⛄️.</strong></p>

<hr/>



  </article>

</div></body></html>