<html><body><div><div class="section-inner layoutSingleColumn"><h3 name="2244" id="2244" class="graf--h3 graf--first">Build an ‘SMS center’ with Python , Kannel and a GSM modem</h3><p name="04a0" id="04a0" class="graf--p graf-after--h3">I’ve always wondered how in a country where only <a href="https://energypedia.info/wiki/Burundi_Energy_Situation" data-href="https://energypedia.info/wiki/Burundi_Energy_Situation" class="markup--anchor markup--p-anchor" rel="nofollow">6.50%</a> of the population has access to electricity, telecommunications companies manage to do business and bring mobile penetration to <a href="http://www.budde.com.au/Research/Burundi-Telecoms-Mobile-and-Broadband-Statistics-and-Analyses.html" data-href="http://www.budde.com.au/Research/Burundi-Telecoms-Mobile-and-Broadband-Statistics-and-Analyses.html" class="markup--anchor markup--p-anchor" rel="nofollow">~40%</a> of the population!</p><p name="2cb1" id="2cb1" class="graf--p graf-after--p">If you live in a sub-Saharan country like me ( Burundi), you know how we power our phones, right ?</p><p name="ee77" id="ee77" class="graf--p graf-after--p">Anyway.</p><figure name="74f2" id="74f2" class="graf--figure graf--layoutOutsetLeft graf-after--p"><figcaption class="imageCaption">Dumb phones ( opposed to Smartphones)</figcaption></figure><p name="692a" id="692a" class="graf--p graf-after--figure">It means we heavily use ‘dumb phones’ which don’t consume a lot the scarce energy we have…, opposed to the now worldwide known smartphones.</p><p name="897b" id="897b" class="graf--p graf-after--p">It also means, there is a great potential of using SMS all over the country even if there is not enough internet coverage yet.</p><p name="cd5e" id="cd5e" class="graf--p graf-after--p">That’s what I’ve been doing all these past ~2 years at UNICEF, building SMS-based web-applications, and dashboards for … youth engagement (<a href="https://github.com/unicefburundi/ureport-project/commits?author=srugano" data-href="https://github.com/unicefburundi/ureport-project/commits?author=srugano" class="markup--anchor markup--p-anchor" rel="nofollow">U-report</a>), or for collecting data on diseases ( <a href="http://goo.gl/jyzeA7" data-href="http://goo.gl/jyzeA7" class="markup--anchor markup--p-anchor" rel="nofollow">Cholera App</a> ) or health systems ( <a href="http://goo.gl/lN03BC" data-href="http://goo.gl/lN03BC" class="markup--anchor markup--p-anchor" rel="nofollow">Mother and Child Health Week</a> ), …</p><p name="2993" id="2993" class="graf--p graf-after--p">And many young people don’t understand the necessity of using the available/affordable techs (SMS for example in Africa) and instead keep waiting for the big much awaited optical-fiber revolution, when Internet will be available everywhere.</p><p name="a9cc" id="a9cc" class="graf--p graf-after--p">But, … considering the success of <a href="http://www.forbes.com/sites/danielrunde/2015/08/12/m-pesa-and-the-rise-of-the-global-mobile-money-market/" data-href="http://www.forbes.com/sites/danielrunde/2015/08/12/m-pesa-and-the-rise-of-the-global-mobile-money-market/" class="markup--anchor markup--p-anchor" rel="nofollow">M-Pesa</a> ( <a href="http://nchinampesa.safaricom.co.ke/#scroll" data-href="http://nchinampesa.safaricom.co.ke/#scroll" class="markup--anchor markup--p-anchor" rel="nofollow">237 million person-to-person transactions</a> ! man! ), we better reconsider our view on the subject.</p><p name="4c95" id="4c95" class="graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">And if you’re a Python/Django developer like me</em></strong> and like open-source softwares, let me show you how you can build a ‘SMS-gateway’ to start ‘dabbling’ with SMS based apps in Python, so you can send and receive in a convenient way SMSs and familiarize yourself with … *<em class="markup--em markup--p-em">ntumbaze</em>* !</p><p name="d7d7" id="d7d7" class="graf--p graf-after--p">The technologies we’re going to be using are quite ‘simple’ and affordable since all of them are open-sourced. I mentioned them in <a href="https://medium.com/@iMitwe/open-source-technologies-running-u-report-b316104da17a#.f2235b6cw" data-href="https://medium.com/@iMitwe/open-source-technologies-running-u-report-b316104da17a#.f2235b6cw" class="markup--anchor markup--p-anchor">my first post</a> .</p><h4 name="a126" id="a126" class="graf--h4 graf-after--p">Install requirements</h4><p name="33cc" id="33cc" class="graf--p graf-after--h4">Let’s assume you have your computer on which you have root privileges. Preference is for a Debian-based distribution (… been using Ubuntu/Linux for 7 years!).</p><p name="c285" id="c285" class="graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Install virtualenvs</strong></p><p name="3790" id="3790" class="graf--p graf-after--p">Virtualenvs helps you have many versions of the same Python package on the same machine without incompatibility issues. Virtualenv is easy to install:</p><pre name="3772" id="3772" class="graf--pre graf-after--p">$ sudo apt-get install python-virtualenv</pre><p name="24f2" id="24f2" class="graf--p graf-after--pre">Create a directory to store your application in <em class="markup--em markup--p-em">mysmsapp </em>and <em class="markup--em markup--p-em">cd</em> into it</p><pre name="5796" id="5796" class="graf--pre graf-after--p">$ mkdir mysmsapp &amp;&amp; cd mysmsapp</pre><h4 name="4848" id="4848" class="graf--h4 graf-after--pre">Build the RapidSMS app</h4><p name="b451" id="b451" class="graf--p graf-after--h4">What follows is to build your web app. Let’s use RapidSMS, which is a Django framework for interacting with SMS. You just need to do what’s in these <a href="http://rapidsms.readthedocs.org/en/develop/tutorial/tutorial01.html#tutorial01" data-href="http://rapidsms.readthedocs.org/en/develop/tutorial/tutorial01.html#tutorial01" class="markup--anchor markup--p-anchor" rel="nofollow">tutorial 1</a>, <a href="http://rapidsms.readthedocs.org/en/develop/tutorial/tutorial02.html#tutorial02" data-href="http://rapidsms.readthedocs.org/en/develop/tutorial/tutorial02.html#tutorial02" class="markup--anchor markup--p-anchor" rel="nofollow">tutorial 2</a>, <a href="http://rapidsms.readthedocs.org/en/develop/tutorial/tutorial03.html#tutorial03" data-href="http://rapidsms.readthedocs.org/en/develop/tutorial/tutorial03.html#tutorial03" class="markup--anchor markup--p-anchor" rel="nofollow">tutorial 3</a>. It’s so simple if you know Python or Django.</p><p name="991e" id="991e" class="graf--p graf-after--p">At the end of tutorial 3, you need to chose a Backend so our app can send and receive actual real world text messages. We’ll use a Kannel backend on our machine. I like it because I know so many telecoms companies use it on their big servers. We’ll use on our small machine and it actually works well… even on a Raspberry Pi!</p><h4 name="7fe2" id="7fe2" class="graf--h4 graf-after--p">Kannel and modem</h4><p name="8592" id="8592" class="graf--p graf-after--h4">Take a GSM modem containing a sim-card and hook it to your machine. It’s advised not to connect it to the internet because some modems are configured not to do SMS and Internet stuffs at the same time.</p><figure name="59e3" id="59e3" class="graf--figure graf--layoutOutsetLeft graf-after--p"><figcaption class="imageCaption">Gear we’ll use!</figcaption></figure><p name="5227" id="5227" class="graf--p graf-after--figure">It’s also advised to use modems that use the ‘AT’ protocol. Some are found <a href="http://wammu.eu/phones/" data-href="http://wammu.eu/phones/" class="markup--anchor markup--p-anchor" rel="nofollow">here</a>.</p><p name="0bdb" id="0bdb" class="graf--p graf-after--p">Kannel help distribute incoming or outgoing SMS to our application.</p><p name="4d2d" id="4d2d" class="graf--p graf-after--p">You can now install kannel and configure to use our app like explained in <a href="http://rapidsms.readthedocs.org/en/develop/topics/backends/kannel.html" data-href="http://rapidsms.readthedocs.org/en/develop/topics/backends/kannel.html" class="markup--anchor markup--p-anchor" rel="nofollow">here</a> <strong class="markup--strong markup--p-strong">but keep in mind that you have to modify some parts of the kannel configuration like in this </strong><a href="https://gist.github.com/srugano/90f5ec9f8a1a1634f624" data-href="https://gist.github.com/srugano/90f5ec9f8a1a1634f624" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">Gist</strong></a>.</p><p name="8843" id="8843" class="graf--p graf-after--p">At the end you have an interface to send SMS like this one :</p><figure name="30c8" id="30c8" class="graf--figure graf-after--p"><figcaption class="imageCaption">RapidSMS interface</figcaption></figure><figure name="db6e" id="db6e" class="graf--figure graf-after--figure"><figcaption class="imageCaption">Message logs</figcaption></figure><p name="3667" id="3667" class="graf--p graf--startsWithSingleQuote graf-after--figure">‘Fini’!</p><p name="8f45" id="8f45" class="graf--p graf-after--p">We’ve created our SMS-center to send and receive some messages.</p><p name="8dfe" id="8dfe" class="graf--p graf-after--p">As bonus , here I’ve made a cool ‘Raspberry based’ SMS-center which actually <em class="markup--em markup--p-em">mimics</em> what we do at the office with a 64GB/ram server!</p><figure name="ee17" id="ee17" class="graf--figure graf-after--p"><figcaption class="imageCaption">Raspberry ($35) + ZTE Modem and sim-card ($25) = 518Mb sms-server-center</figcaption></figure><p name="3da6" id="3da6" class="graf--p graf-after--figure graf--last">Cool. Happy new 2016 year.</p></div></div></body></html>