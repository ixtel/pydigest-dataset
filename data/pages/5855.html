<html><body><div><div class="section-content"><div class="section-inner layoutSingleColumn"><p name="f842" id="f842" class="graf--p graf--first">When we started developing <a href="http://taiga.io" data-href="http://taiga.io" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">Taiga</strong></a> at <a href="http://kaleidos.net" data-href="http://kaleidos.net" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">Kaleidos</strong></a>, we decided, for the first time, to design the product internally instead of hiring an external designer. We wanted Taiga to be truly as the<em class="markup--em markup--p-em">Taiga team is</em>, and it required to fully understand the soul behind it. Since we only use open source software for our front and back end coding stuff, it made sense to use an open source tool as well for our design process. So we decided to go with <a href="http://inkscape.org" data-href="http://inkscape.org" class="markup--anchor markup--p-anchor" rel="nofollow"><strong class="markup--strong markup--p-strong">Inkscape</strong></a>, it was very know, enough powerful and we had some previous experience with it.</p><h3 name="ddbc" id="ddbc" class="graf--h3 graf-after--p">There is always a reason</h3><p name="211a" id="211a" class="graf--p graf-after--h3">While using <strong class="markup--strong markup--p-strong">Inkscape</strong> for advanced design work I found out that is mostly used by non developers, so its extensions are made by developers, for developers. There are a lot of<a href="http://wiki.inkscape.org/wiki/index.php/Extension_repository" data-href="http://wiki.inkscape.org/wiki/index.php/Extension_repository" class="markup--anchor markup--p-anchor" rel="nofollow"> math-related thinguies here</a> (which is great) but not the extensions that I was looking for as a designer (something<a href="https://medium.com/@vilcins/photoshop-extensions-for-front-end-developers-3cfb480d421" data-href="https://medium.com/@vilcins/photoshop-extensions-for-front-end-developers-3cfb480d421" class="markup--anchor markup--p-anchor"> like this</a>). Ironically, people are developing open source plugins and patches for proprietary software. Why? No idea!</p><p name="7246" id="7246" class="graf--p graf-after--p">So I decided I should learn how to make extensions to get same <strong class="markup--strong markup--p-strong">same features as others have but still using open source software,</strong> push forward <strong class="markup--strong markup--p-strong">OSS alternatives</strong> and hopefully, <strong class="markup--strong markup--p-strong">help other designers </strong>to come to OSS, use it and even develop their own extensions.</p><p name="85be" id="85be" class="graf--p graf-after--p">So, basically, it was a rant. I know.</p><p name="aa30" id="aa30" class="graf--p graf-after--p">This post is a basic explanation about how I developed a <a href="https://github.com/Xaviju/inkscape-placeholder" data-href="https://github.com/Xaviju/inkscape-placeholder" class="markup--anchor markup--p-anchor" rel="nofollow">couple extensions for Inkscape </a>not being myself a python developer (actually, I had no idea about python).</p><p name="bb81" id="bb81" class="graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Open your text editor, we are going to get our hands dirty!</strong></p></div><div class="section-inner layoutSingleColumn"><h3 name="7bb0" id="7bb0" class="graf--h3 graf-after--figure">Are you ready?</h3><p name="3ae0" id="3ae0" class="graf--p graf-after--h3">Lets begin with the extensions structure. A basic Inkscape extension is formed by two files:</p><ul class="postList"><li name="6abd" id="6abd" class="graf--li graf-after--p"><strong class="markup--strong markup--li-strong">A python script (</strong><em class="markup--em markup--li-em">extension_name.py</em><strong class="markup--strong markup--li-strong">)</strong>The responsible for the magic</li><li name="6bf3" id="6bf3" class="graf--li graf-after--li"><strong class="markup--strong markup--li-strong">A inkscape extension description file</strong> (<em class="markup--em markup--li-em">extension_name.inx</em>) This will be the responsible of communicating the inkscape UI with our script.</li></ul><p name="a671" id="a671" class="graf--p graf-after--li">Lets split this files up!</p><h4 name="d1b8" id="d1b8" class="graf--h4 graf-after--p"><strong class="markup--strong markup--h4-strong">Extension description file (.inx)</strong></h4><p name="da8c" id="da8c" class="graf--p graf-after--h4">The INX file (extension description file) will be the responsible of defining how the UI user interaction should be to connect Inkscape with our python script.</p><p name="b6c0" id="b6c0" class="graf--p graf-after--p">Lets see how a basic INX file is and lets analyze its parts:</p><figure name="c37c" id="c37c" class="graf--figure graf--iframe graf-after--p"><p class="iframeContainer"/></figure><p name="464b" id="464b" class="graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">The XML definition </strong>since this file is a valid XML</p><pre name="35bd" id="35bd" class="graf--pre graf-after--p">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</pre><p name="5047" id="5047" class="graf--p graf-after--pre">A simple <strong class="markup--strong markup--p-strong">Inkscape extension tag</strong></p><pre name="5f69" id="5f69" class="graf--pre graf-after--p">&lt;inkscape-extension xmlns="http://www.inkscape.org/namespace/inkscape/extension"&gt;<br/>&lt;/inkscape-extension&gt;</pre><p name="70ab" id="70ab" class="graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">The extension name</strong>. Remember, this will become the name in the UI button so add a nice name.</p><pre name="b13b" id="b13b" class="graf--pre graf-after--p">&lt;_name&gt;Your extension awesome Name&lt;/_name&gt;</pre><p name="8c32" id="8c32" class="graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">The extension ID</strong>. This ID should be unique, you could just replace ‘<em class="markup--em markup--p-em">org.inkscape.id</em>’ with ‘<em class="markup--em markup--p-em">org.inkscape.extension_name</em>’.</p><pre name="f700" id="f700" class="graf--pre graf-after--p">&lt;id&gt;org.inkscape.id&lt;/id&gt;</pre><p name="b583" id="b583" class="graf--p graf-after--pre">The <strong class="markup--strong markup--p-strong">dependencies</strong>. Here you should add the relative path to your python script (.py) file. If this file does not exist the extension will not be loaded.</p><pre name="943d" id="943d" class="graf--pre graf-after--p">&lt;dependency type="executable" location="extensions"&gt;plugin_name.py&lt;/dependency&gt;</pre><p name="8eca" id="8eca" class="graf--p graf-after--pre">Extension <strong class="markup--strong markup--p-strong">params. </strong>Here we will set the UI of our extension. Will the user need a textfield? A range selector? Tabs? We will use the user options in our python script afterwards. Lets see a basic example:</p><pre name="6eab" id="6eab" class="graf--pre graf-after--p">&lt;param name="some_name" type="string" _gui-text="Some text label"&gt;Some default text&lt;/param&gt;<br/><br/></pre><ul class="postList"><li name="50d3" id="50d3" class="graf--li graf-after--pre"><strong class="markup--strong markup--li-strong">name</strong>: Its the name of your option. Set an easy name because it will be used in your script to get this param value</li><li name="2616" id="2616" class="graf--li graf-after--li"><strong class="markup--strong markup--li-strong">type: </strong>By default, Inkscape offers a <a href="http://wiki.inkscape.org/wiki/index.php/INX_Parameters#Types" data-href="http://wiki.inkscape.org/wiki/index.php/INX_Parameters#Types" class="markup--anchor markup--li-anchor" rel="nofollow">very small set of GUI options</a>: <em class="markup--em markup--li-em">strings</em> (textfields), <em class="markup--em markup--li-em">interger</em>(numbers field from 1 to 10), <em class="markup--em markup--li-em">float</em>(decimal numbers field), <em class="markup--em markup--li-em">booleans</em> (a checkbox selector), <em class="markup--em markup--li-em">enum</em> (a dropdown list), <em class="markup--em markup--li-em">optiongroup</em> (a multiselect), <em class="markup--em markup--li-em">color</em> (a colorpicker), <em class="markup--em markup--li-em">desc (</em>a free text<em class="markup--em markup--li-em">) </em>and<em class="markup--em markup--li-em"> notebook (</em>a tab selector<em class="markup--em markup--li-em">).</em></li><li name="772a" id="772a" class="graf--li graf-after--li"><strong class="markup--strong markup--li-strong">_gui-text</strong>: This will be the label of the UI element so add a self explanatory copy</li><li name="b718" id="b718" class="graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Content</strong>: In some cases you can add a default text or set a boolean to true or false.</li><li name="b5bd" id="b5bd" class="graf--li graf-after--li"><strong class="markup--strong markup--li-strong">_gui-hidden</strong>: A hidden parameter that can have a value.</li></ul><p name="7307" id="7307" class="graf--p graf-after--li">The inkscape <a href="http://wiki.inkscape.org/wiki/index.php/INX_Parameters" data-href="http://wiki.inkscape.org/wiki/index.php/INX_Parameters" class="markup--anchor markup--p-anchor" rel="nofollow">wiki page of INX file params </a>is well documented.</p><p name="82a4" id="82a4" class="graf--p graf-after--p"><strong class="markup--strong markup--p-strong">The GUI menu</strong>. Here you will set the name of the button your users will click to perform the action. It will be useful to set your plugin at the <em class="markup--em markup--p-em">submenu tag</em>. Forget about the rest in this tutorial, its just the structure.</p><pre name="d0e7" id="d0e7" class="graf--pre graf-after--p">&lt;effect&gt;<br/>	&lt;object-type&gt;all&lt;/object-type&gt;<br/>	&lt;effects-menu&gt;<br/>		&lt;submenu _name="Your plugin name"/&gt;<br/>	&lt;/effects-menu&gt;<br/>&lt;/effect&gt;</pre><p name="3e61" id="3e61" class="graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">The reference script</strong>. As in the dependencies you set at the beggining, you should tell inkscape which file it has to execute. Add here the relative path to your python script.</p><pre name="9f1f" id="9f1f" class="graf--pre graf-after--p">&lt;script&gt;<br/>        &lt;command reldir="extensions" interpreter="python"&gt;plugin_name.py&lt;/command&gt;<br/>&lt;/script&gt;</pre><p name="f598" id="f598" class="graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">And that's it for the INX file! Now, if we install this plugin, you should be able to see a new option under extensions menu, and your plugin name sub option on hover.</strong></p></div><div class="section-inner layoutSingleColumn"><h4 name="89c3" id="89c3" class="graf--h4 graf-after--figure">The Python Script (.py)</h4><p name="0736" id="0736" class="graf--p graf-after--h4">As we have seen, the INX requires a python script to be executed. This script will be the responsible for the transformation of our SVG (everything in the inkscape work area is an SVG).<br/>As said in the inkscape wiki this file can do three things:</p><blockquote name="c634" id="c634" class="graf--blockquote graf-after--p">- <strong class="markup--strong markup--blockquote-strong">Input</strong>, providing translation from a file format to SVG<br/>- <strong class="markup--strong markup--blockquote-strong">Output</strong>, providing translation from SVG to a format<br/>- <strong class="markup--strong markup--blockquote-strong">Effect</strong>, taking in SVG, changing it, and then outputting SVG</blockquote><p name="7e73" id="7e73" class="graf--p graf-after--blockquote">I know, most of us have no clue on how python works. Don’t worry if you do not understand everything, its a basic example simple to read. You’ll understand later or you can read a more advanced version at <a href="http://wiki.inkscape.org/wiki/index.php/PythonEffectTutorial" data-href="http://wiki.inkscape.org/wiki/index.php/PythonEffectTutorial" class="markup--anchor markup--p-anchor" rel="nofollow">inkscape wiki extension tutorial</a>.<br/>Lets see how it looks, in its simplest version:</p><figure name="f972" id="f972" class="graf--figure graf--iframe graf-after--p"><p class="iframeContainer"/></figure><p name="9ff1" id="9ff1" class="graf--p graf-after--figure">Ok, lets open our file and follow (and understand) the code:</p><p name="882a" id="882a" class="graf--p graf-after--p">First, set the file<strong class="markup--strong markup--p-strong"> as executable</strong> so Inkscape can execute its content and <strong class="markup--strong markup--p-strong">the character encoding</strong></p><pre name="a9f8" id="a9f8" class="graf--pre graf-after--p">#!/usr/bin/env python<br/>#-*- coding: utf-8 -*-</pre><p name="2818" id="2818" class="graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Import Inkex</strong>, a inkscape dependency, that will do some magic for us applying our changes to the SVG.</p><pre name="02b1" id="02b1" class="graf--pre graf-after--p">import inkex</pre><p name="fcc7" id="fcc7" class="graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Declare a new Class() </strong>inheriting from <em class="markup--em markup--p-em">inkex</em></p><pre name="a7b8" id="a7b8" class="graf--pre graf-after--p">class MyExtensionName(inkex.Effect):</pre><p name="6e78" id="6e78" class="graf--p graf-after--pre">Declare the <strong class="markup--strong markup--p-strong">init() function</strong> that will be executed when the class is invoked and add the option params defined at the INX (remember we set this params to be used later in the INX section? Yes, its now!)</p><pre name="5eed" id="5eed" class="graf--pre graf-after--p">def __init__(self):<br/>        inkex.Effect.__init__(self)<br/>        self.OptionParser.add_option('-x', '--something', action='store', type='string', dest='optionName', default='defaultvalue', help='Helper text for this option')</pre><p name="7c52" id="7c52" class="graf--p graf-after--pre">Lets review the <strong class="markup--strong markup--p-strong">OptionParser </strong>according to the inkscape Wiki</p><ul class="postList"><li name="f393" id="f393" class="graf--li graf-after--p"><em class="markup--em markup--li-em">action</em> — An action that will do something with our value. In this case we store the value in the dest value (following point)</li><li name="9dcf" id="9dcf" class="graf--li graf-after--li"><em class="markup--em markup--li-em">dest</em> — Destination of option action specified by <em class="markup--em markup--li-em">action</em> argument. Using <em class="markup--em markup--li-em">opti nName</em> value we say that we want to store this value to self.options.optionName.</li><li name="3ce2" id="3ce2" class="graf--li graf-after--li"><em class="markup--em markup--li-em">type</em> — Type of option value. We use string here but could anything of the defined in the INX file.</li><li name="8776" id="8776" class="graf--li graf-after--li"><em class="markup--em markup--li-em">default</em> — Defalut value for this option if it is not specified.</li><li name="7986" id="7986" class="graf--li graf-after--li"><em class="markup--em markup--li-em">help</em> — A help string that will be displayed if script will be given no arguments or some option or argument will have wrong syntax.</li></ul><p name="8bd5" id="8bd5" class="graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Create a new effect()</strong> function to get this values from the optionParser. It receives as first argument <em class="markup--em markup--p-em">self, </em>which is its parent class, in this case is <em class="markup--em markup--p-em">MyExtensionName</em></p><pre name="276f" id="276f" class="graf--pre graf-after--p">def effect(self):<br/>    option = self.options.optionName        <br/>    self._main_function()</pre><ul class="postList"><li name="9b12" id="9b12" class="graf--li graf-after--pre">In the first line, we store the value we set in the <em class="markup--em markup--li-em">optionParser</em> in the variable <em class="markup--em markup--li-em">option </em>so we could use it anywhere in the function.</li><li name="5e21" id="5e21" class="graf--li graf-after--li">In the second line, we just ask the parent to call a second function called<em class="markup--em markup--li-em"> _main_function</em> that receives the <em class="markup--em markup--li-em">option </em>variable as a second parameter.</li></ul><p name="9447" id="9447" class="graf--p graf-after--li">The <strong class="markup--strong markup--p-strong">main function</strong>, although it is not necessary (we could do everything in the previous one) helps keep clarity. Do whatever you can to your SVG (if you have no idea of python I recommend you to be humble and try something simple). In this case, we just print the value. This will have no effects on inkscape SVG.<br/>Find a <a href="https://github.com/Xaviju/inkscape-placeholder" data-href="https://github.com/Xaviju/inkscape-placeholder" class="markup--anchor markup--p-anchor" rel="nofollow">simple extension example on my extensions,</a> since are quite simple because I am not a python developer</p><pre name="4014" id="4014" class="graf--pre graf-after--p">def _main_function(self, option): <br/>    print option</pre><p name="88cf" id="88cf" class="graf--p graf-after--pre">Last step: Invoke the class and execute the affect() function that will do its inkscape magic to execute it on the SVG.</p><pre name="bbf4" id="bbf4" class="graf--pre graf-after--p">if __name__ == ‘__main__’: <br/>    MyExtension = MyExtensionName() <br/>    MyExtension.affect()</pre></div><div class="section-inner sectionLayout--outsetColumn"><figure name="fd8d" id="fd8d" class="graf--figure graf--layoutOutsetCenter graf-after--pre"><figcaption class="imageCaption">That how I felt after my first plugin</figcaption></figure></div><div class="section-inner layoutSingleColumn"><h3 name="ce31" id="ce31" class="graf--h3 graf-after--figure">Cold outside, warm inside</h3><p name="44ea" id="44ea" class="graf--p graf-after--h3">I know, at first glance it looks very difficult, but remember that we have seen every code line to understand how it works. It is actually very small code to start with. You’ll see that you will need new functions and more code lines soon.</p><p name="6b3a" id="6b3a" class="graf--p graf-after--p">To install the extension, just copy the two files (<em class="markup--em markup--p-em">extension_name.py </em>and <em class="markup--em markup--p-em">extension_name.inx</em>) into your local inkscape extensions folder</p><pre name="1e09" id="1e09" class="graf--pre graf-after--p">~/.config/inkscape/extensions</pre><p name="5801" id="5801" class="graf--p graf-after--pre">As always, inkscape comes prepacked with handy and well written extensions in its core. Its a nice place to find how others made things and find clues on how to solve your own extension challenges. There are also d<a href="http://wiki.inkscape.org/wiki/index.php/Extension_repository" data-href="http://wiki.inkscape.org/wiki/index.php/Extension_repository" class="markup--anchor markup--p-anchor" rel="nofollow">ozens of extensions out there</a> and <a href="https://inkscape.org/en/download/addons/" data-href="https://inkscape.org/en/download/addons/" class="markup--anchor markup--p-anchor" rel="nofollow">there</a> to learn from.</p><p name="d223" id="d223" class="graf--p graf-after--p graf--last"><strong class="markup--strong markup--p-strong">Good luck, and please, share your amazing extensions with us!</strong></p></div></div></div></body></html>