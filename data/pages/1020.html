<html><body><div><article id="6BvOboU8u3oBDRqiB1u0" class="post  historical">
	<time datetime="2014-07-17" class="article_time">July 17, 2014</time>
  
	<p>This post discusses Python’s <code class="prettyprint">for...else</code> and <code class="prettyprint">while...else</code> syntax, one of the most rarely used and misunderstood syntactic features in Python.</p>

<p>Both <a href="https://docs.python.org/3.4/reference/compound_stmts.html#for" rel="nofollow"><code class="prettyprint">for</code></a> and <a href="https://docs.python.org/3.4/reference/compound_stmts.html#the-while-statement" rel="nofollow"><code class="prettyprint">while</code></a> loops in Python also take an optional <code class="prettyprint">else</code> suite (like <a href="https://docs.python.org/3.4/tutorial/controlflow.html#if-statements" rel="nofollow">the <code class="prettyprint">if</code> statement</a> and <a href="https://docs.python.org/3.4/reference/compound_stmts.html#the-try-statement" rel="nofollow">the <code class="prettyprint">try</code> statement</a> do), which executes if the loop iteration completes normally. In other words, the <code class="prettyprint">else</code> suite will be executed if we don’t exit the loop in any way other than its natural way. So, no <code class="prettyprint">break</code> statements, no <code class="prettyprint">return</code> statement, or no exceptions being raised inside the loop. Consider a simple (and useless) example:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; for i in range(5):
...     print(i)
... else:
...     print('Iterated over everything :)')
...
0
1
2
3
4
Iterated over everything :)
</code></pre>

<p>In the code above, we iterate over <code class="prettyprint">range(5)</code> and print each number. Since we let the loop complete normally, the <code class="prettyprint">else</code> suite is also executed and <code class="prettyprint">Iterated over everything :)</code> is printed. Conversely, if we stop the loop, say with a <code class="prettyprint">break</code> statement, then the <code class="prettyprint">else</code> suite will not be executed:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; for i in range(5):
...     if i == 2:
...         break
...     print(i)
... else:
...     print('Iterated over everything :)')
...
0
1
</code></pre>

<p>Note that the <code class="prettyprint">else</code> suite will be executed even if the sequences being iterated over by the loop is empty; after all the loop is still completing normally:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; for i in []:
...     print(i)
... else:
...     print('Still iterated over everything (i.e. nothing)')
...
Still iterated over everything (i.e. nothing)
</code></pre>

<p>Also, let’s not forget, all the above apply to <code class="prettyprint">while...else</code> as well:</p>

<pre><code class="prettyprint">&gt;&gt;&gt; i = 0
&gt;&gt;&gt; while i &lt;= 5:
...     i += 1
...     print i
... else:
...     print 'Yep'
... 
1
2
3
4
5
Yep
</code></pre>
<h1 id="but-why_1">
<a class="head_anchor" href="#but-why_1" rel="nofollow"> </a>But, why!?</h1>
<p>A common use case for the <code class="prettyprint">else</code> clause in loops is to implement search loops; say you’re performing a search for an item that meets a particular condition, and need to perform additional processing or raise an error if no acceptable value is found:</p>

<pre><code class="prettyprint">for x in data:
    if meets_condition(x):
        break
else:
    # raise error or do additional processing 
</code></pre>

<p>Without the <code class="prettyprint">else</code> clause you would need to set a flag and then check that later to see if any of the values met the condition:</p>

<pre><code class="prettyprint">condition_is_met = False
for x in data:
    if meets_condition(x):
        condition_is_met = True

if not condition_is_met:
    # raise error or do additional processing
</code></pre>

<p>This isn’t really a big deal and it’s how you have to do it in many other languages. But like many other features of Python, the <code class="prettyprint">else</code> clause can result in a more elegant and Pythonic code. Arguably, in the example above, using the it makes the code more <a href="http://legacy.python.org/dev/peps/pep-0020/" rel="nofollow">The Zen of Python</a>-friendly:</p>

<p>There is not a case where you have no choice but to use the <code class="prettyprint">else</code> clause in a loop; you can always use flags etc. but the <code class="prettyprint">else</code> clause can often make the code more elegant and readable. One might think it’s Pythonic and it makes intentions clearer (Hi!), while others might think it’s confusing and redundant! Personally, I stick to using the <code class="prettyprint">else</code> clause in loops unless there is another approach that is more readable (I guess, for me, it usually all boils down to how readable the code will be).</p>

<hr/>

<p>Discussion on <a href="https://news.ycombinator.com/item?id=8050818" rel="nofollow">hackernews</a> and <a href="http://www.reddit.com/r/Python/comments/2b0053/the_forgotten_optional_else_in_python_loops/" rel="nofollow">reddit</a>.</p>

<p>Nat Dunn of Webucator has also kindly created a video version of this post as part of a new free self-paced “Python Solutions from the Web” course they are creating that will be available on their <a href="https://www.webucator.com/programming/python.cfm" rel="nofollow">Python Training page</a>:</p>

<iframe src="https://www.youtube.com/embed/7z8RBFqrgwg?rel=0" frameborder="0" allowfullscreen="true">VIDEO</iframe>

  <figure class="postend kudo able clearfix" id="kudo_6BvOboU8u3oBDRqiB1u0">
    <a href="#kudo">
      <p class="filling"> </p>
    </a>
    <p class="num">1,548</p>
    <p class="txt">Kudos</p>
  </figure>
  <figure class="side kudo able clearfix" id="kudo_side_6BvOboU8u3oBDRqiB1u0">
    <a href="#kudo">
      <p class="filling"> </p>
    </a>
    <p class="num">1,548</p>
    <p class="txt">Kudos</p>
  </figure>
</article>

  </div></body></html>