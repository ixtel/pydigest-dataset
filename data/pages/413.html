<html><body><div><div id="content"><p>
	
Совсем недавно, один мой товарищ, собираясь поехать на выставку запросил через электронную форму приглашение, которое он тут же получил, но не просто получил, а в 20 000 экземплярах, только не сразу а в течении нескольких часов, ситуация выглядела примерно так:</p>
<p>
Удаляет он 2000 писем, пока удалял, принимает почту снова, опять 2000 писем пришло, в общем удалял он так пару часов, уже написал в службу поддержки этого замечательного сервиса, но письма продолжали идти еще несколько часов.
</p><p>
Плюс ко всему, в почте есть письма, которые необходимо сохранить(хотя я узнал о них после запуска программы)
</p><p>
В общем задача в итоге была таковой:</p><p>
- Удалить все письма с адресом отправителя, условно spamer@mail.ru.

</p><a href="/static/media/uploads/scripts/delete_letters_by_imap.py">Исходный код</a>
<pre class="brush: python;">
import imaplib

host = "imap.rambler.ru"
port = "993"
login = "login"
password = "password"

mail = imaplib.IMAP4_SSL(host, port)
mail.login(login, password)
mail.select()
data = mail.search(None, '(FROM "spamer@mail.ru")')[1][0]
for num in data.split() :
    mail.store(num, '+FLAGS', '\\Deleted')
mail.expunge()
mail.close()
mail.logout()
</pre>
</div>


			</div></body></html>