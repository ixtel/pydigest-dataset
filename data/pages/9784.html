<html><body><div><div class="entry-content clear">
			<p>Hi there folks! Recently I was doing a task for fossasia which required me to make a Django web app which allowed users to submit their email addresses and receive a welcome email in return. I was able to complete the project in a couple of hours. Most of the time was spent in making the UI look good. I am going to show you how you can easily make a similar app.<br/>
<span id="more-699"/></p>
<p>For the sake of this tutorial we will be using Gmail.</p>
<p><strong>1.Setup the project</strong></p>
<p>First of all we need to start a django project. We can start one on our Desktop by typing the following command in the terminal:</p>
<pre><code><span class="hljs-variable">$ </span>django-admin startproject gci_email
</code></pre>
<p>Now let’s <code>cd</code> into the newly created project and move on:</p>
<pre><code>$ <span class="hljs-built_in">cd</span> gci_email
</code></pre>
<p><strong>2.Creating a new app</strong></p>
<p>Now we need to make a new app. You can do that by running the following command:</p>
<pre><code>$ python manage<span class="hljs-class">.py</span> startapp send_email
</code></pre>
<p>The above command creates a <code>send_email</code> directory inside our project with a couple of files in it.</p>
<p><strong>3.Modify the project settings</strong></p>
<p>Now let’s just quickly go ahead and modify the project settings a little bit. In this step we will add our app and all our email sending related info to the <code>settings.py</code> file. Open the <code>settings.py</code> file which is available in the <code>gci_email</code> folder and add the following content to it:</p>
<pre><code><span class="hljs-setting">EMAIL_USE_TLS = <span class="hljs-value"><span class="hljs-keyword">True</span></span></span>
<span class="hljs-setting">EMAIL_HOST = <span class="hljs-value"><span class="hljs-string">'smtp.gmail.com'</span></span></span>
<span class="hljs-setting">EMAIL_PORT = <span class="hljs-value"><span class="hljs-number">587</span></span></span>
<span class="hljs-setting">EMAIL_HOST_USER = <span class="hljs-value"><span class="hljs-string">'Your gmail email'</span></span></span>
<span class="hljs-setting">EMAIL_HOST_PASSWORD = <span class="hljs-value"><span class="hljs-string">'Your gmail password'</span></span></span>
<span class="hljs-setting">DEFAULT_FROM_EMAIL = <span class="hljs-value"><span class="hljs-string">'Your name'</span></span></span>
<span class="hljs-setting">DEFAULT_TO_EMAIL = <span class="hljs-value"><span class="hljs-string">'Your email'</span></span></span>
</code></pre>
<p>In the <code>INSTALLED_APPS</code> section of your <code>settings.py</code> file you need to add the following entry to the <code>INSTALLED_APPS</code> list:</p>
<pre><code><span class="hljs-string">'send_email.apps.SendEmailConfig'</span>
</code></pre>
<p>Now the <a href="http://settings.py">settings.py</a> file should contain the following modified <code>INSTALLED_APPS</code> list:</p>
<pre><code><span class="hljs-type">INSTALLED_APPS</span> = [
    <span class="hljs-symbol">'send_email</span>.apps.<span class="hljs-type">SendEmailConfig'</span>,
    <span class="hljs-symbol">'django</span>.contrib.admin',
    <span class="hljs-symbol">'django</span>.contrib.auth',
    <span class="hljs-symbol">'django</span>.contrib.contenttypes',
    <span class="hljs-symbol">'django</span>.contrib.sessions',
    <span class="hljs-symbol">'django</span>.contrib.messages',
    <span class="hljs-symbol">'django</span>.contrib.staticfiles',
]
</code></pre>
<p>Let’s add the static files related variables to our <code>settings.py</code> file as well:</p>
<pre><code>BASE_DIR = os<span class="hljs-class">.path</span><span class="hljs-class">.dirname</span>(os<span class="hljs-class">.path</span><span class="hljs-class">.abspath</span>(__file__))
STATIC_ROOT = <span class="hljs-string">'staticfiles'</span>
STATIC_URL = <span class="hljs-string">'/static/'</span>
STATICFILES_DIRS = (
    os<span class="hljs-class">.path</span><span class="hljs-class">.join</span>(BASE_DIR, <span class="hljs-string">'static'</span>),
)
</code></pre>
<p><strong>4.Creating urls</strong></p>
<p>Modify the <code>urls.py</code> file in <code>gci_email</code> folder to look something like this:</p>
<pre><code><span class="hljs-keyword">from</span> django.conf.urls <span class="hljs-keyword">import</span> url, include
<span class="hljs-keyword">from</span> django.contrib <span class="hljs-keyword">import</span> admin

urlpatterns = [
    url(<span class="hljs-string">r'^admin/'</span>, admin.site.urls),
    url(<span class="hljs-string">r'^'</span>, include(<span class="hljs-string">'send_email.urls'</span>)),
]
</code></pre>
<p>Now create a <code>urls.py</code> file in <code>send_email</code> folder as well and add the following content to it:</p>
<pre><code><span class="hljs-keyword">from</span> django.conf.urls <span class="hljs-keyword">import</span> url

<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    url(<span class="hljs-string">r'^$'</span>, views.index, name=<span class="hljs-string">'index'</span>),
    url(<span class="hljs-string">r'^success'</span>, views.success, name=<span class="hljs-string">'success'</span>),
]
</code></pre>
<p><strong>5.Adding Views</strong></p>
<p>Now it’s time to edit the views. Go to the <code>views.py</code> file in <code>send_email</code> directory and modify it to look something like this:</p>
<pre><code><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render
<span class="hljs-keyword">from</span> django.http <span class="hljs-keyword">import</span> HttpResponse
<span class="hljs-keyword">import</span> django
<span class="hljs-keyword">from</span> django.conf <span class="hljs-keyword">import</span> settings
<span class="hljs-keyword">from</span> django.core.mail <span class="hljs-keyword">import</span> send_mail


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">index</span><span class="hljs-params">(request)</span>:</span>
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'index.html'</span>)


<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">success</span><span class="hljs-params">(request)</span>:</span>
    email = request.POST.get(<span class="hljs-string">'email'</span>, <span class="hljs-string">''</span>)
    data = <span class="hljs-string">"""
Hello there!

I wanted to personally write an email in order to welcome you to our platform.\
 We have worked day and night to ensure that you get the best service. I hope \
that you will continue to use our service. We send out a newsletter once a \
week. Make sure that you read it. It is usually very informative.

Cheers!
~ Yasoob
    """</span>
    send_mail(<span class="hljs-string">'Welcome!'</span>, data, <span class="hljs-string">"Yasoob"</span>,
              [email], fail_silently=<span class="hljs-keyword">False</span>)
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">'success.html'</span>)
</code></pre>
<p><strong>6.Adding templates</strong></p>
<p>Now we need to create a <code>templates</code> dir in the <code>send_email</code> folder and create 2 files in it. Namely, <code>index.html</code> and <code>success.html</code>.</p>
<p>You need to create a form in the <code>index.html</code> file with an input fild of name email. The <code>success.html</code> file does not need any special content.</p>
<p>That’s it! Now you can first create migrations, then apply them and finally run your project. Just key in the following commands:</p>
<pre><code>$ python manage<span class="hljs-class">.py</span> makemigrations
$ python manage<span class="hljs-class">.py</span> migrate
$ python manage<span class="hljs-class">.py</span> runserver
</code></pre>
<p>I have deployed a sample app over <a href="https://email-django.herokuapp.com/">here</a> and the code for this project is available on <a href="https://github.com/yasoob/email_django">GitHub</a>.</p>
<p>Cheers!</p>
		<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing"><h3 class="sd-title">Show your love by sharing this:</h3></div></div><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded" id="like-post-wrapper-55796613-699-56d5a06c5bc48" data-src="//widgets.wp.com/likes/#blog_id=55796613&amp;post_id=699&amp;origin=freepythontips.wordpress.com&amp;obj_id=55796613-699-56d5a06c5bc48" data-name="like-post-frame-55796613-699-56d5a06c5bc48"><h3 class="sd-title">Like this:</h3><p class="likes-widget-placeholder post-likes-widget-placeholder"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></p><span class="sd-text-color"/><a class="sd-link-color"/></div>
<p id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</p></div>					</div>
		
		</div></body></html>