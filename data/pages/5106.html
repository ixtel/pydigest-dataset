<html><body><div><div class="entry-content" itemprop="mainContentOfPage">
<p>Descriptors, introduced in Python 2.2, provide a way to add managed attributes to objects. They are not used much in everyday programming, but it’s important to learn them to understand a lot of the “magic” that happens in the standard library and third-party packages.</p>
<h4>The problem</h4>
<p>Imagine we are running a bookshop with an inventory management system written in Python. The system contains a class called
<span id="crayon-56d5b8b92341b282622178" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span></span></span>  that captures the author, title and price of physical books.</p> 
<div id="crayon-56d5b8b923434259813723" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b923434259813723-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Book</span><span class="crayon-sy">(</span><span class="crayon-k ">object</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923434259813723-2"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">author</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">title</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">price</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b923434259813723-3"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">author</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">author</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923434259813723-4"><span class="crayon-e">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">title</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">title</span></p><p class="crayon-line" id="crayon-56d5b8b923434259813723-5"><span class="crayon-e">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">price</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923434259813723-6"> </p><p class="crayon-line" id="crayon-56d5b8b923434259813723-7"><span class="crayon-e">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__str__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923434259813723-8"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">"{0} - {1}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">author</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">title</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p>Our simple
<span id="crayon-56d5b8b92343f786901487" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span></span></span> class works fine for a while, but eventually bad data starts to creep into the system. The system is full of books with negative prices or prices that are too high because of data entry errors. We decide that we want to limit book prices to values between 0 and 100. In addition, the system contains a
<span id="crayon-56d5b8b92344a189632278" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Magazine</span></span></span> class that suffers from the same problem, so we want our solution to be easily reusable.</p>
<h4>The descriptor protocol</h4>
<p>The descriptor protocol is simply a set of methods a class must implement to qualify as a descriptor. There are three of them:</p>
<ul>
<li>
<span id="crayon-56d5b8b923455599808051" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">__get__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">owner</span><span class="crayon-sy">)</span></span></span></li>
<li>
<span id="crayon-56d5b8b92346a250448302" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">__set__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-sy">)</span></span></span></li>
<li>
<span id="crayon-56d5b8b923475730201775" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-e">__delete__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">)</span></span></span></li>
</ul>
<p>
<span id="crayon-56d5b8b923480743834490" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">__get__</span></span></span> accesses a value stored in the object and returns it.</p>
<p>
<span id="crayon-56d5b8b92348a409161645" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">__set__</span></span></span> sets a value stored in the object and returns nothing.</p>
<p>
<span id="crayon-56d5b8b923494540778125" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">__delete__</span></span></span> deletes a value stored in the object and returns nothing.</p>
<p>Using these methods, we can write a descriptor called
<span id="crayon-56d5b8b92349e311577553" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Price</span></span></span> that limits the value stored in it to between 0 and 100.</p> 
<div id="crayon-56d5b8b9234a7960161949" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b9234a7960161949-2">2</p><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b9234a7960161949-4">4</p><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b9234a7960161949-6">6</p><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b9234a7960161949-8">8</p><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b9234a7960161949-10">10</p><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b9234a7960161949-12">12</p><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b9234a7960161949-14">14</p><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b9234a7960161949-16">16</p><p class="crayon-num" data-line="crayon-56d5b8b9234a7960161949-17">17</p></div>
</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-k ">weakref</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">WeakKeyDictionary</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234a7960161949-2"> </p><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-3"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Price</span><span class="crayon-sy">(</span><span class="crayon-k ">object</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234a7960161949-4"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-5"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">default</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234a7960161949-6"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">values</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">WeakKeyDictionary</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234a7960161949-8"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__get__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">owner</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-9"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">values</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-v">instance</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">default</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234a7960161949-10"> </p><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-11"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__set__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234a7960161949-12"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-13"><span class="crayon-h">            </span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">ValueError</span><span class="crayon-sy">(</span><span class="crayon-s">"Price must be between 0 and 100."</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234a7960161949-14"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">instance</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">value</span></p><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-15"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234a7960161949-16"><span class="crayon-e">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__delete__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b9234a7960161949-17"><span class="crayon-h">        </span><span class="crayon-r">del</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">values</span><span class="crayon-sy">[</span><span class="crayon-v">instance</span><span class="crayon-sy">]</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p>A few details in the implementation of
<span id="crayon-56d5b8b9234b2806853082" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Price</span></span></span> deserve mentioning.</p>
<p>An instance of a descriptor must be added to a class as a class attribute, not as an instance attribute. Therefore, to store different data for each instance, the descriptor needs to maintain a dictionary that maps instances to instance-specific values. In the implementation of
<span id="crayon-56d5b8b9234bd088779736" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Price</span></span></span>, that dictionary is
<span id="crayon-56d5b8b9234c7977982982" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">values</span></span></span>.</p>
<p>A normal Python dictionary stores references to objects it uses as keys. Those references by themselves are enough to prevent the object from being garbage collected. To prevent
<span id="crayon-56d5b8b9234d1844560153" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span></span></span> instances from hanging around after we are finished with them, we use the
<span id="crayon-56d5b8b9234db363971905" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">WeakKeyDictionary</span></span></span> from the
<span id="crayon-56d5b8b9234e4609406250" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">weakref</span></span></span> standard module. Once the last <em>strong</em> reference to the instance passes away, the associated key-value pair will be discarded.</p>
<h4>Using descriptors</h4>
<p>As we saw in the last section, descriptors are linked to classes, not to instances, so to add a descriptor to the
<span id="crayon-56d5b8b9234ef343437895" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span></span></span> class, we must add it as a class variable.</p> 
<div id="crayon-56d5b8b9234f8303344268" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b9234f8303344268-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Book</span><span class="crayon-sy">(</span><span class="crayon-k ">object</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234f8303344268-2"><span class="crayon-h">    </span><span class="crayon-v">price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Price</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8b9234f8303344268-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234f8303344268-4"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">author</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">title</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">price</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b9234f8303344268-5"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">author</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">author</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234f8303344268-6"><span class="crayon-e">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">title</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">title</span></p><p class="crayon-line" id="crayon-56d5b8b9234f8303344268-7"><span class="crayon-e">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">price</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234f8303344268-8"> </p><p class="crayon-line" id="crayon-56d5b8b9234f8303344268-9"><span class="crayon-e">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__str__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9234f8303344268-10"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">"{0} - {1}"</span><span class="crayon-sy">.</span><span class="crayon-k ">format</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">author</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">title</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p>The price constraint for books is now enforced.</p> 
<div id="crayon-56d5b8b923502158146247" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b923502158146247-2">2</p><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b923502158146247-4">4</p><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b923502158146247-6">6</p><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b923502158146247-8">8</p><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b923502158146247-10">10</p><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b923502158146247-12">12</p><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b923502158146247-14">14</p><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b923502158146247-16">16</p><p class="crayon-num" data-line="crayon-56d5b8b923502158146247-17">17</p></div>
</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b923502158146247-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Book</span><span class="crayon-sy">(</span><span class="crayon-s">"William Faulkner"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"The Sound and the Fury"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">12</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923502158146247-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-i">price</span></p><p class="crayon-line" id="crayon-56d5b8b923502158146247-3"><span class="crayon-cn">12</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923502158146247-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">12</span></p><p class="crayon-line" id="crayon-56d5b8b923502158146247-5"><span class="crayon-k ">Traceback</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">most </span><span class="crayon-e">recent </span><span class="crayon-e">call </span><span class="crayon-v">last</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923502158146247-6"><span class="crayon-h">  </span><span class="crayon-k ">File</span><span class="crayon-h"> </span><span class="crayon-s">"&lt;pyshell#68&gt;"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">line</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">module</span><span class="crayon-o">&gt;</span></p><p class="crayon-line" id="crayon-56d5b8b923502158146247-7"><span class="crayon-h">    </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">12</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923502158146247-8"><span class="crayon-h">  </span><span class="crayon-k ">File</span><span class="crayon-h"> </span><span class="crayon-s">"&lt;pyshell#58&gt;"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">line</span><span class="crayon-h"> </span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">__set__</span></p><p class="crayon-line" id="crayon-56d5b8b923502158146247-9"><span class="crayon-e">    </span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">ValueError</span><span class="crayon-sy">(</span><span class="crayon-s">"Price must be between 0 and 100."</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923502158146247-10"><span class="crayon-k ">ValueError</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Price </span><span class="crayon-e">must </span><span class="crayon-e">be </span><span class="crayon-i">between</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-cn">100.</span></p><p class="crayon-line" id="crayon-56d5b8b923502158146247-11"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">101</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923502158146247-12"><span class="crayon-k ">Traceback</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-e">most </span><span class="crayon-e">recent </span><span class="crayon-e">call </span><span class="crayon-v">last</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b923502158146247-13"><span class="crayon-h">  </span><span class="crayon-k ">File</span><span class="crayon-h"> </span><span class="crayon-s">"&lt;pyshell#69&gt;"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">line</span><span class="crayon-h"> </span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-v">module</span><span class="crayon-o">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923502158146247-14"><span class="crayon-h">    </span><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">101</span></p><p class="crayon-line" id="crayon-56d5b8b923502158146247-15"><span class="crayon-h">  </span><span class="crayon-k ">File</span><span class="crayon-h"> </span><span class="crayon-s">"&lt;pyshell#58&gt;"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">line</span><span class="crayon-h"> </span><span class="crayon-cn">9</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-e">__set__</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923502158146247-16"><span class="crayon-e">    </span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">ValueError</span><span class="crayon-sy">(</span><span class="crayon-s">"Price must be between 0 and 100."</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8b923502158146247-17"><span class="crayon-k ">ValueError</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">Price </span><span class="crayon-e">must </span><span class="crayon-e">be </span><span class="crayon-i">between</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-cn">100.</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<h4>How descriptors are accessed</h4>
<p>So far we’ve managed to implement a working descriptor that manages the
<span id="crayon-56d5b8b92350d744419061" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">price</span></span></span> attribute on our
<span id="crayon-56d5b8b92351e990237608" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span></span></span> class, but how it works might not be clear. It all feels a bit too magical, but not to worry. It turns out that descriptor access is quite simple:</p>
<ul>
<li>When we try to evaluate
<span id="crayon-56d5b8b923529182201735" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-v">price</span></span></span> and retrieve the value, Python recognizes that
<span id="crayon-56d5b8b923533797101957" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">price</span></span></span> is a descriptor and calls
<span id="crayon-56d5b8b92353d397836662" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-sy">.</span><span class="crayon-v">__get__</span></span></span>.</li>
<li>When we try to change the value of the
<span id="crayon-56d5b8b923547902258126" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">price</span></span></span> attribute, e.g.
<span id="crayon-56d5b8b923551715676038" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">b</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">23</span></span></span> , Python again recognizes that
<span id="crayon-56d5b8b92355b257990128" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">price</span></span></span> is a descriptor and substitutes the assignment with a call to
<span id="crayon-56d5b8b923564930896026" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-sy">.</span><span class="crayon-v">__set__</span></span></span>.</li>
<li>And when we try to delete the
<span id="crayon-56d5b8b92356e834433259" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">price</span></span></span> attribute stored against an instance of
<span id="crayon-56d5b8b923578903621940" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span></span></span>, Python automatically interprets that as a call to
<span id="crayon-56d5b8b923582367091593" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-sy">.</span><span class="crayon-v">__delete__</span></span></span>.</li>
</ul>
<h4>The number 1 descriptor gotcha</h4>
<p>Unless we fully understand the fact that descriptors are linked to classes and not to instances, and therefore need to maintain their own mapping of instances to instance-specific values, we might be tempted to write the
<span id="crayon-56d5b8b92358c273861271" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Price</span></span></span> descriptor as follows:</p> 
<div id="crayon-56d5b8b923595025669483" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b923595025669483-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Price</span><span class="crayon-sy">(</span><span class="crayon-k ">object</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923595025669483-2"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b923595025669483-3"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">__price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923595025669483-4"> </p><p class="crayon-line" id="crayon-56d5b8b923595025669483-5"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__get__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">owner</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923595025669483-6"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">__price</span></p><p class="crayon-line" id="crayon-56d5b8b923595025669483-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923595025669483-8"><span class="crayon-e">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__set__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b923595025669483-9"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-st">or</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-h"> </span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">100</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923595025669483-10"><span class="crayon-h">            </span><span class="crayon-st">raise</span><span class="crayon-h"> </span><span class="crayon-k ">ValueError</span><span class="crayon-sy">(</span><span class="crayon-s">"Price must be between 0 and 100."</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8b923595025669483-11"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">__price</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">value</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923595025669483-12"> </p><p class="crayon-line" id="crayon-56d5b8b923595025669483-13"><span class="crayon-e">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__delete__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">instance</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b923595025669483-14"><span class="crayon-h">        </span><span class="crayon-r">del</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">__price</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p>But once we start instantiating multiple
<span id="crayon-56d5b8b9235a0509336165" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span></span></span> instances, we’re going to have a problem.</p> 
<div id="crayon-56d5b8b9235aa955360926" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b9235aa955360926-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">b1</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Book</span><span class="crayon-sy">(</span><span class="crayon-s">"William Faulkner"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"The Sound and the Fury"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">12</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9235aa955360926-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">b1</span><span class="crayon-sy">.</span><span class="crayon-i">price</span></p><p class="crayon-line" id="crayon-56d5b8b9235aa955360926-3"><span class="crayon-cn">12</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9235aa955360926-4"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">b2</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Book</span><span class="crayon-sy">(</span><span class="crayon-s">"John Dos Passos"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"Manhattan Transfer"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">13</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8b9235aa955360926-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">b1</span><span class="crayon-sy">.</span><span class="crayon-i">price</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b9235aa955360926-6"><span class="crayon-cn">13</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p>The key is to understand that there is only one instance of
<span id="crayon-56d5b8b9235b4443820282" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Price</span></span></span> for
<span id="crayon-56d5b8b9235bd724100711" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Book</span></span></span>, so every time the value in the descriptor is changed, it changes for all instances. That behaviour in itself is useful for creating managed class attributes, but it is not what we want in this case. To store separate instance-specific values, we need to use the
<span id="crayon-56d5b8b9235c7590614107" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">WeakRefDictionary</span></span></span>.</p>
<h4>The property built-in function</h4>
<p>Another way of building descriptors is to use the
<span id="crayon-56d5b8b9235d8794456531" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">property</span></span></span> built-in function. Here is the function signature:</p> 
<div id="crayon-56d5b8b9235e3447252668" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b9235e3447252668-1"><span class="crayon-k ">property</span><span class="crayon-sy">(</span><span class="crayon-v">fget</span><span class="crayon-o">=</span><span class="crayon-t">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">fset</span><span class="crayon-o">=</span><span class="crayon-t">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">fdel</span><span class="crayon-o">=</span><span class="crayon-t">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">doc</span><span class="crayon-o">=</span><span class="crayon-t">None</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p>
<span id="crayon-56d5b8b9235ed597298236" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">fget</span></span></span>,
<span id="crayon-56d5b8b9235f7087771847" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">fset</span></span></span> and
<span id="crayon-56d5b8b923601665108600" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">fdel</span></span></span> are methods to get, set and delete attributes, respectively.
<span id="crayon-56d5b8b92360b162452156" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">doc</span></span></span> is a docstring.</p>
<p>Instead of defining a single class-level descriptor object that manages instance-specific values,
<span id="crayon-56d5b8b923615502732060" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">property</span></span></span> works by combining instance methods from the class. Here is a simple example of a
<span id="crayon-56d5b8b92361f243974859" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Publisher</span></span></span> class from our inventory system with a managed
<span id="crayon-56d5b8b923629917466171" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">name</span></span></span> property. Each method passed into property has a
<span id="crayon-56d5b8b923632634078167" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-k ">print</span></span></span> statement to illustrate when it is called.</p> 
<div id="crayon-56d5b8b92363c234812708" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">
<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b92363c234812708-2">2</p><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b92363c234812708-4">4</p><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b92363c234812708-6">6</p><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b92363c234812708-8">8</p><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b92363c234812708-10">10</p><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b92363c234812708-12">12</p><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b92363c234812708-14">14</p><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b8b92363c234812708-16">16</p><p class="crayon-num" data-line="crayon-56d5b8b92363c234812708-17">17</p></div>
</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b92363c234812708-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Publisher</span><span class="crayon-sy">(</span><span class="crayon-k ">object</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92363c234812708-2"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">name</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b8b92363c234812708-3"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">__name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">name</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92363c234812708-4"> </p><p class="crayon-line" id="crayon-56d5b8b92363c234812708-5"><span class="crayon-e">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">get_name</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92363c234812708-6"><span class="crayon-h">        </span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"getting name"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8b92363c234812708-7"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">__name</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92363c234812708-8"> </p><p class="crayon-line" id="crayon-56d5b8b92363c234812708-9"><span class="crayon-e">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">set_name</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">value</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92363c234812708-10"><span class="crayon-h">        </span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"setting name"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8b92363c234812708-11"><span class="crayon-h">        </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">__name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">value</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92363c234812708-12"> </p><p class="crayon-line" id="crayon-56d5b8b92363c234812708-13"><span class="crayon-e">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">delete_name</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92363c234812708-14"><span class="crayon-h">        </span><span class="crayon-k ">print</span><span class="crayon-sy">(</span><span class="crayon-s">"deleting name"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b8b92363c234812708-15"><span class="crayon-h">        </span><span class="crayon-r">del</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-e">__name</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92363c234812708-16"> </p><p class="crayon-line" id="crayon-56d5b8b92363c234812708-17"><span class="crayon-e">    </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">property</span><span class="crayon-sy">(</span><span class="crayon-v">get_name</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">set_name</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">delete_name</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"Publisher name"</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p>If we make an instance of
<span id="crayon-56d5b8b923646969866282" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">Publisher</span></span></span> and access the
<span id="crayon-56d5b8b923650807855277" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">name</span></span></span> attribute, we can see the appropriate methods being called.</p> 
<div id="crayon-56d5b8b92365a386980191" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b8b92365a386980191-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Publisher</span><span class="crayon-sy">(</span><span class="crayon-s">"Faber &amp; Faber"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92365a386980191-2"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-e">name</span></p><p class="crayon-line" id="crayon-56d5b8b92365a386980191-3"><span class="crayon-e">getting </span><span class="crayon-i">name</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92365a386980191-4"><span class="crayon-s">'Faber &amp; Faber'</span></p><p class="crayon-line" id="crayon-56d5b8b92365a386980191-5"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Random House"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92365a386980191-6"><span class="crayon-e">setting </span><span class="crayon-v">name</span></p><p class="crayon-line" id="crayon-56d5b8b92365a386980191-7"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-r">del</span><span class="crayon-h"> </span><span class="crayon-v">p</span><span class="crayon-sy">.</span><span class="crayon-e">name</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b8b92365a386980191-8"><span class="crayon-e">deleting </span><span class="crayon-v">name</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p>That’s it for this basic introduction to descriptors. If you want a challenge, take what you have learned and try to reimplement the
<span id="crayon-56d5b8b923664091634864" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-sy">@</span><span class="crayon-k ">property</span></span></span> decorator. There is enough information in this post to allow you to figure it out.</p>
 <div class="ck_form ck_vertical_subscription_form"> <div class="ck_form_content"> <h3 class="ck_form_title">Mastering Decorators</h3> <div class="ck_description"> <span class="ck_image"> <img alt="Mastering_decorators_cover" src="//s3.amazonaws.com/convertkit/subscription_forms/images/004/814/305/standard/mastering_decorators_cover.jpg?1435694020"/> </span> <p>Enjoyed this article? Join the newsletter and get <strong>Mastering Decorators</strong> - a gentle 22-page introduction to one of the trickiest parts of Python.</p> </div> </div> <div class="ck_form_fields"> <div id="ck_success_msg"> <p>Thanks! Now check your email.</p> </div>    </div> </div>    </div>
 
</div></body></html>