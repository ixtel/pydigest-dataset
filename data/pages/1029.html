<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-escpos" class="anchor" href="#escpos" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>ESCPOS</h1>
<p>Python library to manipulate ESC/POS Printers.</p>
<a name="user-content-dependencies"/>
<h2><a id="user-content-1-dependencies" class="anchor" href="#1-dependencies" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1. Dependencies</h2>
<p>In order to start getting access to your printer, you must ensure
you have previously installed the following python modules:</p>
<blockquote>
<ul>
<li>pyusb (python-usb)</li>
<li>Pillow</li>
</ul>
</blockquote>
<a name="user-content-description"/>
<h2><a id="user-content-2-description" class="anchor" href="#2-description" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>2. Description</h2>
<p>Python ESC/POS is a library which lets the user have access to all
those printers handled by ESC/POS commands, as defined by Epson,
from a Python application.</p>
<p>The standard usage is send raw text to the printer, but in also
helps the user to enhance the experience with those printers by
facilitating the bar code printing in many different standards,
as well as manipulating images so they can be printed as brand
logo or any other usage images migh have.</p>
<p>Text can be aligned/justified and fonts can be changed by size,
type and weight.</p>
<p>Also, this module handles some hardware functionalities like, cut
paper, carrier return, printer reset and others concerned to the
carriage alignment.</p>
<a name="user-content-define-your-printer"/>
<h2><a id="user-content-3-define-your-printer" class="anchor" href="#3-define-your-printer" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>3. Define your printer</h2>
<p>Before start create your Python ESC/POS printer instance, you must
see at your system for the printer parameters. This is done with
the 'lsusb' command.</p>
<p>First run the command to look for the "Vendor ID" and "Product ID",
then write down the values, these values are displayed just before
the name of the device with the following format:</p>
<blockquote>
xxxx:xxxx</blockquote>
<p>Example:</p>
<blockquote>
Bus 002 Device 001: ID 1a2b:1a2b Device name</blockquote>
<p>Write down the the values in question, then issue the following
command so you can get the "Interface" number and "End Point"</p>
<blockquote>
lsusb -vvv -d xxxx:xxxx | grep iInterface
lsusb -vvv -d xxxx:xxxx | grep bEndpointAddress | grep OUT</blockquote>
<p>The first command will yields the "Interface" number that must
be handy to have and the second yields the "Output Endpoint"
address.</p>
<p>By default the "Interface" number is "0" and the "Output Endpoint"
address is "0x82",  if you have other values then you can define
with your instance.</p>
<a name="user-content-define-your-instance"/>
<h2><a id="user-content-4-define-your-instance" class="anchor" href="#4-define-your-instance" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>4. Define your instance</h2>
<p>The following example shows how to initialize the Epson TM-TI88IV</p>
<p><strong>NOTE</strong>: Always finish the sequence with Epson.cut() otherwise you will endup with weird chars being printed.</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> escpos <span class="pl-k">import</span> <span class="pl-k">*</span>

<span class="pl-s"><span class="pl-pds">"""</span> Seiko Epson Corp. Receipt Printer M129 Definitions (EPSON TM-T88IV) <span class="pl-pds">"""</span></span>
Epson <span class="pl-k">=</span> escpos.Escpos(<span class="pl-c1"><span class="pl-k">0x</span>04b8</span>,<span class="pl-c1"><span class="pl-k">0x</span>0202</span>,<span class="pl-c1">0</span>)
Epson.text(<span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>)
Epson.image(<span class="pl-s"><span class="pl-pds">"</span>logo.gif<span class="pl-pds">"</span></span>)
Epson.barcode
Epson.barcode(<span class="pl-s"><span class="pl-pds">'</span>1324354657687<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>EAN13<span class="pl-pds">'</span></span>,<span class="pl-c1">64</span>,<span class="pl-c1">2</span>,<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>)
Epson.cut()</pre></div>
<p>or use with statement:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">with</span> EscposIO(printer.Network(<span class="pl-s"><span class="pl-pds">'</span>192.168.1.87<span class="pl-pds">'</span></span>, <span class="pl-v">port</span><span class="pl-k">=</span><span class="pl-c1">9100</span>)) <span class="pl-k">as</span> p:
    p.set(<span class="pl-v">font</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>, <span class="pl-v">codepage</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>cp1251<span class="pl-pds">'</span></span>, <span class="pl-v">size</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>normal<span class="pl-pds">'</span></span>, <span class="pl-v">align</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>center<span class="pl-pds">'</span></span>, <span class="pl-v">bold</span><span class="pl-k">=</span><span class="pl-c1">True</span>)
    p.printer.set(<span class="pl-v">align</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>center<span class="pl-pds">'</span></span>)
    p.printer.image(<span class="pl-s"><span class="pl-pds">'</span>logo.gif<span class="pl-pds">'</span></span>)
    p.writelines(<span class="pl-s"><span class="pl-pds">'</span>Big line<span class="pl-cce">\n</span><span class="pl-pds">'</span></span>, <span class="pl-v">font</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>b<span class="pl-pds">'</span></span>)
    p.writelines(<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>Привет<span class="pl-pds">'</span></span>, <span class="pl-v">color</span><span class="pl-k">=</span><span class="pl-c1">2</span>)
    p.writelines(<span class="pl-s"><span class="pl-k">u</span><span class="pl-pds">'</span>BIG TEXT<span class="pl-pds">'</span></span>, <span class="pl-v">size</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>2x<span class="pl-pds">'</span></span>)

<span class="pl-c"># After exit of with, printer will cut the paper</span></pre></div>
<a name="user-content-api"/>
<h2><a id="user-content-5-api" class="anchor" href="#5-api" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>5. API</h2>
<ul>
<li><p>Escpos() - main class</p>
</li>
<li><p>Escpos.image(path_img) - Open image file</p>
</li>
<li><p>Escpos.qr(text, *args, **kwargs) - Print QR Code for the provided string</p>
</li>
<li><p>Escpos.barcode(code, bc, width, height, pos, font) - Print Barcode</p>
</li>
<li><p>Escpos.text(text) - Print any text</p>
</li>
<li><dl>
<dt>Escpos.set(codepage=None, **kwargs) - kwargs should be:</dt>
<dd><ul>
<li>bold:        set bold font</li>
<li>underline:   underline text</li>
<li>size:        Text size</li>
<li>font:        Font type</li>
<li>align:       Text position</li>
<li>inverted:    White on black text</li>
<li>color:       Text color</li>
</ul>
</dd>
</dl>
</li>
<li><p>Escpos.cut() - Cut the paper</p>
</li>
<li><p>Escpos.cashdraw(pin) - Send open cashdraw signal to printer pin.</p>
</li>
<li><p>Escpos.control() and Escpos.hw() - Should be use it when you want to do another operations.</p>
</li>
<li><p>EscposIO(printer, autocut=True, autoclose=True) - class for using with 'with' statement. When autocut=False printer not cut the paper after exit of "with".</p>
</li>
<li><dl>
<dt>EscposIO.set(**kwargs) - set the params in printing stream</dt>
<dd><ul>
<li>bold:        set bold font</li>
<li>underline:   underline text</li>
<li>size:        Text size</li>
<li>font:        Font type</li>
<li>align:       Text position</li>
<li>inverted:    White on black text</li>
<li>color:       Text color</li>
</ul>
</dd>
</dl>
</li>
<li><p>EscposIO.writelines(text, **params) - Accept params like "set", and apply them for this lines. You should use set() for setting common params.</p>
</li>
</ul>
<a name="user-content-links"/>
<h2><a id="user-content-6-links" class="anchor" href="#6-links" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>6. Links</h2>
<p>Please visit project homepage at:
<a href="http://repo.bashlinux.com/projects/escpos.html">http://repo.bashlinux.com/projects/escpos.html</a></p>


</article>
  </div></body></html>