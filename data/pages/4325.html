<html><body><div><div class="forum-post blog-post">
            

<a href=""><img src="https://checkio.s3.amazonaws.com/blog/share/n_61_copy.png"/></a>

<p>Hello everyone,</p>
<p>Last couple of times when we’ve talked about Game Development with Python or about GameDev for Android Using Python, we’ve received great responce from our and other related communities.</p>
<p>So we begin our small series of articles dedicated to more practical usage of Python in GameDev.</p>
<p>Today we will build a very simple platform game using Python game framework PyGame, and in the next article, we will try to port it to Android!</p>
<p>So what's a "platform game" game exactly? According to Wiki it's a video game which involves guiding an avatar to jump between suspended platforms, over obstacles, or both to advance the game. These challenges are known as jumping puzzles or freerunning. The player controls the jumps to avoid letting the avatar fall from platforms or miss necessary jumps. "</p>
<p>Classical example of platform game is Nintendo’s famous “Mario”, so we wil try to build something similar to it.</p>
<p>Let's start with the basics: </p>
<h4><strong>Installation</strong></h4>
<p>You can find installation instructions on the <a href="http://www.pygame.org/download.shtml">official PyGame page</a>  as well as prebuilt
 executables for whole variety of Operating Systems.</p>
<p>It wasn't that hard, isn't it?</p>
<h4><strong>Getting Started</strong></h4>
<p>So now we have PyGame installed, let’s start with importing it into our future project!
Simply start your favourite IDE (check out <a href="http://www.checkio.org/blog/choosing-best-python-ide/">previous article about IDE's</a> for Python) and paste this code into newly created main.py, see details in comment section of the code!</p>
<p>Code:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span># Importing PyGame library</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>import pygame</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>from pygame import *</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>#Declaring variables</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>window_width = 800 #Width of game windows</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>window_height = 640 # height</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>screen = (window_width, window_height) #Grouping W and H into a single variable </span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>bg_color = "#FFFFFF" #setting background color</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>def main(): #main function start</span></span></span></p><p class="line"><span class="text plain"><span>    </span><span class="meta paragraph text"><span>pygame.init() # PyGame initialization (all pygame projects requires this)  </span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>    window = pygame.display.set_mode(screen) #Let's create a window</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>    pygame.display.set_caption("Platform Game") # Windows title</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>    bg = Surface((window_width,window_height)) # Creating a visible surface to use as background </span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>    bg.fill(Color(bg_color)) #and fill it with bg_color color (white)    </span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>    while True: # Main Game cycle, ‘True' means it will run without stop forever</span></span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>for event in pygame.event.get(): # Handling quit event</span></span></span></p><p class="line"><span class="text plain"><span>            </span><span class="meta paragraph text"><span>if event.type == QUIT:</span></span></span></p><p class="line"><span class="text plain"><span>                </span><span class="meta paragraph text"><span>raise SystemExit("QUIT") # raise SystemExit, "QUIT" for Py 2.7</span></span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>window.blit(bg, (0,0))      # We need to redraw screen each cycle iteration</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        pygame.display.update()     # drawing everything after each iteration</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if __name__ == "__main__":</span></span></span></p><p class="line"><span class="text plain"><span>    </span><span class="meta paragraph text"><span>main() #executing main function</span></span></span></p></pre><p>Woah, it’s starting to get hot in here, isn’t it?</p>
<p><em>Keep in mind:</em>
The game will be launched in the cycle (while True), each iteration it is necessary to redraw the background, platforms, monsters, messages, etc. It is important to note that the drawing is a sequence, ie if the first draw of the hero, and then fill the background, the character will not be seen.</p>
<p>Once you will run above code, you will see a window filled with white color</p>
<h4><strong>Level construction</strong></h4>
<p>Let's draw a level on existing surface!</p>
<p>How we will do this? We’re choosing the easiest way, we will create a two-dimensional array of m by n. Each cell (m, n) will be a rectangle. Rectangle can contain something or may be empty. </p>
<p>Let's add some more constants:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>platform_width = 32</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>platform_height = 32</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>platform_color = "#000000"</span></span></span></p></pre><p>And a level structure to the 'main' function :</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>map = [</span></span></span></p><p class="line"><span class="text plain"><span>       </span><span class="meta paragraph text"><span>"-------------------------",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "                        -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-                       -",</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       "-------------------------"]</span></span></span></p></pre><p>And to the main cycle we're adding a level parser, to convert above drawing into playable level</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>x=y=0 # coordinates</span></span></span></p><p class="line"><span class="text plain"><span>  </span><span class="meta paragraph text"><span>for row in map: # whole row</span></span></span></p><p class="line"><span class="text plain"><span>      </span><span class="meta paragraph text"><span>for col in row: # each symbol</span></span></span></p><p class="line"><span class="text plain"><span>          </span><span class="meta paragraph text"><span>if col == "-":</span></span></span></p><p class="line"><span class="text plain"><span>              </span><span class="meta paragraph text"><span>#creating a block, filling it with color and drawing it</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>              platform = Surface((platform_width,platform_height))</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>              platform.fill(Color(platform_color)) </span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>              screen.blit(pf,(x,y))</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>          </span><span class="meta paragraph text"><span>x += platform_width #positioning blocks width</span></span></span></p><p class="line"><span class="text plain"><span>       </span><span class="meta paragraph text"><span>y += platform_height    #same for height</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>       x = 0                   #on each row, start from 0</span></span></span></p></pre><p>So what we're doing here is we sorting out the two-dimensional level array, and if there is a symbol "-", then the coordinates <code>(x * platform_width, y * platform_height)</code>, where x, y - is the  index in the array of level.</p>
<h4><strong>Character</strong></h4>
<p>Bold blocks on the background are boring. We need our character that will run and jump on the platforms we’ve just built.</p>
<p>So it's time for some object oriented programming!
We will create a class for our hero! For convenience, we will keep our character as a separate file player.py</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>from pygame import *</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>move_speed = 7</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>width = 22</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>height = 32</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>color =  "#111111"</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>class Player(sprite.Sprite):</span></span></span></p><p class="line"><span class="text plain"><span>    </span><span class="meta paragraph text"><span>def __init__(self, x, y):</span></span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>sprite.Sprite.__init__(self)</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.xvel = 0    # movement speed, 0 is standing still position</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.startX = x  # initial charecter spawn position</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.startY = y  # same for y spawn position</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.image = Surface((width,height))</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.image.fill(Color(color))  # setting charecter color </span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.rect = Rect(x, y, width, height) # rectangular charecter</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>    </span><span class="meta paragraph text"><span>def update(self,  left, right):</span></span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>if left:</span></span></span></p><p class="line"><span class="text plain"><span>            </span><span class="meta paragraph text"><span>self.xvel = -MOVE_SPEED  # left = x- n</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>if right:</span></span></span></p><p class="line"><span class="text plain"><span>            </span><span class="meta paragraph text"><span>self.xvel = MOVE_SPEED  # right = x + n</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>if not(left or right): # standing still, when not walking</span></span></span></p><p class="line"><span class="text plain"><span>            </span><span class="meta paragraph text"><span>self.xvel = 0</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>self.rect.x += self.xvel # moving our position on xvel </span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>    </span><span class="meta paragraph text"><span>def draw(self, screen): # drawing charecter</span></span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>screen.blit(self.image, (self.rect.x,self.rect.y))</span></span></span></p></pre><p>What so interesting and what to look for in this code?</p>
<p>Let's start with the fact that we create a new class inheriting from another class pygame.sprite.Sprite, thereby we inherit all the characteristics of a sprite.
Sprite, according to wiki is a moving the bitmap. It has a number of useful methods and properties.</p>
<p>In <code>self.rect = Rect(x, y, width, height)</code> line, we are creating borders of our rectangular character. Using this rectangle we will not only move hero, but also will check(later) it on a collision with other objects. </p>
<p><code>update(self, left, right))</code> method is used to describe the behavior of the object. It overrides the parent update(* args) → None. It may be called in groups of sprites.</p>
<p><code>draw(self, screen)</code> method is used to display the character on the screen. We will lated remove this method to use more convinient way to display the character.</p>
<p>Before defining the level, let's add our hero and variables to move it.</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>hero = Player(55,55) # creating a hero on x and y coordinates</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>left = right = False    # standing still by default :)</span></span></span></p></pre><p>Also, let's add some code to move our charecter at the ‘event' section of our code.</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if e.type == KEYDOWN and e.key == K_LEFT:</span></span></span></p><p class="line"><span class="text plain"><span>   </span><span class="meta paragraph text"><span>left = True</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if e.type == KEYDOWN and e.key == K_RIGHT:</span></span></span></p><p class="line"><span class="text plain"><span>   </span><span class="meta paragraph text"><span>right = True</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if e.type == KEYUP and e.key == K_RIGHT:</span></span></span></p><p class="line"><span class="text plain"><span>   </span><span class="meta paragraph text"><span>right = False</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if e.type == KEYUP and e.key == K_LEFT:</span></span></span></p><p class="line"><span class="text plain"><span>    </span><span class="meta paragraph text"><span>left = False</span></span></span></p></pre><p>Everything is pretty much self explanatory in this code, if not, please, ask in the comment section</p>
<p>Now, it's time to finally move and draw our charecter! According to drawing rules, you'll need to add this after backgroud and platform drawing</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>hero.update(left, right)  # movement</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>hero.draw(screen)  # charecter drawing</span></span></span></p></pre><p>But, if you launch your code, you'll see that our hero moves too quickly, let's add a restriction in the number of frames per second. To do this, after determining the level add a timer</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>timer = pygame.time.Clock()</span></span></span></p></pre><p>And to make it work, we will add it's parameters to our main cycle </p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>timer.tick(60)</span></span></span></p></pre><p>As you may see, if you launch your code, your hero is stuck in the air, to fix this, let's add some gravity and ability to jump! It's kinda boring, but result is totally worth it!</p>
<p>To do so, let's open our old friend player.py and add a little magic there!</p>
<p>What in real life makes jumps possible? Of course it's gravity!. Now converting those values into the code,:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>jump_power = 10</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>gravity = 0.35 # Force, that will drag player down</span></span></span></p></pre><p>And  voi-là, we now have gravity in our game!</p>
<p>Now setting vertical movement speed and a check if we're standing on the floor, cause we can jump only from the floor. All this goes to <em>init</em> method!</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.yvel = 0 </span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.GroundCheck = False </span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>Now let's add new argument to our existing method</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>def update(self, left, right, up):</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if up:</span></span></span></p><p class="line"><span class="text plain"><span>       </span><span class="meta paragraph text"><span>if self.GroundCheck: # Jump, only when on floor </span></span></span></p><p class="line"><span class="text plain"><span>           </span><span class="meta paragraph text"><span>self.yvel = -jump_power</span></span></span></p></pre><p>Now, right before self.rect.x += self.xvel  string, add: </p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if not self.GroundCheck:</span></span></span></p><p class="line"><span class="text plain"><span>    </span><span class="meta paragraph text"><span>self.yvel +=  gravity</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.GroundCheck = False; # We don't know when we're on the ground</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.rect.y += self.yvel</span></span></span></p></pre><p>Now, let's forbid our player to fly! After left = right = False line, let's add:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>up = false</span></span></span></p></pre><p>Again, this code is pretty much self explanatory.</p>
<p>To end flying question, let's add some more event checks!</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if e.type == KEYDOWN and e.key == K_UP:</span></span></span></p><p class="line"><span class="text plain"><span>       </span><span class="meta paragraph text"><span>up = True</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if e.type == KEYUP and e.key == K_UP:</span></span></span></p><p class="line"><span class="text plain"><span>       </span><span class="meta paragraph text"><span>up = False</span></span></span></p></pre><p>And to ‘update' method, add argument named ‘up'</p>
<h4><strong>Final Chapter: Jumping, Movement</strong></h4>
<p>How do you know that we are on the ground or other hard surface? The answer is obvious - to check if rectangle(hero) crosses with platforms!</p>
<p>Firstly, we will need to change how platforms are generating ;)</p>
<p>To make our code more readable and clear, let's split each important part of the code to a different files, same as we did with player.py, but now, create platforms.py and move platform creation code there:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>platform_width = 32</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>platform_height = 32</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>platform_color = "#000000"</span></span></span></p></pre><p>Then, create class, that inherits from  from pygame.sprite.Sprite</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>class Platform (sprite.Sprite):</span></span></span></p><p class="line"><span class="text plain"><span>    </span><span class="meta paragraph text"><span>def __init __ (self, x, y):</span></span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>sprite.Sprite .__ init __ (self)</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.image = Surface ((platform_width, platform_height))</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.image.fill (Color (platform_color))</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>        self.rect = Rect (x, y, platform_width, platform_height)</span></span></span></p></pre><p>Nothing new here, i think, so let's move on</p>
<p>In addition, we will need to change some parts of main file. Just right befor level array let's add:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>entities = pygame.sprite.Group () # All objects</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>platforms = [] # Platforms, that we will bounce of</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>entities.add(charecter)</span></span></span></p></pre><p>We will will use Sprites Group entities  to display all the elements of this group.
An array of platforms will be used to test for intersection with the platform.</p>
<p>Remember this tricky part?</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if col == "-":</span></span></span></p><p class="line"><span class="text plain"><span>   </span><span class="meta paragraph text"><span>pf = Surface((platform_width, platform_height))</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>   pf.fill(Color (platform_color))</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>   screen.blit(pf, (x, y))</span></span></span></p></pre><p>Now, we will replace it with more readable</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>if col == "-":</span></span></span></p><p class="line"><span class="text plain"><span>   </span><span class="meta paragraph text"><span>platform = Platform(x, y)</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>   entities.add(platform)</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>   platforms.append(platform)</span></span></span></p></pre><p>What we did is we created an instance of Platform class, and added it to the ‘entities' group of sprites and ‘platforms' array.'entities' part is to ease up blocks display logic, and ‘platforms' part is to check intersection with the player.</p>
<p>Next, move all of the level generation code from the cycle and replace charecter display part</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>charecter.draw (screen) </span></span></span></p></pre><p>with</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>entities.draw (screen) # display everything</span></span></span></p></pre><p>If you'll run the code, you will see that nothing changed, becase we're not checking for intersections with our charecter! Let's fix it!</p>
<p>Getting back to player.py. We can now remove draw method, <em>wohoo</em>! But we will need new method, <em>boo</em>!, let's name it ‘collide'</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>def collide (self, xvel, yvel, platforms):</span></span></span></p><p class="line"><span class="text plain"><span>        </span><span class="meta paragraph text"><span>for p in platforms:</span></span></span></p><p class="line"><span class="text plain"><span>            </span><span class="meta paragraph text"><span>if sprite.collide_rect (self, p): # if there's collision with player</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>                </span><span class="meta paragraph text"><span>if xvel&gt; 0: # if moves right</span></span></span></p><p class="line"><span class="text plain"><span>                    </span><span class="meta paragraph text"><span>self.rect.right = p.rect.left # Not move to the right</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>                </span><span class="meta paragraph text"><span>if xvel &lt;0 # same for left</span></span></span></p><p class="line"><span class="text plain"><span>                    </span><span class="meta paragraph text"><span>self.rect.left = p.rect.right # </span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>                </span><span class="meta paragraph text"><span>if yvel&gt; 0:  # if falling down</span></span></span></p><p class="line"><span class="text plain"><span>                    </span><span class="meta paragraph text"><span>self.rect.bottom = p.rect.top # do not fall down</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>                    self.GroundCheck  = True # if standing on something solid</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>                    self.yvel = 0 # falling velocity stops</span></span></span></p><p class="line"><span class="text plain"><span> </span></span></p><p class="line"><span class="text plain"><span>                </span><span class="meta paragraph text"><span>if yvel &lt;0 # if moves up</span></span></span></p><p class="line"><span class="text plain"><span>                    </span><span class="meta paragraph text"><span>self.rect.top = p.rect.bottom # do not move up</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>                    self.yvel = 0 # jump energy disappears</span></span></span></p></pre><p>In this method, we're checking the intersection of the coordinates of the hero and platforms, if any, above described the logic activates.</p>
<p>Well, to make things work, we will need to call this method.
Change the number of arguments for update method once again, it now should look like this:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>update(self,left,right,up,platforms)</span></span></span></p></pre><p><em>Tip: Do not forget to change method call in the main file.</em></p>
<p>And some finishing touches:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.rect.y += self.yvel</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.rect.x += self.xvel </span></span></span></p></pre><p>Replace with:</p>
<pre class="grey-pre editor-colors lang-text"><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.rect.y += self.yvel</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.collide(0, self.yvel, platforms)</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.rect.x += self.xvel # transfer their position on xvel</span></span></span></p><p class="line"><span class="text plain"><span class="meta paragraph text"><span>self.collide(self.xvel, 0, platforms)</span></span></span></p></pre><p>If the hero moved vertically, we check the intersection of the vertical, moved horizontally and again, checked at the intersection of the horizontal.
Let's run our game and see what we've acieved!</p>
<h5><strong><em>P.S</em></strong></h5>
<p>That’s all folks, it was a tough one, but it’s your first game!</p>
<p>In the next part of this article, we will try to add android support and maybe some graphics!</p>
<p>Write your questions and feedback in the comment section, and CheckiO team will do the best we can to help you!</p>
        </div>
        </div></body></html>