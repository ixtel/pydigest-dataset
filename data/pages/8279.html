<html><body><div><div class="section">
              <h1>django-advanced-filters 1.0.1</h1>

              


<p>A Django application for advanced admin filters</p>








<div id="django-advanced-filters">
<h2>Django Advanced Filters</h2>
<p><a href="https://pypi.python.org/pypi/django-advanced-filters" rel="nofollow"><img src="https://img.shields.io/pypi/pyversions/django-advanced-filters.svg"/>
</a> <a href="https://travis-ci.org/modlinltd/django-advanced-filters" rel="nofollow"><img src="https://travis-ci.org/modlinltd/django-advanced-filters.svg?branch=master"/></a> <a href="https://coveralls.io/r/modlinltd/django-advanced-filters" rel="nofollow"><img src="https://coveralls.io/repos/modlinltd/django-advanced-filters/badge.svg"/>
</a> <a href="https://gitter.im/modlinltd/django-advanced-filters?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="nofollow"><img src="https://badges.gitter.im/Join%20Chat.svg"/>
</a></p>
<p>A django ModelAdmin mixin which adds advanced filtering abilities to the
admin.</p>
<p>Mimics the advanced search feature in
<a href="https://www.vtiger.com/" rel="nofollow">VTiger</a>, <a href="https://wiki.vtiger.com/index.php/Create_Custom_Filters" rel="nofollow">see here for more
info</a></p>
<p>For release notes, see
<a href="https://raw.githubusercontent.com/modlinltd/django-advanced-filters/develop/CHANGELOG.md" rel="nofollow">Changelog</a></p>
</div>
<div id="requirements">
<h2>Requirements</h2>
<ul>
<li>Django &gt;= 1.5 (Django 1.5 - 1.8 on Python 2/3/PyPy2)</li>
<li>django-easy-select2 == 1.2.5</li>
<li>django-braces == 1.4.0</li>
<li>simplejson == 3.6.5</li>
</ul>
</div>
<div id="installation-set-up">
<h2>Installation &amp; Set up</h2>
<ol>
<li>Install from pypi: <tt>pip install <span class="pre">django-advanced-filters</span></tt></li>
<li>Add both <tt>'advanced_filters'</tt> and <tt>'easy_select2'</tt> to
<tt>INSTALLED_APPS</tt>.</li>
<li>Add <tt><span class="pre">url(r'^advanced_filters/',</span> <span class="pre">include('advanced_filters.urls'))</span></tt>
to your project’s urlconf.</li>
<li>Run <tt>python manage.py syncdb</tt></li>
</ol>
</div>
<div id="integration-example">
<h2>Integration Example</h2>
<p>Extending a ModelAdmin is pretty straightforward:</p>
<pre>class ProfileAdmin(AdminAdvancedFiltersMixin, models.ModelAdmin):
    list_filter = ('name', 'language', 'ts')   # simple list filters

    # select from these fields in the advanced filter creation form
    advanced_filter_fields = (
        'name', 'language', 'ts'
        # even use related fields as lookup fields
        'country__name', 'posts__title', 'comments__content'
    )
</pre>
<p>Adding a new advanced filter (see below) will display a new list filter
named “Advanced filters” which will list all the filter the currently
logged in user is allowed to use (by default only those he/she created).</p>
<div id="custom-naming-of-fields">
<h3>Custom naming of fields</h3>
<p>Initially, each field in <tt>advanced_filter_fields</tt> is resolved into an
actual model field. That field’s verbose_name attribute is then used as
the text of the displayed option. While uncommon, it occasionally makes
sense to use a custom name, especially when following a relationship, as
the context then changes.</p>
<p>For example, when a profile admin allows filtering by a user name as
well as a sales representative name, it’ll get confusing:</p>
<pre>class ProfileAdmin(AdminAdvancedFiltersMixin, models.ModelAdmin):
  advanced_filter_fields = ('name', 'sales_rep__name')
</pre>
<p>In this case the field options will both be named “name” (by default).</p>
<p>To fix this, use custom naming:</p>
<pre>class ProfileAdmin(AdminAdvancedFiltersMixin, models.ModelAdmin):
  advanced_filter_fields = ('name', ('sales_rep__name', 'assigned rep'))
</pre>
<p>Now, you will get two options, “name” and “assigned rep”.</p>
</div>
</div>
<div id="adding-new-advanced-filters">
<h2>Adding new advanced filters</h2>
<p>By default the mixin uses a template which extends django’s built-in
<tt>change_list</tt> template. This template is based off of grapelli’s fork
of this template (hence the ‘grp’ classes and funny looking javascript).</p>
<p>The default template also uses the superb
<a href="dimsemenov/Magnific-Popup" rel="nofollow">magnificPopup</a> which is currently bundled
with the application.</p>
<p>Regardless of the above, you can easily write your own template which
uses context variables <tt>{{ advanced_filters }}</tt> and
<tt>{{ advanced_filters.formset }}</tt>, to render the advanced filter
creation form.</p>
<p>Here’s a screenshot</p>
<div>
<img src="https://raw.githubusercontent.com/modlinltd/django-advanced-filters/master/screenshot.png"/>
<p>alt text</p>
</div>
</div>
<div id="structure">
<h2>Structure</h2>
<p>Each advanced filter has only a couple of required fields when
constructed with the form; namely the title and a formset (consisting of
a form for each sub-query or rule of the filter query).</p>
<p>Each form in the formset requires the following fields: <tt>field</tt>,
<tt>operator</tt>, <tt>value</tt></p>
<p>And allows the optional <tt>negate</tt> and <tt>remove</tt> fields.</p>
<p>Let us go over each of the fields in a rule fieldset.</p>
<div id="field">
<h3>Field</h3>
<p>The list of all available fields for this specific instance of the
ModelAdmin as specific by the <tt>`advanced_filter_fields</tt>
property. &lt;#integration-example&gt;`__</p>
<div id="the-or-field">
<h4>The OR field</h4>
<p><tt>OR</tt> is an additional field that is added to every rule’s available
fields.</p>
<p>It allows constructing queries with <a href="https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects" rel="nofollow">OR
statements</a>.
You can use it by creating an “empty” rule with this field “between” a
set of 1 or more rules.</p>
</div>
</div>
<div id="operator">
<h3>Operator</h3>
<p>Query field suffixes which specify how the <tt>WHERE</tt> query will be
constructed.</p>
<p>The currently supported are as follows: <tt>iexact</tt>, <tt>icontains</tt>,
<tt>iregex</tt>, <tt>range</tt>, <tt>isnull</tt>, <tt>istrue</tt> and <tt>isfalse</tt></p>
<p>For more detail on what they mean and how they function, see django’s
<a href="https://docs.djangoproject.com/en/dev/ref/models/querysets/#field-lookups" rel="nofollow">documentation on field
lookups</a>.</p>
</div>
<div id="value">
<h3>Value</h3>
<p>The value which the specific sub-query will be looking for, i.e the
value of the field specified above, or in django query syntax:
<tt>.filter(field=value)</tt></p>
</div>
<div id="negate">
<h3>Negate</h3>
<p>A boolean (check-box) field to specify whether this rule is to be
negated, effectively making it a “exclude” sub-query.</p>
</div>
<div id="remove">
<h3>Remove</h3>
<p>Similarly to other <a href="https://docs.djangoproject.com/en/dev/topics/forms/formsets/" rel="nofollow">django
formsets</a>,
used to remove the formset on submit.</p>
</div>
</div>
<div id="editing-previously-created-advanced-filters">
<h2>Editing previously created advanced filters</h2>
<p>The <tt>AdvancedFilterAdmin</tt> class (a subclass of <tt>ModelAdmin</tt>) is
provided and registered with <tt>AdvancedFilter</tt> in admin.py module.</p>
<p>The model’s change_form template is overridden from grapelli’s/django’s
standard template, to mirror the add form modal as closely as possible.</p>
<p><em>Note:</em> currently, adding new filters from the ModelAdmin change page is
not supported.</p>
</div>
<div id="query-serialization">
<h2>Query Serialization</h2>
<p><strong>TODO:</strong> write a few words on how serialization of queries is done.</p>
</div>
<div id="model-correlation">
<h2>Model correlation</h2>
<p>Since version 1.0, The underlying <tt>AdvancedFilter</tt> model instances are
tightly coupled with a specific model (using the app_label.Name model
name), for which admin changelist they are to used and created in.</p>
<p>This change has a few benefits:</p>
<ol>
<li>Admin mixin can be used with multiple <tt>ModelAdmin</tt> classes while
performing specific query serialization and field validation that are
at the base of the filter functionality.</li>
<li>Allows users to edit previously created filters outside of the
context of a changelist, as we do in the
<tt>`AdvancedFilterAdmin</tt> &lt;#editing-previously-created-advanced-filters&gt;`__.</li>
<li>Limit the <tt>AdvancedListFilters</tt> to limit queryset (and thus, the
underlying options) to a specified model.</li>
</ol>
<p>Note: Since we are at the early stages of development I have skipped the
South / 1.7 schema (new field) and data migrations (add specific model
to all existing instances of AdvancedFilter model) migrations. Though
this shouldn’t be too difficult to do, if the need arises I can add
migration examples.</p>
</div>
<div id="views">
<h2>Views</h2>
<p>The GetFieldChoices view is required to dynamically (using javascript)
fetch a list of valid field choices when creating/changing an
<tt>AdvancedFilter</tt>.</p>
</div>
<div id="todo">
<h2>TODO</h2>
<ul>
<li>Add more tests (specifically the admin and view parts)</li>
<li>[STRIKEOUT:Add packaging (setup.py, etc…)]</li>
<li>[STRIKEOUT:Add edit/view functionality to the filters]</li>
<li>Add permission user/group selection functionality to the filter form</li>
<li>Allow toggling of predefined templates (grappelli / vanilla django
admin), and front-end features.</li>
</ul>
</div>
<div id="changelog">
<h2>Changelog</h2>
<div id="a-public-release">
<h3>1.0.1 - A Public Release</h3>
<div id="bugs">
<h4>Bugs</h4>
<ul>
<li>proper support for py26 and py3X and different Django releases</li>
<li>avoid querying all instances for choices</li>
<li>resolve settings inside view and refine error handling</li>
</ul>
</div>
<div id="tests">
<h4>Tests</h4>
<ul>
<li>add doctests to the <tt>form_helpers</tt></li>
<li>add tests for <tt>forms</tt></li>
<li>add test case <tt>views.TestGetFieldChoicesView</tt></li>
<li>setup.py/travis: add <tt><span class="pre">test-reqs.txt</span></tt> as extras_require</li>
<li>refactor testing to use <tt>py.test</tt> and run <tt>tox</tt> from <tt>setup.py</tt></li>
<li>travis: use latest version of each Django release</li>
</ul>
</div>
<div id="docs">
<h4>Docs:</h4>
<ul>
<li><tt>README</tt>: explain what we test against</li>
</ul>
</div>
</div>

</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>16</span> downloads in the last week
  </li>
  <li>
    <span>128</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>