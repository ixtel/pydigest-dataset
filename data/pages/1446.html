<html><body><div><div class="entry-content">
		<p>Since the early days of IronPython, I keep shifting one bullet point down on my ToDo list:</p>
<p>* Evaluate options to use <a href="http://ilnumerics.net">ILNumerics</a> from IronPython</p>
<p>Several years ago there has been some attempts from<a href="https://code.google.com/p/ironlab/"> ILNumerics users</a> who successfully utilized ILNumerics from within IronPython. But despite our fascination for these attempts, we were not able to catch up and deeply evaluate all options for joining both projects. Years went by and Microsoft has dropped support for IronPython in the meantime. Nevertheless, a considerably large community seems to be active on IronPython. Finally, today is the day I am going to give this a first quick shot.</p>
<p><span id="more-599"/></p>
<p><em>Disclaimer: I am not a python developer. My experience with IronPython range from 0 … zero (unfortunatley, since the project deserves <strong>much</strong> more attention). For CPython it is only slighly better. So please bare with me if I went into some stupid direction or if I have completely missed better options in this article! Corrections and suggestions are always warmly welcome.</em></p>
<h1>Setup</h1>
<p>I downloaded and installed <a href="https://ironpython.codeplex.com/releases/view/90087">IronPython from CodePlex</a>. Also, in Visual Studio 2013 there exists a link in the NEW PROJECT dialog advertising the download of IronPython Tools for Visual Studio. I used that to setup Visual Studio for IronPython projects. All setup went smooth and easy. Nice!</p>
<h1>Creating Plots with IronPython</h1>
<p>The challenge I was interested in the most was how it is possible to utilize the great plotting capabilities of <a href="http://ilnumerics.net/Visualization-API.html">ILNumerics Visualization Engine</a> from IronPython projects. Since matplotlib seems not to be available for IronPython and other alternatives are also pretty rare (if any at all?) having our visualization engine available to IronPython projects seem to be a big improvement.</p>
<p>The good news first: it works and it does so very easily. The following plot is done purely in IronPython:</p>
<p><a href="http://ilnumerics.net/blog/wp-content/uploads/2014/09/Plotting-Fun-with-ILNumerics-in-IronPython1.png"><img class="aligncenter size-full wp-image-613" src="http://ilnumerics.net/blog/wp-content/uploads/2014/09/Plotting-Fun-with-ILNumerics-in-IronPython1.png" alt=""/></a>I started with a fresh new Iron Python Windows Forms Application from the ‘New Project’ dialog in Visual Studio 2013.</p>
<p><a href="http://ilnumerics.net/blog/wp-content/uploads/2014/09/IronPython_ILPanel_NewProjectVS2013.png"><img src="http://ilnumerics.net/blog/wp-content/uploads/2014/09/IronPython_ILPanel_NewProjectVS2013.png" alt=""/></a></p>
<p>This gives a template python file ‘IronPython_ILPanel.py’ with the following content:</p>
<pre class="brush: python; title: ; notranslate" title="">
import clr
clr.AddReference('System.Drawing')
clr.AddReference('System.Windows.Forms')

from System.Drawing import *
from System.Windows.Forms import *

class MyForm(Form):
    def __init__(self):
        # Create child controls and initialize form
        pass

Application.EnableVisualStyles()
Application.SetCompatibleTextRenderingDefault(False)

form = MyForm()
Application.Run(form)</pre>
<p>If you are familiar with the common setup of Windows Forms you may notice some similarities with the stub provided by a new C# Windows Forms Application project. What is otherwise spread over multiple files, now is done all within the global scope of the one and only *.py file: the form class is defined, the static Application class is configured and the event loop is started with an instance of the formerly defined MyForm class. Straight. This corresponds to the common setup for Windows.Forms from any language, where no Designer support exists for. The same could be done in PowerShell, to name just another example.</p>
<p>In order to integrate support for ILNumerics Visualization Engine, I did the following simple steps:</p>
<p>1) If not done so far, go and install <a href="http://ilnumerics.net">ILNumerics Ultimate VS</a>. We offer <a href="http://ilnumerics.net/download.html">30 days trials</a> which contain all features without limitation.<br/>
2) Once installed, ILNumerics is available in the “Add Reference” dialog (right click on References in the Solution Explorer). ILNumerics.dll is added from the .NET tab:</p>
<p><a href="http://ilnumerics.net/blog/wp-content/uploads/2014/09/IronPython_ILPanel_Select_Component.png"><img class="aligncenter size-full wp-image-606" src="http://ilnumerics.net/blog/wp-content/uploads/2014/09/IronPython_ILPanel_Select_Component.png" alt=""/></a>3) Make the ILNumerics namespaces available: I added the following lines to the import section at the very top of IronPython_ILPanel.py:</p>
<pre class="brush: python; title: ; notranslate" title="">
import clr
clr.AddReference('System.Drawing')
clr.AddReference('System.Windows.Forms')
clr.AddReference('ILNumerics')

from System.Drawing import *
from System.Windows.Forms import *
from ILNumerics import *
from ILNumerics.Drawing import *
from ILNumerics.Drawing.Plotting import *
</pre>
<p>4) Now we are ready to add a plot to the form. In C# we would simply use the <code>ilPanel1_Load</code> event handler which is easily added by help of the forms designer. Since we do not have designer support here, we simply add the setup to the constructor of MyForm:</p>
<pre class="brush: python; title: ; notranslate" title="">
class MyForm(Form):
   def __init__(self):
     # Create child controls and initialize form
     ilpanel = ILPanel()
     ilpanel.Dock = DockStyle.Fill
     self.Controls.Add(ilpanel)
     # show some demo: first create a plotcube
     pc = ILPlotCube("pc", 0)
     # it will hold a surface with some sinc data in 3D
     # You can use ILRetArray returned from any ILNumerics Computing
     # Module as input argument here directly. Type conversions seem to happen automatically.
     sf = ILSurface(ILSpecialData.sincf(40,50))
     pc.Add(sf)
     # add the plotcube to the scene
     ilpanel.Scene.Add(pc)
     self.Text = "Plotting Fun with ILNumerics in IronPython"
</pre>
<p>This is all straightforward. The configuration of the panel and the plots is exactly as it would have been done in C# or Visual Basic. However, we have to add the ILPanel to the self.Controls collection manually. The result, of course is exactly the same: a nice interactive form, utilizing OpenGL, with all manipulation options like rotation, pan and zoom. The full spectrum of the Visualization Engine should work out of the box. This includes several, flexible <a href="http://ilnumerics.net/plotting-api.html">3D and 2D plotting types</a> as well as the whole <a href="http://ilnumerics.net/scene-graph-shapes-and-buffers.html">scene graph functionality</a> for building your own interactive visualizations.</p>
<p>This is all what needs to be done in order to create nice professional plots directly within IronPython. Press F5 and start your application, rotate the plot with the mouse and learn about all the <a href="http://ilnumerics.net/visualization-engine.html">options you have</a>.</p>
<p><iframe src="https://www.youtube.com/embed/G9WWy_u-vvI?feature=oembed" frameborder="0" allowfullscreen="">VIDEO</iframe></p>
<h1>Computing Fun with IronPython and ILNumerics</h1>
<p>ILNumerics not only rely on its own flexible n-dimensional array implementation, it also introduces its very own memory management – for <a href="http://ilnumerics.net/performance.html">very good reasons</a>. In order for the memory managements to work, <a href="http://ilnumerics.net/GeneralRules.html">individual array types</a> (ILArray, ILInArray, ILOutArray and ILRetArray) are used in ILNumerics algorithms. This makes great use of the strict type safety of .NET languages as C# and Visual Basic and of automatic conversions between those types.</p>
<p>Python on the other side is a dynamic language. It does not know the concept of types to the same extend. A straightforward application of the ILNumerics array types is not possible. IronPython, however offers workarounds (clr.Convert) but they are not able to provide the same syntactical convenience as a pure C# algorithm.</p>
<p>My recommendation for the utilization of ILNumerics Computing Engine therefore is as follows:</p>
<p>ILNumerics Computing Engine can be used without restriction. The utilization of existing algorithms is straightforward. Algorithms leveraging the ILNumerics Function Rules can be called directly without any type conversions. The creation of local variables on the other side requires type conversions from ILRetArray to ILArray. This can be done by help of IronPythons clr.Convert function.</p>
<p>The type conversion issue possibly makes it less feasible to write own ILNumerics Computing Engine algorithms in IronPython. But most the time, one would rather want to use existing python algorithms anyway. In order to actually create a new algorithm, one should rather utilize C# and compile the algorithm into its own .NET module which can than easily be imported into your python project and get interfaced from your python code.</p>
<h1>Summary</h1>
<p>This blog demonstrated how easy it is to utilize ILNumerics from IronPython. Especially the Visualization Engine is incorporated without any problems and offers the full set of visualization and plotting options out of the box. Algorithms created with ILNumerics Computation Engine can directly be interfaced and used – in parallel with numpy algorithms, if the need arise. The syntax of the Computing Engine however is not as expressive and more clumsy due to the absense of implicit type conversions and operator overloads. Complex algorithms one therefore would rather implement in C# or VisualBasic than in IronPython. For small algorithms, like data preprocessing and the like, ILNumerics Computing Engine serves as a faster alternative to numpy arrays.</p>
	</div>
	
	</div></body></html>