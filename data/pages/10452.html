<html><body><div><div id="content">

            

            
        


            <div class="section">
              <h1>mysqlparse 0.1.4</h1>

              


<p>A library for parsing SQL statements.</p>








<a href="https://pypi.python.org/pypi/mysqlparse" rel="nofollow"><img src="https://img.shields.io/pypi/v/mysqlparse.svg"/>
</a>
<a href="https://travis-ci.org/seporaitis/mysqlparse" rel="nofollow"><img src="https://img.shields.io/travis/seporaitis/mysqlparse.svg"/>
</a>
<p>A highly experimental attempt to have a sane parser library to parse MySQL statements.</p>
<p>At the moment - use it at your own risk!</p>

<div id="example">
<h2>Example</h2>
<p>Some properties that can be accessed.</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">mysqlparse</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">sql</span> <span class="o">=</span> <span class="n">mysqlparse</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">"""
...     ALTER TABLE `django_user` ADD COLUMN `notes` LONGTEXT NOT NULL
... """</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">statement_type</span><span class="p">)</span>
<span class="n">ALTER</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">table_name</span><span class="p">)</span>
<span class="sb">`django_user`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ignore</span><span class="p">)</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">alter_specification</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">alter_action</span><span class="p">)</span>
<span class="n">ADD</span> <span class="n">COLUMN</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">alter_specification</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">column_name</span><span class="p">)</span>
<span class="sb">`notes`</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">alter_specification</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data_type</span><span class="p">)</span>
<span class="n">LONGTEXT</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">alter_specification</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">null</span><span class="p">)</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">alter_specification</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">column_position</span><span class="p">)</span>
<span class="n">LAST</span>
</pre>
<p>Checking that the alter statement is backwards compatible with a
previous version of SOME code, which does not know how to save
<tt>notes</tt> as <tt>NOT NULL</tt>:</p>
<pre><span class="k">for</span> <span class="n">statement</span> <span class="ow">in</span> <span class="n">sql</span><span class="o">.</span><span class="n">statements</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">statement</span> <span class="o">!=</span> <span class="s1">'ALTER'</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">statement</span><span class="o">.</span><span class="n">alter_specification</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">data_type</span> <span class="o">==</span> <span class="s1">'LONGTEXT'</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">column</span><span class="o">.</span><span class="n">null</span> <span class="ow">is</span> <span class="bp">False</span> <span class="ow">and</span> <span class="n">column</span><span class="o">.</span><span class="n">default</span> <span class="o">!=</span> <span class="s1">'NULL'</span><span class="p">:</span>
                <span class="k">print</span> <span class="s2">"{s.table_name}.{c.column_name} is `LONGTEXT NOT NULL` which may break the production system. Use `LONGTEXT DEFAULT NULL` instead."</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">s</span><span class="o">=</span><span class="n">statement</span><span class="p">,</span>
                    <span class="n">c</span><span class="o">=</span><span class="n">column</span><span class="p">,</span>
                <span class="p">)</span>
</pre>
</div>
<div id="how-can-you-help">
<h2>How can you help?</h2>
<p>A short list of things that would help (from relatively easiest):</p>
<ul>
<li>Raise an issue with an edge case statement that <strong>should</strong> parse,
but doesn’t.</li>
<li>Raise an issue with how you would like to use this library.</li>
<li>Document the available properties in the parsed object.</li>
<li>Add a missing test case or suggest a way to avoid so much repetition
in tests checking the same statement, but with variations.</li>
<li>Suggest how to use <cite>pyparsing</cite> to do statement validation.</li>
<li>Maybe it is possible to generate <cite>pyparsing</cite> parser from the MySQL
source code?</li>
<li>Add ability to unparse the parse (sub)trees back into valid SQL.</li>
</ul>
</div>
<div id="why">
<h2>Why?</h2>
<p>Out of frustration for lack of a better tool.</p>
</div>
<p id="history">
<h2>History</h2>
</p>
<div id="id1">
<h2>0.1.4 (2016-02-28)</h2>
<ul>
<li>Brought back <tt>HISTORY.rst</tt>.</li>
<li>Add <tt>mysqlparse.parse</tt> function.</li>
<li>Add <tt>six</tt> as a dependency to make writing Py2 and Py3 compatible code easier.</li>
<li>Add support for <tt>ALTER TABLE .. MODIFY [COLUMN]</tt> statements.</li>
<li>Add support for <tt>ALTER TABLE .. DROP *</tt> statements.</li>
<li>Move version string from <tt>setup.py</tt> into <tt>mysqlparse</tt>.</li>
</ul>
</div>
<div id="id2">
<h2>0.1.3 (2016-02-20)</h2>
<ul>
<li>Updated <tt>README.rst</tt>.</li>
<li>Add support for <tt>ALTER TABLE ... ADD INDEX</tt> statements.</li>
</ul>
</div>
<div id="id3">
<h2>0.1.2 (2016-02-16)</h2>
<ul>
<li>A little tidy up.</li>
<li>Removed <tt>defaultValue</tt> parse action.</li>
<li>Improved <tt>NULL</tt> handling.</li>
<li>Updated tests to pass.</li>
</ul>
</div>
<div id="id4">
<h2>0.1.1 (2016-02-15)</h2>
<ul>
<li>Fixed packaging configuration.</li>
</ul>
</div>
<div id="id5">
<h2>0.1.0 (2016-02-15)</h2>
<ul>
<li>First release with code parsing some of <tt>ALTER TABLE ... ADD COLUMN</tt> statements.</li>
</ul>
</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>130</span> downloads in the last week
  </li>
  <li>
    <span>782</span> downloads in the last month
  </li>
</ul>









            </div>


          </div>
          </div></body></html>