<html><body><div><div class="entry-content"><p>Числа в Python 3: целые, вещественные, комплексные. Работа с числами и операции над ними.</p><div class="section" id="int"><h2>Целые числа (int)</h2><p>Числа в Python 3 ничем не отличаются от обычных чисел. Они поддерживают набор самых обычных математических операций:</p><table border="1" class="docutils"><tbody valign="top"><tr><td>x + y</td><td>Сложение</td></tr><tr><td>x - y</td><td>Вычитание</td></tr><tr><td>x * y</td><td>Умножение</td></tr><tr><td>x / y</td><td>Деление</td></tr><tr><td>x // y</td><td>Получение целой части от деления</td></tr><tr><td>x % y</td><td>Остаток от деления</td></tr><tr><td>-x</td><td>Смена знака числа</td></tr><tr><td>abs(x)</td><td>Модуль числа</td></tr><tr><td>divmod(x, y)</td><td>Пара (x // y, x % y)</td></tr><tr><td>x ** y</td><td>Возведение в степень</td></tr><tr><td>pow(x, y[, z])</td><td>x<sup>y</sup> по модулю (если модуль задан)</td></tr></tbody></table><p>Также нужно отметить, что целые числа в python 3, в отличие от многих других языков, поддерживают длинную арифметику (однако, это требует больше памяти).</p><pre class="code pycon literal-block">
<span class="mi"/><span class="gp">&gt;&gt;&gt; </span><span class="mi">255</span> <span class="o">+</span> <span class="mi">34</span>
<span class="go">289
</span><span class="mi"/><span class="gp">&gt;&gt;&gt; </span><span class="mi">5</span> <span class="o">*</span> <span class="mi">2</span>
<span class="go">10
</span><span class="mi"/><span class="gp">&gt;&gt;&gt; </span><span class="mi">20</span> <span class="o">/</span> <span class="mi">3</span>
<span class="go">6.666666666666667
</span><span class="mi"/><span class="gp">&gt;&gt;&gt; </span><span class="mi">20</span> <span class="o">//</span> <span class="mi">3</span>
<span class="go">6
</span><span class="mi"/><span class="gp">&gt;&gt;&gt; </span><span class="mi">20</span> <span class="o">%</span> <span class="mi">3</span>
<span class="go">2
</span><span class="mi"/><span class="gp">&gt;&gt;&gt; </span><span class="mi">3</span> <span class="o">**</span> <span class="mi">4</span>
<span class="go">81
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">pow</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">81
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">pow</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">27</span><span class="p">)</span>
<span class="go">0
</span><span class="mi"/><span class="gp">&gt;&gt;&gt; </span><span class="mi">3</span> <span class="o">**</span> <span class="mi">150</span>
<span class="go">369988485035126972924700782451696644186473100389722973815184405301748249</span></pre><div class="section" id="id2"><h3>Битовые операции</h3><p>Над целыми числами также можно производить битовые операции</p><table border="1" class="docutils"><tbody valign="top"><tr><td>x | y</td><td>Побитовое <i>или</i></td></tr><tr><td>x ^ y</td><td>Побитовое <i>исключающее или</i></td></tr><tr><td>x &amp; y</td><td>Побитовое <i>и</i></td></tr><tr><td>x &lt;&lt; n</td><td>Битовый сдвиг влево</td></tr><tr><td>x &gt;&gt; y</td><td>Битовый сдвиг вправо</td></tr><tr><td>~x</td><td>Инверсия битов</td></tr></tbody></table></div><div class="section" id="id3"><h3>Дополнительные методы</h3><p><b>int.bit_length</b>() - количество бит, необходимых для представления числа в двоичном виде, без учёта знака и лидирующих нулей.</p><pre class="code pycon literal-block">
<span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="o">-</span><span class="mi">37</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">bin</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="go">'-0b100101'
</span><span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span>
<span class="go">6</span></pre><p><b>int.to_bytes</b>(length, byteorder, *, signed=False) - возвращает <a href="http://pythonworld.ru/tipy-dannyx-v-python/bajty-bytes-i-bytearray.html" target="_blank">строку байтов</a>, представляющих это число.</p><pre class="code pycon literal-block">
<span class="p"/><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'big'</span><span class="p">)</span>
<span class="go">b'\x04\x00'
</span><span class="p"/><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'big'</span><span class="p">)</span>
<span class="go">b'\x00\x00\x00\x00\x00\x00\x00\x00\x04\x00'
</span><span class="p"/><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="o">-</span><span class="mi">1024</span><span class="p">)</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'big'</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">b'\xff\xff\xff\xff\xff\xff\xff\xff\xfc\x00'
</span><span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">((</span><span class="n">x</span><span class="o">.</span><span class="n">bit_length</span><span class="p">()</span> <span class="o">//</span> <span class="mi">8</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'little'</span><span class="p">)</span>
<span class="go">b'\xe8\x03'</span></pre><p>classmethod <b>int.from_bytes</b>(bytes, byteorder, *, signed=False) - возвращает число из данной строки байтов.</p><pre class="code pycon literal-block">
<span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">b</span><span class="s1">'</span><span class="se">\x00\x10</span><span class="s1">'</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'big'</span><span class="p">)</span>
<span class="go">16
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">b</span><span class="s1">'</span><span class="se">\x00\x10</span><span class="s1">'</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'little'</span><span class="p">)</span>
<span class="go">4096
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">b</span><span class="s1">'</span><span class="se">\xfc\x00</span><span class="s1">'</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'big'</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">-1024
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">(</span><span class="n">b</span><span class="s1">'</span><span class="se">\xfc\x00</span><span class="s1">'</span><span class="p">,</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'big'</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">64512
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="o">.</span><span class="n">from_bytes</span><span class="p">([</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">byteorder</span><span class="o">=</span><span class="s1">'big'</span><span class="p">)</span>
<span class="go">16711680</span></pre></div><div class="section" id="id4"><h3>Системы счисления</h3><p>Те, у кого в школе была информатика, знают, что числа могут быть представлены не только в десятичной системе счисления. К примеру, в компьютере используется двоичный код, и, к примеру, число 19 в двоичной системе счисления будет выглядеть как 10011. Также иногда нужно переводить числа из одной системы счисления в другую. Python для этого предоставляет несколько функций:</p><ul><li><b>int</b>([object], [основание системы счисления]) - преобразование к целому числу в десятичной системе счисления. По умолчанию система счисления десятичная, но можно задать любое основание от 2 до 36 включительно.</li><li><b>bin</b>(x) - преобразование целого числа в двоичную строку.</li><li><b>hex</b>(х) - преобразование целого числа в шестнадцатеричную строку.</li><li><b>oct</b>(х) - преобразование целого числа в восьмеричную строку.</li></ul><p>Примеры:</p><pre class="code pycon literal-block">
<span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">'19'</span><span class="p">)</span> <span class="c1"># Переводим строку в число</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="s1">'19.5'</span><span class="p">)</span>  <span class="c1"># Строка не является целым числом</span>
<span class="gt">Traceback (most recent call last):
</span><span class="gr">  File "", line 1, in
ValueError</span>: <span class="n">invalid literal for int() with base 10: '19.5'</span>
<span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">19.5</span><span class="p">)</span>  <span class="c1"># Применённая к числу с плавающей точкой, отсекает дробную часть</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="go">19 19
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">bin</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<span class="go">'0b10011'
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">oct</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<span class="go">'0o23'
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">hex</span><span class="p">(</span><span class="mi">19</span><span class="p">)</span>
<span class="go">'0x13'
</span><span class="mb"/><span class="gp">&gt;&gt;&gt; </span><span class="mb">0b10011</span>  <span class="c1"># Так тоже можно записывать числовые константы</span>
<span class="go">19
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="p">(</span><span class="s1">'10011'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">19
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">int</span><span class="p">(</span><span class="s1">'0b10011'</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">19</span></pre></div></div><div class="section" id="float"><h2>Вещественные числа (float)</h2><p>Вещественные числа поддерживают те же операции, что и целые. Однако (из-за представления чисел в компьютере) вещественные числа неточны, и это может привести к ошибкам:</p><pre class="code pycon literal-block">
<span class="mf"/><span class="gp">&gt;&gt;&gt; </span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span>
<span class="go">0.9999999999999999</span></pre><p>Для высокой точности используют другие объекты (например Decimal и <a href="http://pythonworld.ru/moduli/modul-fractions.html" target="_blank">Fraction</a>)).</p><p>Также вещественные числа не поддерживают длинную арифметику:</p><pre class="code pycon literal-block">
<span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">**</span> <span class="mi">1000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">+</span> <span class="mf">0.1</span>
<span class="gt">Traceback (most recent call last):
</span><span class="gr">  File "", line 1, in
OverflowError</span>: <span class="n">int too large to convert to float</span></pre><p>Простенькие примеры работы с числами:</p><pre class="code pycon literal-block">
<span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="mi">150</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="mf">12.9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">+</span> <span class="n">d</span>
<span class="go">162.9
</span><span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">d</span> <span class="o">-</span> <span class="n">c</span><span class="p">)</span>  <span class="c1"># Модуль числа</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">137.1
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>  <span class="c1"># Округление</span>
<span class="go">137</span></pre><div class="section" id="id5"><h3>Дополнительные методы</h3><p><b>float.as_integer_ratio</b>() - пара целых чисел, чьё отношение равно этому числу.</p><p><b>float.is_integer</b>() - является ли значение целым числом.</p><p><b>float.hex</b>() - переводит float в hex (шестнадцатеричную систему счисления).</p><p>classmethod <b>float.fromhex</b>(s) - float из шестнадцатеричной строки.</p><pre class="code pycon literal-block">
<span class="p"/><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mf">10.5</span><span class="p">)</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
<span class="go">'0x1.5000000000000p+3'
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">float</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="s1">'0x1.5000000000000p+3'</span><span class="p">)</span>
<span class="go">10.5</span></pre><p>Помимо стандартных выражений для работы с числами (а в Python их не так уж и много), в составе Python есть несколько полезных модулей.</p><p><a href="http://pythonworld.ru/moduli/modul-math.html" target="_blank">Модуль math</a> предоставляет более сложные математические функции.</p><pre class="code pycon literal-block">
<span class="kn"/><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>
<span class="go">3.141592653589793
</span><span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">85</span><span class="p">)</span>
<span class="go">9.219544457292887</span></pre><p><a href="http://pythonworld.ru/moduli/modul-random.html" target="_blank">Модуль random</a> реализует генератор случайных чисел и функции случайного выбора.</p><pre class="code pycon literal-block">
<span class="kn"/><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="go">0.15651968855132303</span></pre></div></div><div class="section" id="complex"><h2>Комплексные числа (complex)</h2><p>В Python встроены также и комплексные числа:</p><pre class="code pycon literal-block">
<span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">(1+2j)
</span><span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">(3+4j)
</span><span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">(1+2j)
</span><span class="k"/><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">(4+6j)
</span><span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">(-5+10j)
</span><span class="n"/><span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">(0.44+0.08j)
</span><span class="k"/><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">conjugate</span><span class="p">())</span>  <span class="c1"># Сопряжённое число</span>
<span class="go">(1-2j)
</span><span class="k"/><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">imag</span><span class="p">)</span>  <span class="c1"># Мнимая часть</span>
<span class="go">2.0
</span><span class="k"/><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">real</span><span class="p">)</span>  <span class="c1"># Действительная часть</span>
<span class="go">1.0
</span><span class="k"/><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># Комплексные числа нельзя сравнить</span>
<span class="gt">Traceback (most recent call last):
</span><span class="gr">  File "", line 1, in
TypeError</span>: <span class="n">unorderable types: complex() &gt; complex()</span>
<span class="k"/><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">y</span><span class="p">)</span>  <span class="c1"># Но можно проверить на равенство</span>
<span class="go">False
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4j</span><span class="p">)</span>  <span class="c1"># Модуль комплексного числа</span>
<span class="go">5.0
</span><span class="nb"/><span class="gp">&gt;&gt;&gt; </span><span class="nb">pow</span><span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">4j</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># Возведение в степень</span>
<span class="go">(-7+24j)</span></pre><p>Также для работы с комплексными числами используется также <a href="http://pythonworld.ru/moduli/modul-cmath.html" target="_blank">модуль cmath</a>.</p></div></div></div></body></html>