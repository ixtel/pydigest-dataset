<html><body><div><div class="post-body entry-content"><p>
By </p><a href="http://www.dancingbison.com">Vasudev Ram</a><p/><a href=""/>

<p>
UNIX users are familiar with the </p><a href="http://en.wikipedia.org/wiki/Which_%28Unix%29">which command</a><p>. Given an argument called </p><b>name</b><p>, it checks the system PATH environment variable, to see whether that name exists (as a file) in any of the directories specified in the PATH. (The directories in the PATH are colon-separated on UNIX and semicolon-separated on Windows.)
</p><p>
I'd written a Windows-specific version of the which command some time ago, in C.
</p><p>
Today I decided to write a simple version of the which command in Python. In the spirit of </p><a href="https://google.com/search?q=YAGNI">YAGNI</a><p> and incremental development, I tried to resist the temptation to add more features too early; but I did give in once and add the exit code stuff near the end :)
</p><p>
Here is the code for which.py:
</p><pre>from __future__ import print_function

# which.py
# A minimal version of the UNIX which utility, in Python.
# Author: Vasudev Ram - www.dancingbison.com
# Copyright 2015 Vasudev Ram - http://www.dancingbison.com

import sys
import os
import os.path
import stat

def usage():
    sys.stderr.write("Usage: python which.py name\n") 
    sys.stderr.write("or: which.py name\n") 

def which(name):
    found = 0 
    for path in os.getenv("PATH").split(os.path.pathsep):
        full_path = path + os.sep + name
        if os.path.exists(full_path):
            """
            if os.stat(full_path).st_mode &amp; stat.S_IXUSR:
                found = 1
                print(full_path)
            """
            found = 1
            print(full_path)
    # Return a UNIX-style exit code so it can be checked by calling scripts.
    # Programming shortcut to toggle the value of found: 1 =&gt; 0, 0 =&gt; 1.
    sys.exit(1 - found)

def main():
    if len(sys.argv) != 2:
        usage()
        sys.exit(1)
    which(sys.argv[1])

if "__main__" == __name__:
        main()
</pre><p>And here are a few examples of using the command:
</p><p>
(Note: the tests are done on Windows, though the command prompt is a $ sign (UNIX default); I just set it to that because I like $'s and UNIX :)
</p><p>
$ which vim</p><p>
\vim
</p><p>
$ which vim.exe</p><p>
C:\Ch\bin\vim.exe
</p><p>
$ set PATH | grep -i vim73
</p><p>
$ addpath c:\vim\vim73
</p><p>
$ which.py vim.exe</p><p>
C:\Ch\bin\vim.exe
</p><p>
c:\vim\vim73\vim.exe</p><p>
$ which metapad.exe</p><p>
C:\util\metapad.exe
</p><p>
$ which pscp.exe</p><p>
C:\util\pscp.exe</p><p>
C:\Ch\bin\pscp.exe
</p><p>
$ which dostounix.exe</p><p>
C:\util\dostounix.exe
</p><p>
$ which pythonw.exe</p><p>
C:\Python278\pythonw.exe</p><p>
D:\Anaconda-2.1.0-64\pythonw.exe
</p><p>
# Which which is which? All four combinations:
</p><p>
$ which which</p><p>
.\which
</p><p>
$ which.py which</p><p>
.\which
</p><p>
$ which which.py</p><p>
.\which.py
</p><p>
$ which.py which.py</p><p>
.\which.py
</p><p>
As you can see, calling the </p><b>which</b><p> Python command with different arguments, gives various results, including sometimes finding </p><b>one</b><p> instance of </p><b>vim.exe</b><p> and sometimes </p><b>two</b><p> instances, depending on the values in the </p><b>PATH</b><p> variable (which I changed, using my </p><b>addpath.bat</b><p> script, to add the </p><b>\vim\vim73</b><p> directory to it).
</p><p>
Also, it works when invoked either as </p><b>which.py</b><p> or just </p><b>which</b><p>.
</p><p>
I'll discuss my interpretation of these variations in an upcoming post - including a variation that uses </p><b>os.stat(full_path).st_mode</b><p> - see the commented part of the code under the line:

</p><b>if os.path.exists(full_path):</b>
<p>
Meanwhile, did you know that </p><b>YAGNI</b><p> was written about much before </p><a href="http://en.wikipedia.org/wiki/Agile_software_development">agile</a><p> was a thing? IIRC, I've seen it described in either </p><b>Kernighan and Ritchie</b><p> (</p><b>The C Programming Language</b><p>) or in </p><b>Kernighan and Pike</b><p> (</p><b>The UNIX Programming Environment</b><p>). It could be possibly be older than that, say from the mainframe era.
</p><p>
Finally, as I was adding labels to this blog post, Blogger showed me "pywhich" as a label, after I typed "which" in the labels box. That reminded me that I had written another post earlier about a Python which utility (not by me), so I found it on my blog by typing in this URL:

</p><a href="http://jugad2.blogspot.in/search/label/pywhich">http://jugad2.blogspot.in/search/label/pywhich</a>
<p>
which finds all posts on my blog with the label 'pywhich' (and the same approach works for any other label); the resulting post is:

</p><a href="http://jugad2.blogspot.in/2013/02/pywhich-like-unix-which-tool-for-python.html">pywhich, like the Unix which tool, for Python modules</a><p>.
</p><p>
- Enjoy.
</p><p/><p>- </p><a href="http://jugad2.blogspot.in/p/about-vasudev-ram.html">Vasudev Ram - Online Python training and  programming</a> <p/><p>Dancing Bison Enterprises</p><p/><p/><b><a href="mailto:vasudevram@gmail.com?subject=Email%20me%20about%20your%20new%20products%20and%20services">Signup to hear about new products that I create.</a></b> <p/><a href="http://jugad2.blogspot.com/search/label/python">Posts about Python</a>  <a href="http://jugad2.blogspot.com/search/label/xtopdf">Posts about xtopdf</a> <p/><a href="http://www.dancingbison.com/contact.html">Contact Page</a> <p/>   
<p/>
</div>
</div></body></html>