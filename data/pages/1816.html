<html><body><div><article class="post">
        <p><a href="http://croppic.net/" target="_blank">Croppic</a> is a jquery plugin which handles uploading and manipulating images via AJAX. </p>
<p>This simple tutorial demonstrates the basics of using Croppic to upload and crop images with Django running on the backend. </p>
<p>The <a href="https://bitbucket.org/bdhammel/django-croppic.git" target="_blank">project code</a> can be found on my bitbucket account. It's simple, and between it and the Croppic documentation it should be fairly obvious to see how it's implemented. </p>
<p><br/></p>
<p><strong>Two comment's on this that should be made are:</strong></p>
<ul>
<li>There's an issue when using local host (perhaps sqlite3?). After an uploaded image is successfully cropped, the image loaded is the original one at full size. Despite this, the image saved to the database is correct and upon refreshing the page the picture will appear correct. This was not an issue when I moved to production and had <a href="http://aws.amazon.com/s3/" target="_blank">Amazon S3</a> handling the media files. </li>
<li>When using S3, a few adjustments needed to be made to <code>app.views.crop_pic</code>. Namely, I had to hard code in the amazon s3 media url <code>'https://&lt;bucket_name&gt;.s3.amazonaws.com/'</code> because <code>default_storage.base_url</code> didn't work. My solution for this was:  </li>
</ul>
<p/>

<div class="codehilite"><pre><span class="c"># get the base_url for test database or s3</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">media_url</span> <span class="o">=</span> <span class="n">default_storage</span><span class="o">.</span><span class="n">base_url</span> 
<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
    <span class="n">media_url</span> <span class="o">=</span> <span class="s">'https://&lt;bucket_name&gt;.s3.amazonaws.com/'</span>
</pre></div>
    </article>

    </div></body></html>