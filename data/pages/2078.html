<html><body><div><div class="entry-content">
<h4><strong>Build a Reddit Bot Series</strong></h4>
<p><a href="http://pythonforengineers.com/build-a-reddit-bot-part-1/">Part 1: Read posts from reddit</a></p>
<p><a href="http://pythonforengineers.com/build-a-reddit-bot-part-2-reply-to-posts/">Part 2: Reply to posts</a></p>
<p><a title="Build a Reddit Bot Part 3: Automate your bot" href="http://pythonforengineers.com/build-a-reddit-bot-part-3-automate-your-bot/">Part 3: Automate our Bot</a></p>
<p><strong>Very Important Note</strong>: Before we start, I have a request to make. I created a special Reddit for this series. Please please please stick to that. I don’t want you spamming other Reddits. The moderators may ban you, and Reddit may ban my user agent (please read part one if you don’t know what that means). So please stick to practising here:</p>
<p><a href="http://www.reddit.com/r/pythonforengineers">http://www.reddit.com/r/pythonforengineers</a></p>
<p>This is my own sub-Reddit, and you have full permission to play in that region.</p>
<p>Before we start, all the source code is <a href="https://github.com/shantnu/RedditBot/">here</a>.</p>
<p><strong>2 things our bot needs to do</strong></p>
<p>1.Search our subreddit for the words “I love Python” and reply to it. It can’t assume case sensitivity</p>
<ol>
<li>Keep a list of posts it has already replied to, so we are not replying to the same post again and again.</li>
</ol>
<p>We already looked at how to do (1) in Part 1. We’ll go over it briefly again, as this time we need to do one more thing: Login to Reddit.</p>
<p>To keep a track of posts we have replied to, we could use something like a database. To keep it simple, I’m going to use a simple text file.</p>
<p><strong>Login to Reddit with your bot</strong></p>
<p>If you look at the source code, I have a file called<em> config_skel.py</em>:</p>
<p/> 
<div id="crayon-56d5aa369d1d6706209168" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1d6706209168-1"><span class="crayon-v">REDDIT_USERNAME</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-h"> </span><span class="crayon-p">#YOUR USERNAME as string</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1d6706209168-2"><span class="crayon-v">REDDIT_PASS</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-h"> </span><span class="crayon-p"># YOUR PASSWORD as string</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>Fill in the values, and rename the file to<em> config_bot.py</em>. <strong>Do not check this file in! </strong>If you are using my Github code, I’ve added a rule so this file won’t be checked in, so you are okay.</p>
<p>Let’s look at the code now. Open the file <em>reply_post.py:</em></p>
<p/> 
<div id="crayon-56d5aa369d1e2526322154" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1e2526322154-1"><span class="crayon-e">import </span><span class="crayon-e">praw</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1e2526322154-2"><span class="crayon-e">import </span><span class="crayon-e">pdb</span></p><p class="crayon-line" id="crayon-56d5aa369d1e2526322154-3"><span class="crayon-e">import </span><span class="crayon-e">re</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1e2526322154-4"><span class="crayon-e">import </span><span class="crayon-e">os</span></p><p class="crayon-line" id="crayon-56d5aa369d1e2526322154-5"><span class="crayon-e">from </span><span class="crayon-e">config_bot </span><span class="crayon-e ">import *</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>We start off by importing everything we need. Notice the last line: We are importing the username and password we just created. We check that this file exists:</p>
<p/> 
<div id="crayon-56d5aa369d1e6878888799" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1e6878888799-1"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h">  </span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-v">path</span><span class="crayon-sy">.</span><span class="crayon-e">isfile</span><span class="crayon-sy">(</span><span class="crayon-s">"config_bot.py"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1e6878888799-2"><span class="crayon-h">    </span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"You must create a config file with your username and password."</span></p><p class="crayon-line" id="crayon-56d5aa369d1e6878888799-3"><span class="crayon-h">    </span><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"Please see config_skel.py"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1e6878888799-4"><span class="crayon-h">    </span><span class="crayon-e">exit</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>If you forgot to create this file, we print the message and exit.</p>
<p/> 
<div id="crayon-56d5aa369d1e9935730229" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1e9935730229-1"><span class="crayon-v">user_agent</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-s">"PyFor Eng bot 0.1"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1e9935730229-2"><span class="crayon-v">r</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">praw</span><span class="crayon-sy">.</span><span class="crayon-e">Reddit</span><span class="crayon-sy">(</span><span class="crayon-v">user_agent</span><span class="crayon-o">=</span><span class="crayon-v">user_agent</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p>This code is the same as before. We create a Reddit instance.</p>
<p> </p>
<p/> 
<div id="crayon-56d5aa369d1ec434922065" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1ec434922065-1"><span class="crayon-v">r</span><span class="crayon-sy">.</span><span class="crayon-e">login</span><span class="crayon-sy">(</span><span class="crayon-v">REDDIT_USERNAME</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">REDDIT_PASS</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p>We login using the credentials we saved earlier. If you aren’t logged in, you won’t be able to reply to posts.</p>
<p>As mentioned earlier, I am going to store the posts we have replied to in a text file called <em>posts_replied_to.txt.</em> Each Reddit post has its own unique id. I am storing each in a newline. An example from a live run:</p>
<p/> 
<div id="crayon-56d5aa369d1ef860355952" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1ef860355952-1"><span class="crayon-cn">2maolz</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1ef860355952-2"><span class="crayon-cn">2mans2</span></p><p class="crayon-line" id="crayon-56d5aa369d1ef860355952-3"><span class="crayon-cn">2m6th9</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1ef860355952-4"><span class="crayon-cn">2m6tfg</span></p><p class="crayon-line" id="crayon-56d5aa369d1ef860355952-5"><span class="crayon-cn">2mapgg</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>To start off, we will assume this file doesn’t exist:</p>
<p/> 
<div id="crayon-56d5aa369d1f2225892624" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1f2225892624-1"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-v">os</span><span class="crayon-sy">.</span><span class="crayon-v">path</span><span class="crayon-sy">.</span><span class="crayon-e">isfile</span><span class="crayon-sy">(</span><span class="crayon-s">"posts_replied_to.txt"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1f2225892624-2"><span class="crayon-h">    </span><span class="crayon-v">posts_replied_to</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>If the file doesn’t exist, which will be true the first time you run this program, create an empty list <em>posts_replied_to</em> .</p>
<p>If the file does exist, we open it. Let’s look at the code first. We will go over it line by line:</p>
<p/> 
<div id="crayon-56d5aa369d1f5945417521" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1f5945417521-1"><span class="crayon-st">else</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1f5945417521-2"><span class="crayon-h">    </span><span class="crayon-e">with </span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-s">"posts_replied_to.txt"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"r"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">f</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa369d1f5945417521-3"><span class="crayon-h">       </span><span class="crayon-v">posts_replied_to</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1f5945417521-4"><span class="crayon-h">       </span><span class="crayon-v">posts_replied_to</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">posts_replied_to</span><span class="crayon-sy">.</span><span class="crayon-e">split</span><span class="crayon-sy">(</span><span class="crayon-s">"\n"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa369d1f5945417521-5"><span class="crayon-h">       </span><span class="crayon-v">posts_replied_to</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">filter</span><span class="crayon-sy">(</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">posts_replied_to</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>The above code is called if you have run the code at least once. Let’s go over it:</p>
<p/> 
<div id="crayon-56d5aa369d1f9187976840" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1f9187976840-1"><span class="crayon-e">with </span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-s">"posts_replied_to.txt"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"r"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">f</span><span class="crayon-o">:</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>If you have never used Python’s <em>with</em> keyword, it’s a great feature. It opens the files for us, will close it, and all handle any errors. Saves us having to use try-catch blocks and handling errors ourself.</p>
<p/> 
<div id="crayon-56d5aa369d1fc265343658" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1fc265343658-1"><span class="crayon-h">    </span><span class="crayon-v">posts_replied_to</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-e">read</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d1fc265343658-2"><span class="crayon-h">    </span><span class="crayon-v">posts_replied_to</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">posts_replied_to</span><span class="crayon-sy">.</span><span class="crayon-e">split</span><span class="crayon-sy">(</span><span class="crayon-s">"\n"</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>We read our file, and split on newline. Remember our file contains the submission ids as newlines? Splitting on it will create a list with all the ids. Taking the example I used earlier, we will get:</p>
<p/> 
<div id="crayon-56d5aa369d1ff325477404" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d1ff325477404-1"><span class="crayon-sy">[</span><span class="crayon-s">'2maolz'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'2mans2'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'2m6th9'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'2m6tfg'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'2mapgg'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">''</span><span class="crayon-sy">]</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>However, the list might still contain some empty values. See the last value above, it is an empty element. We get rid of them:</p>
<p/> 
<div id="crayon-56d5aa369d202265159405" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d202265159405-1"><span class="crayon-h">     </span><span class="crayon-v">posts_replied_to</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">filter</span><span class="crayon-sy">(</span><span class="crayon-v">None</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">posts_replied_to</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>We now have a list <em>posts_replied_to</em> that is either empty or contains the submission ids from last runs.</p>
<p/> 
<div id="crayon-56d5aa369d205970753730" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d205970753730-1"><span class="crayon-v">subreddit</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">r</span><span class="crayon-sy">.</span><span class="crayon-e">get_subreddit</span><span class="crayon-sy">(</span><span class="crayon-s">'pythonforengineers'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d205970753730-2"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">submission </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">subreddit</span><span class="crayon-sy">.</span><span class="crayon-e">get_hot</span><span class="crayon-sy">(</span><span class="crayon-v">limit</span><span class="crayon-o">=</span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>This code is the same as before. We get the last 5 entries from our subreddit.</p>
<p/> 
<div id="crayon-56d5aa369d208688383426" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d208688383426-1"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">submission</span><span class="crayon-sy">.</span><span class="crayon-e">id </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">posts_replied_to</span><span class="crayon-o">:</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>Remember I said each Reddit post gets a unique id? It is stored in<em> submission.id</em>. We check if this <em>id</em> exists in our list of posts we have replied to.</p>
<p>If it doesn’t, we check if the post contains the words : “I love Python”:</p>
<p/> 
<div id="crayon-56d5aa369d20c470106920" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d20c470106920-1"><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-e">search</span><span class="crayon-sy">(</span><span class="crayon-s">"i love python"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">submission</span><span class="crayon-sy">.</span><span class="crayon-v">title</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">re</span><span class="crayon-sy">.</span><span class="crayon-v">IGNORECASE</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>I am using regular expressions for the search. This is because the post can be in capital or not, or a mix. If the words <em>i love python </em>were found, we need to reply to the post. This is how you do it:</p>
<p/> 
<div id="crayon-56d5aa369d20f068250582" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d20f068250582-1"><span class="crayon-v">submission</span><span class="crayon-sy">.</span><span class="crayon-e">add_comment</span><span class="crayon-sy">(</span><span class="crayon-s">"Botty bot says: Me too!!"</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>The <em>add_comment()</em> is the function that adds a comment to the current submission.</p>
<p/> 
<div id="crayon-56d5aa369d212506023363" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d212506023363-1"><span class="crayon-i">print</span><span class="crayon-h"> </span><span class="crayon-s">"Bot replying to : "</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">submission</span><span class="crayon-sy">.</span><span class="crayon-e">title</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d212506023363-2"><span class="crayon-v">posts_replied_to</span><span class="crayon-sy">.</span><span class="crayon-e">append</span><span class="crayon-sy">(</span><span class="crayon-v">submission</span><span class="crayon-sy">.</span><span class="crayon-v">id</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p> </p>
<p>The next important thing is to remember which posts we have replied to. So we add the <em>id</em> of the current post to our list <em>posts_replied_to</em>.</p>
<p>Finally, we write out our updated list back to the file:</p>
<p/> 
<div id="crayon-56d5aa369d215147794273" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">

<p class="crayon-info"/>
<p class="crayon-plain-wrap"/>
<div class="crayon-main">
<table class="crayon-table">
<tr class="crayon-row">
<td class="crayon-nums " data-settings="show">

</td>
<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa369d215147794273-1"><span class="crayon-e">with </span><span class="crayon-e">open</span><span class="crayon-sy">(</span><span class="crayon-s">"posts_replied_to.txt"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"w"</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-v">f</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa369d215147794273-2"><span class="crayon-h">    </span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">post_id </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">posts_replied_to</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa369d215147794273-3"><span class="crayon-h">    </span><span class="crayon-v">f</span><span class="crayon-sy">.</span><span class="crayon-e">write</span><span class="crayon-sy">(</span><span class="crayon-v">post_id</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">"\n"</span><span class="crayon-sy">)</span></p></div></td>
</tr>
</table>
</div>
</div>
 
<p/>
<p>And that’s it. Let’s give our bot a spin.</p>
<p>First, we post a message on our subreddit:</p>
<p><a href="http://i2.wp.com/pythonforengineers.com/wp-content/uploads/2014/11/Reddit1.jpg" class="grouped_elements" rel="tc-fancybox-group229"><img class="aligncenter wp-image-245 " src="//i2.wp.com/pythonforengineers.com/wp-content/uploads/2014/11/Reddit1.jpg?resize=753%2C451" alt="Reddit1" data-recalc-dims="1"/></a></p>
<p>We then run our Python script. Notice the Bot figures out the latest post, and only replies to that one:</p>
<p><a href="http://i2.wp.com/pythonforengineers.com/wp-content/uploads/2014/11/Reddit2.jpg" class="grouped_elements" rel="tc-fancybox-group229"><img class="aligncenter size-full wp-image-246" src="//i2.wp.com/pythonforengineers.com/wp-content/uploads/2014/11/Reddit2.jpg?resize=458%2C117" alt="Reddit2" data-recalc-dims="1"/></a></p>
<p>And then we reload our page to check that the bot has replied.</p>
<p><a href="http://i2.wp.com/pythonforengineers.com/wp-content/uploads/2014/11/Reddit3.jpg" class="grouped_elements" rel="tc-fancybox-group229"><img class="aligncenter  wp-image-244" src="//i2.wp.com/pythonforengineers.com/wp-content/uploads/2014/11/Reddit3.jpg?resize=755%2C455" alt="Reddit3" data-recalc-dims="1"/></a></p>
<p><strong>Give it a try.</strong></p>
<p>Change the bot message to something unique, so we know whose bot is running (otherwise we’ll have dozens of similar messages, with no idea who posted what). If you can’t think of anything unique, just attach your Reddit username.</p>
<p><a title="Build a Reddit Bot Part 3: Automate your bot" href="http://pythonforengineers.com/build-a-reddit-bot-part-3-automate-your-bot/">Next Part</a></p>
<p><strong>Hungry for more? Why not learn how to build a <a href="http://pythonforengineers.com/build-a-twitter-analytics-app-using-python/">Twitter Analytics app</a>?</strong></p>
<p> </p><p>
PS: Want a </p><strong>free</strong><p> 1+ hour </p><strong>video</strong> <strong>course</strong><p>,</p><em> Introduction to Web Scraping and Data Analysis</em><p>?
Also get a </p><strong>free</strong><p> mini-book,</p><em> Python: From Apprentice to Master.</em>

 
<em>I will never spam you. Unsubscribe anytime.
</em>
</div>
</div></body></html>