<html><body><div><div class="section" id="unicode-text-string-literals">
<h3>Unicode (text) string literals<a class="headerlink" href="#unicode-text-string-literals" title="Permalink to this headline">¶</a></h3>
<p>If you are upgrading an existing Python 2 codebase, it may be preferable
to mark up all string literals as unicode explicitly with <code class="docutils literal"><span class="pre">u</span></code>
prefixes:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># Python 2 only</span>
<span class="n">s1</span> <span class="o">=</span> <span class="s">'The Zen of Python'</span>
<span class="n">s2</span> <span class="o">=</span> <span class="s">u'きたないのよりきれいな方がいい</span><span class="se">\n</span><span class="s">'</span>

<span class="c"># Python 2 and 3</span>
<span class="n">s1</span> <span class="o">=</span> <span class="s">u'The Zen of Python'</span>
<span class="n">s2</span> <span class="o">=</span> <span class="s">u'きたないのよりきれいな方がいい</span><span class="se">\n</span><span class="s">'</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">futurize</span></code> and <code class="docutils literal"><span class="pre">python-modernize</span></code> tools do not currently offer
an option to do this automatically.</p>
<p>If you are writing code for a new project or new codebase, you can use
this idiom to make all string literals in a module unicode strings:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># Python 2 and 3</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>    <span class="c"># at top of module</span>

<span class="n">s1</span> <span class="o">=</span> <span class="s">'The Zen of Python'</span>
<span class="n">s2</span> <span class="o">=</span> <span class="s">'きたないのよりきれいな方がいい</span><span class="se">\n</span><span class="s">'</span>
</pre></div>
</div>
<p>See <a class="reference external" href="http://python-future.org/unicode_literals.html">http://python-future.org/unicode_literals.html</a> for more discussion
on which style to use.</p>
</div>
<div class="section" id="byte-string-literals">
<h3>Byte-string literals<a class="headerlink" href="#byte-string-literals" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># Python 2 only</span>
<span class="n">s</span> <span class="o">=</span> <span class="s">'This must be a byte-string'</span>

<span class="c"># Python 2 and 3</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">b</span><span class="s">'This must be a byte-string'</span>
</pre></div>
</div>
<p>To loop over a byte-string with possible high-bit characters, obtaining
each character as a byte-string of length 1:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># Python 2 only:</span>
<span class="k">for</span> <span class="n">bytechar</span> <span class="ow">in</span> <span class="s">'byte-string with high-bit chars like </span><span class="se">\xf9</span><span class="s">'</span><span class="p">:</span>
    <span class="o">...</span>

<span class="c"># Python 3 only:</span>
<span class="k">for</span> <span class="n">myint</span> <span class="ow">in</span> <span class="n">b</span><span class="s">'byte-string with high-bit chars like </span><span class="se">\xf9</span><span class="s">'</span><span class="p">:</span>
    <span class="n">bytechar</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">myint</span><span class="p">])</span>

<span class="c"># Python 2 and 3:</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="nb">bytes</span>
<span class="k">for</span> <span class="n">myint</span> <span class="ow">in</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">b</span><span class="s">'byte-string with high-bit chars like </span><span class="se">\xf9</span><span class="s">'</span><span class="p">):</span>
    <span class="n">bytechar</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">([</span><span class="n">myint</span><span class="p">])</span>
</pre></div>
</div>
<p>As an alternative, <code class="docutils literal"><span class="pre">chr()</span></code> and <code class="docutils literal"><span class="pre">.encode('latin-1')</span></code> can be used to
convert an int into a 1-char byte string:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># Python 3 only:</span>
<span class="k">for</span> <span class="n">myint</span> <span class="ow">in</span> <span class="n">b</span><span class="s">'byte-string with high-bit chars like </span><span class="se">\xf9</span><span class="s">'</span><span class="p">:</span>
    <span class="n">char</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">myint</span><span class="p">)</span>    <span class="c"># returns a unicode string</span>
    <span class="n">bytechar</span> <span class="o">=</span> <span class="n">char</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'latin-1'</span><span class="p">)</span>

<span class="c"># Python 2 and 3:</span>
<span class="kn">from</span> <span class="nn">builtins</span> <span class="kn">import</span> <span class="nb">bytes</span><span class="p">,</span> <span class="nb">chr</span>
<span class="k">for</span> <span class="n">myint</span> <span class="ow">in</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">b</span><span class="s">'byte-string with high-bit chars like </span><span class="se">\xf9</span><span class="s">'</span><span class="p">):</span>
    <span class="n">char</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">myint</span><span class="p">)</span>    <span class="c"># returns a unicode string</span>
    <span class="n">bytechar</span> <span class="o">=</span> <span class="n">char</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'latin-1'</span><span class="p">)</span>    <span class="c"># forces returning a byte str</span>
</pre></div>
</div>
</div>
</div></body></html>