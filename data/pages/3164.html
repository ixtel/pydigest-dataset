<html><body><div><article class="markdown-body entry-content" itemprop="text"><p>This <strong>face-boxer.py</strong> script is more-or-less the same code that you'll find in the OpenCV tutorial: <a href="http://docs.opencv.org/trunk/doc/py_tutorials/py_objdetect/py_face_detection/py_face_detection.html">Face Detection using Haar Cascades</a>. For another variation, with more explanation, check out <a href="https://realpython.com/blog/python/face-recognition-with-python/">RealPython's tutorial</a>. </p>

<h2><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Usage</h2>

<p>The <code>face-boxer.py</code> script is designed to be run from the command-line. It has <strong>two</strong> required arugments:</p>

<ol>
<li>The path to a XML file containing a <a href="http://en.wikipedia.org/wiki/Haar-like_features">Haar-cascade</a> of visual features. In this example, it will be the <a href="http://docs.opencv.org/trunk/_images/haar.png">features that make up a face</a>.</li>
<li>The path to an image file that you want to perform face-detection on. You can pass in more than one image file as space-separated arguments.</li>
</ol>

<p>The <code>face-boxer.py</code> script will then read each image file and perform this routine: For every detected object in a given image, the object is highlighted in a light-blue box, and this altered image is <strong>saved</strong> to:</p>

<pre><code>   /path/to/the-original-image--faces.jpg
</code></pre>

<h3><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h3>

<p>If you are a Stanford student taking <a href="http://compciv.org">CompCiv</a>, you should be able to copy the <code>face-boxer.py</code> script and follow the instructions without a problem on <strong>corn.stanford.edu</strong>. The script has been tested on Python 2.7.8 and OpenCV 2.4x</p>

<h3><a id="user-content-download-the-haar-cascade-file" class="anchor" href="#download-the-haar-cascade-file" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Download the haar cascade file</h3>

<p>You'll need the XML file that contains the data necessary for OpenCV to do its work. The file below contains the pattern data for frontal-aspects of a face:</p>

<div class="highlight highlight-source-shell"><pre>curl -so haarcascade_frontalface_default.xml http://stash.compciv.org/opencv/haarcascades/haarcascade_frontalface_default.xml</pre></div>

<p>If detecting faces is boring to you, you can <a href="http://stash.compciv.org.s3.amazonaws.com/opencv/haarcascades.zip">download a zipped archive of all the Haar-cascade files from here</a>, which is simply a mirror of <a href="https://github.com/Itseez/opencv/tree/master/data/haarcascades">what's in the OpenCV repo</a>. Object patterns include: eyes, eyes with glasses, full (human) bodies, lower bodies, license plates, smiles, and cat faces.</p>

<h3><a id="user-content-download-the-photos" class="anchor" href="#download-the-photos" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Download the photos</h3>

<div class="highlight highlight-source-shell"><pre><span class="pl-c"># Download some images</span>
curl -so obama-phone.jpg https://farm9.staticflickr.com/8604/15891607122_794b16aff7_z_d.jpg
curl -so obama-3d.jpg https://farm5.staticflickr.com/4054/4291192697_2ba403a502_b_d.jpg</pre></div>

<h3><a id="user-content-call-the-script" class="anchor" href="#call-the-script" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Call the script</h3>

<div class="highlight highlight-source-shell"><pre>python face-boxer.py haarcascade_frontalface_default.xml obama-phone.jpg obama-3d.jpg</pre></div>

<h3><a id="user-content-out-of-the-box-results" class="anchor" href="#out-of-the-box-results" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Out-of-the-box results</h3>

<p>(needs some tweaking obviously)</p>

<p><a href="https://camo.githubusercontent.com/f22fdc7ddd141940ab57bcc4534aa8c5dcb8950a/687474703a2f2f7765622e7374616e666f72642e6564752f25374564756e2f746573742f6f62616d612d70686f6e652e6a70672d66616365732e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/f22fdc7ddd141940ab57bcc4534aa8c5dcb8950a/687474703a2f2f7765622e7374616e666f72642e6564752f25374564756e2f746573742f6f62616d612d70686f6e652e6a70672d66616365732e6a7067" alt="img" data-canonical-src="http://web.stanford.edu/%7Edun/test/obama-phone.jpg-faces.jpg"/></a></p>

<p><a href="https://camo.githubusercontent.com/12012ce956812e457aa28826fa3983127dfa4380/687474703a2f2f7765622e7374616e666f72642e6564752f25374564756e2f746573742f6f62616d612d33642e6a70672d66616365732e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/12012ce956812e457aa28826fa3983127dfa4380/687474703a2f2f7765622e7374616e666f72642e6564752f25374564756e2f746573742f6f62616d612d33642e6a70672d66616365732e6a7067" alt="img" data-canonical-src="http://web.stanford.edu/%7Edun/test/obama-3d.jpg-faces.jpg"/></a></p>

<h3><a id="user-content-with-a-webcam" class="anchor" href="#with-a-webcam" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>With a webcam</h3>

<p>If you're interested in seeing the face-detection code work via your own webcam, check <a href="https://realpython.com/blog/python/face-detection-in-python-using-a-webcam/">out this RealPython tutorial</a>. Using your own webcam means you have to have Python and OpenCV installed on your own computer -- <a href="https://jjyap.wordpress.com/2014/05/24/installing-opencv-2-4-9-on-mac-osx-with-python-support/">Mac users, check out this tutorial</a></p>
</article>
  </div></body></html>