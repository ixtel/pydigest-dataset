<html><body><div><div class="entry-content" itemprop="articleBody">
    
        <p>The blog has been relatively quiet recently due to my many irons and fires and
all that, but I did want to take a second and post a simple bit of code which
really appeals to me. It solves a common problem in a reasonably elegant way and
is straightforward enough for Python programmers of any level to use.</p>
<p>The best way to show it is to show an example of the type of problem it solves.
Say we have a string and want to make sure it ends with one of four sub-strings.
Here is the usual method of checking this:</p>
<div class="codehilite"><pre><span class="k">if</span> <span class="n">needle</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">'ly'</span><span class="p">)</span> <span class="ow">or</span> <span class="n">needle</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">'ed'</span><span class="p">)</span> <span class="ow">or</span> 
    <span class="n">needle</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">'ing'</span><span class="p">)</span> <span class="ow">or</span> <span class="n">needle</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">'ers'</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Is valid'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Invalid'</span><span class="p">)</span>
</pre></div>


<p>Ugly, right? If we were just checking if the string <code>needle</code> <em>was equal to</em> one
of those values we could use this common idiom:</p>
<div class="codehilite"><pre><span class="k">if</span> <span class="n">needle</span> <span class="ow">in</span> <span class="p">(</span><span class="s">'ly'</span><span class="p">,</span> <span class="s">'ed'</span><span class="p">,</span> <span class="s">'ing'</span><span class="p">,</span> <span class="s">'ers'</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Is valid'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Invalid'</span><span class="p">)</span>
</pre></div>


<p>Alas, we can't use <code>in</code> when a function call like <code>endswith</code> is involved. When
we say exactly what we want to check aloud, however, the more elegant solution
becomes obvious:</p>
<div class="codehilite"><pre><span class="n">I</span> <span class="n">want</span> <span class="n">to</span> <span class="n">check</span> <span class="k">if</span> <span class="n">the</span> <span class="n">string</span> <span class="n">ends</span> <span class="n">with</span> <span class="n">any</span> <span class="n">of</span> <span class="n">the</span> <span class="n">given</span> <span class="n">sub</span><span class="o">-</span><span class="n">strings</span>
</pre></div>


<p>The key word in there is <code>any</code>, which happens to be a Python built-in. Instead
of the overly clunky method of checking <code>endswith</code> used above, why not take a
page from the idiomatic set-membership check:</p>
<div class="codehilite"><pre><span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">needle</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">(</span><span class="s">'ly'</span><span class="p">,</span> <span class="s">'ed'</span><span class="p">,</span> <span class="s">'ing'</span><span class="p">,</span> <span class="s">'ers'</span><span class="p">)]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Is valid'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'Invalid'</span><span class="p">)</span>
</pre></div>


<p>Now, some readers might be disappointed here, having expected a far more
earth-shattering revelation. And that's OK. I'm sure a large portion of you
already use a method similar to this when faced with the same situation. The
interesting bit was that I was able to <em>reason it out</em> given my knowledge of
existing idioms.</p>
<p>I didn't read it in someone else's blog post or while reading some library's
code, I reasoned it out on my own. Now of course it existed before I discovered
it and is old hat for many, but the point is that I discovered it without being
shown it. And I was able to do so because of my knowledge of Python idioms.</p>
<p>So that's that. Stay tuned for a number of posts I have in the works (some more
controversial than others) in addition to the videos for the Kickstarter
campaign. I'm still giving away free books for women in STEM, so email me if
that fits your description and you'd like a copy of <em>Writing Idiomatic Python</em>.</p>
        <small>Posted on <time datetime="2014-05-28 15:09:00" pubdate="" data-updated="true" itemprop="datePublished">May 28, 2014</time> by <span itemprop="author"> Jeff Knupp</span></small>
    <p class="meta">
    <a href="/blog/2014/05/06/automatically-generate-restful-endpoints-from-your-flasksqlalchemy-models" title="Previous Post: Automatically Generate RESTful Endpoints From Your Flask-SQLAlchemy Models">Â« Previous Post: Automatically Generate RESTful Endpoints From Your Flask-SQLAlchemy Models</a>
    </p>
      

</div>
</div></body></html>