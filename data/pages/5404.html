<html><body><div><div class="grid-14 pl-15 pr-15 pb-15 b-400 x-center blog-content">
        <p dir="ltr">In any web project whether it is a static or a dynamic one of the main headache for developers is to compress static files and serve them without affecting the page load time. There are compressors like YUIcompressor, Yuglify and many.</p>
<p>Today backend languages like Python, nodejs, Ruby etc.. provide frameworks or packages to make this compression happen. We have <strong>Grunt</strong> and <strong>Glup</strong> task runners from <strong>nodejs</strong>, <strong>Sprocket</strong> and <strong>Juicer</strong> from <strong>Ruby</strong> for compression. For more check this <a href="http://robertnyman.com/2010/01/19/tools-for-concatenating-and-minifying-css-and-javascript-files-in-different-development-environments/" class="under">link</a></p>
<p><span>In Django, there are tools for compression and minification of your static code.</span></p>
<p><span>Let's know about them and build an app using them.</span></p>
<p><span>1. </span><a href="http://django-compressor.readthedocs.org/en/latest/" class="under">Django Compressor</a></p>
<p dir="ltr">2. <a href="http://webassets.readthedocs.org/en/latest/" class="under">Webassets</a></p>
<h3><strong><span>Django Compressor:</span></strong></h3>
<p>The main use of Django Compressor is to compress linked and inline JavaScript and CSS into a single cached file.</p>
<p>Let's use this one to build our app.</p>
<h4 dir="ltr"><strong>step 1:</strong></h4>
<p><span>Install Django Compressor</span></p>
<pre class="python"><span>$ pip install django-compressor</span></pre>
<p><span>Its will download and install dependence, if you have YUI Compressor or yUglify compressor, or else install cssmin and jsmin.</span></p>
<pre class="python"><span>$ pip install cssmin &amp;&amp; pip install jsmin</span></pre>
<p/>
<h4><strong><span>step 2:</span></strong></h4>
<p dir="ltr">Add 'compressor' to your INSTALLED_APPS setting:</p>
<pre class="python">INSTALLED_APPS = (
        # other apps
        "compressor",
)</pre>
<p><span>add 'compressor.finders.CompressorFinder' to your STATICFILES_FINDERS</span></p>
<pre class="python">STATICFILES_FINDERS = (
        # other finders..
        'compressor.finders.CompressorFinder',
)</pre>
<p><span>In settings.py file enable COMPRESS_ENABLED, it is better keep it at the end of the file. If it is not enabled it will render the input files without any compression.</span></p>
<pre class="python">COMPRESS_ENABLED = True</pre>
<p>Also add COMPRESS_CSS_FILTERS and COMPRESS_JS_FILTERS to settings.py</p>
<pre class="python">COMPRESS_CSS_FILTERS = ["compressor.filters.cssmin.CSSMinFilter"]
COMPRESS_JS_FILTERS = ["compressor.filters.jsmin.JSMinFilter"]</pre>
<p><span>altogether,</span></p>
<pre class="python">if not COMPRESS_ENABLED:
       COMPRESS_ENABLED = True
       COMPRESS_CSS_FILTERS = ["compressor.filters.cssmin.CSSMinFilter"]
       COMPRESS_JS_FILTERS = ["compressor.filters.jsmin.JSMinFilter"]</pre>
<p><span>if you want to use YUglify, you need to install YUglify first</span></p>
<p><span>if npm is present</span></p>
<pre class="bash"><span>$ sudo npm install -g yuglify</span></pre>
<p><span>if npm is not present</span></p>
<pre class="bash"><span>$ sudo apt-get install npm &amp;&amp; sudo npm install -g yuglify</span></pre>
<p><span>and add</span></p>
<pre class="python">COMPRESS_CSS_FILTERS = ["compressor.filters.yuglify.YUglifyCSSFilter"]
COMPRESS_JS_FILTERS = ["compressor.filters.yuglify.YUglifyJSFilter"]</pre>
<p/>
<h4><strong><span>step 3:</span></strong></h4>
<p><span>In your templates, use</span></p>
<pre class="django">{% load static compress %}
{% compress css %}
        &lt;link rel="stylesheet" href="{% static "css/base.css" %}"&gt;
        &lt;link rel="stylesheet" href="{% static "css/style.css" %}"&gt;
{% endcompress %}
{% compress js %}
        &lt;script type="text/javascript" src="{% static "js/main.js"%}"&gt;&lt;/script&gt;
{% endcompress %}</pre>
<p><span>For more information on this package check the </span><a href="http://django-compressor.readthedocs.org/en/latest/" class="under">documentation</a><span>. Check example for this app </span><a href="https://github.com/yashutoro/django-compressor-example" class="under">here</a></p>
<h3><strong><span>Webassets:</span></strong></h3>
<p dir="ltr">Webassets supports multiple python frameworks, for Django the supported version is django-assets. It is simpler than djang-compressor.</p>
<p dir="ltr"><span>Let build another app:</span></p>
<h4><strong><span>Step 1:</span></strong></h4>
<p dir="ltr">Install Django Assets</p>
<pre class="python"><span>$ pip install django-assets</span></pre>
<p/>
<h4><strong><span>step 2:</span></strong></h4>
<p dir="ltr">Add 'django-assets' to your INSTALLED_APPS setting:</p>
<pre class="python">INSTALLED_APPS = (
        # other apps
        "django-assets",
)</pre>
<p><span>add 'django_assets.finders.AssetsFinder' to your STATICFILES_FINDERS</span></p>
<pre class="python">STATICFILES_FINDERS = (
        # other finders..
        'django_assets.finders.AssetsFinder',
)</pre>
<p/>
<h4><strong><span>step 3:</span></strong></h4>
<p dir="ltr">For Assets to render we need to include assets.py in the project folder, when the application starts django-assets will automatically pick the assets.py file for rendering. In the file, we have to include your assets path of JS and CSS.</p>
<pre class="python">from django_assets import Bundle, register
       js = Bundle('js/main.js', filters='jsmin', output='gen/packed.js')
       register('js_all', js)
       css = Bundle('css/base.css', 'css/style/style.css', filters='cssmin', output='gen/packed.css')
       register('css_all', css)</pre>
<p dir="ltr">or we can add assets.py file to application by specifying an ASSETS_MODULES variable in settings.py</p>
<pre class="python">ASSETS_MODULES = [
       'module.assets'
]  </pre>
<p><span>it supports various filter for that check the <a href="http://webassets.readthedocs.org/en/latest/builtin_filters.html" target="_blank" class="under">documentation</a></span></p>
<p><span>or there is another best way, directly we can configure and include in templates</span></p>
<pre class="xml">{% load static assets %}
{% assets filters='cssmin', output='gen/packed.%(version)s.css', 'css/base.css', 'css/style/style.css' %}
        &lt;link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}"&gt;
{% endassets %}
{% assets filters='jsmin', output='gen/packed.%(version)s.js', 'js/main.js' %}
        &lt;script type="text/javascript" src="{{ ASSET_URL }}"&gt;&lt;/script&gt;
{% endassets %}</pre>
<p><span>The '%(version)s' is used for Cache Busting.</span></p>
<p><span>For more information on this package check the </span><a href="http://webassets.readthedocs.org/en/latest/" class="under">documentation</a><span> . Checkout example </span><a href="https://github.com/yashutoro/webassets-example" class="under">here</a></p>
    </div>
    
    
    

    
    </div></body></html>