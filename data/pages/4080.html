<html><body><div><div class="col-md-8">
          <h1>Get a List of Keys From a Dictionary in Both Python 2 and Python 3</h1>
<p>It was mentioned in an <a href="/2015/03/17/represent-file-structure-as-yaml-with-python.html">earlier post</a> that there is a difference in how the <code class="highlighter-rouge">keys()</code> operation behaves between Python 2 and Python 3. If you’re adapting your Python 2 code to Python 3 (which you should), it will throw a <code class="highlighter-rouge">TypeError</code> when you try to operate on <code class="highlighter-rouge">keys()</code> like a list. So, if you depend on getting a list returned from <code class="highlighter-rouge">keys()</code>, here’s how to make it work for both Python 2 and Python 3.</p>

<p>In Python 2, simply calling <code class="highlighter-rouge">keys()</code> on a dictionary object will return what you expect:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>python
<span class="gp">&gt;&gt;&gt; </span>foo <span class="o">=</span> <span class="o">{</span> <span class="s1">'bar'</span>: <span class="s2">"hello"</span>, <span class="s1">'baz'</span>: <span class="s2">"world"</span> <span class="o">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="o">(</span>foo.keys<span class="o">())</span>
&lt;<span class="nb">type</span> <span class="s1">'list'</span>&gt;
<span class="gp">&gt;&gt;&gt; </span>foo.keys<span class="o">()</span>
<span class="o">[</span><span class="s1">'baz'</span>, <span class="s1">'bar'</span><span class="o">]</span>
<span class="gp">&gt;&gt;&gt; </span>foo.keys<span class="o">()[</span>0]
<span class="s1">'baz'</span></code></pre></figure>

<p>That’s great, however, in Python 3, <code class="highlighter-rouge">keys()</code> no longer returns a list, but a <a href="//docs.python.org/3/library/stdtypes.html#dictionary-view-objects">view object</a>:</p>

<blockquote>
  <p>The objects returned by <code class="highlighter-rouge">dict.keys()</code>, <code class="highlighter-rouge">dict.values()</code> and <code class="highlighter-rouge">dict.items()</code> are view objects. They provide a dynamic view on the dictionary’s entries, which means that when the dictionary changes, the view reflects these changes.</p>
</blockquote>

<p>The <code class="highlighter-rouge">dict_keys</code> object is an iterator and looks a lot more like a <code class="highlighter-rouge">set</code> than a <code class="highlighter-rouge">list</code>. So using the same call in Python 3 would produce this result:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>python3
<span class="gp">&gt;&gt;&gt; </span>foo <span class="o">=</span> <span class="o">{</span> <span class="s1">'bar'</span>: <span class="s2">"hello"</span>, <span class="s1">'baz'</span>: <span class="s2">"world"</span> <span class="o">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="o">(</span>foo.keys<span class="o">())</span>
&lt;class <span class="s1">'dict_keys'</span>&gt;
<span class="gp">&gt;&gt;&gt; </span>foo.keys<span class="o">()</span>
dict_keys<span class="o">([</span><span class="s1">'baz'</span>, <span class="s1">'bar'</span><span class="o">])</span>
<span class="gp">&gt;&gt;&gt; </span>foo.keys<span class="o">()[</span>0]
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
File <span class="s2">"&lt;stdin&gt;"</span>, line 1, <span class="k">in</span> &lt;module&gt;
TypeError: <span class="s1">'dict_keys'</span> object does not support indexing</code></pre></figure>

<p>The <code class="highlighter-rouge">TypeError</code> can be avoided and compatibility can be maintained by simply converting the <code class="highlighter-rouge">dict_keys</code> object into a list which can then be indexed as normal in both Python 2 and Python 3:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>python3
<span class="gp">&gt;&gt;&gt; </span>foo <span class="o">=</span> <span class="o">{</span> <span class="s1">'bar'</span>: <span class="s2">"hello"</span>, <span class="s1">'baz'</span>: <span class="s2">"world"</span> <span class="o">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="o">(</span>list<span class="o">(</span>foo.keys<span class="o">()))</span>
&lt;class <span class="s1">'list'</span>&gt;
<span class="gp">&gt;&gt;&gt; </span>list<span class="o">(</span>foo.keys<span class="o">())</span>
<span class="o">[</span><span class="s1">'baz'</span>, <span class="s1">'bar'</span><span class="o">]</span>
<span class="gp">&gt;&gt;&gt; </span>list<span class="o">(</span>foo.keys<span class="o">())[</span>0]
<span class="s1">'baz'</span></code></pre></figure>

<p>And just for good measure, here it is in Python 2:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>python
<span class="gp">&gt;&gt;&gt; </span>foo <span class="o">=</span> <span class="o">{</span> <span class="s1">'bar'</span>: <span class="s2">"hello"</span>, <span class="s1">'baz'</span>: <span class="s2">"world"</span> <span class="o">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="o">(</span>list<span class="o">(</span>foo.keys<span class="o">()))</span>
&lt;class <span class="s1">'list'</span>&gt;
<span class="gp">&gt;&gt;&gt; </span>list<span class="o">(</span>foo.keys<span class="o">())</span>
<span class="o">[</span><span class="s1">'baz'</span>, <span class="s1">'bar'</span><span class="o">]</span>
<span class="gp">&gt;&gt;&gt; </span>list<span class="o">(</span>foo.keys<span class="o">())[</span>0]
<span class="s1">'baz'</span></code></pre></figure>


<hr/>

<ins class="adsbygoogle" data-ad-client="ca-pub-8244598697443713" data-ad-slot="9961827581" data-ad-format="auto"/>

<p id="disqus_thread"/>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        </div>
        </div></body></html>