<html><body><div><div id="django-crudbuilder">
<h2>django-crudbuilder</h2>
<p>Generic CRUD implementation in Django which uses django tables2 to list objects.</p>

<div id="features">
<h3>Features:</h3>
<ul>
<li>Generates class based views for CRUD</li>
<li>Uses django-tables2 to display objects in ListView</li>
<li>Allows custom forms/tables as additional arguments</li>
<li>Context provides additional template variables APP_LABEL and MODEL for all CRUD templates</li>
<li>Enable/disable login required option for CRUD views</li>
<li>Enable/disable permission required option for CRUD views</li>
<li>All the generated views/tables/forms/url are extendable.</li>
<li>post_create and post_update signals to handle specific actions in Create and Update views</li>
<li>Add your own custom templates for List/Create/Detail/Update/Delete views</li>
<li>Separate CREATE and UPDATE forms</li>
<li>Define your own custom queryset for list view</li>
</ul>
</div>
<div id="prerequisites">
<h3>Prerequisites</h3>
<ul>
<li>Django 1.7+</li>
<li>Python 2.7+, 3.2+</li>
<li>Django Tables2</li>
</ul>
</div>
<div id="installation">
<h3>Installation</h3>
<pre><span class="n">pip</span> <span class="n">install</span> <span class="n">django</span><span class="o">-</span><span class="n">crudbuilder</span>
</pre>
</div>
<div id="usage">
<h3>Usage</h3>
<p><strong>Add “crudbuilder” to INSTALLED_APPS</strong></p>
<pre><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="o">...</span>
        <span class="s1">'django_tables2'</span><span class="p">,</span>
        <span class="s1">'crudbuilder'</span>
<span class="p">}</span>

<span class="n">LOGIN_REQUIRED_FOR_CRUD</span> <span class="o">=</span> <span class="bp">True</span><span class="o">/</span><span class="bp">False</span>
<span class="n">PERMISSION_REQUIRED_FOR_CRUD</span> <span class="o">=</span> <span class="bp">True</span><span class="o">/</span><span class="bp">False</span>
</pre>
<p><strong>Create models in yourapp/models.py</strong></p>
<pre><span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
        <span class="sd">""" an actual singular human being """</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">max_length</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">EmailField</span><span class="p">()</span>
        <span class="n">created_at</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="n">auto_now</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="n">created_by</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</pre>
<p><strong>Create CRUD for Person model in yourapp/crud.py</strong></p>
<pre><span class="kn">from</span> <span class="nn">crudbuilder.abstract</span> <span class="kn">import</span> <span class="n">BaseCrudBuilder</span>
<span class="kn">from</span> <span class="nn">yourapp.models</span> <span class="kn">import</span> <span class="n">Person</span>

<span class="k">class</span> <span class="nc">PersonCrud</span><span class="p">(</span><span class="n">BaseCrudBuilder</span><span class="p">):</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Person</span>
        <span class="n">search_feilds</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'name'</span><span class="p">]</span>
        <span class="n">tables2_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'name'</span><span class="p">,</span> <span class="s1">'email'</span><span class="p">)</span>
        <span class="n">tables2_css_class</span> <span class="o">=</span> <span class="s2">"table table-bordered table-condensed"</span>
        <span class="n">tables2_pagination</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># default is 10</span>
        <span class="n">modelform_excludes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'created_by'</span><span class="p">,</span> <span class="s1">'updated_by'</span><span class="p">]</span>
        <span class="n">login_required</span><span class="o">=</span><span class="bp">True</span>
        <span class="n">permission_required</span><span class="o">=</span><span class="bp">True</span>
        <span class="c1"># permissions = {</span>
        <span class="c1">#   'list': 'example.person_list',</span>
        <span class="c1">#       'create': 'example.person_create'</span>
        <span class="c1"># }</span>
</pre>
<p><strong>Open yourapp/urls.py and add the following</strong></p>
<pre><span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">url</span><span class="p">(</span><span class="s1">r'^admin/'</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
        <span class="n">url</span><span class="p">(</span><span class="s1">r'^crud/'</span><span class="p">,</span>  <span class="n">include</span><span class="p">(</span><span class="s1">'crudbuilder.urls'</span><span class="p">)),</span>
<span class="p">]</span>
</pre>
<p><strong>Now you can access the below CRUD URLS</strong></p>
<pre><span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">crud</span><span class="o">/</span><span class="n">yourappname</span><span class="o">/</span><span class="n">yourmodelname</span>
<span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">crud</span><span class="o">/</span><span class="n">yourappname</span><span class="o">/</span><span class="n">yourmodelname</span><span class="o">/</span><span class="n">create</span><span class="o">/</span>
<span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">crud</span><span class="o">/</span><span class="n">yourappname</span><span class="o">/</span><span class="n">yourmodelname</span><span class="o">/&lt;</span><span class="n">pk</span><span class="o">&gt;/</span><span class="n">detail</span><span class="o">/</span>
<span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">crud</span><span class="o">/</span><span class="n">yourappname</span><span class="o">/</span><span class="n">yourmodelname</span><span class="o">/&lt;</span><span class="n">pk</span><span class="o">&gt;/</span><span class="n">update</span><span class="o">/</span>
<span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">8000</span><span class="o">/</span><span class="n">crud</span><span class="o">/</span><span class="n">yourappname</span><span class="o">/</span><span class="n">yourmodelname</span><span class="o">/&lt;</span><span class="n">pk</span><span class="o">&gt;/</span><span class="n">delete</span><span class="o">/</span>
</pre>
</div>
<div id="login-required">
<h3>LOGIN REQUIRED</h3>
<p>To enable global login required for all the models CRUD views, add the following to settings file</p>
<pre><span class="n">LOGIN_REQUIRED_FOR_CRUD</span> <span class="o">=</span> <span class="bp">True</span>
</pre>
<p>If you want to enable login required only for specific model crud, then you need to add following to crud class</p>
<blockquote>
<pre><span class="c1"># myapp/crud.py</span>
<span class="n">login_required</span> <span class="o">=</span> <span class="bp">True</span>
</pre>
</blockquote>
</div>
<div id="permission-required">
<h3>PERMISSION REQUIRED</h3>
<p>To enable global permission required for all the models CRUD views, add the following to settings file</p>
<pre><span class="n">PERMISSION_REQUIRED_FOR_CRUD</span> <span class="o">=</span> <span class="bp">True</span>
</pre>
<p>If you want to enable permission required only for specific model crud, then you need to add following to crud class</p>
<blockquote>
<pre><span class="c1"># myapp/crud.py</span>
<span class="n">permission_required</span> <span class="o">=</span> <span class="bp">True</span>
</pre>
</blockquote>
<p>By enabling either of above flag, crudbuilder by default checks for following permissions:</p>
<pre><span class="o">-</span> <span class="n">For</span> <span class="n">ListView</span>   <span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">app_name</span><span class="o">&gt;.&lt;</span><span class="n">your</span> <span class="n">model</span><span class="o">&gt;</span><span class="n">_list</span>
<span class="o">-</span> <span class="n">For</span> <span class="n">CreateView</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">app_name</span><span class="o">&gt;.&lt;</span><span class="n">your</span> <span class="n">model</span><span class="o">&gt;</span><span class="n">_create</span>
<span class="o">-</span> <span class="n">For</span> <span class="n">DetailView</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">app_name</span><span class="o">&gt;.&lt;</span><span class="n">your</span> <span class="n">model</span><span class="o">&gt;</span><span class="n">_detail</span>
<span class="o">-</span> <span class="n">For</span> <span class="n">UpdateView</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">app_name</span><span class="o">&gt;.&lt;</span><span class="n">your</span> <span class="n">model</span><span class="o">&gt;</span><span class="n">_update</span>
<span class="o">-</span> <span class="n">For</span> <span class="n">DeleteView</span> <span class="p">:</span> <span class="o">&lt;</span><span class="n">your</span> <span class="n">app_name</span><span class="o">&gt;.&lt;</span><span class="n">your</span> <span class="n">model</span><span class="o">&gt;</span><span class="n">_delete</span>
</pre>
<p>If you want to add your own permissions, then define your own permission required dictionary explicitly in CRUD class.</p>
<pre><span class="n">permissions</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">'list'</span>  <span class="p">:</span> <span class="s1">'example.permission1'</span><span class="p">,</span>
        <span class="s1">'create'</span><span class="p">:</span> <span class="s1">'example.permission2'</span>
        <span class="s1">'detail'</span><span class="p">:</span> <span class="s1">'example.permission3'</span><span class="p">,</span>
        <span class="s1">'update'</span><span class="p">:</span> <span class="s1">'example.permission4'</span><span class="p">,</span>
        <span class="s1">'delete'</span><span class="p">:</span> <span class="s1">'example.permission5'</span><span class="p">,</span>
        <span class="p">}</span>
</pre>
</div>
<div id="extra-template-variables">
<h3>EXTRA TEMPLATE VARIABLES</h3>
<p>Added mixin which allows access to additional template variables like app lable and model name in every template.</p>
<pre><span class="n">APP</span> <span class="p">:</span> <span class="p">{{</span><span class="n">app_label</span><span class="p">}}</span>
<span class="n">MODEL</span> <span class="p">:</span> <span class="p">{{</span><span class="n">actual_model_name</span><span class="p">}}</span>
<span class="n">PLURIZED</span> <span class="n">MODEL</span> <span class="p">:</span> <span class="p">{{</span><span class="n">pluralized_model_name</span><span class="p">}}</span>
</pre>
</div>
<div id="extendable">
<h3>EXTENDABLE</h3>
<p>All the generated views/tables/forms/url are extendable.</p>
<pre><span class="c1"># GENERATE CRUD CLASSES</span>
<span class="kn">from</span> <span class="nn">crudbuilder.views</span> <span class="kn">import</span> <span class="n">ViewBuilder</span>
<span class="n">builder</span> <span class="o">=</span> <span class="n">ViewBuilder</span><span class="p">(</span><span class="s1">'example'</span><span class="p">,</span> <span class="s1">'person'</span><span class="p">,</span> <span class="n">crudclass</span><span class="p">)</span>
<span class="n">builder</span><span class="o">.</span><span class="n">generate_crud</span><span class="p">()</span>
<span class="n">builder</span><span class="o">.</span><span class="n">classes</span>

<span class="p">{</span><span class="s1">'PersonCreateView'</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">django</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">generic</span><span class="o">.</span><span class="n">edit</span><span class="o">.</span><span class="n">PersonCreateView</span><span class="s1">'&gt;,</span>
<span class="s1">'PersonDeleteView'</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">crudbuilder</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">PersonDeleteView</span><span class="s1">'&gt;,</span>
<span class="s1">'PersonListView'</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">crudbuilder</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">PersonListView</span><span class="s1">'&gt;,</span>
<span class="s1">'PersonUpdateView'</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">django</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">generic</span><span class="o">.</span><span class="n">edit</span><span class="o">.</span><span class="n">PersonUpdateView</span><span class="s1">'&gt;,</span>
<span class="s1">'PersonDetailView'</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">crudbuilder</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">PersonDetailView</span><span class="s1">'&gt;</span>
<span class="p">}</span>

<span class="c1"># OVERRIDE AUTO GENERATED VIEWS</span>
<span class="kn">from</span> <span class="nn">crudbuilder.views</span> <span class="kn">import</span> <span class="n">ViewBuilder</span>
<span class="n">builder</span> <span class="o">=</span> <span class="n">ViewBuilder</span><span class="p">(</span><span class="s1">'example'</span><span class="p">,</span> <span class="s1">'person'</span><span class="p">)</span>
<span class="n">builder</span><span class="o">.</span><span class="n">generate_crud</span><span class="p">()</span>
<span class="n">PersonListView</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">classes</span><span class="p">[</span><span class="s1">'PersonListView'</span><span class="p">]</span>
<span class="k">class</span> <span class="nc">CustomPersonListView</span><span class="p">(</span><span class="n">PersonListView</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get_context_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">context</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">CustomPersonListView</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_context_data</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s1">'your_template_variable'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Your new template variable'</span>
        <span class="k">return</span> <span class="n">context</span>

<span class="c1"># OVERRIDE AUTO GENERATED TABLE (from django_tables2)</span>
<span class="kn">from</span> <span class="nn">crudbuilder.tables</span> <span class="kn">import</span> <span class="n">TableBuilder</span>
<span class="n">builder</span> <span class="o">=</span> <span class="n">TableBuilder</span><span class="p">(</span><span class="s1">'example'</span><span class="p">,</span> <span class="s1">'person'</span><span class="p">)</span>
<span class="n">PersonTable</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">generate_table</span><span class="p">()</span>
<span class="k">class</span> <span class="nc">CustomPersonTable</span><span class="p">(</span><span class="n">PersonTable</span><span class="p">):</span>
    <span class="c1"># add your custom implementation here</span>
</pre>
</div>
</div>


</div></body></html>