<html><body><div><div id="about-this-project">
<h2>About this Project</h2>
<p>Caravan is being used at <a href="https://github.com/ludia" rel="nofollow">Ludia</a> for projects
like marketing campaign system and on-demand distributed processing
systems (thanks to hundreds of Lambda functions).</p>
<p>Feedbacks, ideas and contributions are highly welcomed. (Just open a
<a href="https://github.com/pior/caravan/issues" rel="nofollow">Github issue</a>).</p>

</div>
<div id="configuration">
<h2>Configuration</h2>
<p>Caravan uses Boto3 to connect to AWS. See
<a href="http://boto3.readthedocs.org/en/latest/guide/configuration.html" rel="nofollow">Boto 3 configuration guide</a>
for the complete documentation.</p>
<div>
<p>Warning</p>
<p>On AWS EC2, the metadata provider only provides the credentials, the
must be provided by configuration.</p>
</div>
<div id="environment-variables">
<h3>Environment Variables</h3>
<dl>
<dt><tt>AWS_ACCESS_KEY_ID</tt></dt>
<dd>The access key for your AWS account.</dd>
<dt><tt>AWS_SECRET_ACCESS_KEY</tt></dt>
<dd>The secret key for your AWS account.</dd>
<dt><tt>AWS_DEFAULT_REGION</tt></dt>
<dd>The default region to use, e.g. <cite>us-east-1</cite>.</dd>
<dt><tt>AWS_PROFILE</tt></dt>
<dd>The default credential and configuration profile to use, if any.</dd>
</dl>
</div>
<div id="configuration-files">
<h3>Configuration Files</h3>
<p>The credentials file is located at <tt><span class="pre">~/.aws/credentials</span></tt>:</p>
<pre>[default]
# The access key for your AWS account
aws_access_key_id=&lt;YOUR ACCESS KEY ID&gt;

# The secret key for your AWS account
aws_secret_access_key=&lt;YOUR SECRET KEY&gt;
</pre>
<p>The settings file is located at <tt><span class="pre">~/.aws/config</span></tt>:</p>
<pre>[default]
# The default region when making requests
region=&lt;REGION NAME&gt;
</pre>
<p>It also supports profiles:</p>
<pre>[profile dev-profile]
# The default region when using the dev-profile account
region=&lt;REGION NAME&gt;
</pre>
</div>
</div>
<div id="demo">
<h2>Demo</h2>
<p>Setup a SWF domain to run this example:</p>
<pre>$ caravan-domain-register -n CaravanDemo --retention-days 1
</pre>
<p>Write a workflow type (see full <a href="https://github.com/pior/caravan/blob/master/caravan/examples/demo.py" rel="nofollow">demo</a>)</p>
<pre><span class="kn">from</span> <span class="nn">caravan</span> <span class="kn">import</span> <span class="n">Workflow</span>


<span class="k">class</span> <span class="nc">Demo</span><span class="p">(</span><span class="n">Workflow</span><span class="p">):</span>

    <span class="sd">"""Noop workflow using the bare caravan API."""</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s1">'Demo'</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s1">'0.1'</span>
    <span class="n">default_execution_start_to_close_timeout</span> <span class="o">=</span> <span class="s1">'600'</span>
    <span class="n">default_task_start_to_close_timeout</span> <span class="o">=</span> <span class="s1">'10'</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">print_events</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">add_decision</span><span class="p">(</span><span class="s1">'CompleteWorkflowExecution'</span><span class="p">)</span>
</pre>
<p>Run the decider with the Demo workflow:</p>
<pre>$ caravan-decider -d CaravanDemo -m caravan.examples.demo -t default --verbose
</pre>
<p>Start an execution of the Demo workflow:</p>
<pre>$ caravan-start -d CaravanDemo -n Demo -v 0.1 -i 1

(The Demo workflow will wait for 5 minutes)
</pre>
<p>List the executions:</p>
<pre>$ caravan-list -d CaravanDemo
$ caravan-list -d CaravanDemo --oldest 2015-01-01
</pre>
<p>Send a signal to an execution:</p>
<pre>$ caravan-signal -d CaravanDemo -i 1 -s PRINT --input 'Hello World!'
$ caravan-signal -d CaravanDemo -i 1 -s PRINT --input 'Lorem ipsum'
$ caravan-signal -d CaravanDemo -i 1 -s STOP
</pre>
<p>Terminate an execution:</p>
<pre>$ caravan-terminate -d CaravanDemo -i 1
</pre>
</div>
<div id="development">
<h2>Development</h2>
<p>Possibly use <a href="https://virtualenvwrapper.readthedocs.org/en/latest/" rel="nofollow">virtualenvwrapper</a>
to manage your virtualenvs.</p>
<blockquote>
<p>$ mkvirtualenv caravan</p>
<p>or</p>
<p>$ virtualenv caravan</p>
</blockquote>
<p>Clone and install development dependencies:</p>
<pre>(caravan)$ git clone git@github.com:pior/caravan.git
(caravan)$ cd caravan
(caravan)$ pip install -e .[dev]
</pre>
<p>Run tests:</p>
<pre>(caravan)$ nosetests
</pre>
</div>
</div></body></html>