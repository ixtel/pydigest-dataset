<html><body><div><div class="content html_format"><p>
      Продолжение перевода неофициальной документации Selenium для Python.</p><p>
Перевод сделан с разрешения автора Baiju Muthukadan.</p><p>
Оригинал можно найти </p><a href="http://selenium-python.readthedocs.org/index.html">здесь</a><p>.

</p><h2>Содержание:</h2><p>
1. </p><a href="http://habrahabr.ru/post/248559/">Установка</a><p>
2. </p><a href="http://habrahabr.ru/post/250921/">Первые Шаги</a><p>
3. </p><a href="http://habrahabr.ru/post/250947/">Навигация</a><p>
4. Поиск Элементов</p><p>
5. Ожидания</p><p>
6. Объекты Страницы</p><p>
7. WebDriver API</p><p>
8. Приложение: Часто Задаваемые Вопросы
</p><a name="habracut"/>
<h1>4. Поиск элементов</h1><p>
Существует ряд способов поиска элементов на странице. Вы вправе использовать наиболее уместные для конкретных задач. Selenium предоставляет следующие методы поиска элементов на странице:

</p><ul>
<li>find_element_by_id</li>
<li>find_element_by_name</li>
<li>find_element_by_xpath</li>
<li>find_element_by_link_text</li>
<li>find_element_by_partial_link_text</li>
<li>find_element_by_tag_name</li>
<li>find_element_by_class_name</li>
<li>find_element_by_css_selector</li>
</ul>
<b>Чтобы найти все элементы, удовлетворяющие условию поиска, используйте следующие методы (возвращается список):</b>

<ul>
<li>find_elements_by_name</li>
<li>find_elements_by_xpath</li>
<li>find_elements_by_link_text</li>
<li>find_elements_by_partial_link_text</li>
<li>find_elements_by_tag_name</li>
<li>find_elements_by_class_name</li>
<li>find_elements_by_css_selector</li>
</ul><p>
[Как вы могли заметить, во втором списке отсутствует поиск по id. Это обуславливается особенностью свойства id для элементов HTML: идентификаторы элементов страницы всегда уникальны. — Прим. пер.]
</p><p>
Помимо общедоступных (public) методов, перечисленных выше, существует два приватных (private) метода, которые при знании указателей объектов страницы могут быть очень полезны: find_element and find_elements.
</p><p>
Пример использования:

</p><pre><code class="python">from selenium.webdriver.common.by import By

driver.find_element(By.XPATH, '//button[text()="Some text"]')
driver.find_elements(By.XPATH, '//button')
</code></pre><p>
Для класса By доступны следующие атрибуты:

</p><pre><code class="python">ID = "id"
XPATH = "xpath"
LINK_TEXT = "link text"
PARTIAL_LINK_TEXT = "partial link text"
NAME = "name"
TAG_NAME = "tag name"
CLASS_NAME = "class name"
CSS_SELECTOR = "css selector"
</code></pre>
<h2>4.1. Поиск по Id</h2><p>
Используйте этот способ, когда известен id элемента. Если ни один элемент не удовлетворяет заданному значению id, будет вызвано исключение NoSuchElementException.
</p><p>
Для примера, рассмотрим следующий исходный код страницы:

</p><pre><code class="html">&lt;html&gt;
 &lt;body&gt;
  &lt;form id="loginForm"&gt;
   &lt;input name="username" type="text" /&gt;
   &lt;input name="password" type="password" /&gt;
   &lt;input name="continue" type="submit" value="Login" /&gt;
  &lt;/form&gt;
 &lt;/body&gt;
&lt;html&gt;
</code></pre><p>
Элемент form может быть определен следующим образом:

</p><pre><code class="python">login_form = driver.find_element_by_id('loginForm')
</code></pre>
<h2>4.2. Поиск по Name</h2><p>
Используйте этот способ, когда известен атрибут name элемента. Результатом будет первый элемент с искомым значением атрибута name. Если ни один элемент не удовлетворяет заданному значению name, будет вызвано исключение NoSuchElementException.
</p><p>
Для примера, рассмотрим следующий исходный код страницы:

</p><pre><code class="html">&lt;html&gt;
 &lt;body&gt;
  &lt;form id="loginForm"&gt;
   &lt;input name="username" type="text" /&gt;
   &lt;input name="password" type="password" /&gt;
   &lt;input name="continue" type="submit" value="Login" /&gt;
   &lt;input name="continue" type="button" value="Clear" /&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre><p>
Элементы с именами username и password могут быть определены следующим образом:

</p><pre><code class="python">username = driver.find_element_by_name('username')
password = driver.find_element_by_name('password')
</code></pre><p>
Следующий код получит кнопку “Login”, находящуюся перед кнопкой “Clear”:

</p><pre><code class="python">continue = driver.find_element_by_name('continue')
</code></pre>
<h2>4.3. Поиск по XPath</h2><p>
XPath – это язык, использующийся для поиска узлов дерева XML-документа. Поскольку в основе HTML может лежать структура XML (XHTML), пользователям Selenium предоставляется возможность посредоством этого мощного языка отыскивать элементы в их веб-приложениях. XPath выходит за рамки простых методов поиска по атрибутам id или name (и в то же время поддерживает их), и открывает спектр новых возможностей, таких как поиск третьего чекбокса (checkbox) на странице, к примеру.
</p><p>
Одно из веских оснований использовать XPath заключено в наличии ситуаций, когда вы не можете похвастать пригодными в качестве указателей атрибутами, такими как id или name, для элемента, который вы хотите получить. Вы можете использовать XPath для поиска элемента как по абсолютному пути (не рекомендуется), так и по относительному (для элементов с заданными id или name). XPath указатели в том числе могут быть использованы для определения элементов с помощью атрибутов отличных от id и name.
</p><p>
Абсолютный путь XPath содержит в себе все узлы дерева от корня (html) до необходимого элемента, и, как следствие, подвержен ошибкам в результате малейших корректировок исходного кода страницы. Если найти ближайщий элемент с атрибутами id или name (в идеале один из элементов-родителей), можно определить искомый элемент, используя связь «родитель-подчиненный». Эти связи будут куда стабильнее и сделают ваши тесты устойчивыми к изменениям в исходном коде страницы.
</p><p>
Для примера, рассмотрим следующий исходный код страницы:

</p><pre><code class="html">&lt;html&gt;
 &lt;body&gt;
  &lt;form id="loginForm"&gt;
   &lt;input name="username" type="text" /&gt;
   &lt;input name="password" type="password" /&gt;
   &lt;input name="continue" type="submit" value="Login" /&gt;
   &lt;input name="continue" type="button" value="Clear" /&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre><p>
Элемент form может быть определен следующими способами:

</p><pre><code class="python">login_form = driver.find_element_by_xpath("/html/body/form[1]")
login_form = driver.find_element_by_xpath("//form[1]")
login_form = driver.find_element_by_xpath("//form[@id='loginForm']")
</code></pre>
<ol>
<li>Абсолютный путь (поломается при малейшем изменении структуры HTML страницы)</li>
<li>Первый элемент form в странице HTML</li>
<li>Элемент form, для которого определен атрибут с именем id и значением loginForm</li>
</ol><p>
Элемент username может быть найден так:

</p><pre><code class="python">username = driver.find_element_by_xpath("//form[input/@name='username']")
username = driver.find_element_by_xpath("//form[@id='loginForm']/input[1]")
username = driver.find_element_by_xpath("//input[@name='username']")
</code></pre>
<ol>
<li>Первый элемент form с дочерним элементом input, для которого определен атрибут с именем name и значением username</li>
<li>Первый дочерний элемент input элемента form, для которого определен атрибут с именем id и значением loginForm</li>
<li>Первый элемент input, для которого определен атрибут с именем name и значением username</li>
</ol><p>
Кнопка “Clear” может быть найдена следующими способами:

</p><pre><code class="python">clear_button = driver.find_element_by_xpath("//input[@name='continue'][@type='button']")
clear_button = driver.find_element_by_xpath("//form[@id='loginForm']/input[4]")
</code></pre>
<ol>
<li>Элемент input, для которого заданы атрибут с именем name и значением continue и атрибут с именем type и значением button</li>
<li>Четвертый дочерний элемент input элемента form, для которого задан атрибут с именем id и значением loginForm</li>
</ol><p>
Представленные примеры покрывают некоторые основы использования XPath, для более углубленного изучения рекомендую следующие материалы:

</p><p>
Существует также пара очень полезных дополнений (add-on), которые могут помочь в выяснении XPath элемента:

</p><ul>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/1095?id=1095">XPath Checker</a> — получает пути XPath и может использоваться для проверки результатов пути XPath</li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/1843">Firebug</a> — получение пути XPath — лишь одно из многих мощных средств, поддерживаемых этим очень полезным плагином</li>
<li><a href="https://chrome.google.com/webstore/detail/hgimnogjllphhhkhlmebbmlgjoejdpjl">XPath Helper</a> — для Google Chrome</li>
</ul>
<h2>4.4. Поиск гиперссылок по тексту гиперссылки</h2><p>
Используйте этот способ, когда известен текст внутри анкер-тэга [anchor tag, анкер-тэг, тег «якорь» — тэг  — Прим. пер.]. С помощью такого способа вы получите первый элемент с искомым значением текста тэга. Если никакой элемент не удовлетворяет искомому значению, будет вызвано исключение NoSuchElementException.
</p><p>
Для примера, рассмотрим следующий исходный код страницы:

</p><pre><code class="html">&lt;html&gt;
 &lt;body&gt;
  &lt;p&gt;Are you sure you want to do this?&lt;/p&gt;
  &lt;a href="continue.html"&gt;Continue&lt;/a&gt;
  &lt;a href="cancel.html"&gt;Cancel&lt;/a&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre><p>
Элемент-гиперссылка с адресом «continue.html» может быть получен следующим образом:

</p><pre><code class="python">continue_link = driver.find_element_by_link_text('Continue')
continue_link = driver.find_element_by_partial_link_text('Conti')
</code></pre>
<h2>4.5. Поиск элементов по тэгу</h2><p>
Используйте этот способ, когда вы хотите найти элемент по его тэгу. Таким способом вы получите первый элемент с указанным именем тега. Если поиск не даст результатов, будет возбуждено исключение NoSuchElementException.
</p><p>
Для примера, рассмотрим следующий исходный код страницы:

</p><pre><code class="html">&lt;html&gt;
 &lt;body&gt;
  &lt;h1&gt;Welcome&lt;/h1&gt;
  &lt;p&gt;Site content goes here.&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre><p>
Элемент заголовка h1 может быть найден следующим образом:

</p><pre><code class="python">heading1 = driver.find_element_by_tag_name('h1')
</code></pre>
<h2>4.6. Поиск элементов по классу</h2><p>
Используйте этот способ в случаях, когда хотите найти элемент по значению атрибута class. Таким способом вы получите первый элемент с искомым именем класса. Если поиск не даст результата, будет возбуждено исключение NoSuchElementException.
</p><p>
Для примера, рассмотрим следующий исходный код страницы:

</p><pre><code class="html">&lt;html&gt;
 &lt;body&gt;
  &lt;p class="content"&gt;Site content goes here.&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre><p>
Элемент “p” может быть найден следующим образом:

</p><pre><code class="python">content = driver.find_element_by_class_name('content')
</code></pre>
<h2>4.7. Поиск элементов по CSS-селектору</h2><p>
Используйте этот способ, когда хотите получить элемент с использованием синтаксиса CSS-селекторов [CSS-селектор — это формальное описание относительного пути до элемента/элементов HTML. Классически, селекторы используются для задания правил стиля. В случае с WebDriver, существование самих правил не обязательно, веб-драйвер использует синтаксис CSS только для поиска — Прим. пер.]. Этим способом вы получите первый элемент удовлетворяющий CSS-селектору. Если ни один элемент не удовлетворяют селектору CSS, будет возбуждено исключение NoSuchElementException.
</p><p>
Для примера, рассмотрим следующий исходный код страницы:

</p><pre><code class="html">&lt;html&gt;
 &lt;body&gt;
  &lt;p class="content"&gt;Site content goes here.&lt;/p&gt;
&lt;/body&gt;
&lt;html&gt;
</code></pre><p>
Элемент “p” может быть определен следующим образом:

</p><pre><code class="python">content = driver.find_element_by_css_selector('p.content')
</code></pre><p>
На Sauce Labs есть </p><a href="http://saucelabs.com/resources/selenium/css-selectors">хорошая документация</a><p> по селекторам CSS.</p><p>
От переводчика: советую также обратиться к следующим материалам:
</p>

      
      <p class="clear"/>
    </div>

    
  </div></body></html>