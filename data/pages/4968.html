<html><body><div><div class="entry-content clearfix"><p><strong>This post provides a solution to the question, “How do I handle user authentication with AngularJS and Flask?”.</strong></p>









<p>Before beginning, keep in mind that this is not the <em>only</em> solution to the question at hand, and it may not even be the <em>right</em> solution for your situation. Regardless of the solution you implement, it is important to note that <em>since end users have full control of the browser as well as access to the front-end code, sensitive data living in your server-side API must be secure. In other words, make certain that you implement an authentication strategy on the server-side to protect sensitive API endpoints.</em></p>

<p>That said, we need to enable the following workflow:</p>

<ol>
<li>When the client accesses the main route, an index page is served, at which point Angular takes over, handling all routing on the client-side.</li>
<li>The Angular app immediately “asks” the server if a user is logged in.</li>
<li>Assuming the server indicates that a user is not logged in, the client is immediately asked to log in.</li>
<li>Once logged in, the Angular app then tracks the user’s login status.</li>
</ol>


<blockquote><p>This tutorial uses Python <a href="https://www.python.org/download/releases/3.4.0/">3.4</a> and Angular <a href="https://code.angularjs.org/1.3.15/docs/api">1.3.15</a>.</p></blockquote>

<a name="Getting.Started"/>
<h2>Getting Started</h2>

<p>First, grab the boilerplate code from the <a href="https://github.com/realpython/flask-angular-auth/releases/tag/v1">repo</a>, activate a virtual environment and install the requirements.</p>

<p>Then create the initial migration:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>python manage.py create_db
</span><span class="line"><span class="nv">$ </span>python manage.py db init
</span><span class="line"><span class="nv">$ </span>python manage.py db migrate
</span></code></pre></td></tr></table></div></figure>


<p>Test out the app:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>python manage.py runserver
</span></code></pre></td></tr></table></div></figure>


<p>Navigate to <a href="http://localhost:5000/">http://localhost:5000/</a> and you should see a simple welcome message – “Welcome!”. Once done admiring the main page, kill the server, and glance over the code within the “project” folder:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">├── __init__.py
</span><span class="line">├── config.py
</span><span class="line">├── models.py
</span><span class="line">└── static
</span><span class="line">    ├── app.js
</span><span class="line">    ├── index.html
</span><span class="line">    └── partials
</span><span class="line">        └── home.html
</span></code></pre></td></tr></table></div></figure>


<p>Nothing too spectacular. The majority of the back-end code/logic resides in the <em>__init__.py</em> file, while the Angular app resides in the “static” directory.</p>

<blockquote><p>For more on this structure, please check out the <a href="https://realpython.com">Real Python</a> course.</p></blockquote>

<a name="Building.the.Login.API"/>
<h2>Building the Login API</h2>

<p>Let’s start with the back-end API…</p>

<a name="User.Registration"/>
<h3>User Registration</h3>

<p>Update the <code>register()</code> function in <em>__init__.py</em>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/register'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'POST'</span><span class="p">])</span>
</span><span class="line"><span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
</span><span class="line">    <span class="n">json_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span>
</span><span class="line">    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span>
</span><span class="line">        <span class="n">email</span><span class="o">=</span><span class="n">json_data</span><span class="p">[</span><span class="s">'email'</span><span class="p">],</span>
</span><span class="line">        <span class="n">password</span><span class="o">=</span><span class="n">json_data</span><span class="p">[</span><span class="s">'password'</span><span class="p">]</span>
</span><span class="line">    <span class="p">)</span>
</span><span class="line">    <span class="k">try</span><span class="p">:</span>
</span><span class="line">        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span class="line">        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
</span><span class="line">        <span class="n">status</span> <span class="o">=</span> <span class="s">'success'</span>
</span><span class="line">    <span class="k">except</span><span class="p">:</span>
</span><span class="line">        <span class="n">status</span> <span class="o">=</span> <span class="s">'this user is already registered'</span>
</span><span class="line">    <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">'result'</span><span class="p">:</span> <span class="n">status</span><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we set the payload sent with the POST request (from the client-side) to <code>json_data</code>, which is then used to create a <code>User</code> instance. We then attempted to add the user to the database and commit the changes. If this succeeds a user is added, and then we return a JSON response via the <code>jsonify</code> <a href="http://flask.pocoo.org/docs/0.10/api/#flask.json.jsonify">method</a> method with a <code>status</code> of “success”. If it fails, the session is closed and an error response, “this user is already registered”, is sent.</p>

<p>Make sure to add the following imports as well:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">project.models</span> <span class="kn">import</span> <span class="n">User</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>The latter import must be imported after we create the <code>db</code> instance – e.g., <code>db = SQLAlchemy(app)</code> – to avoid a circular dependency.</p></blockquote>

<p>Let’s test this via curl. Fire up the server and then run the following command in a new terminal window:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>curl -H <span class="s2">"Accept: application/json"</span> -H <span class="s2">"Content-type: application/json"</span> -X POST <span class="se">\</span>
</span><span class="line">-d <span class="s1">'{"email": "test@test.com", "password": "test"}'</span> <span class="se">\</span>
</span><span class="line">http://localhost:5000/api/register
</span></code></pre></td></tr></table></div></figure>


<p>You should see a success message:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="o">{</span>
</span><span class="line">  <span class="s2">"result"</span>: <span class="s2">"success"</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Try it again, and you should see an error:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="o">{</span>
</span><span class="line">  <span class="s2">"result"</span>: <span class="s2">"this user is already registered"</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finally, open the database in the <a href="http://sqlitebrowser.org/">SQLite Database Browser</a> to ensure the user did get INSERTed into the table:</p>














<p>On to the login…</p>

<a name="User.Login"/>
<h3>User Login</h3>

<p>Update the <code>login()</code> function in <em>__init__.py</em>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/login'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'POST'</span><span class="p">])</span>
</span><span class="line"><span class="k">def</span> <span class="nf">login</span><span class="p">():</span>
</span><span class="line">    <span class="n">json_data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span>
</span><span class="line">    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">json_data</span><span class="p">[</span><span class="s">'email'</span><span class="p">])</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
</span><span class="line">    <span class="k">if</span> <span class="n">user</span> <span class="ow">and</span> <span class="n">bcrypt</span><span class="o">.</span><span class="n">check_password_hash</span><span class="p">(</span>
</span><span class="line">            <span class="n">user</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">json_data</span><span class="p">[</span><span class="s">'password'</span><span class="p">]):</span>
</span><span class="line">        <span class="n">session</span><span class="p">[</span><span class="s">'logged_in'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class="line">        <span class="n">status</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class="line">    <span class="k">else</span><span class="p">:</span>
</span><span class="line">        <span class="n">status</span> <span class="o">=</span> <span class="bp">False</span>
</span><span class="line">    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">'result'</span><span class="p">:</span> <span class="n">status</span><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>We queried the database to see if a user exists, based on the email sent in the payload, and, if so, the password is then verified. The appropriate response is returned.</p>

<p>Make sure to update the imports:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">jsonify</span><span class="p">,</span> <span class="n">session</span>
</span></code></pre></td></tr></table></div></figure>


<p>With the server running, test again with curl-</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>curl -H <span class="s2">"Accept: application/json"</span> -H <span class="s2">"Content-type: application/json"</span> -X POST <span class="se">\</span>
</span><span class="line">-d <span class="s1">'{"email": "test@test.com", "password": "test"}'</span> <span class="se">\</span>
</span><span class="line">http://localhost:5000/api/login
</span></code></pre></td></tr></table></div></figure>


<p>-and you should see:</p>

<figure class="code"><figcaption><span/></figcaption></figure>


<p>Test again with curl, sending the wrong user credentials, and you should see:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="o">{</span>
</span><span class="line">  <span class="s2">"result"</span>: <span class="nb">false</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Perfect!</p>

<a name="User.Logout"/>
<h3>User Logout</h3>

<p>Update the <code>logout()</code> function like so, in order to update the <code>session</code>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/api/logout'</span><span class="p">)</span>
</span><span class="line"><span class="k">def</span> <span class="nf">logout</span><span class="p">():</span>
</span><span class="line">    <span class="n">session</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">'logged_in'</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</span><span class="line">    <span class="k">return</span> <span class="n">jsonify</span><span class="p">({</span><span class="s">'result'</span><span class="p">:</span> <span class="s">'success'</span><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>This should be straightforward, and you can probably guess the response to this curl request – but test again if you’d like. Once done, let’s move to the client-side!</p>

<a name="Developing.the.Angular.App"/>
<h2>Developing the Angular App</h2>

<blockquote><p>Need the code from the previous section? Grab it from the <a href="https://github.com/realpython/flask-angular-auth/releases/tag/v2">repo</a>.</p></blockquote>

<p>Now, here’s where things get a bit tricky. Again, since end users have full access to the power of the browser as well as <a href="https://developer.chrome.com/devtools">DevTools</a> and the client-side code, it’s vital that you not only restrict access to sensitive endpoints on the server-side – but that you also not store sensitive data on the client-side. Keep this in mind as you add auth functionality to your own application stack.</p>

<p>Let’s jump right in by creating a <a href="https://docs.angularjs.org/guide/services">service</a> to handle authentication.</p>

<a name="Authentication.Service"/>
<h3>Authentication Service</h3>

<p>Start with the basic structure of this service by adding the following code to a new file called <em>services.js</em> in the “static” directory:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">).</span><span class="nx">factory</span><span class="p">(</span><span class="s1">'AuthService'</span><span class="p">,</span>
</span><span class="line">  <span class="p">[</span><span class="s1">'$q'</span><span class="p">,</span> <span class="s1">'$timeout'</span><span class="p">,</span> <span class="s1">'$http'</span><span class="p">,</span>
</span><span class="line">  <span class="kd">function</span> <span class="p">(</span><span class="nx">$q</span><span class="p">,</span> <span class="nx">$timeout</span><span class="p">,</span> <span class="nx">$http</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// create user variable</span>
</span><span class="line">    <span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// return available functions for use in controllers</span>
</span><span class="line">    <span class="k">return</span> <span class="p">({</span>
</span><span class="line">      <span class="nx">isLoggedIn</span><span class="o">:</span> <span class="nx">isLoggedIn</span><span class="p">,</span>
</span><span class="line">      <span class="nx">login</span><span class="o">:</span> <span class="nx">login</span><span class="p">,</span>
</span><span class="line">      <span class="nx">logout</span><span class="o">:</span> <span class="nx">logout</span><span class="p">,</span>
</span><span class="line">      <span class="nx">register</span><span class="o">:</span> <span class="nx">register</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line"><span class="p">}]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we defined the service name, <code>AuthService</code>, and injected the dependencies that we will be using – <code>$q</code>, <code>$timeout</code>, <code>$http</code> – and then return the functions for use outside the service.</p>

<p>Make sure to add the script to the <em>index.html</em> file:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"static/services.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let’s create each function…</p>

<p><strong><code>isLoggedIn()</code></strong></p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">isLoggedIn</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">  <span class="k">if</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This function returns <code>true</code> if <code>user</code> evaluates to <code>true</code> – e.g., a user is logged in – otherwise it returns false.</p>

<p><strong><code>login()</code></strong></p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">login</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// create a new instance of deferred</span>
</span><span class="line">  <span class="kd">var</span> <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// send a post request to the server</span>
</span><span class="line">  <span class="nx">$http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/api/login'</span><span class="p">,</span> <span class="p">{</span><span class="nx">email</span><span class="o">:</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="nx">password</span><span class="p">})</span>
</span><span class="line">    <span class="c1">// handle success</span>
</span><span class="line">    <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="k">if</span><span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">){</span>
</span><span class="line">        <span class="nx">user</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class="line">        <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
</span><span class="line">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="nx">user</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">        <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="c1">// handle error</span>
</span><span class="line">    <span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">user</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">      <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// return promise object</span>
</span><span class="line">  <span class="k">return</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we used the <a href="https://code.angularjs.org/1.3.15/docs/api/ng/service/$q">$q</a> service to set up a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promise</a>, which we’ll access in a future controller. We also utilized the <a href="https://code.angularjs.org/1.3.15/docs/api/ng/service/$http">$http</a> service to send an AJAX request to the <code>/api/login</code> endpoint that we already set up in our back-end Flask app.</p>

<p>Based on the returned response, we either <a href="https://code.angularjs.org/1.3.15/docs/api/ng/service/$q#usage">resolve</a> or <a href="https://code.angularjs.org/1.3.15/docs/api/ng/service/$q#usage">reject</a> the object and set the value of <code>user</code> to <code>true</code> or <code>false</code>.</p>

<p><strong><code>logout()</code></strong></p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">logout</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// create a new instance of deferred</span>
</span><span class="line">  <span class="kd">var</span> <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// send a get request to the server</span>
</span><span class="line">  <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'/api/logout'</span><span class="p">)</span>
</span><span class="line">    <span class="c1">// handle success</span>
</span><span class="line">    <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">user</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">      <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="c1">// handle error</span>
</span><span class="line">    <span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">user</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">      <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// return promise object</span>
</span><span class="line">  <span class="k">return</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we followed the same formula as the <code>login()</code> function, except we sent a GET request rather than a POST and, to be cautious, instead of sending an error if the user does not exist, we’re just logging the user out.</p>

<p><strong><code>register()</code></strong></p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="kd">function</span> <span class="nx">register</span><span class="p">(</span><span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// create a new instance of deferred</span>
</span><span class="line">  <span class="kd">var</span> <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// send a post request to the server</span>
</span><span class="line">  <span class="nx">$http</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/api/register'</span><span class="p">,</span> <span class="p">{</span><span class="nx">email</span><span class="o">:</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="nx">password</span><span class="p">})</span>
</span><span class="line">    <span class="c1">// handle success</span>
</span><span class="line">    <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="k">if</span><span class="p">(</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">result</span><span class="p">){</span>
</span><span class="line">        <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
</span><span class="line">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">        <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="c1">// handle error</span>
</span><span class="line">    <span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span><span class="p">();</span>
</span><span class="line">    <span class="p">});</span>
</span><span class="line">
</span><span class="line">  <span class="c1">// return promise object</span>
</span><span class="line">  <span class="k">return</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Again, we followed a similar formula to the <code>logout()</code> function. Can you tell what’s happening?</p>

<p>That’s it for the service. Keep in mind that we still have not “used” this service. In order to do that, we just need to inject it into the necessary components in the Angular app. In our case, that will be the controllers, each associated with a different route…</p>

<a name="Client-side.Routing"/>
<h3>Client-side Routing</h3>

<p>Add the remainder of the client-side routes to the <em>app.js</em> file:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">myApp</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$routeProvider</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">$routeProvider</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span><span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'static/partials/home.html'</span><span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">,</span> <span class="p">{</span><span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'static/partials/login.html'</span><span class="p">,</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">'loginController'</span><span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/logout'</span><span class="p">,</span> <span class="p">{</span><span class="nx">controller</span><span class="o">:</span> <span class="s1">'logoutController'</span><span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/register'</span><span class="p">,</span> <span class="p">{</span><span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'static/partials/register.html'</span><span class="p">,</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">'registerController'</span><span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/one'</span><span class="p">,</span> <span class="p">{</span><span class="nx">template</span><span class="o">:</span> <span class="s1">'&lt;h1&gt;This is page one!&lt;/h1&gt;'</span><span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/two'</span><span class="p">,</span> <span class="p">{</span><span class="nx">template</span><span class="o">:</span> <span class="s1">'&lt;h1&gt;This is page two!&lt;/h1&gt;'</span><span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">otherwise</span><span class="p">({</span><span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">'/'</span><span class="p">});</span>
</span><span class="line"><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we created five new routes. Now we can add the subsequent templates and controllers.</p>

<a name="Templates.and.Controllers"/>
<h3>Templates and Controllers</h3>

<p>Looking back at our routes, we need to setup two partials/templates and three controllers:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">,</span> <span class="p">{</span><span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'static/partials/login.html'</span><span class="p">,</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">'loginController'</span><span class="p">})</span>
</span><span class="line"><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/logout'</span><span class="p">,</span> <span class="p">{</span><span class="nx">controller</span><span class="o">:</span> <span class="s1">'logoutController'</span><span class="p">})</span>
</span><span class="line"><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/register'</span><span class="p">,</span> <span class="p">{</span><span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'static/partials/register.html'</span><span class="p">,</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">'registerController'</span><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Login</strong></p>

<p>First, add the following HTML to a new file called <em>login.html</em>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;h1&gt;</span>Login<span class="nt">&lt;/h2&gt;</span>
</span><span class="line">  <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"error"</span> <span class="na">class=</span><span class="s">"alert alert-danger"</span><span class="nt">&gt;</span>{{errorMessage}}<span class="nt">&lt;/div&gt;</span>
</span><span class="line">  <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"form"</span> <span class="na">ng-submit=</span><span class="s">"login()"</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;label&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">ng-model=</span><span class="s">"loginForm.email"</span> <span class="na">required</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;label&gt;</span>Password<span class="nt">&lt;/label&gt;</span>
</span><span class="line">        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">ng-model=</span><span class="s">"loginForm.password"</span> <span class="na">required</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">      <span class="nt">&lt;div&gt;</span>
</span><span class="line">        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-disabled=</span><span class="s">"disabled"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/button&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Add this file to the “partials” directory.</p>

<p>Take note of the form. We used the <a href="https://code.angularjs.org/1.3.15/docs/api/ng/directive/ngModel">ng-model</a> directive on each of the inputs so that we can capture those values in the controller. Also, when the form is submitted, the <a href="https://code.angularjs.org/1.3.15/docs/api/ng/directive/ngSubmit">ng-submit</a> directive handles the event by firing the <code>login()</code> function.</p>

<p>Next, within the “static” folder and add a new file called <em>controllers.js</em>. Yes, this will hold all of our Angular app’s controllers. Be sure to add the script to the <em>index.html</em> file:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"static/controllers.js"</span> <span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, let’s add the first controller:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">).</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'loginController'</span><span class="p">,</span>
</span><span class="line">  <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'$location'</span><span class="p">,</span> <span class="s1">'AuthService'</span><span class="p">,</span>
</span><span class="line">  <span class="kd">function</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$location</span><span class="p">,</span> <span class="nx">AuthService</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">());</span>
</span><span class="line">
</span><span class="line">    <span class="nx">$scope</span><span class="p">.</span><span class="nx">login</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">      <span class="c1">// initial values</span>
</span><span class="line">      <span class="nx">$scope</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">      <span class="nx">$scope</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">      <span class="c1">// call login from service</span>
</span><span class="line">      <span class="nx">AuthService</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">loginForm</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">loginForm</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span>
</span><span class="line">        <span class="c1">// handle success</span>
</span><span class="line">        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="line">          <span class="nx">$location</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/'</span><span class="p">);</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">loginForm</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class="line">        <span class="p">})</span>
</span><span class="line">        <span class="c1">// handle error</span>
</span><span class="line">        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">errorMessage</span> <span class="o">=</span> <span class="s2">"Invalid username and/or password"</span><span class="p">;</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">loginForm</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class="line">        <span class="p">});</span>
</span><span class="line">
</span><span class="line">    <span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="p">}]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>So, when the <code>login()</code> function is fired, we set some initial values and then call <code>login()</code> from the <code>AuthService</code>, passing the user inputed email and password as arguments. The subsequent success or error is then handled and the DOM/view/template is updated appropriately.</p>

<p>Did you notice how we logged the return value of <code>AuthService.isLoggedIn()</code> to the console? This is to ensure that the value is correct based on whether a user is logged in or out – <code>true</code> or <code>false</code>, respectively.</p>

<p>Ready to test the first round-trip – client to server and then back again to client?</p>

<p>Fire up the server and navigate to <a href="http://localhost:5000/#/login">http://localhost:5000/#/login</a> in your browser. First, try logging in with the user credentials used to register earlier – e.g, <code>test@test.com</code> and <code>test</code>. If all went well, you should be redirected to the main URL. Next, try to log in using invalid credentials. You should see the error message flash, “Invalid username and/or password”.</p>

<p>Once done, make sure to remove <code>console.log(AuthService.isLoggedIn());</code>.</p>

<p><strong>Logout</strong></p>

<p>Add the controller:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">).</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'logoutController'</span><span class="p">,</span>
</span><span class="line">  <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'$location'</span><span class="p">,</span> <span class="s1">'AuthService'</span><span class="p">,</span>
</span><span class="line">  <span class="kd">function</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$location</span><span class="p">,</span> <span class="nx">AuthService</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">    <span class="nx">$scope</span><span class="p">.</span><span class="nx">logout</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">AuthService</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">());</span>
</span><span class="line">
</span><span class="line">      <span class="c1">// call logout from service</span>
</span><span class="line">      <span class="nx">AuthService</span><span class="p">.</span><span class="nx">logout</span><span class="p">()</span>
</span><span class="line">        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="line">          <span class="nx">$location</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">);</span>
</span><span class="line">        <span class="p">});</span>
</span><span class="line">
</span><span class="line">    <span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="p">}]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we called <code>AuthService.logout()</code> and then redirected the user to the <code>/login</code> route after the promise is resolved.</p>

<p>Add a button to <em>home.html</em>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"logoutController"</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;a</span> <span class="na">ng-click=</span><span class="s">'logout()'</span> <span class="na">class=</span><span class="s">"btn btn-default"</span><span class="nt">&gt;</span>Logout<span class="nt">&lt;/a&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And then test it out again. Remember to remove <code>console.log(AuthService.isLoggedIn());</code> after you’re done testing.</p>

<p><strong>Register</strong></p>

<p>Add a new new file called <em>register.html</em> to the “partials” folder and add the following HTML:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"col-md-4"</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;h1&gt;</span>Register<span class="nt">&lt;/h2&gt;</span>
</span><span class="line">  <span class="nt">&lt;div</span> <span class="na">ng-show=</span><span class="s">"error"</span> <span class="na">class=</span><span class="s">"alert alert-danger"</span><span class="nt">&gt;</span>{{errorMessage}}<span class="nt">&lt;/div&gt;</span>
</span><span class="line">  <span class="nt">&lt;form</span> <span class="na">class=</span><span class="s">"form"</span> <span class="na">ng-submit=</span><span class="s">"register()"</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;label&gt;</span>Email<span class="nt">&lt;/label&gt;</span>
</span><span class="line">      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">ng-model=</span><span class="s">"registerForm.email"</span> <span class="na">required</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/div&gt;</span>
</span><span class="line">    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;label&gt;</span>Password<span class="nt">&lt;/label&gt;</span>
</span><span class="line">        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"password"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">name=</span><span class="s">"password"</span> <span class="na">ng-model=</span><span class="s">"registerForm.password"</span> <span class="na">required</span><span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">      <span class="nt">&lt;div&gt;</span>
</span><span class="line">        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span> <span class="na">class=</span><span class="s">"btn btn-default"</span> <span class="na">ng-disabled=</span><span class="s">"disabled"</span><span class="nt">&gt;</span>Register<span class="nt">&lt;/button&gt;</span>
</span><span class="line">      <span class="nt">&lt;/div&gt;</span>
</span><span class="line">  <span class="nt">&lt;/form&gt;</span>
</span><span class="line"><span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next, add the controller:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">).</span><span class="nx">controller</span><span class="p">(</span><span class="s1">'registerController'</span><span class="p">,</span>
</span><span class="line">  <span class="p">[</span><span class="s1">'$scope'</span><span class="p">,</span> <span class="s1">'$location'</span><span class="p">,</span> <span class="s1">'AuthService'</span><span class="p">,</span>
</span><span class="line">  <span class="kd">function</span> <span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">$location</span><span class="p">,</span> <span class="nx">AuthService</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">    <span class="nx">$scope</span><span class="p">.</span><span class="nx">register</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="line">
</span><span class="line">      <span class="c1">// initial values</span>
</span><span class="line">      <span class="nx">$scope</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">      <span class="nx">$scope</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">      <span class="c1">// call register from service</span>
</span><span class="line">      <span class="nx">AuthService</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">email</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">.</span><span class="nx">registerForm</span><span class="p">.</span><span class="nx">password</span><span class="p">)</span>
</span><span class="line">        <span class="c1">// handle success</span>
</span><span class="line">        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="line">          <span class="nx">$location</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">);</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">registerForm</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class="line">        <span class="p">})</span>
</span><span class="line">        <span class="c1">// handle error</span>
</span><span class="line">        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">errorMessage</span> <span class="o">=</span> <span class="s2">"Something went wrong!"</span><span class="p">;</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class="line">          <span class="nx">$scope</span><span class="p">.</span><span class="nx">registerForm</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class="line">        <span class="p">});</span>
</span><span class="line">
</span><span class="line">    <span class="p">};</span>
</span><span class="line">
</span><span class="line"><span class="p">}]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>You’ve seen this before, so let’s move right on to testing.</p>

<p>Fire up the server and register a new user at <a href="http://localhost:5000/#/register">http://localhost:5000/#/register</a>. Make sure to test logging in with that new user as well.</p>

<p>Well, that’s it for the templates and controllers. We now need to add in functionality to check if a user is logged in on each and every change of route.</p>

<a name="Route.Changes"/>
<h3>Route Changes</h3>

<p>Add the following code to <em>app.js</em>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">myApp</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$rootScope</span><span class="p">,</span> <span class="nx">$location</span><span class="p">,</span> <span class="nx">$route</span><span class="p">,</span> <span class="nx">AuthService</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="s1">'$routeChangeStart'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="nx">AuthService</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">()</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">$location</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">);</span>
</span><span class="line">      <span class="nx">$route</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">  <span class="p">});</span>
</span><span class="line"><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <a href="https://code.angularjs.org/1.3.15/docs/api/ngRoute/service/$route">$routeChangeStart</a> event happens before the actual route change occurs. So, whenever a route is accessed, before the view is served, we ensure that the user is logged in. Test this out!</p>

<a name="Protect.Certain.Routes"/>
<h3>Protect Certain Routes</h3>

<p>Right now all client-side routes require a user to be logged in. What if you want certain routes restricted and other routes open? You can add the following code to each route handler, replacing <code>true</code> with <code>false</code> for routes that you do not want to restrict:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">restricted</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>In our case, update the routes like so:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">myApp</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$routeProvider</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">$routeProvider</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'static/partials/home.html'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">restricted</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">,</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'static/partials/login.html'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">controller</span><span class="o">:</span> <span class="s1">'loginController'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">restricted</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/logout'</span><span class="p">,</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">controller</span><span class="o">:</span> <span class="s1">'logoutController'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">restricted</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/register'</span><span class="p">,</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'static/partials/register.html'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">controller</span><span class="o">:</span> <span class="s1">'registerController'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">restricted</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/one'</span><span class="p">,</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">template</span><span class="o">:</span> <span class="s1">'&lt;h1&gt;This is page one!&lt;/h1&gt;'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">restricted</span><span class="o">:</span> <span class="kc">true</span><span class="p">}</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">'/two'</span><span class="p">,</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">template</span><span class="o">:</span> <span class="s1">'&lt;h1&gt;This is page two!&lt;/h1&gt;'</span><span class="p">,</span>
</span><span class="line">      <span class="nx">access</span><span class="o">:</span> <span class="p">{</span><span class="nx">restricted</span><span class="o">:</span> <span class="kc">false</span><span class="p">}</span>
</span><span class="line">    <span class="p">})</span>
</span><span class="line">    <span class="p">.</span><span class="nx">otherwise</span><span class="p">({</span><span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">'/'</span><span class="p">});</span>
</span><span class="line"><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now just update the <code>$routeChangeStart</code> code in <em>main.js</em>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="nx">myApp</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$rootScope</span><span class="p">,</span> <span class="nx">$location</span><span class="p">,</span> <span class="nx">$route</span><span class="p">,</span> <span class="nx">AuthService</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="s1">'$routeChangeStart'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    <span class="k">if</span> <span class="p">(</span><span class="nx">next</span><span class="p">.</span><span class="nx">access</span><span class="p">.</span><span class="nx">restricted</span> <span class="o">&amp;&amp;</span> <span class="nx">AuthService</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">()</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">      <span class="nx">$location</span><span class="p">.</span><span class="nx">path</span><span class="p">(</span><span class="s1">'/login'</span><span class="p">);</span>
</span><span class="line">      <span class="nx">$route</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
</span><span class="line">    <span class="p">}</span>
</span><span class="line">  <span class="p">});</span>
</span><span class="line"><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Test each route out!</p>

<a name="Conclusion"/>
<h2>Conclusion</h2>

<p>That’s it. Questions? Comment below.</p>

<p>One thing you should note is that the Angular app can be used with various frameworks as long as the endpoints are set up correctly in the AJAX requests. So, you can easily take the Angular portion and add it to your Django or Pyramid or NodeJS app. Try it!</p>

<p>Grab the final code from the <a href="https://github.com/realpython/flask-angular-auth">repo</a>. Cheers!</p>
</div>


      </div></body></html>