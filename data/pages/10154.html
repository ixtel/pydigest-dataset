<html><body><div><div id="overview">
<h2>Overview</h2>
<p><em>python-gpsdshm</em> provides a read-only(!) Python interface to <a href="http://www.catb.org/gpsd/" rel="nofollow">gpsd</a>â€™s shared memory. It provides
a single class <tt>Shm</tt> that exposes the fields of the shared memory structure as attributes. The
<em>python-gpsdshm</em> API is (loosely) modelled on gpsd version 3.16 (API 6.1). gpsd releases earlier
than 3.0 are not supported.</p>
<p><em>python-gpsdshm</em> is implemented using <a href="http://www.swig.org/Doc1.3/Python.html" rel="nofollow">Swig</a> and requires the <cite>gpsd</cite> header files for compilation.</p>
<p>Many Linux distributions ship the gpsd package <strong>without</strong> shared memory support.
See <a href="#compiling-gpsd-with-shared-memory-support" rel="nofollow">Compiling gpsd with shared memory support</a> for details how to build gpsd
with shared memory support.</p>
</div>
<div id="example">
<h2>Example</h2>
<p>The example below shows all attributes and typical values (of a stationary GPS, placed about one metre inside a window).</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">gpsdshm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span> <span class="o">=</span> <span class="n">gpsdshm</span><span class="o">.</span><span class="n">Shm</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">set</span>
<span class="n">TODO</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">Swig</span> <span class="n">Object</span> <span class="n">of</span> <span class="nb">type</span> <span class="s1">'gps_mask_t *'</span> <span class="n">at</span> <span class="mh">0x133bf50</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">online</span>               <span class="c1"># True if GPS is online</span>
<span class="n">gpsd_shm</span><span class="o">.</span><span class="n">online</span>
<span class="n">TODO</span><span class="p">:</span> <span class="n">Out</span><span class="p">[</span><span class="mi">6</span><span class="p">]:</span> <span class="mf">1454057376.6934643</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">status</span>               <span class="c1"># Do we have a fix (True/False)?</span>
<span class="n">gpsd_shm</span><span class="o">.</span><span class="n">status</span>
<span class="n">TODO</span> <span class="n">Out</span><span class="p">[</span><span class="mi">7</span><span class="p">]:</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">skyview_time</span>         <span class="c1"># Skyview timestamp</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">satellites_visible</span>   <span class="c1"># Number of satellites in view</span>
<span class="n">TODO</span><span class="p">:</span> <span class="n">nan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">time</span>             <span class="c1"># Time of update</span>
<span class="mf">1454057448.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">mode</span>             <span class="c1"># Mode of fix (0=not seen, 1=no fix, 2=2D, 3=3D)</span>
<span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">ept</span>              <span class="c1"># Expected time uncertainty</span>
<span class="mf">0.005</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">latitude</span>         <span class="c1"># Latitude in degrees (valid if mode &gt;= 2)</span>
<span class="o">-</span><span class="mf">37.75859333333334</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">epy</span>              <span class="c1"># Latitude position uncertainty, meters</span>
<span class="mf">14.853882022256698</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">longitude</span>        <span class="c1"># Longitude in degrees (valid if mode &gt;= 2)</span>
<span class="mf">144.99911</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">epx</span>              <span class="c1"># Longitude position uncertainty, meters</span>
<span class="mf">10.040781879264545</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">alitude</span>          <span class="c1"># Altitude in meters (valid if mode == 3)</span>
<span class="mf">68.2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">epv</span>              <span class="c1"># Vertical position uncertainty, meters</span>
<span class="mf">19.55</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">track</span>            <span class="c1"># Course made good (relative to true north)</span>
<span class="mf">44.45</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">epd</span>              <span class="c1"># Track uncertainty, degrees</span>
<span class="n">nan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">speed</span>            <span class="c1"># Speed over ground, meters/sec</span>
<span class="mf">0.3446777748</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">eps</span>              <span class="c1"># Speed uncertainty, meters/sec</span>
<span class="mf">29.707764044513397</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">climb</span>            <span class="c1"># Vertical speed, meters/sec</span>
<span class="mf">0.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">fix</span><span class="o">.</span><span class="n">epc</span>              <span class="c1"># Vertical speed uncertainty</span>
<span class="n">nan</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">dop</span><span class="o">.</span><span class="n">xdop</span>
<span class="mf">0.6693854586176363</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">dop</span><span class="o">.</span><span class="n">ydop</span>
<span class="mf">0.9902588014837799</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">dop</span><span class="o">.</span><span class="n">pdop</span>
<span class="mf">1.17</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">dop</span><span class="o">.</span><span class="n">hdop</span>
<span class="mf">0.99</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">dop</span><span class="o">.</span><span class="n">vdop</span>
<span class="mf">0.82</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">dop</span><span class="o">.</span><span class="n">tdop</span>
<span class="mf">1.2548625723457216</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">dop</span><span class="o">.</span><span class="n">gdop</span>
<span class="mf">2.4342743978108503</span>
</pre>
<p>Information about satellites is contained in the <tt>satellites</tt> list.</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">satellites</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ss</span>         <span class="c1"># Signal-to-noise ratio (dB)</span>
<span class="mf">16.0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">satellites</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">used</span>       <span class="c1"># Used in solution?</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">satellites</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">prn</span>        <span class="c1"># PRNs of satellite</span>
<span class="mi">6</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">satellites</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">elevation</span>  <span class="c1"># Elevation of satellite, degrees</span>
<span class="mi">56</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">gpsd_shm</span><span class="o">.</span><span class="n">satellites</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">azimuth</span>    <span class="c1"># Azimuth, degrees</span>
<span class="mi">59</span>
</pre>
</div>
<div id="compiling-gpsd-with-shared-memory-support">
<h2>Compiling gpsd with shared memory support</h2>
<pre><span class="gp">$</span> git clone git://git.sv.gnu.org/gpsd.git   <span class="c1"># git clone http://git.savannah.gnu.org/r/gpsd.git
</span><span class="gp">$</span><span class="c1"/> <span class="nb">cd</span> gpsd
<span class="gp">$</span> git tag
<span class="gp">$</span> git checkout release-3.16
<span class="gp">$</span> scons <span class="nv">prefix</span><span class="o">=</span>/usr/local <span class="nv">shm_export</span><span class="o">=</span>yes
<span class="gp">$</span> sudo scons install
</pre>
<p>Then run start gpsd and check whether the shared segment has been created.</p>
<pre><span class="gp">$</span> sudo /usr/local/sbin/gpsd -n /dev/ttyAMA0
<span class="gp">$</span> ipcs -m <span class="p">|</span> grep 0x47505344
<span class="go">------ Shared Memory Segments --------
key        shmid      owner      perms      bytes      nattch     status
0x47505344 163844     root       666        31616      1</span>
</pre>
</div>
</div></body></html>