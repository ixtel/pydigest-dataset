<html><body><div><p>Django app to write Telegram bots. Just define commands and how to handle them.</p>
<p>NOTE: Just for text messages at this moment.</p>
<div id="quickstart">
<h2>Quickstart</h2>
<p>Install django-telegram-bot:</p>
<pre>pip install django-telegram-bot
</pre>
<p>Add <tt>telegrambot</tt> and <tt>rest_framework</tt> to your <tt>INSTALLED_APPS</tt>, and run:</p>
<pre>$ python manage.py migrate
</pre>
<p>After creating a bot in Telegram Platform, create at least one bot with django admin. Token is the only
required field. You may need to provided public key certificate for your server. <a href="https://core.telegram.org/bots/self-signed" rel="nofollow">https://core.telegram.org/bots/self-signed</a>
Heroku has https and ssl by default so it is a good option if you dont want to deal with that.</p>
<p>Add webhook url to your urlpatterns:</p>
<pre>url(r'^telegrambot/', include('telegrambot.urls', namespace="telegrambot")
</pre>
<p>Define whe file where commands will be defined in <tt>urlpatterns</tt> variable, analogue to django <tt>urls</tt>
and <tt>ROOT_URLCONF</tt>:</p>
<pre>TELEGRAM_BOT_HANDLERS_CONF = "app.handlers"
</pre>
<p>Set bot commands handlers is very easy just as defining <cite>urls</cite> in django. Module with <tt>urlpatterns</tt> that list
different handlers. You can <cite>regex</cite> directly or use shortcuts like <cite>command</cite> or <cite>unknown_command</cite></p>
<pre>urlpatterns = [command('start', StartView.as_command_view()),
           command('author', AuthorCommandView.as_command_view()),
           command('author_inverse', AuthorInverseListView.as_command_view()),
           command('author_query', login_required(AuthorCommandQueryView.as_command_view())),
           unknown_command(UnknownView.as_command_view()),
           regex(r'author_(?P&lt;name&gt;\w+)', AuthorName.as_command_view()),
          ]
</pre>
<p>To set the webhook for telegram you need <tt>django.contrib.sites</tt> installed, <tt>SITE_ID</tt> configured
in settings and with it correct value in the DB. The webhook for each bot is set when a Bot is saved and
<tt>enabled</tt> field is set to true.</p>
<p>Bot views responses with Telegram messages to the user who send the command with a text message and keyboard.
Compound with a context and a template. The way it is handled is analogue to Django views.  Visits docs for more
details <a href="https://django-telegram-bot.readthedocs.org/usage.html" rel="nofollow">https://django-telegram-bot.readthedocs.org/usage.html</a></p>
</div>
</div></body></html>