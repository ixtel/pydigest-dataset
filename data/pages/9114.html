<html><body><div><div id="mwclient">
<h2>mwclient</h2>
<p>mwclient is a lightweight Python client library to the <a href="https://mediawiki.org/wiki/API" rel="nofollow">MediaWiki API</a>
which provides access to most API functionality.
It works with Python 2.6, 2.7, 3.3 and above, and supports MediaWiki 1.16 and above.
For functions not available in the current MediaWiki, a <tt>MediaWikiVersionError</tt> is raised.</p>
<p>This framework was written by Bryan Tong Minh, who maintained the project until
version 0.6.5, released on 6 May 2011. The current stable
<a href="https://github.com/mwclient/mwclient/archive/v0.8.1.zip" rel="nofollow">version 0.8.1</a>
was released on 5 February 2016, and is <a href="https://pypi.python.org/pypi/mwclient" rel="nofollow">available through PyPI</a>:</p>
<pre><span class="gp">$</span> pip install mwclient
</pre>
<p>The current <a href="https://github.com/mwclient/mwclient" rel="nofollow">development version</a>
can be installed from GitHub:</p>
<pre><span class="gp">$</span> pip install git+git://github.com/mwclient/mwclient.git
</pre>
<p>Please see the
<a href="https://github.com/mwclient/mwclient/blob/master/RELEASE-NOTES.md" rel="nofollow">release notes</a>
for a list of changes.</p>
<div id="contributing">
<h3>Contributing</h3>
<p>mwclient ships with a test suite based on <a href="https://pytest.org" rel="nofollow">pytest</a>.
Only a small part of mwclient is currently tested, but hopefully coverage
will improve in the future.</p>
<p>The easiest way to run tests is:</p>
<pre><span class="gp">$</span> python setup.py <span class="nb">test</span>
</pre>
<p>This will make an in-place build and download test dependencies locally
if needed. To make tests run faster, you can use pip to do an
<a href="https://pip.readthedocs.org/en/latest/reference/pip_install.html#editable-installs" rel="nofollow">“editable” install</a>:</p>
<pre><span class="gp">$</span> pip install pytest pytest-pep8 responses
<span class="gp">$</span> pip install -e .
<span class="gp">$</span> py.test
</pre>
<p>To run tests with different Python versions in isolated virtualenvs, you
can use <a href="https://testrun.org/tox/latest/" rel="nofollow">Tox</a>:</p>
<pre><span class="gp">$</span> pip install tox
<span class="gp">$</span> tox
</pre>
</div>
<div id="implementation-notes">
<h3>Implementation notes</h3>
<p>Most properties and generators accept the same parameters as the API,
without their two-letter prefix. Exceptions to this rule:</p>
<ul>
<li><tt>Image.imageinfo</tt> is the imageinfo of the latest image.
Earlier versions can be fetched using <tt>imagehistory()</tt></li>
<li><tt>Site.all*</tt>: parameter <tt>[ap]from</tt> renamed to <tt>start</tt></li>
<li><tt>categorymembers</tt> is implemented as <tt>Category.members</tt></li>
<li><tt>deletedrevs</tt> is <tt>deletedrevisions</tt></li>
<li><tt>usercontribs</tt> is <tt>usercontributions</tt></li>
<li>First parameters of <tt>search</tt> and <tt>usercontributions</tt> are <tt>search</tt> and <tt>user</tt>
respectively</li>
</ul>
<p>Properties and generators are implemented as Python generators.
Their limit parameter is only an indication of the number of items in one chunk.
It is not the total limit.
Doing <tt>list(generator(limit = limit))</tt> will return ALL items of generator,
and not be limited by the limit value.
Default chunk size is generally the maximum chunk size.</p>
</div>
<div id="https">
<h3>HTTPS</h3>
<p>mwclient uses https as default from version 0.8.0. To use http instead,
specify the host as a tuple in the form of <tt>('http', hostname)</tt>.</p>
</div>
<div id="user-agents">
<h3>User-agents</h3>
<p>Bots that run on Wikimedia wikis <a href="https://meta.wikimedia.org/wiki/User-Agent_policy" rel="nofollow">require an informative user-agent for all
API requests</a>. To change
the user-agent, you will need to include an appropriate parameter for
<tt>clients_useragent</tt> when you initialize your <tt>Site</tt>, as shown in the
following example:</p>
<pre><span class="n">useragent</span> <span class="o">=</span> <span class="s1">'YourBot, based on mwclient v0.7.2. Run by User:You, you@gmail.com'</span>
<span class="n">site</span> <span class="o">=</span> <span class="n">mwclient</span><span class="o">.</span><span class="n">Site</span><span class="p">(</span><span class="s1">'en.wikipedia.org'</span><span class="p">,</span> <span class="n">clients_useragent</span><span class="o">=</span><span class="n">useragent</span><span class="p">)</span>
</pre>
</div>
<div id="example">
<h3>Example</h3>
<p>For more information, see the
<a href="https://github.com/mwclient/mwclient/blob/master/REFERENCE.md" rel="nofollow">REFERENCE.md</a> file
or the
<a href="https://github.com/mwclient/mwclient/wiki" rel="nofollow">documentation on the wiki</a>.</p>
<pre><span class="c1"># Initialize Site object</span>
<span class="kn">import</span> <span class="nn">mwclient</span>
<span class="n">site</span> <span class="o">=</span> <span class="n">mwclient</span><span class="o">.</span><span class="n">Site</span><span class="p">(</span><span class="s1">'commons.wikimedia.org'</span><span class="p">)</span>
<span class="n">site</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

<span class="c1"># Edit page</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">Pages</span><span class="p">[</span><span class="s1">'Commons:Sandbox'</span><span class="p">]</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
<span class="k">print</span> <span class="s1">'Text in sandbox:'</span><span class="p">,</span> <span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)</span>
<span class="n">page</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">text</span> <span class="o">+</span> <span class="s1">u'</span><span class="se">\n</span><span class="s1">Extra data'</span><span class="p">,</span> <span class="n">summary</span> <span class="o">=</span> <span class="s1">'Test edit'</span><span class="p">)</span>

<span class="c1"># Printing imageusage</span>
<span class="n">image</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">Images</span><span class="p">[</span><span class="s1">'Example.jpg'</span><span class="p">]</span>
<span class="k">print</span> <span class="s1">'Image'</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">),</span> <span class="s1">'usage:'</span>
<span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">image</span><span class="o">.</span><span class="n">imageusage</span><span class="p">():</span>
        <span class="k">print</span> <span class="s1">'Used:'</span><span class="p">,</span> <span class="n">page</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">),</span> <span class="s1">'; namespace'</span><span class="p">,</span> <span class="n">page</span><span class="o">.</span><span class="n">namespace</span>
        <span class="k">print</span> <span class="s1">'Image info:'</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">imageinfo</span>

<span class="c1"># Uploading a file</span>
<span class="n">site</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">'file.jpg'</span><span class="p">),</span> <span class="s1">'destination.jpg'</span><span class="p">,</span> <span class="s1">'Image description'</span><span class="p">)</span>

<span class="c1"># Listing all categories (don't do this in reality)</span>
<span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">site</span><span class="o">.</span><span class="n">allcategories</span><span class="p">():</span>
        <span class="k">print</span> <span class="n">category</span>
</pre>
</div>
</div>


</div></body></html>