<html><body><div><div itemprop="articleBody"><p>I found a cool tool today to measure code: <a class="reference external" href="https://pypi.python.org/pypi/metrics">metrics</a>. It measures SLOC, comments and cyclomatic complexity. It's easy to install: <tt class="docutils literal">pip install pygments metrics</tt></p><p>Run this in your project's root:</p><div class="highlight"><pre><span/>metrics -v <span class="sb">`</span>find . -type f <span class="se">\(</span> -iname <span class="s2">"*.css"</span> -or -iname <span class="s2">"*.py"</span> -or -iname <span class="s2">"*.js"</span> -or -iname <span class="s2">"*.html"</span> -or -iname <span class="s2">"*.txt"</span> <span class="se">\)</span> <span class="se">\!</span> -path <span class="s2">"*/migrations/*.py"</span> -print<span class="sb">`</span>
</pre></div><p>I have a django project so I added <tt class="docutils literal">\! <span class="pre">-path</span> <span class="pre">"*/migrations/*.py"</span></tt> to skip any files that are in a migrations dir (I'd skip the automatically generated <a class="reference external" href="http://south.aeracode.org/">south</a> migrations).</p><p>You probably bundle other libraries or apps in your source tree (eg: jquery or that nice django app the author didn't bother to make a setup.py script for) so you want to measure only some specific paths. Eg, to collect stats only for files in src/foobar, lib/tools and src/otherbar:</p><div class="highlight"><pre><span/>metrics -v <span class="sb">`</span>find src/foobar lib/tools src/otherbar -type f <span class="se">\(</span> -iname <span class="s2">"*.css"</span> -or -iname <span class="s2">"*.py"</span> -or -iname <span class="s2">"*.js"</span> -or -iname <span class="s2">"*.html"</span> -or -iname <span class="s2">"*.txt"</span> <span class="se">\)</span> <span class="se">\!</span> -path <span class="s2">"*/migrations/*.py"</span> -print<span class="sb">`</span>
</pre></div><p>If you work on multiple projects you can make a script or alias for this:</p><div class="highlight"><pre><span/>metrics -v <span class="sb">`</span>find <span class="se">\`</span>cat METRICS<span class="se">\`</span> -type f <span class="se">\(</span> -iname <span class="s2">"*.css"</span> -or -iname <span class="s2">"*.py"</span> -or -iname <span class="s2">"*.js"</span> -or -iname <span class="s2">"*.html"</span> -or -iname <span class="s2">"*.txt"</span> <span class="se">\)</span> <span class="se">\!</span> -path <span class="s2">"*/migrations/*.py"</span> -print<span class="sb">`</span>
</pre></div><p>And in each project just save a <tt class="docutils literal">METRICS</tt> file with the list of paths.</p><p>I get something like this for one random project:</p><div class="term container"><pre class="literal-block">
Metrics Summary:
Files                       Language        SLOC Comment McCabe
----- ------------------------------ ----------- ------- ------
  129                         Python        4831     289    261
    2                      Text only           0       0      0
   49              HTML+Django/Jinja        1381      19    166
    7                     JavaScript        2204     231    352
   21                            CSS        1839     111      0
----- ------------------------------ ----------- ------- ------
  208                          Total       10255     650    779
</pre></div><p>Do McCabe (aka <a class="reference external" href="http://en.wikipedia.org/wiki/Cyclomatic_complexity">cyclomatic complexity</a>) ratios (<tt class="docutils literal"><span class="pre">McCabe/(SLOC-Comment)</span></tt>) look odd? (0.17 for javascript and and 0.05 for python).</p><p>Do you know other measurement tools adequate for Django projects? Do tell me and, if possible, how to run it for specific files like above (I'm lazy :)</p></div></div></body></html>