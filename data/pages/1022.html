<html><body><div><div class="pf-content"><p>Redirecting stdout seems to be a pretty common request on the wxPython users group, so I decided to see how easy it would be to do it with Tkinter. The typical use case for redirecting stdout or stderr is that you are calling some other process (like ping or tracert) and you want to catch what it’s doing to put it into your UI. Usually you can just use Python’s <strong>subprocess</strong> module and call its <strong>communicate()</strong> method to access the data. Then you can just print it to stdout and it will magically appear in your UI’s widget of choice. </p>
<p>Our finished user interface will look something like the following:</p>
<p><a href="http://www.blog.pythonlibrary.org/wp-content/uploads/2014/07/tkredirect.png"><img src="http://www.blog.pythonlibrary.org/wp-content/uploads/2014/07/tkredirect-300x235.png" alt="tkredirect.png" class="aligncenter size-medium wp-image-4168"/></a></p>
<p>Let’s find out how to do this with Tkinter:<span id="more-4162"/></p>
<pre class="python"><span>import</span> <span>ScrolledText</span>
<span>import</span> <span>sys</span>
<span>import</span> tkFileDialog
<span>import</span> <span>Tkinter</span>
 
 
<span>########################################################################</span>
<span>class</span> RedirectText<span>(</span><span>object</span><span>)</span>:
    <span>""</span><span>""</span><span>""</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span>, text_ctrl<span>)</span>:
        <span>""</span><span>"Constructor"</span><span>""</span>
        <span>self</span>.<span>output</span> = text_ctrl
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> write<span>(</span><span>self</span>, <span>string</span><span>)</span>:
        <span>""</span><span>""</span><span>""</span>
        <span>self</span>.<span>output</span>.<span>insert</span><span>(</span><span>Tkinter</span>.<span>END</span>, <span>string</span><span>)</span>
 
 
<span>########################################################################</span>
<span>class</span> MyApp<span>(</span><span>object</span><span>)</span>:
    <span>""</span><span>""</span><span>""</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> <span>__init__</span><span>(</span><span>self</span>, parent<span>)</span>:
        <span>""</span><span>"Constructor"</span><span>""</span>
        <span>self</span>.<span>root</span> = parent
        <span>self</span>.<span>root</span>.<span>title</span><span>(</span><span>"Redirect"</span><span>)</span>
        <span>self</span>.<span>frame</span> = <span>Tkinter</span>.<span>Frame</span><span>(</span>parent<span>)</span>
        <span>self</span>.<span>frame</span>.<span>pack</span><span>(</span><span>)</span>
 
        <span>self</span>.<span>text</span> = <span>ScrolledText</span>.<span>ScrolledText</span><span>(</span><span>self</span>.<span>frame</span><span>)</span>
        <span>self</span>.<span>text</span>.<span>pack</span><span>(</span><span>)</span>
 
        <span># redirect stdout</span>
        redir = RedirectText<span>(</span><span>self</span>.<span>text</span><span>)</span>
        <span>sys</span>.<span>stdout</span> = redir
 
        btn = <span>Tkinter</span>.<span>Button</span><span>(</span><span>self</span>.<span>frame</span>, text=<span>"Open file"</span>, command=<span>self</span>.<span>open_file</span><span>)</span>
        btn.<span>pack</span><span>(</span><span>)</span>
 
    <span>#----------------------------------------------------------------------</span>
    <span>def</span> open_file<span>(</span><span>self</span><span>)</span>:
        <span>""</span><span>"
        Open a file, read it line-by-line and print out each line to
        the text control widget
        "</span><span>""</span>
        options = <span>{</span><span>}</span>
        options<span>[</span><span>'defaultextension'</span><span>]</span> = <span>'.txt'</span>
        options<span>[</span><span>'filetypes'</span><span>]</span> = <span>[</span><span>(</span><span>'all files'</span>, <span>'.*'</span><span>)</span>, <span>(</span><span>'text files'</span>, <span>'.txt'</span><span>)</span><span>]</span>
        options<span>[</span><span>'initialdir'</span><span>]</span> = <span>'/home'</span>
        options<span>[</span><span>'parent'</span><span>]</span> = <span>self</span>.<span>root</span>
        options<span>[</span><span>'title'</span><span>]</span> = <span>"Open a file"</span>
 
        with tkFileDialog.<span>askopenfile</span><span>(</span>mode=<span>'r'</span>, <span>**</span>options<span>)</span> as f_handle:
            <span>for</span> line <span>in</span> f_handle:
                <span>print</span> line
 
<span>#----------------------------------------------------------------------</span>
<span>if</span> __name__ == <span>"__main__"</span>:
    root = <span>Tkinter</span>.<span>Tk</span><span>(</span><span>)</span>
    root.<span>geometry</span><span>(</span><span>"800x600"</span><span>)</span>
    app = MyApp<span>(</span>root<span>)</span>
    root.<span>mainloop</span><span>(</span><span>)</span></pre>
<p>That was a fair bit of code. Let’s take a minute or two to break it down. First off, we imported <strong>ScrolledText</strong>, which is text control that includes a scroll bar. We also imported <strong>tkFileDialog</strong> which gives us the ability to open a file. To make this example really simple, we will just use the dialog to open a text file and print it out line-by-line to stdout. </p>
<p>The first class we see is called <strong>RedirectText</strong>. It takes a text control widget as its parameter. we create a <strong>write</strong> method that will append a string to the widget’s current value. Then in the <strong>MyApp</strong> class, we create all the necessary widgets and redirect stdout to our RedirectText class. We also bind the button to our <strong>open_file</strong> method. This is where the action happens! </p>
<p>Here we create the file dialog and open a file. Then we read the file line by line and print it to stdout. If you try the example, you will see each line of text appear in the ScrolledText widget.</p>
<hr/>
<h3>Wrapping Up</h3>
<p>
</p><p>As you can see, redirecting stdout / stderr is pretty easy. I hope you will find many neat uses for this technique. Happy coding!</p>
<hr/>
<h3>Related Reading</h3>
<p>
</p>
</div>	</div></body></html>