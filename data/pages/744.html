<html><body><div><section class="entry">
<p class="fsb-clear"/><div id="attachment_460" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2014/03/finding-the-gameboy-screen.jpg"><img class="wp-image-460" src="http://www.pyimagesearch.com/wp-content/uploads/2014/03/finding-the-gameboy-screen.jpg" alt="Finding a Game Boy screen in an image using Python and OpenCV."/></a><p class="wp-caption-text"><strong>Figure 1:</strong> Finding a Game Boy screen in an image using Python and OpenCV.</p></div>
<p>Quick question.</p>
<p>How does a Pokedex work?</p>
<p>Well, you simply point it a Pokemon, the Pokedex examines its physical characteristics, and the Pokemon is identified instantly.</p>

<p>In this case, our smartphone camera is our “Pokedex”. We point our smartphone at our Game Boy, snap a photo of it, and our rival Pokemon is identified (if you don’t believe me, you can see my Pokedex in action by watching <a href="https://www.youtube.com/watch?v=pDuBit0LWQ4" target="_blank">this YouTube clip</a>).</p>
<p>However, there is a lot of information in our image that we don’t need.</p>
<p>We don’t need the shell of the Game Boy case. We don’t need the A, B, up, down, left, right, or start or select buttons. And we certainly don’t care about the background our image was photographed on.</p>
<p><em>All we care about is the Game Boy screen.</em></p>
<p>Because once we find that Game Boy screen, we can crop out the Pokemon, and perform the identification.</p>
<p>In this post I’ll show you how to <em><b>automatically</b></em> find a Game Boy screen in an image using nothing but Python and OpenCV. Specifically, we’ll be using the OpenCV contours functionality and the <code>findContours</code> function in the <code>cv2</code> package.</p>
<p>Ready?</p>
<p>Here we go.</p>
<p><strong>OpenCV and Python versions:</strong><br/>
This example will run on<strong> Python 2.7</strong> and <strong>OpenCV 2.4.X</strong>.</p>
<h1>Previous Posts</h1>
<p>This post is part of an on-going series of blog posts on how to build a real-life Pokedex using Python, OpenCV, and computer vision and image processing techniques. If this is the first post in the series that you are reading, definitely take the time to read through it and check it out.</p>
<p>Being able to find a Game Boy screen in an image isn’t just cool, it’s super practical. I can think of 10-15 different ways to build a small mobile app business using <em>nothing</em> but Game Boy screenshots and mobile technology, such as smartphones.</p>
<p>Sound interesting? Don’t be shy. <a href="http://www.pyimagesearch.com/contact/" target="_blank">Send me a message and we can chat some more</a>.</p>
<p>Anyway, after you read this post, go back to the previous posts in this series for some added context and information.</p>

<h1>Building a Pokedex in Python: Finding the Game Boy Screen</h1>
<p>Before we can <em>find</em> the Game Boy screen in an image, we first need an image of a Game Boy:</p>
<div id="attachment_459" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2014/03/gameboy-query.jpg"><img class="size-full wp-image-459" src="http://www.pyimagesearch.com/wp-content/uploads/2014/03/gameboy-query.jpg" alt="Figure 1: Our original Game Boy query image. Our goal is to find the screen in this image."/></a><p class="wp-caption-text"><strong>Figure 2:</strong> Our original Game Boy query image. Our goal is to find the screen in this image.</p></div>
<p>By the way, if you want the raw, original image, <a>be sure to download the source code at the bottom of this post</a>. I’ve thrown in my FREE 11-page Image Search Engine Resource Guide PDF just to say thanks for downloading the code.</p>
<p>Okay, so now that we have our image, our goal is to find the screen of our Game Boy and highlight it, just as we did in the middle screenshot of Figure 1 at the top of this post.</p>
<p>Fire up your favorite text editor and create a new file named <code>find_screen.py</code>. We’re about to get our hands dirty:</p>

		<div id="crayon-56d5ac1223b83553269176" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5ac1223b83553269176-1"><span class="crayon-c"># import the necessary packages</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b83553269176-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">pyimagesearch </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">imutils</span></p><p class="crayon-line" id="crayon-56d5ac1223b83553269176-3"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">skimage </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">exposure</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b83553269176-4"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">numpy </span><span class="crayon-st">as</span><span class="crayon-h"> </span><span class="crayon-e">np</span></p><p class="crayon-line" id="crayon-56d5ac1223b83553269176-5"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b83553269176-6"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span></p><p class="crayon-line" id="crayon-56d5ac1223b83553269176-7"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b83553269176-8"><span class="crayon-c"># construct the argument parser and parse the arguments</span></p><p class="crayon-line" id="crayon-56d5ac1223b83553269176-9"><span class="crayon-v">ap</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span><span class="crayon-sy">.</span><span class="crayon-e">ArgumentParser</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b83553269176-10"><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">add_argument</span><span class="crayon-sy">(</span><span class="crayon-s">"-q"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"--query"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">required</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5ac1223b83553269176-11"><span class="crayon-h">	</span><span class="crayon-k ">help</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">"Path to the query image"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b83553269176-12"><span class="crayon-v">args</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">vars</span><span class="crayon-sy">(</span><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">parse_args</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><strong>Lines 2-6</strong> just handle importing our packages. We’ll make use of <code>skimage</code>, but I won’t go over that until the next blog post in the series, so don’t worry about that for now. We’ll use NumPy like we always do, <code>argparse</code> to parse our command line arguments, and <code>cv2</code> contains our OpenCV bindings.</p>
<p>We only need one command line argument: <code>--query</code> points to the path to where our query image is stored on disk.</p>
<p>If you’re wondering about <code>imutils</code> on <strong>Line 2</strong>, refer back to my post on <a href="http://www.pyimagesearch.com/2014/01/20/basic-image-manipulations-in-python-and-opencv-resizing-scaling-rotating-and-cropping/" target="_blank">Basic Image Manipulations in Python and OpenCV</a>, where I go over resizing, rotating, and translating. The <code>imutils.py</code> file in the <code>pyimagesearch</code> module simply contains convenience methods to handle basic image processing techniques.</p>
<p>Next up, let’s load our query image and start processing the image:</p>

		<div id="crayon-56d5ac1223b9b527548601" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b9b527548601-14"><span class="crayon-c"># load the query image, compute the ratio of the old height</span></p><p class="crayon-line" id="crayon-56d5ac1223b9b527548601-15"><span class="crayon-c"># to the new height, clone it, and resize it</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b9b527548601-16"><span class="crayon-v">image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">imread</span><span class="crayon-sy">(</span><span class="crayon-v">args</span><span class="crayon-sy">[</span><span class="crayon-s">"query"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5ac1223b9b527548601-17"><span class="crayon-v">ratio</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">image</span><span class="crayon-sy">.</span><span class="crayon-v">shape</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-cn">300.0</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b9b527548601-18"><span class="crayon-v">orig</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">image</span><span class="crayon-sy">.</span><span class="crayon-k ">copy</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5ac1223b9b527548601-19"><span class="crayon-v">image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">imutils</span><span class="crayon-sy">.</span><span class="crayon-e">resize</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">height</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">300</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b9b527548601-20"> </p><p class="crayon-line" id="crayon-56d5ac1223b9b527548601-21"><span class="crayon-c"># convert the image to grayscale, blur it, and find edges</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b9b527548601-22"><span class="crayon-c"># in the image</span></p><p class="crayon-line" id="crayon-56d5ac1223b9b527548601-23"><span class="crayon-v">gray</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">cvtColor</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">COLOR_BGR2GRAY</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223b9b527548601-24"><span class="crayon-v">gray</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">bilateralFilter</span><span class="crayon-sy">(</span><span class="crayon-v">gray</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">11</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5ac1223b9b527548601-25"><span class="crayon-v">edged</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">Canny</span><span class="crayon-sy">(</span><span class="crayon-v">gray</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">30</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">200</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>On <strong>Line 16</strong> we load our query image off disk. We supplied the path to the query image using the <code>--query</code> command line argument.</p>
<p>In order to make our processing steps faster, we need to resize the image. The smaller the image is, the faster it is to process. The tradeoff is that if you make your image too small, then you miss out on valuable details in the image.</p>
<p>In this case, we want our new image height to be 300 pixels. On <strong>Line 17</strong> we compute the <code>ratio</code> of the old height to the new height, then we make a clone of the original image on <strong>Line 18</strong>. Finally, <strong>Line 19</strong> handles resizing the image to a height of 300 pixels.</p>
<p>From there, we convert our image to grayscale on <strong>Line 23</strong>. We then blur the image slightly by using the <code>cv2.bilateralFilter</code> function. Bilateral filtering has the nice property of removing noise in the image while still preserving the actual edges. The edges are important since we will need them to find the screen in the Game Boy image.</p>
<p>Finally, we apply Canny edge detection on <strong>Line 25</strong>.</p>
<p>As the name suggests, the Canny edge detector finds edge like regions in our image. Check out the image below to see what I mean:</p>
<div id="attachment_480" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2014/03/edged.jpg"><img class="size-full wp-image-480" src="http://www.pyimagesearch.com/wp-content/uploads/2014/03/edged.jpg" alt="Figure 3: Applying edge detection to our Game Boy image. Notice how we can clearly see the outline of the screen."/></a><p class="wp-caption-text"><strong>Figure 3:</strong> Applying edge detection to our Game Boy image. Notice how we can clearly see the outline of the screen.</p></div>
<p>Clearly we can see that there is a rectangular edge region that corresponds to the screen of our Game Boy. But how do we find it? Let me show you:</p>

		<div id="crayon-56d5ac1223ba1408854383" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5ac1223ba1408854383-27"><span class="crayon-c"># find contours in the edged image, keep only the largest</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223ba1408854383-28"><span class="crayon-c"># ones, and initialize our screen contour</span></p><p class="crayon-line" id="crayon-56d5ac1223ba1408854383-29"><span class="crayon-sy">(</span><span class="crayon-v">cnts</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">_</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">findContours</span><span class="crayon-sy">(</span><span class="crayon-v">edged</span><span class="crayon-sy">.</span><span class="crayon-k ">copy</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">RETR_TREE</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">CHAIN_APPROX_SIMPLE</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223ba1408854383-30"><span class="crayon-v">cnts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">sorted</span><span class="crayon-sy">(</span><span class="crayon-v">cnts</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">contourArea</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">reverse</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-o">:</span><span class="crayon-cn">10</span><span class="crayon-sy">]</span></p><p class="crayon-line" id="crayon-56d5ac1223ba1408854383-31"><span class="crayon-v">screenCnt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">None</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>In order to find the Game Boy screen in our edged image, we need to find the <em>contours</em> in the image. A contour refers to the outline or silhouette of an object — in this case, the outline of the Game Boy screen.</p>
<p>To find contours in an image, we need the OpenCV <code>cv2.findContours</code> function on <strong>Line 29</strong>. This method requires three parameters. The first is the image we want to find edges in. We pass in our edged image, making sure to clone it first. The <code>cv2.findContours</code> method is destructive (meaning it manipulates the image you pass in) so if you plan on using that image again later, be sure to clone it. The second parameter <code>cv2.RETR_TREE</code> tells OpenCV to compute the hierarchy (relationship) between contours. We could have also used the <code>cv2.RETR_LIST</code> option as well. Finally, we tell OpenCV to compress the contours to save space using <code>cv2.CV_CHAIN_APPROX_SIMPLE</code>.</p>
<p>In return, the <code>cv2.findContours</code> function gives us a list of contours that it has found.</p>
<p>Now that we have our contours, how are we going to determine which one corresponds to the Game Boy screen?</p>
<p><a href="https://www.pyimagesearch.com/practical-python-opencv/?src=in-post-finding-game-boy-screen"><img src="http://www.pyimagesearch.com/wp-content/uploads/2014/08/in_post_sales_banner.png" alt="Practical Python and OpenCV"/></a></p>
<p>Well, the first thing we should do is prune down the number of contours we need to process. We know the area of our Game Boy screen is quite large with respect to the rest of the regions in the image. <strong>Line 30</strong> handles sorting our contours, from largest to smallest, by calculating the area of the contour using <code>cv2.contourArea</code>. We now have only the 10 largest contours. Finally, we initialize <code>screenCnt</code>, the contour that corresponds to our Game Boy screen on <strong>Line 31</strong>.</p>
<p>We are now ready to determine which contour is the Game Boy screen:</p>

		<div id="crayon-56d5ac1223baa263963366" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5ac1223baa263963366-33"><span class="crayon-c"># loop over our contours</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223baa263963366-34"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">c</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">cnts</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5ac1223baa263963366-35"><span class="crayon-h">	</span><span class="crayon-c"># approximate the contour</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223baa263963366-36"><span class="crayon-h">	</span><span class="crayon-v">peri</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">arcLength</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5ac1223baa263963366-37"><span class="crayon-h">	</span><span class="crayon-v">approx</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">approxPolyDP</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0.02</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-v">peri</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223baa263963366-38"> </p><p class="crayon-line" id="crayon-56d5ac1223baa263963366-39"><span class="crayon-h">	</span><span class="crayon-c"># if our approximated contour has four points, then</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223baa263963366-40"><span class="crayon-h">	</span><span class="crayon-c"># we can assume that we have found our screen</span></p><p class="crayon-line" id="crayon-56d5ac1223baa263963366-41"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-k ">len</span><span class="crayon-sy">(</span><span class="crayon-v">approx</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-cn">4</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223baa263963366-42"><span class="crayon-h">		</span><span class="crayon-v">screenCnt</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">approx</span></p><p class="crayon-line" id="crayon-56d5ac1223baa263963366-43"><span class="crayon-e">		</span><span class="crayon-st">break</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>On <strong>Line 34</strong> we start looping over our 10 largest contours in the query image. Then, we <em>approximate</em> the contour using <code>cv2.arcLength</code> and <code>cv2.approxPolyDP</code>. These methods are used to approximate the polygonal curves of a contour. In order to approximate a contour, you need to supply your level of approximation precision. In this case, we use 2% of the perimeter of the contour. The precision is an important value to consider. If you intend on applying this code to your own projects, you’ll likely have to play around with the precision value.</p>
<p>Let’s stop and think about the shape of our Game Boy screen.</p>
<p>We know that a Game Boy screen is a rectangle.</p>
<p>And we know that a rectangle has four sides, thus has four vertices.</p>
<p>On <strong>Line 41</strong> we check to see how many points our approximated contour has. If the contour has four points it is (likely) our Game Boy screen. Provided that the contour has four points, we then store our approximated contour on <strong>Line 43</strong>.</p>
<p>The reason why I was able to do this four point check was because I had only a very small number of contours to investigate. I kept only the 10 largest contours and threw the others out. The likelihood of another contour being that large with a square approximation is quite low.</p>
<p>Drawing our screen contours, we can clearly see that we have found the Game Boy screen:</p>
<div id="attachment_470" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2014/03/gameboy-found-screen.jpg"><img class="size-full wp-image-470" src="http://www.pyimagesearch.com/wp-content/uploads/2014/03/gameboy-found-screen.jpg" alt="Figure 4: We have successfully found our Game Boy screen and highlighted it with a green rectangle."/></a><p class="wp-caption-text"><strong>Figure 4:</strong> We have successfully found our Game Boy screen and highlighted it with a green rectangle.</p></div>
<p><span>If you want to draw the contours yourself, just use the following code:</span></p>

		<div id="crayon-56d5ac1223bb4897915959" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5ac1223bb4897915959-1"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">drawContours</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">screenCnt</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">3</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5ac1223bb4897915959-2"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">imshow</span><span class="crayon-sy">(</span><span class="crayon-s">"Game Boy Screen"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">image</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5ac1223bb4897915959-3"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">waitKey</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>So there you have it, Part 1 of finding the Game Boy screen.</p>
<p>In Step 2 of this post, I’ll show you how to perform a perspective transform on the Game Boy screen as if you were “looking down” at your Game Boy from above. Then, we’ll crop out the actual Pokemon. Take a look at the screenshot below to see what I mean:</p>
<div id="attachment_482" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2014/03/transform-and-crop.jpg"><img class=" wp-image-482 " src="http://www.pyimagesearch.com/wp-content/uploads/2014/03/transform-and-crop.jpg" alt="Figure 5: Performing a perspective transformation on the Game Boy screen and cropping out the Pokemon."/></a><p class="wp-caption-text"><strong>Figure 5:</strong> Performing a perspective transformation on the Game Boy screen and cropping out the Pokemon.</p></div>
<h1>Summary</h1>
<p>In this post I showed you how to find a Game Boy screen in an image using Python, OpenCV, and computer vision and image processing techniques.</p>
<p>We performed edge detection on our image, found the largest contours in the image using OpenCV and the <code>cv2.findContours</code> function, and approximated them to find their rudimentary shape. The largest contour with four points corresponds to our Game Boy screen.</p>
<p>Being able to find a Game Boy screen in an image isn’t just cool, it’s super practical. I can think of 10-15 different ways to build a small business using <em>nothing</em> but Game Boy screenshots and mobile technology, such as smartphones.</p>
<p>Sound interesting? Don’t be shy. <a href="http://www.pyimagesearch.com/contact/" target="_blank">Send me a message and we can chat some more</a>.</p>
<p>In the next post, I’ll show how you how to apply a perspective transformation to our Game Boy screen so that we have a birds-eye-view of the image. From there, we can easily crop out the Pokemon.</p>
<h1 id="post_downloads">Downloads:</h1>

	</section>
	</div></body></html>