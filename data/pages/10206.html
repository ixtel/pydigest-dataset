<html><body><div><div class="post-text" itemprop="text">
<p>In your code, you invoke FuncAnimation this way:</p>

<pre><code>ani = anim.FuncAnimation(fig, simPoints, simData, blit = false, interval=10, repeat= true)
</code></pre>

<p>In the original code, simData was a generator, but in your code it isn't, it returns a generator, so I'd expect your code to invoke it this way:</p>

<pre><code>ani = anim.FuncAnimation(fig, simPoints, simData(), blit = false, interval=10, repeat= true)
</code></pre>

<p>Let's finish the problem -- since we can't get Python to recognize the return value of simData() as an interator, we'll ignore that feature and have simPoints() call simData() to launch the task and then return a function for Python to animate:</p>

<pre><code>using PyCall
using PyPlot
pygui(true)

@pyimport matplotlib.animation as animation

function simData()
    t_max = 10.0
    dt = 0.05
    x = 0.0
    t = -dt

    function it()
        while t &lt; t_max
            x = sin(pi * t)
            t = t + dt
            produce(x, t)
        end
    end

    Task(it)
end

function simPoints()
    task = simData()

    function points(frame_number)
        x, t = consume(task)
        line[:set_data](t, x)
        return(line, "")
    end

    points
end

figure = plt[:figure]()
axis = figure[:add_subplot](111)
line = axis[:plot]([], [], "bo", ms = 10)[1]
axis[:set_ylim](-1, 1)
axis[:set_xlim](0, 10)

ani = animation.FuncAnimation(figure, simPoints(), blit=false, interval=10, frames=200, repeat=false)

plt[:show]()
</code></pre>

<p>This works for one pass of the bouncing ball across the graph and stops when it hits the right edge (unlike the original Python which repeats).  </p>
    </div>
    </div></body></html>