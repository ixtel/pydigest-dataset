<html><body><div><div id="disqus_post_message"><p>Почему-то никогда не думал, что <a href="http://docs.python.org/2/library/functions.html#range">range</a> (и <a href="http://docs.python.org/2/library/functions.html#xrange">xrange</a>) понимают только целые числа (в Python 3 ситуация такая же) и функцией нельзя воспользоваться, как например:</p>

<pre class="python" name="code"><code>range(0., 5., .5)
range(Decimal('0'), Decimal('10'), Decimal('1.5'))</code></pre>

<p>Поэтому пришлось сделать свою замену:</p>

<pre class="python" name="code"><code>import operator


def arange(start, stop=None, step=None):
    """
    Implement range function not only for integers as Python's builtin
    function, but for Decimals and floats as well.

    Returns generator with arithmetic progession, not list.
    """
    klass = type(start)
    lt_func = operator.lt

    stop = start if stop is None else stop
    start = klass(0) if start == stop else start
    step = klass(1 if step is None else step)

    assert isinstance(stop, klass), (
        'Start and stop limits have different types, {0!r} != {1!r}.'.
        format(type(start).__name__, type(stop).__name__)
    )
    assert step, "Step shouldn't be a zero: {0!r}.".format(step)

    if start  stop and step &gt; 0:
        raise StopIteration
    elif start &gt; stop and step </code></pre>

<p>В отличии от <code>range</code> в Python 2 <code>arange</code> отдает генератор, а не список, что вообщем-то удобней и правильней, ну и функция всегда вернет элементы такого же типа, как были переданы в <code>start</code> и <code>stop</code> аргументы, даже если шаг - это целое число или он не указан вовсе.</p>

<p>Как всегда код оформлен как <a href="https://gist.github.com/playpauseandstop/8832275">Gist на GitHub'е</a>, там еще доктесты и юниттесты.</p>
</div>


</div></body></html>