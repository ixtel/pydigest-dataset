<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-istruct" class="anchor" href="#istruct" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>istruct</h1>
<p>Immutable struct built on top of <code>collections.namedtuple</code> with sane defaults</p>
<a name="user-content-goals"/>
<h2><a id="user-content-goals" class="anchor" href="#goals" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Goals</h2>
<ul>
<li>Immutable, dictionary-like data structure (Note: <code>istruct</code> is <em>not</em> an immutable version of the existing <code>struct</code> in Python)</li>
<li>Minimal</li>
<li>Support required <em>and</em> optional fields (with default values)</li>
<li>Strictly disallow positional arguments</li>
</ul>
<a name="user-content-installation"/>
<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>
<p><code>pip install istruct</code></p>
<a name="user-content-quick-start"/>
<h2><a id="user-content-quick-start" class="anchor" href="#quick-start" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Quick Start</h2>
<p>First, create an <code>istruct</code> object called <code>person</code> where <code>first_name</code> and <code>last_name</code> are <em>required</em> whereas <code>middle_name</code>, <code>dob</code> and <code>email</code> are <em>optional</em> (with default values specified).</p>
<div class="highlight highlight-source-python"><pre>In [<span class="pl-c1">1</span>]: <span class="pl-k">from</span> istruct <span class="pl-k">import</span> istruct

In [<span class="pl-c1">2</span>]: person <span class="pl-k">=</span> istruct(<span class="pl-s"><span class="pl-pds">"</span>first_name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>last_name<span class="pl-pds">"</span></span>, <span class="pl-v">middle_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, <span class="pl-v">dob</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>2000-01-01<span class="pl-pds">"</span></span>, <span class="pl-v">email</span><span class="pl-k">=</span><span class="pl-c1">None</span>)</pre></div>
<p>Then, create an instance of <code>person</code> with <code>first_name</code>, <code>last_name</code> and <code>middle_name</code>.</p>
<div class="highlight highlight-source-python"><pre>In [<span class="pl-c1">3</span>]: p <span class="pl-k">=</span> person(<span class="pl-v">first_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Jim<span class="pl-pds">"</span></span>, <span class="pl-v">last_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Raynor<span class="pl-pds">"</span></span>, <span class="pl-v">middle_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Eugene<span class="pl-pds">"</span></span>)

In [<span class="pl-c1">4</span>]: p
Out[<span class="pl-c1">4</span>]: istruct(<span class="pl-v">first_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>Jim<span class="pl-pds">'</span></span>, <span class="pl-v">last_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>Raynor<span class="pl-pds">'</span></span>, <span class="pl-v">email</span><span class="pl-k">=</span><span class="pl-c1">None</span>, <span class="pl-v">dob</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>2000-01-01<span class="pl-pds">'</span></span>, <span class="pl-v">middle_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>Eugene<span class="pl-pds">'</span></span>)</pre></div>
<p>You can retrieve field values like you would normally do.</p>
<div class="highlight highlight-source-python"><pre>In [<span class="pl-c1">5</span>]: p.first_name
Out[<span class="pl-c1">5</span>]: <span class="pl-s"><span class="pl-pds">'</span>Jim<span class="pl-pds">'</span></span>

In [<span class="pl-c1">6</span>]: p.dob
Out[<span class="pl-c1">6</span>]: <span class="pl-s"><span class="pl-pds">'</span>2000-01-01<span class="pl-pds">'</span></span></pre></div>
<p><code>p</code> is immutable, meaning that it cannot be modified after created. Thus, set/delete operations like below would fail, raising an <code>AttributeError</code>.</p>
<div class="highlight highlight-source-python"><pre>In [<span class="pl-c1">7</span>]: p.first_name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>James<span class="pl-pds">"</span></span>
<span class="pl-ii">--------------------------------------------------------------------------</span><span class="pl-k">-</span>
<span class="pl-c1">AttributeError</span>                            Traceback (most recent call last)
<span class="pl-k">&lt;</span>ipython<span class="pl-k">-</span><span class="pl-c1">input</span><span class="pl-k">-</span><span class="pl-c1">13</span><span class="pl-k">-</span><span class="pl-ii">681faedb279a</span><span class="pl-k">&gt;</span> <span class="pl-k">in</span> <span class="pl-k">&lt;</span>module<span class="pl-k">&gt;</span>()
<span class="pl-ii">----</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span> p.first_name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>James<span class="pl-pds">"</span></span>

<span class="pl-c1">AttributeError</span>: can<span class="pl-s"><span class="pl-pds">'</span>t set attribute<span class="pl-ii"/></span>

In [<span class="pl-c1">8</span>]: <span class="pl-k">del</span> p.email
<span class="pl-ii">--------------------------------------------------------------------------</span><span class="pl-k">-</span>
<span class="pl-c1">AttributeError</span>                            Traceback (most recent call last)
<span class="pl-k">&lt;</span>ipython<span class="pl-k">-</span><span class="pl-c1">input</span><span class="pl-k">-</span><span class="pl-c1">12</span><span class="pl-k">-</span>d5c698764d13<span class="pl-k">&gt;</span> <span class="pl-k">in</span> <span class="pl-k">&lt;</span>module<span class="pl-k">&gt;</span>()
<span class="pl-ii">----</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span> <span class="pl-k">del</span> p.email

<span class="pl-c1">AttributeError</span>: can<span class="pl-s"><span class="pl-pds">'</span>t delete attribute<span class="pl-ii"/></span></pre></div>
<p><code>istruct</code> only accepts named/keyword arguments. It strictly disallows positional arguments by design.</p>
<div class="highlight highlight-source-python"><pre>In [<span class="pl-c1">9</span>]: p <span class="pl-k">=</span> person(<span class="pl-s"><span class="pl-pds">"</span>Jim<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Raynor<span class="pl-pds">"</span></span>)
<span class="pl-ii">--------------------------------------------------------------------------</span><span class="pl-k">-</span>
<span class="pl-c1">TypeError</span>                                 Traceback (most recent call last)
<span class="pl-k">&lt;</span>ipython<span class="pl-k">-</span><span class="pl-c1">input</span><span class="pl-k">-</span><span class="pl-c1">6</span><span class="pl-k">-</span>c0bdbd269e9f<span class="pl-k">&gt;</span> <span class="pl-k">in</span> <span class="pl-k">&lt;</span>module<span class="pl-k">&gt;</span>()
<span class="pl-ii">----</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span> p <span class="pl-k">=</span> person(<span class="pl-s"><span class="pl-pds">"</span>Jim<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Raynor<span class="pl-pds">"</span></span>)

<span class="pl-k">/</span>home<span class="pl-k">/</span>microamp<span class="pl-k">/</span>devel<span class="pl-k">/</span>projs<span class="pl-k">/</span>istruct<span class="pl-k">/</span>istruct<span class="pl-k">/</span><span class="pl-c1">__init__</span>.py <span class="pl-k">in</span> _istruct(<span class="pl-k">*</span>positional, <span class="pl-k">**</span>attrs)
     <span class="pl-c1">49</span>         <span class="pl-k">if</span> positional:
     <span class="pl-c1">50</span>             <span class="pl-k">raise</span> <span class="pl-c1">TypeError</span>(<span class="pl-s"><span class="pl-pds">"</span>No positional arguments are allowed in istruct <span class="pl-pds">"</span></span>
<span class="pl-ii">--</span><span class="pl-ii">-&gt;</span> <span class="pl-c1">51</span>                             <span class="pl-s"><span class="pl-pds">"</span>(<span class="pl-c1">%d</span> found)<span class="pl-pds">"</span></span> <span class="pl-k">%</span> (<span class="pl-c1">len</span>(positional),))
     <span class="pl-c1">52</span>
     <span class="pl-c1">53</span>         nt <span class="pl-k">=</span> namedtuple(<span class="pl-c1">__name__</span>,

<span class="pl-c1">TypeError</span>: No positional arguments are allowed <span class="pl-k">in</span> istruct (<span class="pl-c1">2</span> found)</pre></div>
<p><code>istruct</code> would raise a <code>TypeError</code> when one or more <em>required</em> fields are omitted.</p>
<div class="highlight highlight-source-python"><pre>In [<span class="pl-c1">10</span>]: p <span class="pl-k">=</span> person(<span class="pl-v">last_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Raynor<span class="pl-pds">"</span></span>)
<span class="pl-ii">--------------------------------------------------------------------------</span><span class="pl-k">-</span>
<span class="pl-c1">TypeError</span>                                 Traceback (most recent call last)
<span class="pl-k">&lt;</span>ipython<span class="pl-k">-</span><span class="pl-c1">input</span><span class="pl-k">-</span><span class="pl-c1">15</span><span class="pl-k">-</span><span class="pl-ii">451d2add9ee8</span><span class="pl-k">&gt;</span> <span class="pl-k">in</span> <span class="pl-k">&lt;</span>module<span class="pl-k">&gt;</span>()
<span class="pl-ii">----</span><span class="pl-k">&gt;</span> <span class="pl-c1">1</span> p <span class="pl-k">=</span> person(<span class="pl-v">last_name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>Raynor<span class="pl-pds">"</span></span>)

<span class="pl-k">/</span>home<span class="pl-k">/</span>microamp<span class="pl-k">/</span>devel<span class="pl-k">/</span>projs<span class="pl-k">/</span>istruct<span class="pl-k">/</span>istruct.py <span class="pl-k">in</span> _istruct(<span class="pl-k">**</span>attrs)
     <span class="pl-c1">25</span>     <span class="pl-k">def</span> <span class="pl-en">_istruct</span>(<span class="pl-k">**</span><span class="pl-smi">attrs</span>):
     <span class="pl-c1">26</span>         nt <span class="pl-k">=</span> namedtuple(name(), merge_tuples(args, <span class="pl-c1">tuple</span>(kwargs.keys())))
<span class="pl-ii">--</span><span class="pl-ii">-&gt;</span> <span class="pl-c1">27</span>         <span class="pl-k">return</span> nt(<span class="pl-k">**</span>merge_dicts(kwargs, attrs))
     <span class="pl-c1">28</span>
     <span class="pl-c1">29</span>     <span class="pl-k">return</span> _istruct

<span class="pl-c1">TypeError</span>: <span class="pl-c1">__new__</span>() missing <span class="pl-c1">1</span> required positional argument: <span class="pl-s"><span class="pl-pds">'</span>first_name<span class="pl-pds">'</span></span></pre></div>
<a name="user-content-versions-tested"/>
<h2><a id="user-content-versions-tested" class="anchor" href="#versions-tested" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Versions Tested</h2>
<ul>
<li>Python 2.7</li>
<li>Python 3.2</li>
<li>Python 3.3</li>
<li>Python 3.4</li>
<li>PyPy</li>
<li>PyPy3</li>
</ul>
<a name="user-content-todo"/>
<h2><a id="user-content-todo" class="anchor" href="#todo" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>TODO</h2>
<ul>
<li>Find ways to annotate types</li>
</ul>
<a name="user-content-license"/>
<h2><a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>License</h2>
<p>MIT</p>

</article>
  </div></body></html>