<html><body><div><div class="post-text" itemprop="text">

<p>I recently came accross the <code>yield</code> keyword in Python (as well as JavaScript) - I understand that this is primarliy used for the generator pattern, but the language construct seems to be used in asynchronous functions as well where my interests lie. In asynchronous functions it may merely act as syntatic-sugar and I know there are alternative patterns to achieve the same effect - But I like it - A LOT!</p>

<p>I want to know if I can do something similar in C (even with inline assembly). I came across a Java implementation using threads <a href="https://github.com/mherrmann/java-generator-functions">https://github.com/mherrmann/java-generator-functions</a> which I can more or less implement in C. However this is won't be a freestanding implementation, and my interest is purely in a freestanding implementation.</p>

<p>Coming to C co-routines (<a href="http://www.chiark.greenend.org.uk/~sgtatham/coroutines.html">http://www.chiark.greenend.org.uk/~sgtatham/coroutines.html</a>), one of the deficits is that stack objects can't be used. However I am still OK with this since current asynchronous callback implementations also can't use the stack. However the problem lies in a freestanding implementation - I can't think of a way to collect all the register variables and store them without a hosted environment.</p>

<p>There's probably a solution using the <code>setjmp/longjmp</code>, however I am pretty sure these can't be implemented freestanding.</p>

<p>So the question is: Is it possible to implement Python yield functionality in <strong>freestanding</strong> C?</p>

<p>Personally I think I have exhausted the possibilites, so I'll ask this - If you could have a hosted implementation, how would you implement it (preferably with some macro magic)? I have a fairly ugly implementation which I'll post later on if nothing cool comes up.</p>

<p>Also I don't want C++ implementations - Unless you can wrap around the C++ with pure C functions.</p>

<p>EDIT: A basic requirement is that the generator function has to be re-enterant.</p>
    </div>
    </div></body></html>