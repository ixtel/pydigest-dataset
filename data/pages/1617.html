<html><body><div><div class="post-body entry-content" id="post-body-8468429410117064482">
<p>
If you need to make Nginx to pass request to location B if location A fails with 404 error, then I've got a solution for you.
</p>

<p>
It turns out to be a rather simple task. All you need is:
</p>

<ul>
<li>Define location A.</li>
<li>Define location B.</li>
<li>Point A's error_page to B.</li>
<li>Allow interception of errors from A.</li>
</ul>

<p>
Here is an example:
</p>

<code data-gist-id="9655362d69f84f4167ca" data-gist-file="nginx.conf" data-gist-line="25-37"/>

<p>Here we have a uWSGI worker listening requests on 9001 port. In my case it's a Django application running under Vagrant. If a requested page will not be found, request will be passed to some another application listening on port 5000.</p>

<div class="info_snippet">
<p>
If you need to deal with something different from uWSGI, you might change names from "uwsgi_*" to "proxy_*", just like in case of 'fallback' location.
</p>
</div>


<div class="info_snippet">
<p>
You can handle errors with other status codes too.
</p>
</div>


<p>
Feel free to dig around <a href="https://gist.github.com/oblalex/9655362d69f84f4167ca">full example of Nginx config</a>. Maybe it will become useful too. Good luck!
</p>

<p/>
</div>
</div></body></html>