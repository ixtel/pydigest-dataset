<html><body><div><div class="entry-content">
		

<p>SQLAlchemy is the Python SQL toolkit and Object Relational Mapper that gives application developers the full power and flexibility of SQL.</p>
<p>It provides a full suite of well known enterprise-level persistence patterns, designed for efficient and high-performing database access, adapted into a simple and Pythonic domain language.</p>
<p><span id="more-252"/></p>
<p>In this article, we are going to start with some basic SQL queries using SQLAlchemy and use them to interact with a database of your choice.</p>
<h3>First Steps</h3>
<p>You are going to need <a href="http://sqlalchemy.org/">SQLAlchemy</a> package (version 1.0.8) and respective database drivers if you are going to use Relational Database.</p>
<h3>Creating Database</h3>
<p>We are going to be creating a database to work with. So open up your text editor and create a file called <code>sql.py</code> which we will use to create the database.</p>
<div class="sidebar-banner-container">
<p>First we need to connect to database from our script and to achieve this we will use the SQLAlchemy-provided Engine class for managing the connection to the database.</p>
<p>To get started using an Engine, you use the <code>create_engine()</code> function.</p>
<div id="crayon-537979ec34cc2673127699" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d5aa572bdb5185378115" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdb5185378115-1"><span class="crayon-st">from</span> <span class="crayon-i">sqlalchemy</span> <span class="crayon-r">import</span> <span class="crayon-e">create_engine</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdb5185378115-2"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:///test.sqlite'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>We have wide variety of options to choose what engine we need to create the database.</p>
<div id="crayon-537979ec34cd3214663707" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d5aa572bdbe760749668" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdbe760749668-1"><span class="crayon-c"># Create a connection to a SQLite in-memory database</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdbe760749668-2"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite://'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdbe760749668-3"><span class="crayon-c"># Create a connection to a SQLite on-disk database "data.sqlite"</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdbe760749668-4"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:///data.sqlite'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdbe760749668-5"><span class="crayon-c"># Create a connection to a PostGreSQL database</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdbe760749668-6"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'postgres://bar:foo@localhost/db_name'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdbe760749668-7"><span class="crayon-c"># Create a connection to a MySQL database</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdbe760749668-8"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'mysql://localhost/db_name'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>The configurational process starts by describing the database tables we’ll be dealing with, and then by defining our own classes which will be mapped to those tables and this process can be handled by the declarative class of SQLAlchemy.</p>
<div id="crayon-537979ec34cdb893101891" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d5aa572bdc1505187107" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdc1505187107-1"><span class="crayon-st">from</span> <span class="crayon-i">sqlalchemy</span> <span class="crayon-r">import</span> <span class="crayon-e">create_engine</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc1505187107-2"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-i">declarative</span> <span class="crayon-r">import</span> <span class="crayon-e">declarative_base</span></p><p class="crayon-line" id="crayon-56d5aa572bdc1505187107-3"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:///test.sqlite'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc1505187107-4"><span class="crayon-i">Base</span> <span class="crayon-o">=</span> <span class="crayon-e">declarative_base</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>Now that we have a Base , we can define any number of mapped classes in terms of it.</p>
<p>We will start with just a single table called books which will store records for the end-users using our application.</p>
<div id="crayon-537979ec34ce2022512475" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d5aa572bdc5550038947" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdc5550038947-1"><span class="crayon-t">class</span> <span class="crayon-e">Book</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc5550038947-2">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'books'</span></p><p class="crayon-line" id="crayon-56d5aa572bdc5550038947-3">    <span class="crayon-k ">id</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc5550038947-4">    <span class="crayon-i">name</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-k ">String</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdc5550038947-5">    <span class="crayon-i">author</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-k ">String</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc5550038947-6">    <span class="crayon-i">price</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdc5550038947-7">    <span class="crayon-r">def</span> <span class="crayon-e">__init__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">,</span> <span class="crayon-v">name</span><span class="crayon-sy">,</span> <span class="crayon-v">author</span><span class="crayon-sy">,</span> <span class="crayon-v">price</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc5550038947-8">        <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-i">name</span> <span class="crayon-o">=</span> <span class="crayon-i">name</span></p><p class="crayon-line" id="crayon-56d5aa572bdc5550038947-9">        <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-i">author</span> <span class="crayon-o">=</span> <span class="crayon-i">author</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc5550038947-10">        <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-i">price</span> <span class="crayon-o">=</span> <span class="crayon-i">price</span></p><p class="crayon-line" id="crayon-56d5aa572bdc5550038947-11">    <span class="crayon-r">def</span> <span class="crayon-e">__repr__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc5550038947-12">        <span class="crayon-st">return</span> <span class="crayon-s">"&lt;Book('%s','%s', '%s')&gt;"</span> <span class="crayon-o">%</span> <span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">,</span> <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">author</span><span class="crayon-sy">,</span> <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>Notice how the Table constructor is given the SQL name of the table (‘books’) and a list of columns. The columns are similarly defined with their SQL names, data type. In this case, since we defined an ‘id’ column as a primary key, SQLAlchemy will automatically create the column with an <code>auto-increment</code> default value and the name and author are <code>String</code> types which can store the string values and price is the <code>Integer</code> type for storing integer values.</p>
<p>We define a constructor via <tt>__init__()</tt> and also a <tt>__repr__()</tt> method – both are optional. The class can have any number of other methods and attributes as required by the application, as it’s basically just a plain Python class.</p>
<p>We’re now ready to start talking to the database. SQLAlchemy uses sessionmaker() to map our model schema to database. Lets see how its done.</p>
<div id="crayon-537979ec34cea893473551" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d5aa572bdc8217394820" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdc8217394820-1"><span class="crayon-st">from</span> <span class="crayon-i">sqlalchemy</span> <span class="crayon-r">import</span> <span class="crayon-v">create_engine</span><span class="crayon-sy">,</span> <span class="crayon-v">Column</span><span class="crayon-sy">,</span> <span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-k ">String</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc8217394820-2"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-i">declarative</span> <span class="crayon-r">import</span> <span class="crayon-e">declarative_base</span></p><p class="crayon-line" id="crayon-56d5aa572bdc8217394820-3"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-i">orm</span> <span class="crayon-r">import</span> <span class="crayon-e">sessionmaker</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc8217394820-4"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:///test.sqlite'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdc8217394820-5"><span class="crayon-i">Base</span> <span class="crayon-o">=</span> <span class="crayon-e">declarative_base</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdc8217394820-6"><span class="crayon-i">Session</span> <span class="crayon-o">=</span> <span class="crayon-e">sessionmaker</span><span class="crayon-sy">(</span><span class="crayon-v">bind</span><span class="crayon-o">=</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdc8217394820-7"><span class="crayon-i">session</span> <span class="crayon-o">=</span> <span class="crayon-e">Session</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>This custom-made <tt>Session</tt> class will create new <tt>Session</tt> objects which are bound to our database and we are binding our engine with the Session object.<br/>
Now, whenever you need to have a conversation with the database, you instantiate a <tt>Session.<br/>
</tt></p>
<p>The <tt>MetaData</tt> object offers is the ability to issue <code>CREATE TABLE</code> statements to the database for all tables that don’t yet exist. We illustrate this by calling the <tt>MetaData.create_all()</tt> method, passing in our <tt>Engine</tt> as a source of database connectivity. So lets add metadata binding to enable connectivity between our script and database.</p>
<div id="crayon-537979ec34cf1819740627" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d5aa572bdcb985905117" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdcb985905117-1"><span class="crayon-st">from</span> <span class="crayon-i">sqlalchemy</span> <span class="crayon-r">import</span> <span class="crayon-v">create_engine</span><span class="crayon-sy">,</span> <span class="crayon-v">Column</span><span class="crayon-sy">,</span> <span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-k ">String</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdcb985905117-2"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-i">declarative</span> <span class="crayon-r">import</span> <span class="crayon-e">declarative_base</span></p><p class="crayon-line" id="crayon-56d5aa572bdcb985905117-3"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-i">orm</span> <span class="crayon-r">import</span> <span class="crayon-e">sessionmaker</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdcb985905117-4"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:///test.sqlite'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdcb985905117-5"><span class="crayon-i">Base</span> <span class="crayon-o">=</span> <span class="crayon-e">declarative_base</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdcb985905117-6"><span class="crayon-i">Session</span> <span class="crayon-o">=</span> <span class="crayon-e">sessionmaker</span><span class="crayon-sy">(</span><span class="crayon-v">bind</span><span class="crayon-o">=</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdcb985905117-7"><span class="crayon-i">session</span> <span class="crayon-o">=</span> <span class="crayon-e">Session</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdcb985905117-8"><span class="crayon-t">class</span> <span class="crayon-e">Book</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa572bdcb985905117-9">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'books'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdcb985905117-10">    <span class="crayon-k ">id</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdcb985905117-11">    <span class="crayon-i">name</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-k ">String</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdcb985905117-12">    <span class="crayon-i">author</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-k ">String</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdcb985905117-13">    <span class="crayon-i">price</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdcb985905117-14">    <span class="crayon-r">def</span> <span class="crayon-e">__repr__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa572bdcb985905117-15">        <span class="crayon-st">return</span> <span class="crayon-s">"&lt;Book('%s','%s', '%s')&gt;"</span> <span class="crayon-o">%</span> <span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">,</span> <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">author</span><span class="crayon-sy">,</span> <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdcb985905117-16"><span class="crayon-v">Base</span><span class="crayon-sy">.</span><span class="crayon-v">metadata</span><span class="crayon-sy">.</span><span class="crayon-e">create_all</span><span class="crayon-sy">(</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>Now run this script and you will notice that we have a <code>SQLite</code> database inside our project root.</p>
<p>Lets check if it contains our <code>Book</code> table through the Database browser.</p>
</div>
<p> </p>
<p><a href="http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql1.png"><img class="alignnone size-full wp-image-253" src="http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql1.png?resize=275%2C151" alt="sql1" data-recalc-dims="1"/></a></p>
<p> </p>
<p>Since we now have the database created successfully, lets add some sample data to it.</p>
<p><a href="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql11.png"><img class="alignnone size-full wp-image-255" src="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql11.png?resize=528%2C116" alt="sql11" srcset="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql11.png?resize=300%2C66 300w, http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql11.png?w=528 528w" sizes="(max-width: 528px) 100vw, 528px" data-recalc-dims="1"/></a></p>
<p>We have imported the Book class and session object and have instantiated the Book class with arguments and then by using session object we are pushing the book into session and then committing it to the database. Lets see if it worked.</p>
<p><a href="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql12.png"><img class="alignnone size-full wp-image-256" src="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql12.png?resize=429%2C39" alt="sql12" srcset="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql12.png?resize=300%2C27 300w, http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql12.png?w=429 429w" sizes="(max-width: 429px) 100vw, 429px" data-recalc-dims="1"/></a></p>
<p> </p>
<h3>Querying the Database</h3>
<p>Since we have a database and table created, lets play with it by performing various operations on it.</p>
<p>The most important methods employed while querying are <code>filter()</code>, <code>filter_by()</code>.</p>
<p>Lets look at each method one by one.</p>

<p>This method is used to filter our query based upon particular attributes of our model like <code>User.name == "john"</code>, this will query the User table and filter all the results which has the name  attribute as <code>"john"</code>.<br/>
We can pass <code>.all()</code> and <code>.first()</code> to this query to fetch the entries based upon our requirement.</p>
<p>I have created another entry to the database with the author name “trivedi”.</p>
<p> </p>
<p><a href="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql13.png"><img class="alignnone size-full wp-image-257" src="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql13.png?resize=573%2C101" alt="sql13" srcset="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql13.png?resize=300%2C53 300w, http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql13.png?w=573 573w" sizes="(max-width: 573px) 100vw, 573px" data-recalc-dims="1"/></a></p>
<p> </p>

<p>Similarly we can use filter_by to query based upon the keyword which we pass to the method and can also perform <code>.all()</code> and <code>.first()</code> operations on it.</p>
<p> </p>
<p> </p>
<p><a href="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql14.png"><img class="alignnone size-full wp-image-258" src="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql14.png?resize=569%2C109" alt="sql14" srcset="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql14.png?resize=300%2C57 300w, http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql14.png?w=569 569w" sizes="(max-width: 569px) 100vw, 569px" data-recalc-dims="1"/></a></p>
<p> </p>
<p>The major difference between the two is that <code>filter_by</code> uses keyword arguments, whereas <code>filter</code> allows pythonic filtering arguments like <code>filter(User.name=="john").</code></p>
<h3>Update and Delete</h3>
<p>We can update the whole bunch of records very easily in SQLAlchemy.</p>
<p><a href="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql15.png"><img class="alignnone size-full wp-image-259" src="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql15.png?resize=577%2C138" alt="sql15" srcset="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql15.png?resize=300%2C72 300w, http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql15.png?w=577 577w" sizes="(max-width: 577px) 100vw, 577px" data-recalc-dims="1"/></a></p>

		<div id="crayon-56d5aa572bdd0742010750" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdd0742010750-1"><span class="crayon-o">&gt;&gt;&gt;</span><span class="crayon-v">book</span><span class="crayon-o">=</span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">query</span><span class="crayon-sy">(</span><span class="crayon-v">Book</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-k ">filter</span><span class="crayon-sy">(</span><span class="crayon-v">Book</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-s">'immortals-of-meluha").first()</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd0742010750-2"> </p><p class="crayon-line" id="crayon-56d5aa572bdd0742010750-3"><span class="crayon-s">&gt;&gt;&gt;book</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd0742010750-4"> </p><p class="crayon-line" id="crayon-56d5aa572bdd0742010750-5"><span class="crayon-s">&lt;Book('</span><span class="crayon-v">immortals</span><span class="crayon-o">-</span><span class="crayon-v">of</span><span class="crayon-o">-</span><span class="crayon-i">meluha</span><span class="crayon-s">','</span><span class="crayon-i">trivedi</span><span class="crayon-s">','</span><span class="crayon-cn">400</span><span class="crayon-s">')&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd0742010750-6"> </p><p class="crayon-line" id="crayon-56d5aa572bdd0742010750-7"><span class="crayon-s">&gt;&gt;&gt;book.name= '</span><span class="crayon-h"> </span><span class="crayon-i">iPhone</span><span class="crayon-h"> </span><span class="crayon-cn">6S</span><span class="crayon-s">'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd0742010750-8"> </p><p class="crayon-line" id="crayon-56d5aa572bdd0742010750-9"><span class="crayon-s">&gt;&gt;&gt;session.add(book)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd0742010750-10"> </p><p class="crayon-line" id="crayon-56d5aa572bdd0742010750-11"><span class="crayon-s">&gt;&gt;&gt;session.commit()</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd0742010750-12"> </p><p class="crayon-line" id="crayon-56d5aa572bdd0742010750-13"><span class="crayon-s">&gt;&gt;&gt;book</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd0742010750-14"> </p><p class="crayon-line" id="crayon-56d5aa572bdd0742010750-15"><span class="crayon-s">&lt;Book('</span><span class="crayon-i">iPhone</span><span class="crayon-h"> </span><span class="crayon-cn">6S</span><span class="crayon-s">','</span><span class="crayon-i">trivedi</span><span class="crayon-s">','</span><span class="crayon-cn">400</span>'<span class="crayon-sy">)</span><span class="crayon-o">&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p> </p>
<p> </p>
<p>We can easily delete records by calling the method .delete() on session object.</p>
<p><a href="http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql16.png"><img class="alignnone size-full wp-image-260" src="http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql16.png?resize=575%2C83" alt="sql16" srcset="http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql16.png?resize=300%2C43 300w, http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql16.png?w=575 575w" sizes="(max-width: 575px) 100vw, 575px" data-recalc-dims="1"/></a></p>
<h3>Relationships</h3>
<p>When creating a database, common sense dictates that we use separate tables for different types of entities. Some examples are: authors, books, ISBN, etc… But we also need to have relationships between these tables. For instance, authors make books, and books contain ISBN numbers. These relationships need to be represented in the database. Also, when fetching data with SQL, we need to use certain types of JOIN queries to get what we need.<br/>
There are several types of database relationships. Today we are going to cover the following:</p>
<ul>
<li>One to One Relationships</li>
<li>One to Many and Many to One Relationships</li>
<li>Many to Many Relationships</li>
</ul>
<p><strong>One to One Relationships</strong></p>
<p>Let’s say you have a table for authors:</p>
<p><a href="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql2.png"><img class="alignnone size-full wp-image-254" src="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql2.png?resize=220%2C82" alt="sql2" data-recalc-dims="1"/></a></p>
<p>We can put the customer address information on a separate table:</p>
<p><a href="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql21.png"><img class="alignnone size-full wp-image-261" src="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql21.png?resize=247%2C189" alt="sql21" data-recalc-dims="1"/></a></p>
<p> </p>
<p>Now we have a relationship between the Authors table and the Addresses table. If each address can belong to only one author , this relationship is “One to One”. Keep in mind that this kind of relationship is not very common. Our initial table that included the address along with the author could have worked fine in most cases.</p>
<p>Notice that now there is a field named “address_id” in the Authors table, that refers to the matching record in the Address table. This is called a “Foreign Key” and it is used for all kinds of database relationships.</p>
<p>We can visualize the relationship between the author and address records like this:</p>
<p><a href="http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/diagram.png"><img class="alignnone size-full wp-image-264" src="http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/diagram.png?resize=444%2C127" alt="diagram" srcset="http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/diagram.png?resize=300%2C86 300w, http://i2.wp.com/www.pysnap.com/wp-content/uploads/2015/09/diagram.png?w=444 444w" sizes="(max-width: 444px) 100vw, 444px" data-recalc-dims="1"/></a></p>
<p>Note that the existence of a relationship can be optional, like having a customer record that has no related address record.</p>
<p><strong>One to Many and Many to One Relationships<br/>
</strong><br/>
This is the most commonly used type of relationship. Consider an e-commerce website, with the following:</p>
<ul>
<li>Customers can make many orders.</li>
<li>Orders can contain many items.</li>
<li>Items can have descriptions in many languages.</li>
</ul>
<p>In these cases we would need to create “One to Many” relationships. Here is an example:</p>
<p><a href="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql22.png"><img class="alignnone size-full wp-image-262" src="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql22.png?resize=260%2C200" alt="sql22" data-recalc-dims="1"/></a></p>
<p><strong>Each customer may have zero, one or multiple orders. But an order can belong to only one customer</strong></p>
<div id="crayon-537979ec34d02032012145" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d5aa572bdd5426467421" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-2">2</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-4">4</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-6">6</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-8">8</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-10">10</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-12">12</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-14">14</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-16">16</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-18">18</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-20">20</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-22">22</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-24">24</p><p class="crayon-num" data-line="crayon-56d5aa572bdd5426467421-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd5426467421-26">26</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-1"><span class="crayon-st">from</span> <span class="crayon-i">sqlalchemy</span> <span class="crayon-r">import</span> <span class="crayon-v">create_engine</span><span class="crayon-sy">,</span> <span class="crayon-v">Column</span><span class="crayon-sy">,</span> <span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-k ">String</span><span class="crayon-sy">,</span> <span class="crayon-e">ForeignKey</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-2"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-i">declarative</span> <span class="crayon-r">import</span> <span class="crayon-e">declarative_base</span></p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-3"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-i">orm</span> <span class="crayon-r">import</span> <span class="crayon-v">sessionmaker</span><span class="crayon-sy">,</span> <span class="crayon-i">relationship</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-4"> </p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-5"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:///sql.sqlite'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-6"><span class="crayon-i">Base</span> <span class="crayon-o">=</span> <span class="crayon-e">declarative_base</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-7"><span class="crayon-i">Session</span> <span class="crayon-o">=</span> <span class="crayon-e">sessionmaker</span><span class="crayon-sy">(</span><span class="crayon-v">bind</span><span class="crayon-o">=</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-8"> </p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-9"><span class="crayon-i">session</span> <span class="crayon-o">=</span> <span class="crayon-e">Session</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-10"> </p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-11"><span class="crayon-t">class</span> <span class="crayon-e">Customer</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-12">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'customers'</span></p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-13">    <span class="crayon-v">customer</span><span class="crayon-sy">_</span>id <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-14">    <span class="crayon-i">name</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-k ">String</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-15"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-16"><span class="crayon-t">class</span> <span class="crayon-e">Orders</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-17">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'orders'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-18">    <span class="crayon-v">order</span><span class="crayon-sy">_</span>id <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-19">    <span class="crayon-v">customer</span><span class="crayon-sy">_</span>id <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-e">ForeignKey</span><span class="crayon-sy">(</span><span class="crayon-v">Customer</span><span class="crayon-sy">.</span><span class="crayon-v">customer_id</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-20">    <span class="crayon-i">customer</span> <span class="crayon-o">=</span> <span class="crayon-e">relationship</span><span class="crayon-sy">(</span><span class="crayon-v">Customer</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-21">    <span class="crayon-i">amount</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-k ">String</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-22"> </p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-23">    <span class="crayon-r">def</span> <span class="crayon-e">__repr__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-24">        <span class="crayon-st">return</span> <span class="crayon-s">"&lt;Book('%s','%s', '%s')&gt;"</span> <span class="crayon-o">%</span> <span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">name</span><span class="crayon-sy">,</span> <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">author</span><span class="crayon-sy">,</span> <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">price</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd5426467421-25"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd5426467421-26"><span class="crayon-v">Base</span><span class="crayon-sy">.</span><span class="crayon-v">metadata</span><span class="crayon-sy">.</span><span class="crayon-e">create_all</span><span class="crayon-sy">(</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>Many to one places a foreign key in the parent table referencing the child. <tt>relationship()</tt> is declared on the parent.</p>
<p><strong>Many to Many Relationships</strong></p>
<p> </p>
<p><a href="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql23.png"><img class="alignnone size-full wp-image-263" src="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql23.png?resize=212%2C301" alt="sql23" srcset="http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql23.png?resize=211%2C300 211w, http://i0.wp.com/www.pysnap.com/wp-content/uploads/2015/09/sql23.png?w=212 212w" sizes="(max-width: 212px) 100vw, 212px" data-recalc-dims="1"/></a></p>
<p> </p>
<p>The Items_Orders table has only one purpose, and that is to create a “Many to Many” relationship between the items and the orders.</p>
<p>Lets see one example for this type of relationship</p>
<div id="crayon-537979ec34d0a026357846" class="crayon-syntax crayon-theme-monokai crayon-font-courier-new crayon-os-pc print-yes notranslate" data-settings=" no-popup minimize scroll-mouseover">
<p class="crayon-plain-wrap"/>
<div class="crayon-main">


		<div id="crayon-56d5aa572bdd9753621294" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-2">2</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-4">4</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-6">6</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-8">8</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-10">10</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-12">12</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-14">14</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-16">16</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-18">18</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-20">20</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-22">22</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-24">24</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-26">26</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-28">28</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-30">30</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-32">32</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-34">34</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-36">36</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-38">38</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-40">40</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-42">42</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-44">44</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-46">46</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-47">47</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-48">48</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-49">49</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-50">50</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-51">51</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-52">52</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-53">53</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-54">54</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-55">55</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-56">56</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-57">57</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-58">58</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-59">59</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-60">60</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-61">61</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-62">62</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-63">63</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5aa572bdd9753621294-64">64</p><p class="crayon-num" data-line="crayon-56d5aa572bdd9753621294-65">65</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-1"><span class="crayon-st">from</span> <span class="crayon-k ">itertools</span> <span class="crayon-r">import</span> <span class="crayon-e">chain</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-2"><span class="crayon-st">from</span> <span class="crayon-i">sqlalchemy</span> <span class="crayon-r">import</span> <span class="crayon-v">create_engine</span><span class="crayon-sy">,</span> <span class="crayon-v">Column</span><span class="crayon-sy">,</span> <span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-k ">String</span><span class="crayon-sy">,</span> <span class="crayon-v">ForeignKey</span><span class="crayon-sy">,</span> <span class="crayon-v">Table</span><span class="crayon-sy">,</span> <span class="crayon-e">ForeignKeyConstraint</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-3"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-i">associationproxy</span> <span class="crayon-r">import</span> <span class="crayon-e">association_proxy</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-4"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-i">declarative</span> <span class="crayon-r">import</span> <span class="crayon-e">declarative_base</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-5"><span class="crayon-st">from</span> <span class="crayon-v">sqlalchemy</span><span class="crayon-sy">.</span><span class="crayon-i">orm</span> <span class="crayon-r">import</span> <span class="crayon-v">sessionmaker</span><span class="crayon-sy">,</span> <span class="crayon-i">relationship</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-6"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-7"><span class="crayon-i">engine</span> <span class="crayon-o">=</span> <span class="crayon-e">create_engine</span><span class="crayon-sy">(</span><span class="crayon-s">'sqlite:///sql.sqlite'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-8"><span class="crayon-i">Base</span> <span class="crayon-o">=</span> <span class="crayon-e">declarative_base</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-9"><span class="crayon-i">Session</span> <span class="crayon-o">=</span> <span class="crayon-e">sessionmaker</span><span class="crayon-sy">(</span><span class="crayon-v">bind</span><span class="crayon-o">=</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-10"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-11"><span class="crayon-i">session</span> <span class="crayon-o">=</span> <span class="crayon-e">Session</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-12"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-13"><span class="crayon-t">class</span> <span class="crayon-e">SupervisionAssociation</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-14">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'supervision'</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-15"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-16">    <span class="crayon-v">supervisor</span><span class="crayon-sy">_</span>id <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-e">ForeignKey</span><span class="crayon-sy">(</span><span class="crayon-s">'supervisor.id'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-17">    <span class="crayon-v">client</span><span class="crayon-sy">_</span>id <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-e">ForeignKey</span><span class="crayon-sy">(</span><span class="crayon-s">'client.id'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-18"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-19">    <span class="crayon-i">supervisor</span> <span class="crayon-o">=</span> <span class="crayon-e">relationship</span><span class="crayon-sy">(</span><span class="crayon-s">"Supervisor"</span><span class="crayon-sy">,</span> <span class="crayon-v">backref</span><span class="crayon-o">=</span><span class="crayon-s">"client_associations"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-20">    <span class="crayon-i">client</span> <span class="crayon-o">=</span> <span class="crayon-e">relationship</span><span class="crayon-sy">(</span><span class="crayon-s">"Client"</span><span class="crayon-sy">,</span> <span class="crayon-v">backref</span><span class="crayon-o">=</span><span class="crayon-s">"supervisor_associations"</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-21">    <span class="crayon-i">schedules</span> <span class="crayon-o">=</span> <span class="crayon-e">relationship</span><span class="crayon-sy">(</span><span class="crayon-s">"Schedule"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-22"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-23"><span class="crayon-t">class</span> <span class="crayon-k ">User</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-24">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'user'</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-25"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-26">    <span class="crayon-k ">id</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-27"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-28"><span class="crayon-t">class</span> <span class="crayon-e">Supervisor</span><span class="crayon-sy">(</span><span class="crayon-k ">User</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-29">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'supervisor'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-30">    <span class="crayon-v">__mapper_args_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-sy">{</span><span class="crayon-s">'polymorphic_identity'</span><span class="crayon-o">:</span> <span class="crayon-s">'supervisor'</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-31"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-32">    <span class="crayon-k ">id</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-e">ForeignKey</span><span class="crayon-sy">(</span><span class="crayon-s">'user.id'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-v">primary</span><span class="crayon-sy">_</span>key <span class="crayon-o">=</span> <span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-33"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-34">    <span class="crayon-i">clients</span> <span class="crayon-o">=</span> <span class="crayon-e">association_proxy</span><span class="crayon-sy">(</span><span class="crayon-s">"client_associations"</span><span class="crayon-sy">,</span> <span class="crayon-s">"client"</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-35">                        <span class="crayon-v">creator</span><span class="crayon-o">=</span><span class="crayon-r">lambda</span> <span class="crayon-v">c</span><span class="crayon-o">:</span> <span class="crayon-e">SupervisionAssociation</span><span class="crayon-sy">(</span><span class="crayon-v">client</span><span class="crayon-o">=</span><span class="crayon-v">c</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-36"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-37">    <span class="crayon-sy">@</span><span class="crayon-k ">property</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-38">    <span class="crayon-r">def</span> <span class="crayon-e">schedules</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-39">        <span class="crayon-st">return</span> <span class="crayon-k ">list</span><span class="crayon-sy">(</span><span class="crayon-e">chain</span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">[</span><span class="crayon-v">c</span><span class="crayon-sy">.</span><span class="crayon-i">schedules</span> <span class="crayon-st">for</span> <span class="crayon-i">c</span> <span class="crayon-st">in</span> <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">client_associations</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-40"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-41"><span class="crayon-t">class</span> <span class="crayon-e">Client</span><span class="crayon-sy">(</span><span class="crayon-k ">User</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-42">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'client'</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-43">    <span class="crayon-v">__mapper_args_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-sy">{</span><span class="crayon-s">'polymorphic_identity'</span><span class="crayon-o">:</span> <span class="crayon-s">'client'</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-44"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-45">    <span class="crayon-k ">id</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-e">ForeignKey</span><span class="crayon-sy">(</span><span class="crayon-s">'user.id'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span> <span class="crayon-v">primary</span><span class="crayon-sy">_</span>key <span class="crayon-o">=</span> <span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-46"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-47">    <span class="crayon-i">supervisors</span> <span class="crayon-o">=</span> <span class="crayon-e">association_proxy</span><span class="crayon-sy">(</span><span class="crayon-s">"supervisor_associations"</span><span class="crayon-sy">,</span> <span class="crayon-s">"supervisor"</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-48">                        <span class="crayon-v">creator</span><span class="crayon-o">=</span><span class="crayon-r">lambda</span> <span class="crayon-v">s</span><span class="crayon-o">:</span> <span class="crayon-e">SupervisionAssociation</span><span class="crayon-sy">(</span><span class="crayon-v">supervisor</span><span class="crayon-o">=</span><span class="crayon-v">s</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-49">    <span class="crayon-sy">@</span><span class="crayon-k ">property</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-50">    <span class="crayon-r">def</span> <span class="crayon-e">schedules</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-51">        <span class="crayon-st">return</span> <span class="crayon-k ">list</span><span class="crayon-sy">(</span><span class="crayon-e">chain</span><span class="crayon-sy">(</span><span class="crayon-o">*</span><span class="crayon-sy">[</span><span class="crayon-v">s</span><span class="crayon-sy">.</span><span class="crayon-i">schedules</span> <span class="crayon-st">for</span> <span class="crayon-i">s</span> <span class="crayon-st">in</span> <span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">supervisor_associations</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-52"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-53"><span class="crayon-t">class</span> <span class="crayon-e">Schedule</span><span class="crayon-sy">(</span><span class="crayon-v">Base</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-54">    <span class="crayon-v">__tablename_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-s">'schedule'</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-55">    <span class="crayon-v">__table_args_</span><span class="crayon-sy">_</span> <span class="crayon-o">=</span> <span class="crayon-sy">(</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-56">        <span class="crayon-e">ForeignKeyConstraint</span><span class="crayon-sy">(</span><span class="crayon-sy">[</span><span class="crayon-s">'client_id'</span><span class="crayon-sy">,</span> <span class="crayon-s">'supervisor_id'</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-57">        <span class="crayon-sy">[</span><span class="crayon-s">'supervision.client_id'</span><span class="crayon-sy">,</span> <span class="crayon-s">'supervision.supervisor_id'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-58">    <span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-59"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-60">    <span class="crayon-k ">id</span> <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-61">    <span class="crayon-v">client</span><span class="crayon-sy">_</span>id <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-v">nullable</span><span class="crayon-o">=</span><span class="crayon-t">False</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-62">    <span class="crayon-v">supervisor</span><span class="crayon-sy">_</span>id <span class="crayon-o">=</span> <span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span> <span class="crayon-v">nullable</span><span class="crayon-o">=</span><span class="crayon-t">False</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-63">    <span class="crayon-i">client</span> <span class="crayon-o">=</span> <span class="crayon-e">association_proxy</span><span class="crayon-sy">(</span><span class="crayon-s">"supervisor_association"</span><span class="crayon-sy">,</span> <span class="crayon-s">"client"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5aa572bdd9753621294-64"> </p><p class="crayon-line" id="crayon-56d5aa572bdd9753621294-65"><span class="crayon-v">Base</span><span class="crayon-sy">.</span><span class="crayon-v">metadata</span><span class="crayon-sy">.</span><span class="crayon-e">create_all</span><span class="crayon-sy">(</span><span class="crayon-v">engine</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>


 
</div>
</div>
<p>Visualizing this representation:</p>
<p> </p>
<p><a href="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/diagram1.png"><img class="alignnone size-full wp-image-265" src="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/diagram1.png?resize=513%2C420" alt="diagram1" srcset="http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/diagram1.png?resize=300%2C246 300w, http://i1.wp.com/www.pysnap.com/wp-content/uploads/2015/09/diagram1.png?w=513 513w" sizes="(max-width: 513px) 100vw, 513px" data-recalc-dims="1"/></a></p>
<p> </p>
<p>Thank you for reading the article. I hope you enjoyed it! Please leave your comments and questions, don’t forget to subscribe  and have a great day!</p>
<p class="pdf24Plugin-cp">

</p>
<p> </p>
<p> </p>
<p> </p>



<p id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</p>	</div>

	
	</div></body></html>