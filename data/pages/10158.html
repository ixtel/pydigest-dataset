<html><body><div><div class="post-text" itemprop="text">

<p>I have the following code that's working, except the draw circle on the provided image. I tried the setMouseCallback example on <a href="http://docs.opencv.org/master/db/d5b/tutorial_py_mouse_handling.html#gsc.tab=0" rel="nofollow">here</a>, which is working but I'm afraid I have implemented it wrong in my own code.</p>

<pre><code>import numpy as np
import urllib.request as ur
import cv2

params = np.zeros([1, 2])  # init params
s_img = np.zeros((512, 512, 3), np.uint8)


def clicked_corners(camera, user, pw):
    """
    Function to write the clicked corners (ij) to a camera object.
    Image is provided by a valid url to a snapshot of camera,
    usually in the form of http://xxx.xxx.x.x/snapshot/view0.jpg
    :param camera: Camera object
    :param user: username to authorize access to URL if set
    :param pw: password to authorize access to URL if set
    """
    window_name = 'img'
    ... # define url, not important to the question
    global params, s_img

    ... # handle authentication, not important to the question

    ... #open url
    img = cv2.imdecode(arr, -1)  # decode array to an image
    s_img = cv2.resize(img, (0, 0), fx=0.5, fy=0.5)
    cv2.startWindowThread()

    cv2.imshow(window_name, s_img)
    print('Click corners to determine the field')
    cv2.setMouseCallback(window_name, on_mouse, params) # &lt;-- setting callback for mouseclicks
    k = cv2.waitKey(0) &amp; 0xFF  # adding a keylistener

    if k == 27:
        ... # destroy window

    clicked_points = params

    return clicked_points


def on_mouse(event, x, y, flag, param):
    global params
    if event == cv2.EVENT_LBUTTONDOWN:
        ... do some operation
        cv2.circle(s_img, (x, y), 100, (255, 0, 0), -1) # **draw circle this part is not working properly**

    ... return something
</code></pre>

<p>I have edited the code to highlight the important parts to the questions, and where I assume it's not going as it should be.</p>
    </div>
    </div></body></html>