<html><body><div><p>Keep track of your statistics.</p>
<div id="usage">
<h2>Usage</h2>
<p>First, setup your domains:</p>
<pre>from trackstats.models import Domain

Domain.objects.SHOPPING = Domain.objects.register(
    ref='shopping',
    name='Shopping')
Domain.objects.USERS = Domain.object.register(
    ref='users',
    name='Users')
Domain.objects.TWITTER = Domain.object.register(
    ref='twitter',
    name='Twitter')
</pre>
<p>Define a few metrics:</p>
<pre>from trackstats.models import Domain, Metric

Metric.objects.SHOPPING_ORDER_COUNT = Metric.objects.register(
    domain=Domain.objects.SHOPPING,
    ref='order_count',
    name='Number of orders sold')
Metric.objects.USERS_USER_COUNT = Metric.objects.register(
    domain=Domain.objects.USERS,
    ref='user_count',
    name='Number of users signed up')
Metric.objects.TWITTER_FOLLOWER = Metric.objects.register(
    # Matches Twitter API
    ref='followers_count',
    domain=Domain.objects.TWITTER)
</pre>
<p>Now, let’s store some one-off statistics:</p>
<pre>from trackstats.models import StatisticByDate, Domain, Metric, Period

# All-time, cumulative, statistic
n = Order.objects.all().count()
StatisticByDate.objects.record(
    metric=Metric.objects.SHOPPING_ORDER_COUNT,
    value=n,
    Period=Period.LIFETIME)

# Users signed up, at a specific date
dt = date.today()
n = User.objects.filter(
    date_joined__day=dt.day,
    date_joined__month=dt.month,
    date_joined__year=dt.year).count()
StatisticByDate.objects.record(
    metric=Metric.objects.USERS_USER_COUNT,
    value=n,
    Period=Period.DAY)
</pre>
<p>Creating code to store statistics yourself can be a tedious job.
Luckily, a few shortcuts are available to track statistics without
having to write any code yourself.</p>
<p>Consider you want to keep track of the number of comments created on a
daily basis:</p>
<pre>from trackstats.trackers import CountObjectsByDateTracker

CountObjectsByDateTracker(
    period=Period.DAY,
    metric=Metric.objects.COMMENT_COUNT,
    date_field='timestamp').track(Comment.objects.all())
</pre>
<p>Or, in case you want to track the number of comments, per user, on a daily
basis:</p>
<pre>CountObjectsByDateAndObjectTracker(
    period=Period.DAY,
    metric=Metric.objects.COMMENT_COUNT,
    # comment.user points to a User
    object_model=User,
    object_field='user',
    # Comment.timestamp is used for grouping
    date_field='timestamp').track(Comment.objects.all())
</pre>
</div>
<div id="models">
<h2>Models</h2>
<p>The <cite>StatisticByDate</cite> model represents statistics grouped by date –
the most common use case.</p>
<p>Another common use case is to group by both date and some other object
(e.g. a user, category, site).  For this, use
<cite>StatisticByDateAndObject</cite>. It uses a generic foreign key.</p>
<p>If you need to group in a different manner, e.g. by country, province
and date, you can use the <cite>AbstractStatistic</cite> base class to build just
that.</p>
</div>
</div></body></html>