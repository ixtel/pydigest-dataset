<html><body><div><div class="post-body entry-content" id="post-body-1262336807050327352" itemprop="description articleBody"><p>
Ok so imagine the year is 1973. All the talk is about a new arcade game which has been released by Atari. That game is called Pong.</p>



<p>
Now it might not seem much of a game by today's standards, but it was a massive hit in its day... or so I am told.
</p><p>
But don't be deceived, although a simple game, Pong covers a wide range of aspects of computer game programming. There is movement, control, collision detection, scoring, artificial intelligence. Its all in there!
</p><p>
Being able to program Pong is a doorway to being able to program a lot of other games.
</p><p>
However once you start playing Pong you might find less time to program, as it is quite addictive!
</p><p>
We are going to program pong using Python and Pygame.
</p><p>
I will be using Python 2.7. For those programming on a Raspberry Pi this will already be installed. Just ensure you click on the IDLE icon and not the IDLE3 icon. If Python 2.7 is not installed on your system you may have to install it from the Python website, just follow the link below.

</p>
<p>
<br/></p><p>
Pygame is a basically a set of modules which are designed to help you write computer games. We will be using some of these modules throughout this tutorial. You will need to install Pygame, which is free, and runs on Windows, Linux and Mac OSX (plus many more operating systems!)
</p><p>
If you are programming on a Raspberry Pi, again this is already installed, if not to download Pygame go to the Pygame website.

</p>
<p>
One final comment before we get into the programming, on the Raspberry Pi desktop there is a Python Games icon. This links you to a website by Al Sweigart who has written several Python books including one on Pygame. If you are new to Python then check out his books.

</p>
<p>
I cannot rate them highly enough! After several false starts with other books, it was these resources that taught me Python.
</p><p>
Ok that's enough pre-amble, lets get on with it.
</p><p>
I am going to break this game down into stages, which reflect how I developed it. I hope this will show you that when you look at the game as a whole it can seem daunting, but when broken down it is just made up of many easy parts.
</p><p>
So the stages we will follow are:
</p><p>
Stage 1 - Create a blank screen</p><p>
Stage 2 - Draw the arena, the paddles and the ball</p><p>
Stage 3 - Move the ball around</p><p>
Stage 4 - Check for a collision with all edges</p><p>
Stage 5 - Move the players paddle</p><p>
Stage 6 - Move the computers paddle with Artificial Intelligence</p><p>
Stage 7 - Check for a collision with the paddles</p><p>
Stage 8 - Add a scoring system</p><p>
Stage 9 - Finally we will look at methods to increase the speed for slower computers
</p><p>
As we go through this tutorial I will provide the whole of the code at the beginning. To help you isolate each stage I will also provide the complete code for that stage as we get to it. I will also tell you where to type each line and include the code you need to type. Where I feel it necessary I will add additional lines in with the code to help you understand where you should type the code. You can always refer to the source code of the complete program or the source code of that stage for further guidance.
</p><p>
First of all, as promised, I will show you the whole code. At this stage don't worry if you don't understand it all. I would suggest having a read through it and seeing what parts you understand and which you don't.

</p><pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>

<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>


<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>


<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span>
    <span class="k">return</span> <span class="n">ball</span>

<span class="c">#Checks for a collision with a wall, and 'bounces' ball off it.</span>
<span class="c">#Returns new direction</span>
<span class="k">def</span> <span class="nf">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span>

<span class="c">#Checks is the ball has hit a paddle, and 'bounces' ball off it.     </span>
<span class="k">def</span> <span class="nf">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>

<span class="c">#Checks to see if a point has been scored returns new score</span>
<span class="k">def</span> <span class="nf">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="c">#reset points if left wall is hit</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">LINETHICKNESS</span><span class="p">:</span> 
        <span class="k">return</span> <span class="mi">0</span>
    <span class="c">#1 point for hitting the ball</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c">#5 points for beating the other paddle</span>
    <span class="k">elif</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c">#if no points scored, return score unchanged</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">score</span>

<span class="c">#Artificial Intelligence of computer player </span>
<span class="k">def</span> <span class="nf">artificialIntelligence</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">):</span>
    <span class="c">#If ball is moving away from paddle, center bat</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c">#if ball moving towards bat, track its movement. </span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">centery</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">paddle2</span>

<span class="c">#Displays the current score on the screen</span>
<span class="k">def</span> <span class="nf">displayScore</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
    <span class="n">resultSurf</span> <span class="o">=</span> <span class="n">BASICFONT</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">'Score = </span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span><span class="p">(</span><span class="n">score</span><span class="p">),</span> <span class="bp">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
    <span class="n">resultRect</span> <span class="o">=</span> <span class="n">resultSurf</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>
    <span class="n">resultRect</span><span class="o">.</span><span class="n">topleft</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">resultSurf</span><span class="p">,</span> <span class="n">resultRect</span><span class="p">)</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>
    <span class="c">##Font information</span>
    <span class="k">global</span> <span class="n">BASICFONT</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span>
    <span class="n">BASICFONTSIZE</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">BASICFONT</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s">'freesansbold.ttf'</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span><span class="p">)</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># make cursor invisible</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
            <span class="c"># mouse movement commands</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEMOTION</span><span class="p">:</span>
                <span class="n">mousex</span><span class="p">,</span> <span class="n">mousey</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">paddle1</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">mousey</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="n">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span>
        <span class="n">paddle2</span> <span class="o">=</span> <span class="n">artificialIntelligence</span> <span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">)</span>

        <span class="n">displayScore</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
Most importantly don't be daunted! All will be revealed throughout this tutorial.

</p><u><b>Stage 1 - Create a blank screen</b></u>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
Ok so where do we start? Well when programming in Pygame I always start with creating a blank screen.
</p><p>
The first thing we need to do is to import the pygame libraries into our program so we have access to them.</p><p>
We are also importing the sys libraries which we will use later in this section to exit our game.

</p><pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span></pre>
<p>
We will then set a global variable which will control the speed of the program. We do this by varying the number of Frame Per Second or FPS for short. For now we will set this to 200, but can vary this later.

</p><pre><span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span></pre>
<p>
Remember any line which starts with a # is not seen by the program when it is running. We use this to allow us to write notes about our code. You will see I do this a lot throughout this program. Comments are very useful when coming back to read your code at a later date.
</p><p>
We also need some global variables for our window size. It is much easier when reading your program at a later date to remember what WINDOWHEIGHT means rather than a value such as 400 spread throughout your program. We will be able to call these variables at any time during our program.

</p><pre><span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span></pre>
<p>
Now we get into writing the main function of the program.
</p><p>
As with any function we have to define the function before calling it.

</p><pre><span class="k">def</span> <span class="nf">main</span><span class="p">():</span></pre>
<p>
The next line is needed to initialise pygame.

</p><pre>    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span></pre>
<span class="Apple-tab-span"> </span><p>
Pygame works by drawing onto surfaces. This next line creates the main surface we will use throughout our program. We have made it a global variable so we can access it later. Why did we have to use the word global on this variable and not on the previous variables? Well adding global allows us to modify the value later on. We will be changing our surface, so it's important we can modify it when we need to.

</p><pre>    <span class="k">global</span> <span class="n">DISPLAYSURF</span></pre>
<p>
The next line relates to the fact we want to set the frame rate ourselves, rather than allowing the program to run as fast as it wants.

</p><pre>    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span></pre>
<span class="Apple-tab-span"> </span><p>
Now we assign some information to our surface, which sets the display width and height.

</p><pre>    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> </pre>
<p>
We set the height and the width to 400 and 300 respectively using the variables we created earlier. Notice how reading WINDOWHEIGHT and WINDOWWIDTH makes it a lot easier to understand what this line means rather than reading 400,300?
</p><p>
Next we set the title of our window. You can put anything you want here, but I am going to call my window 'Pong'

</p><pre>    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span></pre>
<span class="Apple-tab-span"> </span><p>
Now we get into the business end of our program with

</p><pre>    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span></pre>
<span class="Apple-tab-span"> </span><p>
This is an eternal loop that will keep running until the game is quit.
</p><p>
The first thing we should do is ensure we can quit! This is achieved during the next four lines of code.

</p><pre>        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span></pre>
<span class="Apple-tab-span">    </span><p>
For now we are only creating a blank screen so our program is not going to do anything. This will of course change later.
</p><p>
Therefore we can just ask the screen to update.

</p><pre>        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></pre>
<span class="Apple-tab-span">  </span><p>
We need the next line to tell our program to set the Frames Per Second (FPS) rate to use the FPS variable we defined earlier.
</p><span class="Apple-tab-span">  </span>
<pre>        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span></pre>
<p>
That is the end of our main function.
</p><p>
There are a couple of lines we need to type in to call our main function.

</p><pre><span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<span class="Apple-tab-span"> </span><p>
You should now save your game and press F5. Hopefully you see a window similar to this?

</p>

<p>
Remember to save your work often as you go through the program. It's not much fun typing the same thing in twice!

</p><b><u>Stage 2 - Draw the Arena, the paddles and the ball.</u></b>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>
  
<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
Stage 1 was mainly some grunt work to write the bare minimum to get our game to work. The fun starts now. :-)
</p><p>
In stage 2 we will be drawing our arena, the paddles and the ball.
</p><p>
Below the other global variables defining the height and the width we will add a few more variables. Keeping these all grouped together makes it easier to read the code again at a later date.

</p><pre><span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span></pre>
<p>
Again it is easier to read our code if we refer to LINETHICKNESS rather than 10 throughout our code.
</p><p>
LINETHICKNESS will be used to determine the thickness of the lines throughout our program.</p><p>
PADDLESIZE is the length of the paddle.</p><p>
PADDLEOFFSET is the distance the paddle is from the arena edges.
</p><p>
You can play around with all these variables later and see what happens.
</p><p>
I also know that I will need my screen to have black and white elements.
</p><p>
For ease I have set up some variables for the colours. The three values refer to the amount of Red, Green or Blue (RGB) in the colour.

</p><pre><span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span></pre>
<p>
Lets jump back into our main function.
</p><p>
We know that at some point we will expect our ball to move around the screen i.e. that it will move in X and Y. Our paddles however will move up and down i.e only move in Y.
</p><p>
As a starting point we shall place the ball and the paddles in their central position.
</p><p>
We will be defining our ball and paddles using rectangles. These will be defined by stating the top left co-ordinate of each rectangle and then the length and width of each.
</p><p>
Let us create some variables for the ball and each paddle, and assign them values that will position then in their central positions.

</p><pre>    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span></pre>
<span class="Apple-tab-span"> </span><p>
So if we want to place the ball in the centre, why not use WINDOWWIDTH / 2? Well that would place the top of the ball in the centre of the screen and not the centre of the ball. We need to reduce the position by half the ball size, which is half of the LINETHICKNESS.
</p><p>
You can see we do the same for the paddle positions. This time I have shown the subtraction before dividing the whole value by two.
</p><p>
Now we have our starting co-ordinates, let us create a rectangle for the ball and the paddles.
</p><p>
The format for creating a rectangle is as follows.
</p><p>
pygame.Rect(X co-ordinate, Y co-ordinate, Width of Rectangle, Length of Rectangle)
</p><p>
As we have just defined all this information we can easily create the three rectangles,

</p><pre>    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span></pre>
<p>
For paddle 1 we use an X co-ordinate of PADDLEOFFSET which is defining the distance from the left hand side. Paddle 2 needs a little more work as this is on the right hand side.
</p><span class="Apple-tab-span"> </span><p>
The X co-ordinate for paddle 2 needs to be the width of the window (WINDOWWIDTH) minus the paddle offset (PADDLEOFFSET). However this would take us to the right hand side of the paddle, so we also need to minus off the thickness of the paddle (LINETHICKNESS). Therefore the X co-ordinate of paddle 2 would be WINDOWWIDTH - PADDLEOFFSET - LINETHICKNESS
</p><p>
While we have defined the starting positions, and then the required rectangles, we have not actually drawn anything yet. To make it easier lets create a separate function to draw the arena, the two paddles and the ball.
</p><p>
The code to call these functions is positioned directly below the rectangles we have created, and will set up our starting screen.

</p><pre>    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span></pre>
<span class="Apple-tab-span"> </span><p>
You will see that for the two players and the ball we pass the appropriate rectangle into the function, for the arena we don't pass anything into that function. The reason is as we move the paddles and the ball we will be updating the rectangle position to reflect the new position of these items. The arena remains the same throughout the game so the arena function will always draw the same thing regardless of where the ball and the paddles are.
</p><p>
As the game progresses we will be moving the ball and the paddles around, so we should update the screen every tick or FPS.
</p><p>
To do this we will call the same functions but this time within our while loop. This will ensure our game is updated so many times per second to match out FPS rate.

</p><pre>        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span></pre>
<span class="Apple-tab-span">  </span>
<p>
Ok, we should now write these four functions.
</p><p>
Starting with drawArena()
</p><p>
Directly below where we defined the two colours type the following function. I will show you the whole function, then we will look at it line by line.

</p><pre><span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span></pre>
<p>
The first line defines the function name, and the fact the brackets are empty shows we are passing nothing into the function.
</p><p>
Firstly we fill the screen background so it is all white.

</p><pre>    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span></pre>
<span class="Apple-tab-span"> </span><p>
Now we want to draw a border all around the arena. We can do this as a rectangle, but rather than filling the rectangle as we did with the paddles and the ball we will make it hollow. This requires us to add an extra parameter which defines the thickness of the line.

</p><pre>    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span></pre>
 <p>
Let us analyse this line a little more.
</p><p>
The DISPLAYSURF tells the program which surface we want to draw onto. In our case we will use DISPLAYSURF.</p><p>
WHITE tells us what colour the rectangle should be.</p><p>
((0,0),(WINDOWWIDTH,WINDOWHEIGHT)) defines a rectangle. (0,0) are the (left, top) co-ordinates, and (WINDOWWIDTH,WINDOWHEIGHT) are the width and height of the rectangle. Notice these are all within a set of brackets.
</p><p>
Now we need to define the thickness of the line. Why have we used LINETHICKNESS * 2? Well our rectangle is around the edge of our window, and when we give it a thickness, half the line thickness is on the inside of the rectangle and half on the outside. Doubling the thickness means there is a total line of LINETHICKNESS on the inside of the rectangle, which you will see and an equal amount on the outside which you cannot see.
</p><p>
Any good court should have a centre line, so we will draw one in our arena.

</p><pre>    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span></pre>
<p>
This is very similar syntax to the rectangle but ((WINDOWWIDTH/2),0) are the starting (x,y) co-ordinates of the line and ((WINDOWWIDTH/2),WINDOWHEIGHT) are the end co-ordinates.</p><p>
We only want this to be a thin line so we use LINETHICKNESS / 4 to indicate its width.
</p><p>
There we go that is all that is needed to draw the arena, so lets move swiftly onwards.
</p><p>
We will create a function to draw the paddle. Now as we know we will want to draw a paddle for Paddle1 and Paddle2, we should be able to use the same function for both.

</p><pre><span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span></pre>
<p>
Again the first line defines the function name and tells us we are accepting paddle as a parameter into the function. Now when we called the function earlier, one time we passed paddle1 into the function, and the second time paddle2. Well to help re-use code whatever we pass into this function will be called paddle. This means we can pass both paddle1 and paddle2 into it and it will refer to them as just paddle. This saves us having to write the same function twice, once for paddle1 and once for paddle2.
</p><p>
Now I want to make sure that the paddle will stay within the arena. If it tries to move out of the bottom of the arena we limit it to its lowest point, then do something similar at the top.
</p><p>
As paddle is a rectangle we can isolate the values that make up the rectangle, such as x and y. However pygame gives us more control than that so we can access the top, the bottom, left or right of the rectangle. In fact there are loads of options all listed on the pygame.rect page. If you would like to explore these yourself have a look at this link.

</p>
<p>
To ensure the paddle doesn't move off the bottom of the arena, it is easier if we look at the bottom of the paddle. This is done with paddle.bottom.
</p><p>
We don't want our paddle bottom to move beyond the arena walls. The bottom arena wall is the height of the window minus the thickness of the wall. Our code therefore looks like this.

</p><pre>    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span></pre>
<p>
We simply say if it moves too far, make it equal to the furthest point we want it to go to.
</p><p>
The same is done to stop it moving too high. However this time we look at the top of the paddle using paddle.top

</p><pre>    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span></pre>
<span class="Apple-tab-span">  </span><p>
Now we draw our rectangle

</p><pre>    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span></pre>
<span class="Apple-tab-span"> </span><p>
This is exactly the same as when we drew the rectangle for the arena. However instead of defining the rectangle inside the brackets, we use our predefined rectangle - paddle. Nice and easy.
</p><p>
Finally we will write the function to draw the ball.

</p><pre><span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span></pre>
<p>
We name the function drawBall and show it will accept ball.</p><p>
Then as we have done with the paddles we simply draw the ball. Very simple.
</p><p>
Saving and running your program should show the arena with 2 paddles and a ball.

</p>


<b><u>Stage 3 - Move the ball around.</u></b>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>

<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span>
    <span class="k">return</span> <span class="n">ball</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>

    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
While we can see our game is taking shape, there is not much actually happening. We will change this now by moving the ball around. First lets determine which way the ball is moving.
</p><p>
My method of doing this is to create two variables. One for the direction of the ball in X, and one in Y. This allows us to control the ball in each axis independently. Lets create these variables below our initial ball and player positions.

</p><pre>    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span></pre>
<span class="Apple-tab-span"> </span><p>
Lets say if the ball is moving left, we will make ballDirX = -1, and if it is moving right we will make it 1</p><p>
Similarly if it is moving up we will make ballDirY = -1 and down ballDirY = 1.
</p><p>
Every FPS we will want to move the ball. Therefore we will write a function which will move the ball by updating the co-ordinates stored in the ball rectangle. We will need to pass into the function the value for ball, and the X and Y directions, ballDirX and ballDirY. Under where we called the drawBall() function in our main loop add the following line to call the moveBall function.

</p><pre>        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span></pre>
<span class="Apple-tab-span">  </span><p>
Whatever is output from our moveBall function will become the new value of ball.
</p><p>
Outside the main loop with the other functions lets create the function moveBall below the drawBall function.

</p><pre><span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span>
    <span class="k">return</span> <span class="n">ball</span></pre>
<p>
After naming the function listing the parameters being passed into it we simply add to the x value of ball the value from ballDirX.

</p><pre>    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span></pre>
<p>
If you are confused about the meaning of += remember a += b is equal to a = a + b.
</p><p>
This means if the ball should be moving left, we add -1 onto the co-ordinates of the ball, which moves the ball left. If ballDirX is 1, ball.x would increase by 1, moving it to the right.
</p><p>
We then do a similar thing for ball.y

</p><pre>    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span></pre>
<p>
Finally we return the modified ball back into our main function.
 
</p><pre>    <span class="k">return</span> <span class="n">ball</span></pre>
<p>
Time to save your file and test out step 3 moving the ball.

</p>


<u><b>Step 4 - Check collision with all edges</b></u>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>

<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span>
    <span class="k">return</span> <span class="n">ball</span>

<span class="c">#Checks for a collision with a wall, and 'bounces' ball off it.</span>
<span class="c">#Returns new direction</span>
<span class="k">def</span> <span class="nf">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>

    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
So how is that moving the ball function working out for you? Well the ball certainly moves, but it disappears off the side of the arena, and keeps going!
</p><p>
How will we deal with this? Well, if the ball hits one of the edges, we need to reverse the direction it is travelling in. If it hits the top or bottom edge we should reverse the ballDirY, and if it hits the left or right edge we should reverse ballDirX. We will do this in a function, but before that in our main game loop lets add a call to that function. So below ball = moveBall(ball, ballDirX, ballDirY) add the following line.

</p><pre>        <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span></pre>
<span class="Apple-tab-span">  </span><p>
So we are calling a function checkEdgeCollision. The function will need to know the ball position and the current direction in X and Y, therefore we pass those parameters into the function.
</p><p>
Any collision will need to change ballDirX and ballDirY, so the output of the function will modify these as required.
</p><p>
OK time to write the function.
</p><p>
Outside of the main function underneath the moveBall function we will write our function called checkEdgeCollision

</p><pre><span class="c">#Checks for a collision with a wall, and 'bounces' ball off it.</span>
<span class="c">#Returns new direction</span>
<span class="k">def</span> <span class="nf">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span></pre>
<p>
So after naming the function we check to see if the top of the ball has hit the top of the arena, or the bottom of the ball has hit the bottom of the arena.

</p><pre>    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span></pre>
<p>
If that is the case we multiply our Y direction by -1.
</p><p>
For those whose mathematics is not great,
</p><p>
1 x -1 = -1</p><p>
-1 x -1 = 1
</p><p>
Therefore if the direction was negative, it becomes positive and vice versa.
</p><p>
We do the same thing for the left and right of the ball.

</p><pre>    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span></pre>
<span class="Apple-tab-span"> </span><p>
and finally we return the X and Y directions, as our code is expecting us to.

</p><pre>    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span></pre>
<span class="Apple-tab-span"> </span><p>
Wow that edge detection function was pretty easy huh?
</p><p>
Again save and test your code. Do you see a ball bouncing around the screen?

</p>


<b><u>Stage 5 - Move the players paddle.</u></b>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>

<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span>
    <span class="k">return</span> <span class="n">ball</span>

<span class="c">#Checks for a collision with a wall, and 'bounces' ball off it.</span>
<span class="c">#Returns new direction</span>
<span class="k">def</span> <span class="nf">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>

    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># make cursor invisible</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
            <span class="c"># mouse movement commands</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEMOTION</span><span class="p">:</span>
                <span class="n">mousex</span><span class="p">,</span> <span class="n">mousey</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">paddle1</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">mousey</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
While it is nice to see the ball moving so well, its a little frustrating we cannot hit it! I am sure we can resolve that fairly easily.
</p><p>
Earlier on we created an event.type which was equal to quit. Well there are a few event types in Python and one of those is checking the motion of the mouse.
</p><p>
Underneath sys.exit() which is the previous event type you programmed type the following.

</p><pre>            <span class="c"># mouse movement commands</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEMOTION</span><span class="p">:</span>
                <span class="n">mousex</span><span class="p">,</span> <span class="n">mousey</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">paddle1</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">mousey</span></pre>
<span class="Apple-tab-span">    </span><p>
The first event checked for a QUIT and then exited the game. This was held within an 'if' statement. The second part you have just typed is an 'elif' statement which is checked if the 'if' statement was not true.

</p><pre>            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEMOTION</span><span class="p">:</span></pre>
<p>
Else if (elif) the event type is mouse motion

</p><pre>                <span class="n">mousex</span><span class="p">,</span> <span class="n">mousey</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span></pre>
<p>
This gives the X and Y co-ordinates of the mouse position. Our game is not really interested in the X position, only the Y. We can therefore make the y position of paddle1 equal to the mousey position.

</p><pre>                <span class="n">paddle1</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">mousey</span></pre>
<span class="Apple-tab-span">    </span><p>
Wow, Pygame really makes these things easy doesn't it?
</p><p>
If you run your game you will see you have control over your paddle. However the fact you can see the mouse cursor is a little annoying, so lets turn that off.
</p><p>
Just before your while True: loop in the main function type the following.

</p><pre>    <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># make cursor invisible</span></pre>
<span class="Apple-tab-span"> </span><p>
This means you cannot see the cursor in your game.
</p><p>
Again run your game and see if that has made it better.

</p>


<b><u>Stage 6 - Move the computers paddle with 'Artificial Intelligence'</u></b>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>


<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span>
    <span class="k">return</span> <span class="n">ball</span>

<span class="c">#Checks for a collision with a wall, and 'bounces' ball off it.</span>
<span class="c">#Returns new direction</span>
<span class="k">def</span> <span class="nf">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span>

<span class="c">#Artificial Intelligence of computer player       </span>
<span class="k">def</span> <span class="nf">artificialIntelligence</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">):</span>
    <span class="c">#If ball is moving away from paddle, center bat</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c">#if ball moving towards bat, track its movement. </span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">centery</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">paddle2</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>

    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># make cursor invisible</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
            <span class="c"># mouse movement commands</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEMOTION</span><span class="p">:</span>
                <span class="n">mousex</span><span class="p">,</span> <span class="n">mousey</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">paddle1</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">mousey</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">paddle2</span> <span class="o">=</span> <span class="n">artificialIntelligence</span> <span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
While being able to move your paddle is all very good, it's not much fun if the computer doesn't move his paddle. Before allowing you to hit the ball lets add some 'artificial intelligence' into the computer.
</p><p>
The computer is not really thinking for itself, so we are not programming Artificial Intelligence in the true sense of the word. It is just following a predetermined set of instructions.
</p><p>
You can think of your own method of this if you like later. I am going to make the computer player play similar to how I play squash.

</p><ul>
<li>Once I have hit the ball I move to the centre of the court.</li>
<li>When my opponent has hit the ball I start to follow the ball so I can hit it back.</li>
</ul>
<p>
Again we will do all the hard work in a function.
</p><p>
That function will need to know:</p><p>
The position of the ball so it can follow it.</p><p>
The direction of the ball so it knows if it is moving away or towards the computers paddle.</p><p>
The position of the paddle so it can adjust its position depending on what the ball is doing.
</p><p>
The output will be the position of the paddle.
</p><p>
Therefore in our main loop lets create a call to a function called artificialIntelligence to suit our requirements.

</p><pre>        <span class="n">paddle2</span> <span class="o">=</span> <span class="n">artificialIntelligence</span> <span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">)</span></pre>

<span class="Apple-tab-span"> </span><p>
Here is the function in its entirety. Have a read through and we will break it down in more detail.
</p><span class="Apple-tab-span">  </span>
<pre><span class="c">#Artificial Intelligence of computer player       </span>
<span class="k">def</span> <span class="nf">artificialIntelligence</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">):</span>
    <span class="c">#If ball is moving away from paddle, center bat</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c">#if ball moving towards bat, track its movement. </span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">centery</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">paddle2</span></pre>
<p>
After naming the function with the correct parameters being passed into it we check to see if the ball is moving away from the paddle.

</p><pre>    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span></pre>
<span class="Apple-tab-span"> </span><p>
If it is we do one of two things.
</p><p>
If the center of the paddle in y is higher (remember the top of the screen is position 0) than the center of the screen, we move the paddle down by one.

</p><pre>        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span></pre>
<span class="Apple-tab-span">   </span><p>
Notice we use another of the great options when working with rectangles to find the center of the rectangle in y by using paddle2.centery
</p><p>
If it is lower, we move it up by one.

</p><pre>        <span class="k">elif</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">1</span></pre>
<p>
We have used less than and greater than. This means if the centery is equal to the WINDOWHEIGHT/2 it wont try to move and will sit stable in the central position.
</p><p>
That covers if the ball is moving away from the bat. If it is moving towards the bat we said we would move the bat towards the ball.
</p><p>
We first define the elif part of the loop to check if the ball is moving towards the paddle.

</p><pre>    <span class="c">#if ball moving towards bat, track its movement. </span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></pre>
<span class="Apple-tab-span"> </span><p>
In a similar manner to when the ball was moving away from the paddle we check to see the position of the paddle this time with respect to the ball. If it is higher than the ball we increase the paddle Y co-ordinate.

</p><pre>        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">centery</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span></pre>
<p>
Else, it must be lower so we decrease the paddle Y co-ordinate.

</p><pre>        <span class="k">else</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span><span class="mi">1</span></pre>
<span class="Apple-tab-span">   </span><p>
Finally we return paddle2.

</p><pre>    <span class="k">return</span> <span class="n">paddle2</span></pre>
<p>
Right time to save and test your program.

</p>


<b><u>Stage 7 - Collision with the paddle</u></b>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>   

<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span>
    <span class="k">return</span> <span class="n">ball</span>

<span class="c">#Checks for a collision with a wall, and 'bounces' ball off it.</span>
<span class="c">#Returns new direction</span>
<span class="k">def</span> <span class="nf">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span>

<span class="c">#Checks is the ball has hit a paddle, and 'bounces' ball off it.     </span>
<span class="k">def</span> <span class="nf">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
  
<span class="c">#Artificial Intelligence of computer player </span>
<span class="k">def</span> <span class="nf">artificialIntelligence</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">):</span>
    <span class="c">#If ball is moving away from paddle, center bat</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c">#if ball moving towards bat, track its movement. </span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">y</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">paddle2</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>

    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># make cursor invisible</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
            <span class="c"># mouse movement commands</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEMOTION</span><span class="p">:</span>
                <span class="n">mousex</span><span class="p">,</span> <span class="n">mousey</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">paddle1</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">mousey</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="n">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span>
        <span class="n">paddle2</span> <span class="o">=</span> <span class="n">artificialIntelligence</span> <span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
You should now have your paddle moving around the screen nicely using the mouse and the computers paddle moving using its artificial intelligence.
</p><p>
However we have not programmed the software to allow the ball to collide with the paddles, so let us do that now.
</p><p>
As always lets call the function in our main loop to ensure it is checked every-time the FPS ticks over.

</p><pre>        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="n">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span></pre>
<p>
We know that when the ball hits the paddle we will want to reverse the direction the ball is moving in in X.
</p><p>
If we make our function checkHitBall return a -1 if the ball is hit, and a 1 if it is not, then by multiplying this returned value by the value in ballDirX will give us the new ballDirX. This is similar to how we reversed the direction if the ball hit one of the sides.
</p><p>
So below our checkEdgeCollision function lets add a checkHitBall function.
 
</p><pre><span class="c">#Checks is the ball has hit a paddle, and 'bounces' ball off it.     </span>
<span class="k">def</span> <span class="nf">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span></pre>
<span class="Apple-tab-span"> </span><p>
As this function checks if the ball has hit either paddle, we pass both paddles and the ball into the function.

</p><pre><span class="k">def</span> <span class="nf">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span></pre>
<p>
Now the fun bit of seeing if the ball has hit the paddle. Pygame has a few ways of doing this such as checking to see if one rectangle has intersected another. I want to make sure my ball can only be hit from the front and not the back

</p><span>    </span><span class="k">if</span><span> </span><span class="n">ballDirX</span><span> </span><span class="o">==</span><span> </span><span class="o">-</span><span class="mi">1</span><span> </span><span class="ow">and</span><span> </span><span class="n">paddle1</span><span class="o">.</span><span class="n">right</span><span> </span><span class="o">==</span><span> </span><span class="n">ball</span><span class="o">.</span><span class="n">left</span><span> </span><span class="ow">and</span><span> </span><span class="n">paddle1</span><span class="o">.</span><span class="n">top</span><span> </span><span class="o">&lt;</span><span> </span><span class="n">ball</span><span class="o">.</span><span class="n">top</span><span> </span><span class="ow">and</span><span> </span><span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span><span> </span><span class="o">&gt;</span><span> </span><span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
  <p>
This line checks four things to see if the ball has been hit.</p><p>
The first things it checks the direction of the ball. We only want to ball to be classed as being hit if it is hits the paddle from the front. If it is hit from the rear it means you have missed the ball, so we will make the ball pass through the paddle until it is back in play.</p><p>
The next three things it checks are to see the position of the ball relative to the paddle. It checks if the right hand side of the paddle hits the left hand side of the ball AND that the top of the ball is lower than the top of the paddle AND the bottom of the ball is higher than the bottom of the paddle.
</p><p>
If these three AND statements are true, then the paddle has hit the ball so we return a -1 to flip the direction.

</p><pre>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></pre>
<span class="Apple-tab-span">  </span><p>
We now do something very similar but for the computer paddle which is paddle 2. Notice we want the ball to be moving in a different direction and the right hand side of the ball will hit the left side of the paddle. 

</p><pre>    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></pre>
<p>
Finally if nothing has been hit we should return a 1 so the direction of the ball doesn't change.

</p><pre>    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span></pre>




<b><u>Step 8 - Add a scoring system</u></b>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">200</span>

<span class="c">#Global Variables to be used through our program</span>
<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>

<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">ballDirX</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">ballDirY</span>
    <span class="k">return</span> <span class="n">ball</span>

<span class="c">#Checks for a collision with a wall, and 'bounces' ball off it.</span>
<span class="c">#Returns new direction</span>
<span class="k">def</span> <span class="nf">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span>

<span class="c">#Checks is the ball has hit a paddle, and 'bounces' ball off it.     </span>
<span class="k">def</span> <span class="nf">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>

<span class="c">#Checks to see if a point has been scored returns new score</span>
<span class="k">def</span> <span class="nf">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="c">#reset points if left wall is hit</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">LINETHICKNESS</span><span class="p">:</span> 
        <span class="k">return</span> <span class="mi">0</span>
    <span class="c">#1 point for hitting the ball</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c">#5 points for beating the other paddle</span>
    <span class="k">elif</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c">#if no points scored, return score unchanged</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">score</span>

<span class="c">#Artificial Intelligence of computer player </span>
<span class="k">def</span> <span class="nf">artificialIntelligence</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">):</span>
    <span class="c">#If ball is moving away from paddle, center bat</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c">#if ball moving towards bat, track its movement. </span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">centery</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">paddle2</span>

<span class="c">#Displays the current score on the screen</span>
<span class="k">def</span> <span class="nf">displayScore</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
    <span class="n">resultSurf</span> <span class="o">=</span> <span class="n">BASICFONT</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">'Score = </span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span><span class="p">(</span><span class="n">score</span><span class="p">),</span> <span class="bp">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
    <span class="n">resultRect</span> <span class="o">=</span> <span class="n">resultSurf</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>
    <span class="n">resultRect</span><span class="o">.</span><span class="n">topleft</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">resultSurf</span><span class="p">,</span> <span class="n">resultRect</span><span class="p">)</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>
    <span class="c">##Font information</span>
    <span class="k">global</span> <span class="n">BASICFONT</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span>
    <span class="n">BASICFONTSIZE</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">BASICFONT</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s">'freesansbold.ttf'</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span><span class="p">)</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># make cursor invisible</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
            <span class="c"># mouse movement commands</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEMOTION</span><span class="p">:</span>
                <span class="n">mousex</span><span class="p">,</span> <span class="n">mousey</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">paddle1</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">mousey</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="n">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span>
        <span class="n">paddle2</span> <span class="o">=</span> <span class="n">artificialIntelligence</span> <span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">)</span>

        <span class="n">displayScore</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
Right we should have the majority of our game written, so how about adding a display of the score?
</p><p>
We will do this in two parts. First we will update the score and then we will display the score.
</p><p>
Before we write our function to update the score lets call that function in our main program.
</p><p>
We only want the score to change if the ball has hit the paddle while moving in a certain direction. Therefore we need to call the function to check the score before we update the ball direction once it has been hit.
</p><p>
Add this line in the main function before you check the ball is hit, but after you have checked edge collision.

</p><pre>        <span class="n">score</span> <span class="o">=</span> <span class="n">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span></pre>
<p>
This line updates the variable score with whatever is returned from the checkPointScored function. What have we forgotten? We need to initiate the variable 'score' as we have with the other variables.
</p><p>
So underneath the line 
</p><p>
playerTwoPosition = (WINDOWHEIGHT - PADDLESIZE) /2
</p><p>
add
</p><p>
Score = 0

</p><pre>    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span></pre>
   <p>
Now we can write our function which will check if any points have been scored and update the score to reflect this.
</p><p>
Our checkPointScored function takes the position of paddle 1, the position of the ball, the current score and the direction of the ball to help determine if a point has been scored.
</p><p>
You can decide how and when points are scored if you want to. My function gives 5 points for beating the computers paddle and one point for hitting the ball. If your paddle is beaten, then your points are reset to 0.
</p><p>
The whole of the function looks as follows.

</p><pre><span class="c">#Checks to see if a point has been scored returns new score</span>
<span class="k">def</span> <span class="nf">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="c">#reset points if left wall is hit</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">LINETHICKNESS</span><span class="p">:</span> 
        <span class="k">return</span> <span class="mi">0</span>
    <span class="c">#1 point for hitting the ball</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c">#5 points for beating the other paddle</span>
    <span class="k">elif</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c">#if no points scored, return score unchanged</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">score</span></pre>
<span class="Apple-tab-span"> </span><p>
As always we define the name of the function and the parameters being passed into it.

</p><pre><span class="k">def</span> <span class="nf">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span></pre>
<p>
We then check to see if the players paddle has been beaten.

</p><pre>    <span class="c">#reset points if left wall is hit</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">LINETHICKNESS</span><span class="p">:</span> 
        <span class="k">return</span> <span class="mi">0</span></pre>
<p>
If the ball makes it to the left hand side of the arena, we return 0 i.e. reset the score to 0.
</p><p>
Now we look to see if your paddle has been hit. We use the same check we carried out to see if we had hit the ball. We then increase the score by one and return it.

</p><pre>    <span class="c">#1 point for hitting the ball</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">score</span></pre>
<span class="Apple-tab-span">  </span><p>
Now we see if the computer paddle has been beaten. This is very similar to seeing if your own paddle has been passed by the ball. This time we check the right hand side of the ball and the right hand edge of the arena.

</p><pre>    <span class="c">#5 points for beating the other paddle</span>
    <span class="k">elif</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="k">return</span> <span class="n">score</span></pre>
<span class="Apple-tab-span">  </span><p>
If this happens we add 5 onto the score and return that.
</p><span class="Apple-tab-span">  </span><p>
If nothing has happened to cause the score to change we return the score unaffected.

</p><pre>    <span class="c">#if no points scored, return score unchanged</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">score</span></pre>
<p>
That was all very straight forward wasn't it?
</p><p>
Now we have worked out what our score should be, we need to display the score.
</p><p>
In our main function we will call a function to display the score.

</p><pre>        <span class="n">displayScore</span><span class="p">(</span><span class="n">score</span><span class="p">)</span></pre>
<span class="Apple-tab-span">  </span><p>
Before we write the function we will have to create some information about the font we want to use to display the score.
</p><p>
Underneath global DISPLAYNAME at the top of our main function add the following.

</p><pre>    <span class="c">##Font information</span>
    <span class="k">global</span> <span class="n">BASICFONT</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span>
    <span class="n">BASICFONTSIZE</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">BASICFONT</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s">'freesansbold.ttf'</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span><span class="p">)</span></pre>
<span class="Apple-tab-span"> </span><p>
This creates a global variable called BASICFONT and another called BASICFONTSIZE.
</p><p>
We then set BASICFONTSIZE to 20

</p><pre>    <span class="n">BASICFONTSIZE</span> <span class="o">=</span> <span class="mi">20</span></pre>
<p>
and set the font to freesansbold

</p><pre>    <span class="n">BASICFONT</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s">'freesansbold.ttf'</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span><span class="p">)</span></pre>
<span class="Apple-tab-span">  </span><p>
Now we can write the function which displays the score.
</p><span class="Apple-tab-span"> </span>
<pre><span class="c">#Displays the current score on the screen</span>
<span class="k">def</span> <span class="nf">displayScore</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
    <span class="n">resultSurf</span> <span class="o">=</span> <span class="n">BASICFONT</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">'Score = </span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span><span class="p">(</span><span class="n">score</span><span class="p">),</span> <span class="bp">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
    <span class="n">resultRect</span> <span class="o">=</span> <span class="n">resultSurf</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>
    <span class="n">resultRect</span><span class="o">.</span><span class="n">topleft</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">resultSurf</span><span class="p">,</span> <span class="n">resultRect</span><span class="p">)</span></pre>
<span class="Apple-tab-span"> </span><p>
The first line creates a new surface called resultSurf. 

</p><pre>    <span class="n">resultSurf</span> <span class="o">=</span> <span class="n">BASICFONT</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">'Score = </span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span><span class="p">(</span><span class="n">score</span><span class="p">),</span> <span class="bp">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span></pre>
<p>
It then takes the information from BASICFONT and renders it with the following information defined within the brackets.
</p><p>
'Score = %s' %(score)
</p><p>
This explains the text to be displayed. It will say 'Score = %s' where %s is replaced by whatever follows the %. In our case the value stored in the variable score.
</p><p>
Therefore if the score was 4 we would see.
</p><p>
Score = 4
</p><p>
True refers to the fact we want anti-aliasing turned on. I will not go into the technical details of how this achieves its results, as it is beyond the scope of this tutorial. If you are curious then replace True with False and look at how blocky the font looks!
</p><p>
WHITE defines the colour and uses the information we stored in the global variable when we defined the WHITE and BLACK earlier in our program.
</p><p>
The next line

</p><pre>    <span class="n">resultRect</span> <span class="o">=</span> <span class="n">resultSurf</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span></pre>
<p>
This creates a new rectangle called resultRect which is the same size as the surface we created on the previous line. It uses a built in function of pygame called get_rect().
</p><p>
Next we position the new rectangle

</p><pre>    <span class="n">resultRect</span><span class="o">.</span><span class="n">topleft</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span></pre>
<span class="Apple-tab-span"> </span><p>
This places the text 'WINDOWWIDTH - 150' in X which is 150 pixels from the right hand side of the screen, and 25 pixels from the top in Y.
</p><p>
Finally we display the surface with

</p><pre>    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">resultSurf</span><span class="p">,</span> <span class="n">resultRect</span><span class="p">)</span></pre>
<span class="Apple-tab-span"> </span><p>
which uses blit to update just the part of the screen specified by resultRect, which we have just created to match the size of our surface.
</p><p>
There we go, you should have a fully working game of pong.

</p>


<b><u>Stage 9 - Speed Optimisation</u></b>

<pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Number of frames per second</span>
<span class="c"># Change this value to speed up or slow down your game</span>
<span class="n">FPS</span> <span class="o">=</span> <span class="mi">40</span>
<span class="n">INCREASESPEED</span> <span class="o">=</span> <span class="mi">5</span>

<span class="c">#Global Variables to be used through our program</span>

<span class="n">WINDOWWIDTH</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">WINDOWHEIGHT</span> <span class="o">=</span> <span class="mi">300</span>
<span class="n">LINETHICKNESS</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">PADDLESIZE</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">PADDLEOFFSET</span> <span class="o">=</span> <span class="mi">20</span>

<span class="c"># Set up the colours</span>
<span class="n">BLACK</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">,</span><span class="mi">0</span>  <span class="p">)</span>
<span class="n">WHITE</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span>

<span class="c">#Draws the arena the game will be played in. </span>
<span class="k">def</span> <span class="nf">drawArena</span><span class="p">():</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
    <span class="c">#Draw outline of arena</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),(</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">)),</span> <span class="n">LINETHICKNESS</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
    <span class="c">#Draw centre line</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="mi">0</span><span class="p">),((</span><span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span><span class="n">WINDOWHEIGHT</span><span class="p">),</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>

<span class="c">#Draws the paddle</span>
<span class="k">def</span> <span class="nf">drawPaddle</span><span class="p">(</span><span class="n">paddle</span><span class="p">):</span>
    <span class="c">#Stops paddle moving too low</span>
    <span class="k">if</span> <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">bottom</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Stops paddle moving too high</span>
    <span class="k">elif</span> <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">paddle</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">LINETHICKNESS</span>
    <span class="c">#Draws paddle</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">paddle</span><span class="p">)</span>

<span class="c">#draws the ball</span>
<span class="k">def</span> <span class="nf">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">):</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">DISPLAYSURF</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">,</span> <span class="n">ball</span><span class="p">)</span>

<span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="p">(</span><span class="n">ballDirX</span> <span class="o">*</span> <span class="n">INCREASESPEED</span><span class="p">)</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="p">(</span><span class="n">ballDirY</span> <span class="o">*</span> <span class="n">INCREASESPEED</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ball</span>

<span class="c">#Checks for a collision with a wall, and 'bounces' ball off it.</span>
<span class="c">#Returns new direction</span>
<span class="k">def</span> <span class="nf">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">ballDirY</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="p">(</span><span class="n">LINETHICKNESS</span><span class="p">)</span> <span class="ow">or</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">):</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span>

<span class="c">#Checks is the ball has hit a paddle, and 'bounces' ball off it.     </span>
<span class="k">def</span> <span class="nf">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>

<span class="c">#Checks to see if a point has been scored returns new score</span>
<span class="k">def</span> <span class="nf">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">):</span>
    <span class="c">#reset points if left wall is hit</span>
    <span class="k">if</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="o">==</span> <span class="n">LINETHICKNESS</span><span class="p">:</span> 
        <span class="k">return</span> <span class="mi">0</span>
    <span class="c">#1 point for hitting the ball</span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">ball</span><span class="o">.</span><span class="n">left</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">top</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">top</span> <span class="ow">and</span> <span class="n">paddle1</span><span class="o">.</span><span class="n">bottom</span> <span class="o">&gt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">bottom</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c">#5 points for beating the other paddle</span>
    <span class="k">elif</span> <span class="n">ball</span><span class="o">.</span><span class="n">right</span> <span class="o">==</span> <span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">:</span>
        <span class="n">score</span> <span class="o">+=</span> <span class="mi">5</span>
        <span class="k">return</span> <span class="n">score</span>
    <span class="c">#if no points scored, return score unchanged</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">score</span>

<span class="c">#Artificial Intelligence of computer player       </span>
<span class="k">def</span> <span class="nf">artificialIntelligence</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">):</span>
    <span class="c">#If ball is moving away from paddle, center bat</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">INCREASESPEED</span>
        <span class="k">elif</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">INCREASESPEED</span>
    <span class="c">#if ball moving towards bat, track its movement. </span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">centery</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">INCREASESPEED</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">INCREASESPEED</span>
    <span class="k">return</span> <span class="n">paddle2</span>

<span class="c">#Displays the current score on the screen</span>
<span class="k">def</span> <span class="nf">displayScore</span><span class="p">(</span><span class="n">score</span><span class="p">):</span>
    <span class="n">resultSurf</span> <span class="o">=</span> <span class="n">BASICFONT</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="s">'Score = </span><span class="si">%s</span><span class="s">'</span> <span class="o">%</span><span class="p">(</span><span class="n">score</span><span class="p">),</span> <span class="bp">True</span><span class="p">,</span> <span class="n">WHITE</span><span class="p">)</span>
    <span class="n">resultRect</span> <span class="o">=</span> <span class="n">resultSurf</span><span class="o">.</span><span class="n">get_rect</span><span class="p">()</span>
    <span class="n">resultRect</span><span class="o">.</span><span class="n">topleft</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
    <span class="n">DISPLAYSURF</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">resultSurf</span><span class="p">,</span> <span class="n">resultRect</span><span class="p">)</span>

<span class="c">#Main function</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
    <span class="k">global</span> <span class="n">DISPLAYSURF</span>
    <span class="c">##Font information</span>
    <span class="k">global</span> <span class="n">BASICFONT</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span>
    <span class="n">BASICFONTSIZE</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">BASICFONT</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s">'freesansbold.ttf'</span><span class="p">,</span> <span class="n">BASICFONTSIZE</span><span class="p">)</span>

    <span class="n">FPSCLOCK</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>
    <span class="n">DISPLAYSURF</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">WINDOWWIDTH</span><span class="p">,</span><span class="n">WINDOWHEIGHT</span><span class="p">))</span> 
    <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'Pong'</span><span class="p">)</span>

    <span class="c">#Initiate variable and set starting positions</span>
    <span class="c">#any future changes made within rectangles</span>
    <span class="n">ballX</span> <span class="o">=</span> <span class="n">WINDOWWIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">ballY</span> <span class="o">=</span> <span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="o">/</span><span class="mi">2</span>
    <span class="n">playerOnePosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">playerTwoPosition</span> <span class="o">=</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span> <span class="o">-</span> <span class="n">PADDLESIZE</span><span class="p">)</span> <span class="o">/</span><span class="mi">2</span>
    <span class="n">score</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c">#Keeps track of ball direction</span>
    <span class="n">ballDirX</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = left 1 = right</span>
    <span class="n">ballDirY</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="c">## -1 = up 1 = down</span>

    <span class="c">#Creates Rectangles for ball and paddles.</span>
    <span class="n">paddle1</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">PADDLEOFFSET</span><span class="p">,</span><span class="n">playerOnePosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">paddle2</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">WINDOWWIDTH</span> <span class="o">-</span> <span class="n">PADDLEOFFSET</span> <span class="o">-</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">playerTwoPosition</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span><span class="n">PADDLESIZE</span><span class="p">)</span>
    <span class="n">ball</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">ballX</span><span class="p">,</span> <span class="n">ballY</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">,</span> <span class="n">LINETHICKNESS</span><span class="p">)</span>

    <span class="c">#Draws the starting position of the Arena</span>
    <span class="n">drawArena</span><span class="p">()</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
    <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
    <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

    <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># make cursor invisible</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span> <span class="c">#main game loop</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
            <span class="c"># mouse movement commands</span>
            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEMOTION</span><span class="p">:</span>
                <span class="n">mousex</span><span class="p">,</span> <span class="n">mousey</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">paddle1</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">mousey</span>

        <span class="n">drawArena</span><span class="p">()</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle1</span><span class="p">)</span>
        <span class="n">drawPaddle</span><span class="p">(</span><span class="n">paddle2</span><span class="p">)</span>
        <span class="n">drawBall</span><span class="p">(</span><span class="n">ball</span><span class="p">)</span>

        <span class="n">ball</span> <span class="o">=</span> <span class="n">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span> <span class="o">=</span> <span class="n">checkEdgeCollision</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">)</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">checkPointScored</span><span class="p">(</span><span class="n">paddle1</span><span class="p">,</span> <span class="n">ball</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span>
        <span class="n">ballDirX</span> <span class="o">=</span> <span class="n">ballDirX</span> <span class="o">*</span> <span class="n">checkHitBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">paddle1</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">)</span>
        <span class="n">paddle2</span> <span class="o">=</span> <span class="n">artificialIntelligence</span> <span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">)</span>

        <span class="c">#displayScore(score)</span>

        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">FPSCLOCK</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="n">FPS</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span></pre>
<p>
So we now have a fully working game of PONG. What do you feel about the speed of the game. For me it runs very well on my PC, a little slow on my Mac and very slow on my Raspberry Pi. Some of you will be able to tweak the value set in FPS to slow down or speed up the game. However if your system is running flat out what can you do to speed it up?
</p><p>
The main reason the game slows down is because it struggles to refresh the screen at the desired FPS. Quite a common problem in Pygame.
</p><p>
There are a few options to help improve the situation. You can do one or all of the following.

</p><b>Increase movement per frame.</b>
<p>
Well at the moment you are moving the ball only one pixel per frame. We can increase this.
</p><p>
Under the line where you defined the FPS add the following line.

</p><pre><span class="n">INCREASESPEED</span> <span class="o">=</span> <span class="mi">5</span></pre>
<p>
Now when you move the ball in the moveBall function instead of increasing its location by one, increase it by 5 using the following.

</p><pre><span class="c">#moves the ball returns new position</span>
<span class="k">def</span> <span class="nf">moveBall</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">ballDirY</span><span class="p">):</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="p">(</span><span class="n">ballDirX</span> <span class="o">*</span> <span class="n">INCREASESPEED</span><span class="p">)</span>
    <span class="n">ball</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="p">(</span><span class="n">ballDirY</span> <span class="o">*</span> <span class="n">INCREASESPEED</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ball</span></pre>
<p>
To ensure the computers paddle is not massively slow in relation to this you should also make a similar change in the artificialIntelligence function.

</p><pre><span class="c">#Artificial Intelligence of computer player       </span>
<span class="k">def</span> <span class="nf">artificialIntelligence</span><span class="p">(</span><span class="n">ball</span><span class="p">,</span> <span class="n">ballDirX</span><span class="p">,</span> <span class="n">paddle2</span><span class="p">):</span>
    <span class="c">#If ball is moving away from paddle, center bat</span>
    <span class="k">if</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">INCREASESPEED</span>
        <span class="k">elif</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">WINDOWHEIGHT</span><span class="o">/</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">INCREASESPEED</span>
    <span class="c">#if ball moving towards bat, track its movement. </span>
    <span class="k">elif</span> <span class="n">ballDirX</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">paddle2</span><span class="o">.</span><span class="n">centery</span> <span class="o">&lt;</span> <span class="n">ball</span><span class="o">.</span><span class="n">centery</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="n">INCREASESPEED</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">paddle2</span><span class="o">.</span><span class="n">y</span> <span class="o">-=</span> <span class="n">INCREASESPEED</span>
    <span class="k">return</span> <span class="n">paddle2</span></pre>
<span class="Apple-tab-span"> </span><p>
Instead of increasing the paddle position by a value of 1 it increases it by the value stored in INCREASESPEED.
</p><span class="Apple-tab-span"> </span><p>
There is a warning with this method of increasing the speed. While the value 5 works in this case, increasing the value of INCREASESPEED may mean the paddles do not recognise when the ball is hit or the ball does not bounce off the side of the arena. The ball jumps by 5 pixels, which is ok. If it jumps by 10 or 20 it may not detect collision with the wall or paddle and will appear to pass through them.
</p><p>
Another option is simply don't display the score!
</p><span class="Apple-tab-span"> </span><p>
One thing which slows the game down more than anything is the displaying of the score. So to stop this slowing down the game, don't display the score!
</p><span class="Apple-tab-span"> </span><p>
Place a hash tag in front of the line displayScore(score) and this will stop the screen updating the score.

</p><pre>        <span class="c">#displayScore(score)</span></pre>
<p>
I hope you have enjoyed writing this game of pong as much as I did. Hopefully you have learned a few new Pygame tools to aid you with programming your own games!

</p><b>Update</b>
<b><br/></b><p>Since writing this blog post Nat over at </p><a href="https://www.webucator.com/programming/python.cfm" target="_blank">Webucator</a><p>has turned this blog post into an excellent video tutorial which refactors the code using OOP. Its definitely worth having a look at the video they have created, which I discuss in a later blog post. 

</p>


<p class="separator">
<br/></p>


<p/>
</div>
</div></body></html>