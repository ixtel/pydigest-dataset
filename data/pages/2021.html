<html><body><div><div class="entry-content">
		<p><a href="https://impythonist.files.wordpress.com/2014/11/pract.jpg"><img class="aligncenter  wp-image-829" src="https://impythonist.files.wordpress.com/2014/11/pract.jpg?w=519&amp;h=401" alt="pract"/></a></p>
<p>We all know that programmes die after execution.Data may be persistent if serialized.So consider the case that we need to backup all the logs,or delete something periodically.We need a scheduler to do that.One great scheduler available for Linux systems is CRON scheduler.There are two things having subtle importance here.</p>
<p>1) How to use CRON scheduler to execute any command on a Linux computer.</p>
<p>2)How to use APScheduler to run some functions in a python script for a particular time.</p>
<h2 id="toc_0">Crontab</h2>
<p>The crontab (cron derives from <em>chronos</em>, Greek for time; tab stands for <em>table</em>) command, found in Unix and Unix-like operating systems, is used to schedule commands to be executed periodically. To see what crontabs are currently running on your system, you can open a terminal and run:</p>

<div>
<p>If we want to create new job or edit the existing crontab job Just type</p>

<p> If we wish to remove crontabs just type</p>

<p/>
<p>It removes all crontabs.What is crontab ?,it is a file to which jobs are added .So add jobs to the end of that file by launching command “$ crontab -e”</p>
<p>This will open a the default editor (could be vi or pico, if you want you can <a href="http://kvz.io/blog/2007/07/11/change-the-default-editor/">change the default editor</a>) to let us manipulate the crontab. If you save and exit the editor, all your cronjobs are saved into crontab. Cronjobs are written in the following format,here any valid command can be used after 5 *:</p>
<div class="highlight">
<pre class=" language-bash"><code class="bash  language-bash"><span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">/</span>bin<span class="token operator">/</span>execute<span class="token operator">/</span>this<span class="token operator">/</span>script<span class="token punctuation">.</span>sh
* * * * * [any_valid_linux_command]</code></pre>
</div>
<h2 id="toc_1">Scheduling</h2>
<p> </p>
<p>As you can see there are 5 stars. The stars represent different date parts in the following order:</p>
<ul>
<li>minute (from 0 to 59)</li>
<li>hour (from 0 to 23)</li>
<li>day of month (from 1 to 31)</li>
<li>month (from 1 to 12)</li>
<li>day of week (from 0 to 6) (0=Sunday)</li>
</ul>
<h3 id="toc_2">Execute every minute</h3>
<p>If you leave the star, or asterisk, it means <strong>every</strong>. Maybe that’s a bit unclear. Let’s use the the previous example again:</p>
<div class="highlight">
<pre class=" language-bash"><code class="bash  language-bash"><span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> python <span class="token operator">/home</span><span class="token operator">/</span>execute<span class="token operator">/</span>this<span class="token operator">/funny</span><span class="token punctuation">.py</span>
</code></pre>
</div>
<p>They are all still asterisks! So this means execute <code>/home/execute/this/funny.py</code>:</p>
<ul>
<li><strong>every</strong> minute</li>
<li>of <strong>every</strong> hour</li>
<li>of <strong>every</strong> day of the month</li>
<li>of <strong>every</strong> month</li>
<li>and <strong>every</strong> day in the week.</li>
</ul>
<p>In short: This script is being executed every minute. Without exception.</p>
<h3 id="toc_3">Execute every Friday 1AM</h3>
<p>So if we want to schedule the python script to run at 1AM every Friday, we would need the following cronjob:</p>
<div class="highlight">
<pre class=" language-bash"><code class="bash  language-bash"><span class="token number">0</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token number">5</span> python <span class="token operator">/home</span><span class="token operator">/aryan</span><span class="token operator">/</span>this<span class="token operator">/</span>script<span class="token punctuation">.py</span>
</code></pre>
</div>
<p>Get it? The script is now being executed when the system clock hits:</p>
<ul>
<li>minute: <code>0</code></li>
<li>of hour: <code>1</code></li>
<li>of day of month: <code>*</code> (every day of month)</li>
<li>of month: <code>*</code> (every month)</li>
<li>and weekday: <code>5</code> (=Friday)</li>
</ul>
<h3 id="toc_4">Execute on workdays 1AM</h3>
<p>So if we want to schedule the python script to Monday till Friday at 1 AM, we would need the following cronjob:</p>
<div class="highlight">
<pre class=" language-bash"><code class="bash  language-bash"><span class="token number">0</span> <span class="token number">1</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token operator">-</span><span class="token number">5</span> python <span class="token operator">/</span>bin<span class="token operator">/</span>execute<span class="token operator">/</span>this<span class="token operator">/</span>script<span class="token punctuation">.py</span>
</code></pre>
</div>
<h2 id="toc_6">Neat scheduling tricks</h2>
<p>What if you’d want to run something every 10 minutes? Well you could do this:</p>
<div class="highlight">
<pre class=" language-bash"><code class="bash  language-bash"><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">50</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> python <span class="token operator">/</span>bin<span class="token operator">/</span>execute<span class="token operator">/</span>this<span class="token operator">/</span>script<span class="token punctuation">.py</span>
</code></pre>
</div>
<p>But crontab allows you to do this as well:</p>
<div class="highlight">
<pre class=" language-bash"><code class="bash  language-bash"><span class="token operator">*</span><span class="token operator">/</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> python <span class="token operator">/</span>bin<span class="token operator">/</span>execute<span class="token operator">/</span>this<span class="token operator">/</span>script<span class="token punctuation">.py</span></code></pre>
</div>
</div>
<p> </p>
<h2 id="toc_8">Storing the crontab output</h2>
<p>By default cron saves the output of <code>/bin/execute/this/backup.py</code> in the user’s mailbox (root in this case). But it’s prettier if the output is saved in a separate logfile. Here’s how:</p>
<div class="highlight">
<pre class=" language-bash"><code class="bash  language-bash"><span class="token operator">*</span><span class="token operator">/</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> python <span class="token operator">/</span>bin<span class="token operator">/</span>execute<span class="token operator">/</span>this<span class="token operator">/backup</span><span class="token punctuation">.py</span> <span class="token operator">&gt;</span><span class="token operator">&gt;</span> <span class="token operator">/</span>var<span class="token operator">/</span>log<span class="token operator">/</span>script_output<span class="token punctuation">.</span>log <span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token number">1</span>
</code></pre>
</div>
<p>Linux can report on different levels. There’s standard output (STDOUT) and standard errors (STDERR). STDOUT is marked 1, STDERR is marked 2. So the following statement tells Linux to store STDERR in STDOUT as well, creating one datastream for messages &amp; errors:</p>

<h3 id="toc_9"><img class="alignnone" src="https://i0.wp.com/www.markus-gattol.name/misc/mm/si/content/cron_schedule_a_command_format.png" alt=""/></h3>
<h3> this is a shortcut illustration to up and run with cron</h3>
<h3/>
<p>So now we understood how to run a python script for particular time.This is doing outside the program,means scheduling python programme manually by programmer.But sometimes we require to schedule from inside the program.For that we use a good library called APScheduler.you can install it by using the following command.</p>
<div>
<pre class=" language-bash"><code class="bash  language-bash"><span class="token operator">
$ sudo pip install apscheduler</span></code></pre>
</div>
<p>Ok after installing APScheduler,we can see how simple scheduling any job.Here we are going to a level deeper and schedule python functions to execute at a particular time.Here jobs are python functions.</p>
<p/>
<div>
<div id="example-1" class="section">
<div class="highlight-python">
<div class="highlight">
<div>
<pre class=" language-bash"><code class="bash  language-bash"><span class="token operator">from apscheduler.scheduler import Scheduler
#start the scheduler i.e create instance
sched=Scheduler
sched.start()
def my_job():
    print 'Happy_Birthday,Aryan'
#schedules job function my_job to greet me every year on my Birthday
sched.add_cron_job(my_job,month=6,day=24,hour=0)</span></code></pre>
</div>
</div>
</div>
</div>
<p id="example-2" class="section"> So this script greets me on my birthday by running the function every year.Running the script is done by the step 1 i.e cron scheduling,and inside the script scheduling is handled by APScheduler,see how goodies are provided for us.Here my_job is doing simple task but in real time systems,this mean anything like taking backup,deleting logs,housekeeping etc.</p>
<p class="section"/>
<p class="section">There are lots of things we can do with APScheduler,by adding jobs to Mongostore,redis store etc.For full fledged documentation kindly go to</p>
<p class="section"/>

<p class="section"/>
<p class="section">and especially for cron format go to this page,and explore yourself.</p>
<p class="section"/>

<p class="section"/>
<div class="section">
<h2 id="toc_8">Last but not least</h2>
<p>Sometimes we need to create some python applications for operating systems using  KDE,GTK+.So those applications should run at system start up ,for that we need to add this  below command in the crontab file.Just add this simple line in crontab file</p>
</div>
<p class="section"/>
<div class="section">
<pre>@reboot python /home/arya/Timepass.py &amp;</pre>
</div>
<p class="section"> here @reboot tells that command should be executed at reboot,and &amp; tells that process to run background.This finishes our little chit chat about CRON and APScheduler.Hope you enjoyed this post.</p>
</div>
		<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded" id="like-post-wrapper-62549587-787-56d59be6ed467" data-src="//widgets.wp.com/likes/#blog_id=62549587&amp;post_id=787&amp;origin=impythonist.wordpress.com&amp;obj_id=62549587-787-56d59be6ed467" data-name="like-post-frame-62549587-787-56d59be6ed467"><h3 class="sd-title">Like this:</h3><p class="likes-widget-placeholder post-likes-widget-placeholder"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></p><span class="sd-text-color"/><a class="sd-link-color"/></div>
<p id="jp-relatedposts" class="jp-relatedposts">
	<h3 class="jp-relatedposts-headline"><em>Related</em></h3>
</p></div>					</div>

	</div></body></html>