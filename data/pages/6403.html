<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-python-periphery-v100" class="anchor" href="#python-periphery-v100" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>python-periphery v1.0.0</h1>

<h2><a id="user-content-linux-peripheral-io-gpio-spi-i2c-mmio-serial-with-python-2--python-3" class="anchor" href="#linux-peripheral-io-gpio-spi-i2c-mmio-serial-with-python-2--python-3" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Linux Peripheral I/O (GPIO, SPI, I2C, MMIO, Serial) with Python 2 / Python 3</h2>

<p>python-periphery is a pure Python library for GPIO, SPI, I2C, MMIO, and Serial peripheral I/O interface access in userspace Linux. It is useful in embedded Linux environments (including BeagleBone, Raspberry Pi, etc. platforms) for interfacing with external peripherals. python-periphery is compatible with Python 2 and Python 3, is written in pure Python, and is MIT licensed.</p>

<p>Using Lua or C? Check out the <a href="https://github.com/vsergeev/lua-periphery">lua-periphery</a> and <a href="https://github.com/vsergeev/c-periphery">c-periphery</a> projects.</p>

<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>

<p>With pip:</p>

<pre lang="text"><code>$ pip install python-periphery
</code></pre>

<p>With easy_install:</p>

<pre lang="text"><code>$ easy_install python-periphery
</code></pre>

<p>With setup.py:</p>

<pre lang="text"><code>$ git clone https://github.com/vsergeev/python-periphery.git
$ cd python-periphery
$ python setup.py install
</code></pre>

<h2><a id="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Examples</h2>

<h3><a id="user-content-gpio" class="anchor" href="#gpio" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>GPIO</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> periphery <span class="pl-k">import</span> <span class="pl-c1">GPIO</span>

<span class="pl-c"># Open GPIO 10 with input direction</span>
gpio_in <span class="pl-k">=</span> GPIO(<span class="pl-c1">10</span>, <span class="pl-s"><span class="pl-pds">"</span>in<span class="pl-pds">"</span></span>)
<span class="pl-c"># Open GPIO 12 with output direction</span>
gpio_out <span class="pl-k">=</span> GPIO(<span class="pl-c1">12</span>, <span class="pl-s"><span class="pl-pds">"</span>out<span class="pl-pds">"</span></span>)

value <span class="pl-k">=</span> gpio_in.read()
gpio_out.write(value)

gpio_in.close()
gpio_out.close()</pre></div>

<p><a href="http://python-periphery.readthedocs.org/en/latest/gpio.html">Go to GPIO documentation.</a></p>

<h3><a id="user-content-spi" class="anchor" href="#spi" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>SPI</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> periphery <span class="pl-k">import</span> <span class="pl-c1">SPI</span>

<span class="pl-c"># Open spidev1.0 with mode 0 and max speed 1MHz</span>
spi <span class="pl-k">=</span> SPI(<span class="pl-s"><span class="pl-pds">"</span>/dev/spidev1.0<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>, <span class="pl-c1">1000000</span>)

data_out <span class="pl-k">=</span> [<span class="pl-c1"><span class="pl-k">0x</span>aa</span>, <span class="pl-c1"><span class="pl-k">0x</span>bb</span>, <span class="pl-c1"><span class="pl-k">0x</span>cc</span>, <span class="pl-c1"><span class="pl-k">0x</span>dd</span>]
data_in <span class="pl-k">=</span> spi.transfer(data_out)

<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>shifted out [0x<span class="pl-c1">%02x</span>, 0x<span class="pl-c1">%02x</span>, 0x<span class="pl-c1">%02x</span>, 0x<span class="pl-c1">%02x</span>]<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-c1">tuple</span>(data_out))
<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>shifted in  [0x<span class="pl-c1">%02x</span>, 0x<span class="pl-c1">%02x</span>, 0x<span class="pl-c1">%02x</span>, 0x<span class="pl-c1">%02x</span>]<span class="pl-pds">"</span></span> <span class="pl-k">%</span> <span class="pl-c1">tuple</span>(data_in))

spi.close()</pre></div>

<p><a href="http://python-periphery.readthedocs.org/en/latest/spi.html">Go to SPI documentation.</a></p>

<h3><a id="user-content-i2c" class="anchor" href="#i2c" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>I2C</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> periphery <span class="pl-k">import</span> <span class="pl-c1">I2C</span>

<span class="pl-c"># Open i2c-0 controller</span>
i2c <span class="pl-k">=</span> I2C(<span class="pl-s"><span class="pl-pds">"</span>/dev/i2c-0<span class="pl-pds">"</span></span>)

<span class="pl-c"># Read byte at address 0x100 of EEPROM at 0x50</span>
msgs <span class="pl-k">=</span> [<span class="pl-c1">I2C</span>.Message([<span class="pl-c1"><span class="pl-k">0x</span>01</span>, <span class="pl-c1"><span class="pl-k">0x</span>00</span>]), <span class="pl-c1">I2C</span>.Message([<span class="pl-c1"><span class="pl-k">0x</span>00</span>], <span class="pl-v">read</span><span class="pl-k">=</span><span class="pl-c1">True</span>)]
i2c.transfer(<span class="pl-c1"><span class="pl-k">0x</span>50</span>, msgs)
<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>0x100: 0x<span class="pl-c1">%02x</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> msgs[<span class="pl-c1">1</span>].data[<span class="pl-c1">0</span>])

i2c.close()</pre></div>

<p><a href="http://python-periphery.readthedocs.org/en/latest/i2c.html">Go to I2C documentation.</a></p>

<h3><a id="user-content-mmio" class="anchor" href="#mmio" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>MMIO</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> periphery <span class="pl-k">import</span> <span class="pl-c1">MMIO</span>

<span class="pl-c"># Open am335x real-time clock subsystem page</span>
rtc_mmio <span class="pl-k">=</span> MMIO(<span class="pl-c1"><span class="pl-k">0x</span>44E3E000</span>, <span class="pl-c1"><span class="pl-k">0x</span>1000</span>)

<span class="pl-c"># Read current time</span>
rtc_secs <span class="pl-k">=</span> rtc_mmio.read32(<span class="pl-c1"><span class="pl-k">0x</span>00</span>)
rtc_mins <span class="pl-k">=</span> rtc_mmio.read32(<span class="pl-c1"><span class="pl-k">0x</span>04</span>)
rtc_hrs <span class="pl-k">=</span> rtc_mmio.read32(<span class="pl-c1"><span class="pl-k">0x</span>08</span>)

<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>hours: <span class="pl-c1">%02x</span> minutes: <span class="pl-c1">%02x</span> seconds: <span class="pl-c1">%02x</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> (rtc_hrs, rtc_mins, rtc_secs))

rtc_mmio.close()

<span class="pl-c"># Open am335x control module page</span>
ctrl_mmio <span class="pl-k">=</span> MMIO(<span class="pl-c1"><span class="pl-k">0x</span>44E10000</span>, <span class="pl-c1"><span class="pl-k">0x</span>1000</span>)

<span class="pl-c"># Read MAC address</span>
mac_id0_lo <span class="pl-k">=</span> ctrl_mmio.read32(<span class="pl-c1"><span class="pl-k">0x</span>630</span>)
mac_id0_hi <span class="pl-k">=</span> ctrl_mmio.read32(<span class="pl-c1"><span class="pl-k">0x</span>634</span>)

<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>MAC address: <span class="pl-c1">%04x%08x</span><span class="pl-pds">"</span></span> <span class="pl-k">%</span> (mac_id0_lo, mac_id0_hi))

ctrl_mmio.close()</pre></div>

<p><a href="http://python-periphery.readthedocs.org/en/latest/mmio.html">Go to MMIO documentation.</a></p>

<h3><a id="user-content-serial" class="anchor" href="#serial" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Serial</h3>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> periphery <span class="pl-k">import</span> Serial

<span class="pl-c"># Open /dev/ttyUSB0 with baudrate 115200, and defaults of 8N1, no flow control</span>
serial <span class="pl-k">=</span> Serial(<span class="pl-s"><span class="pl-pds">"</span>/dev/ttyUSB0<span class="pl-pds">"</span></span>, <span class="pl-c1">115200</span>)

serial.write(<span class="pl-s"><span class="pl-k">b</span><span class="pl-pds">"</span>Hello World!<span class="pl-pds">"</span></span>)

<span class="pl-c"># Read up to 128 bytes with 500ms timeout</span>
buf <span class="pl-k">=</span> serial.read(<span class="pl-c1">128</span>, <span class="pl-c1">0.5</span>)
<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>read <span class="pl-c1">%d</span> bytes: _<span class="pl-c1">%s</span>_<span class="pl-pds">"</span></span> <span class="pl-k">%</span> (<span class="pl-c1">len</span>(buf), buf))

serial.close()</pre></div>

<p><a href="http://python-periphery.readthedocs.org/en/latest/serial.html">Go to Serial documentation.</a></p>

<h2><a id="user-content-documentation" class="anchor" href="#documentation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Documentation</h2>

<p>Documentation is hosted at <a href="http://python-periphery.readthedocs.org/">http://python-periphery.readthedocs.org/</a>.</p>

<p>To build documentation locally with Sphinx, run:</p>

<pre><code>$ cd docs
$ make html
</code></pre>

<p>Sphinx will produce the HTML documentation in <code>docs/_build/html/</code>.</p>

<p>Run <code>make help</code> to see other output targets (LaTeX, man, text, etc.).</p>

<h2><a id="user-content-testing" class="anchor" href="#testing" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Testing</h2>

<p>The tests located in the <a href="/vsergeev/python-periphery/blob/master/tests">tests</a> folder may be run under Python to test the correctness and functionality of python-periphery. Some tests require interactive probing (e.g. with an oscilloscope), the installation of a physical loopback, or the existence of a particular device on a bus. See the usage of each test for more details on the required setup.</p>

<h2><a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>License</h2>

<p>python-periphery is MIT licensed. See the included <a href="/vsergeev/python-periphery/blob/master/LICENSE">LICENSE</a> file.</p>
</article>
  </div></body></html>