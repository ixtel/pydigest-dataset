<html><body><div><p>Plug Kinto notifications to a collection endpoint.</p>








<p>This plugin is useful to allow for polling on several collections
changes with one HTTP request.</p>
<div id="setup">
<h2>Setup</h2>
<p>In the <a href="http://kinto.readthedocs.org/" rel="nofollow">Kinto</a> settings:</p>
<pre>kinto.includes = kinto_changes

kinto.event_listeners = changes
kinto.event_listeners.changes.use = kinto_changes.listener
</pre>
<p>Now everytime a record is modified, the list of current timestamps is available
at <tt>GET /v1/buckets/monitor/collections/changes/records</tt>.</p>
<div id="filter-collections">
<h3>Filter collections</h3>
<p>It is possible to choose which collections are monitored:</p>
<pre>kinto.event_listeners.changes.collections = &lt;list of URIs&gt;
</pre>
<p>For example, to be notified of record updates in the <tt>certificates</tt> collection,
or every collections of the <tt>settings</tt> bucket:</p>
<pre>kinto.event_listeners.changes.collections =
    /buckets/blocklists/collections/certificates
    /buckets/settings
</pre>
</div>
<div id="permissions">
<h3>Permissions</h3>
<p>By default the list of timestamps is readable by everyone. The list of authorized
principals can be specified in settings:</p>
<pre>kinto.event_listeners.changes.principals =
    system.Authenticated
    group:admins
    twitter:@natim
</pre>
</div>
<div id="advanced-options">
<h3>Advanced options</h3>
<p>By default, the list of timestamps is available in the <tt>changes</tt> collection in
the <tt>monitor</tt> bucket. This can be specified in settings:</p>
<pre>kinto.event_listeners.changes.bucket = monitor
kinto.event_listeners.changes.collection = changes
</pre>
<p>If specified in settings, the changes will have a <tt>http_host</tt> attribute.
This can be used to distinguish changes from several Kinto instances.</p>
<pre>kinto.http_host = website.domain.tld
</pre>
<p id="changelog">
<h4>Changelog</h4>
</p>
</div>
</div>
</div></body></html>