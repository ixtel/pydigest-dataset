<html><body><div><div class="post-body entry-content" id="post-body-5589163410802659465" itemprop="description articleBody"><p>
Now the first half of the GSoC program 2015 is over and it has been a great time. I compared the time line just recently and I have almost finished all the work that needed to be done for the whole proposal. Here is a list what I have implemented.</p>
<ul>
<li>The tracing intermediate representation has now operations for SIMD instructions (named vec_XYZ) and vector variables</li>
<li>The proposed algorithm was implemented in the optimization backend of the JIT compiler</li>
<li>Guard strength reduction that handles arithmetic arguments.</li>
<li>Routines to build a dependency graph and reschedule the trace</li>
<li>Extended the backend to emit SSE4.1 SIMD instructions for the new tracing operations </li>
<li>Ran some benchmark programs and evaluated the current gain</li>
</ul><p>
I even extended the algorithm to be able handle simple reduction patterns. I did not include this in my proposal. This means that </p><i>numpy.sum </i><p>or </p><i>numpy.prod</i><p> can be executed with SIMD instructions.
</p><p>
Here is a preview of trace loop speedup the optimization currently achieves.

</p>
<p>
Note that the setup for all programs is the following: Create two vectors (or one for the last three) (10.000 elements) and execute the operation (e.g. multiply) on the specified datatype. It would look something similar to:

</p><span>a = np.zeros(10000,dtype='float')</span>
<span>b = np.ones(10000,dtype='float')</span>
<span>np.multiply(a,b,out=a)Â </span> 
<p>
After about 1000 iterations of multiplying the tracing JIT records and optimizes the trace. Before jumping to and after exiting the trace the time is recorded. The difference you see in the plot above. Note there is still a problem with any/all and that this is only a micro benchmark. It does not necessarily tell anything about the whole runtime of the program.
</p><p>
For multiply-float64 the theoretical maximum speedup is nearly achieved!

</p><span>Expectations for the next two months</span>

<span><span>One thing I'm looking forward to is the Python conference in Bilbao.</span></span><p> I have not met my mentors and other developers yet. This will be awesome!</p><p>
I have also been promised that we will take a look at the optimization so that I can further improve the optimization. 
</p><p>
To get even better result I will also need to restructure some parts in the Micro-NumPy library in PyPy.</p><p>
I think I'm quite close to the end of the implementation (because I started in February already) and I expect that the rest of the GSoC program I will extend, test, polish, restructure and benchmark the optimization.
</p><p/>
</div>
</div></body></html>