<html><body><div><div class="post-text" itemprop="text">

<p>Let's say I have timeseries data (time on the x-axis, coordinates on the y-z plane.</p>

<p>Given a seed set of infected users, I want to fetch all users that are within distance <code>d</code> from the points in the seed set within <code>t</code> time. This is basically just contact tracing.</p>

<p>What is a smart way of accomplishing this?</p>

<p>The naive approach is something like this:</p>

<pre><code>points_at_end_of_iteration = []
for p in seed_set:
    other_ps = find_points_t_time_away(t)
    points_at_end_of_iteration += find_points_d_distance_away_from_set(other_ps)
</code></pre>

<p>What is a smarter way of doing this - preferably keeping all data in RAM (though I'm not sure if this is feasible). Is Pandas a good option? I've been thinking about <a href="http://bandicoot.mit.edu/">Bandicoot</a> as well, but it doesn't seem to be able to do that for me.</p>

<p>Please let me know if I can improve the question - perhaps it's too broad.</p>

<p><strong>Edit:</strong></p>

<p>I think the algorithm I presented above is flawed.</p>

<p>Is this better:</p>

<pre><code>for user,time,pos in infected_set:
    info = get_next_info(user, time) # info will be a tuple: (t, pos)
    intersecting_users = find_intersecting_users(user, time, delta_t, pos, delta_pos) # intersect if close enough to the user's pos/time
    infected_set.add(intersecting_users)
    update_infected_set(user, info) # change last_time and last_pos (described below)
</code></pre>

<p><code>infected_set</code> I think should actually be a hashmap <code>{user_id: {last_time: ..., last_pos: ...}, user_id2: ...}</code></p>

<p>One potential problem is that the users are treated independently, so the next timestamp for user2 may be hours or days after user1.</p>

<p>Contact tracing may be easier if I interpolate so that every user has information for every time point (say ever hour) though that would increase the amount of data by a huge amount.</p>

<p><strong>Data Format/Sample</strong></p>

<pre><code>user_id = 123
timestamp = 2015-05-01 05:22:25
position = 12.111,-12.111 # lat,long
</code></pre>

<p>There is one csv file with all the records:</p>

<pre><code>uid1,timestamp1,position1
uid1,timestamp2,position2
uid2,timestamp3,position3
</code></pre>

<p>There is also a directory of files (same format) where each file corresponds to a user.</p>

<p>records/uid1.csv<br/>
records/uid2.csv<br/></p>
    </div>
    </div></body></html>