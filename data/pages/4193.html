<html><body><div><div class="forum-post blog-post">
            

<p><img src="http://checkio.s3.amazonaws.com/blog/share/hungry-pigeons.png" alt="Pigeons"/></p>
<p>Hi, CiO Friends!</p>
<p>On our landing page you can find one mission text with solutions.
And this is <a href="http://www.checkio.org/mission/feed-pigeons/share/fabf278379f4a8217eef2549b2ac4164/">"Feed Pigeons"</a>. 
I'm not sure why but this mission can trouble new players.</p>
<h2>Description</h2>
<p>I start to feed one of the pigeons.
A minute later two more fly by and a minute after that another 3.
Then 4, and so on (Ex: 1+2+3+4+...). 
One portion of food lasts a pigeon for a minute, 
but in case there's not enough food for all the birds, the pigeons who arrived first ate first. 
Pigeons are hungry animals and eat without knowing when to stop. 
If I have N portions of bird feed, how many pigeons will be fed with at least one portion of wheat?</p>
<h2>Simple</h2>
<p>The simplest way to solve it is using step-by-step model and repeat all stages of feeding.
Create minute counter and for each minute increasing we reduce wheat portions and add new pigeons.
But we should be careful for the step when we have portions less than pigeons, because for this
case we feed "old" pigeons first, even if they are fed already.
In our solution "minute" is the same as a quantity of new arrived pigeons.</p>
<pre class="grey-pre"><code><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">checkio</span><span class="hljs-params">(portions)</span>:</span>
    <span class="hljs-string">"""Simple and straight"""</span>
    fed = minute = pigeons = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> portions &gt;= <span class="hljs-number">0</span>:
        portions -= pigeons
        minute += <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> portions &lt;= <span class="hljs-number">0</span>:
            <span class="hljs-keyword">return</span> fed
        <span class="hljs-keyword">if</span> minute &lt; portions:
            fed += minute
            portions -= minute
        <span class="hljs-keyword">else</span>:
            fed += portions
            <span class="hljs-keyword">return</span> fed
        pigeons += minute
    <span class="hljs-keyword">return</span> fed
</code></pre><h2 id="sequence">Sequence</h2>
<p>But if we will write solution results for several input values,
then we can notice that these numbers create a sequence.</p>
<p><code>1, 1, 2, 3, 3, 3, 3, 4, 5, 6, 6, 6, 6, 6, 6, 6, 7, 8, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10...</code></p>
<p>I hope you see a pattern. Now we need to write a generator for this and honestly
we can receive all answer for 1 to N in one run.</p>
<pre class="grey-pre"><code>def <span class="hljs-function"><span class="hljs-title">checkio</span><span class="hljs-params">(portions)</span></span>:
    step, <span class="hljs-tag">i</span>, results = <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, []
    while <span class="hljs-function"><span class="hljs-title">len</span><span class="hljs-params">(results)</span></span> &lt; portions + <span class="hljs-number">1</span>:
        results.<span class="hljs-function"><span class="hljs-title">extend</span><span class="hljs-params">([i] * (i + <span class="hljs-number">1</span>)</span></span>)
        results.<span class="hljs-function"><span class="hljs-title">extend</span><span class="hljs-params">(range(i + <span class="hljs-number">1</span>, i + <span class="hljs-number">1</span> + step)</span></span>)
        step += <span class="hljs-number">1</span>
        <span class="hljs-tag">i</span> += step
    return results[portions]
</code></pre><h2>Math</h2>
<p>But this mission can be solved with pure mathematics (ok, almost pure) and O(1) complexity.
And <a href="http://www.checkio.org/user/bunnychai/">@bunnychai</a> proved this with
<a href="http://www.checkio.org/mission/feed-pigeons/publications/bunnychai/python-27/arithmetic/share/7f72e750ee5446ed97e7396976564c16/">"Arithmetic" solution</a></p>
<pre class="grey-pre"><code><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">checkio</span><span class="hljs-params">(number)</span>:</span>
    k = int((<span class="hljs-number">6</span> * number) ** (<span class="hljs-number">1.0</span> / <span class="hljs-number">3</span>))
    <span class="hljs-keyword">if</span> k * (k + <span class="hljs-number">1</span>) * (k + <span class="hljs-number">2</span>) &gt; <span class="hljs-number">6</span> * number:
        k -= <span class="hljs-number">1</span>
    t = k * (k + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>
    s = t * (k + <span class="hljs-number">2</span>) / <span class="hljs-number">3</span>
    <span class="hljs-keyword">return</span> t + max(number - s - t, <span class="hljs-number">0</span>)
</code></pre><p>and an another variant by <a href="http://www.checkio.org/user/DiEvAl/">@DiEvAl</a> in <a href="http://www.checkio.org/mission/feed-pigeons/publications/DiEvAl/python-3/first/share/30897afff7da3f66244bb05523719eb0/">"First" solution</a>.
Here you can find an explanation of the math.</p>
<pre class="grey-pre"><code><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">checkio</span><span class="hljs-params">(n)</span>:</span>
    
    
    
    
    t = ((<span class="hljs-number">9</span>*n**<span class="hljs-number">2</span> - <span class="hljs-number">1</span>/<span class="hljs-number">27</span>) ** (<span class="hljs-number">1</span>/<span class="hljs-number">2</span>) + <span class="hljs-number">3</span>*n) ** (<span class="hljs-number">1</span>/<span class="hljs-number">3</span>)
    x = t + <span class="hljs-number">1</span>/(<span class="hljs-number">3</span>*t) - <span class="hljs-number">1</span>
    m = int(x)
    <span class="hljs-keyword">return</span> max(m*(m+<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>, n - m*(m+<span class="hljs-number">1</span>)*(m+<span class="hljs-number">2</span>)/<span class="hljs-number">6</span>)
</code></pre><h2>Creative</h2>
<p>And as usually "Creative" solutions as dessert.
For example this <a href="http://www.checkio.org/mission/feed-pigeons/publications/melpon/python-3/first/share/92814969c22d9d20d829547c190f2007/">golf solution</a> by <a href="http://www.checkio.org/user/melpon/">@melpon</a></p>
<pre class="grey-pre"><code>f=lambda n,y=<span class="hljs-number">0</span>,i=<span class="hljs-number">0</span>:n&lt;y and <span class="hljs-function"><span class="hljs-title">max</span><span class="hljs-params">(n,y-i+<span class="hljs-number">1</span>)</span><span class="hljs-title">or</span></span> <span class="hljs-function"><span class="hljs-title">f</span><span class="hljs-params">(n-y,sum(range(i+<span class="hljs-number">1</span>)</span></span>),i+<span class="hljs-number">1</span>)
checkio=f
</code></pre><p>And <a href="http://www.checkio.org/user/veky/">@veky</a> with his <a href="http://www.checkio.org/mission/feed-pigeons/publications/veky/python-3/optimal/share/716ba8c58f595d8317a40f55642a572c/">"Optimal" solution</a>, where math twisted with binary search.
You can find hints how it's work in comments or ask the author of this solution.</p>
<pre class="grey-pre"><code><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pbs</span><span class="hljs-params">(cond, start=<span class="hljs-number">0</span>)</span>:</span>
    <span class="hljs-string">"""last int after start satisfying cond
    Precondition: cond(n)=&gt;cond(n-1) &amp; cond(start) &amp; exists n&gt;start not cond(n)
    Complexity: max. 2*ld(result-start), calls cond on distinct numbers only"""</span>
    step = <span class="hljs-number">1</span>
    <span class="hljs-keyword">while</span> cond(start + step): step &lt;&lt;= <span class="hljs-number">1</span>
    start += step &gt;&gt; <span class="hljs-number">1</span>
    step &gt;&gt;= <span class="hljs-number">2</span>
    <span class="hljs-keyword">while</span> step:
        <span class="hljs-keyword">if</span> cond(start + step): start += step
        step &gt;&gt;= <span class="hljs-number">1</span>
    <span class="hljs-keyword">return</span> start
â€‹
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">checkio</span><span class="hljs-params">(n)</span>:</span>
    k = pbs(<span class="hljs-keyword">lambda</span> k: k**<span class="hljs-number">3</span> - k &lt;= <span class="hljs-number">6</span>*n)
    <span class="hljs-keyword">return</span> max(n - (k**<span class="hljs-number">3</span> - k)//<span class="hljs-number">6</span>, (k**<span class="hljs-number">2</span> - k)//<span class="hljs-number">2</span>)
</code></pre><p>That's all folks. Be careful with Hungry Pigeons ;-)</p>
<p><em>Valentin Bryukhanov aka Bryukh</em></p>
        </div>
        </div></body></html>