<html><body><div><article class="post">
        <h2>Benchmark of Python JSON libraries</h2>

        

        <p>A couple of weeks ago after spending some time with Python profiler, I discovered that Python’s <tt class="docutils literal">json</tt> module is not as fast as I expected. I decided to benchmark alternative JSON libraries.</p>
<div class="section" id="libraries">
<h3>Libraries</h3>

<p><tt class="docutils literal"><span class="pre">python-cjson</span></tt>, <tt class="docutils literal"><span class="pre">yajl-py</span></tt> and <tt class="docutils literal">jsonlib</tt> are not included in the benchmark, they are not in active development and don’t support Python 3.</p>
<p><tt class="docutils literal">simplejson</tt> and <tt class="docutils literal">ujson</tt> may be used as a drop-in replacement for the standard <tt class="docutils literal">json</tt> module, but <tt class="docutils literal">ujson</tt> doesn’t support advanced features like hooks, custom encoders and decoders.</p>
<p>You can change your imports this way to use an alternative library:</p>
<pre class="code python literal-block">
<span class="kn">import</span> <span class="nn">ujson</span> <span class="kn">as</span> <span class="nn">json</span>
</pre>
</div>
<div class="section" id="interpreters">
<h3>Interpreters</h3>
<ul class="simple">
<li>Python (CPython) 2.7.10</li>
<li>Python (CPython) 3.5.0</li>
<li><a class="reference external" href="http://pypy.org/" target="_blank">PyPy</a> 2.6.1</li>
</ul>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">ujson is not compatible with PyPy.</p>
</div>
</div>
<div class="section" id="methodics">
<h3>Methodics</h3>
<p>The tests were made on MacBook Pro Late 2013 (2.6 GHz Intel Core i5, 8 GB 1600 MHz DDR3, OS X 10.10.5). Every test runs 100 times.</p>
<table border="1" class="docutils">
<caption>Test data</caption>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<thead valign="bottom">
<tr><th class="head">File name</th>
<th class="head">File size</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal">twitter.json</tt></td>
<td>632 KB</td>
<td>Single large JSON (<a class="reference external" href="https://github.com/miloyip/nativejson-benchmark/blob/master/data/twitter.json" target="_blank">source</a>)</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">one-json-per-line.jsons.txt</span></tt></td>
<td>176 KB</td>
<td>Collection of 1000 JSON objects (<a class="reference external" href="https://github.com/mloskot/json_benchmark/blob/master/data/one-json-per-line.jsons" target="_blank">source</a>)</td>
</tr>
</tbody>
</table>
<p>I published <a class="reference external" href="https://github.com/akrylysov/python-json-benchmark" target="_blank">the source code</a> of the benchmark on GitHub. You can clone it and rerun if you want to check it by yourself or if a new version of an alternative JSON library is released.</p>
</div>
<div class="section" id="results">
<h3>Results</h3>
<table border="1" class="docutils">
<caption>Python 2</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead valign="bottom">
<tr><th class="head">benchmark</th>
<th class="head">json</th>
<th class="head">simplejson</th>
<th class="head">ujson</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>loads (large obj)</strong></td>
<td>1.09700</td>
<td>0.43721</td>
<td>0.40818</td>
</tr>
<tr><td><strong>loads (small objs)</strong></td>
<td>1.21081</td>
<td>0.56388</td>
<td>0.19337</td>
</tr>
<tr><td><strong>dumps (large obj)</strong></td>
<td>0.55768</td>
<td>0.62410</td>
<td>0.45562</td>
</tr>
<tr><td><strong>dumps (small objs)</strong></td>
<td>0.88940</td>
<td>1.61345</td>
<td>0.28520</td>
</tr>
</tbody>
</table>
<img alt="" src="http://artem.krylysov.com/images/2015-benchmark-python-json/benchmark-json-python2.png"/>
<table border="1" class="docutils">
<caption>Python 3</caption>
<colgroup>
<col/>
<col/>
<col/>
<col/>
</colgroup>
<thead valign="bottom">
<tr><th class="head">benchmark</th>
<th class="head">json</th>
<th class="head">simplejson</th>
<th class="head">ujson</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>loads (large obj)</strong></td>
<td>0.57663</td>
<td>0.63441</td>
<td>0.53499</td>
</tr>
<tr><td><strong>loads (small objs)</strong></td>
<td>0.84344</td>
<td>1.08700</td>
<td>0.32984</td>
</tr>
<tr><td><strong>dumps (large obj)</strong></td>
<td>0.64825</td>
<td>0.60269</td>
<td>0.45241</td>
</tr>
<tr><td><strong>dumps (small objs)</strong></td>
<td>1.17749</td>
<td>2.25454</td>
<td>0.23830</td>
</tr>
</tbody>
</table>
<img alt="" src="http://artem.krylysov.com/images/2015-benchmark-python-json/benchmark-json-python3.png"/>
<table border="1" class="docutils">
<caption>PyPy</caption>
<colgroup>
<col/>
<col/>
<col/>
</colgroup>
<thead valign="bottom">
<tr><th class="head">benchmark</th>
<th class="head">json</th>
<th class="head">simplejson</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><strong>loads (large obj)</strong></td>
<td>0.58701</td>
<td>2.05364</td>
</tr>
<tr><td><strong>loads (small objs)</strong></td>
<td>0.32524</td>
<td>1.72470</td>
</tr>
<tr><td><strong>dumps (large obj)</strong></td>
<td>0.79712</td>
<td>5.13566</td>
</tr>
<tr><td><strong>dumps (small objs)</strong></td>
<td>0.73614</td>
<td>2.54372</td>
</tr>
</tbody>
</table>
<img alt="" src="http://artem.krylysov.com/images/2015-benchmark-python-json/benchmark-json-pypy.png"/>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">Results are in seconds.</p>
</div>
</div>
<div class="section" id="conclusion">
<h3>Conclusion</h3>
<p>The numbers speak for themselves. If you application is dealing with a big amount of JSON data and doesn't use any advanced features of built-in <tt class="docutils literal">json</tt> module, you should probably consider switching to <tt class="docutils literal">ujson</tt>.</p>
</div>

    </article>

    
    </div></body></html>