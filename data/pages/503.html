<html><body><div><div class="subsection homepage-subsection">
                  <div class="row">
                    <div class="ui two column middle aligned stackable grid">
                    
                  <div class="twelve wide column">
                    <h1 class="dark">Being Nothingness: Comparing to None in Python</h1>
                    <p class="date-index">by <a href="https://www.appneta.com/blog/author/ggerrietts/" title="Posts by Geoff Gerrietts" rel="author">Geoff Gerrietts</a> January 27, 2014</p>
                  </div>
                  </div>
                  </div>
                  <p class="space-top">
            
                  </p><p class="ttr_start"/><h3 class="c11">The “is None” Idiom</h3>
<p>Consider these two snippets from <a href="http://www.python.org/dev/peps/pep-0008/">PEP-0008</a>:</p>
<p>“Comparisons to singletons like None should always be done with is or is not, never the equality operators.</p>
<p>Also, beware of writing if x when you really mean if x is not None — e.g. when testing whether a variable or argument that defaults to None was set to some other value. The other value might have a type (such as a container) that could be false in a boolean context!”</p>
<p><span id="more-3410"/></p>
<p>Later in that document, we see:</p>
<p>“Don’t compare boolean values to True or False using ==.</p>
<pre class="brush: plain; title: ; notranslate" title="">
Yes:   if greeting:
No:    if greeting == True:
Worse: if greeting is True:
</pre>
<p>So, singletons like None are supposed to be compared using “is” and “is not”. But the language’s other two singletons, True and False, are supposed to be used differently. Are there other singletons? Or more importantly, are there other singletons like None, which we should compare with “is” and “is not”.</p>
<p>The suggestion to write “x is None” instead of “x == None” is quite old now. The very first draft of PEP-0290 recommends converting x == None and x != None into the is and is not alternatives. At about the same time, <a href="http://www.python.org/dev/peps/pep-0008/">PEP-0008</a> changed to include the selections above. These changes were in 2002, when Python 2.2 was current and 2.3 is under development. So for over a decade, the Python community has preferred all comparisons to None, to be done with the is operator. The formulation “x is None” is now considered idiomatic Python.</p>
<h3 class="c11">That That “is” Costs</h3>
<p><a href="http://www.appneta.com/blog/wp-content/uploads/2014/01/image00.jpg"><img class="alignleft size-full wp-image-3413" alt="image00" src="http://www.appneta.com/blog/wp-content/uploads/2014/01/image00.jpg"/></a></p>
<p>But this idiom has a cost. Very rarely does a programmer actually want to use the “is” operator. Identical objects are not guaranteed to compare True under “is” — not even identical strings. These operators have a very narrow utility. When beginners try to employ it, the results are not intuitive. Even to veteran programmers, the results of “is” comparisons can be surprising.</p>
<pre class="brush: python; light: true; title: ; notranslate" title="">
&gt;&gt;&gt; 999 is 999
True
&gt;&gt;&gt; x = 999 ; y = 999
&gt;&gt;&gt; x is y
True
&gt;&gt;&gt; z = 999
&gt;&gt;&gt; x is z
False
</pre>
<p>Confusing, right? This behavior is also implementation-specific: in general, integers are not singletons like None, and two integers with the same value will be represented by different objects in memory.</p>
<p>The “is not” operator introduces another semantic confusion. It’s the only Python operator that is spelled with two words, and what’s more, both those words are also operators when encountered on their own. This leads to a separate confusion, <a href="http://pythondoeswhat.blogspot.com/2012/11/is-not-none-is-not-none.html">documented around the web</a>:</p>
<pre class="brush: python; light: true; title: ; notranslate" title="">
&gt;&gt;&gt; False is not None
True
&gt;&gt;&gt; False is (not None)
False
</pre>
<p>Though this snippet may appear to describe something about the associativity of the “is” or “not” operator, it’s actually something different. In the first case, the expression uses the “is not” operator; in the second case, the expression uses the “is” and “not” operators. It’s unlikely that too many programmers will encounter bugs based on this distinction, but it’s a distinction that may not be obvious.</p>
<h3 class="c11">But Why?</h3>
<p>One of the arguments in favor of using “is None” has been that an object might override “__eq__” such that it compares as equal to None. I find it strange that this would argue in favor of using the “is” idiom. Truthiness and duck typing are well-established concepts in idiomatic Python. Truthiness is documented in the  <a href="http://docs.python.org/2.7/library/stdtypes.html#truth-value-testing">“Truth Value Testing”</a> section of the library reference, and <a href="http://en.wikipedia.org/wiki/Duck_typing#In_Python">duck typing</a> is touted as a language feature. Testing with an identity operator goes against both of these trends, even if it is just for the case of None.</p>
<p>In <a href="http://www.python.org/dev/peps/pep-0290/#testing-for-none">PEP-0290</a>, the logic offered is that an “is” test is slightly faster in the case of built-in objects, and much faster in the event of objects that have a custom “__eq__” method. In other words, this idiom has entered the language largely as an optimization pattern.</p>
<pre class="brush: python; light: true; title: ; notranslate" title="">
&gt;&gt;&gt; min(timeit.Timer('x is None', setup="x = 1").repeat(10, 1000000))
0.039633989334106445
&gt;&gt;&gt; min(timeit.Timer('x == None', setup="x = 1").repeat(10, 1000000))
0.06187295913696289
</pre>
<p>Okay, I guess that will help.</p>
<div id="snippet-box"><p class="snippet-title">Summary</p><div itemscope="" itemtype="http://schema.org/Article"><div class="aio-info"><p class="snippet-label-img">Article Name</p><p class="snippet-data-img"><span itemprop="headline">Being Nothingness: Comparing to None in Python</span></p><p class="snippet-clear"/><p class="snippet-label-img">Description</p><p class="snippet-data-img"><span itemprop="description">How do you compare x to None in Python? Is it x is None, or x == None? </span></p><p class="snippet-clear"/><p class="snippet-label-img">Author</p><p class="snippet-data-img" itemprop="author" itemscope="" itemtype="https://schema.org/Person">
							<span itemprop="name">Geoff Gerrietts</span>
							</p>
							<p class="snippet-clear"/><meta itemscope="" itemprop="mainEntityOfPage" itemtype="https://schema.org/WebPage" itemid="https://www.appneta.com/blog/python-none-comparison/"/><meta itemprop="datePublished" content="2014-01-27T12:42:45+00:00"/><meta itemprop="dateModified" content="2014-09-26T01:28:34+00:00"/></div>
					</div></div><p class="snippet-clear"/><p class="ttr_end"/>

                  

                  
                                    

                                    
                  

                  




                    </div>
              </div></body></html>