<html><body><div><div class="post-body entry-content"><p>
Numberphile had another great video which introduced me to the Monkey and coconut problem</p>

<p class="separator">
<iframe allowfullscreen="" class="YOUTUBE-iframe-video" data-thumbnail-src="https://i.ytimg.com/vi/U9qU20VmvaU/0.jpg" frameborder="0" src="https://www.youtube.com/embed/U9qU20VmvaU?feature=player_embedded">VIDEO</iframe></p>
<p>
The problem statement paraphrased from the video is:

</p><p>
Five sailors are shipwrecked on an island and collect a large pile of coconuts during the day. That night the first sailor wakes up and decides to take his first share early so tries to divide the pile of coconuts equally into five piles but finds that there is one coconut left over so tosses it to a monkey, he then hides "his" one of the five equally sized piles of coconuts and pushes the other four piles together to form a single visible pile of coconuts again and goes to bed.</p>
<p>
To cut a long story short, each of the sailors gets up singly, once during the night and performs the same actions of dividing the coconut pile into five, finding that one coconut is left over and giving that single remainder coconut to the monkey.</p>
<p>
In the morning (after the surreptitious and separate action of each of the five sailors during the night), The pile of coconuts are divided into five equal piles for each of the sailors and whereupon it is found that the pile of coconuts divides equally amongst the sailors with no remainder. (Nothing for the monkey in the morning).<br/>
<br/>
<b>The task</b> is to calculate the minimum size of the initial pile of coconuts collected during the first day.</p>
<p>
I choose to find a solution using a Python program.

</p><h3>
Initial thoughts.</h3><p>
Thinking about how I could solve it I thought that I would write something that had a lot of cut-n-pasted code for the night time activities of each sailor followed by a slightly different copy where there is no remainder which models the next days final distribution.
</p><p>
That would lead to me creating another version using a loop for the night time activities and possibly folding in the last days division
</p><p>
Finally I could look at creating a recursive version.
</p><p>
The progression looked like a good idea and I set out to do just that.

</p><h3>
First cut-n-paste code</h3><p>
I have removed the print statements that allowed me to debug this initial version but a quick google showed that this was giving the right answer and looked correct.

</p><pre class="python highlighted_source"><span class="kw1">def</span> monkey_coconuts_5sailors<span class="br0">(</span><span class="br0">)</span>:
    <span class="st0">"Hard coded and copy-pasted for only five sailors"</span>
    nuts <span class="sy0">=</span> sailors <span class="sy0">=</span> <span class="nu0">5</span>
    <span class="kw1">while</span> <span class="kw2">True</span>:
        n0<span class="sy0">,</span> wakes <span class="sy0">=</span> nuts<span class="sy0">,</span> <span class="br0">[</span><span class="br0">]</span>
        portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
        wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span><span class="nu0">1</span>:
            nuts +<span class="sy0">=</span> <span class="nu0">1</span>
            <span class="kw1">continue</span>
        n0 <span class="sy0">=</span> n0 - portion - remainder
        portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
        wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span><span class="nu0">1</span>:
            nuts +<span class="sy0">=</span> <span class="nu0">1</span>
            <span class="kw1">continue</span>
        n0 <span class="sy0">=</span> n0 - portion - remainder
        portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
        wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span><span class="nu0">1</span>:
            nuts +<span class="sy0">=</span> <span class="nu0">1</span>
            <span class="kw1">continue</span>
        n0 <span class="sy0">=</span> n0 - portion - remainder
        portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
        wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span><span class="nu0">1</span>:
            nuts +<span class="sy0">=</span> <span class="nu0">1</span>
            <span class="kw1">continue</span>
        n0 <span class="sy0">=</span> n0 - portion - remainder
        portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
        wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span><span class="nu0">1</span>:
            nuts +<span class="sy0">=</span> <span class="nu0">1</span>
            <span class="kw1">continue</span>
        <span class="co1">#</span>
        n0 <span class="sy0">=</span> n0 - portion - remainder
        portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
        wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span><span class="nu0">0</span>:
            nuts +<span class="sy0">=</span> <span class="nu0">1</span>
            <span class="kw1">continue</span>
        <span class="kw1">else</span>:
            <span class="kw1">break</span>
    <span class="kw1">return</span> nuts<span class="sy0">,</span> wakes
 
nuts<span class="sy0">,</span> wake_stats <span class="sy0">=</span> monkey_coconuts_5sailors<span class="br0">(</span><span class="br0">)</span>
<span class="kw1">print</span><span class="br0">(</span><span class="st0">'##'</span><span class="sy0">,</span> monkey_coconuts_5sailors.__doc__<span class="br0">)</span>
<span class="kw1">print</span><span class="br0">(</span><span class="st0">"Initial nut count ="</span><span class="sy0">,</span> nuts<span class="br0">)</span>
<span class="kw1">print</span><span class="br0">(</span><span class="st0">"On each waking, the nuts, portion taken, and monkeys share are:<span class="es0">\n</span> "</span><span class="sy0">,</span> 
      wake_stats<span class="br0">)</span></pre>
<p>
The output:
</p><pre>## Hard coded and copy-pasted for only five sailors
Initial nut count = 3121
On each waking, the nuts, portion taken, and monkeys share are:
  [(3121, 624, 1), (2496, 499, 1), (1996, 399, 1), (1596, 319, 1), (1276, 255, 1), (1020, 204, 0)]</pre>

<h3>
Turn the copy-pasted code into a loop</h3><p>
Note that their is slightly different logic in the last section of code above and that is reflected in this second version

</p><pre class="python highlighted_source"><span class="kw1">def</span> monkey_coconuts1<span class="br0">(</span>sailors<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span>:
    <span class="st0">"Parameterised the number of sailors using an inner loop"</span>
    nuts <span class="sy0">=</span> sailors
    <span class="kw1">while</span> <span class="kw2">True</span>:
        n0<span class="sy0">,</span> wakes <span class="sy0">=</span> nuts<span class="sy0">,</span> <span class="br0">[</span><span class="br0">]</span>
        <span class="kw1">for</span> sailor <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span>sailors<span class="br0">)</span>:
            portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
            wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
            <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span><span class="nu0">1</span>:
                nuts +<span class="sy0">=</span> <span class="nu0">1</span>
                <span class="kw1">break</span>
            n0 <span class="sy0">=</span> n0 - portion - remainder
        <span class="kw1">else</span>:
            portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
            wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
            <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span><span class="nu0">0</span>:
                nuts +<span class="sy0">=</span> <span class="nu0">1</span>
                <span class="kw1">continue</span>
            <span class="kw1">break</span>
    <span class="kw1">return</span> nuts<span class="sy0">,</span> wakes
 
nuts<span class="sy0">,</span> wake_stats <span class="sy0">=</span> monkey_coconuts1<span class="br0">(</span>sailors<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span>
<span class="kw1">print</span><span class="br0">(</span><span class="st0">'<span class="es0">\n</span>##'</span><span class="sy0">,</span> monkey_coconuts1.__doc__<span class="br0">)</span>
<span class="kw1">print</span><span class="br0">(</span><span class="st0">"Initial nut count ="</span><span class="sy0">,</span> nuts<span class="br0">)</span>
<span class="kw1">print</span><span class="br0">(</span><span class="st0">"On each waking, the nuts, portion taken, and monkeys share are:<span class="es0">\n</span> "</span><span class="sy0">,</span> 
      wake_stats<span class="br0">)</span></pre>
<p>
Output:

</p><pre>## Parameterised the number of sailors using an inner loop
Initial nut count = 3121
On each waking, the nuts, portion taken, and monkeys share are:
  [(3121, 624, 1), (2496, 499, 1), (1996, 399, 1), (1596, 319, 1), (1276, 255, 1), (1020, 204, 0)]
</pre>
<p>
<br/></p>
<h3>
Fold in the logic for the morning division</h3>
<p>
The code for the morning is similar to the code for each sailors nightly excursion except that there is <b>no </b>remainder for the monkey. This last procedural code version folds this last case into the loop with extra logic around the remainder checking.</p>
<p>
<br/></p>
<p>
I also take the opportunity to solve the case of there being six sailors not five.</p>
<p>
<br/></p>
<div>
<pre class="python highlighted_source"><span class="kw1">def</span> monkey_coconuts2<span class="br0">(</span>sailors<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span>:
    <span class="st0">"Parameterised the number of sailors using an inner loop including the last mornings case"</span>    
    nuts <span class="sy0">=</span> sailors
    <span class="kw1">while</span> <span class="kw2">True</span>:
        n0<span class="sy0">,</span> wakes <span class="sy0">=</span> nuts<span class="sy0">,</span> <span class="br0">[</span><span class="br0">]</span>
        <span class="kw1">for</span> sailor <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">(</span>sailors + <span class="nu0">1</span><span class="br0">)</span>:
            portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
            wakes.<span class="me1">append</span><span class="br0">(</span><span class="br0">(</span>n0<span class="sy0">,</span> portion<span class="sy0">,</span> remainder<span class="br0">)</span><span class="br0">)</span>
            <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span> <span class="br0">(</span><span class="nu0">1</span> <span class="kw1">if</span> sailor <span class="sy0">!=</span> sailors <span class="kw1">else</span> <span class="nu0">0</span><span class="br0">)</span>:
                nuts +<span class="sy0">=</span> <span class="nu0">1</span>
                <span class="kw1">break</span>
            n0 <span class="sy0">=</span> n0 - portion - remainder
        <span class="kw1">else</span>:
            <span class="kw1">break</span>
    <span class="kw1">return</span> nuts<span class="sy0">,</span> wakes
 
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">"__main__"</span>:
    <span class="kw1">for</span> sailors <span class="kw1">in</span> <span class="br0">[</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">6</span><span class="br0">]</span>:
        nuts<span class="sy0">,</span> wake_stats <span class="sy0">=</span> monkey_coconuts2<span class="br0">(</span>sailors<span class="br0">)</span>
        <span class="kw1">print</span><span class="br0">(</span><span class="st0">'<span class="es0">\n</span>##'</span><span class="sy0">,</span> monkey_coconuts2.__doc__<span class="br0">)</span>
        <span class="kw1">print</span><span class="br0">(</span><span class="st0">"For %i sailors the initial nut count is %i"</span> % <span class="br0">(</span>sailors<span class="sy0">,</span> nuts<span class="br0">)</span><span class="br0">)</span>
        <span class="kw1">print</span><span class="br0">(</span><span class="st0">"On each waking, the nut count, portion taken, and monkeys share are:<span class="es0">\n</span> "</span><span class="sy0">,</span> 
              <span class="st0">',<span class="es0">\n</span>  '</span>.<span class="me1">join</span><span class="br0">(</span><span class="kw3">repr</span><span class="br0">(</span>ws<span class="br0">)</span> <span class="kw1">for</span> ws <span class="kw1">in</span> wake_stats<span class="br0">)</span><span class="br0">)</span></pre>
</div>
<p>
<br/></p>
<p>
Output:</p>
<div>
<pre>## Parameterised the number of sailors using an inner loop including the last mornings case
For 5 sailors the initial nut count is 3121
On each waking, the nut count, portion taken, and monkeys share are:
  (3121, 624, 1),
  (2496, 499, 1),
  (1996, 399, 1),
  (1596, 319, 1),
  (1276, 255, 1),
  (1020, 204, 0)

## Parameterised the number of sailors using an inner loop including the last mornings case
For 6 sailors the initial nut count is 233275
On each waking, the nut count, portion taken, and monkeys share are:
  (233275, 38879, 1),
  (194395, 32399, 1),
  (161995, 26999, 1),
  (134995, 22499, 1),
  (112495, 18749, 1),
  (93745, 15624, 1),
  (78120, 13020, 0)</pre>
</div>
<p>
<br/></p>
<h3>
Using Recursion</h3>
<p>
Function <span>monkey_coconuts3 </span>sets up for the recursive calling of <span>wake_and_split </span>which has a depth parameter to control the maximum depth of recursion and returns either None or the last integer division of nuts to sailors (in the morning) on success.</p>
<p>
<br/></p>
<div>
<pre class="python highlighted_source"><span class="kw1">def</span> wake_and_split<span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="sy0">,</span> depth<span class="sy0">=</span><span class="kw2">None</span><span class="br0">)</span>:
    <span class="kw1">if</span> depth <span class="kw1">is</span> <span class="kw2">None</span>:
        depth <span class="sy0">=</span> sailors
    portion<span class="sy0">,</span> remainder <span class="sy0">=</span> <span class="kw2">divmod</span><span class="br0">(</span>n0<span class="sy0">,</span> sailors<span class="br0">)</span>
    <span class="co1">#print((n0, portion, remainder, depth))</span>
    <span class="kw1">if</span> portion <span class="sy0">&lt;=</span> <span class="nu0">0</span> <span class="kw1">or</span> remainder <span class="sy0">!=</span> <span class="br0">(</span><span class="nu0">1</span> <span class="kw1">if</span> depth <span class="kw1">else</span> <span class="nu0">0</span><span class="br0">)</span>:
        <span class="kw1">return</span> <span class="kw2">None</span>
    <span class="kw1">else</span>:
        <span class="kw1">return</span> n0 <span class="kw1">if</span> <span class="kw1">not</span> depth <span class="kw1">else</span> wake_and_split<span class="br0">(</span>n0 - portion - remainder<span class="sy0">,</span> sailors<span class="sy0">,</span> depth - <span class="nu0">1</span><span class="br0">)</span>
 
 
<span class="kw1">def</span> monkey_coconuts3<span class="br0">(</span>sailors<span class="sy0">=</span><span class="nu0">5</span><span class="br0">)</span>:
    <span class="st0">"Parameterised the number of sailors using recursion including the last mornings case"</span>    
    nuts <span class="sy0">=</span> sailors
    <span class="kw1">while</span> <span class="kw2">True</span>:
        <span class="kw1">if</span> wake_and_split<span class="br0">(</span>n0<span class="sy0">=</span>nuts<span class="sy0">,</span> sailors<span class="sy0">=</span>sailors<span class="br0">)</span> <span class="kw1">is</span> <span class="kw2">None</span>:
            nuts +<span class="sy0">=</span> <span class="nu0">1</span>
        <span class="kw1">else</span>:
            <span class="kw1">break</span>
    <span class="kw1">return</span> nuts
 
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">"__main__"</span>:
    <span class="kw1">for</span> sailors <span class="kw1">in</span> <span class="br0">[</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">6</span><span class="br0">]</span>:
        nuts <span class="sy0">=</span> monkey_coconuts3<span class="br0">(</span>sailors<span class="br0">)</span>
        <span class="kw1">print</span><span class="br0">(</span><span class="st0">'<span class="es0">\n</span>##'</span><span class="sy0">,</span> monkey_coconuts3.__doc__<span class="br0">)</span>
        <span class="kw1">print</span><span class="br0">(</span><span class="st0">"For %i sailors the initial nut count is %i"</span> % <span class="br0">(</span>sailors<span class="sy0">,</span> nuts<span class="br0">)</span><span class="br0">)</span></pre>
</div>
<p>
<br/></p>
<p>
Output:</p>
<div>
<pre># Parameterised the number of sailors using recursion including the last mornings case
For 5 sailors the initial nut count is 3121

## Parameterised the number of sailors using recursion including the last mornings case
For 6 sailors the initial nut count is 233275</pre>
</div>
<p>
<br/></p>
<p>
<br/></p>
<h2>
Rosetta Code Task</h2>

<p>
<br/></p>
<h3>
END.</h3>
<p/>
</div>
</div></body></html>