<html><body><div><div class="section">
              <h1>filterparams 1.0.2</h1>

              


<p>Filterparams</p><p>








# Python Filterparams #</p><p>Filterparams is a library for parsing URL paramters for filter</p><p>purposes in a backend. It provides a syntax to map SQL-like </p><p>queries on top of the query parameters and parses it into a</p><p>python object.</p><p>This is a helper library for providing filter collection APIs. </p><p>The primary use case for developing the library is to</p><p>use it with a REST-API which uses the [JSONAPI](http://jsonapi.org/) </p><p>standard. Because of this the syntax is completely compatible with </p><p>the standard and encapsulates everything in the `filter` query </p><p>parameter.</p><p>## Example ##</p><p>Given the URL (non URL escaped for better readability):</p><p>```</p><p>/users?filter[param][name][like][no_default_name]=doe&amp;filter[param][first_name]=doe%&amp;filter[binding]=(!no_brand_name&amp;first_name)&amp;filter[order]=name&amp;filter[order]=desc(first_name)</p><p>```</p><p>It can be parsed by the given function:</p><p>```python</p><p>from urllib.parse import urlsplit, parse_qs</p><p>from filterparams import build_parser</p><p>url = urlsplit(</p><p>    '/users?filter[param][name][like][no_default_name]=doe'</p><p>    '&amp;filter[param][first_name]=doe%&amp;filter[binding]='</p><p>    '(!no_brand_name&amp;first_name)&amp;filter[order]=name'</p><p>    '&amp;filter[order]=desc(first_name)'</p><p>)</p><p>params = parse_qs(url)</p><p>valid_filters = ['eq', 'like']</p><p>default_filter = 'eq'</p><p>parser = build_parser(</p><p>    valid_filters=valid_filters,</p><p>    default_filter=default_filter,</p><p>)</p><p>query = parser(params)</p><p>```</p><p>Would parse the data. You can access the parsed filters through</p><p>`.param_order` and the orders through `.orders`. The param order</p><p>in this specific case would be resolved to:</p><p>```python</p><p>And(</p><p>    left=Parameter(</p><p>        name='name',</p><p>        alias='no_default_name',</p><p>        filter='like',</p><p>        value='doe%',</p><p>    ),</p><p>    right=Parameter(</p><p>        name='first_name',</p><p>        alias='first_name',</p><p>        filter='eq',</p><p>        value='doe',</p><p>    )</p><p>)</p><p>```</p><p>The orders would be:</p><p>```python</p><p>[Order(name='name', direction='asc'), </p><p> Order(name='first_name', direction='desc')]</p><p>```</p><p>## Syntax ##</p><p>All arguments must be prefixed by "filter". It is possible to </p><p>query for specific data with filters, apply orders to the result </p><p>and to combine filters through AND, NOT and OR bindings.</p><p>The syntax builds under the filter parameter a virtual object. </p><p>The keys of the object are simulated through specifying `[{key}]` </p><p>in the passed query parameter. Thus `filter[param]` would point </p><p>to the param key in the filter object.</p><p>### Filter specification ###</p><p>The solution supports to query data through the `param` subkey.</p><p>```</p><p>filter[param][{parameter_name}][{operation}][{alias}] = {to_query_value}</p><p>```</p><p>The `operation` and `alias` parameters may be omitted. If no </p><p>`alias` is provided the given parameter name is used for it.</p><p>If no `operation` is given, the default one is used (in the </p><p>example this would be equal).</p><p>Example:</p><p>```</p><p>filter[param][phone_number][like]=001%</p><p>```</p><p>This would add a filter to all phone numbers which start with "001".</p><p>### Filter binding ###</p><p>Per default all filters are combined through AND clauses. </p><p>You can change that by specifying the `filter[binding]` argument.</p><p>This is where the aliases which you can define come into place. </p><p>The binding provides means to combine filters with AND and OR. </p><p>Also you are able to negate filters here.</p><p>The filters are addressed by their alias or name, if no alias is </p><p>provided.</p><p>If you have a filter `search_for_name`, `search_for_phone_number` </p><p>and `search_for_account_number` defined you can say </p><p>`search_for_name OR NOT search_for_number AND search_for_account_number` </p><p>by specifying the following filter:</p><p>```</p><p>filter[binding]=search_for_name|(!search_for_phone_number&amp;search_for_account_number)</p><p>```</p><p>Even though the brackets are useless here, you can use them in </p><p>more complex filters.</p><p>The following table summarizes the possible configuration options:</p><p>&lt;table&gt;</p><p>  &lt;thead&gt;</p><p>    &lt;tr&gt;</p><p>      &lt;th&gt;Type&lt;/th&gt;</p><p>      &lt;th&gt;Symbol&lt;/th&gt;</p><p>      &lt;th&gt;Example&lt;/th&gt;</p><p>    &lt;/tr&gt;</p><p>  &lt;/thead&gt;</p><p>  &lt;tbody&gt;</p><p>    &lt;tr&gt;</p><p>      &lt;td&gt;AND&lt;/td&gt;</p><p>      &lt;td&gt;&amp;&lt;/td&gt;</p><p>      &lt;td&gt;a&amp;b&lt;/td&gt;</p><p>    &lt;/tr&gt;</p><p>    &lt;tr&gt;</p><p>      &lt;td&gt;OR&lt;/td&gt;</p><p>      &lt;td&gt;|&lt;/td&gt;</p><p>      &lt;td&gt;a|b&lt;/td&gt;</p><p>    &lt;/tr&gt;</p><p>    &lt;tr&gt;</p><p>      &lt;td&gt;NOT&lt;/td&gt;</p><p>      &lt;td&gt;!&lt;/td&gt;</p><p>      &lt;td&gt;!a&lt;/td&gt;</p><p>    &lt;/tr&gt;</p><p>    &lt;tr&gt;</p><p>      &lt;td&gt;Bracket&lt;/td&gt;</p><p>      &lt;td&gt;()&lt;/td&gt;</p><p>      &lt;td&gt;(a|b)&amp;c&lt;/td&gt;</p><p>    &lt;/tr&gt;</p><p>  &lt;/tbody&gt;</p><p>&lt;/table&gt;</p><p>### Ordering ###</p><p>To specify a sort order of the results the `filter[order]` parameter </p><p>may be used. The value can be specified multiple times. To add </p><p>ordering you have to provide the name of the parameter which should </p><p>be ordered, not its alias!</p><p>If you want to order by `name`, `first_name` and in reverse order </p><p>`balance` you can do so by specifying the following query url </p><p>parameters:</p><p>```</p><p>filter[order]=name&amp;filter[order]=first_name&amp;filter[order]=desc(balance)</p><p>```</p><p>As you can see the `desc()` definition can be used to indicate </p><p>reverse ordering.</p><p>### Filter definition ###</p><p>Not every backend does or should support all possible filter </p><p>mechanisms. This is why the filters which should be accepted </p><p>by the backend have to be added before processing the query </p><p>parameters.</p><p>You can limit the allowed filters by building a parse through the</p><p>`filterparams.build_parser` function. You can configure the allowed</p><p>filters through the `valid_filters` definition. Additionally you</p><p>have to add the default filter by using the second `default_filter`</p><p>parameter.</p><p>```python</p><p>from filterparams import build_parser</p><p>valid_filters = ['eq', 'like']</p><p>default_filter = 'eq'</p><p>parser = build_parser(</p><p>    valid_filters=valid_filters,</p><p>    default_filter=default_filter,</p><p>)</p><p>query = parser({})</p><p>```</p><p>If you don't want any validation you can use the `parse` function.</p><p>```python</p><p>from filterparams import parse</p><p>query = parse({})</p><p>```</p><p>## Notes ##</p><p>- There do no yet exist any public projects which use this library to provide transparent mapping to an underlying </p><p>backend. I plan long-term to add another library which does use this package and provide a way to map it on sqlalchemy models. </p><p>If you are planning to do this or use it for other data mapping please contact me and I'll add a reference to it in</p><p>the README.</p><p>- The same as mentioned above is valid for client libraries, which generate the filter query structure in any language. </p><p>Again, as soon as the API is stable I'll probably add a JavaScript library.</p><p>- Depending on your backend it might not make sense to support all features (ordering, parameter binding) of the</p><p>language. You might still want to use it to parse your basic parameters though and ignore the rest.</p><p>## Used Libraries ##</p><p>For evaluating the filter params ordering the [funcparserlib](https://github.com/vlasovskikh/funcparserlib) ([MIT license](https://github.com/vlasovskikh/funcparserlib/blob/master/LICENSE))</p><p>module is used. Additionally the [Werkzeug](https://github.com/mitsuhiko/werkzeug/blob/master/LICENSE) package is used for supporting dicts with multiple values in the same key.</p><p>## Other Languages ##</p><p>This is a list of projects implementing the same API for other languages.</p><p>Currently this list only has one entry. </p><p>- Go - [go-filterparams](https://github.com/cbrand/go-filterparams)

</p><a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>837</span> downloads in the last week
  </li>
  <li>
    <span>4857</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>