<html><body><div><div class="section">
              <h1>jsonmapping 0.7.3</h1>

              


<p>Map flat data to structured JSON via a mapping.</p><p>








# jsonmapping [![Build Status](https://travis-ci.org/pudo/jsonmapping.svg?branch=master)](https://travis-ci.org/pudo/jsonmapping)</p><p>To transform flat data structures into nested object graphs matching JSON</p><p>schema definitions, this package defines a mapping language. It defines how</p><p>the columns of a source data set (e.g. a CSV file, database table) are to be</p><p>converted to the fields of a JSON schema.</p><p>The format allows mapping nested structures, including arrays. It also supports</p><p>the application of very basic data transformation steps, such as generating a</p><p>URL slug or hashing a column value.</p><p>## Example mapping</p><p>The mapping format is independent of any particular JSON schema, such that</p><p>multiple mappings could be defined for any one particular schema.</p><p>```json</p><p>{</p><p>    "schema": {"$ref": "http://www.popoloproject.com/schemas/person.json"},</p><p>    "mapping": {</p><p>        "id": {"column": "person_id"},</p><p>        "name": {"column": "person_name"},</p><p>        "memberships": [{</p><p>            "mapping": {</p><p>                "role": {"default": "Member of Organization"},</p><p>                "organization": {</p><p>                    "mapping": {</p><p>                        "id": {</p><p>                            "columns": ["org_id"],</p><p>                            "constant": "default-org"</p><p>                        },</p><p>                        "name": {</p><p>                            "column": "org_name",</p><p>                            "constant": "Default Organization",</p><p>                            "transforms": ["strip"]</p><p>                        }</p><p>                    }</p><p>                }</p><p>            }</p><p>        }]</p><p>    }</p><p>}</p><p>```</p><p>This mapping would apply to a four-column CSV file and map it to a set of</p><p>nested JSON objects (a [Popolo](http://www.popoloproject.com/) person, with a</p><p>membership in an organization).</p><p>## Data Transforms</p><p>While ``jsonmapping`` is not a data cleaning tool, it supports some very basic</p><p>data transformation operations that can be applied on a particular column or</p><p>set of columns. These include:</p><p>* ``coalesce``: Select the first non-null value from the list of items.</p><p>* ``slugify``: Transform each string into a URL slug form.</p><p>* ``join``: Merge together the string values of all selected columns.</p><p>* ``upper``: Transform the text to upper case.</p><p>* ``lower``: Transform the text to lower case.</p><p>* ``strip``: Remove leading and trailing whitespace.</p><p>* ``hash``: Generate a SHA1 hash of the given value.</p><p>## Usage</p><p>``jsonmapping`` is available on the Python Package Index:</p><p>```bash</p><p>$ pip install jsonmapping</p><p>```</p><p>The library can then be used as follows:</p><p>```python</p><p>from jsonschema import RefResolver</p><p>from jsonmapping import Mapper</p><p># ... load the mapping ...</p><p>mapping = load_mapping()</p><p>resolver = RefResolver.from_schema(mapping)</p><p># ... grab some data ...</p><p>rows = read_csv()</p><p>objs = []</p><p># This will transform flat data rows into nested JSON objects:</p><p>for obj, err in Mapper.apply_iter(rows, mapping, resolver):</p><p>    if err is None:</p><p>        objs.append(obj)</p><p>```</p><p>## Tests</p><p>The test suite will usually be executed in it's own ``virtualenv`` and perform a</p><p>coverage check as well as the tests. To execute on a system with ``virtualenv``</p><p>and ``make`` installed, type:</p><p>```bash</p><p>$ make test</p><p>```

</p><a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>233</span> downloads in the last week
  </li>
  <li>
    <span>1974</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>