<html><body><div><p class="lead" itemprop="description">Если вы знакомы с Django, то, возможно, задумывались о том, как принцип «не повторяйся» (DRY) соотносится с тем, что в этом каркасе нет способа «из коробки», чтобы получить человекопонятное имя поля модели в шаблоне. Заметка как раз об этом.</p>
                <div class="py_user"><p>И верно: не к лицу каркасу, пропагандирующему в документации принцип «не повторяйся» подталкивать своих пользователей к его нарушению.</p><p>Если приглядеться, то в шаблонах с детальной информацией о сущности (да и в списочных) зачастую требуется получить имя (verbose_name) поля модели, и нет ничего противоестественного в том, чтобы использовать уже имеющиеся в данные, а не копировать их по шаблонам, однако, инструментов в наборе Django для этого действительно не предусмотрено.</p><p>Сегодня я попытался исправить этот недостаток, добавив пару новых шаблонных тегов в набор приложения </p><a href="https://pypi.python.org/pypi/django-etc" target="_blank">django-etc</a><p>, и вот что из этого получилось:</p><pre><code class="html"><br/>    {% load model_field %} <br/>  <br/>    <br/>    {% model_field_verbose_name from my_model.fieldname %}: <br/>    {{ my_model.fieldname }}<br/></code></pre><p>Всё просто: достаточно передать тегу модель и имя поля, чтобы получить человекопонятное имя. Помимо тега </p><code>model_field_verbose_name</code><p> существует также </p><code>model_field_help_text</code><p>, возвращающий, как нетрудно догадаться, текст подсказки для поля.</p><p>Обратите внимание, что в переменной </p><i>my_model</i><p> может находиться не только модель, но и их гомогенный набор (например, представленный QuerySet или Page объектом). Эту особенность вкупе с директивой </p><b>as</b><p> (позволяющей поместить результат исполнения тега в переменную контекста шаблона для последующего использования) упомянутых тегов можно употреблять в списочных шаблонах, чтобы получить имена полей единожды:</p><pre><code class="html"><br/>    {% model_field_verbose_name from my_models_set.fieldname as title_fieldname %}<br/>    {{ title_fieldname }}<br/></code></pre><p>Помимо этого, </p><b>django-etc</b><p> в поддержку принципа DRY располагает ещё двумя шаблонными тегами: </p><code>model_meta_verbose_name</code><p> и </p><code>model_meta_verbose_name_plural</code><p> позволяют получить человекопонятные имена моделей в единственном и множественном числах соответственно:</p><pre><code class="html  "><br/>    {% load model_meta %}<br/>    {% model_meta_verbose_name my_model %}<br/>  <br/></code></pre><p>Теперь, если вы поменяете имена в моделях, вам не придётся заменять их ещё и в шаблонах.</p><i>Не повторяйтесь.</i><i>Удачи!</i></div>

                

                

                </div></body></html>