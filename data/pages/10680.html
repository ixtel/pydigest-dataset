<html><body><div><div class="post-text" itemprop="text">
<p>You can't do it if you're using <code>forms.ImageField</code> in your form. You'll need to use <code>forms.FileField</code> because <code>ImageField</code> only validates images and raises <code>ValidationError</code> if the file is not an image.</p>

<p>Here's an example:</p>

<p><em>models.py</em></p>

<pre><code>class MyModel(models.Model):
    image = models.ImageField(upload_to='images')
</code></pre>

<p><em>forms.py</em></p>

<pre><code>import os
from django import forms
from .models import MyModel

class MyModelForm(forms.ModelForm):
    class Meta:
        model = MyModel
        fields = ['image']

    image = forms.FileField()

    def clean_image(self):
        uploaded_file = self.cleaned_data['image']
        try:
            # create an ImageField instance
            im = forms.ImageField()
            # now check if the file is a valid image
            im.to_python(uploaded_file)
        except forms.ValidationError:
            # file is not a valid image;
            # so check if it's a pdf
            name, ext = os.path.splitext(uploaded_file.name)
            if ext not in ['.pdf', '.PDF']:
                raise forms.ValidationError("Only images and PDF files allowed")
        return uploaded_file
</code></pre>

<p>Although the above code verifies the validity of images correctly (by calling <code>ImageField.to_python()</code> method) but to determine if the file is PDF or not, it only checks the file extension. To actually verify if the PDF is valid or not, you can try solutions on this question: <a href="http://stackoverflow.com/questions/559096/check-whether-a-pdf-file-is-valid-python">Check whether a PDF-File is valid (Python)</a>. This approach tries to read the whole file in memory and if the file is too large, it might eat up your server's memory.</p>
    </div>
    </div></body></html>