<html><body><div><div class="post-text" itemprop="text">

<p>I'm getting some weird errors from <code>protorpc</code> when I use endpoints. In this code:</p>

<pre><code>class Application(EndpointsModel):

    _message_fields_schema = ('id', 'name')

    created = ndb.DateTimeProperty(auto_now_add=True)
    name = ndb.StringProperty()
    roles = ndb.IntegerProperty(repeated=True)
    updated = ndb.DateTimeProperty(auto_now=True)
    owner = ndb.KeyProperty(kind='User')

@API.api_class(resource_name="application")
class ApplicationApi(protorpc.remote.Service):

    @Application.method(http_method="GET",
                        request_fields=('id',),
                        name="get",
                        path="applications/{id}")
    def ApplicationGet(self, instance):
        if not instance.from_datastore:
            raise endpoints.NotFoundException("Application not found.")
        return instance

    @Application.query_method(http_method="GET",
                              query_fields=('limit', 'order', 'pageToken'),
                              name="list",
                              path="applications")
    def ApplicationList(self, query):
        return query
</code></pre>

<p>when I call <code>application.get()</code> error is (<a href="http://pastebin.com/raw/c8Aj0Sj6">full trace here</a>):</p>

<blockquote>
  <p>TypeError: Can only copy from entities of the exact type Application. Received an instance of Application.</p>
</blockquote>

<p>and for calling <code>application.list()</code> error is (<a href="http://pastebin.com/raw/z6E3EF55">full trace here</a>):</p>

<blockquote>
  <p>ValidationError: Expected type <code>&lt;class '.Application'&gt;</code> for field items, found <code>&lt;Application name: u'test'&gt;</code> (type <code>&lt;class '.Application'&gt;</code>)</p>
</blockquote>

<p>Anyone knows what could be causing this? My other models with pretty much the same code (just different properties) work....</p>
    </div>
    </div></body></html>