<html><body><div><div class="post-864 post type-post status-publish format-standard hentry category-books-tools tag-bottle tag-celery tag-complexity tag-django tag-flask tag-ipython tag-mercurial tag-pyramid tag-python tag-requests tag-rq tag-snakefood tag-twisted">													
			
			
			
				

													
			<p><a href="http://furius.ca/snakefood/">Snakefood</a> is a tool written by Martin Blais to create Python dependency graphs. Combined with GraphViz, snakefood can create beautiful visualizations of Python codebases. Here are graphs for some notable open source projects written in Python.<span id="more-864"/></p>
<h2>Python Web Frameworks</h2>
<p>The different development philosophies of Bottle, Django, Flask, and Pyramid are apparent by looking at their snakefood graphs.  </p>
<h3>Bottle</h3>
<p>Bottle is a fast and simple micro framework for Python web applications.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/bottle.png" alt="bottle" class="alignleft size-full wp-image-866" srcset="http://grokcode.com/wordpress/wp-content/uploads/bottle-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/bottle.png 756w" sizes="(max-width: 756px) 100vw, 756px"/></p>
<p><small><a href="https://github.com/defnull/bottle">Bottle</a> release 0.12.7</small></p>
<h3>Django</h3>
<p>Django is a batteries-included web framework for perfectionists with deadlines.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/django.png" alt="django" class="alignleft size-f&#10;ull wp-image-865" srcset="http://grokcode.com/wordpress/wp-content/uploads/django-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/django.png 756w" sizes="(max-width: 756px) 100vw, 756px"/><br/>
<small><a href="https://github.com/django/django">Django</a> release 1.7c3</small> </p>
<h3>Flask</h3>
<p>Flask is a microframework for Python.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/flask.png" alt="flask" class="alignleft size-full wp-image-869" srcset="http://grokcode.com/wordpress/wp-content/uploads/flask-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/flask.png 756w" sizes="(max-width: 756px) 100vw, 756px"/></p>
<p><small><a href="https://github.com/mitsuhiko/flask">Flask</a> release 0.10.1</small> </p>
<h3>Pyramid</h3>
<p>Pyramid is a small, fast, down-to-earth, open source Python web framework. It makes real-world web application development and deployment more fun, more predictable, and more productive.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/pyramid.png" alt="pyramid" class="alignleft size-full wp-image-872" srcset="http://grokcode.com/wordpress/wp-content/uploads/pyramid-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/pyramid.png 756w" sizes="(max-width: 756px) 100vw, 756px"/></p>
<p><small><a href="https://github.com/Pylons/pyramid">Pyramid</a> release 1.5.1</small></p>
<h2>Queueing Implementations</h2>
<p>Hat tip to Sylvain Zimmer for this deck on <a href="http://www.slideshare.net/sylvinus/why-and-how-pricing-assistant-migrated-from-celery-to-rq-parispy-2">switching from Celery to RQ</a> which was how I first found out about snakefood.</p>
<h3>Celery</h3>
<p>Celery is a complex feature-rich distributed queueing implementation. </p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/celery.png" alt="celery" class="alignleft size-full wp-image-867" srcset="http://grokcode.com/wordpress/wp-content/uploads/celery-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/celery.png 756w" sizes="(max-width: 756px) 100vw, 756px"/></p>
<p><small><a href="https://github.com/celery/celery">Celery</a> release 3.0.20</small></p>
<h3>RQ</h3>
<p>RQ is a simple Python library for queueing jobs and processing them in the background with workers.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/rq.png" alt="rq" class="alignleft size-full wp-image-874" srcset="http://grokcode.com/wordpress/wp-content/uploads/rq-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/rq.png 756w" sizes="(max-width: 756px) 100vw, 756px"/></p>
<p><small><a href="https://github.com/nvie/rq">RQ</a> release 0.4.6</small> </p>
<h2>Other Python Codebases</h2>
<p>For curiosity’s sake I ran snakefood on a few other notable Python codebases.</p>
<h3>Twisted</h3>
<p>Twisted is an event-based framework for internet applications.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/twisted.png" alt="twisted" class="alignleft size-full wp-image-875" srcset="http://grokcode.com/wordpress/wp-content/uploads/twisted-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/twisted.png 756w" sizes="(max-width: 756px) 100vw, 756px"/></p>
<p><small><a href="https://github.com/twisted/twisted">Twisted</a> release 14.0.0</small> </p>
<h3>Mercurial</h3>
<p>Mercurial is a distributed source control management tool.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/mercurial.png" alt="mercurial" class="alignleft size-full wp-image-871" srcset="http://grokcode.com/wordpress/wp-content/uploads/mercurial-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/mercurial.png 756w" sizes="(max-width: 756px) 100vw, 756px"/></p>
<p><small><a href="http://mercurial.selenic.com/">Mercurial</a> release 3.1</small></p>
<h3>Requests</h3>
<p>Requests is HTTP requests for humans. It is frequently mentioned as an example of an elegant, Pythonic codebase.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/requests.png" alt="requests" class="alignleft size-full wp-image-873" srcset="http://grokcode.com/wordpress/wp-content/uploads/requests-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/requests.png 756w" sizes="(max-width: 756px) 100vw, 756px"/></p>
<p><small><a href="https://github.com/kennethreitz/requests">Requests</a> release 2.3.0</small></p>
<h3>IPython</h3>
<p>IPython is an alternative to the standard Python shell. If you aren’t using IPython, you should be. <a href="http://grokcode.com/811/you-should-change-your-python-shell/">Here’s why IPython is awesome</a>.</p>
<p><img src="http://grokcode.com/wordpress/wp-content/uploads/ipython.png" alt="ipython" class="alignleft size-full wp-image-870" srcset="http://grokcode.com/wordpress/wp-content/uploads/ipython-220x170.png 220w, http://grokcode.com/wordpress/wp-content/uploads/ipython.png 756w" sizes="(max-width: 756px) 100vw, 756px"/><small><a href="https://github.com/ipython/ipython">IPython</a> release 2.2.0</small></p>
<h2>What does this mean?</h2>
<p>Snakefood graphs are helpful to visualize both the approximate size of a codebase and the level to which concerns are separated. As a measure of code complexity, snakefood graphs show more information than lines of code (which is not that great of a metric), but at the cost of introducing more room for interpretation than a strictly numeric metric.</p>
<p>The other problem with using snakefood graphs as a measure of code complexity is that it looks at code at the file level. A well-organized codebase containing many small files will look more complex than a codebase with a few very large but extremely long, complex files. Code with high testing coverage also tends to look more complex since the tests are dependent on so many parts of the code. Test and documentation modules were not included in any of the graphs above for this reason.</p>
<p>In cases where a more careful measure of code complexity is required, something like <a href="https://en.wikipedia.org/wiki/Cyclomatic_complexity">cyclomatic complexity</a> is more appropriate. The graphs created by snakefood are actually similar to what would be used to compute cyclomatic complexity as applied to files instead of functions or classes which is the more usual way to do it.</p>
<p>Instead of using snakefood as a tool for visualizing complexity, the creator of snakefood uses it more to prevent unnecessary dependencies from creeping into the code:</p>
<blockquote><p>Producing pretty graphs is fun, but I found the most leverage of it when I try to make my code simpler, I generate the graph and inspect unexpected dependencies and try to refactor my code to simply the dependency graph as much as possible (see furius.ca/beancount for a recent example). Enforcing rules can be done by writing a custom script against the snakefood output, as it’s very easy to accidentally introduce unwanted dependencies. I think the result is code that is better organized at a high level. <cite>–Martin Blais</cite></p></blockquote>
<p>So snakefood graphs are are (sometimes) beautiful. They are a fairly quick ad hoc way of visualizing code complexity, and the snakefood output can be used to help identify and enforce dependency relationships. All in all, snakefood is a pretty awesome tool to have in your Python toolbox. </p>
<div class="flare-horizontal flare-position-bottom-left flare-backgroundcolor-none enablecounters" data-humbleflarecount="5">
    <span class="loading"><span/></span>
    <span class="flare-total first"><strong>267</strong> Flares</span>
    
                    <span data-type="twitter" class="flare-button button-type-twitter flare-iconstyle-round-bevel first">
            <span class="flare-button-wrap">
                <span class="flare-button-icon">Twitter</span>
            </span>
        </span>
        <span class="flare-button-count">125</span>
            
        <span class="flare-flyout flare-flyout-twitter first">
            <span class="flare-flyout-inner">
                <span class="flare-arrow"/>
            </span>
            <span class="flare-iframe-wrapper" data-code-snippet="&lt;a href=&quot;https://twitter.com/share&quot; class=&quot;twitter-share-button&quot;  data-via=&quot;grokcode&quot; &gt;Tweet&lt;/a&gt;&#10;&lt;script&gt;!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=&quot;//platform.twitter.com/widgets.js&quot;;fjs.parentNode.insertBefore(js,fjs);}}(document,&quot;script&quot;,&quot;twitter-wjs&quot;);&lt;/script&gt;"/>
        </span>
        
                    <span data-type="googleplus" class="flare-button button-type-googleplus flare-iconstyle-round-bevel">
            <span class="flare-button-wrap">
                <span class="flare-button-icon">Google+</span>
            </span>
        </span>
        <span class="flare-button-count">85</span>
            
        <span class="flare-flyout flare-flyout-googleplus">
            <span class="flare-flyout-inner">
                <span class="flare-arrow"/>
            </span>
            <span class="flare-iframe-wrapper" data-code-snippet="&lt;g:plusone&gt;&lt;/g:plusone&gt;&#10;&lt;script type=&quot;text/javascript&quot;&gt;&#10;  (function() {&#10;    var po = document.createElement(&quot;script&quot;); po.type = &quot;text/javascript&quot;; po.async = true;&#10;    po.src = &quot;https://apis.google.com/js/plusone.js&quot;;&#10;    var s = document.getElementsByTagName(&quot;script&quot;)[0]; s.parentNode.insertBefore(po, s);&#10;  })();&#10;&lt;/script&gt;"/>
        </span>
        
                    <span data-type="facebook" class="flare-button button-type-facebook flare-iconstyle-round-bevel last">
            <span class="flare-button-wrap">
                <span class="flare-button-icon">Facebook</span>
            </span>
        </span>
        <span class="flare-button-count">57</span>
            
        <span class="flare-flyout flare-flyout-facebook">
            <span class="flare-flyout-inner">
                <span class="flare-arrow"/>
            </span>
            <span class="flare-iframe-wrapper" data-code-snippet="&lt;iframe src=&quot;//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fgrokcode.com%2F864%2Fsnakefooding-python-code-for-complexity-visualization%2F&amp;send=false&amp;layout=button_count&amp;width=120&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21&quot; scrolling=&quot;no&quot; frameborder=&quot;0&quot; overflow:hidden; width:120px; height:21px;&quot; allowTransparency=&quot;true&quot;&gt;&lt;/iframe&gt;"/>
        </span>
        
        
        
    <span class="flare-total last"><strong>267</strong> Flares</span>

    <span class="close">
        <a href="#close">×</a>
    </span>
</div>
			

			                        		</div>				
		
			
							    	
	</div></body></html>