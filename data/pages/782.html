<html><body><div><div class="post-body entry-content" id="post-body-6004199220109470700" itemprop="description articleBody">
<p>Думаю, все применяют <em>pip</em> и знают основы:</p>
<pre><code>$ pip install -U sqlalchemy
$ pip install -r requirements.txt
$ pip freeze &gt; requirements.txt
$ pip uninstall sqlalchemy
</code></pre>
<p>Давайте посмотрим, что ещё полезного умеет эта команда</p>
<h2 id="_1">Ставим пакет локально для пользователя</h2>
<pre><code>$ pip install --user pep8
</code></pre>
<p>Т.е. если мы не в виртуальном окружении
(virtualenv/virtualenvwrapper), то пакет <code>pep8</code> будет установлен
куда-то вроде <code>~/.local/lib/python3.4/lib</code>.</p>
<p>Главная прелесть метода -- не нужны права суперпользователя для
установки пакетов (не надо писать <code>sudo pip install ...</code>, К тому же
так гораздо аккуратней.</p>
<h2 id="_2">Создаем конфигурационный файл</h2>
<p>Т.к. опция <code>--user</code> нужна часто, стоит записать её в
конфиге как значение по умолчанию. Создаем файл <code>~/.pip/pip.conf</code> и
пишем в него</p>
<pre><code>[install]
user = true
</code></pre>
<p>Готово.</p>
<p><em>Внимание: <code>user=true</code> не работает с виртуальными окружениями</em>.</p>
<h2 id="_3">Принудительно переустанавливаем пакет</h2>
<p>Реальный пример: я поставил <code>pyzmq</code>. Библиотека скачалась и
скомпилировалась. Потом я заметил что она скомпилировалась со
неправильной версией <code>libzmq</code>. <code>libzmq</code> я переставил, теперь нужно
пересобрать <code>pyzmq</code>:</p>
<pre><code>$ pip install -U --force-reinstall pyzmq
</code></pre>
<p>Для работы <code>--force-reinstall</code> обязательно нужно указывать <code>-U</code>
(<code>--upgrade</code>).</p>
<h2 id="_4">Смотрим на список установленных (доступных) библиотек</h2>
<pre><code>$ pip list
</code></pre>
<h2 id="_5">Выясняем, какие библиотеки можно обновить</h2>
<pre><code>$ pip list -o
$ pip list --outstanding
</code></pre>
<p>Для выполнения команды <code>pip</code> неоднократно делает зазыр в интернет, так
что придется подождать.</p>
<h2 id="_6">Устанавливаем библиотеку для работы над ней</h2>
<p>Находясь в корне проекта, в той же папке где лежит <code>setup.py</code>:</p>
<pre><code>$ pip install -e .
</code></pre>
<p>Этот способ лучше вызова</p>
<pre><code>python setup.py develop
</code></pre>
<p>хотя бы тем что работает даже если <code>setup.py</code> не использует <code>setuptools</code>.</p>
<h2 id="_7">Установка необязательных зависимостей</h2>
<p>Если <code>setup.py</code> содержит
<a href="https://pythonhosted.org/setuptools/setuptools.html?highlight=extras_require#declaring-extras-optional-features-with-their-own-dependencies"><code>extras_require</code></a>
то дополнительные зависимости можно установить так:</p>
<pre><code>$ pip install -e .[PDF,reST]
</code></pre>
<h2 id="_8">Получаем информацию об установленной библиотеке</h2>
<pre><code>$ pip show pyflakes
</code></pre>
<p>Так можно узнать версию, местонахождение на диске и зависимости.</p>
<h2 id="pypi">Ищем в PyPI</h2>
<p><code>msgpack</code> имеет неудобное имя библиотеки (<code>msgpack-python</code>), которое я
постоянно забываю.</p>
<pre><code>$ pip search msgpack
</code></pre>
<p>покажет список всех пакетов, в названии которых есть <code>msgpack</code>.</p>
<p>Только не делайте:</p>
<pre><code>$ pip search django
</code></pre>
<p>Дуплит пару минут, выдает 5754 результата :)</p>
<h2 id="_9">Автодополнение</h2>
<p>И, наконец, последнее. Я люблю пользоваться <em>bash completion</em>. Чтобы
настроить эту удобную штучку для <code>pip</code> выполните:</p>
<pre><code>$ pip completion --bash &gt;&gt; ~/.bashrc
</code></pre>
<p>или для <code>zsh</code>:</p>
<pre><code>$ pip completion --zsh &gt;&gt; ~/.zprofile
</code></pre>
<p>Как ни странно <code>pip --help</code> стесняется рассказать о том, что у него
есть команда <code>pip completion</code> -- но оно работает.</p>
<p/>
</div>
</div></body></html>