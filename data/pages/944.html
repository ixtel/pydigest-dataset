<html><body><div><div class="post-body entry-content" id="post-body-3972520674118870972" itemprop="description articleBody">
<div dir="ltr" trbidi="on"><p>
Многие WSGI сайты используют </p><a href="http://gunicorn.org/">gunicorn</a><p> для развертывания.
</p><p>
Это прекрасно работает для python 2, но для python 3 есть проблема: наиболее употребляемые </p><i>gunicorn workers,</i><p> -- использующие </p><i>gevent</i><p> и </p><i>enentlet,</i><p> -- не заводятся под "тройкой" потому что </p><i>gevent</i><p> c </p><i>eventlet</i><p> все еще не портированы.</p><p>Автор </p><i>gunicorn</i><p> Бенуа Шесно начал было писать новый </p><i>asyncio worker</i><p> -- но быстро увидел что работы предстоит сделать немало, а в </p><i>aiohttp</i><p> Николай Ким уже написал всё что нужно.
</p><p>
Коротко говоря </p><i>aiohttp.worker</i><p> переехал в </p><i>gunicorn.workers.gaiohttp</i><p> вместе со своими тестами, вышел новый релиз </p><i>aiohttp 0.8,</i><p> а мы с Колей стали </p><i>commiters</i><p> в </p><i>gunicorn</i><p>.
</p><p>
Бенуа планирует выпустить новый релиз </p><i>gunicorn</i><p> к концу недели.
</p><p>
К сожалению </p><i>aiohttp 0.8</i><p> ломает обратную совместимость -- так было нужно.</p><p>
Зато теперь он имеет более чистый API: использует </p><i>multidict</i><p> для </p><i>HTTP headers</i><p> в клиентском и серверном коде вместо причудливой смеси разных подходов, привносящих в </p><i>public API</i><p> методы, которые </p><b>было небезопасно использовать</b><p>.</p><p>
Плюс переработана иерархия исключений и еще кое-какие приятные мелочи вроде более внятных сообщений об ошибках -- полный список изменений </p><a href="https://pypi.python.org/pypi/aiohttp/0.8.0">здесь</a><p>.</p><p>Это еще один шаг к тому, чтобы сделать </p><i>aiohttp</i><p> максимально удобной для простого программиста.
</p><p>
К слову, при использовании </p><i>gaiohttp gunicorn worker</i><p> можно делать странные вещи: запускать асинхронно </p><i>asyncio.Task</i><p> из вьюхи на </p><i>Django, </i><p>например. Как это делают для </p><i>gevent/eventlet worker.</i><p>Мне такой гермафродит не нравится по эстетическим соображениям, но запретить стрелять себе в ногу я не в силах. А на stack overflow подобные хотелки уже были.
</p></div>
<p/>
</div>
</div></body></html>