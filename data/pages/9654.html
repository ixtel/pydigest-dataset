<html><body><div><div class="post-text" itemprop="text">
<p><strong>Note: <code>Stefano M</code>'s solution is the correct answer since fits perfectly with StackOverflow standards</strong></p>

<p>For those unfamiliar with working with Frame/traceback objects I have provided a working <code>Tracker</code> class <strong>built from <code>Stefano M</code>'s <code>MyTracer</code> template</strong>:</p>

<pre><code>import sys,traceback

def printf(*stuff,sep=" ",end="\n",file=sys.stdout):
    file.write(sep.join(stuff)+end)#for backward compatability with python2

class Tracker:
    def __init__(self,out_file = sys.stdout):
        assert out_file.writable(),"need to open a file for writing"
        self.out = out_file
        self.last_frame = None

    def __enter__(self):
        self.old_trace = sys.gettrace()
        sys.settrace(self.newscope)

    def __exit__(self,etype,value,tb):
        sys.settrace(self.old_trace)
        self.finish_previous()
        if tb:
            traceback.printf_exception(etype,value,tb,file=self.out)
        else:
            printf("exit status normal",file=self.out)


    def newscope(self,f,e,ar):
        self.finish_previous(f)

        global_vars = f.f_globals
        for name,module in sys.modules.items():
            if global_vars is vars(module):
                file_name = name
                break
        else:
            file_name = "??"
            module = None

        printf(self._format_module(file_name,f.f_lineno),file=self.out)

        if module:
            printf(self._read_line_of_file(module,f.f_lineno),file=self.out)


    @staticmethod
    def _format_module(file_name,line):
        return "{}, line:{}".format(file_name,line)

    @staticmethod
    def _read_line_of_file(module,line):
        try:
            with open(module.__file__,"r") as FILE:
                line = list(FILE)[line]
                return line
        except Exception as e:
            return "ERROR WHEN READING FILE: %r"%e

    @staticmethod
    def _local_vars(frame):
        return "locals:\n    "+"\n    ".join("{} = {!r}".format(*pair) for pair in frame.f_locals.items())

    def finish_previous(self,new_frame=None):
        if self.last_frame:
            printf(self._local_vars(self.last_frame),end="\n\n\n",file=self.out)
        self.last_frame = new_frame
</code></pre>

<p>Then it can be used like this for displaying output to standard output:</p>

<pre><code>with Tracker():
    response=self.admin_client.post(url, post)
    self.assertEqual(200, response.status_code, trace)
</code></pre>

<p>or to send output to a file you can do this:</p>

<pre><code>with open("log.txt","w") as f, Tracker(f):
    response=self.admin_client.post(url, post)
    self.assertEqual(200, response.status_code, trace)
</code></pre>

<p>hope that can give you immediate results but you would still be much better off to implement the template  by <strong>Stefano M</strong> yourself since the information you are looking for is likely different then what I would want displayed.</p>
    </div>
    </div></body></html>