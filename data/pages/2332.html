<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-django-webdav-storage" class="anchor" href="#django-webdav-storage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>django-webdav-storage</h1>
<a href="http://badge.fury.io/py/django-webdav-storage"><img alt="" src="https://camo.githubusercontent.com/39ed731c8b0e1ebbf944933c4e0f25c496607ebb/68747470733a2f2f62616467652e667572792e696f2f70792f646a616e676f2d7765626461762d73746f726167652e706e67" data-canonical-src="https://badge.fury.io/py/django-webdav-storage.png"/></a>
<a href="https://travis-ci.org/marazmiki/django-webdav-storage"><img alt="Travis CI build status" src="https://camo.githubusercontent.com/64dcab38d826ad3c5d479d8ca80a7bf5b367ae3a/68747470733a2f2f7472617669732d63692e6f72672f6d6172617a6d696b692f646a616e676f2d7765626461762d73746f726167652e706e673f6272616e63683d6d6173746572" data-canonical-src="https://travis-ci.org/marazmiki/django-webdav-storage.png?branch=master"/></a>
<a href="https://coveralls.io/r/marazmiki/django-webdav-storage?branch=master"><img alt="Code coverage percentage" src="https://camo.githubusercontent.com/98a9275e38ecc04219e78b98e40b44cff795e412/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6d6172617a6d696b692f646a616e676f2d7765626461762d73746f726167652f62616467652e706e673f6272616e63683d6d6173746572" data-canonical-src="https://coveralls.io/repos/marazmiki/django-webdav-storage/badge.png?branch=master"/></a>
<a href="https://pypi.python.org/pypi/django-webdav-storage"><img alt="Latest version on PyPI" src="https://camo.githubusercontent.com/46e5affbd1695efaada956d4f173600334c8aebc/68747470733a2f2f70797069702e696e2f642f646a616e676f2d7765626461762d73746f726167652f62616467652e706e67" data-canonical-src="https://pypip.in/d/django-webdav-storage/badge.png"/></a>
<a href="https://pypi.python.org/pypi/django-webdav-storage/"><img alt="Wheel Status" src="https://camo.githubusercontent.com/aa079c69015cc5a25024348c0be96719b5943254/68747470733a2f2f70797069702e696e2f776865656c2f646a616e676f2d7765626461762d73746f726167652f62616467652e737667" data-canonical-src="https://pypip.in/wheel/django-webdav-storage/badge.svg"/>
</a>
<a href="https://pypi.python.org/pypi/django-webdav-storage/"><img alt="Supported Python versions" src="https://camo.githubusercontent.com/a2886462595fb14e3ae14f6615434abb0b01e169/68747470733a2f2f70797069702e696e2f70795f76657273696f6e732f646a616e676f2d7765626461762d73746f726167652f62616467652e706e67" data-canonical-src="https://pypip.in/py_versions/django-webdav-storage/badge.png"/></a>
<p>This application allows you easily save media and static files into webdav storage.</p>
<a name="user-content-dependencies"/>
<h2><a id="user-content-dependencies" class="anchor" href="#dependencies" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Dependencies</h2>

<a name="user-content-installation"/>
<h2><a id="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Installation</h2>
<ol>
<li>Install the package</li>
</ol>
<div class="highlight highlight-source-shell"><pre>pip install django-webdav-storage</pre></div>
<ol start="2">
<li>Pick the webdav server url in WEBDAV_URL and WEBDAV_PUBLIC_URL:</li>
</ol>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">WEBDAV_URL</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>http://webdav.example.com/<span class="pl-pds">'</span></span>,
<span class="pl-c1">WEBDAV_PUBLIC_URL</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>http://webdav.example.com/<span class="pl-pds">'</span></span></pre></div>
<p>If you want use HTTP Basic authorization to webdav access, you can specify
your credentials like that:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">WEBDAV_URL</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>http://johndoe:secret@webdav.example.com/<span class="pl-pds">'</span></span></pre></div>
<ol start="3">
<li>Set the webdav storage class as default:</li>
</ol>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">DEFAULT_FILE_STORAGE</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>django_webdav_storage.storage.WebDavStorage<span class="pl-pds">'</span></span></pre></div>
<ol start="4">
<li>If your webdav backend can't recursively create path (e.g. <a href="http://nginx.org/en/docs/http/ngx_http_dav_module.html#create_full_put_path">nginx can do this</a>, while apache can't), set the WEBDAV_RECURSIVE_MKCOL variable to True:</li>
</ol>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">WEBDAV_RECURSIVE_MKCOL</span> <span class="pl-k">=</span> <span class="pl-c1">True</span></pre></div>
<ol start="5">
<li>If you use nginx as webdav server and want to enable storage directory listing, set the WEBDAV_LISTING_BACKEND option to:</li>
</ol>
<div class="highlight highlight-source-python"><pre><span class="pl-c1">WEBDAV_LISTING_BACKEND</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>django_webdav_storage.listing.nginx_autoindex<span class="pl-pds">'</span></span></pre></div>
<p>Autoindex feature must be enabled in your nginx configuration for application servers (see example below). Be careful! Allowing autoindex for any user may lead to security and performance issues.</p>
<p>Also, you may specify path to other function with the following interface:</p>
<div class="highlight highlight-source-python"><pre><span class="pl-k">def</span> <span class="pl-en">listdir</span>(<span class="pl-smi">storage_object</span>, <span class="pl-smi">path_string</span>):
    <span class="pl-k">return</span> dirs_list, files_list</pre></div>
<a name="user-content-the-nginx-webdav-configuration-example"/>
<h2><a id="user-content-the-nginx-webdav-configuration-example" class="anchor" href="#the-nginx-webdav-configuration-example" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>The nginx webdav configuration example</h2>
<div class="highlight highlight-source-nginx"><pre><span class="pl-c"># Public readonly media server.</span>
<span class="pl-k">server</span> {
    <span class="pl-k">listen</span> <span class="pl-s">80</span>;
    <span class="pl-k">charset</span>        utf-8;
    <span class="pl-k">server_tokens</span> <span class="pl-c1"> off</span>;
    <span class="pl-k">server_name</span>    media.example.com;

    <span class="pl-k">access_log</span>     /var/log/nginx/media_access.log;
    <span class="pl-k">error_log</span>      /var/log/nginx/media_error.log;

    <span class="pl-k">root</span>           /usr/share/nginx/webdav;

}

<span class="pl-c"># WebDAV server</span>
<span class="pl-k">server</span> {
    <span class="pl-k">listen</span> <span class="pl-s">80</span>;
    <span class="pl-k">charset</span>        utf-8;
    <span class="pl-k">server_tokens</span> <span class="pl-c1"> off</span>;
    <span class="pl-k">server_name</span>    webdav.example.com;

    <span class="pl-k">access_log</span>     /var/log/nginx/webdav_access.log;
    <span class="pl-k">error_log</span>      /var/log/nginx/webdav_error.log;

    <span class="pl-k">root</span>           /usr/share/nginx/webdav;

    <span class="pl-k">client_max_body_size</span>    <span class="pl-c1">10m</span>;
    <span class="pl-k">client_body_temp_path</span>   /tmp;
    <span class="pl-k">create_full_put_path</span>    on;
    <span class="pl-k">autoindex</span>              <span class="pl-c1"> on</span>;

    <span class="pl-k">dav_methods</span>             PUT DELETE MKCOL COPY MOVE;
    <span class="pl-k">dav_access</span>              user:rw   group:r   all:r;

    <span class="pl-k">satisfy</span>                 any;

    <span class="pl-k">allow</span>                   <span class="pl-s">127.0.0.1</span><span class="pl-c1">/32</span>;
    <span class="pl-k">deny</span>                   <span class="pl-c1"> all</span>;

    <span class="pl-k">auth_basic</span>              <span class="pl-s">'My WebDAV area'</span>;
    <span class="pl-k">auth_basic_user_file</span>    /usr/share/nginx/.htpasswd;
}</pre></div>
<a name="user-content-caveats"/>
<h2><a id="user-content-caveats" class="anchor" href="#caveats" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Caveats</h2>
<ul>
<li>In python 3.x <code>ContentFile</code> with text mode content (not binary one) will causes <code>TypeError</code> due <code>requests</code> restrictions</li>
</ul>

</article>
  </div></body></html>