<html><body><div><ul>
<li><p>dropped python2.5 from automated release testing of pytest itself
which means it’s probably going to break soon (but still works
with this release we believe).</p>
</li>
<li><p>simplified and <span class="changelog-highlight-fix">fixed</span> implementation for calling finalizers when
parametrized fixtures or function arguments are involved.  finalization
is now performed lazily at setup time instead of in the “teardown phase”.
While this might sound odd at first, it helps to ensure that we are
correctly handling setup/teardown even in complex code.  User-level code
should not be affected unless it’s implementing the pytest_runtest_teardown
hook and expecting certain fixture instances are torn down within (very
unlikely and would have been unreliable anyway).</p>
</li>
<li><p>PR90: add –color=yes|no|auto option to force terminal coloring
mode (“auto” is default).  Thanks Marc Abramowitz.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue319 - correctly show unicode in assertion errors.  Many
thanks to Floris Bruynooghe for the complete PR.  Also means
we depend on py&gt;=1.4.19 now.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue396 - correctly sort and finalize class-scoped parametrized
tests independently from number of methods on the class.</p>
</li>
<li><p>refix issue323 in a better way – parametrization should now never
cause Runtime Recursion errors because the underlying algorithm
for re-ordering tests per-scope/per-fixture is not recursive
anymore (it was tail-call recursive before which could lead
to problems for more than &gt;966 non-function scoped parameters).</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue290 - there is preliminary support now for parametrizing
with repeated same values (sometimes useful to to test if calling
a second time works as with the first time).</p>
</li>
<li><p>close issue240 - document precisely how pytest module importing
works, discuss the two common test directory layouts, and how it
interacts with PEP420-namespace packages.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue246 <span class="changelog-highlight-fix">fix</span> finalizer order to be LIFO on independent fixtures
depending on a parametrized higher-than-function scoped fixture.
(was quite some effort so please bear with the complexity of this sentence :)
Thanks Ralph Schmitt for the precise failure example.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue244 by implementing special index for parameters to only use
indices for paramentrized test ids</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue287 by running all finalizers but saving the exception
from the first failing finalizer and re-raising it so teardown will
still have failed.  We reraise the first failing exception because
it might be the cause for other finalizers to fail.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> ordering when mock.patch or other standard decorator-wrappings
are used with test methods.  This fixues issue346 and should
help with random “xdist” collection failures.  Thanks to
Ronny Pfannschmidt and Donald Stufft for helping to isolate it.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue357 - special case “-k” expressions to allow for
filtering with simple strings that are not valid python expressions.
Examples: “-k 1.3” matches all tests parametrized with 1.3.
“-k None” filters all tests that have “None” in their name
and conversely “-k ‘not None’”.
Previously these examples would raise syntax errors.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue384 by removing the trial support code
since the unittest compat enhancements allow
trial to handle it on its own</p>
</li>
<li><p>don’t hide an ImportError when importing a plugin produces one.
<span class="changelog-highlight-fix">fixes</span> issue375.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue275 - allow usefixtures and autouse fixtures
for running doctest text files.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue380 by making –resultlog only rely on longrepr instead
of the “reprcrash” attribute which only exists sometimes.</p>
</li>
<li><p>address issue122: allow @pytest.fixture(params=iterator) by exploding
into a list early on.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> pexpect-3.0 compatibility for pytest’s own tests.
(fixes issue386)</p>
</li>
<li><p>allow nested parametrize-value markers, thanks James Lan for the PR.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> unicode handling with new monkeypatch.setattr(import_path, value)
API.  Thanks Rob Dennis.  <span class="changelog-highlight-fix">Fixes</span> issue371.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> unicode handling with junitxml, <span class="changelog-highlight-fix">fixes</span> issue368.</p>
</li>
<li><p>In assertion rewriting mode on Python 2, <span class="changelog-highlight-fix">fix</span> the detection of coding
cookies. See issue #330.</p>
</li>
<li><p>make “–runxfail” turn imperative pytest.xfail calls into no ops
(it already did neutralize pytest.mark.xfail markers)</p>
</li>
<li><p>refine pytest / pkg_resources interactions: The AssertionRewritingHook
PEP302 compliant loader now registers itself with setuptools/pkg_resources
properly so that the pkg_resources.resource_stream method works properly.
<span class="changelog-highlight-fix">Fixes</span> issue366.  Thanks for the investigations and full PR to Jason R. Coombs.</p>
</li>
<li><p>pytestconfig fixture is now session-scoped as it is the same object during the
whole test run.  <span class="changelog-highlight-fix">Fixes</span> issue370.</p>
</li>
<li><p>avoid one surprising case of marker malfunction/confusion:</p>
<div><div><pre>@pytest.mark.some(lambda arg: ...)
def test_function():
</pre></div>
</div>
<p>would not work correctly because pytest assumes @pytest.mark.some
gets a function to be decorated already.  We now at least detect if this
arg is an lambda and thus the example will work.  Thanks Alex Gaynor
for bringing it up.</p>
</li>
<li><p>xfail a test on pypy that checks wrong encoding/ascii (pypy does
not error out). <span class="changelog-highlight-fix">fixes</span> issue385.</p>
</li>
<li><p>internally make varnames() deal with classes’s __init__,
although it’s not needed by pytest itself atm.  Also
<span class="changelog-highlight-fix">fix</span> caching.  <span class="changelog-highlight-fix">Fixes</span> issue376.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue221 - handle importing of namespace-package with no
__init__.py properly.</p>
</li>
<li><p>refactor internal FixtureRequest handling to avoid monkeypatching.
One of the positive user-facing effects is that the “request” object
can now be used in closures.</p>
</li>
<li><p><span class="changelog-highlight-fix">fixed</span> version comparison in pytest.importskip(modname, minverstring)</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> issue377 by clarifying in the nose-compat docs that pytest
does not duplicate the unittest-API into the “plain” namespace.</p>
</li>
<li><p><span class="changelog-highlight-fix">fix</span> verbose reporting for @mock’d test functions</p>
</li>
</ul>
</div></body></html>