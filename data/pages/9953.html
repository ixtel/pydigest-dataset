<html><body><div><div id="content">

            

            
        


            <div class="section">
              <h1>commandlib 0.1.6</h1>

              


<p>Command runner for human beings.</p>








<p>CommandLib is a pythonic wrapper around subprocess that lets you pass around command objects
in a way that creates more readable scripts. It lets you daisy-chain:</p>
<ul>
<li>Arguments</li>
<li>Paths</li>
<li>Other environment variables</li>
<li>Runtime directory</li>
<li>Other runtime properties (run in shell, conceal stdout/stderr, ignore error codes, etc.)</li>
</ul>
<p>It is somewhat inspired by amoffat’s sh, Kenneth Reitz’s requests, jaraco’s path.py
and SQLAlchemy.</p>
<p>Example:</p>
<pre>&gt;&gt;&gt; from commandlib import Command, run
&gt;&gt;&gt; ls = Command("ls")
&gt;&gt;&gt; run(ls("-t").in_dir("/").with_shell())
sys  tmp  run  dev  proc  etc  boot  sbin  root  vmlinuz  initrd.img  bin  lib  opt  vmlinuz.old  initrd.img.old  media  home  cdrom  lost+found  var  srv  usr  mnt
</pre>
<div id="install">
<h2>Install</h2>
<blockquote>
pip install commandlib</blockquote>
</div>
<div id="api">
<h2>API</h2>
<blockquote>
<pre>&gt;&gt;&gt; from commandlib import Command, run
&gt;&gt;&gt; py = Command("/usr/bin/python")
&gt;&gt;&gt; py = py.with_env(PYTHONPATH="/home/user/pythondirectory")    # Run with *additional* variable PYTHONPATH (added to global environment when command is run)
&gt;&gt;&gt; py = py.with_path("/home/user/bin")                          # Run with additional path (added to PATH environment variable when command is run)
&gt;&gt;&gt; py = py.in_dir("/home/user/mydir")                           # Run in specified directory.
&gt;&gt;&gt; py = py.with_shell()                                         # Run with shell
&gt;&gt;&gt; py = py.only_errors()                                        # Suppress stderr
&gt;&gt;&gt; py = py.silently()                                           # Suppress stdout and stderr
</pre>
</blockquote>
</div>
<div id="why">
<h2>Why?</h2>
<p>Commandlib is a library to make it easier to pass around command objects between different
modules and classes and incrementally modify the command’s behavior in a readable way
- adding environment variables, paths, etc.</p>
<ul>
<li>call, check_call and Popen do not have the friendliest of APIs and code that uses them a lot can get ugly.</li>
<li>sh has rather too much magic (e.g. overriding import).</li>
<li>envoy and sarge are more focused on chaining commands rather than arguments.</li>
</ul>
</div>
<div id="advanced-api">
<h2>Advanced API</h2>
<p>Add trailing arguments:</p>
<blockquote>
<pre>&gt;&gt;&gt; from commandlib import Command, run
&gt;&gt;&gt; manage = Command(["/usr/bin/python", "manage.py"]).with_trailing_arguments("--settings", "local_settings.py").in_dir("projectdir")
&gt;&gt;&gt; run(manage("runserver"))
[ Runs "/usr/bin/python manage.py runserver --settings local_settings.py" inside projectdir ]
</pre>
</blockquote>
<p>Dynamically generate command bundles from directories with executables in them:</p>
<blockquote>
<pre>&gt;&gt;&gt; from commandlib import Commands, Command, run
&gt;&gt;&gt; postgres94 = Commands("/usr/lib/postgresql/9.4/bin/")
&gt;&gt;&gt; run(postgres94.postgres)
[ Runs postgres ]
</pre>
<pre>&gt;&gt;&gt; run(postgres94.createdb)
[ Runs createdb ]
</pre>
</blockquote>
<p>Use with path.py (or any other library where str(object) resolves to a string:</p>
<blockquote>
<pre>&gt;&gt;&gt; from path import Path
&gt;&gt;&gt; postgres94 = Commands(Path("/usr/lib/postgresql/9.4/bin/"))
&gt;&gt;&gt; run(postgres94.postgres)
</pre>
</blockquote>
</div>
<div id="hacking">
<h2>Hacking</h2>
<p>If you want to hack, you can TDD with:</p>
<pre>curl https://raw.githubusercontent.com/mitsuhiko/pipsi/master/get-pipsi.py | python
pipsi install hitch
cd tests
hitch init
hitch test . --settings tdd.settings
</pre>
</div>


<a name="downloads"> </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>140</span> downloads in the last week
  </li>
  <li>
    <span>1112</span> downloads in the last month
  </li>
</ul>









            </div>


          </div>
          </div></body></html>