<html><body><div><table class="messages">
 <tr><th colspan="4" class="header">Messages (20)</th></tr>
 
  <tr>
    <th>
     <a href="#msg234324" id="msg234324">msg234324</a> - <a href="msg234324">(view)</a></th>
   <th>Author: Devin Jeanpierre (Devin Jeanpierre) <span title="Contributor form received">*</span></th>
   <th>Date: 2015-01-19 19:05</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>&gt;&gt;&gt; [] = ()
&gt;&gt;&gt; () = []
  File "&lt;stdin&gt;", line 1
SyntaxError: can't assign to ()

This contradicts the assignment grammar, which would make both illegal: <a href="https://docs.python.org/3/reference/simple_stmts.html#assignment-statements">https://docs.python.org/3/reference/simple_stmts.html#assignment-statements</a></pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg234325" id="msg234325">msg234325</a> - <a href="msg234325">(view)</a></th>
   <th>Author: R. David Murray (r.david.murray) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-01-19 19:22</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>My guess is that it is not worth complicating the parser in order to make these two cases consistent, and it should be treated as a doc error.  We'll see what other developers think.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg234326" id="msg234326">msg234326</a> - <a href="msg234326">(view)</a></th>
   <th>Author: Raymond Hettinger (rhettinger) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-01-19 20:12</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>The starting point is recognizing that this has been around for very long time and is harmless.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg234361" id="msg234361">msg234361</a> - <a href="msg234361">(view)</a></th>
   <th>Author: Kyle Buzsaki (Kyle.Buzsaki)</th>
   <th>Date: 2015-01-20 09:25</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>It seems that assigning to [] is the odd one out in this case. Why is this even possible?

&gt;&gt;&gt; [] = ()
&gt;&gt;&gt; [] = {}
&gt;&gt;&gt; [] = set()
&gt;&gt;&gt; list() = ()
  File "&lt;stdin&gt;", line 1
SyntaxError: can't assign to function call
&gt;&gt;&gt; () = []
  File "&lt;stdin&gt;", line 1
SyntaxError: can't assign to ()
&gt;&gt;&gt; {} = []
  File "&lt;stdin&gt;", line 1
SyntaxError: can't assign to literal
&gt;&gt;&gt; set() = []
  File "&lt;stdin&gt;", line 1
SyntaxError: can't assign to function call
&gt;&gt;&gt;</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg234364" id="msg234364">msg234364</a> - <a href="msg234364">(view)</a></th>
   <th>Author: Martin Panter (martin.panter) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-01-20 09:40</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>But () is the odd one out if you consider

&gt;&gt;&gt; [a, b] = range(2)
&gt;&gt;&gt; [] = range(0)
&gt;&gt;&gt; (a, b) = range(2)
&gt;&gt;&gt; () = range(0)
  File "&lt;stdin&gt;", line 1
SyntaxError: can't assign to ()</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg234365" id="msg234365">msg234365</a> - <a href="msg234365">(view)</a></th>
   <th>Author: Eryk Sun (eryksun) <span title="Contributor form received">*</span></th>
   <th>Date: 2015-01-20 10:19</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>In ast.c, set_context checks for assignment to an empty tuple, but not an empty list.

        case List_kind:
            e-&gt;v.List.ctx = ctx;
            s = e-&gt;v.List.elts;
            break;
        case Tuple_kind:
            if (asdl_seq_LEN(e-&gt;v.Tuple.elts))  {
                e-&gt;v.Tuple.ctx = ctx;
                s = e-&gt;v.Tuple.elts;
            }
            else {
                expr_name = "()";
            }
            break;

<a href="https://hg.python.org/cpython/file/ab2c023a9432/Python/ast.c#l912">https://hg.python.org/cpython/file/ab2c023a9432/Python/ast.c#l912</a></pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg241473" id="msg241473">msg241473</a> - <a href="msg241473">(view)</a></th>
   <th>Author: Nick Coghlan (ncoghlan) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-04-19 02:47</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>As Raymond notes, this is a fairly harmless quirk - it changes a SyntaxError to an iterable length dependent ValueError:

&gt;&gt;&gt; () = []
  File "&lt;stdin&gt;", line 1
SyntaxError: can't assign to ()
&gt;&gt;&gt; [] = ()
&gt;&gt;&gt; [] = [1]
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
ValueError: too many values to unpack (expected 0)

I only found out about this after being puzzled when a typo in a live demo at PyCon 2015 failed to fail as I expected after seeing the presenter type a "[]" into the LHS of an assignment instead of the intended "_".

Removing the data dependence to make the assignment fail immediately (even if never tested against a non-empty iterable) would involve making the handling of List_kind match that of Tuple_kind in the switch statement that eryksun quoted.

I don't think it's an urgent fix, but if someone wanted to fix it (including a new test), I think it would be a reasonable contribution to accept.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg241474" id="msg241474">msg241474</a> - <a href="msg241474">(view)</a></th>
   <th>Author: Martin Panter (martin.panter) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-04-19 03:34</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>I would prefer this be fixed in the opposite direction, to allow “unpacking” an empty iterable using round brackets. I have used this syntax on purpose as a concise way to ensure that a generator is exhaused with no more yields:

&gt;&gt;&gt; def gen():
...     yield "partial computation"
...     print("computation allowed to complete")
... 
&gt;&gt;&gt; g = gen()
&gt;&gt;&gt; next(g)
'partial computation'
&gt;&gt;&gt; [] = g
computation allowed to complete</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg241523" id="msg241523">msg241523</a> - <a href="msg241523">(view)</a></th>
   <th>Author: R. David Murray (r.david.murray) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-04-19 17:57</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>There is also no reason to break currently working code, which turning this into a syntax error would od.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg241673" id="msg241673">msg241673</a> - <a href="msg241673">(view)</a></th>
   <th>Author: Mark Dickinson (mark.dickinson) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-04-20 18:28</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>&gt; There is also no reason to break currently working code

Agreed.  To take one example, David Beazley's PyCon 2015 talk would have been broken by the suggested change!  (See <a href="https://www.youtube.com/watch?v=MCs5OvhV9S4">https://www.youtube.com/watch?v=MCs5OvhV9S4</a>, at around the 42:17 mark.)

If there's any code change resulting from this issue, I also think it should be to make assignment to `()` legal.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg241790" id="msg241790">msg241790</a> - <a href="msg241790">(view)</a></th>
   <th>Author: Berker Peksag (berker.peksag) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-04-22 09:05</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>I don't have a strong opinion on this, but here is a patch to make () = [] a valid assignment.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg241792" id="msg241792">msg241792</a> - <a href="msg241792">(view)</a></th>
   <th>Author: Amaury Forgeot d'Arc (amaury.forgeotdarc) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-04-22 09:42</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>About the patch: I'm sure there are other tests to change,
in test_syntax.py for example::

    It's a syntax error to assign to the empty tuple.  Why isn't it an
    error to assign to the empty list?  It will always raise some error  at
    runtime.

    &gt;&gt;&gt; () = 1
    Traceback (most recent call last):
      File "&lt;doctest test.test_syntax[3]&gt;", line 1
    SyntaxError: can't assign to ()</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg244157" id="msg244157">msg244157</a> - <a href="msg244157">(view)</a></th>
   <th>Author: Rahul Gupta (Rahul Gupta)</th>
   <th>Date: 2015-05-27 12:28</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>isn't it logical?

[] is a mutable data structure
while () is a immutable data structure

(b, a) = [1, 2] is fine because a and b are mutable</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg244159" id="msg244159">msg244159</a> - <a href="msg244159">(view)</a></th>
   <th>Author: Devin Jeanpierre (Devin Jeanpierre) <span title="Contributor form received">*</span></th>
   <th>Date: 2015-05-27 12:42</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>[a, b] = (1, 2) is also fine.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg244161" id="msg244161">msg244161</a> - <a href="msg244161">(view)</a></th>
   <th>Author: Martin Panter (martin.panter) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-05-27 12:53</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>I prefer to unpack into square brackets in general because it is a mnemonic for the star argument being a list:

&gt;&gt;&gt; (a, *b) = range(3)
&gt;&gt;&gt; a
0
&gt;&gt;&gt; b  # A list, even though it was unpacked using tuple-like syntax
[1, 2]</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg244208" id="msg244208">msg244208</a> - <a href="msg244208">(view)</a></th>
   <th>Author: Raymond Hettinger (rhettinger) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-05-27 17:47</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>Berker's patch looks good.
It has several virtues:

* the error message is reasonable and clear
* it makes the language more consistent
* it doesn't break any existing code.
* it makes the AST a little simpler and faster
  by removing a special case

The patch needs to updated:
* remove the whatsnew entry
* fix test_codeop which expects "del ()" to raise SyntaxError
* fix test_syntax which fails on "() = 1" and "del ()"
* fix test_with which fails on "with mock as ()"</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg244215" id="msg244215">msg244215</a> - <a href="msg244215">(view)</a></th>
   <th>Author: (flying sheep) <span title="Contributor form received">*</span></th>
   <th>Date: 2015-05-27 19:43</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>&gt; isn't it logical?
&gt; 
&gt; [] is a mutable data structure
&gt; while () is a immutable data structure

but you don’t assign to data structures, but to names. you *modify* data structures. and in the square bracket assignment syntax you don’t modify the list created by the []. in fact the [] never even create a list.

—————————————————————————————

also it’s news to me that [a, b] = range(2) works!

i always did a, b = range(2), and knew that (a, b) = range(2) works.

but assigning to something looking like a list literal is new and surprising to me. (and i thought i’ve mastered every corner of python’s syntax)</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg244227" id="msg244227">msg244227</a> - <a href="msg244227">(view)</a></th>
   <th>Author: Nick Coghlan (ncoghlan) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-05-28 00:15</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>+1 for Martin's suggestion of removing the inconsistency the other way (i.e. allowing "() = iterable" to mean the same thing as "[] = iterable", effectively asserting that an iterable is empty)

I also agree with Raymond that it doesn't need to be mentioned in the What's New doc, just in the NEWS file.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg245308" id="msg245308">msg245308</a> - <a href="msg245308">(view)</a></th>
   <th>Author: Berker Peksag (berker.peksag) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-06-13 09:03</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>Thanks for the reviews. Here is an updated patch.</pre>
   </td>
  </tr>
 
 
  <tr>
    <th>
     <a href="#msg246382" id="msg246382">msg246382</a> - <a href="msg246382">(view)</a></th>
   <th>Author: Martin Panter (martin.panter) <span title="Contributor form received">*</span> <img src="@@file/committer.png" title="Python committer" alt="(Python committer)"/></th>
   <th>Date: 2015-07-06 23:20</th>
  </tr>
  <tr>
   <td colspan="4" class="content">
    
    <pre>I welcome this patch to go ahead. But the documentation &lt;<a href="https://docs.python.org/3.6/reference/simple_stmts.html#assignment-statements">https://docs.python.org/3.6/reference/simple_stmts.html#assignment-statements</a>&gt; also needs updating (see original post). I think it should mention that “target_list” can be empty. And it should use “iterable” instead of “sequence” in more places.</pre>
   </td>
  </tr>
 
</table>

<table class="history table table-condensed table-striped"><tr><th colspan="4" class="header">
History
</th></tr><tr>
<th>Date</th>
<th>User</th>
<th>Action</th>
<th>Args</th>
</tr>
<tr><td>2015-07-06 23:20:30</td><td>martin.panter</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg246382">msg246382</a></td></tr>
<tr><td>2015-06-13 09:03:46</td><td>berker.peksag</td><td>set</td><td>files:
  + <a rel="nofollow" href="file39703">issue23275_v2.diff</a><br/><br/>messages:
  + <a rel="nofollow" href="msg245308">msg245308</a></td></tr>
<tr><td>2015-05-28 03:45:09</td><td>scoder</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user2153">scoder</a><br/></td></tr>
<tr><td>2015-05-28 00:15:18</td><td>ncoghlan</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg244227">msg244227</a></td></tr>
<tr><td>2015-05-27 19:43:45</td><td>flying sheep</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user13286">flying sheep</a><br/>messages:
  + <a rel="nofollow" href="msg244215">msg244215</a><br/></td></tr>
<tr><td>2015-05-27 17:47:39</td><td>rhettinger</td><td>set</td><td>assignee: <a rel="nofollow" href="user114">rhettinger</a><br/>messages:
  + <a rel="nofollow" href="msg244208">msg244208</a><br/>versions:
  + Python 3.6, - Python 3.5</td></tr>
<tr><td>2015-05-27 12:53:23</td><td>martin.panter</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg244161">msg244161</a></td></tr>
<tr><td>2015-05-27 12:42:47</td><td>Devin Jeanpierre</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg244159">msg244159</a></td></tr>
<tr><td>2015-05-27 12:28:34</td><td>Rahul Gupta</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user21893">Rahul Gupta</a><br/>messages:
  + <a rel="nofollow" href="msg244157">msg244157</a><br/></td></tr>
<tr><td>2015-05-27 12:08:20</td><td>ionelmc</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user9235">ionelmc</a><br/></td></tr>
<tr><td>2015-04-22 09:42:01</td><td>amaury.forgeotdarc</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user1076">amaury.forgeotdarc</a><br/>messages:
  + <a rel="nofollow" href="msg241792">msg241792</a><br/></td></tr>
<tr><td>2015-04-22 09:05:59</td><td>berker.peksag</td><td>set</td><td>files:
  + <a rel="nofollow" href="file39165">issue23275.diff</a><br/><br/>versions:
  + Python 3.5<br/>keywords:
  + <a rel="nofollow" href="keyword2">patch</a><br/>nosy:
  + <a rel="nofollow" href="user14674">berker.peksag</a><br/><br/>messages:
  + <a rel="nofollow" href="msg241790">msg241790</a><br/>stage: patch review</td></tr>
<tr><td>2015-04-20 18:28:23</td><td>mark.dickinson</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user1118">mark.dickinson</a><br/>messages:
  + <a rel="nofollow" href="msg241673">msg241673</a><br/></td></tr>
<tr><td>2015-04-19 17:57:04</td><td>r.david.murray</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg241523">msg241523</a></td></tr>
<tr><td>2015-04-19 03:34:31</td><td>martin.panter</td><td>set</td><td>messages:
  + <a rel="nofollow" href="msg241474">msg241474</a></td></tr>
<tr><td>2015-04-19 02:47:53</td><td>ncoghlan</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user1309">ncoghlan</a><br/>messages:
  + <a rel="nofollow" href="msg241473">msg241473</a><br/></td></tr>
<tr><td>2015-03-02 08:14:16</td><td>ezio.melotti</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user7047">ezio.melotti</a><br/></td></tr>
<tr><td>2015-01-20 10:19:31</td><td>eryksun</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user16413">eryksun</a><br/>messages:
  + <a rel="nofollow" href="msg234365">msg234365</a><br/></td></tr>
<tr><td>2015-01-20 09:40:47</td><td>martin.panter</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user14751">martin.panter</a><br/>messages:
  + <a rel="nofollow" href="msg234364">msg234364</a><br/></td></tr>
<tr><td>2015-01-20 09:25:19</td><td>Kyle.Buzsaki</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user20693">Kyle.Buzsaki</a><br/>messages:
  + <a rel="nofollow" href="msg234361">msg234361</a><br/></td></tr>
<tr><td>2015-01-19 20:12:04</td><td>rhettinger</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user114">rhettinger</a><br/>messages:
  + <a rel="nofollow" href="msg234326">msg234326</a><br/></td></tr>
<tr><td>2015-01-19 19:22:23</td><td>r.david.murray</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user9663">r.david.murray</a><br/>messages:
  + <a rel="nofollow" href="msg234325">msg234325</a><br/></td></tr>
<tr><td>2015-01-19 19:16:58</td><td>Cesar.Kawakami</td><td>set</td><td>nosy:
  + <a rel="nofollow" href="user20688">Cesar.Kawakami</a><br/></td></tr>
<tr><td>2015-01-19 19:05:47</td><td>Devin Jeanpierre</td><td>create</td><td/></tr>
</table>

</div></body></html>