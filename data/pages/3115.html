<html><body><div><div class="body"><div itemscope="" itemtype="http://schema.org/Article"><h1 class="title" itemprop="name">Django pro tip: if you only use the admin</h1><p class="date"> Tue 11 October 2011</p><div itemprop="articleBody"><p>If you have a project that only exposes the admin you should just use the 500/404 templates from the admin.</p><p>Put this in your project's urls.py:</p><div class="highlight"><pre><span/><span class="kn">from</span> <span class="nn">django.utils.functional</span> <span class="kn">import</span> <span class="n">curry</span>
<span class="kn">from</span> <span class="nn">django.views.defaults</span> <span class="kn">import</span> <span class="n">server_error</span><span class="p">,</span> <span class="n">page_not_found</span>

<span class="n">handler500</span> <span class="o">=</span> <span class="n">curry</span><span class="p">(</span><span class="n">server_error</span><span class="p">,</span> <span class="n">template_name</span><span class="o">=</span><span class="s1">'admin/500.html'</span><span class="p">)</span>
<span class="n">handler404</span> <span class="o">=</span> <span class="n">curry</span><span class="p">(</span><span class="n">page_not_found</span><span class="p">,</span> <span class="n">template_name</span><span class="o">=</span><span class="s1">'admin/404.html'</span><span class="p">)</span>
</pre></div><p>I wonder why django doesn't mention those templates in the docs ...</p><p>If you have other drop-in apps that need authentication (like <a class="reference external" href="http://pypi.python.org/pypi/django-rosetta">rosetta</a> or <a class="reference external" href="http://pypi.python.org/pypi/django-sentry">sentry</a>) bare in mind that the admin doesn't have a reusable login view so you must hook one. You should just reuse django admin's login template. Put this in the urlpatterns (don't forget to match it to <a class="reference external" href="https://docs.djangoproject.com/en/dev/ref/settings/#login-url">LOGIN_URL</a> in the settings):</p><div class="highlight"><pre><span/><span class="n">url</span><span class="p">(</span><span class="s1">r'^accounts/login/$'</span><span class="p">,</span> <span class="s1">'django.contrib.auth.views.login'</span><span class="p">,</span> <span class="p">{</span><span class="s1">'template_name'</span><span class="p">:</span> <span class="s1">'admin/login.html'</span><span class="p">}),</span>
</pre></div><p>You might note that this is not very <a class="reference external" href="http://en.wikipedia.org/wiki/DRY">DRY</a> but actually the LOGIN_URL might differ than the one in the urlpatterns (eg: you mount the django wsgi handler on a non-root path).</p></div><p class="tags">This entry was tagged as <a href="https://blog.ionelmc.ro/tag/django/"><span itemprop="keywords">django</span></a><a href="https://blog.ionelmc.ro/tag/python/"><span itemprop="keywords">python</span></a></p></div><p id="disqus_thread"/><noscript> Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> </div></div></body></html>