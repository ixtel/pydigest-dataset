<html><body><div><div class="post-body entry-content" id="post-body-4828015986721764148" itemprop="description articleBody">
<span>I love Python.  Yet, there are some minor things in the language that I find baffling...</span>
<span><br/>
</span> <span>Python loop statements (for/while) include an optional else clause whose behaviour is very counter intuitive.  In fact, it is so "bad" that Brett Slatkin, author of Effective Python, wrote as one of his 59 specific ways to write better Python:</span>
<span><br/>
</span> 
<blockquote class="tr_bq"><i><span>Item 12: Avoid else Blocks After for and while Loops.</span></i></blockquote><span><br/>
</span> <span>In fact, <a href="https://mail.python.org/pipermail/python-ideas/2009-October/006157.html" target="_blank">Guido himself wrote in 2009</a>:</span>
<span><br/>
</span> 
<blockquote class="tr_bq"><i><span>I would not have the feature at all if I had to do it over. </span></i></blockquote><span><br/>
</span> <span>(My initial preference, when I learned about the meaning of else in those loops, was to wonder why "ifnobreak" had not bee used as a keyword instead; later I saw Raymond Hettinger suggest simply "nobreak" which I thought was both more readable and a better idea. [You can see Hettinger explain why <a href="https://www.youtube.com/watch?v=OSGv2VnC0go#t=17m12s" target="_blank">in this video</a>.]  However, Guido also mentioned in the above quoted message "</span><i><span>I would *not* choose another keyword."</span></i><span>)</span>
<span><br/>
</span> <span><a href="https://docs.python.org/3.4/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops" target="_blank">In the official Python tutorial</a>, when the else clause is discussed, we find these two interesting statements:</span>
<span><br/>
</span> 
<blockquote class="tr_bq"><i><span><span>Yes, this is the correct code. Look closely: the </span><tt class="docutils literal"><span class="pre">else</span></tt><span> clause belongs to the </span><a class="reference internal" href="https://docs.python.org/3.4/reference/compound_stmts.html#for"><tt class="xref std std-keyword docutils literal"><span class="pre">for</span></tt></a><span> loop, </span><strong>not</strong><span> the </span><a class="reference internal" href="https://docs.python.org/3.4/reference/compound_stmts.html#if"><tt class="xref std std-keyword docutils literal"><span class="pre">if</span></tt></a><span> statement.</span></span></i></blockquote><span>(I don't know about you, but when I read some similar warning in a tutorial, my immediate reaction is to question why it was done like this in the first place since it is recognized as being far from obvious.)</span>
<span><br/>
</span> 
<blockquote class="tr_bq"><i><span><span>When used with a loop, the </span><tt class="docutils literal"><span class="pre">else</span></tt><span> clause has more in common with the </span><tt class="docutils literal"><span class="pre">else</span></tt><span> clause of a </span><a class="reference internal" href="https://docs.python.org/3.4/reference/compound_stmts.html#try"><tt class="xref std std-keyword docutils literal"><span class="pre">try</span></tt></a><span> statement than it does that of </span><a class="reference internal" href="https://docs.python.org/3.4/reference/compound_stmts.html#if"><tt class="xref std std-keyword docutils literal"><span class="pre">if</span></tt></a><span> statements...</span></span></i></blockquote><span>This is yet another acknowledgement that people might be confused about the meaning of "else", since they mostly see it with "if" statements.  </span>
<span><br/>
</span> <span> And it seems it's going to get only worse.  In a <a href="https://www.python.org/dev/peps/pep-0492/" target="_blank">new PEP</a>, we see that another similar else clause is proposed with the similar semantic...</span>
<span><br/>
</span> 
<pre class="literal-block"><span><span>async for TARGET in ITER:
    BLOCK
else:
    BLOCK2</span></span></pre><pre class="literal-block"> Why, oh why can we not introduce a clearer keyword (like nobreak) and stop introducing yet more examples of confusingly named clause...</pre>
<p/>
</div>
</div></body></html>