<html><body><div><p>I just finished my initial work on a VGA Console emulator for Pygame.  This is great, if say you need to add a retro style VGA Console into your game, or if you want to build an application that takes full advantage of the VGA video adapter.  At the moment, I am releasing it as a <strong>Preview Demo</strong>, and it isn't ready for any production applications or games just yet.  However, what is available in this preview is plentiful.  You can download the full source from my Bitbucket page, which is linked in the right hand column of my blog.  I will also include the source here and try to explain what it can currently so.  I have also enclosed a screenshot of the demo app both in this blog post and in the bitbucket repository for those too lazy to download it and try it themselves in Pygame.</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">pygame</span><span class="o">,</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">mmap</span>

<span class="n">clock</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">VGAConsole</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">VGA_PALETTE</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">168</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">168</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">168</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">168</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">168</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">168</span><span class="p">,</span><span class="mi">87</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">168</span><span class="p">,</span><span class="mi">168</span><span class="p">,</span><span class="mi">168</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">87</span><span class="p">,</span><span class="mi">87</span><span class="p">,</span><span class="mi">87</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">87</span><span class="p">,</span><span class="mi">87</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">87</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">87</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">87</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">87</span><span class="p">,</span><span class="mi">87</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">87</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">87</span><span class="p">),</span>
        <span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">US_SHIFTMAP</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">49</span><span class="p">:</span> <span class="mi">33</span><span class="p">,</span>
        <span class="mi">50</span><span class="p">:</span> <span class="mi">64</span><span class="p">,</span>
        <span class="mi">51</span><span class="p">:</span> <span class="mi">35</span><span class="p">,</span>
        <span class="mi">52</span><span class="p">:</span> <span class="mi">36</span><span class="p">,</span>
        <span class="mi">53</span><span class="p">:</span> <span class="mi">37</span><span class="p">,</span>
        <span class="mi">54</span><span class="p">:</span> <span class="mi">94</span><span class="p">,</span>
        <span class="mi">55</span><span class="p">:</span> <span class="mi">38</span><span class="p">,</span>
        <span class="mi">56</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
        <span class="mi">57</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
        <span class="mi">48</span><span class="p">:</span> <span class="mi">41</span><span class="p">,</span>
        <span class="mi">96</span><span class="p">:</span> <span class="mi">126</span><span class="p">,</span>
        <span class="mi">45</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span>
        <span class="mi">61</span><span class="p">:</span> <span class="mi">43</span><span class="p">,</span>
        <span class="mi">91</span><span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
        <span class="mi">93</span><span class="p">:</span> <span class="mi">125</span><span class="p">,</span>
        <span class="mi">59</span><span class="p">:</span> <span class="mi">58</span><span class="p">,</span>
        <span class="mi">39</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span>
        <span class="mi">92</span><span class="p">:</span> <span class="mi">124</span><span class="p">,</span>
        <span class="mi">44</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="mi">46</span><span class="p">:</span> <span class="mi">62</span><span class="p">,</span>
        <span class="mi">47</span><span class="p">:</span> <span class="mi">63</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vgabuf</span> <span class="o">=</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4000</span><span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="mi">640</span><span class="p">,</span><span class="mi">400</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="mi">8</span><span class="p">)</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s">'VGA Console test'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="s">'VGA.ttf'</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">219</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">VGA_PALETTE</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">VGA_PALETTE</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shift</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cframe</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cframes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">(</span><span class="s">'|'</span><span class="p">,</span> <span class="s">'/'</span><span class="p">,</span> <span class="s">'-'</span><span class="p">,</span> <span class="s">'</span><span class="se">\\</span><span class="s">'</span><span class="p">,):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cframes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">VGA_PALETTE</span><span class="p">[</span><span class="mi">15</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">fill</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">background</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vgabuf</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">25</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">80</span><span class="p">):</span>
                <span class="n">attr</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vgabuf</span><span class="o">.</span><span class="n">read_byte</span><span class="p">())</span>
                <span class="n">fg</span><span class="p">,</span><span class="n">bg</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span><span class="mi">0</span>
                <span class="k">if</span> <span class="n">attr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">fg</span><span class="p">,</span><span class="n">bg</span> <span class="o">=</span> <span class="n">attr</span><span class="o">&amp;</span><span class="mh">0xf</span><span class="p">,</span> <span class="p">(</span><span class="n">attr</span><span class="o">&amp;</span><span class="mh">0xf0</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">4</span>
                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vgabuf</span><span class="o">.</span><span class="n">read_byte</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">VGA_PALETTE</span><span class="p">[</span><span class="n">fg</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">VGA_PALETTE</span><span class="p">[</span><span class="n">bg</span><span class="p">]),</span> <span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="mi">8</span><span class="p">,</span><span class="n">y</span><span class="o">*</span><span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drawMouse</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drawCursor</span><span class="p">()</span>
        <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">setXY</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vgabuf</span><span class="o">.</span><span class="n">seek</span><span class="p">((</span><span class="mi">80</span><span class="o">*</span><span class="n">row</span><span class="o">+</span><span class="n">col</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vgabuf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mh">0x1f</span><span class="p">)</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span><span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setXY</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">8</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="mi">27</span><span class="p">:</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setXY</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">80</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">draw_ascii</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">row</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span><span class="mi">10</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">255</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setXY</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">col</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
            <span class="n">col</span> <span class="o">+=</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">col</span> <span class="o">&gt;</span> <span class="mi">41</span><span class="p">:</span>
                <span class="n">col</span> <span class="o">=</span> <span class="mi">10</span>
                <span class="n">row</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">def</span> <span class="nf">draw_window</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
        <span class="n">brd</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">205</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">width</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">213</span><span class="p">)</span><span class="o">+</span><span class="n">brd</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">184</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">+</span><span class="n">height</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setXY</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="mi">179</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setXY</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">col</span><span class="o">+</span><span class="n">width</span><span class="p">,</span> <span class="mi">179</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">row</span><span class="o">+</span><span class="n">height</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">212</span><span class="p">)</span><span class="o">+</span><span class="n">brd</span><span class="o">+</span><span class="nb">chr</span><span class="p">(</span><span class="mi">190</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">title</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="o">+</span><span class="p">((</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">clear_window</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">row</span><span class="o">+</span><span class="n">height</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">col</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">width</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">setPos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">clearScreen</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vgabuf</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vgabuf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">*</span><span class="mi">4000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">mousePos</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">get_pos</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="mi">16</span><span class="p">,</span> <span class="n">x</span><span class="o">/</span><span class="mi">8</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">drawMouse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">row</span><span class="p">,</span><span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor</span><span class="p">,</span> <span class="p">(</span><span class="n">col</span><span class="o">*</span><span class="mi">8</span><span class="p">,</span><span class="n">row</span><span class="o">*</span><span class="mi">16</span><span class="p">))</span>
    <span class="k">def</span> <span class="nf">drawCursor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cframes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">cframe</span><span class="o">/</span><span class="mi">3</span><span class="o">%</span><span class="mi">4</span><span class="p">],</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">8</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cframe</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_ascii</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_window</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span> <span class="s">' ASCII '</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setPos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'Welcome to VGAConsole!</span><span class="se">\r</span><span class="s">C:\&gt;'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="c">#pygame.event.set_blocked(MOUSEMOTION)</span>
        <span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">clock</span><span class="o">.</span><span class="n">tick</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                    <span class="n">pygame</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
                    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">MOUSEBUTTONUP</span><span class="p">:</span>
                    <span class="n">oldpos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">clear_window</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">oldpos</span>
                <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">KEYDOWN</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_LSHIFT</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_RSHIFT</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">shift</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">&lt;</span> <span class="mi">256</span><span class="p">:</span>
                        <span class="n">c</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shift</span><span class="p">:</span>
                            <span class="k">if</span> <span class="n">c</span> <span class="o">&gt;</span> <span class="mi">96</span> <span class="ow">and</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="mi">123</span><span class="p">:</span>
                                <span class="n">c</span><span class="o">-=</span><span class="mi">32</span>
                            <span class="k">elif</span> <span class="n">c</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">US_SHIFTMAP</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                                <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">US_SHIFTMAP</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">KEYUP</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_LSHIFT</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_RSHIFT</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">shift</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="n">VGAConsole</span><span class="p">()</span><span class="o">.</span><span class="n">main</span><span class="p">()</span>
</pre></div>

<p>As you can see from the screenshot, it's very complete looking, with full support for all those ASCII characters you knew and loved.  The display itself is rendered from the same format as the VGA memory, where each character on screen takes 2 bytes.  One byte stores some attribute information, such as the foreground and background colors, and the other byte is the ASCII character code.  In the actual VGA memory, the attribute also supported a blink flag, which I omitted in this VGA Console, as it's annoying and I really don't want to see it used...  So, rather than supporting blink, it supports a full 16 colors for both the foreground and the background.  In the original VGA memory, it only supported 8-color backgrounds.  Since the memory format for VGA is the same as located at <strong>&amp;0xB800</strong> memory segment on real hardware, you can technically use a memory dump file created by say <strong>BSAVE</strong> commands.  I may enable native <strong>BSAVEing</strong> and <strong>BLOADing</strong> of the memory buffer in future version.</p>
<p>One of the major features which is missing is input and output buffering support.  At the moment, the current API allows you to write directly to the VGA memory buffer to draw text onto the console.  This isn't very ideal for several reasons.  It will not work correctly with stdin/stdout applications, and taking input into a string isn't currently possible.  Typing onto the console is currently possible, but the input is not buffered, and the user may edit anything on the screen.  Proper stdin and stdout is supported in the next release.  This will enable many standard Python functions which require either or both to actually work on the VGA console.  This will really open the doors to what will be possible with VGA Console.</p>
</div></body></html>