<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-dictionary-database" class="anchor" href="#dictionary-database" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>[D]ictionary "[D]ata[B]ase"</h1>

<p>A class for lazily filtering and manipulating lists of dictionaries in less than 60 lines of Python. Everything is passed as generators, so memory efficiency should be pretty good! There are no dependencies other then the built-in <code>itertools</code>.</p>

<h2><a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Usage</h2>

<p>Create a "database"...</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">from</span> ddb <span class="pl-k">import</span> <span class="pl-c1">DDB</span>

test_data <span class="pl-k">=</span> [
  {<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> : <span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> : {<span class="pl-s"><span class="pl-pds">"</span>x<span class="pl-pds">"</span></span> : <span class="pl-c1">2</span>}},
  {<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> : <span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> : {<span class="pl-s"><span class="pl-pds">"</span>x<span class="pl-pds">"</span></span> : <span class="pl-c1">2</span>}},
  {<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> : <span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> : {<span class="pl-s"><span class="pl-pds">"</span>x<span class="pl-pds">"</span></span> : <span class="pl-c1">3</span>}}
]

db <span class="pl-k">=</span> DDB(test_data)</pre></div>

<p>Filter the "database" using <code>db.select()</code>, which returns
a new DDB with the selection for method chaining / new selections</p>

<div class="highlight highlight-source-python"><pre>selection <span class="pl-k">=</span> db.select({<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> : <span class="pl-c1">2</span>})
<span class="pl-c1">print</span>(selection)
<span class="pl-c"># =&gt; [{"a" : 2, "b" : {"x" : 2}}, {"a" : 2, "b" : {"x" : 3}}]</span>
<span class="pl-c1">print</span>(selection.select({<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> : {<span class="pl-s"><span class="pl-pds">"</span>x<span class="pl-pds">"</span></span> : <span class="pl-c1">2</span>}}))
<span class="pl-c"># =&gt; [{'a': 2, 'b': {'x': 2}}]</span>
</pre></div>

<p>Insert stuff</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c1">print</span>(selection.insert({<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span> : <span class="pl-c1">2</span>}))
<span class="pl-c"># =&gt; [{'a': 2, 'b': {'x': 2}}, {'a': 2, 'b': {'x': 3}}, {'a': 2}]</span>
</pre></div>

<p>Select using functions!</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c1">print</span>(selection.select({<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span> : {<span class="pl-s"><span class="pl-pds">"</span>x<span class="pl-pds">"</span></span> : <span class="pl-k">lambda</span> <span class="pl-smi">x</span> : x <span class="pl-k">&lt;</span> <span class="pl-c1">3</span>}}))
<span class="pl-c"># =&gt; [{'a': 2, 'b': {'x': 2}}]</span></pre></div>

<p>Iterate through the selection!</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">for</span> item <span class="pl-k">in</span> selection:
  <span class="pl-c1">print</span>(item)
<span class="pl-c"># =&gt;</span>
<span class="pl-c">#  {'a': 2, 'b': {'x': 2}}</span>
<span class="pl-c">#  {'a': 2, 'b': {'x': 3}}</span>
<span class="pl-c">#  {'a': 2}</span></pre></div>

<p>Apply transforms, and chain operations!</p>

<div class="highlight highlight-source-python"><pre><span class="pl-k">import</span> random

<span class="pl-k">def</span> <span class="pl-en">addFuzzyAsquared</span>(<span class="pl-smi">item</span>):
  item[<span class="pl-s"><span class="pl-pds">'</span>a_sq<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> item[<span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>]<span class="pl-k">**</span><span class="pl-c1">2</span> <span class="pl-k">+</span> random.randint(<span class="pl-c1">0</span>, <span class="pl-c1">20</span>)
  <span class="pl-k">return</span> item

<span class="pl-c1">print</span>(selection.map(addFuzzyAsquared).select({<span class="pl-s"><span class="pl-pds">"</span>a_sq<span class="pl-pds">"</span></span> : <span class="pl-k">lambda</span> <span class="pl-smi">x</span> : x <span class="pl-k">&lt;</span> <span class="pl-c1">10</span>}))
</pre></div>
</article>
  </div></body></html>