<html><body><div><section class="entry">
<p class="fsb-clear"/><p><a href="http://www.pyimagesearch.com/wp-content/uploads/2016/01/center_of_contour_results.gif"><img class="aligncenter wp-image-3621" src="http://www.pyimagesearch.com/wp-content/uploads/2016/01/center_of_contour_results.gif" alt="center_of_contour_results"/></a></p>
<p>Today, we are going to start a new 3-part series of tutorials on <strong><em>shape detection and analysis</em></strong>.</p>
<p>Throughout this series, we’ll learn how to:</p>
<ol>
<li>Compute the center of a contour/shape region.</li>
<li>Recognize various shapes, such as circles, squares, rectangles, triangles, and pentagons using only contour properties.</li>
<li>Label the color of a shape.</li>
</ol>
<p>While today’s post is a bit basic (at least in context of some of the more advanced concepts on the PyImageSearch blog recently), it still addresses a question that I get asked a lot:</p>
<blockquote><p><strong>“How do I compute the center of a contour using Python and OpenCV?</strong></p></blockquote>
<p>In today’s post, I’ll answer that question.</p>
<p>And in later posts in this series, we’ll build upon our knowledge of contours to recognize shapes in images.</p>

<h2>OpenCV center of contour</h2>
<div id="attachment_3622" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2016/01/shapes_and_colors.jpg"><img class="wp-image-3622" src="http://www.pyimagesearch.com/wp-content/uploads/2016/01/shapes_and_colors.jpg" alt="Figure 1: An example image containing a set of shapes that we are going to compute the center of the contour for."/></a><p class="wp-caption-text"><strong>Figure 1:</strong> An example image containing a set of shapes that we are going to compute the center of the contour for.</p></div>
<p>In above image, you can see a variety of shapes cut out from pieces of construction paper. Notice how these shapes are not <em>perfect</em>. The rectangles aren’t quite rectangular — and the circles are not entirely circular either. These are <em>human drawn and human cut out shapes</em>, implying there is <em>variation</em> in each shape type.</p>
<p>With this in mind, the goal of today’s tutorial is to (1) <em>detect the outline of each shape</em> in the image, followed by (2) <em>computing the center of the contour</em> — also called the <em>centroid </em>of the region.</p>
<p>In order to accomplish these goals, we’ll need to perform a bit of image pre-processing, including:</p>
<ul>
<li>Conversion to grayscale.</li>
<li>Blurring to reduce high frequency noise to make our contour detection process more accurate.</li>
<li>Binarization of the image. Typically edge detection and thresholding are used for this process. In this post, we’ll be applying thresholding.</li>
</ul>
<p>Before we start coding, make sure you have the <a href="https://github.com/jrosebr1/imutils" target="_blank">imutils Python package</a> installed on your system:</p>

		

<p>From there, we can go ahead and get started.</p>
<p>Open up a new file, name it 
			<span id="crayon-56d5a11ba6374836022292" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">center_of_shape</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></span></span> , and we’ll get coding:</p>

		<div id="crayon-56d5a11ba6378596824252" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba6378596824252-2">2</p><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba6378596824252-4">4</p><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba6378596824252-6">6</p><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba6378596824252-8">8</p><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba6378596824252-10">10</p><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba6378596824252-12">12</p><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba6378596824252-14">14</p><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba6378596824252-16">16</p><p class="crayon-num" data-line="crayon-56d5a11ba6378596824252-17">17</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a11ba6378596824252-1"><span class="crayon-c"># import the necessary packages</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6378596824252-2"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span></p><p class="crayon-line" id="crayon-56d5a11ba6378596824252-3"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">imutils</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6378596824252-4"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span></p><p class="crayon-line" id="crayon-56d5a11ba6378596824252-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6378596824252-6"><span class="crayon-c"># construct the argument parse and parse the arguments</span></p><p class="crayon-line" id="crayon-56d5a11ba6378596824252-7"><span class="crayon-v">ap</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">argparse</span><span class="crayon-sy">.</span><span class="crayon-e">ArgumentParser</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6378596824252-8"><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">add_argument</span><span class="crayon-sy">(</span><span class="crayon-s">"-i"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"--image"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">required</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5a11ba6378596824252-9"><span class="crayon-h">	</span><span class="crayon-k ">help</span><span class="crayon-o">=</span><span class="crayon-s">"path to the input image"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6378596824252-10"><span class="crayon-v">args</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">vars</span><span class="crayon-sy">(</span><span class="crayon-v">ap</span><span class="crayon-sy">.</span><span class="crayon-e">parse_args</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a11ba6378596824252-11"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6378596824252-12"><span class="crayon-c"># load the image, convert it to grayscale, blur it slightly,</span></p><p class="crayon-line" id="crayon-56d5a11ba6378596824252-13"><span class="crayon-c"># and threshold it</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6378596824252-14"><span class="crayon-v">image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">imread</span><span class="crayon-sy">(</span><span class="crayon-v">args</span><span class="crayon-sy">[</span><span class="crayon-s">"image"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a11ba6378596824252-15"><span class="crayon-v">gray</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">cvtColor</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">COLOR_BGR2GRAY</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6378596824252-16"><span class="crayon-v">blurred</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">GaussianBlur</span><span class="crayon-sy">(</span><span class="crayon-v">gray</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">5</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a11ba6378596824252-17"><span class="crayon-v">thresh</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">threshold</span><span class="crayon-sy">(</span><span class="crayon-v">blurred</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">60</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">THRESH_BINARY</span><span class="crayon-sy">)</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>We start off on <strong>Lines 2-4</strong> by importing our necessary packages, followed by parsing our command line arguments. We only need a single switch here, 
			<span id="crayon-56d5a11ba637d905773060" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-o">--</span><span class="crayon-v">image</span></span></span> , which is the path to where the image we want to process resides on disk.</p>
<p>We then take this image, load it from disk, and pre-process it by applying grayscale conversion, Gaussian smoothing using a <em>5 x 5</em> kernel, and finally thresholding (<strong>Lines 14-17</strong>).</p>
<p>The output of the thresholding operation can be seen below:</p>
<div id="attachment_3623" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2016/01/center_of_contour_thresh.jpg"><img class="wp-image-3623" src="http://www.pyimagesearch.com/wp-content/uploads/2016/01/center_of_contour_thresh.jpg" alt="Figure 2: Thresholding our image returns a binary image, where the shapes appear as white on a black foreground." srcset="http://www.pyimagesearch.com/wp-content/uploads/2016/01/center_of_contour_thresh-300x292.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2016/01/center_of_contour_thresh.jpg 600w" sizes="(max-width: 500px) 100vw, 500px"/></a><p class="wp-caption-text"><strong>Figure 2:</strong> Thresholding our image returns a binary image, where the shapes appear as white on a black foreground.</p></div>
<p>Notice how after applying thresholding the shapes are represented as a<em> white foreground</em> on a <em>black background</em>.</p>
<p>The next step is to find the location of these white regions using contour detection:</p>

		<div id="crayon-56d5a11ba6381846063969" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a11ba6381846063969-19"><span class="crayon-c"># find contours in the thresholded image</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6381846063969-20"><span class="crayon-v">cnts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">findContours</span><span class="crayon-sy">(</span><span class="crayon-v">thresh</span><span class="crayon-sy">.</span><span class="crayon-k ">copy</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">RETR_EXTERNAL</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5a11ba6381846063969-21"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">CHAIN_APPROX_SIMPLE</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba6381846063969-22"><span class="crayon-v">cnts</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cnts</span><span class="crayon-sy">[</span><span class="crayon-cn">0</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">imutils</span><span class="crayon-sy">.</span><span class="crayon-e">is_cv2</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">else</span><span class="crayon-h"> </span><span class="crayon-v">cnts</span><span class="crayon-sy">[</span><span class="crayon-cn">1</span><span class="crayon-sy">]</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>A call to 
			<span id="crayon-56d5a11ba6385649889004" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">findContours</span></span></span>  on <strong>Lines 20 and 21</strong> returns the set of outlines (i.e., contours) that correspond to each of the white blobs on the image. <b>Line 22</b> then grabs the appropriate tuple value based on whether we are using OpenCV 2.4 or OpenCV 3. You can read more about how the return signature of 
			<span id="crayon-56d5a11ba6389286294673" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">findContours</span></span></span>  changed between OpenCV versions <a href="http://www.pyimagesearch.com/2015/08/10/checking-your-opencv-version-using-python/" target="_blank">in this post</a>.</p>
<p>We are now ready to process each of the contours:</p>

		<div id="crayon-56d5a11ba638c399003750" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba638c399003750-24">24</p><p class="crayon-num" data-line="crayon-56d5a11ba638c399003750-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba638c399003750-26">26</p><p class="crayon-num" data-line="crayon-56d5a11ba638c399003750-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba638c399003750-28">28</p><p class="crayon-num" data-line="crayon-56d5a11ba638c399003750-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba638c399003750-30">30</p><p class="crayon-num" data-line="crayon-56d5a11ba638c399003750-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba638c399003750-32">32</p><p class="crayon-num" data-line="crayon-56d5a11ba638c399003750-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba638c399003750-34">34</p><p class="crayon-num" data-line="crayon-56d5a11ba638c399003750-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba638c399003750-36">36</p><p class="crayon-num" data-line="crayon-56d5a11ba638c399003750-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5a11ba638c399003750-38">38</p><p class="crayon-num" data-line="crayon-56d5a11ba638c399003750-39">39</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba638c399003750-24"><span class="crayon-c"># loop over the contours</span></p><p class="crayon-line" id="crayon-56d5a11ba638c399003750-25"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-i">c</span><span class="crayon-h"> </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">cnts</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba638c399003750-26"><span class="crayon-h">	</span><span class="crayon-c"># compute the center of the contour</span></p><p class="crayon-line" id="crayon-56d5a11ba638c399003750-27"><span class="crayon-h">	</span><span class="crayon-v">M</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">moments</span><span class="crayon-sy">(</span><span class="crayon-v">c</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba638c399003750-28"><span class="crayon-h">	</span><span class="crayon-v">cX</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">M</span><span class="crayon-sy">[</span><span class="crayon-s">"m10"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">M</span><span class="crayon-sy">[</span><span class="crayon-s">"m00"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a11ba638c399003750-29"><span class="crayon-h">	</span><span class="crayon-v">cY</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-k ">int</span><span class="crayon-sy">(</span><span class="crayon-v">M</span><span class="crayon-sy">[</span><span class="crayon-s">"m01"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-h"> </span><span class="crayon-v">M</span><span class="crayon-sy">[</span><span class="crayon-s">"m00"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba638c399003750-30"> </p><p class="crayon-line" id="crayon-56d5a11ba638c399003750-31"><span class="crayon-h">	</span><span class="crayon-c"># draw the contour and center of the shape on the image</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba638c399003750-32"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">drawContours</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-v">c</span><span class="crayon-sy">]</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a11ba638c399003750-33"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">circle</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cY</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">7</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba638c399003750-34"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">putText</span><span class="crayon-sy">(</span><span class="crayon-v">image</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"center"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">cX</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cY</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-h"> </span><span class="crayon-cn">20</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5a11ba638c399003750-35"><span class="crayon-h">		</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">FONT_HERSHEY_SIMPLEX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">0.5</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba638c399003750-36"> </p><p class="crayon-line" id="crayon-56d5a11ba638c399003750-37"><span class="crayon-h">	</span><span class="crayon-c"># show the image</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5a11ba638c399003750-38"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">imshow</span><span class="crayon-sy">(</span><span class="crayon-s">"Image"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">image</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5a11ba638c399003750-39"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">waitKey</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>On <strong>Line 25</strong> we start looping over each of the individual contours, followed by computing <a href="https://en.wikipedia.org/wiki/Image_moment" target="_blank">image moments</a> for the contour region on <strong>Line 27</strong>.</p>
<p>In computer vision and image processing, image moments are often used to characterize the shape of an object in an image. These moments capture basic statistical properties of the shape, including the <em>area</em> of the object, the <em>centroid</em> (i.e., the center <em>(x, y)</em>-coordinates of the object), <em>orientation</em>, along with other desirable properties.</p>
<p>Here we are only interested in the <em>center of the contour</em>, which we compute on <strong>Lines 28 and 29</strong>.</p>
<p>From there, <strong>Lines 32-34</strong> handle:</p>
<ul>
<li>Drawing the outline of the contour surrounding the current shape by making a call to 
			<span id="crayon-56d5a11ba6392533342886" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">drawContours</span></span></span> .</li>
<li>Placing a white circle at the <em><strong>center</strong></em> 
			<span id="crayon-56d5a11ba6395409969844" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-sy">(</span><span class="crayon-v">cX</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">cY</span><span class="crayon-sy">)</span></span></span> -coordinates of the shape.</li>
<li>Writing the text 
			<span id="crayon-56d5a11ba6399928342564" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">center</span></span></span>  near the white circle.</li>
</ul>
<p>To execute our script, just open up a terminal and execute the following command:</p>

		<div id="crayon-56d5a11ba639c053275774" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5a11ba639c053275774-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">center_of_shape</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-o">--</span><span class="crayon-e">image </span><span class="crayon-v">shapes_and_colors</span><span class="crayon-e">.png</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Your results should look something like this:</p>
<div id="attachment_3621" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2016/01/center_of_contour_results.gif"><img class="wp-image-3621" src="http://www.pyimagesearch.com/wp-content/uploads/2016/01/center_of_contour_results.gif" alt="Figure 3: Looping over each of the shapes individually and then computing the center (x, y)-coordinates for each shape."/></a><p class="wp-caption-text"><strong>Figure 3:</strong> Looping over each of the shapes individually and then computing the center (x, y)-coordinates for each shape.</p></div>
<p>Notice how each of the shapes are successfully detected, followed by the center of the contour being computed and drawn on the image.</p>
<h2>Summary</h2>
<p>In this lesson, we learned how to compute the center of a contour using OpenCV and Python.</p>
<p>This post is the <em>first</em> in a <em>three part series</em> on <strong>shape analysis</strong>.</p>
<p>In next week’s post, we’ll learn how to <em><strong>identify shapes </strong></em>in an image.</p>
<p>Then, two weeks from now, we’ll learn how to <em><strong>analyze the color of each shape</strong></em> and <strong><em>label the shape with a specific color</em></strong> (i.e., “red”, “green”, “blue”, etc.).</p>
<p>To be notified when these posts go live, <b>be sure to enter your email address using the form below!</b></p>
<h2 id="post_downloads">Downloads:</h2>

	</section>
	</div></body></html>