<html><body><div><section class="post-content">
            <p><a href="http://www.mailgun.com/">Mailgun</a> is an email delivery service which provides a powerful set of APIs that allows users to send, receive, and track email easily.</p>

<p>In this post I will cover the basics of how to send an email with <a href="https://www.python.org/">Python</a> through Mailgun and <a href="https://www.pythonanywhere.com/">PythonAnywhere</a> a popular platform-as-a-service (PaaS) that makes it easy for programmers to create, store and run their software in the cloud.</p>

<p>The first step is to create an account on Mailgun, the registration process is straightforward and you will be ready in no time. After registration go to your control panel, there you will find your API Key and your Sandbox Domain URL, you will need that information for the next step.</p>

<p><img src="https://i.imgur.com/sqQqvdl.png" alt="alt"/></p>

<blockquote>
  <p>Note that after your registration is completed a Sandbox Domain URL will be randomly generated for you, according to Mailgun this Sandbox Domain is restricted to send 300 emails/day and you shouldn't use it in production, <a href="http://documentation.mailgun.com/quickstart-sending.html#verify-your-domain">read here why</a>.</p>
</blockquote>

<p>Now let's see the code part, to run the code locally you will need to have Python 2.6+ and the <a href="https://pypi.python.org/pypi/requests">requests library</a> installed on your machine.</p>

<pre><code class="language-python"># -*- coding: utf-8 -*-
import requests
request=requests.post(
    "https://api.mailgun.net/v2/samples.mailgun.org/messages",
    auth=("api", "key-3ax6xnjp29jd6fds4gc373sgvjxteol0"),
    data={"from": "foo@example.com",
          "to": "bar@example.com",
          "subject": "Hello",
          "text": "Testing some Mailgun awesomness!"})

print "Status: {0}".format(request.status_code)
print "Body:   {0}".format(request.text)</code></pre>

<p>After you run the above script from your terminal, a plain text message will be sent to the recipient of your email, if you want to attach files to the message, you do so by adding the necessary parameters <code>attachment</code> and <code>html</code>. </p>

<pre><code class="language-python"># -*- coding: utf-8 -*-
import requests
request=requests.post(
    'https://api.mailgun.net/v2/samples.mailgun.org/messages',
    auth=("api", "key-3ax6xnjp29jd6fds4gc373sgvjxteol0"),
    files=[("attachment", open("test.jpg"))],
    data={"from":"foo@example.com",
          "to": "bar@example.com",
          "subject": "Hello",
          "text": "Testing some Mailgun awesomness!",
          "html": 'HTML version of the body'})

print 'Status: {0}'.format(request.status_code)
print 'Body:   {0}'.format(request.text)</code></pre>

<p>Mailgun supports many more options, you can see the full list at the <a href="http://documentation.mailgun.com/api-sending.html#api-sending-messages">sending messages</a> section of the <a href="http://documentation.mailgun.com/">Mailgun documentation</a>.</p>

<blockquote>
  <p>Note that if you send a file with your email, you should include the message text as both <code>text</code> and <code>html</code>, on <a href="http://stackoverflow.com/questions/26165999/mailgun-sends-inline-images-but-no-text-pythonmailgun-api?answertab=votes#tab-top">Stack Overflow</a> there is a good explanation on that. </p>
</blockquote>

<p>Now if you are on a computer that doesn't have Python installed, you can use a service like <a href="https://www.pythonanywhere.com/">pythonanywhere.com</a>, PythonAnywhere is a great option for hosting your Python projects.</p>

<p>First create a begginer accound with PythonAnywhere, after registration you will see a list of task helpers, choose the one that says <em>"I want to create a web application"</em>.</p>

<p><img src="https://i.imgur.com/rjgtzJ4.png" alt="alt"/></p>

<p>This will get you to your dashboard page, from there choose the files tab and upload your Python script, as you can see in the image I call it mailgun.py.</p>

<p><img src="https://i.imgur.com/uok7qsT.png" alt="alt"/></p>

<p>By clicking on it a web-based editor will open displaying your script, do any needed changes and click the <em>"Save &amp; Run"</em> button on the top right of your screen.</p>

<p><img src="https://i.imgur.com/9JZaWXL.png" alt="alt"/></p>

<p>That's it, a web-based terminal will open and your script will be executed, you will also get a success response similar to this:  </p>

<pre><code class="language-python">Status: 200
Body: {
"message": "Queued. Thank you.",
"id": "20141010155632.49995.60063@samples.mailgun.org&gt;"
}
&gt;&gt;&gt; </code></pre>

<p>Mailgun provides much more from what is described here, to learn more about the full capabilities of Mailgun, take a look at the <a href="http://documentation.mailgun.com">Mailgun documentation</a>.  </p>

<p>References</p>


        </section>

        </div></body></html>