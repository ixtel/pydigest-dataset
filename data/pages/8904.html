<html><body><div><div class=" highlight hl-ipython3"><pre><span/><span class="k">def</span> <span class="nf">sames</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span> <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">A</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">test</span><span class="p">():</span>
    <span class="s2">"Unit tests."</span>
    <span class="k">assert</span> <span class="n">is_word</span><span class="p">(</span><span class="s1">'WORD'</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">is_word</span><span class="p">(</span><span class="s1">'LETTERs'</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">is_word</span><span class="p">(</span><span class="s1">'ETHyLENEDIAMINETETRAACETATES'</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">is_word</span><span class="p">(</span><span class="s1">'ALFABET'</span><span class="p">)</span>
    
    <span class="n">rack</span> <span class="o">=</span> <span class="s1">'ABCHKNQ'</span>
    
    <span class="k">assert</span> <span class="n">sames</span><span class="p">(</span><span class="n">letters</span><span class="p">(</span><span class="n">rack</span><span class="p">),</span> <span class="n">rack</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">sames</span><span class="p">(</span><span class="n">letters</span><span class="p">(</span><span class="s1">'ABAC_'</span><span class="p">),</span> <span class="s1">'ABCabcdefghijklmnopqrstuvwxyz'</span><span class="p">)</span>
    
    <span class="k">assert</span> <span class="n">dict_prefixes</span><span class="p">({</span><span class="s1">'HELLO'</span><span class="p">,</span> <span class="s1">'HELP'</span><span class="p">,</span> <span class="s1">'HELPER'</span><span class="p">})</span> <span class="o">==</span> <span class="p">{</span>
        <span class="s1">''</span><span class="p">,</span> <span class="s1">'H'</span><span class="p">,</span> <span class="s1">'HE'</span><span class="p">,</span> <span class="s1">'HEL'</span><span class="p">,</span> <span class="s1">'HELL'</span><span class="p">,</span> <span class="s1">'HELP'</span><span class="p">,</span> <span class="s1">'HELPE'</span><span class="p">}</span>
    
    <span class="k">assert</span> <span class="n">rack_prefixes</span><span class="p">(</span><span class="s1">'ABC'</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">''</span><span class="p">,</span> <span class="s1">'A'</span><span class="p">,</span> <span class="s1">'AB'</span><span class="p">,</span> <span class="s1">'AC'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'BA'</span><span class="p">,</span> <span class="s1">'BAC'</span><span class="p">,</span> <span class="s1">'C'</span><span class="p">,</span> <span class="s1">'CA'</span><span class="p">,</span> <span class="s1">'CAB'</span><span class="p">}</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">rack_prefixes</span><span class="p">(</span><span class="s1">'LETTERS'</span><span class="p">))</span> <span class="o">==</span> <span class="mi">155</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">rack_prefixes</span><span class="p">(</span><span class="s1">'LETTER_'</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1590</span>
    
    <span class="n">DOWN</span> <span class="o">=</span> <span class="n">WWF</span><span class="o">.</span><span class="n">down</span>
    <span class="n">plays</span> <span class="o">=</span> <span class="p">{</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">145</span><span class="p">,</span> <span class="n">DOWN</span><span class="p">,</span>   <span class="s1">'ENTER'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">,</span> <span class="s1">'BE'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">138</span><span class="p">,</span> <span class="n">DOWN</span><span class="p">,</span>   <span class="s1">'GAVE'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">158</span><span class="p">,</span> <span class="n">DOWN</span><span class="p">,</span>   <span class="s1">'MUSES'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">172</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">,</span> <span class="s1">'VIRULeNT'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">213</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">,</span> <span class="s1">'RED'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">198</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">,</span> <span class="s1">'LYTHE'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">147</span><span class="p">,</span> <span class="n">DOWN</span><span class="p">,</span>   <span class="s1">'CHILDREN'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">164</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">,</span> <span class="s1">'HEARD'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">117</span><span class="p">,</span> <span class="n">DOWN</span><span class="p">,</span>   <span class="s1">'BRIDLES'</span><span class="p">,</span> <span class="s1">''</span><span class="p">),</span>
         <span class="n">Play</span><span class="p">(</span><span class="mi">131</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">,</span> <span class="s1">'TOUR'</span><span class="p">,</span> <span class="s1">''</span><span class="p">)}</span>

    <span class="n">board</span> <span class="o">=</span> <span class="n">Board</span><span class="p">(</span><span class="n">WWF</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">play</span> <span class="ow">in</span> <span class="n">plays</span><span class="p">:</span>
        <span class="n">board</span> <span class="o">=</span> <span class="n">make_play</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">play</span><span class="p">)</span>
        
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">WWF</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">board</span><span class="p">)</span> <span class="o">==</span> <span class="mi">17</span> <span class="o">*</span> <span class="mi">17</span>
    <span class="k">assert</span> <span class="n">all_anchors</span><span class="p">(</span><span class="n">WWF</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">144</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">all_anchors</span><span class="p">(</span><span class="n">board</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span>
        <span class="mi">100</span><span class="p">,</span> <span class="mi">114</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">121</span><span class="p">,</span> <span class="mi">127</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">137</span><span class="p">,</span> <span class="mi">139</span><span class="p">,</span> <span class="mi">141</span><span class="p">,</span> <span class="mi">143</span><span class="p">,</span> <span class="mi">146</span><span class="p">,</span> <span class="mi">148</span><span class="p">,</span> <span class="mi">149</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">154</span><span class="p">,</span> <span class="mi">156</span><span class="p">,</span> <span class="mi">157</span><span class="p">,</span> <span class="mi">159</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> 
        <span class="mi">161</span><span class="p">,</span> <span class="mi">163</span><span class="p">,</span> <span class="mi">171</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">182</span><span class="p">,</span> <span class="mi">183</span><span class="p">,</span> <span class="mi">184</span><span class="p">,</span> <span class="mi">188</span><span class="p">,</span> <span class="mi">190</span><span class="p">,</span> <span class="mi">191</span><span class="p">,</span> <span class="mi">193</span><span class="p">,</span> <span class="mi">194</span><span class="p">,</span> <span class="mi">195</span><span class="p">,</span> <span class="mi">197</span><span class="p">,</span> <span class="mi">206</span><span class="p">,</span> <span class="mi">208</span><span class="p">,</span> <span class="mi">210</span><span class="p">,</span> <span class="mi">212</span><span class="p">,</span> <span class="mi">216</span><span class="p">,</span> <span class="mi">217</span><span class="p">,</span> <span class="mi">218</span><span class="p">,</span> 
        <span class="mi">225</span><span class="p">,</span> <span class="mi">227</span><span class="p">,</span> <span class="mi">230</span><span class="p">,</span> <span class="mi">231</span><span class="p">,</span> <span class="mi">233</span><span class="p">,</span> <span class="mi">236</span><span class="p">,</span> <span class="mi">243</span><span class="p">,</span> <span class="mi">248</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">265</span><span class="p">,</span> <span class="mi">267</span><span class="p">]</span>
    
    <span class="k">assert</span> <span class="n">crossword</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="mi">141</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'.MUSES'</span>
    <span class="k">assert</span> <span class="n">crossword</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="mi">148</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'T.E'</span>
    <span class="k">assert</span> <span class="n">valid_crossword</span><span class="p">(</span><span class="s1">'.MUSES'</span><span class="p">,</span> <span class="s1">'A'</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">valid_crossword</span><span class="p">(</span><span class="s1">'.MUSES'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">)</span>
    
    <span class="k">assert</span> <span class="n">sames</span><span class="p">(</span><span class="n">prefix_plays</span><span class="p">(</span><span class="n">rack_prefixes</span><span class="p">(</span><span class="n">rack</span><span class="p">),</span> <span class="n">board</span><span class="p">,</span> <span class="mi">141</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rack</span><span class="p">),</span>
                 <span class="p">[</span><span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">141</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'ABCHKNQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'C'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'ABHKNQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'K'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'ABCHNQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'B'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'ACHKNQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'A'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'BCHKNQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'H'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'ABCKNQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'N'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'ABCHKQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'Q'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'ABCHKN'</span><span class="p">)])</span>
    
    <span class="k">assert</span> <span class="n">sames</span><span class="p">(</span><span class="n">extend_play</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'B'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'ACHKNQ'</span><span class="p">)),</span>
                 <span class="p">{</span><span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'BA'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'CHKNQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'BACKBENCH'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'Q'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'BAH'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'CKNQ'</span><span class="p">),</span>
                  <span class="n">Play</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">140</span><span class="p">,</span> <span class="nb">dir</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">letters</span><span class="o">=</span><span class="s1">'BAN'</span><span class="p">,</span> <span class="n">rack</span><span class="o">=</span><span class="s1">'CHKQ'</span><span class="p">)})</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">BAG</span><span class="p">)</span> <span class="o">==</span> <span class="mi">100</span>
    
    <span class="k">assert</span> <span class="n">replenish</span><span class="p">(</span><span class="s1">'RACK'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'X'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">,</span> <span class="s1">'A'</span><span class="p">,</span> <span class="s1">'G'</span><span class="p">])</span> <span class="o">==</span> <span class="s1">'RACKGAB'</span>
    <span class="k">assert</span> <span class="n">replenish</span><span class="p">(</span><span class="s1">'RACK'</span><span class="p">,</span> <span class="p">[])</span> <span class="o">==</span> <span class="s1">'RACK'</span>
    <span class="k">assert</span> <span class="n">replenish</span><span class="p">(</span><span class="s1">'RACK'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'A'</span><span class="p">,</span> <span class="s1">'B'</span><span class="p">])</span> <span class="o">==</span> <span class="s1">'RACKBA'</span>
    
    <span class="k">assert</span> <span class="n">score</span><span class="p">(</span><span class="n">WWF</span><span class="p">,</span> <span class="n">Play</span><span class="p">(</span><span class="mi">144</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">,</span> <span class="s1">'BE'</span><span class="p">,</span> <span class="s1">''</span><span class="p">))</span> <span class="o">==</span> <span class="p">(</span><span class="mi">3</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">score</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">Play</span><span class="p">(</span><span class="mi">140</span><span class="p">,</span> <span class="n">ACROSS</span><span class="p">,</span> <span class="s1">'BACKBENCH'</span><span class="p">,</span> <span class="s1">'Q'</span><span class="p">))</span> <span class="o">==</span> <span class="mi">116</span>
    
    <span class="k">return</span> <span class="s1">'ok'</span>

<span class="n">test</span><span class="p">()</span>
</pre></div>

</div></body></html>