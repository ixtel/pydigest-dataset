<html><body><div><div class="post-body entry-content"><p>
Возился минут 10 пытаясь подобрать правильный способ прописать каталоги исключенные из coverage отчета для jenkins, залез в код и выяснил, что правильно определять полный путь до каталога, а не как в обсуждении на </p><a href="http://stackoverflow.com/questions/14451442/how-to-exclude-directory-or-files-from-coverage-report" rel="nofollow" target="_blank">stackoverflow</a><p>. Пора бы уже привыкнуть лезть в код раньше, чем на стэк =).</p><p>
Вот кусок конфига для django + django-jenkins с покрытием:
</p><pre><span class="kn">import</span> <span class="nn">os</span>


<span class="n">BASE_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">))</span>

<span class="c"># ...</span>

<span class="n">PROJECT_APPS</span> <span class="o">=</span> <span class="p">(</span><span class="s">'myapp'</span><span class="p">,</span> <span class="p">)</span>

<span class="n">JENKINS_TASKS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">'django_jenkins.tasks.run_pylint'</span><span class="p">,</span>
    <span class="s">'django_jenkins.tasks.run_pep8'</span><span class="p">,</span>
    <span class="s">'django_jenkins.tasks.run_pyflakes'</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">COVERAGE_EXCLUDES_FOLDERS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s">'myapp'</span><span class="p">,</span> <span class="s">'tests'</span><span class="p">)</span>
<span class="p">]</span></pre>
<p>
Запускаются такие тесты так:
</p><div class="hlcode">
<div class="syntax">
<pre>python manage.py jenkins --enable-coverage</pre>
</div>
</div>
<p/>
</div>
</div></body></html>