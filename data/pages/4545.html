<html><body><div><div class="col-md-12">
				<p>In the <a href="https://www.twilio.com/blog/2015/03/choose-your-own-adventures-presentations-wizard-mode-part-1-of-3.html">first part of our Choose Your Own Adventure Presentations Wizard Mode</a> tutorial we set up the necessary code for separating authorized wizards from non-wizards. However, logging in and out of an application isn’t very magical. It’s time to write write some new spells in Wizards Only mode to allow us to deftly manipulate our presentations.</p>
<h3>Even Wizards Need Web Forms</h3>
<p>The Wizards Only mode interface we’re creating throughout this post will grant us the ability to see which presentations are available as well as create and edit metadata, such as whether a presentation is visible or invisible to non-wizards.</p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2015/05/image05.png"><img src="https://www.twilio.com/blog/wp-content/uploads/2015/05/image05-1024x334.png" alt="image05" class="aligncenter size-large wp-image-15111"/></a><br/>
Time to get coding and create for our Wizards Only mode.</p>
<h3>What We’ll Need</h3>
<p>If you followed along with <a href="https://www.twilio.com/blog/2015/03/choose-your-own-adventures-presentations-wizard-mode-part-1-of-3.html">part 1</a> of this series then you’ve already set up all of the dependencies and the database connections we’ll need for this part of the tutorial.</p>
<p>If you haven’t read part 1 yet, that’s okay. Here’s a quick recap of what we used to build the application so far.</p>
<ul>
<li><a href="http://www.postgresql.org/">PostgreSQL</a> for persistent storage. We used PostgreSQL in part 1 and will expand our usage in this post.</li>
<li>The <a href="http://initd.org/psycopg/">psycopg2</a> Python driver to connect to PostgreSQL. Psycopg2 will continue to drive the connect between our web application and the database.</li>
<li><a href="https://flask-login.readthedocs.org/en/latest/">Flask-login</a> for authentication. In this post we’ll use Flask-login to protect Wizard Only pages.</li>
<li><a href="https://flask-wtf.readthedocs.org/en/latest/">Flask-WTF</a> for web form handling. We’re creating a bunch of new pages in this post so we’ll use Flask-WTF extensively in the following sections.</li>
</ul>
<p>You can get caught up with us by working through the code in part 1 or just clone the CYOA Presentations repository <a href="https://github.com/makaimc/choose-your-own-adventure-presentations/tree/tutorial-step-4">tutorial-step-4</a> tag stage. Here are the commands to execute if you’re going for the latter option</p>

		<div id="crayon-56d5b9df8f61f507139675" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f61f507139675-1"><span class="crayon-e">git </span><span class="crayon-r">clone</span><span class="crayon-h"> </span><span class="crayon-v">git</span><span class="crayon-sy">@</span><span class="crayon-v">github</span><span class="crayon-e">.com</span><span class="crayon-o">:</span><span class="crayon-v">makaimc</span><span class="crayon-o">/</span><span class="crayon-v">choose</span><span class="crayon-o">-</span><span class="crayon-v">your</span><span class="crayon-o">-</span><span class="crayon-v">own</span><span class="crayon-o">-</span><span class="crayon-v">adventure</span><span class="crayon-o">-</span><span class="crayon-e">presentations</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f61f507139675-2"><span class="crayon-r">cd</span><span class="crayon-h"> </span><span class="crayon-v">choose</span><span class="crayon-o">-</span><span class="crayon-v">your</span><span class="crayon-o">-</span><span class="crayon-v">own</span><span class="crayon-o">-</span><span class="crayon-v">adventure</span><span class="crayon-o">-</span><span class="crayon-e">presentations</span></p><p class="crayon-line" id="crayon-56d5b9df8f61f507139675-3"><span class="crayon-e">git </span><span class="crayon-v">checkout</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">b</span><span class="crayon-h"> </span><span class="crayon-e">tutorial </span><span class="crayon-v">tags</span><span class="crayon-o">/</span><span class="crayon-v">tutorial</span><span class="crayon-o">-</span><span class="crayon-v">step</span><span class="crayon-o">-</span><span class="crayon-cn">4</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>If you need help setting up your virtualenv and environment variables for the project, there are detailed steps and explanations for each variable shown in <a href="https://www.twilio.com/blog/2015/03/choose-your-own-adventures-presentations-wizard-mode-part-1-of-3.html">part 1 of this tutorial</a>. Note that if you make a typo somewhere along the way in this post, you can compare your version with the <a href="https://github.com/makaimc/choose-your-own-adventure-presentations/tree/tutorial-step-5">tutorial-step-5</a> tag.</p>
<h3>A New Wizards’ Landing Page</h3>
<p>The landing page we created in part 1 is just a stub that’s not worthy of wizards who access our application.</p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2015/05/image00.png"><img src="https://www.twilio.com/blog/wp-content/uploads/2015/05/image00-1024x201.png" alt="image00" class="aligncenter size-large wp-image-15106"/></a><br/>
To make the Wizards Only mode functional we’ll build a new landing page that lists every presentation we’ve created through this user interface. </p>
<p>Start by opening <code>cyoa/views.py</code> and delete the placeholder <code>wizard_landing</code> function.</p>

		<div id="crayon-56d5b9df8f635709914164" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f635709914164-1"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentations/'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f635709914164-2"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line" id="crayon-56d5b9df8f635709914164-3"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_landing</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f635709914164-4"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-s">'wizard/presentations.html'</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Next, replace what we just deleted in <code>views.py</code> by creating a new file named <code>cyoa/wizard_views.py</code> and populating it with the following code.</p>

		<div id="crayon-56d5b9df8f63f237134773" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-2">2</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-4">4</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-6">6</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-8">8</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-10">10</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-12">12</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-14">14</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-16">16</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-18">18</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-20">20</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-22">22</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-24">24</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-26">26</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-28">28</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-30">30</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-32">32</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-34">34</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-36">36</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-38">38</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-40">40</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-42">42</p><p class="crayon-num" data-line="crayon-56d5b9df8f63f237134773-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f63f237134773-44">44</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">flask </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">render_template</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">redirect</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">url_for</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">flask</span><span class="crayon-sy">.</span><span class="crayon-v">ext</span><span class="crayon-sy">.</span><span class="crayon-e">login </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">login_required</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-3"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">app</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-i">db</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-6"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentations/'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-7"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-8"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_list_presentations</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-9"><span class="crayon-h">    </span><span class="crayon-v">presentations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-sy">]</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-10"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-s">'wizard/presentations.html'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-11"><span class="crayon-h">                           </span><span class="crayon-v">presentations</span><span class="crayon-o">=</span><span class="crayon-v">presentations</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-12"> </p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-13"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentation/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-14"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-15"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_new_presentation</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-16"><span class="crayon-h">    </span><span class="crayon-r">pass</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-17"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-18"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentation/&lt;int:id&gt;/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-19"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-20"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_edit_presentation</span><span class="crayon-sy">(</span><span class="crayon-k ">id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-21"><span class="crayon-h">    </span><span class="crayon-r">pass</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-22"> </p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-23"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentation/&lt;int:pres_id&gt;/decisions/'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-24"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-25"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_list_presentation_decisions</span><span class="crayon-sy">(</span><span class="crayon-v">pres_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-26"><span class="crayon-h">    </span><span class="crayon-r">pass</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-27"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-28"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentation/&lt;int:pres_id&gt;/decision/'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-29"><span class="crayon-h">           </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-30"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-31"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_new_decision</span><span class="crayon-sy">(</span><span class="crayon-v">pres_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-32"><span class="crayon-h">    </span><span class="crayon-r">pass</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-33"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-34"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentation/&lt;int:presentation_id&gt;/decision/'</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-35"><span class="crayon-h">           </span><span class="crayon-s">'&lt;int:decision_id&gt;/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-36"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-37"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_edit_decision</span><span class="crayon-sy">(</span><span class="crayon-v">presentation_id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">decision_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-38"><span class="crayon-h">	</span><span class="crayon-r">pass</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-39"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-40"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentation/&lt;int:pres_id&gt;/decision/'</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-41"><span class="crayon-h">           </span><span class="crayon-s">'&lt;int:decision_id&gt;/delete/'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-42"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line" id="crayon-56d5b9df8f63f237134773-43"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_delete_decision</span><span class="crayon-sy">(</span><span class="crayon-v">pres_id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">decision_id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f63f237134773-44"><span class="crayon-h">    </span><span class="crayon-r">pass</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>With the exception of the <code>wizard_list_presentations</code> function, every function above with the pass keyword in its body is just a stub for now. We’ll flesh out those functions with code throughout the remainder of this post and also later in part 3 of the tutorial. For now we need them stubbed because otherwise the <code>url_for</code> function in our redirects and templates will not be able to look up the appropriate URL paths.</p>
<p>Go back to the <code>cyoa/views.py</code> file. Edit the <code>return redirect</code> line shown below so it calls the new <code>wizard_list_presentations</code> function instead of <code>wizard_landing</code>.</p>

		<div id="crayon-56d5b9df8f64b208922971" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f64b208922971-1"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f64b208922971-2"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">sign_in</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b9df8f64b208922971-3"><span class="crayon-h">    </span><span class="crayon-v">form</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">LoginForm</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f64b208922971-4"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">form</span><span class="crayon-sy">.</span><span class="crayon-e">validate_on_submit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b9df8f64b208922971-5"><span class="crayon-h">        </span><span class="crayon-v">wizard</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Wizard</span><span class="crayon-sy">.</span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-e">filter_by</span><span class="crayon-sy">(</span><span class="crayon-v">wizard_name</span><span class="crayon-o">=</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f64b208922971-6"><span class="crayon-h">                                        </span><span class="crayon-v">form</span><span class="crayon-sy">.</span><span class="crayon-v">wizard_name</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">first</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f64b208922971-7"><span class="crayon-h">        </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-e">wizard </span><span class="crayon-st">is</span><span class="crayon-h"> </span><span class="crayon-st">not</span><span class="crayon-h"> </span><span class="crayon-t">None</span><span class="crayon-h"> </span><span class="crayon-st">and</span><span class="crayon-h"> </span><span class="crayon-v">wizard</span><span class="crayon-sy">.</span><span class="crayon-e">verify_password</span><span class="crayon-sy">(</span><span class="crayon-v">form</span><span class="crayon-sy">.</span><span class="crayon-v">password</span><span class="crayon-sy">.</span><span class="crayon-v">data</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f64b208922971-8"><span class="crayon-h">            </span><span class="crayon-e">login_user</span><span class="crayon-sy">(</span><span class="crayon-v">wizard</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5b9df8f64b208922971-9"><span class="crayon-h">            </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">redirect</span><span class="crayon-sy">(</span><span class="crayon-e">url_for</span><span class="crayon-sy">(</span><span class="crayon-s">'wizard_list_presentations'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f64b208922971-10"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-s">'wizard/sign_in.html'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">form</span><span class="crayon-o">=</span><span class="crayon-v">form</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">no_nav</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Our Flask application needs to access the new <code>wizard_views.py</code> functions. Add this single line to the end of the <code>cyoa/__init__.py</code> file to make that happen:</p>

		<div id="crayon-56d5b9df8f655494198084" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line crayon-marked-line crayon-top crayon-bottom" id="crayon-56d5b9df8f655494198084-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">wizard_views</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>The templates for our new landing page don’t exist yet, so let’s create them now. Create a new file <code>cyoa/templates/nav.html</code> and insert the HTML template markup below.</p>

		<div id="crayon-56d5b9df8f65f363310332" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f65f363310332-2">2</p><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f65f363310332-4">4</p><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f65f363310332-6">6</p><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f65f363310332-8">8</p><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f65f363310332-10">10</p><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f65f363310332-12">12</p><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f65f363310332-14">14</p><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f65f363310332-16">16</p><p class="crayon-num" data-line="crayon-56d5b9df8f65f363310332-17">17</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-1"><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"container"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f65f363310332-2"><span class="crayon-i ">  </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"navbar navbar-default"</span><span class="crayon-h"> </span><span class="crayon-e ">role</span><span class="crayon-o">=</span><span class="crayon-s ">"navigation"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-3"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"container-fluid"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f65f363310332-4"><span class="crayon-i ">      </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"navbar-header"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-5"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;a </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"navbar-brand"</span><span class="crayon-h"> </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('wizard_list_presentations') }}"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">Wizards Only</span><span class="crayon-r ">&lt;/a&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f65f363310332-6"><span class="crayon-i ">      </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-7"><span class="crayon-i ">      </span><span class="crayon-r ">&lt;div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f65f363310332-8"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;ul </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"nav navbar-nav"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-9"><span class="crayon-i ">          </span><span class="crayon-r ">&lt;li&gt;</span><span class="crayon-r ">&lt;a </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('wizard_list_presentations') }}"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">Presentations</span><span class="crayon-r ">&lt;/a&gt;</span><span class="crayon-r ">&lt;/li&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f65f363310332-10"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;/ul&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-11"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;ul </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"nav navbar-nav navbar-right"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f65f363310332-12"><span class="crayon-i ">          </span><span class="crayon-r ">&lt;li&gt;</span><span class="crayon-r ">&lt;a </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('sign_out') }}"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">Sign out</span><span class="crayon-r ">&lt;/a&gt;</span><span class="crayon-r ">&lt;/li&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-13"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;/ul&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f65f363310332-14"><span class="crayon-i ">      </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-15"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f65f363310332-16"><span class="crayon-i ">  </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f65f363310332-17"><span class="crayon-r ">&lt;/div&gt;</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>The above template file is a navigation bar that will be included on logged in Wizard Only pages. You’ll see the template tag <code>{% include "nav.html" %}</code> in every template that needs to display the navigation bar at the top of the webpage.</p>
<p>Next up we need to modify the temporary markup in the landing page template file so it displays the presentations we will create through the Wizards Only user interface. Replace the temporary code found in <code>cyoa/templates/wizard/presentations.html</code> with the following HTML template markup.</p>

		<div id="crayon-56d5b9df8f669177926558" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-2">2</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-4">4</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-6">6</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-8">8</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-10">10</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-12">12</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-14">14</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-16">16</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-18">18</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-20">20</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-22">22</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-24">24</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-26">26</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-28">28</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-30">30</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-32">32</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-34">34</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-36">36</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-37">37</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-38">38</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-39">39</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-40">40</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-41">41</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-42">42</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-43">43</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-44">44</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-45">45</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f669177926558-46">46</p><p class="crayon-num" data-line="crayon-56d5b9df8f669177926558-47">47</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f669177926558-1"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>extends<span class="crayon-h"> </span><span class="crayon-s ">"base.html"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-2"> </p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-3"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>block<span class="crayon-h"> </span>nav<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-4"><span class="crayon-h">    </span><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>include<span class="crayon-h"> </span><span class="crayon-s ">"nav.html"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-5"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>endblock<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-6"> </p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-7"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>block<span class="crayon-h"> </span>content<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-8"><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"container"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-9"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"row"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-10"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"col-md-10"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-11"><span class="crayon-i ">            </span><span class="crayon-r ">&lt;h1&gt;</span><span class="crayon-i ">Presentations</span><span class="crayon-r ">&lt;/h1&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-12"><span class="crayon-i ">            {% if not presentations %}</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-13"><span class="crayon-i ">                No presentations found. </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-14"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;a </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('wizard_new_presentation') }}"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">Create your first one</span><span class="crayon-r ">&lt;/a&gt;</span><span class="crayon-i ">.</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-15"><span class="crayon-i ">            {% else %}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-16"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;table </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"table"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-17"><span class="crayon-i ">                    </span><span class="crayon-r ">&lt;thead&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-18"><span class="crayon-i ">                        </span><span class="crayon-r ">&lt;tr&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-19"><span class="crayon-i ">                            </span><span class="crayon-r ">&lt;th&gt;</span><span class="crayon-i ">Name</span><span class="crayon-r ">&lt;/th&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-20"><span class="crayon-i ">                            </span><span class="crayon-r ">&lt;th&gt;</span><span class="crayon-i ">Is Visible?</span><span class="crayon-r ">&lt;/th&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-21"><span class="crayon-i ">                            </span><span class="crayon-r ">&lt;th&gt;</span><span class="crayon-i ">Web browser voting?</span><span class="crayon-r ">&lt;/th&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-22"><span class="crayon-i ">                        </span><span class="crayon-r ">&lt;/tr&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-23"><span class="crayon-i ">                    </span><span class="crayon-r ">&lt;/thead&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-24"><span class="crayon-i ">                    </span><span class="crayon-r ">&lt;tbody&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-25"><span class="crayon-i ">                    {% for p in presentations %}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-26"><span class="crayon-i ">                        </span><span class="crayon-r ">&lt;tr&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-27"><span class="crayon-i ">                            </span><span class="crayon-r ">&lt;td&gt;</span><span class="crayon-r ">&lt;a </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('wizard_edit_presentation', id=p.id) }}"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">{{ p.name }}</span><span class="crayon-r ">&lt;/a&gt;</span><span class="crayon-r ">&lt;/td&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-28"><span class="crayon-i ">                            </span><span class="crayon-r ">&lt;td&gt;</span><span class="crayon-i ">{{ p.is_visible }}</span><span class="crayon-r ">&lt;/td&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-29"><span class="crayon-i ">                            </span><span class="crayon-r ">&lt;td&gt;</span><span class="crayon-r ">&lt;a </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('wizard_list_presentation_decisions', pres_id=p.id) }}"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">Manage choices</span><span class="crayon-r ">&lt;/a&gt;</span><span class="crayon-r ">&lt;/td&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-30"><span class="crayon-i ">                        </span><span class="crayon-r ">&lt;/tr&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-31"><span class="crayon-i ">                    {% endfor %}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-32"><span class="crayon-i ">                    </span><span class="crayon-r ">&lt;/tbody&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-33"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;/table&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-34"><span class="crayon-i ">            {% endif %}</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-35"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-36"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-37"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"row"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-38"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"col-md-10"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-39"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"btn-top-margin"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-40"><span class="crayon-i ">                    </span><span class="crayon-r ">&lt;a </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('wizard_new_presentation') }}"</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-41"><span class="crayon-h">                       </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"btn btn-primary"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">New Presentation</span><span class="crayon-r ">&lt;/a&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-42"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-43"><span class="crayon-i ">            </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-44"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-45"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f669177926558-46"><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f669177926558-47"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>endblock<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>In the above markup we check the <code>presentations</code> object passed into the template to determine if one or more presentations exist. If not, Flask renders the template with a “No presentations found.” message and a link to create the first presentation. If one or more presentation objects do exist, a table is rendered with the name of the presentation, whether it’s visible to non-wizard users and whether or not we’ve enabled web browser voting (which we will code in part 3).</p>
<p>Time to test out the current state of our application to make sure it’s working properly. Make sure your virtualenv is activated and environment variables are set as we established in part 1 of the tutorial. From the base directory of our project, start the dev server with the <code>python manage.py runserver</code> command.</p>

		<div id="crayon-56d5b9df8f675841103580" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f675841103580-1"><span class="crayon-sy">(</span><span class="crayon-v">cyoa</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-v">runserver</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f675841103580-2"><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">Running </span><span class="crayon-e">on </span><span class="crayon-v">http</span><span class="crayon-o">:</span><span class="crayon-o">/</span><span class="crayon-o">/</span><span class="crayon-cn">0.0.0.0</span><span class="crayon-o">:</span><span class="crayon-cn">5001</span><span class="crayon-o">/</span></p><p class="crayon-line" id="crayon-56d5b9df8f675841103580-3"><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">Restarting </span><span class="crayon-e">with </span><span class="crayon-v">stat</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>If your development server does not start up properly, make sure you’ve executed <code>pip install -r requirements.txt</code> to have all the dependencies the server requires. Occasionally there are issues installing the required <code>gevent</code> library the first time the dependencies are obtained via <code>pip</code>.</p>
<p>Open <a href="http://localhost:5001/wizard/">http://localhost:5001/wizard/</a> in your web browser. You should see the unchanged Wizards Only sign in page. Log in with your existing Wizard credentials created in part 1. The suggested credentials for part 1 were “gandalf” for the wizard name and “thegrey” for the password.</p>
<p>When you get into the application, the presentations.html template combined with our existing <code>base.html</code> and new <code>nav.html</code> will create a new landing screen that looks like this:</p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2015/05/image03.png"><img src="https://www.twilio.com/blog/wp-content/uploads/2015/05/image03-1024x202.png" alt="image03" class="aligncenter size-large wp-image-15109"/></a></p>
<p>However, we haven’t written any code to power the “Create your first one” link and “New Presentation” buttons yet. If we click on the “New Presentation” button, we’ll get a <code>ValueError</code> like we see in the screenshot below because that view does not return a response.</p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2015/05/image07.png"><img src="https://www.twilio.com/blog/wp-content/uploads/2015/05/image07-1024x426.png" alt="image07" class="aligncenter size-large wp-image-15113"/></a><br/>
Let’s handle creating and editing presentations next.</p>
<h3>Creating and Modifying Presentation Metadata</h3>
<p>We built a page to display all presentations to logged in Wizards, but there’s currently no way to add or edit presentation metadata. Why are we using the term “metadata” instead of just saying “presentations”? This Wizards Only user interface is only used to create and edit the presentations’ information in the application, not the presentation files themselves. In other words, we’re modifying the presentation metadata, not the HTML markup within the presentations. As we’ll see later in the post, our application will use the metadata to look in the <code>cyoa/templates/presentations</code> folder for a filename associated with a visible presentation.</p>
<p>Open up <code>cyoa/models.py</code> and append the following code at the end of the file.</p>

		<div id="crayon-56d5b9df8f681915520875" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f681915520875-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">Presentation</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">Model</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f681915520875-2"><span class="crayon-h">    </span><span class="crayon-s">"""</span></p><p class="crayon-line" id="crayon-56d5b9df8f681915520875-3"><span class="crayon-s">        Contains data regarding a single presentation.</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f681915520875-4"><span class="crayon-s">    """</span></p><p class="crayon-line" id="crayon-56d5b9df8f681915520875-5"><span class="crayon-h">    </span><span class="crayon-v">__tablename__</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'presentations'</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f681915520875-6"><span class="crayon-h">    </span><span class="crayon-k ">id</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">Integer</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">primary_key</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f681915520875-7"><span class="crayon-h">    </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-k ">String</span><span class="crayon-sy">(</span><span class="crayon-cn">64</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">unique</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f681915520875-8"><span class="crayon-h">    </span><span class="crayon-v">slug</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-k ">String</span><span class="crayon-sy">(</span><span class="crayon-cn">128</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">unique</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f681915520875-9"><span class="crayon-h">    </span><span class="crayon-v">filename</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-k ">String</span><span class="crayon-sy">(</span><span class="crayon-cn">256</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f681915520875-10"><span class="crayon-h">    </span><span class="crayon-v">is_visible</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-e">Column</span><span class="crayon-sy">(</span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">Boolean</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">default</span><span class="crayon-o">=</span><span class="crayon-t">False</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f681915520875-11"><span class="crayon-h">    </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f681915520875-12"><span class="crayon-h">    </span><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">__repr__</span><span class="crayon-sy">(</span><span class="crayon-r">self</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b9df8f681915520875-13"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-s">'&lt;Presentation %r&gt;'</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-r">self</span><span class="crayon-sy">.</span><span class="crayon-v">name</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>The above <code>Presentation</code> class is a SQLAlchemy database model. Just like with our <code>Wizard</code> model, this model maps a Python object to the database table <code>presentations</code> and allows our application to create, read, update and delete rows in the database for that table.</p>
<p>We also need a new form to handle the creating and editing of presentation metadata. We’ll store this form in the <code>cyoa/forms.py</code> file.</p>

		<div id="crayon-56d5b9df8f68b525057220" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f68b525057220-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">PresentationForm</span><span class="crayon-sy">(</span><span class="crayon-v">Form</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f68b525057220-2"><span class="crayon-h">    </span><span class="crayon-v">name</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">StringField</span><span class="crayon-sy">(</span><span class="crayon-s">'Presentation name'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">validators</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-e">Required</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5b9df8f68b525057220-3"><span class="crayon-h">                                                        </span><span class="crayon-e">Length</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">60</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f68b525057220-4"><span class="crayon-h">    </span><span class="crayon-v">filename</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">StringField</span><span class="crayon-sy">(</span><span class="crayon-s">'File name'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">validators</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-e">Required</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5b9df8f68b525057220-5"><span class="crayon-h">                                                    </span><span class="crayon-e">Length</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f68b525057220-6"><span class="crayon-h">    </span><span class="crayon-v">slug</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">StringField</span><span class="crayon-sy">(</span><span class="crayon-s">'URL slug'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">validators</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-e">Required</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5b9df8f68b525057220-7"><span class="crayon-h">                                               </span><span class="crayon-e">Length</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">255</span><span class="crayon-sy">)</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f68b525057220-8"><span class="crayon-h">    </span><span class="crayon-v">is_visible</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">BooleanField</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Now we need to tie together our new <code>Presentation</code> database model and <code>PresentationForm</code> form. In the <code>cyoa/wizard_views.py</code>, remove the pass keyword from the listed functions and replace it with the highlighted code. What we’re adding below are two imports for the <code>Presentation</code> and <code>PresentationFrom</code> classes we just wrote. Now that we have presentations in the database, we can query for existing presentations in the <code>wizard_list_presentations</code> function. In the <code>wizard_new_presentation</code> and <code>wizard_edit_presentation</code> functions, we’re using the <code>PresentationForm</code> class to create and modify <code>Presentation</code> objects through the application’s web forms.</p>

		<div id="crayon-56d5b9df8f696497342556" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b9df8f696497342556-1">1</p><p class="crayon-num crayon-marked-num crayon-top crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-2">2</p><p class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-56d5b9df8f696497342556-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-4">4</p><p class="crayon-num" data-line="crayon-56d5b9df8f696497342556-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-6">6</p><p class="crayon-num" data-line="crayon-56d5b9df8f696497342556-7">7</p><p class="crayon-num crayon-marked-num crayon-top crayon-bottom crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-8">8</p><p class="crayon-num" data-line="crayon-56d5b9df8f696497342556-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-10">10</p><p class="crayon-num" data-line="crayon-56d5b9df8f696497342556-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-12">12</p><p class="crayon-num" data-line="crayon-56d5b9df8f696497342556-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-14">14</p><p class="crayon-num crayon-marked-num crayon-top" data-line="crayon-56d5b9df8f696497342556-15">15</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-16">16</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5b9df8f696497342556-17">17</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-18">18</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5b9df8f696497342556-19">19</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-20">20</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5b9df8f696497342556-21">21</p><p class="crayon-num crayon-marked-num crayon-bottom crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-22">22</p><p class="crayon-num" data-line="crayon-56d5b9df8f696497342556-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-24">24</p><p class="crayon-num" data-line="crayon-56d5b9df8f696497342556-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-26">26</p><p class="crayon-num crayon-marked-num crayon-top" data-line="crayon-56d5b9df8f696497342556-27">27</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-28">28</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5b9df8f696497342556-29">29</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-30">30</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5b9df8f696497342556-31">31</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-32">32</p><p class="crayon-num crayon-marked-num" data-line="crayon-56d5b9df8f696497342556-33">33</p><p class="crayon-num crayon-marked-num crayon-striped-num" data-line="crayon-56d5b9df8f696497342556-34">34</p><p class="crayon-num crayon-marked-num crayon-bottom" data-line="crayon-56d5b9df8f696497342556-35">35</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f696497342556-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">app</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">db</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-striped-line" id="crayon-56d5b9df8f696497342556-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-e">models </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">Presentation</span></p><p class="crayon-line crayon-marked-line crayon-bottom" id="crayon-56d5b9df8f696497342556-3"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-e">forms </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-i">PresentationForm</span><span class="crayon-h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-4"> </p><p class="crayon-line" id="crayon-56d5b9df8f696497342556-5"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentations/'</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-6"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line" id="crayon-56d5b9df8f696497342556-7"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_list_presentations</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-56d5b9df8f696497342556-8"><span class="crayon-h">    </span><span class="crayon-v">presentations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Presentation</span><span class="crayon-sy">.</span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-k ">all</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f696497342556-9"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-s">'wizard/presentations.html'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-10"><span class="crayon-h">                           </span><span class="crayon-v">presentations</span><span class="crayon-o">=</span><span class="crayon-v">presentations</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f696497342556-11"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-12"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentation/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f696497342556-13"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-14"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_new_presentation</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line crayon-top" id="crayon-56d5b9df8f696497342556-15"><span class="crayon-h">    </span><span class="crayon-v">form</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">PresentationForm</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-16"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">form</span><span class="crayon-sy">.</span><span class="crayon-e">validate_on_submit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5b9df8f696497342556-17"><span class="crayon-h">        </span><span class="crayon-v">presentation</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Presentation</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-18"><span class="crayon-h">        </span><span class="crayon-v">form</span><span class="crayon-sy">.</span><span class="crayon-e">populate_obj</span><span class="crayon-sy">(</span><span class="crayon-v">presentation</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5b9df8f696497342556-19"><span class="crayon-h">        </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">add</span><span class="crayon-sy">(</span><span class="crayon-v">presentation</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-20"><span class="crayon-h">        </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">commit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5b9df8f696497342556-21"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">redirect</span><span class="crayon-sy">(</span><span class="crayon-e">url_for</span><span class="crayon-sy">(</span><span class="crayon-s">'wizard_list_presentations'</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-bottom crayon-striped-line" id="crayon-56d5b9df8f696497342556-22"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-s">'wizard/presentation.html'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">form</span><span class="crayon-o">=</span><span class="crayon-v">form</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">is_new</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f696497342556-23"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-24"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/wizard/presentation/&lt;int:id&gt;/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'POST'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f696497342556-25"><span class="crayon-sy">@</span><span class="crayon-e">login_required</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-26"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">wizard_edit_presentation</span><span class="crayon-sy">(</span><span class="crayon-k ">id</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line crayon-top" id="crayon-56d5b9df8f696497342556-27"><span class="crayon-h">    </span><span class="crayon-v">presentation</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Presentation</span><span class="crayon-sy">.</span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-e">get_or_404</span><span class="crayon-sy">(</span><span class="crayon-k ">id</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-28"><span class="crayon-h">    </span><span class="crayon-v">form</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">PresentationForm</span><span class="crayon-sy">(</span><span class="crayon-v">obj</span><span class="crayon-o">=</span><span class="crayon-v">presentation</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5b9df8f696497342556-29"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">form</span><span class="crayon-sy">.</span><span class="crayon-e">validate_on_submit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-30"><span class="crayon-h">        </span><span class="crayon-v">form</span><span class="crayon-sy">.</span><span class="crayon-e">populate_obj</span><span class="crayon-sy">(</span><span class="crayon-v">presentation</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5b9df8f696497342556-31"><span class="crayon-h">        </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">merge</span><span class="crayon-sy">(</span><span class="crayon-v">presentation</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-32"><span class="crayon-h">        </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">commit</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line" id="crayon-56d5b9df8f696497342556-33"><span class="crayon-h">        </span><span class="crayon-v">db</span><span class="crayon-sy">.</span><span class="crayon-v">session</span><span class="crayon-sy">.</span><span class="crayon-e">refresh</span><span class="crayon-sy">(</span><span class="crayon-v">presentation</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-marked-line crayon-striped-line" id="crayon-56d5b9df8f696497342556-34"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-s">'wizard/presentation.html'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">form</span><span class="crayon-o">=</span><span class="crayon-v">form</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-marked-line crayon-bottom" id="crayon-56d5b9df8f696497342556-35"><span class="crayon-h">                           </span><span class="crayon-v">presentation</span><span class="crayon-o">=</span><span class="crayon-v">presentation</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>In the above code, make sure you’ve changed the first line within the <code>wizard_list_presentations</code> function from <code>presentations = []</code> to <code>presentations = Presentation.query.all()</code>. That modification to the code allows us to pass in every presentation found in the database into the <code>render_template</code> function instead of an empty list.</p>
<p>Create a new file named <code>cyoa/templates/wizard/presentation.html</code>. There’s already a presentations.html with an ‘s’ at the end, but this filename refers to a singular presentation. Add the following HTML template within the new file:</p>

		<div id="crayon-56d5b9df8f6a1450322764" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-2">2</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-4">4</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-6">6</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-8">8</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-10">10</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-12">12</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-14">14</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-16">16</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-18">18</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-20">20</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-22">22</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-24">24</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-26">26</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-28">28</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-30">30</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-31">31</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-32">32</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-33">33</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-34">34</p><p class="crayon-num" data-line="crayon-56d5b9df8f6a1450322764-35">35</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5b9df8f6a1450322764-36">36</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-1"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>extends<span class="crayon-h"> </span><span class="crayon-s ">"base.html"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-2"> </p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-3"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>block<span class="crayon-h"> </span>nav<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-4"><span class="crayon-h">    </span><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>include<span class="crayon-h"> </span><span class="crayon-s ">"nav.html"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-5"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>endblock<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-6"> </p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-7"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>block<span class="crayon-h"> </span>content<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-8"><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"container"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-9"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"row"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-10"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"col-md-6"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-11"><span class="crayon-i ">            {% from "partials/_formhelpers.html" import render_field %}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-12"><span class="crayon-i ">            {% if is_new %}</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-13"><span class="crayon-i ">            </span><span class="crayon-r ">&lt;form </span><span class="crayon-e ">action</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('wizard_new_presentation') }}"</span><span class="crayon-h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-14"><span class="crayon-h">                  </span><span class="crayon-e ">method</span><span class="crayon-o">=</span><span class="crayon-s ">"post"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-15"><span class="crayon-i ">            {% else %} </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-16"><span class="crayon-i ">            </span><span class="crayon-r ">&lt;form </span><span class="crayon-e ">action</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('wizard_edit_presentation', id=presentation.id) }}"</span><span class="crayon-h"> </span><span class="crayon-e ">method</span><span class="crayon-o">=</span><span class="crayon-s ">"post"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-17"><span class="crayon-i ">            {% endif %}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-18"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-19"><span class="crayon-i ">                    {{ form.csrf_token }}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-20"><span class="crayon-i ">                    {{ render_field(form.name) }}</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-21"><span class="crayon-i ">                    {{ render_field(form.filename) }}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-22"><span class="crayon-i ">                    {{ render_field(form.slug) }}</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-23"><span class="crayon-i ">                    </span><span class="crayon-r ">&lt;dt </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"admin-field"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-24"><span class="crayon-i ">                        {{ form.is_visible.label }}</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-25"><span class="crayon-i ">                        {{ form.is_visible }}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-26"><span class="crayon-i ">                    </span><span class="crayon-r ">&lt;/dt&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-27"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-28"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-29"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;input </span><span class="crayon-e ">type</span><span class="crayon-o">=</span><span class="crayon-s ">"submit"</span><span class="crayon-h"> </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"btn btn-success btn-top-margin"</span><span class="crayon-h"> </span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-30"><span class="crayon-h">                       </span><span class="crayon-e ">value</span><span class="crayon-o">=</span><span class="crayon-s ">"Save Presentation"</span><span class="crayon-r ">&gt;</span><span class="crayon-r ">&lt;/input&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-31"><span class="crayon-i ">                </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-32"><span class="crayon-i ">            </span><span class="crayon-r ">&lt;/form&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-33"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-34"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6a1450322764-35"><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6a1450322764-36"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>endblock<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Let’s give our upgraded code another spin. First, since we created a new database table we need to sync our <code>models.py</code> code with the database tables. Run the following manage.py command at the command line from within the project’s base directory.</p>

		<div id="crayon-56d5b9df8f6ac975112837" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6ac975112837-1"><span class="crayon-sy">(</span><span class="crayon-v">cyoa</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-v">syncdb</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Now the tables in PostgreSQL match our updated <code>models.py</code> code. Bring up the application with the runserver command.</p>

		<div id="crayon-56d5b9df8f6b5882293980" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6b5882293980-1"><span class="crayon-sy">(</span><span class="crayon-v">cyoa</span><span class="crayon-sy">)</span><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-e">.py</span><span class="crayon-h"> </span><span class="crayon-v">runserver</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Point your web browser to <a href="http://localhost:5001/wizard/">http://localhost:5001/wizard/</a>. You should again see the unchanged Wizards Only sign in page.</p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2015/05/image06.jpg"><img src="https://www.twilio.com/blog/wp-content/uploads/2015/05/image06-1024x564.jpg" alt="image06" class="aligncenter size-large wp-image-15112"/></a></p>
<p>Use your wizard credentials to sign in. At the presentations landing screen after signing in, click the “New Presentation” button.</p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2015/05/image01.png"><img src="https://www.twilio.com/blog/wp-content/uploads/2015/05/image01-1024x360.png" alt="image01" class="aligncenter size-large wp-image-15107"/></a></p>
<p>Create a presentation for the default template that’s included with the project. Enter “Choose Your Own Adventure Default Template” as the presentation name, “cyoa.html” for the file name, “cyoa” for the URL slug and check the “Is Visible” box. Press the “Save Presentation” button and we’ll be taken back to the presentations list screen where our new presentation is listed. </p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2015/05/image02.png"><img src="https://www.twilio.com/blog/wp-content/uploads/2015/05/image02-1024x266.png" alt="image02" class="aligncenter size-large wp-image-15108"/></a></p>
<p>We can edit existing presentations by clicking on the links within the Name column. Now we’ll use this presentation information to display visible presentations to users not logged into the application.</p>
<h3>Listing Available Presentations</h3>
<p>There have been a slew of code changes in this blog post, but let’s get one more in before we wrap up that’ll be useful to presentation viewers. We’re going to create a page that lists all presentations that are visible to non-wizard users so you can send out a URL to anyone that wants to bring up the slides on their own. </p>
<p>In addition, our presentation retrieval function will look for presentation files only in the <code>cyoa/templates/presentations/</code> folder. The presentations can still be accessed from the same URL as before, but it’s easier to remember where presentation files are located when there’s a single folder for them.</p>
<p>Start by deleting the following code in <code>cyoa/views.py</code> as we will not need it any longer.</p>

		<div id="crayon-56d5b9df8f6c1811951036" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6c1811951036-1"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/&lt;presentation_name&gt;/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6c1811951036-2"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">landing</span><span class="crayon-sy">(</span><span class="crayon-v">presentation_name</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b9df8f6c1811951036-3"><span class="crayon-h">    </span><span class="crayon-st">try</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6c1811951036-4"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-v">presentation_name</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-s">'.html'</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f6c1811951036-5"><span class="crayon-h">    </span><span class="crayon-st">except</span><span class="crayon-h"> </span><span class="crayon-v">TemplateNotFound</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6c1811951036-6"><span class="crayon-h">        </span><span class="crayon-e">abort</span><span class="crayon-sy">(</span><span class="crayon-cn">404</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>In its place, insert the following code.</p>

		<div id="crayon-56d5b9df8f6cb823988352" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6cb823988352-1"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6cb823988352-2"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">list_public_presentations</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b9df8f6cb823988352-3"><span class="crayon-h">    </span><span class="crayon-v">presentations</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Presentation</span><span class="crayon-sy">.</span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-e">filter_by</span><span class="crayon-sy">(</span><span class="crayon-v">is_visible</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6cb823988352-4"><span class="crayon-h">    </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-s">'list_presentations.html'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d5b9df8f6cb823988352-5"><span class="crayon-h">                           </span><span class="crayon-v">presentations</span><span class="crayon-o">=</span><span class="crayon-v">presentations</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6cb823988352-6"> </p><p class="crayon-line" id="crayon-56d5b9df8f6cb823988352-7"><span class="crayon-sy">@</span><span class="crayon-v">app</span><span class="crayon-sy">.</span><span class="crayon-e">route</span><span class="crayon-sy">(</span><span class="crayon-s">'/&lt;slug&gt;/'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">methods</span><span class="crayon-o">=</span><span class="crayon-sy">[</span><span class="crayon-s">'GET'</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6cb823988352-8"><span class="crayon-r">def</span><span class="crayon-h"> </span><span class="crayon-e">presentation</span><span class="crayon-sy">(</span><span class="crayon-v">slug</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5b9df8f6cb823988352-9"><span class="crayon-h">    </span><span class="crayon-v">presentation</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">Presentation</span><span class="crayon-sy">.</span><span class="crayon-v">query</span><span class="crayon-sy">.</span><span class="crayon-e">filter_by</span><span class="crayon-sy">(</span><span class="crayon-v">is_visible</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6cb823988352-10"><span class="crayon-h">                                                </span><span class="crayon-v">slug</span><span class="crayon-o">=</span><span class="crayon-v">slug</span><span class="crayon-sy">)</span><span class="crayon-sy">.</span><span class="crayon-e">first</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f6cb823988352-11"><span class="crayon-h">    </span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">presentation</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6cb823988352-12"><span class="crayon-h">        </span><span class="crayon-st">return</span><span class="crayon-h"> </span><span class="crayon-e">render_template</span><span class="crayon-sy">(</span><span class="crayon-s">'/presentations/'</span><span class="crayon-h"> </span><span class="crayon-o">+</span><span class="crayon-h"> </span><span class="crayon-v">presentation</span><span class="crayon-sy">.</span><span class="crayon-v">filename</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5b9df8f6cb823988352-13"><span class="crayon-h">    </span><span class="crayon-e">abort</span><span class="crayon-sy">(</span><span class="crayon-cn">404</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>The first function we wrote, <code>list_public_presentations</code>, performs a PostgreSQL database query through SQLAlchemy for all presentations with the <code>is_visible</code> field set to True then passes the results to the template renderer. The second function, <code>presentation</code>, only renders the presentation if the URL slug matches an existing presentation and for that presentation the <code>is_visible</code> field is True. Otherwise an HTTP 404 status code is returned.</p>
<p>One more step in <code>cyoa/views.py</code>. Add the following line as a new import to the top of the file so that our new code can use the <code>Presentation</code> database model for the queries in the functions we just wrote:</p>

		<div id="crayon-56d5b9df8f6d5366883832" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6d5366883832-1"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-e">models </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">Wizard</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6d5366883832-2"> </p><p class="crayon-line" id="crayon-56d5b9df8f6d5366883832-3"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">app</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">redis_db</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">socketio</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-e">login_manager</span></p><p class="crayon-line crayon-marked-line crayon-top crayon-bottom crayon-striped-line" id="crayon-56d5b9df8f6d5366883832-4"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-e">models </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">Presentation</span></p><p class="crayon-line" id="crayon-56d5b9df8f6d5366883832-5"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6d5366883832-6"><span class="crayon-v">client</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">TwilioRestClient</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Finally create a new list template for the presentations. Call this file <code>cyoa/templates/list_presentations.html</code>.</p>

		<div id="crayon-56d5b9df8f6df700841419" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6df700841419-1"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>extends<span class="crayon-h"> </span><span class="crayon-s ">"base.html"</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6df700841419-2"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>block<span class="crayon-h"> </span>content<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p><p class="crayon-line" id="crayon-56d5b9df8f6df700841419-3"><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"container"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6df700841419-4"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"row"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6df700841419-5"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;div </span><span class="crayon-e ">class</span><span class="crayon-o">=</span><span class="crayon-s ">"col-md-10"</span><span class="crayon-r ">&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6df700841419-6"><span class="crayon-i ">            </span><span class="crayon-r ">&lt;h1&gt;</span><span class="crayon-i ">Available presentations</span><span class="crayon-r ">&lt;/h1&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6df700841419-7"><span class="crayon-i ">                {% for p in presentations %}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6df700841419-8"><span class="crayon-i ">                    </span><span class="crayon-r ">&lt;p&gt;</span><span class="crayon-r ">&lt;a </span><span class="crayon-e ">href</span><span class="crayon-o">=</span><span class="crayon-s ">"{{ url_for('presentation', slug=p.slug) }}"</span><span class="crayon-r ">&gt;</span><span class="crayon-i ">{{ p.name }}</span><span class="crayon-r ">&lt;/a&gt;</span><span class="crayon-r ">&lt;/p&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6df700841419-9"><span class="crayon-i ">                {% else %}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6df700841419-10"><span class="crayon-i ">                    No public presentations found. </span></p><p class="crayon-line" id="crayon-56d5b9df8f6df700841419-11"><span class="crayon-i ">                {% endfor %}</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6df700841419-12"><span class="crayon-i ">        </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6df700841419-13"><span class="crayon-i ">    </span><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5b9df8f6df700841419-14"><span class="crayon-r ">&lt;/div&gt;</span></p><p class="crayon-line" id="crayon-56d5b9df8f6df700841419-15"><span class="crayon-sy">{</span><span class="crayon-o">%</span><span class="crayon-h"> </span>endblock<span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-sy">}</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>We need to move our cyoa.html default template into the <code>cyoa/templates/presentations/</code> folder because our <code>list_public_presentations</code> function now looks in that folder instead of the <code>cyoa/templates/</code> folder. Create a new directory within <code>cyoa/templates</code> called <code>presentations</code>:</p>

		<div id="crayon-56d5b9df8f6e9598724995" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6e9598724995-1"><span class="crayon-r">mkdir</span><span class="crayon-h"> </span><span class="crayon-v">cyoa</span><span class="crayon-o">/</span><span class="crayon-v">templates</span><span class="crayon-o">/</span><span class="crayon-v">presentations</span><span class="crayon-o">/</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Now go to the <code>cyoa/templates/</code> directory and run the following move command.</p>

		<div id="crayon-56d5b9df8f6f2326472510" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5b9df8f6f2326472510-1"><span class="crayon-r">mv</span><span class="crayon-h"> </span><span class="crayon-v">cyoa</span><span class="crayon-e">.html</span><span class="crayon-h"> </span><span class="crayon-v">presentations</span><span class="crayon-o">/</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Be sure to store your new presentations within the <code>cyoa/templates/presentations/</code> folder from now on.</p>
<p>Check out the simple listing of presentations available to the audience. Go to <a href="http://localhost:5001">http://localhost:5001</a> and you’ll see the list of visible presentations.</p>
<p><a href="http://twilioinc.wpengine.com/wp-content/uploads/2015/05/image04.png"><img src="https://www.twilio.com/blog/wp-content/uploads/2015/05/image04-1024x117.png" alt="image04" class="aligncenter size-large wp-image-15110"/></a></p>
<h3>All Prepared for Part Three!</h3>
<p>We now have a working Wizards Only set of screens for managing our presentations. If you want all the code to this point in the tutorial series, you can grab it from the <a href="https://github.com/makaimc/choose-your-own-adventure-presentations/tree/tutorial-step-5">tutorial-step-5</a> on GitHub.</p>
<p>There’s a big elephant in the room though with our current application. Each presentation has a checkbox to enable websockets-based voting to complement SMS voting. However, we haven’t coded the ability for presentation watchers to vote via web browsers just yet. In part three of this series, we’ll conclude by adding that new voting functionality so that our <a href="https://github.com/makaimc/choose-your-own-adventure-presentations">Choose Your Own Adventure Presentations project</a> is complete.</p>
<p>Let me know what new Choose Your Own Adventure presentation stories you come up with or open a pull request to improve the code base. Contact me via:</p>
<ul>
<li>Email: makai@twilio.com</li>
<li>GitHub: Follow <a href="https://github.com/makaimc">makaimc</a> for repository updates</li>
<li>Twitter: <a href="https://twitter.com/mattmakai">@mattmakai</a></li>
</ul>
			</div>
					</div></body></html>