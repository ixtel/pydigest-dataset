<html><body><div><table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="file-models-py-L1" class="blob-num js-line-number" data-line-number="1"/>
        <td id="file-models-py-LC1" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#    This file is just so the example will have a decent amount</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L2" class="blob-num js-line-number" data-line-number="2"/>
        <td id="file-models-py-LC2" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#    of output,it not needed for the above file to work, </span></td>
      </tr>
      <tr>
        <td id="file-models-py-L3" class="blob-num js-line-number" data-line-number="3"/>
        <td id="file-models-py-LC3" class="blob-code blob-code-inner js-file-line"><span class="pl-c">#    you just need some simple models</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L4" class="blob-num js-line-number" data-line-number="4"/>
        <td id="file-models-py-LC4" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> sqlalchemy.ext.declarative <span class="pl-k">import</span> declarative_base,declared_attr</td>
      </tr>
      <tr>
        <td id="file-models-py-L5" class="blob-num js-line-number" data-line-number="5"/>
        <td id="file-models-py-LC5" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> functools <span class="pl-k">import</span> partial</td>
      </tr>
      <tr>
        <td id="file-models-py-L6" class="blob-num js-line-number" data-line-number="6"/>
        <td id="file-models-py-LC6" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> flask <span class="pl-k">import</span> current_app,json</td>
      </tr>
      <tr>
        <td id="file-models-py-L7" class="blob-num js-line-number" data-line-number="7"/>
        <td id="file-models-py-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> inflection <span class="pl-k">import</span> pluralize, underscore</td>
      </tr>
      <tr>
        <td id="file-models-py-L8" class="blob-num js-line-number" data-line-number="8"/>
        <td id="file-models-py-LC8" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> jinja2 <span class="pl-k">import</span> Environment</td>
      </tr>
      <tr>
        <td id="file-models-py-L9" class="blob-num js-line-number" data-line-number="9"/>
        <td id="file-models-py-LC9" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> bcrypt <span class="pl-k">import</span> checkpw,gensalt,hashpw</td>
      </tr>
      <tr>
        <td id="file-models-py-L10" class="blob-num js-line-number" data-line-number="10"/>
        <td id="file-models-py-LC10" class="blob-code blob-code-inner js-file-line"><span class="pl-k">import</span> sqlalchemy <span class="pl-k">as</span> sa</td>
      </tr>
      <tr>
        <td id="file-models-py-L11" class="blob-num js-line-number" data-line-number="11"/>
        <td id="file-models-py-LC11" class="blob-code blob-code-inner js-file-line"><span class="pl-k">from</span> dates <span class="pl-k">import</span> format_date</td>
      </tr>
      <tr>
        <td id="file-models-py-L12" class="blob-num js-line-number" data-line-number="12"/>
        <td id="file-models-py-LC12" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L13" class="blob-num js-line-number" data-line-number="13"/>
        <td id="file-models-py-LC13" class="blob-code blob-code-inner js-file-line">_engine <span class="pl-k">=</span> <span class="pl-k">lambda</span> <span class="pl-smi">DB_URI</span>,<span class="pl-smi">echo</span><span class="pl-k">=</span><span class="pl-c1">True</span>: sa.create_engine(<span class="pl-c1">DB_URI</span>,<span class="pl-v">echo</span><span class="pl-k">=</span>echo)</td>
      </tr>
      <tr>
        <td id="file-models-py-L14" class="blob-num js-line-number" data-line-number="14"/>
        <td id="file-models-py-LC14" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L15" class="blob-num js-line-number" data-line-number="15"/>
        <td id="file-models-py-LC15" class="blob-code blob-code-inner js-file-line"><span class="pl-k">def</span> <span class="pl-en">get_base</span>():</td>
      </tr>
      <tr>
        <td id="file-models-py-L16" class="blob-num js-line-number" data-line-number="16"/>
        <td id="file-models-py-LC16" class="blob-code blob-code-inner js-file-line">    base <span class="pl-k">=</span> declarative_base()</td>
      </tr>
      <tr>
        <td id="file-models-py-L17" class="blob-num js-line-number" data-line-number="17"/>
        <td id="file-models-py-LC17" class="blob-code blob-code-inner js-file-line">    base._sess <span class="pl-k">=</span> sa.orm.scoped_session(sa.orm.sessionmaker(</td>
      </tr>
      <tr>
        <td id="file-models-py-L18" class="blob-num js-line-number" data-line-number="18"/>
        <td id="file-models-py-LC18" class="blob-code blob-code-inner js-file-line">        )</td>
      </tr>
      <tr>
        <td id="file-models-py-L19" class="blob-num js-line-number" data-line-number="19"/>
        <td id="file-models-py-LC19" class="blob-code blob-code-inner js-file-line">    )</td>
      </tr>
      <tr>
        <td id="file-models-py-L20" class="blob-num js-line-number" data-line-number="20"/>
        <td id="file-models-py-LC20" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">return</span> base</td>
      </tr>
      <tr>
        <td id="file-models-py-L21" class="blob-num js-line-number" data-line-number="21"/>
        <td id="file-models-py-LC21" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L22" class="blob-num js-line-number" data-line-number="22"/>
        <td id="file-models-py-LC22" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">classproperty</span>(<span class="pl-c1">object</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L23" class="blob-num js-line-number" data-line-number="23"/>
        <td id="file-models-py-LC23" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-smi">getter</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L24" class="blob-num js-line-number" data-line-number="24"/>
        <td id="file-models-py-LC24" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.getter <span class="pl-k">=</span> getter</td>
      </tr>
      <tr>
        <td id="file-models-py-L25" class="blob-num js-line-number" data-line-number="25"/>
        <td id="file-models-py-LC25" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L26" class="blob-num js-line-number" data-line-number="26"/>
        <td id="file-models-py-LC26" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__get__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-smi">instance</span>,<span class="pl-smi">owner</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L27" class="blob-num js-line-number" data-line-number="27"/>
        <td id="file-models-py-LC27" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">self</span>.getter(owner)</td>
      </tr>
      <tr>
        <td id="file-models-py-L28" class="blob-num js-line-number" data-line-number="28"/>
        <td id="file-models-py-LC28" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L29" class="blob-num js-line-number" data-line-number="29"/>
        <td id="file-models-py-LC29" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">DateMixin</span>(<span class="pl-c1">object</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L30" class="blob-num js-line-number" data-line-number="30"/>
        <td id="file-models-py-LC30" class="blob-code blob-code-inner js-file-line">    __abstract__ <span class="pl-k">=</span> <span class="pl-c1">True</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L31" class="blob-num js-line-number" data-line-number="31"/>
        <td id="file-models-py-LC31" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L32" class="blob-num js-line-number" data-line-number="32"/>
        <td id="file-models-py-LC32" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@declared_attr</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L33" class="blob-num js-line-number" data-line-number="33"/>
        <td id="file-models-py-LC33" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">date_added</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L34" class="blob-num js-line-number" data-line-number="34"/>
        <td id="file-models-py-LC34" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> sa.Column(sa.DateTime,<span class="pl-v">default</span><span class="pl-k">=</span>sa.func.now())</td>
      </tr>
      <tr>
        <td id="file-models-py-L35" class="blob-num js-line-number" data-line-number="35"/>
        <td id="file-models-py-LC35" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L36" class="blob-num js-line-number" data-line-number="36"/>
        <td id="file-models-py-LC36" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@declared_attr</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L37" class="blob-num js-line-number" data-line-number="37"/>
        <td id="file-models-py-LC37" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">date_modified</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L38" class="blob-num js-line-number" data-line-number="38"/>
        <td id="file-models-py-LC38" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> sa.Column(sa.DateTime,<span class="pl-v">default</span><span class="pl-k">=</span>sa.func.now(),<span class="pl-v">onupdate</span><span class="pl-k">=</span>sa.func.now())</td>
      </tr>
      <tr>
        <td id="file-models-py-L39" class="blob-num js-line-number" data-line-number="39"/>
        <td id="file-models-py-LC39" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L40" class="blob-num js-line-number" data-line-number="40"/>
        <td id="file-models-py-LC40" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">PasswordHashMixin</span>(<span class="pl-c1">object</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L41" class="blob-num js-line-number" data-line-number="41"/>
        <td id="file-models-py-LC41" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#__abstract__ = True</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L42" class="blob-num js-line-number" data-line-number="42"/>
        <td id="file-models-py-LC42" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L43" class="blob-num js-line-number" data-line-number="43"/>
        <td id="file-models-py-LC43" class="blob-code blob-code-inner js-file-line">    _pwhash <span class="pl-k">=</span> sa.Column(sa.Text)</td>
      </tr>
      <tr>
        <td id="file-models-py-L44" class="blob-num js-line-number" data-line-number="44"/>
        <td id="file-models-py-LC44" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L45" class="blob-num js-line-number" data-line-number="45"/>
        <td id="file-models-py-LC45" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">property</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L46" class="blob-num js-line-number" data-line-number="46"/>
        <td id="file-models-py-LC46" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">pwhash</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L47" class="blob-num js-line-number" data-line-number="47"/>
        <td id="file-models-py-LC47" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">ValueError</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L48" class="blob-num js-line-number" data-line-number="48"/>
        <td id="file-models-py-LC48" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L49" class="blob-num js-line-number" data-line-number="49"/>
        <td id="file-models-py-LC49" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@pwhash.setter</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L50" class="blob-num js-line-number" data-line-number="50"/>
        <td id="file-models-py-LC50" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">pwhash</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-smi">data</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L51" class="blob-num js-line-number" data-line-number="51"/>
        <td id="file-models-py-LC51" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>._pwhash <span class="pl-k">=</span> hashpw(data,gensalt())</td>
      </tr>
      <tr>
        <td id="file-models-py-L52" class="blob-num js-line-number" data-line-number="52"/>
        <td id="file-models-py-LC52" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L53" class="blob-num js-line-number" data-line-number="53"/>
        <td id="file-models-py-LC53" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">check_password</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-smi">pw</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L54" class="blob-num js-line-number" data-line-number="54"/>
        <td id="file-models-py-LC54" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> checkpw(pw,<span class="pl-v">self</span>._pwhash)</td>
      </tr>
      <tr>
        <td id="file-models-py-L55" class="blob-num js-line-number" data-line-number="55"/>
        <td id="file-models-py-LC55" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L56" class="blob-num js-line-number" data-line-number="56"/>
        <td id="file-models-py-LC56" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">BaseModel</span>(<span class="pl-e">get_base</span>()):</td>
      </tr>
      <tr>
        <td id="file-models-py-L57" class="blob-num js-line-number" data-line-number="57"/>
        <td id="file-models-py-LC57" class="blob-code blob-code-inner js-file-line">    __abstract__ <span class="pl-k">=</span> <span class="pl-c1">True</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L58" class="blob-num js-line-number" data-line-number="58"/>
        <td id="file-models-py-LC58" class="blob-code blob-code-inner js-file-line">    _engine <span class="pl-k">=</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L59" class="blob-num js-line-number" data-line-number="59"/>
        <td id="file-models-py-LC59" class="blob-code blob-code-inner js-file-line">    _session <span class="pl-k">=</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L60" class="blob-num js-line-number" data-line-number="60"/>
        <td id="file-models-py-LC60" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L61" class="blob-num js-line-number" data-line-number="61"/>
        <td id="file-models-py-LC61" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@declared_attr</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L62" class="blob-num js-line-number" data-line-number="62"/>
        <td id="file-models-py-LC62" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">id</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L63" class="blob-num js-line-number" data-line-number="63"/>
        <td id="file-models-py-LC63" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> sa.Column(sa.Integer,<span class="pl-v">primary_key</span><span class="pl-k">=</span><span class="pl-c1">True</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L64" class="blob-num js-line-number" data-line-number="64"/>
        <td id="file-models-py-LC64" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L65" class="blob-num js-line-number" data-line-number="65"/>
        <td id="file-models-py-LC65" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@declared_attr</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L66" class="blob-num js-line-number" data-line-number="66"/>
        <td id="file-models-py-LC66" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">__tablename__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L67" class="blob-num js-line-number" data-line-number="67"/>
        <td id="file-models-py-LC67" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> pluralize(underscore(<span class="pl-v">self</span>.<span class="pl-c1">__name__</span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L68" class="blob-num js-line-number" data-line-number="68"/>
        <td id="file-models-py-LC68" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L69" class="blob-num js-line-number" data-line-number="69"/>
        <td id="file-models-py-LC69" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@classproperty</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L70" class="blob-num js-line-number" data-line-number="70"/>
        <td id="file-models-py-LC70" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">engine</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L71" class="blob-num js-line-number" data-line-number="71"/>
        <td id="file-models-py-LC71" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-v">cls</span>._engine <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-models-py-L72" class="blob-num js-line-number" data-line-number="72"/>
        <td id="file-models-py-LC72" class="blob-code blob-code-inner js-file-line">            BaseModel._engine <span class="pl-k">=</span> _engine(current_app.config.get(<span class="pl-s"><span class="pl-pds">'</span>DATABASE_URI<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L73" class="blob-num js-line-number" data-line-number="73"/>
        <td id="file-models-py-LC73" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">cls</span>.metadata.bind <span class="pl-k">=</span> <span class="pl-v">cls</span>._engine</td>
      </tr>
      <tr>
        <td id="file-models-py-L74" class="blob-num js-line-number" data-line-number="74"/>
        <td id="file-models-py-LC74" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">cls</span>._engine</td>
      </tr>
      <tr>
        <td id="file-models-py-L75" class="blob-num js-line-number" data-line-number="75"/>
        <td id="file-models-py-LC75" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L76" class="blob-num js-line-number" data-line-number="76"/>
        <td id="file-models-py-LC76" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@classproperty</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L77" class="blob-num js-line-number" data-line-number="77"/>
        <td id="file-models-py-LC77" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">session</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L78" class="blob-num js-line-number" data-line-number="78"/>
        <td id="file-models-py-LC78" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> BaseModel._session <span class="pl-k">is</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-models-py-L79" class="blob-num js-line-number" data-line-number="79"/>
        <td id="file-models-py-LC79" class="blob-code blob-code-inner js-file-line">            BaseModel._session <span class="pl-k">=</span> BaseModel._sess()</td>
      </tr>
      <tr>
        <td id="file-models-py-L80" class="blob-num js-line-number" data-line-number="80"/>
        <td id="file-models-py-LC80" class="blob-code blob-code-inner js-file-line">            BaseModel._session.bind<span class="pl-k">=</span><span class="pl-v">cls</span>.engine</td>
      </tr>
      <tr>
        <td id="file-models-py-L81" class="blob-num js-line-number" data-line-number="81"/>
        <td id="file-models-py-LC81" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> BaseModel._session</td>
      </tr>
      <tr>
        <td id="file-models-py-L82" class="blob-num js-line-number" data-line-number="82"/>
        <td id="file-models-py-LC82" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L83" class="blob-num js-line-number" data-line-number="83"/>
        <td id="file-models-py-LC83" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@classproperty</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L84" class="blob-num js-line-number" data-line-number="84"/>
        <td id="file-models-py-LC84" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">query</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L85" class="blob-num js-line-number" data-line-number="85"/>
        <td id="file-models-py-LC85" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">cls</span>.session.query(<span class="pl-v">cls</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L86" class="blob-num js-line-number" data-line-number="86"/>
        <td id="file-models-py-LC86" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L87" class="blob-num js-line-number" data-line-number="87"/>
        <td id="file-models-py-LC87" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">classmethod</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L88" class="blob-num js-line-number" data-line-number="88"/>
        <td id="file-models-py-LC88" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">get_all</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L89" class="blob-num js-line-number" data-line-number="89"/>
        <td id="file-models-py-LC89" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">cls</span>.query.all()</td>
      </tr>
      <tr>
        <td id="file-models-py-L90" class="blob-num js-line-number" data-line-number="90"/>
        <td id="file-models-py-LC90" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L91" class="blob-num js-line-number" data-line-number="91"/>
        <td id="file-models-py-LC91" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">classmethod</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L92" class="blob-num js-line-number" data-line-number="92"/>
        <td id="file-models-py-LC92" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">get_new</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>,<span class="pl-k">**</span><span class="pl-smi">kwargs</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L93" class="blob-num js-line-number" data-line-number="93"/>
        <td id="file-models-py-LC93" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">cls</span>(<span class="pl-k">**</span>kwargs).save()</td>
      </tr>
      <tr>
        <td id="file-models-py-L94" class="blob-num js-line-number" data-line-number="94"/>
        <td id="file-models-py-LC94" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L95" class="blob-num js-line-number" data-line-number="95"/>
        <td id="file-models-py-LC95" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">classmethod</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L96" class="blob-num js-line-number" data-line-number="96"/>
        <td id="file-models-py-LC96" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">get_by_id</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>,<span class="pl-smi">item_id</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L97" class="blob-num js-line-number" data-line-number="97"/>
        <td id="file-models-py-LC97" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">cls</span>.query.filter(<span class="pl-v">cls</span>.id<span class="pl-k">==</span>item_id).first()</td>
      </tr>
      <tr>
        <td id="file-models-py-L98" class="blob-num js-line-number" data-line-number="98"/>
        <td id="file-models-py-LC98" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L99" class="blob-num js-line-number" data-line-number="99"/>
        <td id="file-models-py-LC99" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">classmethod</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L100" class="blob-num js-line-number" data-line-number="100"/>
        <td id="file-models-py-LC100" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">get</span>(<span class="pl-smi"><span class="pl-smi">cls</span></span>,<span class="pl-k">*</span><span class="pl-smi">args</span>,<span class="pl-k">**</span><span class="pl-smi">kwargs</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L101" class="blob-num js-line-number" data-line-number="101"/>
        <td id="file-models-py-LC101" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">cls</span>.get_by_id(<span class="pl-k">*</span>args,<span class="pl-k">**</span>kwargs)</td>
      </tr>
      <tr>
        <td id="file-models-py-L102" class="blob-num js-line-number" data-line-number="102"/>
        <td id="file-models-py-LC102" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L103" class="blob-num js-line-number" data-line-number="103"/>
        <td id="file-models-py-LC103" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">save</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L104" class="blob-num js-line-number" data-line-number="104"/>
        <td id="file-models-py-LC104" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.session.add(<span class="pl-v">self</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L105" class="blob-num js-line-number" data-line-number="105"/>
        <td id="file-models-py-LC105" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.session.commit()</td>
      </tr>
      <tr>
        <td id="file-models-py-L106" class="blob-num js-line-number" data-line-number="106"/>
        <td id="file-models-py-LC106" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">self</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L107" class="blob-num js-line-number" data-line-number="107"/>
        <td id="file-models-py-LC107" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L108" class="blob-num js-line-number" data-line-number="108"/>
        <td id="file-models-py-LC108" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">update</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L109" class="blob-num js-line-number" data-line-number="109"/>
        <td id="file-models-py-LC109" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">self</span>.save()</td>
      </tr>
      <tr>
        <td id="file-models-py-L110" class="blob-num js-line-number" data-line-number="110"/>
        <td id="file-models-py-LC110" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L111" class="blob-num js-line-number" data-line-number="111"/>
        <td id="file-models-py-LC111" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">delete</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L112" class="blob-num js-line-number" data-line-number="112"/>
        <td id="file-models-py-LC112" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.session.delete(<span class="pl-v">self</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L113" class="blob-num js-line-number" data-line-number="113"/>
        <td id="file-models-py-LC113" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">self</span> <span class="pl-k">in</span> <span class="pl-v">self</span>.session.deleted <span class="pl-k">and</span>\</td>
      </tr>
      <tr>
        <td id="file-models-py-L114" class="blob-num js-line-number" data-line-number="114"/>
        <td id="file-models-py-LC114" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">self</span>.session.commit()</td>
      </tr>
      <tr>
        <td id="file-models-py-L115" class="blob-num js-line-number" data-line-number="115"/>
        <td id="file-models-py-LC115" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L116" class="blob-num js-line-number" data-line-number="116"/>
        <td id="file-models-py-LC116" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">Post</span>(<span class="pl-e">BaseModel</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L117" class="blob-num js-line-number" data-line-number="117"/>
        <td id="file-models-py-LC117" class="blob-code blob-code-inner js-file-line">    _env <span class="pl-k">=</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L118" class="blob-num js-line-number" data-line-number="118"/>
        <td id="file-models-py-LC118" class="blob-code blob-code-inner js-file-line">    _context <span class="pl-k">=</span> {}</td>
      </tr>
      <tr>
        <td id="file-models-py-L119" class="blob-num js-line-number" data-line-number="119"/>
        <td id="file-models-py-LC119" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L120" class="blob-num js-line-number" data-line-number="120"/>
        <td id="file-models-py-LC120" class="blob-code blob-code-inner js-file-line">    author_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>app_users.id<span class="pl-pds">'</span></span>),<span class="pl-v">nullable</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L121" class="blob-num js-line-number" data-line-number="121"/>
        <td id="file-models-py-LC121" class="blob-code blob-code-inner js-file-line">    author <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>AppUser<span class="pl-pds">'</span></span>,<span class="pl-v">backref</span><span class="pl-k">=</span>sa.orm.backref(<span class="pl-s"><span class="pl-pds">'</span>posts<span class="pl-pds">'</span></span>,<span class="pl-v">lazy</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>dynamic<span class="pl-pds">'</span></span>),<span class="pl-v">uselist</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L122" class="blob-num js-line-number" data-line-number="122"/>
        <td id="file-models-py-LC122" class="blob-code blob-code-inner js-file-line">    title <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>),<span class="pl-v">nullable</span><span class="pl-k">=</span><span class="pl-c1">False</span>)<span class="pl-c">#,unique=True)</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L123" class="blob-num js-line-number" data-line-number="123"/>
        <td id="file-models-py-LC123" class="blob-code blob-code-inner js-file-line">    _content <span class="pl-k">=</span> sa.Column(sa.Text)</td>
      </tr>
      <tr>
        <td id="file-models-py-L124" class="blob-num js-line-number" data-line-number="124"/>
        <td id="file-models-py-LC124" class="blob-code blob-code-inner js-file-line">    use_jinja <span class="pl-k">=</span> sa.Column(sa.Boolean,<span class="pl-v">default</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L125" class="blob-num js-line-number" data-line-number="125"/>
        <td id="file-models-py-LC125" class="blob-code blob-code-inner js-file-line">    date_added <span class="pl-k">=</span> sa.Column(sa.DateTime,<span class="pl-v">default</span><span class="pl-k">=</span>sa.func.now())</td>
      </tr>
      <tr>
        <td id="file-models-py-L126" class="blob-num js-line-number" data-line-number="126"/>
        <td id="file-models-py-LC126" class="blob-code blob-code-inner js-file-line">    date_modified <span class="pl-k">=</span> sa.Column(sa.DateTime,<span class="pl-v">default</span><span class="pl-k">=</span>sa.func.now(),<span class="pl-v">onupdate</span><span class="pl-k">=</span>sa.func.now())</td>
      </tr>
      <tr>
        <td id="file-models-py-L127" class="blob-num js-line-number" data-line-number="127"/>
        <td id="file-models-py-LC127" class="blob-code blob-code-inner js-file-line">    tags <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>Tag<span class="pl-pds">'</span></span>,<span class="pl-v">lazy</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>dynamic<span class="pl-pds">'</span></span>,<span class="pl-v">secondary</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>posts_tags<span class="pl-pds">"</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L128" class="blob-num js-line-number" data-line-number="128"/>
        <td id="file-models-py-LC128" class="blob-code blob-code-inner js-file-line">    comments <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>Comment<span class="pl-pds">'</span></span>,<span class="pl-v">lazy</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>dynamic<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L129" class="blob-num js-line-number" data-line-number="129"/>
        <td id="file-models-py-LC129" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L130" class="blob-num js-line-number" data-line-number="130"/>
        <td id="file-models-py-LC130" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-k">*</span><span class="pl-smi">args</span>,<span class="pl-k">**</span><span class="pl-smi">kwargs</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L131" class="blob-num js-line-number" data-line-number="131"/>
        <td id="file-models-py-LC131" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-s"><span class="pl-pds">'</span>content<span class="pl-pds">'</span></span> <span class="pl-k">in</span> kwargs:</td>
      </tr>
      <tr>
        <td id="file-models-py-L132" class="blob-num js-line-number" data-line-number="132"/>
        <td id="file-models-py-LC132" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">self</span>._content <span class="pl-k">=</span> kwargs.pop(<span class="pl-s"><span class="pl-pds">'</span>content<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L133" class="blob-num js-line-number" data-line-number="133"/>
        <td id="file-models-py-LC133" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-s"><span class="pl-pds">'</span>tags<span class="pl-pds">'</span></span> <span class="pl-k">in</span> kwargs <span class="pl-k">and</span> kwargs.get(<span class="pl-s"><span class="pl-pds">'</span>tags<span class="pl-pds">'</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L134" class="blob-num js-line-number" data-line-number="134"/>
        <td id="file-models-py-LC134" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">print</span> kwargs.get(<span class="pl-s"><span class="pl-pds">'</span>tags<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L135" class="blob-num js-line-number" data-line-number="135"/>
        <td id="file-models-py-LC135" class="blob-code blob-code-inner js-file-line">            tags <span class="pl-k">=</span> kwargs.pop(<span class="pl-s"><span class="pl-pds">'</span>tags<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L136" class="blob-num js-line-number" data-line-number="136"/>
        <td id="file-models-py-LC136" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">if</span> <span class="pl-c1">type</span>(tags) <span class="pl-k">==</span> <span class="pl-v">unicode</span>:</td>
      </tr>
      <tr>
        <td id="file-models-py-L137" class="blob-num js-line-number" data-line-number="137"/>
        <td id="file-models-py-LC137" class="blob-code blob-code-inner js-file-line">                tags <span class="pl-k">=</span> json.loads(tags)</td>
      </tr>
      <tr>
        <td id="file-models-py-L138" class="blob-num js-line-number" data-line-number="138"/>
        <td id="file-models-py-LC138" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">print</span> tags</td>
      </tr>
      <tr>
        <td id="file-models-py-L139" class="blob-num js-line-number" data-line-number="139"/>
        <td id="file-models-py-LC139" class="blob-code blob-code-inner js-file-line">            <span class="pl-c1">print</span> <span class="pl-c1">type</span>(tags)</td>
      </tr>
      <tr>
        <td id="file-models-py-L140" class="blob-num js-line-number" data-line-number="140"/>
        <td id="file-models-py-LC140" class="blob-code blob-code-inner js-file-line">            <span class="pl-k">for</span> t <span class="pl-k">in</span> tags:</td>
      </tr>
      <tr>
        <td id="file-models-py-L141" class="blob-num js-line-number" data-line-number="141"/>
        <td id="file-models-py-LC141" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">if</span> t <span class="pl-k">is</span> <span class="pl-k">not</span> <span class="pl-c1">None</span>:</td>
      </tr>
      <tr>
        <td id="file-models-py-L142" class="blob-num js-line-number" data-line-number="142"/>
        <td id="file-models-py-LC142" class="blob-code blob-code-inner js-file-line">                    tag <span class="pl-k">=</span> Tag.get_by_id(<span class="pl-c1">int</span>(t))</td>
      </tr>
      <tr>
        <td id="file-models-py-L143" class="blob-num js-line-number" data-line-number="143"/>
        <td id="file-models-py-LC143" class="blob-code blob-code-inner js-file-line">                <span class="pl-k">if</span> tag:</td>
      </tr>
      <tr>
        <td id="file-models-py-L144" class="blob-num js-line-number" data-line-number="144"/>
        <td id="file-models-py-LC144" class="blob-code blob-code-inner js-file-line">                    <span class="pl-v">self</span>.tags.append(tag)</td>
      </tr>
      <tr>
        <td id="file-models-py-L145" class="blob-num js-line-number" data-line-number="145"/>
        <td id="file-models-py-LC145" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>._env <span class="pl-k">=</span> Environment()</td>
      </tr>
      <tr>
        <td id="file-models-py-L146" class="blob-num js-line-number" data-line-number="146"/>
        <td id="file-models-py-LC146" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>._context <span class="pl-k">=</span> {}</td>
      </tr>
      <tr>
        <td id="file-models-py-L147" class="blob-num js-line-number" data-line-number="147"/>
        <td id="file-models-py-LC147" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">super</span>(Post,<span class="pl-v">self</span>).<span class="pl-c1">__init__</span>(<span class="pl-k">*</span>args,<span class="pl-k">**</span>kwargs)</td>
      </tr>
      <tr>
        <td id="file-models-py-L148" class="blob-num js-line-number" data-line-number="148"/>
        <td id="file-models-py-LC148" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L149" class="blob-num js-line-number" data-line-number="149"/>
        <td id="file-models-py-LC149" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">add_comment</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-k">*</span><span class="pl-smi">args</span>,<span class="pl-k">**</span><span class="pl-smi">kwargs</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L150" class="blob-num js-line-number" data-line-number="150"/>
        <td id="file-models-py-LC150" class="blob-code blob-code-inner js-file-line">        comment <span class="pl-k">=</span> Comment(<span class="pl-v">post_id</span><span class="pl-k">=</span><span class="pl-v">self</span>.id,<span class="pl-k">**</span>kwargs).save()</td>
      </tr>
      <tr>
        <td id="file-models-py-L151" class="blob-num js-line-number" data-line-number="151"/>
        <td id="file-models-py-LC151" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">self</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L152" class="blob-num js-line-number" data-line-number="152"/>
        <td id="file-models-py-LC152" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L153" class="blob-num js-line-number" data-line-number="153"/>
        <td id="file-models-py-LC153" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L154" class="blob-num js-line-number" data-line-number="154"/>
        <td id="file-models-py-LC154" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">property</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L155" class="blob-num js-line-number" data-line-number="155"/>
        <td id="file-models-py-LC155" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">slug</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L156" class="blob-num js-line-number" data-line-number="156"/>
        <td id="file-models-py-LC156" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-v">self</span>.title.lower().replace(<span class="pl-s"><span class="pl-pds">'</span> <span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>_<span class="pl-pds">'</span></span>).replace(<span class="pl-s"><span class="pl-pds">'</span>:<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>).replace(<span class="pl-s"><span class="pl-pds">'</span>-<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>).replace(<span class="pl-s"><span class="pl-pds">'</span>.<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L157" class="blob-num js-line-number" data-line-number="157"/>
        <td id="file-models-py-LC157" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L158" class="blob-num js-line-number" data-line-number="158"/>
        <td id="file-models-py-LC158" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">property</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L159" class="blob-num js-line-number" data-line-number="159"/>
        <td id="file-models-py-LC159" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">content</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L160" class="blob-num js-line-number" data-line-number="160"/>
        <td id="file-models-py-LC160" class="blob-code blob-code-inner js-file-line">        rtn <span class="pl-k">=</span> <span class="pl-v">self</span>._content</td>
      </tr>
      <tr>
        <td id="file-models-py-L161" class="blob-num js-line-number" data-line-number="161"/>
        <td id="file-models-py-LC161" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-v">self</span>.use_jinja:</td>
      </tr>
      <tr>
        <td id="file-models-py-L162" class="blob-num js-line-number" data-line-number="162"/>
        <td id="file-models-py-LC162" class="blob-code blob-code-inner js-file-line">            rtn <span class="pl-k">=</span> <span class="pl-v">self</span>._env.from_string(<span class="pl-v">self</span>._content).render(<span class="pl-k">**</span><span class="pl-v">self</span>._context)</td>
      </tr>
      <tr>
        <td id="file-models-py-L163" class="blob-num js-line-number" data-line-number="163"/>
        <td id="file-models-py-LC163" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> rtn</td>
      </tr>
      <tr>
        <td id="file-models-py-L164" class="blob-num js-line-number" data-line-number="164"/>
        <td id="file-models-py-LC164" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L165" class="blob-num js-line-number" data-line-number="165"/>
        <td id="file-models-py-LC165" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@content.setter</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L166" class="blob-num js-line-number" data-line-number="166"/>
        <td id="file-models-py-LC166" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">content</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-smi">data</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L167" class="blob-num js-line-number" data-line-number="167"/>
        <td id="file-models-py-LC167" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>._content <span class="pl-k">=</span> data</td>
      </tr>
      <tr>
        <td id="file-models-py-L168" class="blob-num js-line-number" data-line-number="168"/>
        <td id="file-models-py-LC168" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.update()</td>
      </tr>
      <tr>
        <td id="file-models-py-L169" class="blob-num js-line-number" data-line-number="169"/>
        <td id="file-models-py-LC169" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L170" class="blob-num js-line-number" data-line-number="170"/>
        <td id="file-models-py-LC170" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">to_json</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L171" class="blob-num js-line-number" data-line-number="171"/>
        <td id="file-models-py-LC171" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">dict</span>(</td>
      </tr>
      <tr>
        <td id="file-models-py-L172" class="blob-num js-line-number" data-line-number="172"/>
        <td id="file-models-py-LC172" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">title</span><span class="pl-k">=</span><span class="pl-v">self</span>.title,</td>
      </tr>
      <tr>
        <td id="file-models-py-L173" class="blob-num js-line-number" data-line-number="173"/>
        <td id="file-models-py-LC173" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">slug</span><span class="pl-k">=</span><span class="pl-v">self</span>.slug,</td>
      </tr>
      <tr>
        <td id="file-models-py-L174" class="blob-num js-line-number" data-line-number="174"/>
        <td id="file-models-py-LC174" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">content</span><span class="pl-k">=</span><span class="pl-v">self</span>.content,</td>
      </tr>
      <tr>
        <td id="file-models-py-L175" class="blob-num js-line-number" data-line-number="175"/>
        <td id="file-models-py-LC175" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">date_added</span><span class="pl-k">=</span>format_date(<span class="pl-v">self</span>.date_added),</td>
      </tr>
      <tr>
        <td id="file-models-py-L176" class="blob-num js-line-number" data-line-number="176"/>
        <td id="file-models-py-LC176" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">id</span><span class="pl-k">=</span><span class="pl-v">self</span>.id,</td>
      </tr>
      <tr>
        <td id="file-models-py-L177" class="blob-num js-line-number" data-line-number="177"/>
        <td id="file-models-py-LC177" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">tags</span><span class="pl-k">=</span>[x.name <span class="pl-k">for</span> x <span class="pl-k">in</span> <span class="pl-v">self</span>.tags.all()],</td>
      </tr>
      <tr>
        <td id="file-models-py-L178" class="blob-num js-line-number" data-line-number="178"/>
        <td id="file-models-py-LC178" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">comments</span><span class="pl-k">=</span>[x.to_json() <span class="pl-k">for</span> x <span class="pl-k">in</span> <span class="pl-v">self</span>.comments.all()],</td>
      </tr>
      <tr>
        <td id="file-models-py-L179" class="blob-num js-line-number" data-line-number="179"/>
        <td id="file-models-py-LC179" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">author_id</span><span class="pl-k">=</span><span class="pl-v">self</span>.author_id,</td>
      </tr>
      <tr>
        <td id="file-models-py-L180" class="blob-num js-line-number" data-line-number="180"/>
        <td id="file-models-py-LC180" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">author</span><span class="pl-k">=</span><span class="pl-v">self</span>.author.username</td>
      </tr>
      <tr>
        <td id="file-models-py-L181" class="blob-num js-line-number" data-line-number="181"/>
        <td id="file-models-py-LC181" class="blob-code blob-code-inner js-file-line">        )</td>
      </tr>
      <tr>
        <td id="file-models-py-L182" class="blob-num js-line-number" data-line-number="182"/>
        <td id="file-models-py-LC182" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L183" class="blob-num js-line-number" data-line-number="183"/>
        <td id="file-models-py-LC183" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L184" class="blob-num js-line-number" data-line-number="184"/>
        <td id="file-models-py-LC184" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">_add_to_ctx</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-smi">key</span>,<span class="pl-smi">val</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L185" class="blob-num js-line-number" data-line-number="185"/>
        <td id="file-models-py-LC185" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>._context[key] <span class="pl-k">=</span> val</td>
      </tr>
      <tr>
        <td id="file-models-py-L186" class="blob-num js-line-number" data-line-number="186"/>
        <td id="file-models-py-LC186" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L187" class="blob-num js-line-number" data-line-number="187"/>
        <td id="file-models-py-LC187" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__repr__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L188" class="blob-num js-line-number" data-line-number="188"/>
        <td id="file-models-py-LC188" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span>&lt;Post:<span class="pl-c1">{0}</span><span class="pl-pds">'</span></span>.format(<span class="pl-v">self</span>.slug)</td>
      </tr>
      <tr>
        <td id="file-models-py-L189" class="blob-num js-line-number" data-line-number="189"/>
        <td id="file-models-py-LC189" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L190" class="blob-num js-line-number" data-line-number="190"/>
        <td id="file-models-py-LC190" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L191" class="blob-num js-line-number" data-line-number="191"/>
        <td id="file-models-py-LC191" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">Email</span>(<span class="pl-e">BaseModel</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L192" class="blob-num js-line-number" data-line-number="192"/>
        <td id="file-models-py-LC192" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L193" class="blob-num js-line-number" data-line-number="193"/>
        <td id="file-models-py-LC193" class="blob-code blob-code-inner js-file-line">    __table_args__ <span class="pl-k">=</span> (</td>
      </tr>
      <tr>
        <td id="file-models-py-L194" class="blob-num js-line-number" data-line-number="194"/>
        <td id="file-models-py-LC194" class="blob-code blob-code-inner js-file-line">        (</td>
      </tr>
      <tr>
        <td id="file-models-py-L195" class="blob-num js-line-number" data-line-number="195"/>
        <td id="file-models-py-LC195" class="blob-code blob-code-inner js-file-line">        sa.UniqueConstraint(<span class="pl-s"><span class="pl-pds">'</span>address<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>app_user_id<span class="pl-pds">'</span></span>),</td>
      </tr>
      <tr>
        <td id="file-models-py-L196" class="blob-num js-line-number" data-line-number="196"/>
        <td id="file-models-py-LC196" class="blob-code blob-code-inner js-file-line">        sa.UniqueConstraint(<span class="pl-s"><span class="pl-pds">'</span>address<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>public_user_id<span class="pl-pds">'</span></span>),)</td>
      </tr>
      <tr>
        <td id="file-models-py-L197" class="blob-num js-line-number" data-line-number="197"/>
        <td id="file-models-py-LC197" class="blob-code blob-code-inner js-file-line">)</td>
      </tr>
      <tr>
        <td id="file-models-py-L198" class="blob-num js-line-number" data-line-number="198"/>
        <td id="file-models-py-LC198" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L199" class="blob-num js-line-number" data-line-number="199"/>
        <td id="file-models-py-LC199" class="blob-code blob-code-inner js-file-line">    address <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L200" class="blob-num js-line-number" data-line-number="200"/>
        <td id="file-models-py-LC200" class="blob-code blob-code-inner js-file-line">    user_data_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>user_profiles.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L201" class="blob-num js-line-number" data-line-number="201"/>
        <td id="file-models-py-LC201" class="blob-code blob-code-inner js-file-line">    app_user_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>app_users.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L202" class="blob-num js-line-number" data-line-number="202"/>
        <td id="file-models-py-LC202" class="blob-code blob-code-inner js-file-line">    user_type <span class="pl-k">=</span> sa.Column(sa.Enum(<span class="pl-s"><span class="pl-pds">'</span>public<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>app<span class="pl-pds">'</span></span>,<span class="pl-v">name</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>user_type<span class="pl-pds">'</span></span>),<span class="pl-v">default</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>public<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L203" class="blob-num js-line-number" data-line-number="203"/>
        <td id="file-models-py-LC203" class="blob-code blob-code-inner js-file-line">    public_user_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>public_users.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L204" class="blob-num js-line-number" data-line-number="204"/>
        <td id="file-models-py-LC204" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L205" class="blob-num js-line-number" data-line-number="205"/>
        <td id="file-models-py-LC205" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">to_json</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L206" class="blob-num js-line-number" data-line-number="206"/>
        <td id="file-models-py-LC206" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">dict</span>(</td>
      </tr>
      <tr>
        <td id="file-models-py-L207" class="blob-num js-line-number" data-line-number="207"/>
        <td id="file-models-py-LC207" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">address</span><span class="pl-k">=</span><span class="pl-v">self</span>.address,</td>
      </tr>
      <tr>
        <td id="file-models-py-L208" class="blob-num js-line-number" data-line-number="208"/>
        <td id="file-models-py-LC208" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">user_id</span><span class="pl-k">=</span><span class="pl-c1">getattr</span>(<span class="pl-v">self</span>,<span class="pl-v">self</span>.user_id_col)</td>
      </tr>
      <tr>
        <td id="file-models-py-L209" class="blob-num js-line-number" data-line-number="209"/>
        <td id="file-models-py-LC209" class="blob-code blob-code-inner js-file-line">        )</td>
      </tr>
      <tr>
        <td id="file-models-py-L210" class="blob-num js-line-number" data-line-number="210"/>
        <td id="file-models-py-LC210" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L211" class="blob-num js-line-number" data-line-number="211"/>
        <td id="file-models-py-LC211" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">property</span>  </td>
      </tr>
      <tr>
        <td id="file-models-py-L212" class="blob-num js-line-number" data-line-number="212"/>
        <td id="file-models-py-LC212" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">user_id_col</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L213" class="blob-num js-line-number" data-line-number="213"/>
        <td id="file-models-py-LC213" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-c1">{0}</span>_user_id<span class="pl-pds">'</span></span>.format(<span class="pl-v">self</span>.user_type)</td>
      </tr>
      <tr>
        <td id="file-models-py-L214" class="blob-num js-line-number" data-line-number="214"/>
        <td id="file-models-py-LC214" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L215" class="blob-num js-line-number" data-line-number="215"/>
        <td id="file-models-py-LC215" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">property</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L216" class="blob-num js-line-number" data-line-number="216"/>
        <td id="file-models-py-LC216" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">user</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L217" class="blob-num js-line-number" data-line-number="217"/>
        <td id="file-models-py-LC217" class="blob-code blob-code-inner js-file-line">        user_types <span class="pl-k">=</span> <span class="pl-c1">dict</span>(<span class="pl-v">app</span><span class="pl-k">=</span>AppUser,<span class="pl-v">public</span><span class="pl-k">=</span>PublicUser)</td>
      </tr>
      <tr>
        <td id="file-models-py-L218" class="blob-num js-line-number" data-line-number="218"/>
        <td id="file-models-py-LC218" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> user_types[<span class="pl-v">self</span>.user_type].get_by_id(<span class="pl-c1">getattr</span>(<span class="pl-v">self</span>,<span class="pl-v">self</span>.user_id_col)) </td>
      </tr>
      <tr>
        <td id="file-models-py-L219" class="blob-num js-line-number" data-line-number="219"/>
        <td id="file-models-py-LC219" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L220" class="blob-num js-line-number" data-line-number="220"/>
        <td id="file-models-py-LC220" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L221" class="blob-num js-line-number" data-line-number="221"/>
        <td id="file-models-py-LC221" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">UserProfile</span>(<span class="pl-e">BaseModel</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L222" class="blob-num js-line-number" data-line-number="222"/>
        <td id="file-models-py-LC222" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L223" class="blob-num js-line-number" data-line-number="223"/>
        <td id="file-models-py-LC223" class="blob-code blob-code-inner js-file-line">    first_name <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L224" class="blob-num js-line-number" data-line-number="224"/>
        <td id="file-models-py-LC224" class="blob-code blob-code-inner js-file-line">    last_name <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L225" class="blob-num js-line-number" data-line-number="225"/>
        <td id="file-models-py-LC225" class="blob-code blob-code-inner js-file-line">    age <span class="pl-k">=</span> sa.Column(sa.Integer)</td>
      </tr>
      <tr>
        <td id="file-models-py-L226" class="blob-num js-line-number" data-line-number="226"/>
        <td id="file-models-py-LC226" class="blob-code blob-code-inner js-file-line">    date_added <span class="pl-k">=</span> sa.Column(sa.DateTime,<span class="pl-v">default</span><span class="pl-k">=</span>sa.func.now())</td>
      </tr>
      <tr>
        <td id="file-models-py-L227" class="blob-num js-line-number" data-line-number="227"/>
        <td id="file-models-py-LC227" class="blob-code blob-code-inner js-file-line">    location <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L228" class="blob-num js-line-number" data-line-number="228"/>
        <td id="file-models-py-LC228" class="blob-code blob-code-inner js-file-line">    emails <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>Email<span class="pl-pds">'</span></span>,<span class="pl-v">backref</span><span class="pl-k">=</span>sa.orm.backref(<span class="pl-s"><span class="pl-pds">'</span>user_profile<span class="pl-pds">'</span></span>),<span class="pl-v">lazy</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>dynamic<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L229" class="blob-num js-line-number" data-line-number="229"/>
        <td id="file-models-py-LC229" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L230" class="blob-num js-line-number" data-line-number="230"/>
        <td id="file-models-py-LC230" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__repr__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L231" class="blob-num js-line-number" data-line-number="231"/>
        <td id="file-models-py-LC231" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> (</td>
      </tr>
      <tr>
        <td id="file-models-py-L232" class="blob-num js-line-number" data-line-number="232"/>
        <td id="file-models-py-LC232" class="blob-code blob-code-inner js-file-line">                <span class="pl-s"><span class="pl-pds">'</span>FirstName:<span class="pl-c1">{<span class="pl-c1">:^20</span>}</span><span class="pl-cce">\n</span>LastName:<span class="pl-c1">{<span class="pl-c1">:^20</span>}</span><span class="pl-cce">\n</span><span class="pl-pds">'</span></span></td>
      </tr>
      <tr>
        <td id="file-models-py-L233" class="blob-num js-line-number" data-line-number="233"/>
        <td id="file-models-py-LC233" class="blob-code blob-code-inner js-file-line">                <span class="pl-s"><span class="pl-pds">'</span>Age:<span class="pl-c1">{<span class="pl-k">!s</span><span class="pl-c1">:^20</span>}</span><span class="pl-cce">\n</span>Date:<span class="pl-c1">{<span class="pl-k">!s</span><span class="pl-c1">:^20</span>}</span><span class="pl-cce">\n</span>Location:<span class="pl-c1">{<span class="pl-c1">:^20</span>}</span><span class="pl-cce">\n</span><span class="pl-pds">'</span></span></td>
      </tr>
      <tr>
        <td id="file-models-py-L234" class="blob-num js-line-number" data-line-number="234"/>
        <td id="file-models-py-LC234" class="blob-code blob-code-inner js-file-line">               ).format(</td>
      </tr>
      <tr>
        <td id="file-models-py-L235" class="blob-num js-line-number" data-line-number="235"/>
        <td id="file-models-py-LC235" class="blob-code blob-code-inner js-file-line">                    <span class="pl-v">self</span>.first_name,<span class="pl-v">self</span>.last_name,</td>
      </tr>
      <tr>
        <td id="file-models-py-L236" class="blob-num js-line-number" data-line-number="236"/>
        <td id="file-models-py-LC236" class="blob-code blob-code-inner js-file-line">                    <span class="pl-v">self</span>.age,<span class="pl-v">self</span>.date_added,<span class="pl-v">self</span>.location</td>
      </tr>
      <tr>
        <td id="file-models-py-L237" class="blob-num js-line-number" data-line-number="237"/>
        <td id="file-models-py-LC237" class="blob-code blob-code-inner js-file-line">               )</td>
      </tr>
      <tr>
        <td id="file-models-py-L238" class="blob-num js-line-number" data-line-number="238"/>
        <td id="file-models-py-LC238" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L239" class="blob-num js-line-number" data-line-number="239"/>
        <td id="file-models-py-LC239" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">AppUser</span>(<span class="pl-e">PasswordHashMixin</span>,<span class="pl-e">BaseModel</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L240" class="blob-num js-line-number" data-line-number="240"/>
        <td id="file-models-py-LC240" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L241" class="blob-num js-line-number" data-line-number="241"/>
        <td id="file-models-py-LC241" class="blob-code blob-code-inner js-file-line">    emails <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>Email<span class="pl-pds">'</span></span>,<span class="pl-v">lazy</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>dynamic<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L242" class="blob-num js-line-number" data-line-number="242"/>
        <td id="file-models-py-LC242" class="blob-code blob-code-inner js-file-line">    username <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>),<span class="pl-v">unique</span><span class="pl-k">=</span><span class="pl-c1">True</span>,<span class="pl-v">nullable</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L243" class="blob-num js-line-number" data-line-number="243"/>
        <td id="file-models-py-LC243" class="blob-code blob-code-inner js-file-line">    user_profile_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>user_profiles.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L244" class="blob-num js-line-number" data-line-number="244"/>
        <td id="file-models-py-LC244" class="blob-code blob-code-inner js-file-line">    profile <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>UserProfile<span class="pl-pds">'</span></span>,<span class="pl-v">uselist</span><span class="pl-k">=</span><span class="pl-c1">False</span>,<span class="pl-v">backref</span><span class="pl-k">=</span>sa.orm.backref(<span class="pl-s"><span class="pl-pds">'</span>user<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L245" class="blob-num js-line-number" data-line-number="245"/>
        <td id="file-models-py-LC245" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L246" class="blob-num js-line-number" data-line-number="246"/>
        <td id="file-models-py-LC246" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__repr__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L247" class="blob-num js-line-number" data-line-number="247"/>
        <td id="file-models-py-LC247" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">str</span>(<span class="pl-v">self</span>.username)</td>
      </tr>
      <tr>
        <td id="file-models-py-L248" class="blob-num js-line-number" data-line-number="248"/>
        <td id="file-models-py-LC248" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L249" class="blob-num js-line-number" data-line-number="249"/>
        <td id="file-models-py-LC249" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-k">*</span><span class="pl-smi">args</span>,<span class="pl-k">**</span><span class="pl-smi">kwargs</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L250" class="blob-num js-line-number" data-line-number="250"/>
        <td id="file-models-py-LC250" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span> <span class="pl-k">in</span> kwargs:</td>
      </tr>
      <tr>
        <td id="file-models-py-L251" class="blob-num js-line-number" data-line-number="251"/>
        <td id="file-models-py-LC251" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">self</span>.pwhash <span class="pl-k">=</span> kwargs.pop(<span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L252" class="blob-num js-line-number" data-line-number="252"/>
        <td id="file-models-py-LC252" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-s"><span class="pl-pds">'</span>email<span class="pl-pds">'</span></span> <span class="pl-k">in</span> kwargs:</td>
      </tr>
      <tr>
        <td id="file-models-py-L253" class="blob-num js-line-number" data-line-number="253"/>
        <td id="file-models-py-LC253" class="blob-code blob-code-inner js-file-line">            email <span class="pl-k">=</span> [Email(<span class="pl-v">address</span><span class="pl-k">=</span>kwargs.pop(<span class="pl-s"><span class="pl-pds">'</span>email<span class="pl-pds">'</span></span>),<span class="pl-v">user_type</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>app<span class="pl-pds">'</span></span>).save()]</td>
      </tr>
      <tr>
        <td id="file-models-py-L254" class="blob-num js-line-number" data-line-number="254"/>
        <td id="file-models-py-LC254" class="blob-code blob-code-inner js-file-line">            kwargs[<span class="pl-s"><span class="pl-pds">'</span>emails<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> kwargs.get(<span class="pl-s"><span class="pl-pds">'</span>emails<span class="pl-pds">'</span></span>) <span class="pl-k">and</span> (email <span class="pl-k">+</span> kwargs.pop(<span class="pl-s"><span class="pl-pds">'</span>emails<span class="pl-pds">'</span></span>)) <span class="pl-k">or</span> email</td>
      </tr>
      <tr>
        <td id="file-models-py-L255" class="blob-num js-line-number" data-line-number="255"/>
        <td id="file-models-py-LC255" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">super</span>(AppUser,<span class="pl-v">self</span>).<span class="pl-c1">__init__</span>(<span class="pl-k">*</span>args,<span class="pl-k">**</span>kwargs)</td>
      </tr>
      <tr>
        <td id="file-models-py-L256" class="blob-num js-line-number" data-line-number="256"/>
        <td id="file-models-py-LC256" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.profile <span class="pl-k">=</span> UserProfile(<span class="pl-v">id</span><span class="pl-k">=</span><span class="pl-v">self</span>.id).save()</td>
      </tr>
      <tr>
        <td id="file-models-py-L257" class="blob-num js-line-number" data-line-number="257"/>
        <td id="file-models-py-LC257" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L258" class="blob-num js-line-number" data-line-number="258"/>
        <td id="file-models-py-LC258" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@</span><span class="pl-c1">property</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L259" class="blob-num js-line-number" data-line-number="259"/>
        <td id="file-models-py-LC259" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">pwhash</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L260" class="blob-num js-line-number" data-line-number="260"/>
        <td id="file-models-py-LC260" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">raise</span> <span class="pl-c1">ValueError</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L261" class="blob-num js-line-number" data-line-number="261"/>
        <td id="file-models-py-LC261" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L262" class="blob-num js-line-number" data-line-number="262"/>
        <td id="file-models-py-LC262" class="blob-code blob-code-inner js-file-line">    <span class="pl-en">@pwhash.setter</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L263" class="blob-num js-line-number" data-line-number="263"/>
        <td id="file-models-py-LC263" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">pwhash</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-smi">data</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L264" class="blob-num js-line-number" data-line-number="264"/>
        <td id="file-models-py-LC264" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>._pwhash <span class="pl-k">=</span> hashpw(data,gensalt())</td>
      </tr>
      <tr>
        <td id="file-models-py-L265" class="blob-num js-line-number" data-line-number="265"/>
        <td id="file-models-py-LC265" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L266" class="blob-num js-line-number" data-line-number="266"/>
        <td id="file-models-py-LC266" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">check_password</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-smi">pw</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L267" class="blob-num js-line-number" data-line-number="267"/>
        <td id="file-models-py-LC267" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> checkpw(pw,<span class="pl-v">self</span>._pwhash)</td>
      </tr>
      <tr>
        <td id="file-models-py-L268" class="blob-num js-line-number" data-line-number="268"/>
        <td id="file-models-py-LC268" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L269" class="blob-num js-line-number" data-line-number="269"/>
        <td id="file-models-py-LC269" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">to_json</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L270" class="blob-num js-line-number" data-line-number="270"/>
        <td id="file-models-py-LC270" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">dict</span>(</td>
      </tr>
      <tr>
        <td id="file-models-py-L271" class="blob-num js-line-number" data-line-number="271"/>
        <td id="file-models-py-LC271" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">username</span><span class="pl-k">=</span><span class="pl-v">self</span>.username,</td>
      </tr>
      <tr>
        <td id="file-models-py-L272" class="blob-num js-line-number" data-line-number="272"/>
        <td id="file-models-py-LC272" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">id</span><span class="pl-k">=</span><span class="pl-v">self</span>.id,</td>
      </tr>
      <tr>
        <td id="file-models-py-L273" class="blob-num js-line-number" data-line-number="273"/>
        <td id="file-models-py-LC273" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">emails</span><span class="pl-k">=</span>[x.to_json() <span class="pl-k">for</span> x <span class="pl-k">in</span> <span class="pl-v">self</span>.emails.all()],</td>
      </tr>
      <tr>
        <td id="file-models-py-L274" class="blob-num js-line-number" data-line-number="274"/>
        <td id="file-models-py-LC274" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">is_public</span><span class="pl-k">=</span><span class="pl-c1">False</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L275" class="blob-num js-line-number" data-line-number="275"/>
        <td id="file-models-py-LC275" class="blob-code blob-code-inner js-file-line">        )</td>
      </tr>
      <tr>
        <td id="file-models-py-L276" class="blob-num js-line-number" data-line-number="276"/>
        <td id="file-models-py-LC276" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L277" class="blob-num js-line-number" data-line-number="277"/>
        <td id="file-models-py-LC277" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L278" class="blob-num js-line-number" data-line-number="278"/>
        <td id="file-models-py-LC278" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">Tag</span>(<span class="pl-e">BaseModel</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L279" class="blob-num js-line-number" data-line-number="279"/>
        <td id="file-models-py-LC279" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L280" class="blob-num js-line-number" data-line-number="280"/>
        <td id="file-models-py-LC280" class="blob-code blob-code-inner js-file-line">    name <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>),<span class="pl-v">unique</span><span class="pl-k">=</span><span class="pl-c1">True</span>,<span class="pl-v">nullable</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L281" class="blob-num js-line-number" data-line-number="281"/>
        <td id="file-models-py-LC281" class="blob-code blob-code-inner js-file-line">    description <span class="pl-k">=</span> sa.Column(sa.Text)</td>
      </tr>
      <tr>
        <td id="file-models-py-L282" class="blob-num js-line-number" data-line-number="282"/>
        <td id="file-models-py-LC282" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L283" class="blob-num js-line-number" data-line-number="283"/>
        <td id="file-models-py-LC283" class="blob-code blob-code-inner js-file-line">    <span class="pl-c">#relationships</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L284" class="blob-num js-line-number" data-line-number="284"/>
        <td id="file-models-py-LC284" class="blob-code blob-code-inner js-file-line">    posts <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>Post<span class="pl-pds">'</span></span>,</td>
      </tr>
      <tr>
        <td id="file-models-py-L285" class="blob-num js-line-number" data-line-number="285"/>
        <td id="file-models-py-LC285" class="blob-code blob-code-inner js-file-line">                                <span class="pl-v">lazy</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>dynamic<span class="pl-pds">'</span></span>,</td>
      </tr>
      <tr>
        <td id="file-models-py-L286" class="blob-num js-line-number" data-line-number="286"/>
        <td id="file-models-py-LC286" class="blob-code blob-code-inner js-file-line">                                <span class="pl-v">secondary</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>posts_tags<span class="pl-pds">'</span></span></td>
      </tr>
      <tr>
        <td id="file-models-py-L287" class="blob-num js-line-number" data-line-number="287"/>
        <td id="file-models-py-LC287" class="blob-code blob-code-inner js-file-line">    )</td>
      </tr>
      <tr>
        <td id="file-models-py-L288" class="blob-num js-line-number" data-line-number="288"/>
        <td id="file-models-py-LC288" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L289" class="blob-num js-line-number" data-line-number="289"/>
        <td id="file-models-py-LC289" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">to_json</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L290" class="blob-num js-line-number" data-line-number="290"/>
        <td id="file-models-py-LC290" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">dict</span>(</td>
      </tr>
      <tr>
        <td id="file-models-py-L291" class="blob-num js-line-number" data-line-number="291"/>
        <td id="file-models-py-LC291" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">name</span><span class="pl-k">=</span><span class="pl-v">self</span>.name,</td>
      </tr>
      <tr>
        <td id="file-models-py-L292" class="blob-num js-line-number" data-line-number="292"/>
        <td id="file-models-py-LC292" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">description</span><span class="pl-k">=</span><span class="pl-v">self</span>.description,</td>
      </tr>
      <tr>
        <td id="file-models-py-L293" class="blob-num js-line-number" data-line-number="293"/>
        <td id="file-models-py-LC293" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">id</span><span class="pl-k">=</span><span class="pl-v">self</span>.id</td>
      </tr>
      <tr>
        <td id="file-models-py-L294" class="blob-num js-line-number" data-line-number="294"/>
        <td id="file-models-py-LC294" class="blob-code blob-code-inner js-file-line">        )</td>
      </tr>
      <tr>
        <td id="file-models-py-L295" class="blob-num js-line-number" data-line-number="295"/>
        <td id="file-models-py-LC295" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L296" class="blob-num js-line-number" data-line-number="296"/>
        <td id="file-models-py-LC296" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">Comment</span>(<span class="pl-e">BaseModel</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L297" class="blob-num js-line-number" data-line-number="297"/>
        <td id="file-models-py-LC297" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L298" class="blob-num js-line-number" data-line-number="298"/>
        <td id="file-models-py-LC298" class="blob-code blob-code-inner js-file-line">    subject <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L299" class="blob-num js-line-number" data-line-number="299"/>
        <td id="file-models-py-LC299" class="blob-code blob-code-inner js-file-line">    post_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>posts.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L300" class="blob-num js-line-number" data-line-number="300"/>
        <td id="file-models-py-LC300" class="blob-code blob-code-inner js-file-line">    parent_comment_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>comments.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L301" class="blob-num js-line-number" data-line-number="301"/>
        <td id="file-models-py-LC301" class="blob-code blob-code-inner js-file-line">    date_added <span class="pl-k">=</span> sa.Column(sa.DateTime,<span class="pl-v">default</span><span class="pl-k">=</span>sa.func.now())</td>
      </tr>
      <tr>
        <td id="file-models-py-L302" class="blob-num js-line-number" data-line-number="302"/>
        <td id="file-models-py-LC302" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L303" class="blob-num js-line-number" data-line-number="303"/>
        <td id="file-models-py-LC303" class="blob-code blob-code-inner js-file-line">    content <span class="pl-k">=</span> sa.Column(sa.Text)</td>
      </tr>
      <tr>
        <td id="file-models-py-L304" class="blob-num js-line-number" data-line-number="304"/>
        <td id="file-models-py-LC304" class="blob-code blob-code-inner js-file-line">    author_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>app_users.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L305" class="blob-num js-line-number" data-line-number="305"/>
        <td id="file-models-py-LC305" class="blob-code blob-code-inner js-file-line">    author <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>AppUser<span class="pl-pds">'</span></span>,<span class="pl-v">backref</span><span class="pl-k">=</span>sa.orm.backref(<span class="pl-s"><span class="pl-pds">'</span>comments<span class="pl-pds">'</span></span>,<span class="pl-v">lazy</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>dynamic<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L306" class="blob-num js-line-number" data-line-number="306"/>
        <td id="file-models-py-LC306" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L307" class="blob-num js-line-number" data-line-number="307"/>
        <td id="file-models-py-LC307" class="blob-code blob-code-inner js-file-line">    replys <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>Comment<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L308" class="blob-num js-line-number" data-line-number="308"/>
        <td id="file-models-py-LC308" class="blob-code blob-code-inner js-file-line">    parent <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>Comment<span class="pl-pds">'</span></span>,<span class="pl-v">remote_side</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>Comment.parent_comment_id<span class="pl-pds">'</span></span>,<span class="pl-v">uselist</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L309" class="blob-num js-line-number" data-line-number="309"/>
        <td id="file-models-py-LC309" class="blob-code blob-code-inner js-file-line">    post <span class="pl-k">=</span> sa.orm.relationship(<span class="pl-s"><span class="pl-pds">'</span>Post<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L310" class="blob-num js-line-number" data-line-number="310"/>
        <td id="file-models-py-LC310" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L311" class="blob-num js-line-number" data-line-number="311"/>
        <td id="file-models-py-LC311" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">to_json</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L312" class="blob-num js-line-number" data-line-number="312"/>
        <td id="file-models-py-LC312" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">dict</span>(</td>
      </tr>
      <tr>
        <td id="file-models-py-L313" class="blob-num js-line-number" data-line-number="313"/>
        <td id="file-models-py-LC313" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">subject</span><span class="pl-k">=</span><span class="pl-v">self</span>.subject,</td>
      </tr>
      <tr>
        <td id="file-models-py-L314" class="blob-num js-line-number" data-line-number="314"/>
        <td id="file-models-py-LC314" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">post_id</span><span class="pl-k">=</span><span class="pl-v">self</span>.post_id,</td>
      </tr>
      <tr>
        <td id="file-models-py-L315" class="blob-num js-line-number" data-line-number="315"/>
        <td id="file-models-py-LC315" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">content</span><span class="pl-k">=</span><span class="pl-v">self</span>.content,</td>
      </tr>
      <tr>
        <td id="file-models-py-L316" class="blob-num js-line-number" data-line-number="316"/>
        <td id="file-models-py-LC316" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">author</span><span class="pl-k">=</span><span class="pl-v">self</span>.author <span class="pl-k">and</span> <span class="pl-v">self</span>.author.username <span class="pl-k">or</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>,</td>
      </tr>
      <tr>
        <td id="file-models-py-L317" class="blob-num js-line-number" data-line-number="317"/>
        <td id="file-models-py-LC317" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">id</span><span class="pl-k">=</span><span class="pl-v">self</span>.id,</td>
      </tr>
      <tr>
        <td id="file-models-py-L318" class="blob-num js-line-number" data-line-number="318"/>
        <td id="file-models-py-LC318" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">children</span><span class="pl-k">=</span>[x.to_json() <span class="pl-k">for</span> x <span class="pl-k">in</span> <span class="pl-v">self</span>.replys],</td>
      </tr>
      <tr>
        <td id="file-models-py-L319" class="blob-num js-line-number" data-line-number="319"/>
        <td id="file-models-py-LC319" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">parent</span><span class="pl-k">=</span><span class="pl-v">self</span>.parent_comment_id,</td>
      </tr>
      <tr>
        <td id="file-models-py-L320" class="blob-num js-line-number" data-line-number="320"/>
        <td id="file-models-py-LC320" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">date</span><span class="pl-k">=</span>format_date(<span class="pl-v">self</span>.date_added)</td>
      </tr>
      <tr>
        <td id="file-models-py-L321" class="blob-num js-line-number" data-line-number="321"/>
        <td id="file-models-py-LC321" class="blob-code blob-code-inner js-file-line">        )</td>
      </tr>
      <tr>
        <td id="file-models-py-L322" class="blob-num js-line-number" data-line-number="322"/>
        <td id="file-models-py-LC322" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L323" class="blob-num js-line-number" data-line-number="323"/>
        <td id="file-models-py-LC323" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L324" class="blob-num js-line-number" data-line-number="324"/>
        <td id="file-models-py-LC324" class="blob-code blob-code-inner js-file-line"><span class="pl-k">class</span> <span class="pl-en">PublicUser</span>(<span class="pl-e">BaseModel</span>,<span class="pl-e">PasswordHashMixin</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L325" class="blob-num js-line-number" data-line-number="325"/>
        <td id="file-models-py-LC325" class="blob-code blob-code-inner js-file-line">    username <span class="pl-k">=</span> sa.Column(sa.String(<span class="pl-c1">255</span>),<span class="pl-v">unique</span><span class="pl-k">=</span><span class="pl-c1">True</span>,<span class="pl-v">nullable</span><span class="pl-k">=</span><span class="pl-c1">False</span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L326" class="blob-num js-line-number" data-line-number="326"/>
        <td id="file-models-py-LC326" class="blob-code blob-code-inner js-file-line">    email_id <span class="pl-k">=</span> sa.Column(sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>emails.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L327" class="blob-num js-line-number" data-line-number="327"/>
        <td id="file-models-py-LC327" class="blob-code blob-code-inner js-file-line">    email <span class="pl-k">=</span> sa.orm.relation(<span class="pl-s"><span class="pl-pds">'</span>Email<span class="pl-pds">'</span></span>,<span class="pl-v">foreign_keys</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>[PublicUser.email_id]<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L328" class="blob-num js-line-number" data-line-number="328"/>
        <td id="file-models-py-LC328" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L329" class="blob-num js-line-number" data-line-number="329"/>
        <td id="file-models-py-LC329" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-c1">__init__</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>,<span class="pl-k">*</span><span class="pl-smi">args</span>,<span class="pl-k">**</span><span class="pl-smi">kwargs</span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L330" class="blob-num js-line-number" data-line-number="330"/>
        <td id="file-models-py-LC330" class="blob-code blob-code-inner js-file-line">        addr <span class="pl-k">=</span> <span class="pl-c1">None</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L331" class="blob-num js-line-number" data-line-number="331"/>
        <td id="file-models-py-LC331" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span> <span class="pl-k">in</span> kwargs:</td>
      </tr>
      <tr>
        <td id="file-models-py-L332" class="blob-num js-line-number" data-line-number="332"/>
        <td id="file-models-py-LC332" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">self</span>.pwhash <span class="pl-k">=</span> kwargs.pop(<span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L333" class="blob-num js-line-number" data-line-number="333"/>
        <td id="file-models-py-LC333" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-s"><span class="pl-pds">'</span>email<span class="pl-pds">'</span></span> <span class="pl-k">in</span> kwargs:</td>
      </tr>
      <tr>
        <td id="file-models-py-L334" class="blob-num js-line-number" data-line-number="334"/>
        <td id="file-models-py-LC334" class="blob-code blob-code-inner js-file-line">            addr <span class="pl-k">=</span> kwargs.pop(<span class="pl-s"><span class="pl-pds">'</span>email<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L335" class="blob-num js-line-number" data-line-number="335"/>
        <td id="file-models-py-LC335" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">self</span>.email <span class="pl-k">=</span> Email.get_new(<span class="pl-v">address</span><span class="pl-k">=</span>addr,<span class="pl-v">user_type</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>public<span class="pl-pds">'</span></span>)</td>
      </tr>
      <tr>
        <td id="file-models-py-L336" class="blob-num js-line-number" data-line-number="336"/>
        <td id="file-models-py-LC336" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-s"><span class="pl-pds">'</span>username<span class="pl-pds">'</span></span> <span class="pl-k">in</span> kwargs:</td>
      </tr>
      <tr>
        <td id="file-models-py-L337" class="blob-num js-line-number" data-line-number="337"/>
        <td id="file-models-py-LC337" class="blob-code blob-code-inner js-file-line">            kwargs[<span class="pl-s"><span class="pl-pds">'</span>username<span class="pl-pds">'</span></span>] <span class="pl-k">=</span> <span class="pl-v">self</span>.email.address</td>
      </tr>
      <tr>
        <td id="file-models-py-L338" class="blob-num js-line-number" data-line-number="338"/>
        <td id="file-models-py-LC338" class="blob-code blob-code-inner js-file-line">        <span class="pl-c1">super</span>(PublicUser,<span class="pl-v">self</span>).<span class="pl-c1">__init__</span>(<span class="pl-k">*</span>args,<span class="pl-k">**</span>kwargs)</td>
      </tr>
      <tr>
        <td id="file-models-py-L339" class="blob-num js-line-number" data-line-number="339"/>
        <td id="file-models-py-LC339" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.save()</td>
      </tr>
      <tr>
        <td id="file-models-py-L340" class="blob-num js-line-number" data-line-number="340"/>
        <td id="file-models-py-LC340" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.email.public_user_id <span class="pl-k">=</span> <span class="pl-v">self</span>.id</td>
      </tr>
      <tr>
        <td id="file-models-py-L341" class="blob-num js-line-number" data-line-number="341"/>
        <td id="file-models-py-LC341" class="blob-code blob-code-inner js-file-line">        <span class="pl-v">self</span>.email.save()</td>
      </tr>
      <tr>
        <td id="file-models-py-L342" class="blob-num js-line-number" data-line-number="342"/>
        <td id="file-models-py-LC342" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L343" class="blob-num js-line-number" data-line-number="343"/>
        <td id="file-models-py-LC343" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L344" class="blob-num js-line-number" data-line-number="344"/>
        <td id="file-models-py-LC344" class="blob-code blob-code-inner js-file-line">    <span class="pl-k">def</span> <span class="pl-en">to_json</span>(<span class="pl-smi"><span class="pl-smi">self</span></span>):</td>
      </tr>
      <tr>
        <td id="file-models-py-L345" class="blob-num js-line-number" data-line-number="345"/>
        <td id="file-models-py-LC345" class="blob-code blob-code-inner js-file-line">        <span class="pl-k">return</span> <span class="pl-c1">dict</span>(</td>
      </tr>
      <tr>
        <td id="file-models-py-L346" class="blob-num js-line-number" data-line-number="346"/>
        <td id="file-models-py-LC346" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">username</span><span class="pl-k">=</span><span class="pl-v">self</span>.username,</td>
      </tr>
      <tr>
        <td id="file-models-py-L347" class="blob-num js-line-number" data-line-number="347"/>
        <td id="file-models-py-LC347" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">id</span><span class="pl-k">=</span><span class="pl-v">self</span>.id,</td>
      </tr>
      <tr>
        <td id="file-models-py-L348" class="blob-num js-line-number" data-line-number="348"/>
        <td id="file-models-py-LC348" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">email</span><span class="pl-k">=</span><span class="pl-v">self</span>.email.address,</td>
      </tr>
      <tr>
        <td id="file-models-py-L349" class="blob-num js-line-number" data-line-number="349"/>
        <td id="file-models-py-LC349" class="blob-code blob-code-inner js-file-line">            <span class="pl-v">is_public</span><span class="pl-k">=</span><span class="pl-c1">True</span></td>
      </tr>
      <tr>
        <td id="file-models-py-L350" class="blob-num js-line-number" data-line-number="350"/>
        <td id="file-models-py-LC350" class="blob-code blob-code-inner js-file-line">        )</td>
      </tr>
      <tr>
        <td id="file-models-py-L351" class="blob-num js-line-number" data-line-number="351"/>
        <td id="file-models-py-LC351" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-models-py-L352" class="blob-num js-line-number" data-line-number="352"/>
        <td id="file-models-py-LC352" class="blob-code blob-code-inner js-file-line">posts_tags <span class="pl-k">=</span>\</td>
      </tr>
      <tr>
        <td id="file-models-py-L353" class="blob-num js-line-number" data-line-number="353"/>
        <td id="file-models-py-LC353" class="blob-code blob-code-inner js-file-line">    sa.Table(</td>
      </tr>
      <tr>
        <td id="file-models-py-L354" class="blob-num js-line-number" data-line-number="354"/>
        <td id="file-models-py-LC354" class="blob-code blob-code-inner js-file-line">        <span class="pl-s"><span class="pl-pds">'</span>posts_tags<span class="pl-pds">'</span></span>,</td>
      </tr>
      <tr>
        <td id="file-models-py-L355" class="blob-num js-line-number" data-line-number="355"/>
        <td id="file-models-py-LC355" class="blob-code blob-code-inner js-file-line">        BaseModel.metadata,</td>
      </tr>
      <tr>
        <td id="file-models-py-L356" class="blob-num js-line-number" data-line-number="356"/>
        <td id="file-models-py-LC356" class="blob-code blob-code-inner js-file-line">        sa.Column(<span class="pl-s"><span class="pl-pds">'</span>post_id<span class="pl-pds">'</span></span>,sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>posts.id<span class="pl-pds">'</span></span>)),</td>
      </tr>
      <tr>
        <td id="file-models-py-L357" class="blob-num js-line-number" data-line-number="357"/>
        <td id="file-models-py-LC357" class="blob-code blob-code-inner js-file-line">        sa.Column(<span class="pl-s"><span class="pl-pds">'</span>tag_id<span class="pl-pds">'</span></span>,sa.Integer,sa.ForeignKey(<span class="pl-s"><span class="pl-pds">'</span>tags.id<span class="pl-pds">'</span></span>))</td>
      </tr>
      <tr>
        <td id="file-models-py-L358" class="blob-num js-line-number" data-line-number="358"/>
        <td id="file-models-py-LC358" class="blob-code blob-code-inner js-file-line">)</td>
      </tr>
</table>

  </div></body></html>