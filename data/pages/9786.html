<html><body><div><div class="post-text" itemprop="text">

<p>I've a following list:-</p>

<pre><code>a = [(1, 1), (2, 1), (3, 1), (4, 3), (5, 3), (6, 3), (7, 7), (8, 7), (9, 7)]
</code></pre>

<p>which is a list of tuples. Elements inside a tuple are of the format <code>(Id, ParentId)</code> Its root node whenever <code>Id == ParentId</code>. The list can be in any order of tuples.</p>

<p>I want to generate the following dictionary using the above list of tuples, </p>

<pre><code>output = [{
    'id': 1,
    'children': [{
        {
            'id': 3,
            'children': [{
                {
                    'id': 5
                },
                {
                    'id': 4
                },
                {
                    'id': 6
                }
            }]
        },
        {
            'id': 2
        }
    }]
}, {
    'id': 7,
    'children': [{
        {
            'id': 9
        },
        {
            'id': 8
        }
    }]
}]
</code></pre>

<p>ie (in terms of graphs- a forrest)</p>

<pre><code>    1            7
   / \          / \
  2   3        8  9
     /|\
    4 5 6
</code></pre>

<p>My final output should be the dictionary given above.</p>

<p>I tried the following:-</p>

<p>The solution which I've tried is the following:-</p>

<pre><code># set the value of nested dictionary.
def set_nested(d, path, value):
    reduce(lambda d, k: d.setdefault(k, {}), path[:-1], d)[path[-1]] = value
    return d

# returns the path of any node in list format
def return_parent(list, child):
    for tuple in list:
        id, parent_id = tuple
        if parent_id == id == child:
            return [parent_id]
        elif id == child:
            return [child] + return_parent(list, parent_id)

paths = []
temp = {}
for i in a:
    id, parent_id = i
    temp[id] = {'id': id}
    path = return_parent(a, id)[::-1]
    paths.append(path) # List of path is created

d = {}
for path in paths:
    for n, id in enumerate(path):
        set_nested(d, path[:n + 1], temp[id]) # setting the value of nested dictionary.

print d
</code></pre>

<p>The output that I got is </p>

<pre><code>{
    '1': {
        '3': {
            '6': {
                'id': '6'
            },
            '5': {
                'id': '5'
            },
            'id': '3',
            '4': {
                '10': {
                    'id': '10'
                },
                'id': '4'
            }
        },
        '2': {
            'id': '2'
        },
        'id': '1'
    },
    '7': {
        '9': {
            'id': '9'
        },
        '8': {
            'id': '8'
        },
        'id': '7'
    }
}
</code></pre>

<p>I'm close to it, but not able to get the exact output. Also, is there any better better solution? </p>
    </div>
    </div></body></html>