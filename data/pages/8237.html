<html><body><div><div class=".post-content">
            

<p>Whenever I tell people I’ve been working with Java I get the same reaction:</p>

<blockquote>
<p>“Yuck! Java? Why Java?”</p>
</blockquote>

<p>And, admittedly, I had the same reaction — at first. But over time, I’ve come to
appreciate Java for its type safety, performance, and rock-solid tooling. I’ve
also come to notice that this isn’t the Java I was used to — it’s been steadily
improving over the last ten years.</p>

<h2 id="why-java:7bc205910fa56b297be6bfafea6aa4fa">Why Java?</h2>

<p>Assuming you haven’t thrown up a little at the thought of using
Java in your day-to-day life, let me reiterate that this isn’t the Java you are
used to.  While Python, Ruby, and Javascript have made waves during the
“Dynamic-Typing Revolution”™ (I made that up), Java has quietly been adopting
some of the best practices that make dynamic and functional languages so
appealing, without sacrificing the many hundred man-years of effort that have
made Java and the JVM a world-class development environment. Java is still the
<a href="http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html">world’s most popular programming
language</a> with
roughly <a href="https://dzone.com/articles/how-many-java-developers-are">9 million programmers using
Java</a>. It doesn’t make
sense to ignore all of that history and development effort because Java is a
<em>little</em> too verbose. But just because it’s popular, doesn’t mean it’s right. So, let’s take a moment to look at what makes Java great.</p>

<h3 id="the-jvm:7bc205910fa56b297be6bfafea6aa4fa">The JVM</h3>

<p>The Java Virtual Machine (JVM) has been around for 20 years. In that time it has
been deployed in thousands of production systems and received innumerable
bug-fixes and performance improvements. The advantages of the JVM’s legacy
surface in a number of ways. First, the JVM has excellent support for
<a href="http://www.slf4j.org/">production logging</a> and
<a href="http://metrics.dropwizard.io/3.1.0/">production</a>
<a href="https://docs.oracle.com/javase/tutorial/jmx/">monitoring</a>, allowing you to
easily monitor performance metrics down to an individual thread. The JVM also
has one of the most highly-optimized garbage collectors in the world and allows
you to swap garbage collection algorithms depending on factors such as
optimizing throughput. Lastly, the “write once, run anywhere” promise of Java
has actually come true — you can easily deploy a Java application on any number
of architectures (let’s just all agree that applets never happened). There is a
reason very smart people writing new languages like Scala and Clojure have
adopted the JVM as their runtime — it provides an unparallelled distribution
environment for your code. It just doesn’t make sense to abandon something as
rock-solid as the JVM.</p>

<h3 id="library-support:7bc205910fa56b297be6bfafea6aa4fa">Library Support</h3>

<p>If you need to get something done, chances are there is a highly useful and well
tested Java library to do it for you. Java libraries are generally mature and tuned for actual production
usage. Google, Amazon, LinkedIn, Twitter and many foundational Apache projects
are heavily committed to Java. By adopting Java you can lean on these libraries
and companies to take advantage of the great engineering effort people have
already made.</p>

<h3 id="type-safety:7bc205910fa56b297be6bfafea6aa4fa">Type Safety</h3>

<p>Java’s type system, while verbose at times, allows you to write code that
largely “just works”. No more run-time debugging. It allows you to lean on your
compiler rather than on unit tests — which are only effective if you already
know what bugs you have.  Type safety also allows effortless refactoring. Java
also supports generics, overcoming one of the chief complaints about Go.
Furthermore, libraries such as <a href="https://github.com/google/guava">Guava</a> have
standardised some of the best-practices of creating type safe APIs with minimal
boilerplate and overhead. Improvements to the Java compiler also mean that you
can enjoy type safety while minimizing the amount of boilerplate code required
for generics.</p>

<h3 id="concurrency:7bc205910fa56b297be6bfafea6aa4fa">Concurrency</h3>

<p>Sadly, this sums up the state of concurrency in most dynamic languages.</p>

<p/><blockquote class="twitter-tweet" lang="en"><p lang="en" dir="ltr">Most JS/Python/Ruby apps… <a href="https://t.co/hkDkjdxpFH">pic.twitter.com/hkDkjdxpFH</a></p>— Reuben Bond (@reubenbond) <a href="https://twitter.com/reubenbond/status/662061791497744384">November 5, 2015</a></blockquote>


<p>Java, on the other hand, has first class support for multi-threading and
concurrency. As of Java 1.7, many concurrent immutable data structures allow you
to easily share data among threads. The <a href="http://akka.io/">Akka</a> library takes
this a step further, giving you Erlang style Actors for writing concurrent
and/or distributed code.  I’m not going to claim that Java has a better
concurrency story than Go, but being able to manage individual threads gives
Java applications asynchronous performance that isn’t possible with Python.</p>

<h2 id="programming-modern-java:7bc205910fa56b297be6bfafea6aa4fa">Programming Modern Java</h2>

<p>At this point you might have moved from mildly nauseated to mildly curious. So,
how can we write Java in 2015? Where to start? First, let’s revisit some of
the core language concepts that have been re-imagined in Java 7 and 8.</p>

<h3 id="iteration:7bc205910fa56b297be6bfafea6aa4fa">Iteration</h3>

<p>Let’s start with iteration. What if I told you that this is a <code>for</code> loop in Java 8?</p>

<pre><code class="language-java">List&lt;String&gt; names = new LinkedList&lt;&gt;();  // compiler determines type of LinkedList
// ... add some names to the collection
names.forEach(name -&gt; System.out.println(name));
</code></pre>

<p>Or that the <code>for</code> keyword has been vastly simplified?</p>

<pre><code class="language-java">for (String name : names)
    System.out.println(name);
</code></pre>

<p>Each of these looping constructs makes Java less verbose than the traditional
<code>for</code> loop you may be used to seeing.</p>

<h3 id="lambda-functions:7bc205910fa56b297be6bfafea6aa4fa">Lambda Functions</h3>

<p>The first <code>for</code> loop above also introduces a new concept to Java: lambda
functions. Lambda functions, denoted by the <code>-&gt;</code> syntax, are a significant
change to the language and introduce some concepts from functional programming.</p>

<p>Some examples of Lambda functions in Java include the following.</p>

<pre><code class="language-java">// Lambda Runnable
Runnable r2 = () -&gt; System.out.println("Hello world two!");

// Lambda Sorting
Collections.sort(personList, (Person p1, Person p2) -&gt; p1.getSurName().compareTo(p2.getSurName()))

// Lambda Listener
testButton.addActionListener(e -&gt; System.out.println("Click Detected by Lambda Listener"));
</code></pre>

<p>Lambda functions are too broad a topic to cover fully here — <a href="http://www.drdobbs.com/jvm/lambda-expressions-in-java-8/240166764">this article</a> provides a great starting point for learning more.</p>

<h3 id="streams:7bc205910fa56b297be6bfafea6aa4fa">Streams</h3>

<p>Java 8 also introduces the concept of <em>streams</em>, bringing many of the design
features of modern functional languages to Java. Streams are a mechanism for
lazily evaluating a sequence of transformations on a collection. As an example,
let’s try to count all the names that start with ‘A’. A first approach
may be something like the following:</p>

<pre><code class="language-java">List&lt;String&gt; names = new LinkedList&lt;&gt;();
// ... add some names to the collection
long count = 0;
for (String name : names)  {
    if (name.startsWith("A"))
        ++count;
}
</code></pre>

<p>With streams, this can be simplified using functional syntax by first converting
your collection to a stream and then applying functions:</p>

<pre><code class="language-java">List&lt;String&gt; names = new LinkedList&lt;&gt;();
// ... add some names to the collection
long count = names.stream()
                  .filter(name -&gt; name.startsWith("A"))
                  .count();
</code></pre>

<p>Java also supports parallel processing of streams using the <code>parallelStream()</code>
method. Parallel streams allow pipeline operations to be executed concurrently
in separate threads, offering not only improved syntax but improved performance
as well. In most cases, you can simply replace <code>stream()</code> with
<code>parallelStream()</code> to achieve parallelism.</p>

<h3 id="try-with-resources:7bc205910fa56b297be6bfafea6aa4fa">Try-With-Resources</h3>

<p>Prior to Java 6, opening a File and then reading from it would be done with a
<code>try/finally</code> block.</p>

<pre><code>static String readFirstLineFromFileWithFinallyBlock(String path)
                                                     throws IOException {
    BufferedReader br = new BufferedReader(new FileReader(path));
    try {
        return br.readLine();
    } finally {
        if (br != null) br.close();
    }
}
</code></pre>

<p>Unfortunately, it is possible for both <code>readLine</code> and <code>close</code> to throw
exceptions. In this case, the exception thrown from <code>readLine</code> is suppressed and
we never actually know that <code>readLine</code> failed.</p>

<p>Java 7 introduced the try-with-resources construct as a means to overcome this
deficiency.</p>

<pre><code>static String readFirstLineFromFile(String path) throws IOException {
    try (BufferedReader br =
                   new BufferedReader(new FileReader(path))) {
        return br.readLine();
    }
}
</code></pre>

<p>In this example, the <code>BufferedReader</code> is closed automatically regardless of any
failure conditions. You can also open multiple resources within a <code>try</code> statement
by separating them with a semicolon.</p>

<h3 id="multiple-catch:7bc205910fa56b297be6bfafea6aa4fa">Multiple Catch</h3>

<p>Traditionally, Java only allowed one exception in a <code>catch</code> block, leading to
duplicate code like this.</p>

<pre><code class="language-java">catch (IOException ex) {
     logger.log(ex);
     throw ex;
catch (SQLException ex) {
     logger.log(ex);
     throw ex;
}
</code></pre>

<p>Starting with Java 7, you can catch multiple exceptions within the same block
and eliminate that duplicate code.</p>

<pre><code class="language-java">catch (IOException|SQLException ex) {
    logger.log(ex);
    throw ex;
}
</code></pre>

<h3 id="numeric-literals:7bc205910fa56b297be6bfafea6aa4fa">Numeric Literals</h3>

<p>Numeric literals with underscores are a simple addition to the language. They
allow you to use an <code>_</code> as a visual separator for large numbers. The following
examples should be self explanatory.</p>

<pre><code class="language-java">int thousand = 1_000;
int million  = 1_000_000;
</code></pre>

<h2 id="using-java:7bc205910fa56b297be6bfafea6aa4fa">Using Java</h2>

<p>After seeing how modern Java syntax simplifies and extends the Java of old,
you may be itching to try Java yourself. To aid in that I’ve compiled a list of
third-party tools and libraries that make it easy to get started.</p>

<h3 id="maven:7bc205910fa56b297be6bfafea6aa4fa">Maven</h3>

<p>Maven is a Java build system that highly favours convention over configuration.
Maven defines the structure of your application and provides many built-in
functions for running tests, packaging your application, and deploying your
libraries. Using Maven significantly reduces the cognitive overhead of managing
Java projects. <a href="http://search.maven.org/">Maven Central</a> is the
<a href="https://pypi.python.org/pypi">PyPI</a> of the Java universe, providing a
one-stop shop for published Java libraries.</p>

<h3 id="core-functionality:7bc205910fa56b297be6bfafea6aa4fa">Core Functionality</h3>

<p>Google’s <a href="https://github.com/google/guava">Guava library</a> provides core
functionality used by Google for Java development. This includes common
functions for working with collections, caching, primitives, concurrency, string
processing, I/O and more. Guava is a good case study in how to design a great
Java API, providing concrete examples of most of the recommended best practices
from <a href="http://www.amazon.ca/Effective-Java-Edition-Joshua-Bloch/dp/0321356683">Effective
Java</a>.
Guava has been battle tested through production use at Google and comes with
over 286,000 unit tests.</p>

<h3 id="date-time-functions:7bc205910fa56b297be6bfafea6aa4fa">Date/Time Functions</h3>

<p><a href="http://www.joda.org/joda-time/index.html">Joda-Time</a> has become the de facto
standard date and time library for Java. In fact, Java 8 adopted Joda-Time
conventions almost verbatim. Going forward, it’s recommended to use the
Date/Time functions in <code>java.time</code> instead of Joda-Time. However, if you have a
need for an version of Java earlier than 8, Joda-Time provides an unmatched
API.</p>

<h3 id="distributed-systems:7bc205910fa56b297be6bfafea6aa4fa">Distributed Systems</h3>

<p><a href="http://akka.io">Akka</a> provides abstractions for writing distributed systems
using an Erlang-like Actor model. Akka is resilient to many different failures
and provides higher level abstractions for writing robust distributed systems.</p>

<h3 id="web-applications:7bc205910fa56b297be6bfafea6aa4fa">Web Applications</h3>

<p>Need to write a full-fledged web app in Java? <a href="https://www.playframework.com/">Play
Framework</a> has you covered. Play provides a
scalable and asynchronous framework for writing web applications using
non-blocking I/O based on Akka. For a less bleeding edge framework with wide
production adoption, try <a href="http://www.eclipse.org/jetty/">Jetty</a>.</p>

<h3 id="unit-testing:7bc205910fa56b297be6bfafea6aa4fa">Unit Testing</h3>

<p><a href="http://junit.org/">JUnit</a> is still the standard for writing unit tests. Recent
years have seen extensions to JUnit matchers allowing you to make assertions
over collections.  For example, you can easily assert that a list contains a
particular value.</p>

<h3 id="mocking:7bc205910fa56b297be6bfafea6aa4fa">Mocking</h3>

<p><a href="http://mockito.org/">Mockito</a> is the standard mocking library for Java. It provides all the
functionality you would expect from a mocking library and is invaluable in
writing robust tests.</p>

<h2 id="what-still-sucks:7bc205910fa56b297be6bfafea6aa4fa">What Still Sucks</h2>

<p>So far, I’ve painted a pretty rosy picture of Java, but some things still suck.</p>

<h3 id="it-s-still-java:7bc205910fa56b297be6bfafea6aa4fa">It’s Still Java!</h3>

<p>Java’s legacy cannot be avoided and the fact that Java remains backwards
compatible with its earliest versions means some of the worst parts of the
language and standard library are here to stay. The fact that Guava exists to
<em>make the Java language more pleasant</em> is testament to the fact that the Java
language and APIs can be inconsistent, confusing, and sometimes just plain wrong.</p>

<h3 id="json:7bc205910fa56b297be6bfafea6aa4fa">JSON</h3>

<p>Java lacks an object literal syntax that maps to JSON (like Python’s
dictionary literal syntax). Because of this, mapping from Java objects to JSON
and back requires a sometimes confusing set of object instantiations and mappings.
There are a variety of JSON libraries competing in this space, with
<a href="https://github.com/FasterXML/jackson">Jackson</a> being the current favorite.
Unfortunately, Jackson’s documentation could be considerably improved.</p>

<h3 id="mocking-1:7bc205910fa56b297be6bfafea6aa4fa">Mocking</h3>

<p><a href="http://mockito.org/">Mockito</a> solves a lot of the pain points in testing Java
code, however transitioning from the flexibility of a language like Python to the
strictness of Java requires you to think more carefully about how to design your
classes for mocking.</p>

<h3 id="repl:7bc205910fa56b297be6bfafea6aa4fa">REPL</h3>

<p>One thing I love about Python is the ability to quickly fire up a
read-eval-print loop to quickly evaluate new ideas or to test assumptions.
Although there has been talk of adding an REPL to the standard Java library, this
is something that is currently not supported.</p>

<h3 id="verbosity:7bc205910fa56b297be6bfafea6aa4fa">Verbosity</h3>

<p>Although advances in the Java compiler have meant less need for explicit type
signatures — especially for generics — Java is still more verbose than Python.
Getting a project up and running requires more boilerplate and
overhead — generally it’s just more <em>work</em>.</p>

<h2 id="conclusions:7bc205910fa56b297be6bfafea6aa4fa">Conclusions</h2>

<p>Java has had a long and storied history, both good and bad. If you haven’t
worked with Java for a few years, maybe now is a good time to try it again for
the first time.</p>

<p>Just don’t do this.</p>

<a class="thumbnail" href="/img/java/why-java/java-stack.jpg">
  <img src="/img/java/why-java/java-stack.jpg" alt="Java Stack"/>
</a>

 
          </div>

          </div></body></html>