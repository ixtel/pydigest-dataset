<html><body><div><div class="entry-content clearfix">







<p>I love <a href="http://bottlepy.org/docs/stable/">bottle</a>. It’s a simple, yet fast and powerful Python micro-framework, perfect for small web applications and rapid prototyping. It’s also an excellent learning tool for those just getting starting with web development.</p>

<p>Let’s look at a quick example.</p>

<blockquote><p><strong>NOTE</strong>: This tutorial assumes you are running a Unix-based environment – e.g, Mac OS X, a Linux flavor, or a Linux flavor powered through a virtual machine.</p></blockquote>

<p><strong>Updated 06/13/2015:</strong> updated code examples and explanations</p>

<a name="Starting.up"/>
<h2>Starting up</h2>

<p>First, let’s create a directory to work in:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>mkdir bottle <span class="o">&amp;&amp;</span> <span class="nb">cd </span>bottle
</span></code></pre></td></tr></table></div></figure>


<p>Next, you need to have pip, virtualenv, and git installed.</p>

<p><a href="https://pypi.python.org/pypi/virtualenv">virtualenv</a> is a Python tool that makes it easy to manage the Python packages needed for a particular project; it keeps packages in one project from conflicting with packages in other projects. <a href="https://pypi.python.org/pypi/pip">pip</a>, meanwhile, is a package manager used for managing the installation of Python packages.</p>

<p>For help with installing pip (and it’s dependencies) in a Unix environment, follow the instructions in this <a href="https://gist.github.com/mjhea0/5692708">Gist</a>. If you are on Windows environment, please view this <a href="http://www.youtube.com/watch?v=MIHYflJwyLk">video</a> for help.</p>

<p>Once you have pip installed, run the following command to install virtualenv:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>pip install <span class="nv">virtualenv</span><span class="o">==</span>12.0.7
</span></code></pre></td></tr></table></div></figure>


<p>Now we can easily setup our local environment:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>virtualenv venv
</span><span class="line"><span class="nv">$ </span><span class="nb">source </span>venv/bin/activate
</span></code></pre></td></tr></table></div></figure>


<p>Install bottle:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>pip install <span class="nv">bottle</span><span class="o">==</span>0.12.8
</span><span class="line"><span class="nv">$ </span>pip freeze &gt; requirements.txt
</span></code></pre></td></tr></table></div></figure>


<p>Finally, let’s put our app under version control using Git. For more information on Git, please view this <a href="http://git-scm.com/">site</a>, which also includes installation instructions.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>git init
</span><span class="line"><span class="nv">$ </span>git add .
</span><span class="line"><span class="nv">$ </span>git commit -m <span class="s2">"initial commit"</span>
</span></code></pre></td></tr></table></div></figure>


<a name="Writing.your.app"/>
<h2>Writing your app</h2>

<p>We’re ready to write our bottle app. Open <a href="https://realpython.com/blog/python/setting-up-sublime-text-3-for-full-stack-python-development/">Sublime Text 3</a> or your text editor of choice. Create your application file, <em>app.py</em>, which will hold the <em>entirety</em> of our first app:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">import</span> <span class="nn">os</span>
</span><span class="line"><span class="kn">from</span> <span class="nn">bottle</span> <span class="kn">import</span> <span class="n">route</span><span class="p">,</span> <span class="n">run</span><span class="p">,</span> <span class="n">template</span>
</span><span class="line">
</span><span class="line"><span class="n">index_html</span> <span class="o">=</span> <span class="s">'''My first web app! By &lt;strong&gt;{{ author }}&lt;/strong&gt;.'''</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="nd">@route</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
</span><span class="line"><span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
</span><span class="line">    <span class="k">return</span> <span class="n">template</span><span class="p">(</span><span class="n">index_html</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="s">'Real Python'</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="nd">@route</span><span class="p">(</span><span class="s">'/name/&lt;name&gt;'</span><span class="p">)</span>
</span><span class="line"><span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">template</span><span class="p">(</span><span class="n">index_html</span><span class="p">,</span> <span class="n">author</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
</span><span class="line">    <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'PORT'</span><span class="p">,</span> <span class="mi">8080</span><span class="p">))</span>
</span><span class="line">    <span class="n">run</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">'0.0.0.0'</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Save the file.</p>

<p>Now you can run your app locally:</p>

<figure class="code"><figcaption><span/></figcaption></figure>


<p>You should be able to connect to <a href="http://localhost:8080/">http://localhost:8080/</a> and see your application running!</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">My first web app! By RealPython.
</span></code></pre></td></tr></table></div></figure>


<p>So, the <code>@route</code> decorator binds a function to the route. In the first route, <code>/</code>, the <code>index()</code> function is bound to the route, which renders the <code>index_html</code> template and passes in a variable, <code>author</code>, as a keyword argument. This variable is then accessible in the template.</p>

<p>Now navigate to the next route, making sure to add your name on the end of the route – i.e., <a href="http://localhost:8080/name/Michael">http://localhost:8080/name/Michael</a>. You should see something like:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">My first web app! By Michael.
</span></code></pre></td></tr></table></div></figure>


<p><strong>What’s going on?</strong></p>

<ol>
<li>Again, the <code>@route</code> decorator binds a function to the route. In this case, we’re using a dynamic route that includes a wildcard of <code>&lt;name&gt;</code>.</li>
<li>This wildcard is then passed to the view function as an argument – <code>def name(name)</code>.</li>
<li>We then passed this to the template as a keyword argument – <code>author=name</code></li>
<li>The template then renders the author variable – <code>{{ author }}</code>.</li>
</ol>


<a name="Shell.script"/>
<h2>Shell script</h2>

<p>Want to get started quickly? Generate the starter app in a few seconds using this Shell script.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">mkdir bottle
</span><span class="line"><span class="nb">cd </span>bottle
</span><span class="line">pip install <span class="nv">virtualenv</span><span class="o">==</span>12.0.7
</span><span class="line">virtualenv venv
</span><span class="line"><span class="nb">source </span>venv/bin/activate
</span><span class="line">pip install <span class="nv">bottle</span><span class="o">==</span>0.12.8
</span><span class="line">pip freeze &gt; requirements.txt
</span><span class="line">git init
</span><span class="line">git add .
</span><span class="line">git commit -m <span class="s2">"initial commit"</span>
</span><span class="line">
</span><span class="line">cat &gt;app.py <span class="s">&lt;&lt;EOF</span>
</span><span class="line"><span class="s">import os</span>
</span><span class="line"><span class="s">from bottle import route, run, template</span>
</span><span class="line">
</span><span class="line"><span class="s">index_html = '''My first web app! By &lt;strong&gt;{{ author }}&lt;/strong&gt;.'''</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="s">@route('/')</span>
</span><span class="line"><span class="s">def index():</span>
</span><span class="line"><span class="s">    return template(index_html, author='Real Python')</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="s">@route('/name/&lt;name&gt;')</span>
</span><span class="line"><span class="s">def name(name):</span>
</span><span class="line"><span class="s">    return template(index_html, author=name)</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="s">if __name__ == '__main__':</span>
</span><span class="line"><span class="s">    port = int(os.environ.get('PORT', 8080))</span>
</span><span class="line"><span class="s">    run(host='0.0.0.0', port=port, debug=True)</span>
</span><span class="line"><span class="s">EOF</span>
</span><span class="line">
</span><span class="line">chmod a+x app.py
</span><span class="line">
</span><span class="line">git init
</span><span class="line">git add .
</span><span class="line">git commit -m <span class="s2">"Updated"</span>
</span></code></pre></td></tr></table></div></figure>


<p>Download this script from this <a href="https://gist.github.com/mjhea0/5784132">Gist</a>, and then run it using the following command:</p>

<figure class="code"><figcaption><span/></figcaption></figure>


<a name="Next.steps"/>
<h2>Next steps</h2>

<p>From this point, it is as easy as adding new <code>@route</code>-decorated functions to create new pages.</p>

<p>Creating the HTML is simple: In the above app, we just inlined the HTML in the file itself. It’s easy to modify this to load the template from a file. For example:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="nd">@route</span><span class="p">(</span><span class="s">'/main'</span><span class="p">)</span>
</span><span class="line"><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
</span><span class="line">    <span class="k">return</span> <span class="n">template</span><span class="p">(</span><span class="n">main_template</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will load the template file <code>main_template.tpl</code>, which must be placed in a <code>views</code> folder within your project structure, and render it to the end user.</p>

<p>Refer to the bottle <a href="http://bottlepy.org/docs/dev/">documentation</a> for more info.</p>

<hr/>


<p><em>We’ll look at how to add additional pages and templates in subsequent posts. However, I urge you to try this on your own. Post any questions as comments below.</em></p>

<p><strong>Check out <a href="http://www.realpython.com/blog/python/developing-with-bottle-part-2-plot-ly-api/">Part 2</a>!</strong></p>
</div>


      </div></body></html>