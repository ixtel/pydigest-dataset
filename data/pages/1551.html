<html><body><div><div class="post-body entry-content" id="post-body-5465022503856367366" itemprop="description articleBody">
<p>I make no secret about it -- some of my best friends are cryptocurrency aficionados. Many use <a href="https://coinbase.com">coinbase</a> to store their cryptocoins. It is in their name that this entry is written. The <a href="http://python.org">Python</a> code that follows let's you see how much is available in one's <a href="http://coinbase.com">Coinbase wallet</a>. First the code:</p><pre><code>
#!/usr/bin/python
import hashlib
import hmac
import os
import json
import requests
import time

#This code sample demonstrates a GET and a POST call to the Coinbase API
#Before implementation, set environmental variables with the names API_KEY and API_SECRET.

def make_request(url, body=None):
    nonce = int(time.time() * 1e6)
    message = str(nonce) + url + ('' if body is None else body), 
    signature = hmac.new(os.environ['API_SECRET'], message, hashlib.sha256).hexdigest()


    headers = {'ACCESS_KEY' : os.environ['API_KEY'],
               'ACCESS_SIGNATURE': signature,
               'ACCESS_NONCE': nonce,
               'Accept': 'application/json'}

    # If we are passing data, a POST request is made. Note that content_type is specified as json.
    if body:
        headers.update({'Content-Type': 'application/json'})
        req = requests.post(url, data = body, headers=headers)

    else:
        #req = urllib2.Request(url, headers=headers)
        req = requests.get(url, headers=headers)

    return req.content

# Example of a GET request, where body is nil.
print make_request('https://coinbase.com/api/v1/account/balance')
</code></pre><p>
One needs to set the API_KEY and API_SECRET to the appropriate values off the </p><a href="https://coinbase.com/settings/api">coinbase settings page</a><p>. Now, the promised run:</p><pre>
% python ./coinbase.py                  
{"amount":"0.01500000","currency":"BTC"}
</pre>
<p/>
</div>
</div></body></html>