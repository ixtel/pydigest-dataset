<html><body><div><div itemprop="articleBody"><p>I always had this burning need to have something slightly different when publishing photos online, didn't you? Maybe you wanted to show the EXIF and the hosting service did not support that, or maybe you just hate the look of the pages - that wasted space filled with useless buttons and forms - grandma will never use that, she just want to see your trip photos.</p><p>Sometimes the UI is nice, but the photos have ugly thumbnails with bad aliasing or maybe just a bad combination of resampling and compression algorithms make the fullsize pictures a pain to look at.</p><p>But overall, it's all about control, programmers want to have control over the result ...</p><blockquote><strong>So what about programmers?</strong></blockquote><p>Programmers make photos too right? They can work with markup, right? And they need no stinky UI to upload photos, <strong>right?</strong></p><p>That's right, there should be a good tool, <em>for programmers</em>, which they can use to generate a nice, easy to customize photo gallery!</p><p>So I've been looking at this a bit, and turns out, there no good tool that lets you generate a gallery that you can just upload to <a class="reference external" href="http://aws.amazon.com/s3/">S3</a> or <a class="reference external" href="http://pages.github.com">Github Pages</a>.</p><p>This is how I think it should work:</p><img alt="Flow diagram for static photo gallery generator" src="https://blog.ionelmc.ro/2013/12/08/static-photo-gallery-generator/static-photo-gallery-generator.png"/><div class="section" id="now-about-that-ui"><h2>Now, about that UI<a class="headerlink" href="#now-about-that-ui" title="Permalink to this headline"> *</a></h2><p>There should be a good, extensible theme and it should have some sensible defaults:</p><ul><li><p class="first">A good choice for thumbnail sizes.</p></li><li><p class="first">A good choice for thumbnail layout. It appears that now everyone it doing <em>packing layouts</em> - don't crop, and don't waste any space. It looks good. There are two ways to do it:</p><ul class="simple"><li>Row packing: photos are packed in rows. Every photo has the same height. You can see this in Google+ and Flickr. Flickr implemented it <a class="reference external" href="http://blog.flickr.net/en/2013/05/20/a-better-brighter-flickr/">recently</a>, maybe it is real good?</li><li>Column packing: photos are packed in columns. Every photo has the same width.</li></ul><p>Now you can imagine that column packing will make the portraits look bigger so it is a good layout if you do lots of portrait oriented photography.</p></li><li><p class="first">Good balance of compression and resampling algorithm choices.</p></li><li><p class="first">A <em>usable</em> UI on handheld devices. Something that:</p><ul class="simple"><li>Knows touch events.</li><li>Is not a ugly afterthought.</li><li>Has good navigation and doesn't make you reload the page over that slow internet connection every damn time.</li><li>Doesn't make your phone or tablet freeze because it just tried to load 20 MBytes worth of data in one page load.</li></ul></li></ul></div><div class="section" id="file-layout"><h2>File layout<a class="headerlink" href="#file-layout" title="Permalink to this headline"> *</a></h2><p>And because programmers are lazy, there should be a minimal amount of fuss required to generate that initial setup and generate galleries.</p><p>The tool, the generator, should require as little information as possible, preferably needing only a directory that has some photos in it. But it should be easy to tune and customize.</p><p>So I'm thinking about a file layout like this:</p><pre class="literal-block">
.
├── defaults.yaml (optional)
├── gallery1
│   ├── config.yaml (optional)
│   ├── IMG_0001.jpg
│   ├── IMG_0002.jpg
│   ├── IMG_0003.jpg
│   ├── IMG_0004.jpg
│   ├── IMG_0005.jpg
│   ├── IMG_0006.jpg
│   ├── IMG_0007.jpg
│   ├── IMG_0008.jpg
│   ├── IMG_0009.jpg
│   └── IMG_0010.jpg
└── gallery2
    ├── config.yaml (optional)
    ├── IMG_0001.jpg
    ├── IMG_0002.jpg
    ├── IMG_0003.jpg
    ├── IMG_0004.jpg
    ├── IMG_0005.jpg
    ├── IMG_0006.jpg
    ├── IMG_0007.jpg
    ├── IMG_0008.jpg
    ├── IMG_0009.jpg
    └── IMG_0010.jpg
</pre><p>This will render to:</p><ul class="simple"><li><tt class="docutils literal">index.html</tt> - contains a list of galeries (with some preview picture)</li><li><tt class="docutils literal">gallery1/index.html</tt> - contains the photos from <tt class="docutils literal">gallery1</tt></li><li><tt class="docutils literal">gallery2/index.html</tt> - contains the photos from <tt class="docutils literal">gallery2</tt></li><li>resized images</li><li>theme assets (css, js etc)</li></ul></div><div class="section" id="configuration"><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline"> *</a></h2><div class="section" id="goals-of-the-configuration-be-as-little-as-possible"><h3>Goals of the configuration: be as little as possible<a class="headerlink" href="#goals-of-the-configuration-be-as-little-as-possible" title="Permalink to this headline"> *</a></h3><p>What to we want to configure?</p><ul class="simple"><li>Any number of display modes - allow configuring unlimited number of display modes - to allow easy configuration of themes that don't subscribe to the traditional thumbnal/fullsize convention. Each display mode should:<ul><li>Allow configuring any processing filters.</li><li>Allow configuring resampling mode.</li></ul></li><li>Photo discovery - be able to select what photos are displayed.</li><li>Photo ordering - be able override the default ordering. This should be painless if you only want to have few specific photos in front and for the rest the default ordering.</li></ul><p>Titles and/or photo order should come from the filenames. Most people don't need titles so it would be natural to just name the file name to get the display order.</p></div><div class="section" id="yaml"><h3>YAML?<a class="headerlink" href="#yaml" title="Permalink to this headline"> *</a></h3><p>What about JSON, or XML? They are too verbose. JSON is nice but it's a bit too verbose in my opinion. Quote everything? Brackets everywhere? Hell no.</p><p>YAML has one disadvantage: easy to make mistakes. Just one different character and you have totally different data type!</p><p>But I think that with a good validator (I'm looking at <a class="reference external" href="https://pypi.python.org/pypi/schema">schema</a>) that gives good validation error messages this can be acceptable.</p></div><div class="section" id="discovery-ordering"><h3>Discovery &amp; ordering<a class="headerlink" href="#discovery-ordering" title="Permalink to this headline"> *</a></h3><p>Very importantly, what's the best way to do discovery of photos? What programmers use all day long <a class="footnote-reference" href="#id2" id="id1">[1]</a>? <a class="reference external" href="http://en.wikipedia.org/wiki/Glob_%28programming%29">globs</a>! The are also knows as <em>wildcard expressions</em> - they should be fairly common knowledge. So the idea is to have some sort of list that holds the <a class="reference external" href="http://en.wikipedia.org/wiki/Glob_%28programming%29">globs</a> that will match photos.</p><p>Now that we got a list with the <a class="reference external" href="http://en.wikipedia.org/wiki/Glob_%28programming%29">globs</a>, so why don't we use that to decide the order of the photo? We can show photos in the order of the globs that matched the files.</p></div><div class="section" id="config-yaml"><h3>config.yaml<a class="headerlink" href="#config-yaml" title="Permalink to this headline"> *</a></h3><p>This holds configuration for galleries: resizing configuration, thumbnail sizes, layout configuration, titles and slug overrides. The galleries inherit configuration from the index. All configuration is optional.</p><p>Sample configuration:</p><div class="highlight"><pre><span/><span class="l l-Scalar l-Scalar-Plain">title</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">My trip to England</span>
<span class="l l-Scalar l-Scalar-Plain">slug</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">my-trip-to-england</span>
<span class="l l-Scalar l-Scalar-Plain">layout</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">row</span>
<span class="l l-Scalar l-Scalar-Plain">photos</span><span class="p p-Indicator">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">IMG_0002.jpg</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Abstract 01</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">IMG_0003.jpg</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Abstract 02</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">IMG_0004.jpg</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Some bridge</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">IMG_0001.jpg</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">title</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Some street</span>
        <span class="l l-Scalar l-Scalar-Plain">thumbnail</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">resampling</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">antialias</span>
        <span class="l l-Scalar l-Scalar-Plain">display</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">resampling</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">antialias</span>
            <span class="l l-Scalar l-Scalar-Plain">width</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">3000</span>
            <span class="l l-Scalar l-Scalar-Plain">height</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2000</span>
            <span class="l l-Scalar l-Scalar-Plain">filters</span><span class="p p-Indicator">:</span>
                <span class="l l-Scalar l-Scalar-Plain">pre</span><span class="p p-Indicator">:</span>
                <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">edge_enhance</span>
                <span class="l l-Scalar l-Scalar-Plain">post</span><span class="p p-Indicator">:</span>
                <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">contrast</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">0.5</span>
    <span class="p p-Indicator">-</span> <span class="s">"*"</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">title</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">Untitled</span>
        <span class="l l-Scalar l-Scalar-Plain">thumbnail</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">width</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">300</span>
            <span class="l l-Scalar l-Scalar-Plain">height</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">200</span>
            <span class="l l-Scalar l-Scalar-Plain">resampling</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bicubic</span>
            <span class="l l-Scalar l-Scalar-Plain">titles</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">on-hover</span>
        <span class="l l-Scalar l-Scalar-Plain">display</span><span class="p p-Indicator">:</span>
            <span class="l l-Scalar l-Scalar-Plain">width</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1920</span>
            <span class="l l-Scalar l-Scalar-Plain">height</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">1080</span>
            <span class="l l-Scalar l-Scalar-Plain">resampling</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">bicubic</span>
</pre></div><hr class="docutils"/><div class="section" id="reference"><h4>Reference<a class="headerlink" href="#reference" title="Permalink to this headline"> *</a></h4><table class="docutils field-list" frame="void" rules="none"><col class="field-name"/><col class="field-body"/><tbody valign="top"><tr class="field"><th class="field-name">title:</th><td class="field-body"><p class="first">A string - title for the gallery or galleries index</p></td></tr><tr class="field"><th class="field-name">slug:</th><td class="field-body"><p class="first">Will be the url for the gallery</p></td></tr><tr class="field"><th class="field-name">layout:</th><td class="field-body"><p class="first">Type of layout. One of <tt class="docutils literal">row</tt> (<strong>default</strong>, will look like Flickr and Google+) or <tt class="docutils literal">column</tt> (will look like pass.us).</p></td></tr><tr class="field"><th class="field-name">photos:</th><td class="field-body"><p class="first">List of overrides for individual photos. Filenames are matched using glob expressions (you can use <tt class="docutils literal">*</tt> and <tt class="docutils literal">?</tt>)</p><p>The photos are sorted by these criterias:</p><ul class="simple"><li>order of the matching entries in <strong>photos</strong> section</li><li>file name</li></ul><p>If value is a string then it's used as the title, otherwise these keys are accepted:</p><table class="last docutils field-list" frame="void" rules="none"><col class="field-name"/><col class="field-body"/><tbody valign="top"><tr class="field"><th class="field-name">title:</th><td class="field-body"><p class="first">Title to use for this photo. The default titles for photos are the filenames (without the extension).</p></td></tr><tr class="field"><th class="field-name"><em>mode</em>:</th><td class="field-body"><p class="first"><em>Mode</em> could be <tt class="docutils literal">thumbnail</tt>, <tt class="docutils literal">display</tt> or anything the theme can understand.</p><table class="last docutils field-list" frame="void" rules="none"><col class="field-name"/><col class="field-body"/><tbody valign="top"><tr class="field"><th class="field-name">with:</th><td class="field-body"><p class="first">Maximum width in pixels. (<strong>default</strong>: 580)</p></td></tr><tr class="field"><th class="field-name">height:</th><td class="field-body"><p class="first">Maximum height in pixels. (<strong>default</strong>: 580)</p></td></tr><tr class="field"><th class="field-name">titles:</th><td class="field-body"><p class="first">How to show photo titles on thumbnails. One of <tt class="docutils literal">hide</tt>, <tt class="docutils literal"><span class="pre">on-hover</span></tt> (<strong>default</strong>) or <tt class="docutils literal">always</tt>.</p></td></tr><tr class="field"><th class="field-name">resampling:</th><td class="field-body"><p class="first">Resampling algorithm to use when resizing.</p></td></tr><tr class="field"><th class="field-name">filters:</th><td class="field-body"><p class="first">Any filters to apply.</p><table class="last docutils field-list" frame="void" rules="none"><col class="field-name"/><col class="field-body"/><tbody valign="top"><tr class="field"><th class="field-name">pre:</th><td class="field-body">List of pre-resize filters to apply.</td></tr><tr class="field"><th class="field-name">post:</th><td class="field-body">List of post-resize filters to apply.</td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div></div><div class="section" id="defaults-yaml"><h3>defaults.yaml<a class="headerlink" href="#defaults-yaml" title="Permalink to this headline"> *</a></h3><p>You can specify defaults here for some of the configuration that you put in <tt class="docutils literal">config.yaml</tt>.</p><p>Sample configuration:</p><pre class="literal-block">
layout: row
thumbnail:
    width: 300
    height: 200
    resampling: bicubic
    titles: on-hover
display:
    width: 1920
    height: 1080
    resampling: bicubic
</pre><hr class="docutils"/><div class="section" id="id3"><h4>Reference<a class="headerlink" href="#id3" title="Permalink to this headline"> *</a></h4><table class="docutils field-list" frame="void" rules="none"><col class="field-name"/><col class="field-body"/><tbody valign="top"><tr class="field"><th class="field-name">layout:</th><td class="field-body"><p class="first">Type of layout. One of <tt class="docutils literal">row</tt> (<strong>default</strong>, will look like Flickr and Google+) or <tt class="docutils literal">column</tt> (will look like pass.us).</p></td></tr><tr class="field"><th class="field-name"><em>mode</em>:</th><td class="field-body"><p class="first"><em>Mode</em> could be <tt class="docutils literal">thumbnail</tt>, <tt class="docutils literal">display</tt> or anything the theme can understand.</p><table class="last docutils field-list" frame="void" rules="none"><col class="field-name"/><col class="field-body"/><tbody valign="top"><tr class="field"><th class="field-name">with:</th><td class="field-body"><p class="first">Maximum width in pixels. (<strong>default</strong>: 580)</p></td></tr><tr class="field"><th class="field-name">height:</th><td class="field-body"><p class="first">Maximum height in pixels. (<strong>default</strong>: 580)</p></td></tr><tr class="field"><th class="field-name">titles:</th><td class="field-body"><p class="first">How to show photo titles on <tt class="docutils literal">mode</tt>. One of <tt class="docutils literal">hide</tt>, <tt class="docutils literal"><span class="pre">on-hover</span></tt> (<strong>default</strong>) or <tt class="docutils literal">always</tt>.</p></td></tr><tr class="field"><th class="field-name">resampling:</th><td class="field-body"><p class="first">Resampling algorithm to use when resizing.</p></td></tr><tr class="field"><th class="field-name">filters:</th><td class="field-body"><p class="first">Any filters to apply.</p><table class="last docutils field-list" frame="void" rules="none"><col class="field-name"/><col class="field-body"/><tbody valign="top"><tr class="field"><th class="field-name">pre:</th><td class="field-body">List of pre-resize filters to apply.</td></tr><tr class="field"><th class="field-name">post:</th><td class="field-body">List of post-resize filters to apply.</td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><p>Still not sure that <tt class="docutils literal">default.yaml</tt> is actually needed ...</p></div></div></div><div class="section" id="what-s-next"><h2>What's next?<a class="headerlink" href="#what-s-next" title="Permalink to this headline"> *</a></h2><p>Now I haven't got around in implementing what's described above yet ...</p><p>I sure could use some feedback. Maybe I'm missing something important or there's already a solution like that.</p></div></div></div></body></html>