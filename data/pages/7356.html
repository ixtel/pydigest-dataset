<html><body><div><div class="post-text" itemprop="text">

<p>How to write a script in Python that outputs if celery is running on a machine (Ubuntu)?</p>

<p>My use-case. I have a simple python file with some tasks. I'm not using Django or Flask. I use supervisor to run the task queue. For example,</p>

<p><strong>tasks.py</strong></p>

<pre><code>from celery import Celery, task
app = Celery('tasks')
@app.task()
def add_together(a, b):
    return a + b
</code></pre>

<p><strong>Supervisor:</strong></p>

<pre><code>[program:celery_worker]
directory = /var/app/
command=celery -A tasks worker info
</code></pre>

<p>This all works, I now want to have page which checks if celery/supervisor process is running. i.e. something like this maybe using Flask allowing me to host the page giving a 200 status allowing me to load balance. </p>

<p>For example...</p>

<p><strong>check_status.py</strong> </p>

<pre><code>from flask import Flask

app = Flask(__name__)

@app.route('/')
def status_check():

    #check supervisor is running
    if supervisor:
         return render_template('up.html')
    else:
        return render_template('down.html')

if __name__ == '__main__':
    app.run()
</code></pre>
    </div>
    </div></body></html>