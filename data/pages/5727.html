<html><body><div><div class="field-item even" property="content:encoded"><h2>Overview</h2>


<a name="intro"/>
<h2>Intro</h2>
<p>Artificial intelligence chat bots are easy to write in Python with the AIML package. AIML stands for Artificial Intelligence Markup Language, but it is
just simple XML. These code examples will walk you through how to create your own artificial intelligence chat bot using Python.</p>

<a name="what-is-aiml"/>
<h2>What is AIML?</h2>
<p>AIML was developed
by Richard Wallace. He made a bot called A.L.I.C.E. (Artificial Linguistics Internet Computer Entity) which won several
artificial intelligence awards. Interestingly, one of the Turing tests to look for artificial intelligence is to have a human chat
with a bot through a text interface for several minutes and see if they thought it was a human. AIML is a form of XML that defines rules for matching patterns and determining responses.</p>
<p>For a full AIML primer, check out <a href="http://www.alicebot.org/documentation/aiml-primer.html" target="_blank">Alice Bot's AIML Primer</a>.
You can also learn more about AIML and what it is capable of on the <a href="https://en.wikipedia.org/wiki/AIML" target="_blank">AIML Wikipedia page</a>.
We will create the AIML files first and then use Python to give it some life.</p>


<a name="startup"/>
<h2>Create Standard Startup File</h2>
<p>
It is standard to create a startup file called <strong>std-startup.xml</strong> as
the main entry point for loading AIML files. In this case we will create a basic
file that matches one pattern and takes one action. We want to match the pattern
<strong>load aiml b</strong>, and have it load our aiml brain in response. We will
create the basic_chat.aiml file in a minute.
</p>

<pre class="prettyprint"><code>&lt;aiml version="1.0.1" encoding="UTF-8"&gt;<br/>    &lt;!-- std-startup.xml --&gt;<br/><br/>    &lt;!-- Category is an atomic AIML unit --&gt;<br/>    &lt;category&gt;<br/><br/>        &lt;!-- Pattern to match in user input --&gt;<br/>        &lt;!-- If user enters "LOAD AIML B" --&gt;<br/>        &lt;pattern&gt;LOAD AIML B&lt;/pattern&gt;<br/><br/>        &lt;!-- Template is the response to the pattern --&gt;<br/>        &lt;!-- This learn an aiml file --&gt;<br/>        &lt;template&gt;<br/>            &lt;learn&gt;basic_chat.aiml&lt;/learn&gt;<br/>            &lt;!-- You can add more aiml files here --&gt;<br/>            &lt;!--&lt;learn&gt;more_aiml.aiml&lt;/learn&gt;--&gt;<br/>        &lt;/template&gt;<br/>        <br/>    &lt;/category&gt;<br/><br/>&lt;/aiml&gt;</code></pre>


<a name="create-aiml-file"/>
<h2>Creating an AIML File</h2>

<p>Above we created the AIML file that only handles one pattern, <strong>load aiml b</strong>. When we enter that command
to the bot, it will try to load <strong>basic_chat.aiml</strong>. It won't work unless we actually create it. Here is what
you can put inside <strong>basic_chat.aiml</strong>. We will match two basic patterns and respond.</p>



<pre class="prettyprint"><code>&lt;aiml version="1.0.1" encoding="UTF-8"&gt;<br/>&lt;!-- basic_chat.aiml --&gt;<br/><br/>    &lt;category&gt;<br/>        &lt;pattern&gt;HELLO&lt;/pattern&gt;<br/>        &lt;template&gt;<br/>            Well, hello!<br/>        &lt;/template&gt;<br/>    &lt;/category&gt;<br/>    <br/>    &lt;category&gt;<br/>        &lt;pattern&gt;WHAT ARE YOU&lt;/pattern&gt;<br/>        &lt;template&gt;<br/>            I'm a bot, silly!<br/>        &lt;/template&gt;<br/>    &lt;/category&gt;<br/>    <br/>&lt;/aiml&gt;</code></pre>



<a name="random"/>
<h2>Random Responses</h2>
<p>You can also add random responses like this. This one will respond randomly when
it receives a message that starts with "One time I ". The <strong>*</strong> is a wildcard that matches anything.</p>
<pre class="prettyprint"><code>&lt;category&gt;<br/>    &lt;pattern&gt;ONE TIME I *&lt;/pattern&gt;<br/>    &lt;template&gt;<br/>        &lt;random&gt;<br/>            &lt;li&gt;Go on.&lt;/li&gt;<br/>            &lt;li&gt;How old are you?&lt;/li&gt;<br/>            &lt;li&gt;Be more specific.&lt;/li&gt;<br/>            &lt;li&gt;I did not know that.&lt;/li&gt;<br/>            &lt;li&gt;Are you telling the truth?&lt;/li&gt;<br/>            &lt;li&gt;I don't know what that means.&lt;/li&gt;<br/>            &lt;li&gt;Try to tell me that another way.&lt;/li&gt;<br/>            &lt;li&gt;Are you talking about an animal, vegetable or mineral?&lt;/li&gt;<br/>            &lt;li&gt;What is it?&lt;/li&gt;<br/>        &lt;/random&gt;<br/>    &lt;/template&gt;<br/>&lt;/category&gt;</code></pre>

<a name="existing-aiml-files"/>
<h2>Use Existing AIML Files</h2>
<p>It can be fun to write your own AIML files, but it can be a lot of work. I think it needs
around 10,000 patterns before it starts to feel realistic. Fortunately, the ALICE foundation
provides a number of AIML files for free. Browse the AIML files on the <a href="http://www.alicebot.org/aiml/aaa/" target="_blank">Alice Bot website</a>. There was
one floating around before called std-65-percent.xml that contained the most common 65% of phrases. There is also one that lets you play BlackJack with the bot.
</p>


<a name="enter-python"/>
<h2>Enter Python</h2>
<p>
So far, everything has been AIML XML files. All of that is important and will make up
the brain of the bot, but it's just information right now. The bot needs to come to life.
You could use any language to implement the AIML specification, but some nice person has
already done that in Python.
</p>

<p>Install the <strong>aiml</strong> package first with <strong>pip</strong>.</p>
<pre class="prettyprint"><code>pip install aiml</code></pre>

<p>Note that the <strong>aiml</strong> package only works with Python 2. <a href="https://github.com/huntersan9/Py3kAiml" target="_blank">Py3kAiml on GitHub</a> is a Python 3 alternative.</p>

<a name="simple"/>
<h2>Simplest Python Program</h2>
<p>This is the simplest program we can start with. It creates the aiml object,
learns the startup file, and then loads the rest of the aiml files. After that,
it is ready to chat, and we enter an infinite loop that will continue to prompt
the user for a message. You will need to enter a pattern the bot recognizes. The patterns recognized
depend on what AIML files you loaded.</p>

<p>
We create the startup file as a separate entity so that we can add more aiml files
to the bot later without having to modify any of the programs source code. We can just
add more files to learn in the startup xml file.</p>

<pre class="prettyprint"><code>import aiml<br/><br/># Create the kernel and learn AIML files<br/>kernel = aiml.Kernel()<br/>kernel.learn("std-startup.xml")<br/>kernel.respond("load aiml b")<br/><br/># Press CTRL-C to break this loop<br/>while True:<br/>    print kernel.respond(raw_input("Enter your message &gt;&gt; "))</code></pre>


<a name="speeding-brain"/>
<h2>Speeding up Brain Load</h2>
<p>When you start to have a lot of AIML files, it can take a long time to learn.
This is where brain files come in. After the bot learns all the AIML files
it can save its brain directly to a file which will drastically speed up load times
on subsequent runs.</p>

<pre class="prettyprint"><code>import aiml<br/>import os<br/><br/>kernel = aiml.Kernel()<br/><br/>if os.path.isfile("bot_brain.brn"):<br/>    kernel.bootstrap(brainFile = "bot_brain.brn")<br/>else:<br/>    kernel.bootstrap(learnFiles = "std-startup.xml", commands = "load aiml b")<br/>    kernel.saveBrain("bot_brain.brn")<br/><br/># kernel now ready for use<br/>while True:<br/>    print kernel.respond(raw_input("Enter your message &gt;&gt; "))</code></pre>

<a name="reloading"/>
<h2>Reloading AIML While Running</h2>
<p>You can send the load message to the bot while it is running and it will reload the AIML files. Keep in mind
that if you are using the brain method as it is written above, reloading it on the fly will not save the new changes
to the brain. You will either need to delete the brain file so it rebuilds on the next startup, or you will need to modify
the code so that it saves the brain at some point after reloading. See the next section on creating Python commands
for the bot to do that.</p>

<pre class="prettyprint"><code>load aiml b</code></pre>

<a name="commands"/>
<h2>Adding Python Commands</h2>
<p>If you want to give your bot some special commands that run Python functions, then you should capture the input message
to the bot and process it before sending it to <strong>kernel.respond()</strong>. In the example above we are getting user input
from <strong>raw_input</strong>. We could get our input from anywhere though. Perhaps a TCP socket, or a voice-to-text source.
Process the message before it goes through AIML. You may want to skip the AIML processing on certain messages. 

</p><pre class="prettyprint"><code>while True:<br/>    message = raw_input("Enter your message to the bot: ")<br/>    if message == "quit":<br/>        exit()<br/>    elif message == "save":<br/>        kernel.saveBrain("bot_brain.brn")<br/>    else:<br/>        bot_response = kernel.respond(message)<br/>        # Do something with bot_response</code></pre>

<a name="sessions"/>
<h2>Sessions and Predicates</h2>
<p>By specifying a session, the AIML can tailor different conversations to different people. For example, if one person tells the bot their name is Alice, and the other person tells the bot their name is Bob, the bot can differentiate the people. To specify which session you are using you pass it as a second parameter to <strong>respond()</strong>.
</p>

<pre class="prettyprint"><code>sessionId = 12345<br/>kernel.respond(raw_input("&gt;&gt;&gt;"), sessionId)</code></pre>

<p>
This is good for having personalized conversations with each client. You will have to generate your own session Id some how and track them. Note that saving
the brain file does not save all the session values.
</p>

<pre class="prettyprint"><code>sessionId = 12345<br/><br/># Get session info as dictionary. Contains the input<br/># and output history as well as any predicates known<br/>sessionData = kernel.getSessionData(sessionId)<br/><br/># Each session ID needs to be a unique value<br/># The predicate name is the name of something/someone<br/># that the bot knows about in your session with the bot<br/># The bot might know you as "Billy" and that your "dog" is named "Brandy"<br/>kernel.setPredicate("dog", "Brandy", sessionId)<br/>clients_dogs_name = kernel.getPredicate("dog", sessionId)<br/><br/>kernel.setBotPredicate("hometown", "127.0.0.1")<br/>bot_hometown = kernel.getBotPredicate("hometown")</code></pre>

<p>In the AIML we can set predicates using the <strong>set</strong> response in template.</p>
<pre class="prettyprint"><code>&lt;aiml version="1.0.1" encoding="UTF-8"&gt;<br/>   &lt;category&gt;<br/>      &lt;pattern&gt;MY DOGS NAME IS *&lt;/pattern&gt;<br/>      &lt;template&gt;<br/>         That is interesting that you have a dog named &lt;set name="dog"&gt;&lt;star/&gt;&lt;/set&gt;<br/>      &lt;/template&gt;  <br/>   &lt;/category&gt;  <br/>   &lt;category&gt;<br/>      &lt;pattern&gt;WHAT IS MY DOGS NAME&lt;/pattern&gt;<br/>      &lt;template&gt;<br/>         Your dog's name is &lt;get name="dog"/&gt;.<br/>      &lt;/template&gt;  <br/>   &lt;/category&gt;  <br/>&lt;/aiml&gt;</code></pre>

<p>With the AIML above you could tell the bot:</p>
<pre class="prettyprint"><code>My dogs name is Max</code></pre>
<p>And the bot will respond with 
</p><pre class="prettyprint"><code>That is interesting that you have a dog named Max</code></pre>
<p>And if you ask the bot:</p>
<pre class="prettyprint"><code>What is my dogs name?</code></pre>
<p>The bot will respond:</p>
<pre class="prettyprint"><code>Your dog's name is Max.</code></pre>

<a name="references"/>
<h2>Additional References</h2>

</div></div></body></html>