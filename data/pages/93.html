<html><body><div><div class="content-wrapper">
						<div id="attachment_55054" class="wp-caption alignright"><img src="http://cdn4.raywenderlich.com/wp-content/uploads/2013/11/MultiplayerGame.png" alt="Learn how to make a multiplayer game with Python!" class="size-full wp-image-55054" srcset="http://cdn3.raywenderlich.com/wp-content/uploads/2013/11/MultiplayerGame-32x32.png 32w, http://cdn3.raywenderlich.com/wp-content/uploads/2013/11/MultiplayerGame-64x64.png 64w, http://cdn3.raywenderlich.com/wp-content/uploads/2013/11/MultiplayerGame-96x96.png 96w, http://cdn3.raywenderlich.com/wp-content/uploads/2013/11/MultiplayerGame-128x128.png 128w, http://cdn3.raywenderlich.com/wp-content/uploads/2013/11/MultiplayerGame.png 250w" sizes="(max-width: 250px) 100vw, 250px"/><p class="wp-caption-text">Learn how to make a multiplayer game with Python!</p></div>
<p><i>This is a post by Tutorial Team Member <a href="/?page_id=9#julianmeyer">Julian Meyer</a>, a 13-year-old python developer. You can find him on <a href="https://plus.google.com/u/0/117404693911977592313?rel=author" rel="author" target="_blank">Google+</a> and <a href="https://twitter.com/jmeyer2k" target="_blank">Twitter</a>.<br/>
</i></p>
<p>I’m sure that once in a while, you and your friends go online to play a multiplayer game. Have you ever wondered about the inside of that game and how everything works? </p>
<p>In this tutorial, you will learn about multiplayer game programming by creating a sample game. Along the way you will also learn about object-oriented programming. </p>
<p>For this tutorial, you will be using Python and the PyGame modules. If you are new to Python or PyGame, you should first look at <a href="/?p=24252">this earlier tutorial on beginning game programming</a>, which explains some of the basics of PyGame. </p>
<h2>Getting Started</h2>
<p>The first step is to make sure that you have PyGame installed. You can download a Mac installer for PyGame <a href="http://www.pygame.org/download.shtml" title="Mac OS X Installer">here</a>. Make sure you download the Lion installer if you have Mac OSX 10.7 or up. Otherwise, download the Snow Leopard installer. </p>
<p>You can also download and install PyGame in these ways:</p>
<ul>
<li>With MacPorts using: <code>sudo port install python2.7 py27-game</code></li>
<li>With Fink using: <code>sudo fink install python27 pygame-py27</code></li>
<li>With Homebrew and pip using the command found <a href="https://bitbucket.org/pygame/pygame/issue/82/homebrew-on-leopard-fails-to-install#comment-627494" title="here">here</a>.</li>
</ul>
<p>If you are running Windows, then you can find your installer <a href="http://pygame.org/" title="here">here</a>.</p>
<div class="note">
<p><em>Note:</em> If you had trouble in the last tutorial, make sure you have the 32-bit version of Python on your system. If you have a 64-bit system, then you need to run <code>python2.7-32</code> to run Python.</p>
</div>
<p>Lastly, <a href="http://cdn3.raywenderlich.com/downloads/BoxesResources.zip">download the resources for this project</a>, which include some images and sounds that you’ll need for this game.</p>
<h2>The Rules of the Game</h2>
<p>The game you’re going to make in this tutorial is called “Boxes”. You may be familiar with playing this game on paper with some friends while you were in school!</p>
<p>In case you’re not familiar with the game, here are the rules:</p>
<ol>
<li>The board consists of a 7×7 grid of points (which makes a 6×6 grid of cubes if you were to connect the dots).</li>
</ol>
<p><img src="http://cdn4.raywenderlich.com/wp-content/uploads/2013/11/Boxes1.png" alt="Boxes1" class="aligncenter size-full wp-image-55060" srcset="http://cdn1.raywenderlich.com/wp-content/uploads/2013/11/Boxes1-426x320.png 426w, http://cdn1.raywenderlich.com/wp-content/uploads/2013/11/Boxes1.png 500w" sizes="(max-width: 500px) 100vw, 500px"/></p>
<ol start="2">
<li>On each player’s turn, the player fills in the horizontal or vertical line segment connecting two neighboring points.</li>
</ol>
<p><img src="http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes2.png" alt="Boxes2" class="aligncenter size-full wp-image-55061" srcset="http://cdn4.raywenderlich.com/wp-content/uploads/2013/11/Boxes2-426x320.png 426w, http://cdn4.raywenderlich.com/wp-content/uploads/2013/11/Boxes2.png 500w" sizes="(max-width: 500px) 100vw, 500px"/></p>
<ol start="3">
<li>If filling in a line segment completes a box on the grid, the player becomes the owner of that square and gets a point. The player also gets to place another line segment on the same turn.</li>
</ol>
<p><img src="http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes3.png" alt="Boxes3" class="aligncenter size-full wp-image-55062" srcset="http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes3-480x179.png 480w, http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes3.png 700w" sizes="(max-width: 700px) 100vw, 700px"/></p>
<ol start="4">
<li>The player with the most squares/points at the end of the game wins!</li>
</ol>
<p>Although these rules are very simple, it’s a fun game to play, especially if you’re bored. But wouldn’t it be great if you could play this online?</p>
<h2>Object-Oriented Programming: A Quick Introduction</h2>
<p>Before we begin, let’s discuss something called Object-Oriented Programming which you’re going to use in this tutorial.</p>
<p>Object-oriented programming, also known as OOP, is a type of programming based on <em>objects</em>. Object are bundles of data and associated logic. For example, you might have a “dog” object that consists of some data (the dog’s name or favorite treat) and associated logic (for example, instructions on how to bark).</p>
<p>Objects are made from templates called <em>classes</em> that define what kinds of data the object can hold and what kinds of things the object can do. These are known as the object’s <em>properties</em> and <em>methods</em>, respectively. </p>
<p>Methods are functions that represent something you can ask the object to do. For example, the statement <code>car.drive()</code> can be interpreted as telling the object in the “car” variable to “drive”. Properties are variables that belong to an object. Continuing the example, your car object might have a property called <code>gas</code>, and the statement <code>car.gas = 100</code> would set the car’s <code>gas</code> to 100.</p>
<p>These two statements manipulate a car object that already exists. Recall that the car’s class is the template that defines how to make a car object and what a car is by defining its properties and methods. Within the definitions of those methods, you will find the code that manipulates the car from the inside. For instance, instead of <code>car.gas = 100</code>, you might find <code>self.gas=100</code>, which is a car object telling itself – <code>self</code>, get it? – to set its own gas to 100.</p>
<p>OOP is a large topic but the basics above are all you need to get started. Your code will describe the Boxes game as the interaction of various objects. Those objects all have properties and methods, which you will define in the object’s class. And when you write a piece of code, you should remember whether you’re writing the class code that defines what an object can do from the “inside” of the object, or code that manipulates an object from the “outside” of that object.</p>
<h2>Setting Up a Basic Object-Oriented Game</h2>
<p>There are a couple of ways to use an object-oriented framework for your game. Your Boxes game will take a simple approach in which there is one class for the client and one for the server. For now, let’s just create the main client class that will run when the user starts the game.</p>
<p>At the start of making every game, I like to make a folder for the game. When you unzipped the resources for this project, it should have created a folder or you called <em>boxes</em>. This is where you will put your source code for the game – right here alongside all the images.</p>
<p>Create a file in this directory called <em>boxes.py</em> using your favorite text editor (if you don’t have one, you can use TextEdit on the Mac, or Notepad in Windows). Then add this import of the file:</p>



<p>This imports the PyGame module for you to use. Before you go any further, you should test that at least this much is working. To do this, open Terminal and switch to your boxes directory using the <em>cd</em> command. Then enter <em>python boxes.py</em>. For example, here’s what it looks like on my machine:</p>

<div class="wp_codebox"><table><tr id="p387322"><td class="code" id="p38732code2"><pre class="command">cd /Users/jmeyer/Downloads/boxes 
python boxes.py</pre></td></tr></table></div>

<p>If you get no errors after running this, that means you have PyGame installed correctly, and you are good to go.</p>
<div class="note">
<p>
<em>Note:</em> If running the code above gives you an <code>ImportError</code> saying there is “No module named pygame”, then you have not installed PyGame or else you have installed PyGame into a copy of Python different from the one you are running. For instance, if you used MacPorts to install Python 2.7 and PyGame with <code>port install python2.7 py27-game</code>, then make sure to run the same Python by calling <code>python2.7</code> from the Terminal.  </p>
<p>If running the code above gives you this specific error:</p>

<div class="wp_codebox"><table><tr id="p387323"><td class="code" id="p38732code3"><pre class="shell">ImportError: /Library/Frameworks/SDL.framework/Versions/A/SDL: no appropriate 64-bit architecture (see "man python" for running in 32-bit mode)</pre></td></tr></table></div>

<p>That means you need to run Python in 32-bit mode, like this:</p>




</div>
<p>Next add the class definition, as well as one thing every class should have:</p>

<div class="wp_codebox"><table><tr id="p387325"><td class="code" id="p38732code5"><pre class="python"><span>class</span> BoxesGame<span>(</span><span>)</span>:
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>)</span>:
        <span>pass</span>
        <span>#put something here that will run when you init the class.</span></pre></td></tr></table></div>

<p>The first line of this code tells the compiler that you are creating a new class called <em>BoxesGame</em>. The second line defines a method called <code>__init__</code>. The surrounding double underscores are a hint that this is a special method name. In fact, this name identifies the method as the class’s <code>__init__</code> method, the method that you run whenever you want to create or <em>instantiate</em> an object of the class.</p>
<p>Now you’ll fill in the body of the <code>init</code> function to do some PyGame initialization. Add this to the code you wrote above, in place of the comment beginning with <code>#put something here...</code>:</p>

<div class="wp_codebox"><table><tr id="p387326"><td class="code" id="p38732code6"><pre class="python"><span>#1</span>
pygame.<span>init</span><span>(</span><span>)</span>
width, height = <span>389</span>, <span>489</span>
<span>#2</span>
<span>#initialize the screen</span>
<span>self</span>.<span>screen</span> = pygame.<span>display</span>.<span>set_mode</span><span>(</span><span>(</span>width, height<span>)</span><span>)</span>
pygame.<span>display</span>.<span>set_caption</span><span>(</span><span>"Boxes"</span><span>)</span>
<span>#3</span>
<span>#initialize pygame clock</span>
<span>self</span>.<span>clock</span>=pygame.<span>time</span>.<span>Clock</span><span>(</span><span>)</span></pre></td></tr></table></div>

<p>Make sure you indent it correctly, so that everything lines up to the left margin of where the <em>“#put something here…”</em> comment was. You can read more about the matter here: <a href="http://en.wikipedia.org/wiki/Python_syntax_and_semantics#Indentation" title="Python Indentation">Python Indentation</a>.</p>
<p>Let’s look at the code you just added, one chunk at a time:</p>
<ol>
<li>First you initialize PyGame and two variables that you’ll use to set up the screen, <code>width</code> and <code>height</code>.</li>
<li>Then you initialize the screen using those two variables. You also set the title of the screen.</li>
<li>Finally, you initialize the PyGame clock, which you’ll need for tracking time in the game.</li>
</ol>
<p>Next let’s add the <code>update()</code> loop, which runs every periodically to update the game, draw the graphics and receive user input. Do this by simply adding the following after the <em>__init__</em> method (the left margin should be equal to the left margin of __init__):</p>

<div class="wp_codebox"><table><tr id="p387327"><td class="code" id="p38732code7"><pre class="python"><span>def</span> update<span>(</span><span>self</span><span>)</span>:
    <span>#sleep to make the game 60 fps</span>
    <span>self</span>.<span>clock</span>.<span>tick</span><span>(</span><span>60</span><span>)</span>
 
    <span>#clear the screen</span>
    <span>self</span>.<span>screen</span>.<span>fill</span><span>(</span><span>0</span><span>)</span>
 
    <span>for</span> event <span>in</span> pygame.<span>event</span>.<span>get</span><span>(</span><span>)</span>:
        <span>#quit if the quit button was pressed</span>
        <span>if</span> event.<span>type</span> == pygame.<span>QUIT</span>:
            exit<span>(</span><span>)</span>
 
    <span>#update the screen</span>
    pygame.<span>display</span>.<span>flip</span><span>(</span><span>)</span></pre></td></tr></table></div>

<p>This is a basic update loop that clears the screen and checks to see if the user wants to quit the game. You’ll be adding more to this later.</p>
<p>Running the Python file now won’t do anything yet, as all you’ve done is defined the class BoxesGame. You still need to create an object of this class and start the game!</p>
<p>Now that you have the update loop ready, let’s add the code that will run the main game class. After that, you’ll set up some of the basic graphics in the game, such as drawing the board.</p>
<p>Add this code to the end of the file to start the game (the left margin should be equal to the left margin of the file):</p>

<div class="wp_codebox"><table><tr id="p387328"><td class="code" id="p38732code8"><pre class="python">bg=BoxesGame<span>(</span><span>)</span> <span>#__init__ is called right here</span>
<span>while</span> <span>1</span>:
    bg.<span>update</span><span>(</span><span>)</span></pre></td></tr></table></div>

<p>This is the nice thing about object-oriented programming: The code that actually makes things happen is only three lines long! </p>
<p>At this point, the entire file should look like this:</p>

<div class="wp_codebox"><table><tr id="p387329"><td class="code" id="p38732code9"><pre class="python"><span>import</span> pygame
 
<span>class</span> BoxesGame<span>(</span><span>)</span>:
    <span>def</span> <span>__init__</span><span>(</span><span>self</span><span>)</span>:
        <span>pass</span>
        <span>#1</span>
        pygame.<span>init</span><span>(</span><span>)</span>
        width, height = <span>389</span>, <span>489</span>
        <span>#2</span>
        <span>#initialize the screen</span>
        <span>self</span>.<span>screen</span> = pygame.<span>display</span>.<span>set_mode</span><span>(</span><span>(</span>width, height<span>)</span><span>)</span>
        pygame.<span>display</span>.<span>set_caption</span><span>(</span><span>"Boxes"</span><span>)</span>
        <span>#3</span>
        <span>#initialize pygame clock</span>
        <span>self</span>.<span>clock</span>=pygame.<span>time</span>.<span>Clock</span><span>(</span><span>)</span>
    <span>def</span> update<span>(</span><span>self</span><span>)</span>:
        <span>#sleep to make the game 60 fps</span>
        <span>self</span>.<span>clock</span>.<span>tick</span><span>(</span><span>60</span><span>)</span>
 
        <span>#clear the screen</span>
        <span>self</span>.<span>screen</span>.<span>fill</span><span>(</span><span>0</span><span>)</span>
 
        <span>for</span> event <span>in</span> pygame.<span>event</span>.<span>get</span><span>(</span><span>)</span>:
            <span>#quit if the quit button was pressed</span>
            <span>if</span> event.<span>type</span> == pygame.<span>QUIT</span>:
                exit<span>(</span><span>)</span>
 
        <span>#update the screen</span>
        pygame.<span>display</span>.<span>flip</span><span>(</span><span>)</span>
 
bg=BoxesGame<span>(</span><span>)</span> <span>#__init__ is called right here</span>
<span>while</span> <span>1</span>:
    bg.<span>update</span><span>(</span><span>)</span></pre></td></tr></table></div>

<p>That’s it. Now wasn’t that easy? This is a good time to run the game:</p>
<p><a href="http://cdn3.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.16.08-AM.png"><img src="http://cdn5.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.16.08-AM-257x320.png" alt="Screen Shot 2013-06-13 at 6.16.08 AM" class="aligncenter size-medium wp-image-42242" srcset="http://cdn2.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.16.08-AM-257x320.png 257w, http://cdn2.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.16.08-AM-402x500.png 402w" sizes="(max-width: 257px) 100vw, 257px"/></a> </p>
<p>As you can see, running the game results in a very impressive black screen! Yay! </p>
<p>You may not understand this now, but game writing is a strategic process. Think of it as being an architect. You have just built a strong base for your building. Large buildings must have very good bases and so you must think your plan through before you start.</p>
<p>Let’s add another method. If you don’t remember what this means, reread the section of the tutorial called, “Object Oriented Programming: A Quick Introduction.”</p>
<h2>Drawing the Board and Lines on the Screen</h2>
<p>In PyGame, the upper left of the window is coordinate (0, 0). So let’s define a coordinate system for the points in the Boxes grid that is similar, with (0,0) representing the upper left point and (6,6) representing the bottom right point:</p>
<p><img src="http://cdn2.raywenderlich.com/wp-content/uploads/2013/11/Boxes4.png" alt="Boxes4" class="aligncenter size-full wp-image-55071" srcset="http://cdn3.raywenderlich.com/wp-content/uploads/2013/11/Boxes4-480x278.png 480w, http://cdn3.raywenderlich.com/wp-content/uploads/2013/11/Boxes4.png 500w" sizes="(max-width: 500px) 100vw, 500px"/></p>
<p>Somehow, you need a way to represent the potential line segments in the game. Well, there are two different types of line segments: horizontal and vertical lines. Let’s imagine you make a list of all the potential horizontal and vertical line combinations. It would look something like this:</p>
<p><img src="http://cdn2.raywenderlich.com/wp-content/uploads/2013/11/Boxes5.png" alt="Boxes5" class="aligncenter size-full wp-image-55073" srcset="http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes5-480x247.png 480w, http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes5.png 700w" sizes="(max-width: 700px) 100vw, 700px"/></p>
<p>In programming terms, a list is also known as an array. And when you have a list of lists, like the horizontal and vertical line combinations here, that’s called a 2D array.</p>
<p>For example, to represent the horizontal line from (0, 0) to (1, 1), that would be row 0, column 0 in the “horizontal lines” list. </p>
<p>Note that the horizontal lines list has 6 rows and 7 columns, and the vertical lines list has 7 rows and 6 columns. </p>
<p>Add these two lines to <em>__init__</em> to define these two arrays:</p>

<div class="wp_codebox"><table><tr id="p3873210"><td class="code" id="p38732code10"><pre class="python"><span>self</span>.<span>boardh</span> = <span>[</span><span>[</span><span>False</span> <span>for</span> x <span>in</span> <span>range</span><span>(</span><span>6</span><span>)</span><span>]</span> <span>for</span> y <span>in</span> <span>range</span><span>(</span><span>7</span><span>)</span><span>]</span>
<span>self</span>.<span>boardv</span> = <span>[</span><span>[</span><span>False</span> <span>for</span> x <span>in</span> <span>range</span><span>(</span><span>7</span><span>)</span><span>]</span> <span>for</span> y <span>in</span> <span>range</span><span>(</span><span>6</span><span>)</span><span>]</span></pre></td></tr></table></div>

<p>A quick way to create an array is to do this: <code>[valuePerItem for x in y]</code>. In this case, you fill an array with an array filled with <code>False</code>s. <code>False</code> stands for an empty space. </p>
<p>Now that you have the board representation, let’s get to the code of drawing the board.</p>
<p>First of all, create a new method called <code>initGraphics()</code>. This method will be something you call from <code>__init__</code> but, to keep your code organized, you’re creating a separate method just for the purpose of loading the graphics. Add this right before the <code>__init__</code> function:</p>

<div class="wp_codebox"><table><tr id="p3873211"><td class="code" id="p38732code11"><pre class="python"><span>def</span> initGraphics<span>(</span><span>self</span><span>)</span>:
    <span>self</span>.<span>normallinev</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"normalline.png"</span><span>)</span>
    <span>self</span>.<span>normallineh</span>=pygame.<span>transform</span>.<span>rotate</span><span>(</span>pygame.<span>image</span>.<span>load</span><span>(</span><span>"normalline.png"</span><span>)</span>, -<span>90</span><span>)</span>
    <span>self</span>.<span>bar_donev</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"bar_done.png"</span><span>)</span>
    <span>self</span>.<span>bar_doneh</span>=pygame.<span>transform</span>.<span>rotate</span><span>(</span>pygame.<span>image</span>.<span>load</span><span>(</span><span>"bar_done.png"</span><span>)</span>, -<span>90</span><span>)</span>
    <span>self</span>.<span>hoverlinev</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"hoverline.png"</span><span>)</span>
    <span>self</span>.<span>hoverlineh</span>=pygame.<span>transform</span>.<span>rotate</span><span>(</span>pygame.<span>image</span>.<span>load</span><span>(</span><span>"hoverline.png"</span><span>)</span>, -<span>90</span><span>)</span></pre></td></tr></table></div>

<p>As you can see, you have three main sprites: an normal (empty) line, a done (occupied) line and a hover line.  You rotate each of these lines by 90 degrees to draw the horizontal versions of them. These files came with the resources you downloaded earlier and should be in the same directory as your Python file.</p>
<p>You have a method to load all of the graphics, but you have yet to call it. Try to guess where to add what!</p>
<p>Once you have an answer, click the <em>Show</em> button below to see if you’re right.</p>

<div class="easySpoilerWrapper">
<table class="easySpoilerTable" border="0" align="center">

<tr>
<th class="easySpoilerTitleA">Solution Inside: Solution</th>
<th class="easySpoilerTitleB"><a href="" class="easySpoilerButtonOther" align="right">Select</a><a href="" id="spoilerDiv56b28001_action" class="easySpoilerButton" value="Show" align="right">Show&gt;</a></th>
</tr>
<tr><td class="easySpoilerRow" colspan="2"><div id="spoilerDiv56b28001" class="easySpoilerSpoils"><p>
Add this at the end of __init__:

</p><div class="wp_codebox"><table><tr id="p3873212"><td class="code" id="p38732code12"><pre class="python"><span>#initialize the graphics</span>
<span>self</span>.<span>initGraphics</span><span>(</span><span>)</span></pre></td></tr></table></div>

<p>
</p></div></td></tr>
</table>

</div>

<p>Next you should add the code that actually draws the board. To loop through every x and y in a grid, you must add a <code>for</code> loop inside of a <code>for</code> loop. (For all of you Inception fans, a for-loop-ception.) You need a loop that loops through the x- and y-values. Add this right after the <code>__init__</code> method:</p>

<div class="wp_codebox"><table><tr id="p3873213"><td class="code" id="p38732code13"><pre class="python"><span>def</span> drawBoard<span>(</span><span>self</span><span>)</span>:
    <span>for</span> x <span>in</span> <span>range</span><span>(</span><span>6</span><span>)</span>:
        <span>for</span> y <span>in</span> <span>range</span><span>(</span><span>7</span><span>)</span>:
            <span>if</span> <span>not</span> <span>self</span>.<span>boardh</span><span>[</span>y<span>]</span><span>[</span>x<span>]</span>:
                <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>normallineh</span>, <span>[</span><span>(</span>x<span>)</span><span>*</span><span>64</span>+<span>5</span>, <span>(</span>y<span>)</span><span>*</span><span>64</span><span>]</span><span>)</span>
            <span>else</span>:
                <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>bar_doneh</span>, <span>[</span><span>(</span>x<span>)</span><span>*</span><span>64</span>+<span>5</span>, <span>(</span>y<span>)</span><span>*</span><span>64</span><span>]</span><span>)</span>
    <span>for</span> x <span>in</span> <span>range</span><span>(</span><span>7</span><span>)</span>:
        <span>for</span> y <span>in</span> <span>range</span><span>(</span><span>6</span><span>)</span>:
            <span>if</span> <span>not</span> <span>self</span>.<span>boardv</span><span>[</span>y<span>]</span><span>[</span>x<span>]</span>:
                <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>normallinev</span>, <span>[</span><span>(</span>x<span>)</span><span>*</span><span>64</span>, <span>(</span>y<span>)</span><span>*</span><span>64</span>+<span>5</span><span>]</span><span>)</span>
            <span>else</span>:
                <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>bar_donev</span>, <span>[</span><span>(</span>x<span>)</span><span>*</span><span>64</span>, <span>(</span>y<span>)</span><span>*</span><span>64</span>+<span>5</span><span>]</span><span>)</span></pre></td></tr></table></div>

<p>This code simply loops through the grid and checks whether or not that part on the grid has been clicked. The code does this for both the horizontal and vertical lines. <code>self.boardv[x][y]</code> and <code>self.boardh[x][y]</code> returns either true or false, depending on whether the appropriate line segment has been filled in yes. </p>
<p>Running the program now still won’t do anything. All you’ve done is defined what the game should do if it ever gets that method call.</p>
<p>Now let’s add the method call to the update function. Add this after you clear the screen with <code>screen.fill(0)</code>:</p>

<div class="wp_codebox"><table><tr id="p3873214"><td class="code" id="p38732code14"><pre class="python"><span>#draw the board</span>
<span>self</span>.<span>drawBoard</span><span>(</span><span>)</span></pre></td></tr></table></div>

<p>And of course, as a good programmer, you remember to add a comment to explain the code.</p>
<p>Run your code now. When you do, you should see the grid drawn on the screen: </p>
<p><a href="http://cdn5.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.28.57-AM.png"><img src="http://cdn3.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.28.57-AM-402x500.png" alt="Screen Shot 2013-06-13 at 6.28.57 AM" class="aligncenter size-large wp-image-42245" srcset="http://cdn1.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.28.57-AM-257x320.png 257w, http://cdn1.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.28.57-AM-402x500.png 402w, http://cdn1.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-13-at-6.28.57-AM.png 503w" sizes="(max-width: 402px) 100vw, 402px"/></a></p>
<p>Every time I write map drawing code, I like to test it out, both because it’s fun and because it’s a good way to find bugs. Add this after you initialize the boards by defining <code>self.boardh</code> and <code>self.boardv</code>:</p>



<p>Run the code and as you can see, one horizontal line is lit up – the line from (5, 3) to (5, 4): </p>
<p><img src="http://cdn2.raywenderlich.com/wp-content/uploads/2013/11/Boxes6-402x500.png" alt="Boxes6" class="aligncenter size-large wp-image-55082" srcset="http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes6-257x320.png 257w, http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes6-402x500.png 402w, http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes6.png 503w" sizes="(max-width: 402px) 100vw, 402px"/></p>
<p>Pretty cool, huh? Delete the line of test code you just added.</p>
<p>Good job. You’ve finished drawing your map, which is one of the most difficult things to do in game programming.</p>
<h2>Adding Other Types of Lines</h2>
<p>Next you need to find the line to which the mouse is closest so that you can draw a hover line at that spot. </p>
<p>First, at the top of the file, add this line to import the math library, which you’ll need soon:</p>



<p>Then, before <code>pygame.display.flip()</code>, add this big chunk of code:</p>

<div class="wp_codebox"><table><tr id="p3873217"><td class="code" id="p38732code17"><pre class="python"><span>#1</span>
mouse = pygame.<span>mouse</span>.<span>get_pos</span><span>(</span><span>)</span>
 
<span>#2</span>
xpos = <span>int</span><span>(</span><span>math</span>.<span>ceil</span><span>(</span><span>(</span>mouse<span>[</span><span>0</span><span>]</span>-<span>32</span><span>)</span>/<span>64.0</span><span>)</span><span>)</span>
ypos = <span>int</span><span>(</span><span>math</span>.<span>ceil</span><span>(</span><span>(</span>mouse<span>[</span><span>1</span><span>]</span>-<span>32</span><span>)</span>/<span>64.0</span><span>)</span><span>)</span>
 
<span>#3</span>
is_horizontal = <span>abs</span><span>(</span>mouse<span>[</span><span>1</span><span>]</span> - ypos<span>*</span><span>64</span><span>)</span> <span>&lt;</span> <span>abs</span><span>(</span>mouse<span>[</span><span>0</span><span>]</span> - xpos<span>*</span><span>64</span><span>)</span>
 
<span>#4</span>
ypos = ypos - <span>1</span> <span>if</span> mouse<span>[</span><span>1</span><span>]</span> - ypos<span>*</span><span>64</span> <span>&lt;</span> <span>0</span> <span>and</span> <span>not</span> is_horizontal <span>else</span> ypos
xpos = xpos - <span>1</span> <span>if</span> mouse<span>[</span><span>0</span><span>]</span> - xpos<span>*</span><span>64</span> <span>&lt;</span> <span>0</span> <span>and</span> is_horizontal <span>else</span> xpos
 
<span>#5</span>
board=<span>self</span>.<span>boardh</span> <span>if</span> is_horizontal <span>else</span> <span>self</span>.<span>boardv</span> 
isoutofbounds=<span>False</span>
 
<span>#6</span>
<span>try</span>: 
    <span>if</span> <span>not</span> board<span>[</span>ypos<span>]</span><span>[</span>xpos<span>]</span>: <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>hoverlineh</span> <span>if</span> is_horizontal <span>else</span> <span>self</span>.<span>hoverlinev</span>, <span>[</span>xpos<span>*</span><span>64</span>+<span>5</span> <span>if</span> is_horizontal <span>else</span> xpos<span>*</span><span>64</span>, ypos<span>*</span><span>64</span> <span>if</span> is_horizontal <span>else</span> ypos<span>*</span><span>64</span>+<span>5</span><span>]</span><span>)</span>
<span>except</span>:
    isoutofbounds=<span>True</span>
    <span>pass</span>
<span>if</span> <span>not</span> isoutofbounds:
    alreadyplaced=board<span>[</span>ypos<span>]</span><span>[</span>xpos<span>]</span>
<span>else</span>:
    alreadyplaced=<span>False</span></pre></td></tr></table></div>

<p>Wow! That’s a lot of code. Let’s go over the sections one-by-one:</p>
<ol>
<li>First you get the mouse position with PyGame’s built-in function.</li>
<li>Next you get the position of the mouse on the grid, using the fact that each square is 64×64 pixels.</li>
<li>You check if the mouse is closer to the top and bottom or the left and right, in order to determine whether the user is hovering over a horizontal or vertical line.</li>
<li>You get the new position on the grid based on the <code>is_horizontal</code> variable.</li>
<li>You initialize the variable <code>board</code> as either <code>boardh</code> or <code>boardv</code>, whichever is correct.</li>
<li>Finally, you try drawing the hover line to the screen, taking into consideration whether it is horizontal or vertical and on the top, bottom, left or right. You also check if the line is out of bounds. If it is, or if the line has already been drawn, you don’t draw the hover line.</li>
</ol>
<p>Run the program and you get… drum roll, please… a map where a line lights up as your mouse moves over it! </p>
<p>If you’re like me, you probably have your mouse whizzing across the board by now. Take some time to enjoy your results.</p>
<p>OK, now you have a grid that lights up when the player’s mouse moves over a line. But this isn’t a game where you just have to move your mouse around a bunch. You need to add the click-to-lay-down-line functionality.</p>
<p>To do this, you’re going to use PyGame’s built-in mouse function, which is simply <code>pygame.mouse.get_pressed()[0]</code>. The function returns either 1 or 0, depending on whether the mouse button is currently pressed down.</p>
<p>Before I tell you how to implement this in your game, try figuring it out yourself. Remember how you used <code>if</code> statements before and how to create a piece on the board.</p>

<div class="easySpoilerWrapper">
<table class="easySpoilerTable" border="0" align="center">

<tr>
<th class="easySpoilerTitleA">Solution Inside: Solution</th>
<th class="easySpoilerTitleB"><a href="" class="easySpoilerButtonOther" align="right">Select</a><a href="" id="spoilerDiv553b8002_action" class="easySpoilerButton" value="Show" align="right">Show&gt;</a></th>
</tr>
<tr><td class="easySpoilerRow" colspan="2"><div id="spoilerDiv553b8002" class="easySpoilerSpoils"><p>
Add this directly after the last block of code defining hover behavior:

</p><div class="wp_codebox"><table><tr id="p3873218"><td class="code" id="p38732code18"><pre class="python"><span>if</span> pygame.<span>mouse</span>.<span>get_pressed</span><span>(</span><span>)</span><span>[</span><span>0</span><span>]</span> <span>and</span> <span>not</span> alreadyplaced:
    <span>if</span> is_horizontal:
        <span>self</span>.<span>boardh</span><span>[</span>ypos<span>]</span><span>[</span>xpos<span>]</span>=<span>True</span>
    <span>else</span>:
        <span>self</span>.<span>boardv</span><span>[</span>ypos<span>]</span><span>[</span>xpos<span>]</span>=<span>True</span></pre></td></tr></table></div>

<p>
</p></div></td></tr>
</table>

</div>

<p>Run the program now and voilà! If you click, you place a line just where you were hovering. As you can see, the code you added checks if the mouse is pressed and if the line should be horizontal or vertical, and places the line accordingly.</p>
<p><img src="http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes7-402x500.png" alt="Boxes7" class="aligncenter size-large wp-image-55085" srcset="http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes7-257x320.png 257w, http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes7-402x500.png 402w, http://cdn5.raywenderlich.com/wp-content/uploads/2013/11/Boxes7.png 503w" sizes="(max-width: 402px) 100vw, 402px"/></p>
<p>One problem, though, is that if you click at the bottom of the screen (below where the boxes are drawn), the game crashes. Let’s see why this is. When something crashes, usually it gives you an error report in the Terminal. In this case, the report looks like this:</p>

<div class="wp_codebox"><table><tr id="p3873219"><td class="code" id="p38732code19"><pre class="text">Traceback (most recent call last):
  File "/Users/school/Desktop/Dropbox/boxes/WIPBoxes.py", line 103, in &lt;module&gt;
    bg.update()
  File "/Users/school/Desktop/Dropbox/boxes/WIPBoxes.py", line 69, in update
    self.boardh[ypos][xpos]=True
IndexError: list index out of range</pre></td></tr></table></div>

<p>This error is saying that the array <code>boardh</code> that you tried to access doesn’t go as far as where you clicked. Remember that variable called <code>isoutofbounds</code>? That will come in handy here. Simply change this:</p>

<div class="wp_codebox"><table><tr id="p3873220"><td class="code" id="p38732code20"><pre class="python"><span>if</span> pygame.<span>mouse</span>.<span>get_pressed</span><span>(</span><span>)</span><span>[</span><span>0</span><span>]</span> <span>and</span> <span>not</span> alreadyplaced:
 
<span>#-----------to-------------</span>
 
<span>if</span> pygame.<span>mouse</span>.<span>get_pressed</span><span>(</span><span>)</span><span>[</span><span>0</span><span>]</span> <span>and</span> <span>not</span> alreadyplaced <span>and</span> <span>not</span> isoutofbounds:</pre></td></tr></table></div>

<p>Now if you try clicking outside of the board, the game doesn’t crash. Good job – you have just demonstrated the word debugging!</p>
<p>Before you begin implementing the game logic on the server side, let’s first add some finishing touches to the client side.</p>
<h2>Finishing Touches</h2>
<p>One thing that really bugs me are the spaces at the junctions of the lines. Fortunately, you can fix this quite easily using a 7×7 grid of square dots to fill in those spaces. Of course, you do need the image file, so let’s load that right now and at the same time add all of the other images you will be using in this section. </p>
<p>Add this to the end of <code>initGraphics()</code>:</p>

<div class="wp_codebox"><table><tr id="p3873221"><td class="code" id="p38732code21"><pre class="python"><span>self</span>.<span>separators</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"separators.png"</span><span>)</span>
<span>self</span>.<span>redindicator</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"redindicator.png"</span><span>)</span>
<span>self</span>.<span>greenindicator</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"greenindicator.png"</span><span>)</span>
<span>self</span>.<span>greenplayer</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"greenplayer.png"</span><span>)</span>
<span>self</span>.<span>blueplayer</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"blueplayer.png"</span><span>)</span>
<span>self</span>.<span>winningscreen</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"youwin.png"</span><span>)</span>
<span>self</span>.<span>gameover</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"gameover.png"</span><span>)</span>
<span>self</span>.<span>score_panel</span>=pygame.<span>image</span>.<span>load</span><span>(</span><span>"score_panel.png"</span><span>)</span></pre></td></tr></table></div>

<p>Now that you image is loaded, let’s draw each of the 49 dots onto the screen. Add this to the end of <code>drawBoard()</code>:</p>

<div class="wp_codebox"><table><tr id="p3873222"><td class="code" id="p38732code22"><pre class="python"><span>#draw separators</span>
<span>for</span> x <span>in</span> <span>range</span><span>(</span><span>7</span><span>)</span>:
    <span>for</span> y <span>in</span> <span>range</span><span>(</span><span>7</span><span>)</span>:
        <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>separators</span>, <span>[</span>x<span>*</span><span>64</span>, y<span>*</span><span>64</span><span>]</span><span>)</span></pre></td></tr></table></div>

<p>All right, enough code! It’s time for a test run. Run the game, and you should get a better-looking grid.</p>
<p><a href="http://cdn2.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.29.20-AM.png"><img src="http://cdn1.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.29.20-AM-402x500.png" alt="Screen Shot 2013-06-16 at 7.29.20 AM" class="aligncenter size-large wp-image-42450" srcset="http://cdn4.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.29.20-AM-257x320.png 257w, http://cdn4.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.29.20-AM-402x500.png 402w, http://cdn4.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.29.20-AM.png 503w" sizes="(max-width: 402px) 100vw, 402px"/></a></p>
<p>Next, let’s put a head-up display or HUD at the bottom of the screen. First, you need to create the <code>drawHUD()</code> method. Add this code after <code>drawBoard()</code>:</p>

<div class="wp_codebox"><table><tr id="p3873223"><td class="code" id="p38732code23"><pre class="python"><span>def</span> drawHUD<span>(</span><span>self</span><span>)</span>:
    <span>#draw the background for the bottom:</span>
    <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>score_panel</span>, <span>[</span><span>0</span>, <span>389</span><span>]</span><span>)</span></pre></td></tr></table></div>

<p>This code also draws the background of the score panel. </p>
<p>Let me go over the way PyGame handles fonts. There are three steps:</p>
<ol>
<li>First you define a font with a set size.</li>
<li>Next you call <code>font.render("your text here")</code> to create a surface for those letters in that font.</li>
<li>Then you draw the surface just as you would an image.</li>
</ol>
<p>Now that you know that, you can use this information to draw the next part of the HUD: the “Your Turn” indicator. Add this code at the bottom of <code>drawHUD()</code>:</p>

<div class="wp_codebox"><table><tr id="p3873224"><td class="code" id="p38732code24"><pre class="python"><span>#create font</span>
myfont = pygame.<span>font</span>.<span>SysFont</span><span>(</span><span>None</span>, <span>32</span><span>)</span>
 
<span>#create text surface</span>
label = myfont.<span>render</span><span>(</span><span>"Your Turn:"</span>, <span>1</span>, <span>(</span><span>255</span>,<span>255</span>,<span>255</span><span>)</span><span>)</span>
 
<span>#draw surface</span>
<span>self</span>.<span>screen</span>.<span>blit</span><span>(</span>label, <span>(</span><span>10</span>, <span>400</span><span>)</span><span>)</span></pre></td></tr></table></div>

<p>Also add this after the call to <code>pygame.init()</code>:</p>



<p>This code creates the font, renders it in white and then draws it onto the screen. Before you try running the game, add this after the call to <code>self.drawBoard()</code>:</p>



<p>Run the program and you should get some text that says “Your Turn” at the bottom of the screen. If you look closely, you can also see the nicely textured background.</p>
<p><a href="http://cdn4.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.10.03-PM.png"><img src="http://cdn1.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.10.03-PM-402x500.png" alt="Screen Shot 2013-06-16 at 7.10.03 PM" class="aligncenter size-large wp-image-42505" srcset="http://cdn3.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.10.03-PM-257x320.png 257w, http://cdn3.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.10.03-PM-402x500.png 402w, http://cdn3.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-7.10.03-PM.png 503w" sizes="(max-width: 402px) 100vw, 402px"/></a></p>
<p>This is great, but you still need to add the indicator after the “Your Turn” text to let the player know it’s their round. </p>
<p>Before you do, though, you want the game to know whose turn it is. Make sure it knows by adding this to the end of <code>__init__</code>:</p>



<p>Now for that indicator. Add this to the end of <code>drawHUD()</code>:</p>

<div class="wp_codebox"><table><tr id="p3873228"><td class="code" id="p38732code28"><pre class="python"><span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>greenindicator</span>, <span>(</span><span>130</span>, <span>395</span><span>)</span><span>)</span></pre></td></tr></table></div>

<p>Run the game and you will see the green score indicator. You can check that off of your list of things to do.</p>
<p>Next let’s add the text for each player’s score. Initialize the variables for the two scores by tacking this onto the end of <code>__init__</code>:</p>

<div class="wp_codebox"><table><tr id="p3873229"><td class="code" id="p38732code29"><pre class="python"><span>self</span>.<span>me</span>=<span>0</span>
<span>self</span>.<span>otherplayer</span>=<span>0</span>
<span>self</span>.<span>didiwin</span>=<span>False</span></pre></td></tr></table></div>

<p>Here you also add another variable that you will use later in this step.</p>
<p>Remember how to add text? You’re going to do the same type of thing you did before, but with differently sized fonts. Add this to the end of <code>drawHUD()</code>:</p>

<div class="wp_codebox"><table><tr id="p3873230"><td class="code" id="p38732code30"><pre class="python"><span>#same thing here</span>
myfont64 = pygame.<span>font</span>.<span>SysFont</span><span>(</span><span>None</span>, <span>64</span><span>)</span>
myfont20 = pygame.<span>font</span>.<span>SysFont</span><span>(</span><span>None</span>, <span>20</span><span>)</span>
 
scoreme = myfont64.<span>render</span><span>(</span><span>str</span><span>(</span><span>self</span>.<span>me</span><span>)</span>, <span>1</span>, <span>(</span><span>255</span>,<span>255</span>,<span>255</span><span>)</span><span>)</span>
scoreother = myfont64.<span>render</span><span>(</span><span>str</span><span>(</span><span>self</span>.<span>otherplayer</span><span>)</span>, <span>1</span>, <span>(</span><span>255</span>,<span>255</span>,<span>255</span><span>)</span><span>)</span>
scoretextme = myfont20.<span>render</span><span>(</span><span>"You"</span>, <span>1</span>, <span>(</span><span>255</span>,<span>255</span>,<span>255</span><span>)</span><span>)</span>
scoretextother = myfont20.<span>render</span><span>(</span><span>"Other Player"</span>, <span>1</span>, <span>(</span><span>255</span>,<span>255</span>,<span>255</span><span>)</span><span>)</span>
 
<span>self</span>.<span>screen</span>.<span>blit</span><span>(</span>scoretextme, <span>(</span><span>10</span>, <span>425</span><span>)</span><span>)</span>
<span>self</span>.<span>screen</span>.<span>blit</span><span>(</span>scoreme, <span>(</span><span>10</span>, <span>435</span><span>)</span><span>)</span>
<span>self</span>.<span>screen</span>.<span>blit</span><span>(</span>scoretextother, <span>(</span><span>280</span>, <span>425</span><span>)</span><span>)</span>
<span>self</span>.<span>screen</span>.<span>blit</span><span>(</span>scoreother, <span>(</span><span>340</span>, <span>435</span><span>)</span><span>)</span></pre></td></tr></table></div>

<p>Run the game to check out your work.</p>
<p><img src="http://cdn3.raywenderlich.com/wp-content/uploads/2013/11/Boxes8-402x500.png" alt="Boxes8" class="aligncenter size-large wp-image-55090" srcset="http://cdn4.raywenderlich.com/wp-content/uploads/2013/11/Boxes8-257x320.png 257w, http://cdn4.raywenderlich.com/wp-content/uploads/2013/11/Boxes8-402x500.png 402w, http://cdn4.raywenderlich.com/wp-content/uploads/2013/11/Boxes8.png 503w" sizes="(max-width: 402px) 100vw, 402px"/></p>
<p>You are now officially done with the HUD. There are just a couple more things to do on the client side, so bear with me.</p>
<p>Next, let’s add a very simple owner grid that contains values representing a player. These values will let you  keep track of who owns which squares. You need this to color the squares properly, and to keep track of the score. Remember, the person who controls the most squares wins!</p>
<p>First initialize another array by adding this at the end of <code>__init__</code>:</p>

<div class="wp_codebox"><table><tr id="p3873231"><td class="code" id="p38732code31"><pre class="python"><span>self</span>.<span>owner</span> = <span>[</span><span>[</span><span>0</span> <span>for</span> x <span>in</span> <span>range</span><span>(</span><span>6</span><span>)</span><span>]</span> <span>for</span> y <span>in</span> <span>range</span><span>(</span><span>6</span><span>)</span><span>]</span></pre></td></tr></table></div>

<p>Now draw the owner grid onto the screen using the same kind of 2d-array loop that you used to loop through the lines arrays. Add this to the bottom of the class:</p>

<div class="wp_codebox"><table><tr id="p3873232"><td class="code" id="p38732code32"><pre class="python"><span>def</span> drawOwnermap<span>(</span><span>self</span><span>)</span>:
    <span>for</span> x <span>in</span> <span>range</span><span>(</span><span>6</span><span>)</span>:
        <span>for</span> y <span>in</span> <span>range</span><span>(</span><span>6</span><span>)</span>:
            <span>if</span> <span>self</span>.<span>owner</span><span>[</span>x<span>]</span><span>[</span>y<span>]</span><span>!</span>=<span>0</span>:
                <span>if</span> <span>self</span>.<span>owner</span><span>[</span>x<span>]</span><span>[</span>y<span>]</span>==<span>"win"</span>:
                    <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>marker</span>, <span>(</span>x<span>*</span><span>64</span>+<span>5</span>, y<span>*</span><span>64</span>+<span>5</span><span>)</span><span>)</span>
                <span>if</span> <span>self</span>.<span>owner</span><span>[</span>x<span>]</span><span>[</span>y<span>]</span>==<span>"lose"</span>:
                    <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>othermarker</span>, <span>(</span>x<span>*</span><span>64</span>+<span>5</span>, y<span>*</span><span>64</span>+<span>5</span><span>)</span><span>)</span></pre></td></tr></table></div>

<p>This method checks if it needs to draw in a given square and if it does, it draws the correct color (each player will have his or her own color).  </p>
<p>Right now this code won’t work because you need the server to tell the client which color to draw, which you will do in the next part of the tutorial. For now, you just won’t call this method.</p>
<p>You have one more thing to add to the user interface: winning and losing screens. Define this last method and add it to the bottom of the class:</p>

<div class="wp_codebox"><table><tr id="p3873233"><td class="code" id="p38732code33"><pre class="python"><span>def</span> finished<span>(</span><span>self</span><span>)</span>:
    <span>self</span>.<span>screen</span>.<span>blit</span><span>(</span><span>self</span>.<span>gameover</span> <span>if</span> <span>not</span> <span>self</span>.<span>didiwin</span> <span>else</span> <span>self</span>.<span>winningscreen</span>, <span>(</span><span>0</span>,<span>0</span><span>)</span><span>)</span>
    <span>while</span> <span>1</span>:
        <span>for</span> event <span>in</span> pygame.<span>event</span>.<span>get</span><span>(</span><span>)</span>:
            <span>if</span> event.<span>type</span> == pygame.<span>QUIT</span>:
                exit<span>(</span><span>)</span>
        pygame.<span>display</span>.<span>flip</span><span>(</span><span>)</span></pre></td></tr></table></div>

<p><a href="http://cdn3.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-8.33.37-PM.png"><img src="http://cdn4.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-8.33.37-PM-257x320.png" alt="Screen Shot 2013-06-16 at 8.33.37 PM" class="alignright size-medium wp-image-42507" srcset="http://cdn1.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-8.33.37-PM-257x320.png 257w, http://cdn1.raywenderlich.com/wp-content/uploads/2013/06/Screen-Shot-2013-06-16-at-8.33.37-PM-402x500.png 402w" sizes="(max-width: 257px) 100vw, 257px"/></a></p>
<p>Of course, there is no way yet to trigger these screens in the game. That, too, you’ll take care of in the next part of the tutorial, when you implement the server side of the game. </p>
<p>Remember that by adding all of these game elements now, you are making sure that the server will be able to manipulate the client however it wants. From here on out, you won’t need to make many changes to the client other than a little glue between the client and the server.</p>
<p>But just to make sure it works, try calling the <code>finished()</code> method in the last part of <code>__init__</code>. You should get a game over screen that looks like the image to the right.</p>
<p><a href="http://cdn2.raywenderlich.com/wp-content/uploads/2013/06/ragecomic.png"><img src="http://cdn4.raywenderlich.com/wp-content/uploads/2013/06/ragecomic-467x320.png" alt="ragecomic" class="aligncenter size-medium wp-image-42509" srcset="http://cdn4.raywenderlich.com/wp-content/uploads/2013/06/ragecomic-467x320.png 467w, http://cdn4.raywenderlich.com/wp-content/uploads/2013/06/ragecomic.png 479w" sizes="(max-width: 467px) 100vw, 467px"/></a></p>
<h2>Where to Go from Here?</h2>
<p>Here is the <a href="http://cdn2.raywenderlich.com/downloads/BoxesPart1.zip">source code</a> from the tutorial so far.</p>
<p>Congratulations! You have finished the client side of a very organized and good-looking game. This, of course, is not the end since you haven’t implemented any game logic, but excellent job on the client side!</p>
<p>Now you should go look at <a href="/?p=46843">Part 2</a> of this tutorial, which is all about the server-side – and you’ll finally start making this game truly multiplayer!</p>
	
					</div>
					</div></body></html>