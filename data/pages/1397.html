<html><body><div><div class="entry-content">
		<p>We’re very excited to announce the release of Pyston 0.2, the latest version of Dropbox’s high-performance Python implementation, which contains substantial improvements over <a href="https://tech.dropbox.com/2014/04/introducing-pyston-an-upcoming-jit-based-python-implementation/">the initial 0.1 version</a>.  Version 0.2, while still very much a work in progress, sports much-improved language compatibility, and is able to run many of the standard libraries — and some standard extension modules — without modifications.</p>
<h3><b>New features</b></h3>
<p>When we announced Pyston 0.1 in April, we had built the core Python-to-LLVM JIT infrastructure and were able to run simple Python programs.  Since then, we have made significant progress in supporting more language features and libraries.  Some of the features we added are:</p>
<ul>
<li>Exceptions, using C++-style exception handling</li>
<li>Inheritance and metaclasses (no multiple inheritance, yet)</li>
<li>Basic native C API support</li>
<li>Closures, generators, lambdas, generator expressions</li>
<li>Full argument handling behavior</li>
<li>Longs, and integer promotion</li>
<li>Multithreading support</li>
</ul>
<p>We are particularly excited about the native C API support: the implementation is a work in progress, but we are able to natively provide a subset of the CPython API and run existing extension modules with a recompile.  Among other techniques, we disable all refcounting operations, and use our conservative GC to handle the memory management.</p>
<p>We currently use a GIL to protect threaded code.  While inelegant, it is simple and efficient when there is only a single thread.  We have an experimental configuration option to use a read-write-lock variant, which “removes the GIL” and allows multiple threads to use multiple cores, but the potential parallelism is highly limited by the semantics of the C API.</p>
<p>There are still many features missing (such as finalizers, unicode, and C API exceptions), but we are at the point that we can run a number of completely unmodified benchmarks from the <a href="https://bitbucket.org/pypy/benchmarks">PyPy benchmark suite</a>.  The benchmarks we run are themselves simple, but they use a harness that uses the <em>optparse</em> standard library, which in turn pulls in numerous other libraries including the entire regex system.  For example, the chaos.py benchmark is under 300 lines itself, but ends up running over 3k non-whitespace Python lines of code and requires the operation of over 10k lines of extension code.</p>
<h3><b>Moving forward</b></h3>
<p>Our strategy has been to first validate the overall JIT architecture (v0.1), then to improve language compatibility (v0.2), and is now to focus on improving performance (v0.3).  The 0.1 release demonstrated that we have the ability to produce high performance code using LLVM, but running real benchmarks has shown that our performance is currently hamstrung by our simple garbage collector and naive SSA-transform implementation.  In the coming months, we’ll be making improvements to these areas, and adding a new tiering framework to enable more advanced type speculation as well as support Python’s advanced frame introspection features.</p>
<p>Despite the improvements we’ve made, Pyston is still early in its life, and should be considered in early alpha.  It is still easy to crash Pyston (hopefully with an informative error message), and there are a number of known memory leaks.  Although we’ve made progress in the past five months, full language and builtin-types compatibility is a target that can only be approached and never 100% reached, and will be something we will have to continue working on.</p>
<p>We couldn’t have reached this state without the numerous open source contributions we’ve received: the 0.2 release includes non-documentation commits from 10 non-Dropbox-employees, and we would like to thank all of them for their contributions!  We still have a long way to go, and <a href="https://github.com/dropbox/pyston">the repository remains open</a>.  If building a high-performance Python JIT interests you, please feel free to browse the codebase or <a href="http://lists.pyston.org/cgi-bin/mailman/listinfo/pyston-dev">email our mailing-list</a>.</p>
<div id="jp-post-flair" class="sharedaddy sd-like-enabled sd-sharing-enabled"><div class="sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded" id="like-post-wrapper-74522776-9-56d5b45208b15" data-src="//widgets.wp.com/likes/#blog_id=74522776&amp;post_id=9&amp;origin=pystonblog.wordpress.com&amp;obj_id=74522776-9-56d5b45208b15" data-name="like-post-frame-74522776-9-56d5b45208b15"><h3 class="sd-title">Like this:</h3><p class="likes-widget-placeholder post-likes-widget-placeholder"><span class="button"><span>Like</span></span> <span class="loading">Loading...</span></p><span class="sd-text-color"/><a class="sd-link-color"/></div></div>			</div>

	</div></body></html>