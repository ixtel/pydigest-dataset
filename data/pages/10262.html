<html><body><div><div class="blog-content">

                        

                            
                        



                        
                            
                                <h3 id="_1">Введение</h3>
<p>Этот урок имеет вводный характер и знакомит с общей информацией о тестировании и простой конструкцией, которая позволяет значительно улучшить Python-код.</p>
<h3 id="_2">Определение</h3>
<p><strong>Тестирование программного обеспечения (Software Testing)</strong> - проверка соответствия между реальным и ожидаемым поведением программы, осуществляемая при конечном наборе тестов, выбранном определенным образом. [IEEE Guide to Software Engineering Body of Knowledge, SWEBOK, 2004] </p>
<p>В более широком смысле, <strong>тестирование</strong> - это одна из техник контроля качества, включающая в себя действия по планированию работ (Test Management), проектированию тестов (Test Design), выполнению тестирования (Test Execution) и анализу полученных результатов (Test Analysis).</p>
<p>Для разработчика же интересней следующее определение:</p>
<p><strong>Тестирование</strong> — это проверка соответствия программы требованиям, осуществляемая путем наблюдения за ее работой в специальных, искусственно созданных ситуациях, выбранных определенным образом.</p>
<p>Хочется обратить внимание на слова “искусственно созданных ситуациях, выбранных определенным образом”. Это означает, что не имеет смысла тестировать вообще все ситуации, стоит выбирать критически важные места и сценарии.</p>
<h3 id="_3">Уровни тестирования</h3>
<p>Тестирование для разработчика состоит из написания тестов.
Тест - это такой же программный код, который пишется аналогично коду для реализации бизнес-логики. Тесты проверяют сценарии работы программы (test-case).</p>
<p>Тест-кейсы встречаются самые различные, один от другого может резко отличаться. По желанию можно тестировать ВСЕ возможные и невозможные ситуации. Однако, стоит соблюдать адекватность и покрывать тестами ровно на столько, сколько требуется для уверенного понимания, что бизнес-логика работает как задумано.</p>
<blockquote>
<p>Например, функция, которая возвращает числовое значение от 0 до 100. В тестах стоит проверить не только правильность значений из этого диапазона, но и то, что других значений не возникает.</p>
</blockquote>
<p>Негласное правило - если на участке кода проявилась ошибка, то стоит написать тест на этот случай. </p>
<p>Тестирование смело делится на несколько уровней глубины. Наиболее показательная классификация по уровням тестирования в данном случае такая:</p>
<ul>
<li>Системное тестирование – тестирование полностью интегрированного программного приложения</li>
<li>Интеграционное тестирование – тестирование интегрированных групп программных модулей</li>
<li>Модульное тестирование или юнит-тестирование – тестирование отдельных модулей исходного кода приложения</li>
</ul>
<p>Когда говорят "тестирование" не выделяя конкретный тип, то говорят скорее всего о модульном тестировании. </p>
<p>Пойдем с низу вверх (от 3 к 1)</p>
<h3 id="_4">Модульное тестирование</h3>
<p>Модульное тестирование, или юнит-тестирование (англ. unit testing) — процесс в программировании, позволяющий проверить на корректность отдельные модули исходного кода программы.</p>
<p>Идея состоит в том, чтобы писать тесты для каждой нетривиальной функции или метода. Это позволяет достаточно быстро проверить, не привело ли очередное изменение кода к регрессии, то есть к появлению ошибок в уже протестированных местах программы и облегчает обнаружение и устранение таких ошибок.</p>
<h4 id="_5">Инструменты</h4>
<p>В Python для модульного тестирования применяют</p>

<p>О этих инструментах будет описано в следующих статьях.</p>
<h3 id="_6">Интеграционное тестирование</h3>
<p>Интеграцио́нное тестирование или функциональное тестирование предназначено для проверки связи между компонентами, а также взаимодействия с различными частями системы (операционной системой, оборудованием либо связи между различными системами).</p>
<h4 id="_7">Подходы к интеграционному тестированию:</h4>
<ul>
<li>Снизу вверх (Bottom Up Integration)<ul>
<li>Все низкоуровневые модули, процедуры или функции собираются воедино и затем тестируются. После чего собирается следующий уровень модулей для проведения интеграционного тестирования. Данный подход считается полезным, если все или практически все модули разрабатываемого уровня готовы. </li>
</ul>
</li>
<li>Сверху вниз (Top Down Integration)<ul>
<li>Вначале тестируются все высокоуровневые модули, и постепенно, один за другим добавляются низкоуровневые. Все модули более низкого уровня симулируются заглушками с аналогичной функциональностью, затем по мере готовности они заменяются реальными активными компонентами.</li>
</ul>
</li>
<li>Большой взрыв ("Big Bang" Integration)<ul>
<li>Все или практически все разработанные модули собираются вместе в виде законченной системы или ее основной части, и затем проводится интеграционное тестирование. Такой подход очень хорош для сохранения времени. Однако, если тест кейсы и их результаты записаны не верно, то сам процесс интеграции сильно осложнится, что станет преградой для команды тестирования при достижении основной цели интеграционного тестирования</li>
</ul>
</li>
</ul>
<h4 id="_8">Инструменты</h4>
<p>Для автоматизации интеграционного тестирования применяются системы непрерывной интеграции (Continuous Integration System, CIS). Принцип действия таких систем состоит в следующем:</p>
<ol>
<li>CIS производит мониторинг системы контроля версий;</li>
<li>При изменении исходных кодов в репозитории производится обновление локального хранилища;</li>
<li>Выполняются необходимые проверки и модульные тесты;</li>
<li>Исходные коды компилируются в готовые выполняемые модули;</li>
<li>Выполняются тесты интеграционного уровня;</li>
<li>Генерируется отчет о тестировании.</li>
</ol>
<p>Примеры инструментов:</p>
<ul>
<li>Bamboo </li>
<li>Hudson и Jenkins</li>
<li>CruiseControl</li>
<li>TeamCity</li>
<li>BuildBot</li>
<li>Travis CI</li>
<li>Team Foundation Server</li>
</ul>
<h3 id="_9">Системное тестирование</h3>
<p>Основной задачей системного тестирования является проверка как функциональных, так и не функциональных требований в системе в целом. При этом выявляются дефекты: </p>
<ul>
<li>Неверное использование ресурсов системы; </li>
<li>Непредусмотренные комбинации данных пользовательского уровня; </li>
<li>Несовместимость с окружением;</li>
<li>Непредусмотренные сценарии использования; </li>
<li>Отсутствующая или неверная функциональность, </li>
<li>Неудобство использования </li>
<li>И другие.</li>
</ul>
<p>Для минимизации рисков, связанных с особенностями поведения в системы в той или иной среде, во время тестирования рекомендуется использовать окружение максимально приближенное к тому, на которое будет установлен продукт после выдачи.</p>
<p>Стоит выделить два подхода к системному тестированию:</p>
<ul>
<li>на базе требований (requirements based). Для каждого требования пишутся тестовые случаи (test cases), проверяющие выполнение данного требования.</li>
<li>на базе случаев использования (use case based). На основе представления о способах использования продукта создаются случаи использования системы (Use Cases).</li>
</ul>
<p>По конкретному случаю использования можно определить один или более сценариев. На проверку каждого сценария пишутся тест кейсы (test cases), которые  реализуются в виде тестов.</p>
<h4 id="_10">Инструменты</h4>
<p>Для описания сценариев можно использовать BDD ( behavior-driven development)</p>
<ul>
<li>pytest-bdd</li>
<li>behave</li>
<li>freshen</li>
</ul>
<h2 id="-assert">Простой инструмент проверки данных - assert</h2>
<p>Так как этот урок почти полностью состоит из теории, то разбавлю конструкцией языка, которая помогает писать код и тесты более высокого качества.</p>
<p>Python - язык с динамической типизацией. Это значит, что при написании Python-кода мы явно не указываем тип данных, а во время исполнения не гарантируется явный тип переменной.</p>
<p>В следствии этого возникают сложности. Например, в функции ожидаем целое число, а нам передали list - это может привести к самым неожиданным ошибками.
Чтобы попытаться обойти эту проблему стоит воспользоваться assert.</p>
<blockquote>
<p>Assert — это специальная конструкция, позволяющая проверять предположения о значениях произвольных данных в произвольном месте программы.</p>
</blockquote>
<p>Assert'ы позволяют отлавливать ошибки в программах на этапе компиляции либо во время исполнения.</p>
<p>Использование конструкции весьма простое:</p>
<div class="codehilite"><pre><span class="c"># -*- encoding: utf-8 -*-</span>

<span class="k">def</span> <span class="nf">simple_func</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span>
    <span class="k">assert</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="n">value</span><span class="o">*</span><span class="n">value</span>
</pre></div>


<p>Assert вызывает ошибку если аргумент равен False. Например так:</p>
<div class="codehilite"><pre>print(simple_func(2))

&gt;&gt; 4

print(simple_func(set()))

&gt;&gt; Traceback (most recent call last):
&gt;&gt;   File "/tmp/testing/app.py", line 11, in &lt;module&gt;
&gt;&gt;     print(simple_func(set()))
&gt;&gt;    File "/tmp/testing/app.py", line 4, in simple_func
&gt;&gt;      assert type(value) == int
&gt;&gt;  AssertionError

print(simple_func(-1))

&gt;&gt;  Traceback (most recent call last):
&gt;&gt;    File "/tmp/testing/app.py", line 21, in &lt;module&gt;
&gt;&gt;      print(simple_func(-1))
&gt;&gt;    File "/tmp/testing/app.py", line 5, in simple_func
&gt;&gt;      assert value &gt; 0
&gt;&gt;  AssertionError
</pre></div>


<p>Traceback показывает строчку, с которой полетело исключение AssertionError, что порой открывает много нового в понимании как же в реальности работает написанный код.</p>
<h2 id="_11">Выводы</h2>
<p>В уроке были кратко описаны виды тестирования: модульное или юнит-тестирование, интегрционное, системное. Для каждого озвучен список инструментов для создания тестов.</p>
<p>В качестве практики описана конструкция assert, позволяющая проверять предположения о значениях произвольных данных в произвольном месте программы.</p>
                            
                        



                        

                            
                            <footer class="post-info">
                                <span class="label label-default">Дата</span>
                            <span class="published">
                                <i class="fa fa-calendar"/><time>
                                2016-02-10 10:53:05</time>
                            </span>


                                <span class="label label-default">Категории</span>

                                
                                    
                                        
                                            <a href="/blog/category/python-%D1%83%D1%80%D0%BE%D0%BA%D0%B8/">Python уроки</a>
                                            , 
                                        
                                            <a href="/blog/category/uchebnye-materialy/">Учебные материалы</a>
                                            
                                        
                                    
                                


                                <span class="label label-default">Теги</span>

                                

                            </footer>
                        


                        
                            
                        

                        
                            
                            <a class="btn btn-sm share-twitter" target="_blank" href="http://twitter.com/home?status=https%3A//pynsk.ru/blog/2016/02/10/intro-test/%20Python%20%D1%83%D1%80%D0%BE%D0%BA%D0%B8%3A%20%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BD%D0%B0%20Python">Опубликовать в Twitter</a>
                            <a class="btn btn-sm share-facebook" target="_blank" href="http://facebook.com/sharer.php?u=https://pynsk.ru/blog/2016/02/10/intro-test/&amp;t=Python%20%D1%83%D1%80%D0%BE%D0%BA%D0%B8%3A%20%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B2%20%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%20%D0%BD%D0%B0%20Python">Опубликовать в Facebook</a>
                        

                        
                            
                        

                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        


                        <hr/>
                        
                        <hr/>

                        
                            

            </div>

        </div></body></html>