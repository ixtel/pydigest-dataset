<html><body><div><div class="article-content">
      
        
        
        <p><img src="/_file/blog/can-python-help-win-scrabble/scrabble.png" alt=""/></p>

        

      <p>It is hard to find someone who doesn’t know how to play <b>Scrabble</b>. In case someone isn’t familiar with the game, here’s a quick explanation:</p>
      
      <p>Scrabble is played by two to four players on a square board with a 15×15 grid of cells, each of which accommodates a single letter tile. The board is marked with “premium” squares, which multiply the number of points awarded; each letter tile has its own assigned numeric score. At the start of a Scrabble game, every player chooses 7 letter tiles.</p>
      
      <p>In this article I will try to present simple examples of how the Python programming language could help you play (and win) the game.</p>
      
      <p>Certainty, these examples won’t make a huge impression on those who are familiar with and have experience in programming, but they are definitely simple enough to encourage those with less experience to learn more.</p>
      
      <p><i>When you start playing Scrabble, what words can you create given the available letters?</i></p>
      
      <p>Obviously, there are many ways to quickly gain some answers. We can try to do it in SQL:</p>
      
      <p>Create a table with words in a database and a table with permuted strings or we can try some other, smarter way.</p>
      
      <p>However, every solution in SQL becomes more complex compared to solutions derived from different programming languages. So instead of using SQL, let’s try Python:</p>
      
      <p>Suppose that we have a rack with letters [‘f’, ‘g’, ‘f’, ‘i’, ‘r’, ‘a’, ‘e’] and we want to put all letters on the Scrabble board.</p>
      
      <p>Is there a 7-letter word being a permutation of those letters on the rack?</p>
      
      <p>In the category with the dictionary file, run the Python console.</p>
      
<p/><pre class="brush: python; toolbar: false">
&gt;&gt;&gt; import itertools

&gt;&gt;&gt; with open('sowpods.txt') as f:

&gt;&gt;&gt; words = set(word.strip().lower() for word in f)

&gt;&gt;&gt; perms = set(''.join(letters) for letters in 
itertools.permutations(['f', 'g', 'f', 'i', 'r', 'a', 'e']))

&gt;&gt;&gt; res = [word for word in perms if word in words]</pre>
      
      <p>However, this is not enough. It is possible to check all combinations and score points for each correct word. Let’s try to do it in two ways: 1) with a connection to a database and 2) using Python only.</p>
      
      <p>To connect to database, use <b>Psycopg2</b>, which is the most popular <b>PostgreSQL</b> adapter for Python.</p>
      
      <p>We’ll store a list of words in the database. You can download it from <a href="http://courses.cms.caltech.edu/cs11/material/advjava/lab1/sowpods.zip" target="_blank">dictionary</a>.</p>
      
      <p>The following perl one-liner will take care of convertion to<br/>
        <code>INSERT INTO dict VALUES ('word');</code></p>
      
<p/><pre>
perl -pe "s/'/''/g;s/.*/INSERT INTO dict VALUES ('$&amp;');/" words.txt &gt; words.sql
</pre>
      
      <p>Combinations of words will be created on the Python side as well as scores for each word.</p>
      
      <p>You can run the following code in your shell by typing: <code>python scrabble.py your_letters</code>.</p>
      
<p/><pre class="brush: python; toolbar: false">
import sys
import itertools
import psycopg2
 
rack = sys.argv[1]

scores = {"A": 1, "C": 3, "B": 3, "E": 1, "D": 2, "G": 2,
          "F": 4, "I": 1, "H": 4, "K": 5, "J": 8, "M": 3,
          "L": 1, "O": 1, "N": 1, "Q": 10, "P": 3, "S": 1,
          "R": 1, "U": 1, "T": 1, "W": 4, "V": 4, "Y": 4,
          "X": 8, "Z": 10}

def compute_score(word):
    return sum([scores[letter.upper()] for letter in word])
 
candidates = set()

for i in range(1, len(rack) + 1):
    for combination in itertools.combinations(rack, i):
        candidates |= {''.join(perm) for perm in itertools.permutations(combination)}

conn = psycopg2.connect("dbname=scrabble user=patrycja")
cur = conn.cursor()

correct_words = []

for word in candidates:
    cur.execute("select count(*) from words where word='{}'".format(word))

    if cur.fetchone()[0] == 1:
        correct_words.append((word, compute_score(word)))

for word, score in correct_words:
    print(str(score) + " " + word)

cur.close()
conn.close()
</pre>
      
      <p>With the Python-only solution, words from the dictionary will be read from a file.</p>
      
<p/><pre class="brush: python; toolbar: false">
import sys
import itertools
 
rack = sys.argv[1]

scores = {"A": 1, "C": 3, "B": 3, "E": 1, "D": 2, "G": 2,
          "F": 4, "I": 1, "H": 4, "K": 5, "J": 8, "M": 3,
          "L": 1, "O": 1, "N": 1, "Q": 10, "P": 3, "S": 1,
          "R": 1, "U": 1, "T": 1, "W": 4, "V": 4, "Y": 4,
          "X": 8, "Z": 10}

def compute_score(word):
    return sum([scores[letter.upper()] for letter in word])
 
candidates = set()

for i in range(1, len(rack) + 1):
    for combination in itertools.combinations(rack, i):
        candidates |= {''.join(perm) for perm in itertools.permutations(combination)}

with open('sowpods.txt') as f:
    dictionary = {word.strip().lower() for word in f}

correct_words = dictionary &amp; candidates
correct_words = [(word, compute_score(word)) for word in correct_words]

correct_words.sort(key=lambda word: word[1], reverse=True)

for word, score in correct_words:
    print(str(score) + " " + word)
</pre>

      <p>At first look, the Python-only solution looks better. In the first approach, you need to manage a database. On the other hand, a database may be helpful when we have large amount of data  that we can’t store locally. It’s also possible to do it via web services, but that’s a topic for another article.</p>
      
      <p>Knowing the possibilities, you can start to write your own more advanced Scrabble cheater.</p>
      
      <p>For the Python newbie I recommend this step by step tutorial which provides the essential Python constructs required to develop such a program: <a href="https://openhatch.org/wiki/Scrabble_challenge" target="_blank">Scrabble challenge</a></p>
     
      </div>
    </div></body></html>