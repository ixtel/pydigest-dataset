<html><body><div><div class="forum-post blog-post">
            
<p>Did you know that we have a special island on CheckiO that is devoted to the author Lewis Carroll?
Charles Dodgson (aka Lewis Carroll) was an English writer, mathematician, logician,
Anglican deacon and photographer. He also wrote several books with mathemical and logical puzzles.
<a href="http://www.checkio.org/station/alice/">"Alice in Wonderland" island</a> contains
6 mission which are based on Lewis Carroll's puzzles or some ideas from that cult book.
Today I would like to look at one of those missions: <a href="http://www.checkio.org/mission/digits-doublets/share/911c36cfc7e36e7394548adbca23eb49/">"Digit Doublets" mission</a></p>
<h2 id="description">Description</h2>
<p>Doublets, sometimes known as Word ladder, is a word game invented by Charles Dodgson
(aka Lewis Carroll). Doublets puzzle begins with two words.
To solve the puzzle one must find a chain of different words
to link the two together such that the two adjacent words differ by one letter.</p>
<p>For Example: <strong>FLOUR</strong> ⇒ FLOOR ⇒ FLOOD ⇒ BLOOD ⇒ BROOD ⇒ BROAD ⇒ <strong>BREAD</strong></p>
<p>In the CiO puzzle, we are use the given set of numbers with the same length to
find a chain of different numbers and link the two together
so that the two adjacent numbers differ by one digit.</p>
<h2 id="solution">Solution</h2>
<p>This mission might look difficult or combinatorial, but let's think a little bit about the representation.
For example we are given this set of numbers:
<code>111, 115, 175, 511, 515, 519, 591, 599, 875, 919, 999</code> and you need to link 111 and 999.</p>
<p>As we can see 111 can be changed to 115 and 511. From 511 we can move to 519 or 591.
Stop. Does this look like something familiar? Yes, this is a graph.</p>
<p><img src="http://checkio.s3.amazonaws.com/blog/share/digit-graph.svg" alt="Digit Graph"/></p>
<p>So, we need to convert it into graph representation and find a path.
I won't talk about the pathfinding part, because you can easily find it in a recent article
-- <a href="http://www.checkio.org/blog/find-path/">"Open Labyrinth" review</a>.</p>
<pre class="grey-pre"><code>from collections import defaultdict

def <span class="hljs-function"><span class="hljs-title">numbers2graph</span><span class="hljs-params">(numbers)</span></span>:
    graph = <span class="hljs-function"><span class="hljs-title">defaultdict</span><span class="hljs-params">(list)</span></span>
    <span class="hljs-keyword">for</span> <span class="hljs-tag">i</span>, n1 <span class="hljs-keyword">in</span> <span class="hljs-function"><span class="hljs-title">enumerate</span><span class="hljs-params">(numbers)</span></span>:
        <span class="hljs-keyword">for</span> n2 <span class="hljs-keyword">in</span> numbers[<span class="hljs-tag">i</span> + <span class="hljs-number">1</span>:]:
            n1, n2 = <span class="hljs-function"><span class="hljs-title">str</span><span class="hljs-params">(n1)</span></span>, <span class="hljs-function"><span class="hljs-title">str</span><span class="hljs-params">(n2)</span></span>
            <span class="hljs-keyword">if</span> <span class="hljs-function"><span class="hljs-title">sum</span><span class="hljs-params">(d != n2[j] for j, d in enumerate(n1)</span></span>) == <span class="hljs-number">1</span>:
                graph[n1].<span class="hljs-function"><span class="hljs-title">append</span><span class="hljs-params">(n2)</span></span>
                graph[n2].<span class="hljs-function"><span class="hljs-title">append</span><span class="hljs-params">(n1)</span></span>
    return graph
</code></pre><p>Next you use an algorithm to find the shortest path through the graph and get a solution.</p>
<h2 id="-clear-cio-solutions">"Clear" CiO solutions</h2>
<p><a href="http://www.checkio.org/user/PositronicLlama/">@PositronicLama</a> wrote <a href="http://www.checkio.org/mission/digits-doublets/publications/PositronicLlama/python-3/a/share/0a94d5a3b22839f0e88e53a7b548163f/">a nice solution</a>
 with A* search. I recommend to read up on heuristics and take a look at this solution. It presents an interesting way to create a graph.</p>
<pre class="grey-pre"><code><span class="hljs-keyword">for</span> <span class="hljs-tag">a</span>, <span class="hljs-tag">b</span> <span class="hljs-keyword">in</span> itertools.<span class="hljs-function"><span class="hljs-title">combinations</span><span class="hljs-params">(numbers, <span class="hljs-number">2</span>)</span></span>:
    <span class="hljs-keyword">if</span> <span class="hljs-function"><span class="hljs-title">digit_delta</span><span class="hljs-params">(a, b)</span></span> == <span class="hljs-number">1</span>:
</code></pre><p>And <a href="http://www.checkio.org/user/LexCavalera">@LexCavalera's</a> <a href="http://www.checkio.org/mission/digits-doublets/publications/LexCavalera/python-27/first/share/620074f0660cae9881b2e999651e5102/">"BFS" solution</a> is
created with an OOP style and reads just like a novel.</p>
<pre class="grey-pre"><code>while to_search:
    current_number = to_search.<span class="hljs-function"><span class="hljs-title">pop</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span>
</code></pre><h2 id="-creative-cio-solutions">"Creative" CiO solutions</h2>
<p>Honestly for the "Creative" category I can think of only one solution by <a href="http://www.checkio.org/user/Juge_Ti/">@Juge_Ti</a>
and that is <a href="http://www.checkio.org/mission/digits-doublets/publications/Juge_Ti/python-27/recursive/share/fb04f3e9d88479c9454386a37178ef14/">"Recursive"</a> code.</p>
<pre class="grey-pre"><code>def <span class="hljs-function"><span class="hljs-title">f</span><span class="hljs-params">(l,c,u)</span></span>:
 <span class="hljs-keyword">if</span> l[-<span class="hljs-number">1</span>]<span class="hljs-keyword">in</span> c:return c
 s=[<span class="hljs-function"><span class="hljs-title">f</span><span class="hljs-params">(l,c+[x],u|{x})</span><span class="hljs-title">for</span></span> x <span class="hljs-keyword">in</span> <span class="hljs-function"><span class="hljs-title">set</span><span class="hljs-params">(l)</span></span>-u <span class="hljs-keyword">if</span> <span class="hljs-function"><span class="hljs-title">sum</span><span class="hljs-params">(`c[-<span class="hljs-number">1</span>]`[i]==`x`[i]for i in(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)</span></span>)==<span class="hljs-number">2</span>]
 return <span class="hljs-function"><span class="hljs-title">min</span><span class="hljs-params">(s,key=len)</span><span class="hljs-title">if</span></span> s <span class="hljs-keyword">else</span>[<span class="hljs-number">1</span>]*<span class="hljs-number">99</span>
checkio=lambda l:<span class="hljs-function"><span class="hljs-title">f</span><span class="hljs-params">(l,[l[<span class="hljs-number">0</span>]],{l[<span class="hljs-number">0</span>]})</span></span>
</code></pre><p>That's all folks. Bye for now, I'll see you in our next review.</p>
<p><em>Valentin Bryukhanov aka Bryukh</em></p>

        </div>
        </div></body></html>