<html><body><div><div itemprop="articleBody"><dl class="docutils"><dt>dictsort <a class="footnote-reference" href="#id2" id="id1">[1]</a></dt><dd>Takes a list of dictionaries and returns that list sorted by the key given in the argument. Eg: <tt class="docutils literal">{{ <span class="pre">value|dictsort:"name"</span> }}</tt></dd></dl><p>The documentation would let you to believe you can only sort dicts with it. What to do if you have a list of strings? After a bit of fumbling around it turns out that dictsort doesn't do a mere <tt class="docutils literal">__getitem__</tt> on each object but instead will take each object as a template context and evaluate the key as a variable, like <tt class="docutils literal">{{ name }}</tt> would.</p><p>What does this mean? It means you can sort a list of strings by using the least changing method as the sort attribute. Remember that Django automatically calls any functions in templates. Example:</p><div class="highlight"><pre><span/><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">Template</span><span class="p">,</span> <span class="n">Context</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Template</span><span class="p">(</span><span class="s2">"""{</span><span class="si">% f</span><span class="s2">or i in items|dictsort:"lstrip" %}</span>
<span class="gp">... </span><span class="s2">    {{ i }}</span>
<span class="gp">... </span><span class="s2">{</span><span class="si">% e</span><span class="s2">ndfor %}"""</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">'items'</span><span class="p">:</span> <span class="p">[</span><span class="s2">"x"</span><span class="p">,</span> <span class="s2">"a"</span><span class="p">,</span> <span class="s2">"c"</span><span class="p">,</span> <span class="s2">"b"</span><span class="p">]</span>
<span class="gp">... </span><span class="p">}))</span>
<span class="go">    a</span>
<span class="go">    b</span>
<span class="go">    c</span>
<span class="go">    x</span>
</pre></div><p>Of-course, this won't work very well if your strings start with spaces.</p><p>What else can you do? You can get in depth:</p><div class="highlight"><pre><span/><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Template</span><span class="p">(</span><span class="s2">"""{</span><span class="si">% f</span><span class="s2">or i in items|dictsort:"a.b.c.d" %}</span>
<span class="gp">... </span><span class="s2">    {{ i|safe }}</span>
<span class="gp">... </span><span class="s2">{</span><span class="si">% e</span><span class="s2">ndfor %}"""</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">'items'</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'b'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'c'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'d'</span><span class="p">:</span> <span class="s2">"x"</span><span class="p">}}}},</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'b'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'c'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'d'</span><span class="p">:</span> <span class="s2">"a"</span><span class="p">}}}},</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'b'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'c'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'d'</span><span class="p">:</span> <span class="s2">"c"</span><span class="p">}}}},</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'b'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'c'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'d'</span><span class="p">:</span> <span class="s2">"b"</span><span class="p">}}}},</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">}))</span>
<span class="go">    {'a': {'b': {'c': {'d': 'a'}}}}</span>
<span class="go">    {'a': {'b': {'c': {'d': 'b'}}}}</span>
<span class="go">    {'a': {'b': {'c': {'d': 'c'}}}}</span>
<span class="go">    {'a': {'b': {'c': {'d': 'x'}}}}</span>
</pre></div><p>Wanted to sort by something in lowercase? Yep, you can do that too and you should always use <tt class="docutils literal">lower</tt> as the last part in the key for strings. No one wants see stuff sorted by case:</p><div class="highlight"><pre><span/><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">Template</span><span class="p">(</span><span class="s2">"""{</span><span class="si">% f</span><span class="s2">or i in items|dictsort:"key.lower" %}</span>
<span class="gp">... </span><span class="s2">    {{ i.key }}</span>
<span class="gp">... </span><span class="s2">{</span><span class="si">% e</span><span class="s2">ndfor %}"""</span><span class="p">)</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">Context</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">'items'</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s1">'key'</span><span class="p">:</span> <span class="s2">"X"</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s1">'key'</span><span class="p">:</span> <span class="s2">"a"</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s1">'key'</span><span class="p">:</span> <span class="s2">"c"</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s1">'key'</span><span class="p">:</span> <span class="s2">"B"</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">}))</span>
<span class="go">    a</span>
<span class="go">    B</span>
<span class="go">    c</span>
<span class="go">    X</span>
</pre></div></div></div></body></html>