<html><body><div><div id="introduction">
<h2>Introduction</h2>
<p>Pontoon makes interacting with Digital Ocean on the command line smooth
sailing.</p>
<p>It is designed for human consumption, and aims to have good defaults.</p>
<p>It also happens to be a library.</p>
</div>
<div id="caveats">
<h2>Caveats</h2>
<p>Pontoon has one rule it imposes on top of Digital Ocean:</p>
<p><strong>*Names are unique.*</strong></p>
<p>Unique names make for a much easier command line experience. For
Droplets, names are hostnames, and hostnames should be unique anyway;
it’s just a good idea.</p>
<p>They don’t have to be unique <em>forever</em> though; once a Droplet is
destroyed, it’s fine to use the name again.</p>
<p>Anything “recommended” (like secure-erasing the drive on termination) is
optional, but enabled by default.</p>
</div>
<div id="installation">
<h2>Installation</h2>
<p>Install via pip:</p>
<pre>$ pip install pontoon
</pre>
<p>To install the latest (development, unstable) release:</p>
<pre>$ pip install https://github.com/duggan/pontoon/archive/master.zip
</pre>
<p>If you’d like to package pontoon for your favourite OS, feel free to do
so (and please send a PR to this README!)</p>
<p>More options are on the way.</p>
</div>
<div id="cli-usage">
<h2>CLI Usage</h2>
<div id="configure">
<h3>Configure</h3>
<p>Set up your credentials and preferences:</p>
<pre>$ pontoon configure
</pre>
<p>You’ll be prompted for your Digital Ocean API credentials (<a href="https://cloud.digitalocean.com/api_access" rel="nofollow">available
here</a>), and whether you
want to use existing SSH credentials or for them to be generated (using
OpenSSH).</p>
<p>The rest are preferences, and can be set at any time by running
configure again, editing the <tt><span class="pre">~/.pontoon</span></tt> config file (YAML format),
or by specifying them with options on the command line.</p>
</div>
<div id="create-your-first-droplet">
<h3>Create your first Droplet!</h3>
<p>Now you can create your first droplet:</p>
<pre>$ pontoon droplet create foobar
Creating Droplet foobar (512MB using Ubuntu 12.04 x64 in Amsterdam 1)...
.......active
</pre>
</div>
<div id="ssh-into-your-droplet">
<h3>SSH into your Droplet</h3>
<p>If everything’s configured correctly, you should be able to SSH into
your Droplet like so:</p>
<pre>$ pontoon droplet ssh foobar
Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-virtual x86_64)

 * Documentation:  https://help.ubuntu.com/
Last login: Fri May  3 18:23:56 2013
root@foobar:~#
</pre>
</div>
<div id="list-your-droplets">
<h3>List your Droplets</h3>
<pre>$ pontoon droplet list
foobar:         (512MB, Ubuntu 12.04 x64, Amsterdam 1, 192.0.2.128, active)
</pre>
<p>or for more detail:</p>
<pre>$ pontoon droplet list --detail
foobar
   id:                  998
   name:                foobar
   size:                512MB
   image:               Ubuntu 12.04 x64
   region:              Amsterdam 1
   status:              active
   locked:              False
   private_ip_address:  None
   created_at:          2013-11-09T13:22:40Z
   backups_active:      False
   ip_address:          192.0.2.128
</pre>
</div>
</div>
<div id="contributing">
<h2>Contributing</h2>
<p>Pull requests for bugs are always welcome! New functionality should
generally be preceded by a discussion, though if you’ve written
something that you needed and want to contribute back, a pull request is
a fine way to start that discussion :tada:</p>
<p>All of the code in pontoon is
<a href="http://www.python.org/dev/peps/pep-0008/" rel="nofollow">PEP-8</a> audited (using
<a href="https://pypi.python.org/pypi/pytest-pep8" rel="nofollow">pytest-pep8</a>), and there’s
a full suite of tests written for <a href="http://pytest.org/" rel="nofollow">py.test</a>
(library code) and <a href="https://github.com/sstephenson/bats" rel="nofollow">Bats</a>
(interface). Contributions should, therefore, include tests and pass a
PEP-8 audit.</p>
<div id="running-the-tests">
<h3>Running the tests</h3>
<p>Tests are run via <a href="https://tox.readthedocs.org" rel="nofollow">Tox</a>.</p>
<p>For example, to test the library, CLI and coverage for Python 2.7, run:</p>
<pre>$ pip install tox
$ tox -e py27,lib,cli,coverage
</pre>
<p>The <tt>.travis.yml</tt> file in this repository enumerates all the tests
that are performed.</p>
<p>The CLI tests require <a href="https://github.com/sstephenson/bats" rel="nofollow">BATS</a>,
and PEP8 checks are performed in both the <tt>lib</tt> tests and <tt>cli</tt>
tests.</p>
<p>On OSX, bats can be installed with homebrew:</p>
<pre>$ brew install bats
</pre>
<p>On Debian/Ubuntu, I’ve set up a PPA for easy installation of bats:</p>
<pre>$ add-apt-repository ppa:duggan/bats
$ apt-get update
$ apt-get install bats
</pre>
</div>
<div id="debugging">
<h3>Debugging</h3>
<p>Set the <tt>DEBUG</tt> environment variable (to anything) to enable debug
output for pontoon.</p>
<p>This will give a step through of most methods being executed during a
command, like so:</p>
<pre>$ DEBUG=1 pontoon droplet destroy foobar
2013-11-09 18:37:06,187 [pontoon.configure:DEBUG] combined: (){}
2013-11-09 18:37:06,187 [pontoon.configure:DEBUG] read_config: (){}
Destroying foobar and scrubbing data...
2013-11-09 18:37:06,204 [pontoon.droplet:DEBUG] destroy: (&lt;pontoon.droplet.Droplet instance at 0x10ce1fd40&gt;, 'foobar', False){}
2013-11-09 18:37:06,204 [pontoon.droplet:DEBUG] id_from_name: (&lt;pontoon.droplet.Droplet instance at 0x10ce1fd40&gt;, 'foobar'){}
2013-11-09 18:37:06,204 [pontoon.droplet:DEBUG] list: (&lt;pontoon.droplet.Droplet instance at 0x10ce1fd40&gt;,){}
2013-11-09 18:37:06,205 [pontoon.pontoon:DEBUG] render: (&lt;pontoon.pontoon.Pontoon instance at 0x10ce1fcf8&gt;, 'droplets', '/droplets'){}
2013-11-09 18:37:06,205 [pontoon.pontoon:DEBUG] request: (&lt;pontoon.pontoon.Pontoon instance at 0x10ce1fcf8&gt;, '/droplets'){'params': {}, 'method': 'GET'}
2013-11-09 18:37:07,498 [pontoon.pontoon:DEBUG] render: (&lt;pontoon.pontoon.Pontoon instance at 0x10ce1fcf8&gt;, 'event_id', '/droplets/998/destroy'){'params': {'scrub_data': 1}}
2013-11-09 18:37:07,498 [pontoon.pontoon:DEBUG] request: (&lt;pontoon.pontoon.Pontoon instance at 0x10ce1fcf8&gt;, '/droplets/998/destroy'){'params': {'scrub_data': 1}, 'method': 'GET'}
</pre>
<p>A timestamp, followed by the module, debug level, the method called and
the arguments to that method (positional as brackets, keywords as
curlies).</p>
<p>This functionality is implemented by the <tt>@debug</tt> decorator, the code
for which can be seen at <tt>pontoon/log.py</tt>.</p>
</div>
<div id="mocking">
<h3>Mocking</h3>
<p>Set the <tt>MOCK</tt> environment variable (to anything) to return mock
request data instead of querying Digital Ocean.</p>
<p>This is implemented soley for end-to-end testing of the CLI, but you may
find it useful in some other scenarios.</p>
</div>
</div>


</div></body></html>