<html><body><div><section class="entry">
<p class="fsb-clear"/><p><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_1.jpg"><img class="aligncenter wp-image-2186" src="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_1.jpg" alt="raspi_still_example_1" srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_1-300x225.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_1-1024x768.jpg 1024w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_1.jpg 1500w" sizes="(max-width: 600px) 100vw, 600px"/></a></p>
<p>Over the past year the PyImageSearch blog has had a lot of popular blog posts. Using <a title="OpenCV and Python K-Means Color Clustering" href="http://www.pyimagesearch.com/2014/05/26/opencv-python-k-means-color-clustering/" target="_blank">k-means clustering to find the dominant colors</a> in an image was (and still is) hugely popular. One of my personal favorites, <a title="How to Build a Kick-Ass Mobile Document Scanner in Just 5 Minutes" href="http://www.pyimagesearch.com/2014/09/01/build-kick-ass-mobile-document-scanner-just-5-minutes/" target="_blank">building a kick-ass mobile document scanner</a>Â has been the most popular PyImageSearch article for months. And the first (big) tutorial I ever wrote, <a title="Hobbits and Histograms â A How-To Guide to Building Your First Image Search Engine in Python" href="http://www.pyimagesearch.com/2014/01/27/hobbits-and-histograms-a-how-to-guide-to-building-your-first-image-search-engine-in-python/" target="_blank">Hobbits and Histograms</a>, an article on building a simple image search engine,Â still gets a lot of hits today.</p>
<p>ButÂ <em><strong>by far</strong></em>, the most popular post on the PyImageSearch blog is myÂ tutorial on <a title="Install OpenCV and Python on your Raspberry Pi 2 and B+" href="http://www.pyimagesearch.com/2015/02/23/install-opencv-and-python-on-your-raspberry-pi-2-and-b/" target="_blank">installing OpenCV and Python on your Raspberry Pi 2 and B+</a>. It’s really,Â <em>really</em>Â awesome to see the love you and the PyImageSearch readers have for the Raspberry Pi community — and I plan to continue writing more articles about OpenCV + the Raspberry Pi in the future.</p>
<p>Anyway, after I published the Raspberry Pi + OpenCV installation tutorial, many of the comments asked that I continue on and discussÂ <strong><em>how to access the Raspberry Pi camera using Python and OpenCV.</em></strong></p>
<p>In this tutorial we’ll be using <a href="https://picamera.readthedocs.org/en/release-1.9/" target="_blank">picamera</a>, which provides aÂ pure Python interface to the camera module. And best of all, I’ll be showing you how to use picamera to capture images in OpenCV format.</p>
<p>Read on to find out how…</p>
<p><strong><em>IMPORTANT:</em></strong>Â <i>We’ll be building off my original tutorial on installing <a title="Install OpenCV and Python on your Raspberry Pi 2 and B+" href="http://www.pyimagesearch.com/2015/02/23/install-opencv-and-python-on-your-raspberry-pi-2-and-b/" target="_blank">OpenCV and Python on your Raspberry Pi</a>. If you do not already have OpenCV + Python configured and installed correctly on your Raspberry Pi, please take the time now to review the tutorial andÂ setup your own Raspberry Pi with Python + OpenCV.</i></p>

<p><strong>OpenCV and Python versions:</strong><br/>
This example will run on<strong>Â Python 2.7/Python 3.4+</strong> and <strong>OpenCV 2.4.X/OpenCV 3.0+</strong>.</p>
<h1>Step 1: What do I need?</h1>
<p>To get started, you’ll need a Raspberry Pi camera board module.</p>
<p>I got my <a href="http://www.amazon.com/gp/product/B00E1GGE40/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00E1GGE40&amp;linkCode=as2&amp;tag=trndingcom-20&amp;linkId=XF5KMO3TGBUENU5T" target="_blank">5MP Raspberry Pi camera board moduleÂ from Amazon</a>Â for under $30, with shipping. It’s hard to believe that the camera board module is almost as expensive as the Raspberry Pi itself — but it just goes to show how much hardware has progressed over the past 5 years. I also picked up a <a href="http://www.amazon.com/gp/product/B00IJZJKK4/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00IJZJKK4&amp;linkCode=as2&amp;tag=trndingcom-20&amp;linkId=PMQZXV7K7MWCPAZ3" target="_blank">camera housing</a>Â to keep the camera safe, because why not?</p>
<p>Assuming you already have your camera module, you’ll need to install it. Installation is very simple and instead of creating my own tutorial on installing the camera board, I’ll just refer you to the official Raspberry Pi camera installation guide:</p>
<p><iframe src="http://www.youtube.com/embed/GImeVqHQzsE?feature=oembed" frameborder="0" allowfullscreen="">VIDEO</iframe></p>
<p>Assuming your camera board and properly installed and setup, it should look something like this:</p>
<div id="attachment_2187" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/03/installing_camera_board.jpg"><img class="wp-image-2187" src="http://www.pyimagesearch.com/wp-content/uploads/2015/03/installing_camera_board.jpg" alt="Figure 1: Installing the Raspberry Pi camera board." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/03/installing_camera_board-225x300.jpg 225w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/installing_camera_board-768x1024.jpg 768w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/installing_camera_board.jpg 1200w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 1:</strong> Installing the Raspberry Pi camera board.</p></div>
<h1>Step 2: Enable your camera module.</h1>
<p>Now that you have your Raspberry Pi camera module installed, you need to enable it. Open up a terminal and execute the following command:</p>

		

<p>This will bring up a screen that looks like this:</p>
<div id="attachment_2188" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_config.jpg"><img class="wp-image-2188" src="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_config.jpg" alt="Figure 2: Enabling the Raspberry Pi camera module using the raspi-config command." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_config-300x225.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_config-1024x768.jpg 1024w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_config.jpg 1200w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 2:</strong> Enabling the Raspberry Pi camera module using the raspi-config command.</p></div>
<p>Use your arrow keys to scroll down to <strong>Option 5: Enable camera</strong>, <b>hit your enter key </b>to enable the camera, and thenÂ arrow down to theÂ <strong>Finish</strong> button and hit enter again. Lastly, <strong>you’ll need to reboot your Raspberry Pi</strong> for the configuration to take affect.</p>
<h1>Step 3: Test out the camera module.</h1>
<p>Before we dive into the code, let’s run a quick sanity check to ensure that our Raspberry Pi camera is working properly.</p>
<p><em><strong>Note:Â </strong>Trust me, you’ll want to run this sanity check before you start working with the code. It’sÂ <strong>always good</strong> to ensure that your camera is working prior to diving into OpenCV code, otherwise you could easily waste time wondering when your code isn’t working correctly when it’s simply the camera module itself that is causing you problems.</em></p>
<p>Anyway, to run my sanity check I connected my Raspberry Pi to my TV and positioned it such that it was pointing at my couch:</p>
<div id="attachment_2189" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/03/example_setup.jpg"><img class="wp-image-2189" src="http://www.pyimagesearch.com/wp-content/uploads/2015/03/example_setup.jpg" alt="Figure 3: Example setup of my Raspberry Pi 2 and camera." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/03/example_setup-225x300.jpg 225w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/example_setup-768x1024.jpg 768w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/example_setup.jpg 1200w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 3:</strong> Example setup of my Raspberry Pi 2 and camera.</p></div>
<p>And from there, I openedÂ up a terminal and executed the following command:</p>

		<div id="crayon-56d5abac99bf8955494710" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5abac99bf8955494710-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">raspistill</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">o</span><span class="crayon-h"> </span><span class="crayon-v">output</span><span class="crayon-e">.jpg</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>This command activates your Raspberry Pi camera module, displays a preview of the image, and then after a few seconds, snaps a picture, and saves it to your current working directory as 
			<span id="crayon-56d5abac99c02125084727" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-v">jpg</span></span></span>Â .</p>
<p>Here’s an example of me taking a photo of my TV monitor (so I could document the process for this tutorial) as the Raspberry Pi snaps a photo of me:</p>
<div id="attachment_2191" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_simple.jpg"><img class="wp-image-2191" src="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_simple.jpg" alt="Figure 4: Sweet, the Raspberry Pi camera module is working!" srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_simple-300x225.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_simple-1024x768.jpg 1024w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspi_still_example_simple.jpg 1200w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 4:</strong> Sweet, the Raspberry Pi camera module is working!</p></div>
<p>And here’s what 
			<span id="crayon-56d5abac99c11372897723" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">output</span><span class="crayon-sy">.</span><span class="crayon-v">jpg</span></span></span>Â Â looks like:</p>
<div id="attachment_2193" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspberry_pi_output.jpg"><img class="wp-image-2193" src="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspberry_pi_output.jpg" alt="Figure 5: The image captured using the raspi-still command." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspberry_pi_output-300x225.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspberry_pi_output-1024x768.jpg 1024w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/raspberry_pi_output.jpg 1200w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 5:</strong> The image captured using the raspi-still command.</p></div>
<p>Clearly my Raspberry Pi camera module is working correctly! Now we can move on to the some more exciting stuff.</p>
<h1>Step 4: Installing picamera.</h1>
<p>So at this point we know that our Raspberry Pi camera is working properly. But how do we interface with the Raspberry Pi camera module using Python?</p>
<p>The answer is the <a href="http://picamera.readthedocs.org/en/release-1.9/index.html" target="_blank">picamera</a> module.</p>
<p>Remember from the <a title="Install OpenCV and Python on your Raspberry Pi 2 and B+" href="http://www.pyimagesearch.com/2015/02/23/install-opencv-and-python-on-your-raspberry-pi-2-and-b/" target="_blank">previous tutorial</a> how we utilized 
			<span id="crayon-56d5abac99c1a502977327" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">virtualenv</span></span></span>Â Â and 
			<span id="crayon-56d5abac99c21968095035" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">virtualenvwrapper</span></span></span>Â Â to cleanly install and segment our Python packages from the the system Python and packages?</p>
<p>Well, we’re going to do the same thing here.</p>
<p>Before installing 
			<span id="crayon-56d5abac99c28122633337" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">picamera</span></span></span>Â , be sure to activate our 
			<span id="crayon-56d5abac99c2f562516352" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv</span></span></span>Â Â virtual environment:</p>

		<div id="crayon-56d5abac99c36795183615" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5abac99c36795183615-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">source</span><span class="crayon-h"> </span><span class="crayon-o">~</span><span class="crayon-o">/</span><span class="crayon-e">.profile</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99c36795183615-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">workon </span><span class="crayon-v">cv</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>By sourcing our 
			<span id="crayon-56d5abac99c3d158482147" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-sy">.</span><span class="crayon-v">profile</span></span></span>Â Â file, we ensure that we have the paths to our virtual environments setup correctly. And from there we can access our 
			<span id="crayon-56d5abac99c44116514300" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv</span></span></span>Â Â virtual environment.</p>
<p><em><b>Note:Â </b>If you are installing the the 
			<span id="crayon-56d5abac99c4b970966386" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">picamera</span></span></span>Â Â module system wide, you can skip the previous commands. However, if you are following along from the <a title="Install OpenCV and Python on your Raspberry Pi 2 and B+" href="http://www.pyimagesearch.com/2015/02/23/install-opencv-and-python-on-your-raspberry-pi-2-and-b/">previous tutorial</a>, you’ll want to make sure you are in the 
			<span id="crayon-56d5abac99c53128152534" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv</span></span></span>Â Â virtual environment before continuing to the next command.</em></p>
<p>And from there, we canÂ install 
			<span id="crayon-56d5abac99c5a171674169" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">picamera</span></span></span>Â by utilizing pip:</p>

		<div id="crayon-56d5abac99c60313609073" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5abac99c60313609073-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">pip </span><span class="crayon-i">install</span><span class="crayon-h"> </span><span class="crayon-s">"picamera[array]"</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p><em><strong>IMPORTANT:Â </strong>Notice how I specified 
			<span id="crayon-56d5abac99c68860048565" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">picamera</span><span class="crayon-sy">[</span><span class="crayon-t">array</span><span class="crayon-sy">]</span></span></span>Â Â and not just 
			<span id="crayon-56d5abac99c75787834216" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">picamera</span></span></span>Â .</em></p>
<p>Why is this so important?</p>
<p>While the standard 
			<span id="crayon-56d5abac99c7c166887704" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">picamera</span></span></span>Â Â module provides methods to interface with the camera, we need the (optional) 
			<span id="crayon-56d5abac99c83099175500" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-t">array</span></span></span>Â Â sub-module so that we can utilize OpenCV. Remember, when using Python bindings, OpenCV represents images as NumPy arrays — and the 
			<span id="crayon-56d5abac99c8a562234436" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-t">array</span></span></span>Â Â sub-module allows us to obtain NumPy arrays from the Raspberry Pi camera module.</p>
<p>Assuming that your install finished without error, you now have the 
			<span id="crayon-56d5abac99c91534542818" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">picamera</span></span></span>Â Â module (with NumPy array support) installed.</p>
<h1>Step 5: Accessing a single image of your Raspberry Pi using Python and OpenCV.</h1>
<p>Alright, now we can finally start writing some code!</p>
<p>Open up a new file, name it 
			<span id="crayon-56d5abac99c99493361610" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">test_image</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></span></span>Â , and insert the following code:</p>

		<div id="crayon-56d5abac99ca0664247806" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-2">2</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-4">4</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-6">6</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-8">8</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-10">10</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-12">12</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-14">14</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-16">16</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-18">18</p><p class="crayon-num" data-line="crayon-56d5abac99ca0664247806-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99ca0664247806-20">20</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5abac99ca0664247806-1"><span class="crayon-c"># import the necessary packages</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">picamera</span><span class="crayon-sy">.</span><span class="crayon-k ">array</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">PiRGBArray</span></p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-3"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">picamera </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">PiCamera</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-4"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">time</span></p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-5"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-6"> </p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-7"><span class="crayon-c"># initialize the camera and grab a reference to the raw camera capture</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-8"><span class="crayon-v">camera</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">PiCamera</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-9"><span class="crayon-v">rawCapture</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">PiRGBArray</span><span class="crayon-sy">(</span><span class="crayon-v">camera</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-10"> </p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-11"><span class="crayon-c"># allow the camera to warmup</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-12"><span class="crayon-k ">time</span><span class="crayon-sy">.</span><span class="crayon-e">sleep</span><span class="crayon-sy">(</span><span class="crayon-cn">0.1</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-13"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-14"><span class="crayon-c"># grab an image from the camera</span></p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-15"><span class="crayon-v">camera</span><span class="crayon-sy">.</span><span class="crayon-e">capture</span><span class="crayon-sy">(</span><span class="crayon-v">rawCapture</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">format</span><span class="crayon-o">=</span><span class="crayon-s">"bgr"</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-16"><span class="crayon-v">image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">rawCapture</span><span class="crayon-sy">.</span><span class="crayon-k ">array</span></p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-17"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-18"><span class="crayon-c"># display the image on screen and wait for a keypress</span></p><p class="crayon-line" id="crayon-56d5abac99ca0664247806-19"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">imshow</span><span class="crayon-sy">(</span><span class="crayon-s">"Image"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">image</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99ca0664247806-20"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">waitKey</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>We’ll start by importing our necessary packages on <strong>Lines 2-5</strong>.</p>
<p>From there, we initialize our PiCamera object on <strong>Line 8</strong>Â and grab a reference to the raw capture component onÂ <strong>Line 9</strong>. This 
			<span id="crayon-56d5abac99ca8305035754" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">rawCapture</span></span></span>Â  object is especially useful since it (1) gives us direct access to the camera stream and (2) avoids the expensive compression to JPEG format, which we would then have to take and decode to OpenCV format anyway. IÂ <em>highly recommend</em> that you use 
			<span id="crayon-56d5abac99caf212360558" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">PiRGBArray</span></span></span>Â Â whenever you need to access the Raspberry Pi camera — <em><strong>the performance gains are well worth it.</strong></em></p>
<p>From there, we sleep for a tenth of a second onÂ <strong>Line 12</strong> — this allows the camera sensor to warm up.</p>
<p>Finally, we grab the actual photo from the 
			<span id="crayon-56d5abac99cb7247457742" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">rawCapture</span></span></span>Â Â object onÂ <strong>Line 15Â </strong>where we take special care to ensure our image is in BGR format rather than RGB. OpenCV represents images as NumPy arrays in BGR order rather than RGB — this little nuisance is subtle, but very important to remember as it can lead to some confusing bugs in your code down the line.</p>
<p>Finally, we display our image to screen onÂ <strong>Lines 19 and 20</strong>.</p>
<p>To execute this example, open up a terminal, navigate to your 
			<span id="crayon-56d5abac99cbe708436962" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">test_image</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></span></span>Â Â file, and issue the following command:</p>

		

<p>If all goes as expected you should have an image displayed on your screen:</p>
<div id="attachment_2194" class="wp-caption aligncenter"><a href="http://www.pyimagesearch.com/wp-content/uploads/2015/03/single_image_example.png"><img class="wp-image-2194" src="http://www.pyimagesearch.com/wp-content/uploads/2015/03/single_image_example.png" alt="Figure 6: Grabbing a single image from the Raspberry Pi camera and displaying it on screen." srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/03/single_image_example-300x226.png 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/03/single_image_example.png 806w" sizes="(max-width: 600px) 100vw, 600px"/></a><p class="wp-caption-text"><strong>Figure 6:</strong> Grabbing a single image from the Raspberry Pi camera and displaying it on screen.</p></div>
<p><em><strong>Note: </strong>I decided to add this section of the blog post <strong>after</strong> I had finished up the rest of the article, so I did not have my camera setup facing the couch (I was actually playing with some custom home surveillance software I was working on). Sorry for any confusion, but rest assured, everything will work as advertised provided you have followed the instructions in the article!</em></p>
<h1>Step 6: Accessing the video stream of your Raspberry Pi using Python and OpenCV.</h1>
<p>Alright, so we’ve learned how to grab a single image from the Raspberry Pi camera. But what about a video stream?</p>
<p>You might guess that we are going to use the 
			<span id="crayon-56d5abac99cce880446207" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">VideoCapture</span></span></span>Â Â function here — but I actually recommendÂ <em>against</em> this. Getting 
			<span id="crayon-56d5abac99cdb494309879" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">VideoCapture</span></span></span>Â Â to play nice with your Raspberry Pi is not a nice experience (you’ll need to install extra drivers) and something you should generally avoid.</p>
<p>And besides, why would we use the 
			<span id="crayon-56d5abac99ce3215649889" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-v">VideoCapture</span></span></span>Â Â function when we can <em>easily</em> access the raw video stream using the 
			<span id="crayon-56d5abac99cea364225422" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">picamera</span></span></span>Â Â module?</p>
<p>Let’s go ahead and take a look on how we can access the video stream. Open up a new file, name it 
			<span id="crayon-56d5abac99cf1944336644" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">test_video</span><span class="crayon-sy">.</span><span class="crayon-v">py</span></span></span>Â , and insert the following code:</p>

		<div id="crayon-56d5abac99cf8521737817" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content"><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-1">1</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-2">2</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-3">3</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-4">4</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-5">5</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-6">6</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-7">7</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-8">8</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-9">9</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-10">10</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-11">11</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-12">12</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-13">13</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-14">14</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-15">15</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-16">16</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-17">17</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-18">18</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-19">19</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-20">20</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-21">21</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-22">22</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-23">23</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-24">24</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-25">25</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-26">26</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-27">27</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-28">28</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-29">29</p><p class="crayon-num crayon-striped-num" data-line="crayon-56d5abac99cf8521737817-30">30</p><p class="crayon-num" data-line="crayon-56d5abac99cf8521737817-31">31</p></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d5abac99cf8521737817-1"><span class="crayon-c"># import the necessary packages</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-2"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-v">picamera</span><span class="crayon-sy">.</span><span class="crayon-k ">array</span><span class="crayon-h"> </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">PiRGBArray</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-3"><span class="crayon-st">from</span><span class="crayon-h"> </span><span class="crayon-e">picamera </span><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-e">PiCamera</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-4"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-k ">time</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-5"><span class="crayon-r">import</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-6"> </p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-7"><span class="crayon-c"># initialize the camera and grab a reference to the raw camera capture</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-8"><span class="crayon-v">camera</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">PiCamera</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-9"><span class="crayon-v">camera</span><span class="crayon-sy">.</span><span class="crayon-v">resolution</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-cn">640</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">480</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-10"><span class="crayon-v">camera</span><span class="crayon-sy">.</span><span class="crayon-v">framerate</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">32</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-11"><span class="crayon-v">rawCapture</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">PiRGBArray</span><span class="crayon-sy">(</span><span class="crayon-v">camera</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">size</span><span class="crayon-o">=</span><span class="crayon-sy">(</span><span class="crayon-cn">640</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-cn">480</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-12"> </p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-13"><span class="crayon-c"># allow the camera to warmup</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-14"><span class="crayon-k ">time</span><span class="crayon-sy">.</span><span class="crayon-e">sleep</span><span class="crayon-sy">(</span><span class="crayon-cn">0.1</span><span class="crayon-sy">)</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-15"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-16"><span class="crayon-c"># capture frames from the camera</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-17"><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-e">frame </span><span class="crayon-st">in</span><span class="crayon-h"> </span><span class="crayon-v">camera</span><span class="crayon-sy">.</span><span class="crayon-e">capture_continuous</span><span class="crayon-sy">(</span><span class="crayon-v">rawCapture</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-k ">format</span><span class="crayon-o">=</span><span class="crayon-s">"bgr"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">use_video_port</span><span class="crayon-o">=</span><span class="crayon-t">True</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-18"><span class="crayon-h">	</span><span class="crayon-c"># grab the raw NumPy array representing the image, then initialize the timestamp</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-19"><span class="crayon-h">	</span><span class="crayon-c"># and occupied/unoccupied text</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-20"><span class="crayon-h">	</span><span class="crayon-v">image</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">frame</span><span class="crayon-sy">.</span><span class="crayon-k ">array</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-21"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-22"><span class="crayon-h">	</span><span class="crayon-c"># show the frame</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-23"><span class="crayon-h">	</span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">imshow</span><span class="crayon-sy">(</span><span class="crayon-s">"Frame"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">image</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-24"><span class="crayon-h">	</span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">cv2</span><span class="crayon-sy">.</span><span class="crayon-e">waitKey</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-h"> </span><span class="crayon-cn">0xFF</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-25"> </p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-26"><span class="crayon-h">	</span><span class="crayon-c"># clear the stream in preparation for the next frame</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-27"><span class="crayon-h">	</span><span class="crayon-v">rawCapture</span><span class="crayon-sy">.</span><span class="crayon-e">truncate</span><span class="crayon-sy">(</span><span class="crayon-cn">0</span><span class="crayon-sy">)</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-28"> </p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-29"><span class="crayon-h">	</span><span class="crayon-c"># if the `q` key was pressed, break from the loop</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d5abac99cf8521737817-30"><span class="crayon-h">	</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-v">key</span><span class="crayon-h"> </span><span class="crayon-o">==</span><span class="crayon-h"> </span><span class="crayon-k ">ord</span><span class="crayon-sy">(</span><span class="crayon-s">"q"</span><span class="crayon-sy">)</span><span class="crayon-o">:</span></p><p class="crayon-line" id="crayon-56d5abac99cf8521737817-31"><span class="crayon-h">		</span><span class="crayon-st">break</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>This example starts off similarly to the previous one. We start off by importing our necessary packages on <strong>Lines 2-5</strong>.</p>
<p>And from there we construct our 
			<span id="crayon-56d5abac99d00935890311" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">camera</span></span></span>Â Â object on <strong>Line 8 </strong>which allows us to interface with the Raspberry Pi camera.Â However, we also take the time to set the resolution of our camera (640 x 480 pixels) onÂ <strong>Line 9</strong> and the frame rate (i.e. frames per second, or simply FPS) onÂ <strong>Line 10</strong>. We also initialize our 
			<span id="crayon-56d5abac99d07027656436" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">PiRGBArray</span></span></span>Â Â object on <strong>Line 11</strong>, but we also take care to specify the same resolution as onÂ <strong>Line 9</strong>.</p>
<p>Accessing the actual video stream is handled onÂ <strong>Line 17</strong> by making a call to the 
			<span id="crayon-56d5abac99d0f550190725" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">capture_continuous</span></span></span>Â Â method of our 
			<span id="crayon-56d5abac99d16310413225" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">camera</span></span></span>Â Â object.</p>
<p>This method returns a 
			<span id="crayon-56d5abac99d23886018421" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span>Â Â from the video stream. The frame then has an 
			<span id="crayon-56d5abac99d2a108118643" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-t">array</span></span></span>Â Â property, which corresponds to the 
			<span id="crayon-56d5abac99d31554370809" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">frame</span></span></span>Â Â in NumPy array format — all the hard work is done for us onÂ <strong>Lines 17 and 20!</strong></p>
<p>We then take the frame of the video and display on screen on<b> Lines 23 and 24</b>.</p>
<p>An important line to pay attention to isÂ <strong>Line 27:</strong>Â <strong>YouÂ <em>must</em> clear the current frame before you move on to the next one!</strong></p>
<p>If you fail to clear the frame, your Python script will throw an error — <strong><em>so be sure to pay close attention to this when implementing your own applications!</em></strong></p>
<p>Finally, if the user presses the 
			<span id="crayon-56d5abac99d39504920206" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">q</span></span></span>Â Â key, we break form the loop and exit the program.</p>
<p>To execute our script, just open a terminal (making sure you are in the 
			<span id="crayon-56d5abac99d40789520790" class="crayon-syntax crayon-syntax-inline  crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco"><span class="crayon-pre crayon-code"><span class="crayon-v">cv</span></span></span>Â Â virtual environment, of course) and issue the following command:</p>

		

<p>Below follows an example of me executing the above command:</p>
<p><iframe src="http://www.youtube.com/embed/HVuEQ7avDqo?feature=oembed" frameborder="0" allowfullscreen="">VIDEO</iframe></p>
<p>As you can see, the Raspberry Pi camera’s video stream is being read by OpenCV and then displayed on screen! Furthermore, the Raspberry Pi camera shows no lag when accessing frames at 32 FPS. Granted, we are not doing any processing on the individual frames, but as I’ll show in future blog posts, the Pi 2 can easily keep up 24-32 FPS even when processing each frame.</p>
<h1>So, what now?</h1>
<p>Now that you can access the video stream of your Raspberry Pi, I would suggest taking a look at my post on building a custom home surveillance system using motion detection. This motion detection tutorial is one of my favorite on the PyImageSearch blog and it’s super easy to follow — not to mention, you get to build a really cool, real-world computer vision project!</p>
<p>And if you’re <i>really interested</i> in leveling-up your computer vision skills, you should definitely check outÂ my book, <a href="https://www.pyimagesearch.com/practical-python-opencv/?src=pi-opencv-install" target="_blank"><span class="s1"><i>Practical Python and OpenCV + Case Studies</i></span></a>. My book not only <i>covers the basics of computer vision and image processing</i>, but also teaches you how to solve real world computer vision problems including <b><i>face detection in images and video streams</i></b>, <b><i>object tracking in video</i></b>, and <b><i>handwriting recognition.</i></b></p>
<p><a href="https://www.pyimagesearch.com/practical-python-opencv/?src=pi-opencv-install" target="_blank"><img class="aligncenter wp-image-2378" src="http://www.pyimagesearch.com/wp-content/uploads/2015/02/raspberry_pi_in_post.jpg" alt="raspberry_pi_in_post" srcset="http://www.pyimagesearch.com/wp-content/uploads/2015/02/raspberry_pi_in_post-300x200.jpg 300w, http://www.pyimagesearch.com/wp-content/uploads/2015/02/raspberry_pi_in_post.jpg 600w" sizes="(max-width: 450px) 100vw, 450px"/></a></p>
<p><b>All code examples covered in the book are guaranteed to run on the Raspberry Pi 2 as well!</b> Most programs will also run on the B+ model, but might be a bit slow due to the limited computing power of the B+.</p>
<p><strong><a href="https://www.pyimagesearch.com/practical-python-opencv/?src=pi-opencv-install" target="_blank">Just click here to learn more.</a></strong></p>
<h1>Summary</h1>
<p>This article extended our previous tutorial on <a title="Install OpenCV and Python on your Raspberry Pi 2 and B+" href="http://www.pyimagesearch.com/2015/02/23/install-opencv-and-python-on-your-raspberry-pi-2-and-b/">installing OpenCV and Python on your Raspberry Pi 2 and B+</a>Â and covered how to access the Raspberry Pi camera module using Python and OpenCV.</p>
<p>We reviewed two methods to access the camera. The first method allowed us to access a single photo. And the second method allowed us to access the raw video stream from the Raspberry Pi camera module.</p>
<p>In reality, there are many ways to access the Raspberry Pi camera module, as the <a href="http://picamera.readthedocs.org/en/release-1.9/index.html" target="_blank">picamera documentation details</a>. However, the methods detailed in this blog post are used because (1) they are easily compatible with OpenCV and (2) they are quite speedy. There are certainly more than one way to skin this cat, but if you intend on using OpenCV + Python, I would suggest using the code in this article as “boilerplate” for your own applications.</p>
<p>In future blog posts we’ll take theseÂ examples and use it to build computer vision systems toÂ <strong>detect motion in videos</strong> and <strong>recognize faces in images</strong>.</p>
<p>Be sure to sign up for the PyImageSearch Newsletter to receive updates when new Raspberry Pi and computer vision posts go live, you definitely don’t want to miss them!</p>
<h1 id="post_downloads">Downloads:</h1>

	</section>
	</div></body></html>