<html><body><div><div class="entry-content">
                    <p>In my opinion, the concepts behind Django's non-model forms can be listed in just three (3) bullets:</p>
<ul class="simple">
<li>Forms render HTML.</li>
<li>Forms are "just" Python constructs.</li>
<li>Forms validate dictionaries (Python's Key/Value structure).</li>
</ul>
<p>Let's dig in!</p>
<div class="section" id="forms-render-html">
<h2>Forms render HTML.</h2>
<p>If I construct a Django form:</p>
<div class="highlight"><pre><span class="c"># myapp/forms.py</span>
<span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>

    <span class="n">title</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
<p>I can render it in a template, or for better clarity in this post, the Python REPL:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">myapp.forms</span> <span class="kn">import</span> <span class="n">MyForm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span>
<span class="o">&lt;</span><span class="n">__main__</span><span class="o">.</span><span class="n">MyForm</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x1016c6990</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">tr</span><span class="o">&gt;&lt;</span><span class="n">th</span><span class="o">&gt;&lt;</span><span class="n">label</span> <span class="k">for</span><span class="o">=</span><span class="s">"id_title"</span><span class="o">&gt;</span><span class="n">Title</span><span class="p">:</span><span class="o">&lt;/</span><span class="n">label</span><span class="o">&gt;&lt;/</span><span class="n">th</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">td</span><span class="o">&gt;&lt;</span><span class="nb">input</span> <span class="nb">id</span><span class="o">=</span><span class="s">"id_title"</span> <span class="n">name</span><span class="o">=</span><span class="s">"title"</span> <span class="nb">type</span><span class="o">=</span><span class="s">"text"</span> <span class="o">/&gt;&lt;/</span><span class="n">td</span><span class="o">&gt;&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
</pre></div>
<p>You can even see this done with initial values in the Django docs: <a class="reference external" href="https://docs.djangoproject.com/en/1.5/ref/forms/api/#django.forms.Form.initial">https://docs.djangoproject.com/en/1.5/ref/forms/api/#django.forms.Form.initial</a></p>
</div>
<div class="section" id="forms-are-just-python-constructs">
<h2>Forms are "just" Python constructs.</h2>
<p>I believe it was <a class="reference external" href="https://twitter.com/alex_gaynor">Alex</a> <a class="reference external" href="http://alexgaynor.net/">Gaynor</a> who said back in 2008 that Django forms were "just" Python constructs. He's right:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">myapp.forms</span> <span class="kn">import</span> <span class="n">MyForm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># class</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">MyForm</span>
<span class="o">&lt;</span><span class="k">class</span> <span class="err">'</span><span class="nc">myapp</span><span class="o">.</span><span class="n">forms</span><span class="o">.</span><span class="n">MyForm</span><span class="s">'&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># object</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form</span>
<span class="o">&lt;</span><span class="n">myapp</span><span class="o">.</span><span class="n">forms</span><span class="o">.</span><span class="n">MyForm</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x1023f1450</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># iterable</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">form</span><span class="p">]</span>
<span class="p">[</span><span class="o">&lt;</span><span class="n">django</span><span class="o">.</span><span class="n">forms</span><span class="o">.</span><span class="n">forms</span><span class="o">.</span><span class="n">BoundField</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x102495990</span><span class="o">&gt;</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">form</span><span class="o">.</span><span class="n">fields</span><span class="p">]</span>
<span class="p">[</span><span class="s">'title'</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="c"># dictionary-like</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">form</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">'title'</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">django</span><span class="o">.</span><span class="n">forms</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">CharField</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x1024a17d0</span><span class="o">&gt;</span>
</pre></div>
<p>Understanding the structure of Django forms is really useful. This structure is what allows the modification mechanism that I described in my <a class="reference external" href="http://pydanny.com/overloading-form-fields.html">previous post</a>.</p>
<p>We don't have to stop in just the <tt class="docutils literal">forms.py</tt> module. You can also modify forms in views (either the classic <tt class="docutils literal">views.py</tt> module or in whatever API library you might be using):</p>
<div class="highlight"><pre><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">redirect</span>
<span class="kn">from</span> <span class="nn">django.views.generic</span> <span class="kn">import</span> <span class="n">FormView</span>

<span class="k">class</span> <span class="nc">MyFormView</span><span class="p">(</span><span class="n">FormView</span><span class="p">):</span>

    <span class="n">form_class</span> <span class="o">=</span> <span class="n">MyForm</span>

    <span class="k">def</span> <span class="nf">get_form</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form_class</span><span class="p">):</span>
        <span class="n">form</span> <span class="o">=</span> <span class="n">form_class</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">get_form_kwargs</span><span class="p">())</span>
        <span class="n">form</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">'favorite_icecream'</span><span class="p">]</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">ChoiceField</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s">"What is your favorite flavor from this list?"</span><span class="p">,</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="s">"Chocolate"</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">"Vanilla"</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">"Berry"</span><span class="p">)),</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">forms</span><span class="o">.</span><span class="n">RadioSelect</span><span class="p">,</span>
            <span class="n">required</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">form</span>

    <span class="k">def</span> <span class="nf">form_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">):</span>
        <span class="c"># Get user's favorite ice cream.</span>
        <span class="c"># You can do anything you want with it</span>
        <span class="n">favorite_icecream</span> <span class="o">=</span> <span class="n">form</span><span class="o">.</span><span class="n">cleaned_data</span><span class="p">[</span><span class="s">'favorite_icecream'</span><span class="p">]</span>

        <span class="c"># return the anticipated redirect</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">"home"</span><span class="p">)</span>
</pre></div>
<p>As you can see, with an understanding of basic Python types and some experience with Django forms you can become very creative in applications of forms. Please keep in mind that the devil is in the details, and overly creative use of forms (or anything) is a road you should carefully tread. It's always good to remember that simplicity is best and that the goal isn't to just write code, but to write maintainable code.</p>
</div>
<div class="section" id="forms-validate-dictionaries">
<h2>Forms validate dictionaries.</h2>
<p>One of the primary functions of any HTTP-friendly form libraries is validating dictionary-like data objects. HTTP query strings are key/value structures and in order to avoid corruption in the persistence layer of any project, regardless of framework or language, validation needs to occur.</p>
<p>During it's request/response cycle Django converts <tt class="docutils literal">HTTP POST</tt> (and <tt class="docutils literal">HTTP GET</tt>) objects into something called a <tt class="docutils literal">QueryDict</tt>, which is an merely an extended Django dictionary. See the comments in the code example below for proof:</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">django.http.request</span> <span class="kn">import</span> <span class="n">QueryDict</span>
<span class="kn">from</span> <span class="nn">django.utils.datastructures</span> <span class="kn">import</span> <span class="n">MultiValueDict</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__main__</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">my_form_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>

    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="c"># logs True because request.POST is an instance of QueryDict</span>
        <span class="nb">isinstance</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="n">QueryDict</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="c"># logs True because QueryDict is a dictionary</span>
        <span class="nb">issubclass</span><span class="p">(</span><span class="n">QueryDict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">()</span>
</pre></div>
<p>This is all fine and good, but what does it mean for developers trying to solve problems? Well, it means that Django forms serve quite handily as a means for validation of dictionaries:</p>
<div class="highlight"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">myapp.forms</span> <span class="kn">import</span> <span class="n">MyForm</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">good_form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">({</span><span class="s">"title"</span><span class="p">:</span> <span class="s">"Two Scoops of Django"</span><span class="p">})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">good_form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">good_form</span><span class="o">.</span><span class="n">errors</span>
<span class="p">{}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">bad_form</span> <span class="o">=</span> <span class="n">MyForm</span><span class="p">({})</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">bad_form</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">bad_form</span><span class="o">.</span><span class="n">errors</span>
<span class="p">{</span><span class="s">'title'</span><span class="p">:</span> <span class="p">[</span><span class="s">u'This field is required.'</span><span class="p">]}</span>
</pre></div>
<p>The power of this can't be understated. In fact, I'll be exploring this particular facet of Django forms more in at least one upcoming blog post.</p>
</div>
<div class="section" id="epilogue">
<h2>Epilogue</h2>
<p>ModelForms adds at least three more bullets...</p>
<ul class="simple">
<li>ModelForms render Model fields as HTML</li>
<li>ModelForms automatically choose validators based off of Model field definitions.</li>
<li>ModelForms save dictionaries to SQL tables.</li>
</ul>
<p>... and I touch on them in <a class="reference external" href="http://pydanny.com/core-concepts-django-modelforms.html">my post on ModelForms</a>.</p>
</div>

                    
                </div>
                                </div></body></html>