<html><body><div><div class="post-text" itemprop="text">
<ol>
<li>Using the above when I send a PATCH request, I get an error. How can I fix this?</li>
</ol>

<blockquote>
  <p>Expected view SubscriptionDetail to be called with a URL keyword
  argument named "pk". Fix your URL conf, or set the .lookup_field
  attribute on the view correctly.</p>
</blockquote>

<p>The error is caused because unlike <code>create</code> request, <code>patch</code>/<code>update</code> require a <code>pk</code> to know which object to update. That is why you have to supply the <code>pk</code> value for it. So, your url for <code>PUT</code>, <code>DELETE</code> and<code>PATCH</code> must have at least named parameter like this - </p>

<pre><code>subscription = SubscriptionDetail.as_view({
     'patch': 'update'
 })
url(r'^rest-auth/subscription/(?&lt;pk&gt;(\d+))$', subscription, name='something'),
</code></pre>

<p>an example url will be - <code>rest-auth/subscription/10</code> where <code>10</code> is the <code>pk</code> or <code>id</code> of the object. Django Rest Framework will then load the object internally to be updated.</p>

<ol start="2">
<li>While sending the patch request I would also like to send an 'email' field which is not on the subscription model. Is this possible to do? I need the email field in the POST (create) operation so that I know which user the subscription belongs to.</li>
</ol>

<p>To add custom parameters, first declare the property in serializer, it is better to keep it <code>required=False</code>, so that other request does not throw error - </p>

<pre><code>class SubscriptionSerializer(serializers.ModelSerializer):
    custom_field = serialiers.BooleanField(required=False)

    class Meta:
        model = Subscription
        fields = ('name','quantity', 'stripe_id')

    def update(self, instance, validated_data):
        print "In update"
</code></pre>

<p>so far this is enough for the django rest framework to accept the field <code>custom_field</code> and you will find the value in <code>update</code> method. To get the value pop it from the attributes supplied by the framework like this - </p>

<pre><code>    def update(self, instance, validated_data):
        custom_field = validated_data.pop('custom_field', None)
        if custom_field is not None:
            # do whatever you like with the field
        return super().update(instance, validated_data)
        # for python &lt; 3.0 super(SubscriptionSerializer, self).update(instance, validated_data)
</code></pre>
    </div>
    </div></body></html>