<html><body><div><div class="entry-content clearfix"><p><em>The following is a guest post by Shantnu Tiwari, who suffered at the hands of C/C++ for several years before he discovered Python.</em></p>

<p><em>He is now <a href="http://pythonforengineers.com/">sharing his love</a>.</em></p>

<hr/>


<p>I saw a sign at the gym yesterday that said, “Children are getting fatter every decade”. Below that sign stood a graph that basically showed that in five years the average English child will weigh as much as a tractor. I found this claim <em>slightly</em> unbelievable, so I decided to investigate…</p>

<a name="The.Data"/>
<h2>The Data</h2>

<p>The data is taken from <a href="http://data.gov.uk/dataset/statistics_on_obesity_physical_activity_and_diet_england/">Data.gov.uk</a>. We’ll be using the 2014 XLS file. Download it, and open it in your spreadsheet tool of choice.</p>

<p>Then navigate to sheet 7.2, as it contains the data we are looking for:</p>









<p>Now, before we jump into analyzing the data with Pandas, let’s take a step back and address the elephant in the room: <em>If you can perform the analysis/plotting in Excel, why would you use Python?</em></p>

<a name="Python.vs.Excel"/>
<h2>Python vs Excel</h2>

<p><strong><em>Should I use Python or Excel?</em></strong></p>

<p>This question is often asked by people just starting out in data analysis. While Python may be popular with the programming community, Excel is much more prevalent in the wider world. Most officer managers, sales people, marketers, etc. use Excel – and there’s nothing wrong with that. It’s a great tool if you know how to use it well, and it has turned many non-technical people into expert analysts.</p>

<p>The answer to whether you should use Python or Excel is not an easy one to answer. But in the end, there is no either/or: Instead, you can use them together.</p>

<p>Excel is great for viewing data, performing basic analysis, and drawing simple graphs, but it really isn’t suitable for cleaning up data (unless you are willing to dive into VBA). If you have a 500MB Excel file with missing data, dates in different formats, no headers, it will take you forever to clean it by hand. The same can be said if your data is spread across a dozen CSV files, which is fairly common.</p>

<p>Doing all that cleanup is trivial with Python and <a href="http://pandas.pydata.org/">Pandas</a>, a Python library for data analysis. Built on top of <a href="http://www.numpy.org/">Numpy</a>, Pandas makes high-level tasks easy, and you can write your results back to an Excel file, so you can continue to share the results of your analysis with non-programmers.</p>

<p>So while Excel isn’t going away, Python is a great tool if you want clean data and perform higher-level data analysis.</p>

<a name="The.Code"/>
<h2>The Code</h2>

<p>Right, let’s get started with the code – which you can grab from the project <a href="https://github.com/shantnu/python-obesity">repo</a> along with the spreadsheet I linked to above so you don’t have to download it again.</p>

<p>Start by creating a new script called <em>obesity.py</em> and import Pandas as well as <a href="http://matplotlib.org/">matplotlib</a> so that we can plot graphs later on:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
</span><span class="line"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
</span></code></pre></td></tr></table></div></figure>


<p>Make sure you install both dependencies: <code>pip install pandas matplotlib</code></p>

<p>Next, let’s read in the Excel file:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelFile</span><span class="p">(</span><span class="s">"Obes-phys-acti-diet-eng-2014-tab.xls"</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>And that’s it. In a single line we read in the <em>entire</em> Excel file.</p>

<p>Let’s print what we have:</p>

<figure class="code"><figcaption><span/></figcaption></figure>


<p>Run the script.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="nv">$ </span>python obesity.py
</span><span class="line"><span class="o">[</span>u<span class="s1">'Chapter 7'</span>, u<span class="s1">'7.1'</span>, u<span class="s1">'7.2'</span>, u<span class="s1">'7.3'</span>, u<span class="s1">'7.4'</span>, u<span class="s1">'7.5'</span>, u<span class="s1">'7.6'</span>, u<span class="s1">'7.7'</span>, u<span class="s1">'7.8'</span>, u<span class="s1">'7.9'</span>, u<span class="s1">'7.10'</span><span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Look familiar? These are the sheets we saw earlier. Remember, we will be focusing on sheet 7.2. Now if you look at 7.2 in Excel, you will see that the top 4 rows and bottom 14 rows contain useless info. Let me rephrase: It’s useful for humans, but not  for our script. We only need rows 5-18.</p>

<a name="Cleanup"/>
<h2>Cleanup</h2>

<p>So when we read the sheet, we need to make sure any unnecessary info is left out.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="c"># Read 2nd section, by age</span>
</span><span class="line"><span class="n">data_age</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">u'7.2'</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">skipfooter</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</span><span class="line"><span class="k">print</span> <span class="n">data_age</span>
</span></code></pre></td></tr></table></div></figure>


<p>Run again.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">   Unnamed: 0  Total  Under 16  16-24  25-34  35-44  45-54  55-64  65-74  <span class="se">\</span>
</span><span class="line">0         NaN    NaN       NaN    NaN    NaN    NaN    NaN    NaN    NaN
</span><span class="line">1     2002/03   1275       400     65    136    289    216     94     52
</span><span class="line">2     2003/04   1711       579     67    174    391    273    151     52
</span><span class="line">3     2004/05   2035       547    107    287    487    364    174     36
</span><span class="line">4     2005/06   2564       583     96    341    637    554    258     72
</span><span class="line">
</span><span class="line"><span class="c">#...snip...#</span>
</span></code></pre></td></tr></table></div></figure>


<p>We read the sheet, skipping the top 4 rows as well as the bottom 14 (as they contain data not useful to us). We then printed what we have. (For simplicity, I’m only showing the first few lines of the printout.)</p>

<p>The first line represents the column headers. Right off the bat you can see Pandas is quite smart since it picked up most of the headers correctly. Except for the first one, of course – e.g., <code>Unnamed: 0</code>. Why is that? Simple. Look at the file in Excel, and you see that it is missing a header for the year.</p>

<p>Another problem is that we have an empty line in the original file, and that is showing up as <code>NaN</code> (Not a number).</p>

<p>So we now need to do two things:</p>

<ol>
<li>Rename the first header to <code>Year</code>, and</li>
<li>Get rid of any empty rows.</li>
</ol>


<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="c"># Rename unamed to year</span>
</span><span class="line">data_age.rename<span class="o">(</span><span class="nv">columns</span><span class="o">={</span>u<span class="s1">'Unnamed: 0'</span>: u<span class="s1">'Year'</span><span class="o">}</span>, <span class="nv">inplace</span><span class="o">=</span>True<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here we told Pandas to rename the column <em>Unnamed: 0</em> to <em>Year</em>. using the in-built <a href="http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.rename.html">function</a> <code>rename()</code>.</p>

<blockquote><p><code>inplace = True</code> modifies the existing object. Without this, Pandas will create a new object and return that.</p></blockquote>

<p>Next let’s drop the empty rows filled with <code>NaN</code>:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="c"># Drop empties</span>
</span><span class="line">data_age.dropna<span class="o">(</span><span class="nv">inplace</span><span class="o">=</span>True<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>There is one more thing we need to do that will make our lives easier. If you look at the <em>data_age</em> table, the first value is a number. This is the index, and Pandas uses the default Excel practice of having a number as the index. However, we want to change the index to <em>Year</em>. This will make plotting <em>much</em> easier, since the index is usually plotted as the x axis.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">data_age.set_index<span class="o">(</span><span class="s1">'Year'</span>, <span class="nv">inplace</span><span class="o">=</span>True<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>We set the index to <code>Year</code>.</p>

<p>Now print our cleaned up data:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="k">print</span> <span class="s">"After Clean up:"</span>
</span><span class="line"><span class="k">print</span> <span class="n">data_age</span>
</span></code></pre></td></tr></table></div></figure>


<p>And run:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">     Total  Under 16  16-24  25-34  35-44  45-54  55-64  65-74  <span class="se">\</span>
</span><span class="line">Year
</span><span class="line">2002/03   1275       400     65    136    289    216     94     52
</span><span class="line">2003/04   1711       579     67    174    391    273    151     52
</span><span class="line">2004/05   2035       547    107    287    487    364    174     36
</span><span class="line">2005/06   2564       583     96    341    637    554    258     72
</span><span class="line"><span class="c">#...snip...#</span>
</span></code></pre></td></tr></table></div></figure>


<p>Much better. You can see the index is now the <code>Year</code>, and all <code>NaN</code>s are gone.</p>

<a name="Charts"/>
<h2>Charts</h2>

<p>Now we can plot what we have.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="c"># Plot</span>
</span><span class="line"><span class="n">data_age</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</span><span class="line"><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>












<p>Oops. There is a problem: Our original data contains a total field that is overshadowing everything else. We need to get rid of it.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="c"># Drop the total column and plot</span>
</span><span class="line"><span class="n">data_age_minus_total</span> <span class="o">=</span> <span class="n">data_age</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s">'Total'</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>axis =1</code> is slightly confusing, but all it really means is – drop the columns, as described from <a href="http://stackoverflow.com/questions/25773245/ambiguity-in-pandas-dataframe-axis-definition">this</a> Stack Overflow question.</p>

<p>Let’s plot what we have now.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">data_age_minus_total</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</span><span class="line"><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>Much better. We can actually see individual age groups now. Can you see which age group has the highest obesity?</p>









<p>Coming back to our original question: Are children getting fatter?</p>

<p>Let’s just plot a small section of the data: children under the age of 16 and grown ups in the age range of 35-44.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span class="line">
</span><span class="line"><span class="c"># Plot children vs adults</span>
</span><span class="line"><span class="n">data_age</span><span class="p">[</span><span class="s">'Under 16'</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"Under 16"</span><span class="p">)</span>
</span><span class="line"><span class="n">data_age</span><span class="p">[</span><span class="s">'35-44'</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">"35-44"</span><span class="p">)</span>
</span><span class="line"><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">"upper right"</span><span class="p">)</span>
</span><span class="line"><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>












<a name="So.who.is.getting.fatter."/>
<h2>So who is getting fatter?</h2>

<p>Right. What do we see?</p>

<p>While children’s obesity has gone slightly down, their parents have ballooned. So it seems the parents need to worry about themselves rather than their children.</p>

<a name="But.what.about.the.future."/>
<h2>But what about the future?</h2>

<p>The graph still doesn’t tell us what will happen to children’s obesity in the future. There are ways to extrapolate graphs like these into the future, but I must give a <strong>warning</strong> before we proceed: The obesity data has no underlying mathematical foundation. That is, we can’t find a formula that will predict how these values will change in the future. Everything is essentially guesswork. With this warning in mind, let’s see how we can try to extrapolate our graph.</p>

<p>First, <a href="http://www.scipy.org/">Scipy</a> does provide a <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.interp.html">function</a> for extrapolation, but it only works for monotically increasing data (while our data goes up and down).</p>

<p>We can try curve fitting:</p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Curve_fitting">Curve Fitting</a> tries to fit a curve through points on a graph, by trying to generate a mathematical function for the data. The function may or may not be very accurate, depending on the data.</li>
<li><a href="http://en.wikipedia.org/wiki/Polynomial_interpolation">Polynomial Interpolation</a> Once you have an equation, you can use polynomial interpolation to try and interpolate any value on the graph.</li>
</ul>


<p>We’ll use these two functions together to try and predict the future for England’s children:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">kids_values</span> <span class="o">=</span> <span class="n">data_age</span><span class="p">[</span><span class="s">'Under 16'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
</span><span class="line">
</span><span class="line"><span class="n">x_axis</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">kids_values</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Here, we extract the values for children under 16. For the x axis, the original graph had dates. To simplify our graph, we’ll just be using the the numbers 0-10.</p>

<p>Output:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">array<span class="o">([</span> 400.,  579.,  547.,  583.,  656.,  747.,  775.,  632.,  525., 495.,  556.<span class="o">])</span>
</span><span class="line">
</span><span class="line"><span class="o">[</span>0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>One more thing: Curve fitting uses different <a href="http://en.wikipedia.org/wiki/Degree_of_a_polynomial">degrees of polynomials</a>. In very simple terms,the higher the degree, the more accurate the curve fitting will be, but there is also the chance that the results will be garbage. Scipy will sometimes warn you if the degree is too high. Don’t worry, this will be more clear when we look at some examples.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">poly_degree</span> <span class="o">=</span> <span class="mi">3</span>
</span><span class="line">
</span><span class="line"><span class="n">curve_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">kids_values</span><span class="p">,</span> <span class="n">poly_degree</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">poly_interp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">poly1d</span><span class="p">(</span><span class="n">curve_fit</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>We set the polynomial degree to 3. We then use the Numpy <code>polyfit()</code> <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.polyfit.html">function</a> to try to fit a graph through the data we have. The <code>poly1d()</code> <a href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.poly1d.html">function</a> is then called on the equation we generated to create a function that will be used to generate our values. This returns a function called <code>poly_interp</code> that we will use below:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">poly_fit_values</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line">
</span><span class="line"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_axis</span><span class="p">)):</span>
</span><span class="line">    <span class="n">poly_fit_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly_interp</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>We loop from 0 to 10, and call the <code>poly_interp()</code> function on each value. Remember, this is the function we generated when we ran the curve fitting algorithm.</p>

<p>Before moving on, let’s see what the different polynomial degrees mean.</p>

<p>We will plot both the original data, and our own data, to see how close our equation reached the ideal data:</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">poly_fit_values</span><span class="p">,</span> <span class="s">"-r"</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">"Fitted"</span><span class="p">)</span>
</span><span class="line"><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_axis</span><span class="p">,</span> <span class="n">kids_values</span><span class="p">,</span> <span class="s">"-b"</span><span class="p">,</span> <span class="n">label</span> <span class="o">=</span> <span class="s">"Orig"</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s">"upper right"</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>The original data will be plotted in <em>blue</em> and labelled <em>Orig</em>, while the generated data will be <em>red</em> and labelled <em>Fitted</em>.</p>

<p>With a polynomial value of 3:</p>









<p>We see it isn’t that good a fit, so let’s try 5:</p>









<p>Much better. What about 7?</p>









<p>Now we get an almost perfect match. So, why wouldn’t we always use higher values?</p>

<p>Because the higher values have been so tightly coupled to this graph, they make prediction useless. If we try to extrapolate from the graph above, we get garbage values. Trying different values, I found that polynomial degrees of 3 and 4 were the only ones that give accurate results, so that’s what we’ll be using.</p>

<p>We are going to re-run our <code>poly_interp()</code> function, this time for values from 0-15, to predict five years into the future.</p>

<figure class="code"><figcaption><span/></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="python"><span class="line"><span class="n">x_axis2</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="n">poly_fit_values</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class="line"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_axis2</span><span class="p">)):</span>
</span><span class="line">    <span class="n">poly_fit_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly_interp</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is the same code as before. Let’s again see the results with polynomial degrees of 3 and 4. The new extrapolated line is the <em>green</em> one and shows our prediction.</p>

<p>With 3:</p>









<p>Here, the obesity is going down. How about 4?</p>









<p>But here, it is shooting up, so kids will end up weighing like tractors!</p>

<p>Which of the two graphs is correct? It depends on whether you are working for the government or the opposition.</p>

<p>This is actually a feature, not bug. You must have heard these political debates where two sides draw the exact opposite conclusions from the same data? Now you see how it’s possible to draw radically different conclusions by tweaking small parameters.</p>

<p>And that is the reason we must be careful when accepting figures and graphs from lobbyists, especially if they are not willing to share the raw data. Sometimes, predictions are better left to astrologers.</p>

<p>Cheers!</p>

<hr/>


<p>Check out <a href="http://pythonforengineers.com/introduction-to-web-scraping-and-data-analysis/">Python For Engineers</a> to to get a free ebook – <em>Python: From Apprentice to Master</em> – and to learn more about data analysis.</p>
</div>


      </div></body></html>