<html><body><div><div id="examples">
<h2>Examples</h2>
<p>The first thing we do when using <tt>pyinfoblox</tt> is to instantiate a
new <tt>InfobloxWAPI</tt> object.</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">pyinfoblox</span> <span class="kn">import</span> <span class="n">InfobloxWAPI</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">infoblox</span> <span class="o">=</span> <span class="n">InfobloxWAPI</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">username</span><span class="o">=</span><span class="s1">'admin'</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">password</span><span class="o">=</span><span class="s1">'p4ssw0rd'</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">wapi</span><span class="o">=</span><span class="s1">'https://localhost/wapi/v1.1/'</span>
<span class="o">...</span> <span class="p">)</span>
</pre>
<p>Getting Infoblox networks is as easy as doing:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">networks</span> <span class="o">=</span> <span class="n">infoblox</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">networks</span><span class="p">)</span>
</pre>
<p>Getting a specific network in Infoblox is easy too:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">network</span> <span class="o">=</span> <span class="n">infoblox</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="s1">'192.168.1.0/24'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">network</span><span class="p">)</span>
</pre>
<p>Another example that will get all Infoblox <tt>ipv4address</tt> objects.</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">ipv4address</span> <span class="o">=</span> <span class="n">infoblox</span><span class="o">.</span><span class="n">ipv4address</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">ipv4address</span><span class="p">)</span>
</pre>
<p>Here is how to create a new Infoblox network:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">objref</span> <span class="o">=</span> <span class="n">infoblox</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">network</span><span class="o">=</span><span class="s1">'192.168.1.0/24'</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">comment</span><span class="o">=</span><span class="s1">'This is my test network'</span>
<span class="o">...</span> <span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">objref</span><span class="p">)</span>
<span class="s1">u'network/ZG5zLm5ldHdvcmskMTkyLjE2OC4xLjAvMjQvMA:192.168.1.0/24/default'</span>
</pre>
<p>Creating new objects returns a reference to the newly created
object in Infoblox.</p>
<p>We can also update objects. When we update objects in Infoblox we
need to pass the object reference as well. This is how we can
update the <tt>network</tt> we created in the previous example</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">infoblox</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">objref</span><span class="o">=</span><span class="s1">'network/ZG5zLm5ldHdvcmskMTkyLjE2OC4xLjAvMjQvMA:192.168.1.0/24/default'</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">comment</span><span class="o">=</span><span class="s1">'This is my updated network'</span>
<span class="o">...</span> <span class="p">)</span>
<span class="s1">u'network/ZG5zLm5ldHdvcmskMTkyLjE2OC4xLjAvMjQvMA:192.168.1.0/24/default'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">network</span> <span class="o">=</span> <span class="n">infoblox</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="s1">'192.168.1.0/24'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span><span class="p">(</span><span class="n">network</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">'comment'</span><span class="p">])</span>
<span class="n">This</span> <span class="ow">is</span> <span class="n">my</span> <span class="n">updated</span> <span class="n">network</span>
</pre>
<p>When we no longer need an Infoblox object we can always remove it.
Just make sure to pass the object reference when deleting objects.</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">infoblox</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">objref</span><span class="o">=</span><span class="s1">'network/ZG5zLm5ldHdvcmskMTkyLjE2OC4xLjAvMjQvMA:192.168.1.0/24/default'</span>
<span class="o">...</span> <span class="p">)</span>
<span class="s1">u'network/ZG5zLm5ldHdvcmskMTkyLjE2OC4xLjAvMjQvMA:192.168.1.0/24/default'</span>
</pre>
<p>As a last example we will see how to call functions on
Infoblox objects.</p>
<p>Here is how to call the <tt>next_available_ip</tt> function on a
<tt>network</tt> object in order to get the next 3 available IP addresses:</p>
<pre><span class="o">&gt;&gt;&gt;</span> <span class="n">infoblox</span><span class="o">.</span><span class="n">network</span><span class="o">.</span><span class="n">function</span><span class="p">(</span>
<span class="o">...</span>     <span class="n">objref</span><span class="o">=</span><span class="s1">'network/ZG5zLm5ldHdvcmskMTkyLjE2OC4xLjAvMjQvMA:192.168.1.0/24/default'</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">_function</span><span class="o">=</span><span class="s1">'next_available_ip'</span><span class="p">,</span>
<span class="o">...</span>     <span class="n">num</span><span class="o">=</span><span class="mi">3</span>
<span class="o">...</span> <span class="p">)</span>
<span class="p">{</span><span class="s1">u'ips'</span><span class="p">:</span> <span class="p">[</span><span class="s1">u'192.168.1.21'</span><span class="p">,</span> <span class="s1">u'192.168.1.22'</span><span class="p">,</span> <span class="s1">u'192.168.1.23'</span><span class="p">]}</span>
</pre>
</div>


</div></body></html>