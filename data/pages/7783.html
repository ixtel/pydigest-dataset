<html><body><div><div class="section">
              <h1>dukpy 0.0.1</h1>

              


<p>Simple JavaScript interpreter for Python</p>








<a href="https://travis-ci.org/amol-/dukpy" rel="nofollow"><img src="https://travis-ci.org/amol-/dukpy.png?branch=master"/></a>
<a href="https://coveralls.io/r/amol-/dukpy?branch=master" rel="nofollow"><img src="https://coveralls.io/repos/amol-/dukpy/badge.png?branch=master"/></a>
<p>DukPy is a simple javascript interpreter for Python built on top of
duktape engine <strong>without any external dependency</strong>.
It comes with a builtin <em>CoffeeScript</em> compiler for
convenience and usage example.</p>
<p>Dukpy has been tested on <strong>Python 2.7</strong> and <strong>Python 3.4</strong>, dukpy
is currently not production ready and might actually crash your
program as it is mostly implemented in C.</p>
<div id="coffeescript-compiler">
<h2>CoffeeScript Compiler</h2>
<p>Using the coffeescript compiler is as easy as running:</p>
<pre>&gt;&gt;&gt; import dukpy
&gt;&gt;&gt; dukpy.coffee_compile('''
...     fill = (container, liquid = "coffee") -&gt;
...         "Filling the #{container} with #{liquid}..."
... ''')
'(function() {\n  var fill;\n\n  fill = function*(container, liquid) {\n    if (liquid == null) {\n      liquid = "coffee";\n    }\n    return "Filling the " + container + " with " + liquid + "...";\n  };\n\n}).call(this);\n'
</pre>
</div>
<div id="ecmascript6-babeljs-transpiler">
<h2>EcmaScript6 BabelJS Transpiler</h2>
<p>To compile ES6 code to ES5 for everyday usage you can use <tt>dukpy.babel_compile</tt>:</p>
<pre>&gt;&gt;&gt; import dukpy
&gt;&gt;&gt; dukpy.babel_compile('''
... class Point {
...     constructor(x, y) {
...             this.x = x;
...         this.y = y;
...         }
...         toString() {
...             return '(' + this.x + ', ' + this.y + ')';
...         }
... }
... ''')
'"use strict";\n\nvar _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };\n\nvar Point = (function () {\n    function Point(x, y) {\n        _classCallCheck(this, Point);\n\n        this.x = x;\n        this.y = y;\n    }\n\n    _prototypeProperties(Point, null, {\n        toString: {\n            value: function toString() {\n                return "(" + this.x + ", " + this.y + ")";\n            },\n            writable: true,\n            configurable: true\n        }\n    });\n\n    return Point;\n})();\n'
</pre>
<p>The DukPY based BabelJS compiler also provides a WebAssets ( <a href="http://webassets.readthedocs.org/en/latest/" rel="nofollow">http://webassets.readthedocs.org/en/latest/</a> ) filter to automatically compile ES6 code in your assets pipeline.
You register this filter as <tt>babeljs</tt> within WebAssets using:</p>
<pre>from webassets.filter import register_filter
from dukpy.webassets import BabelJS

register_filter(BabelJS)
</pre>
<p>Which makes the filter available with the <tt>babeljs</tt> name.</p>
<p><strong>NOTE:</strong> When using the BabelJS compiler for code that needs to run in the browser, make sure to add <a href="https://cdnjs.cloudflare.com/ajax/libs/babel-core/4.6.6/browser-polyfill.js" rel="nofollow">https://cdnjs.cloudflare.com/ajax/libs/babel-core/4.6.6/browser-polyfill.js</a> dependency.</p>
</div>
<div id="using-the-javascript-interpreter">
<h2>Using the JavaScript Interpreter</h2>
<p>Using dukpy is as simple as calling the <tt>dukpy.evaljs</tt> function with
the javascript code:</p>
<pre>&gt;&gt;&gt; import dukpy
&gt;&gt;&gt; dukpy.evaljs("var o = {'value': 5}; o['value'] += 3; o")
{'value': 8}
</pre>
<p>The <tt>evaljs</tt> function executes the javascript and returns the
resulting value as far as it is possible to encode it in JSON.</p>
<p>If execution fails a <tt>dukpy.JSRuntimeError</tt> exception is raised
with the failure reason.</p>
</div>
<div id="passing-arguments">
<h2>Passing Arguments</h2>
<p>Any argument passed to <tt>evaljs</tt> is available in JavaScript inside
the <tt>dukpy</tt> object in javascript. It must be possible to encode
the arguments using JSON for them to be available in Javascript:</p>
<pre>&gt;&gt;&gt; import dukpy
&gt;&gt;&gt;
&gt;&gt;&gt; def sum3(value):
...     return dukpy.evaljs("dukpy['value'] + 3", value=value)
...
&gt;&gt;&gt; sum3(7)
10
</pre>
</div>
<div id="running-multiple-scripts">
<h2>Running Multiple Scripts</h2>
<p>The <tt>evaljs</tt> function supports providing multiple source codes to
be executed in the same context.</p>
<p>Multiple script can be passed in a list or tuple:</p>
<pre>&gt;&gt;&gt; import dukpy
&gt;&gt;&gt; dukpy.evaljs(["var o = {'value': 5}",
...               "o['value'] += 3",
...               "o"])
{'value': 8}
</pre>
<p>This is useful when your code requires dependencies to work,
as you can load the dependency and then your code.</p>
<p>This is actually how the coffeescript compiler is implemented
by DukPy itself:</p>
<pre>def coffee_compile(source):
    with open(COFFEE_COMPILER, 'r') as coffeescript_js:
        return evaljs((coffeescript_js.read(), 'CoffeeScript.compile(dukpy.coffeecode)'),
                      coffeecode=source)
</pre>
</div>


<a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>11</span> downloads in the last week
  </li>
  <li>
    <span>87</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>