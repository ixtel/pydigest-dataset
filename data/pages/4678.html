<html><body><div><div itemscope="" itemtype="http://schema.org/Article" class="col-md-9">
    <header><h1 itemprop="name">Automating Browser Tasks without Distraction on Ubuntu</h1></header>
    <p>I use <a href="http://www.seleniumhq.org/">Selenium</a> from Python for automating browser tasks that require rendering and execution of JavaScript code. Usually, I don't want to get distracted by browser windows popping up and therefore use the <a href="http://phantomjs.org/">PhantomJS</a> Webdriver with Selenium.</p>
<p>Unfortunately, PhantomJS stopped working for me today on Ubuntu crashing with a segmentation fault. Fortunately though, it is fairly easy to run the Firefox Webdriver without displaying a browser window on Ubuntu with the help of some additional packages.</p>
<p>First, I had to install <a href="https://en.wikipedia.org/wiki/Xvfb">Xvfb</a>: <em>a display server implementing the X11 display server protocol, that performs all graphical operations in memory without showing any screen output.</em>:</p>
<pre><code>sudo apt-get install xvfb
</code></pre>
<p>Next in the virtual environment I use for automated browser tasks, I installed the Python package <a href="https://pypi.python.org/pypi/PyVirtualDisplay">PyVirtualDisplay</a>:</p>
<pre><code>pip install pyvirtualdisplay
</code></pre>
<p>Finally, I added a few lines of code at the top of my Python script, so the Firefox Webdriver will be used without displaying a browser window as a fallback when PhantomJS crashes.</p>
<pre><code class="python">from selenium import webdriver
from pyvirtualdisplay import Display

try:
    browser = webdriver.PhantomJS()
except:
    display = Display(visible=0, size=(1024, 768))
    display.start()
    browser = webdriver.Firefox()
</code></pre>

<p>Thanks to <a href="http://phihag.de/">Philipp Hagemeister</a> for suggestion PyVirtualDisplay on <a href="http://stackoverflow.com/a/6925133/291931">Stack Overflow</a>!</p>
    </div>
    </div></body></html>