<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-changelog" class="anchor" href="#changelog" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Changelog</h1>
<a name="user-content-unreleased"/>
<h2><a id="user-content-110-unreleased" class="anchor" href="#110-unreleased" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1.0 (unreleased)</h2>
<ul>
<li>Python 3: A monkey-patched <a href="#id1">:class:`threading.RLock`</a> now properly
blocks (or deadlocks) in <code>acquire</code> if the default value for
<em>timeout</em> of -1 is used (which differs from gevent's default of
None). The <code>acquire</code> method also raises the same <a href="#id3">:exc:`ValueError`</a>
exceptions that the standard library does for invalid parameters.
Reported in <a href="#id5">:issue:`750`</a> by Joy Zheng.</li>
<li>Fix a race condition in <a href="#id7">:class:`~gevent.event.Event`</a> that made it
return <code>False</code> when the event was set and cleared by the same
greenlet before allowing a switch to already waiting greenlets. (Found
by the 3.4 and 3.5 standard library test suites; the same as Python
<a href="http://bugs.python.org/issue13502">bug 13502</a>. Note that the Python 2 standard library still has this
race condition.)</li>
<li><a href="#id9">:class:`~gevent.event.Event`</a> and <a href="#id11">:class:`~.AsyncResult`</a> now wake
waiting greenlets in the same (unspecified) order. Previously,
<code>AsyncResult</code> tended to use a FIFO order, but this was never
guaranteed. Both classes also use less per-instance memory.</li>
</ul>
<a name="user-content-rc5-feb-24-2016"/>
<h2><a id="user-content-11rc5-feb-24-2016" class="anchor" href="#11rc5-feb-24-2016" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1rc5 (Feb 24, 2016)</h2>
<ul>
<li>SSL: Attempting to send empty data using the
<a href="#id13">:meth:`~socket.socket.sendall`</a> method of a gevent SSL socket that has
a timeout now returns immediately (like the standard library does),
instead of incorrectly raising <a href="#id15">:exc:`ssl.SSLEOFError`</a>. (Note that
sending empty data with the <a href="#id17">:meth:`~socket.socket.send`</a>
method <em>does</em> raise <code>SSLEOFError</code> in
both gevent and the standard library.) Reported in <a href="#id19">:issue:`719`</a> by
Mustafa Atik and Tymur Maryokhin, with a reproducible test case
provided by Timo Savola.</li>
</ul>
<a name="user-content-rc4-feb-16-2016"/>
<h2><a id="user-content-11rc4-feb-16-2016" class="anchor" href="#11rc4-feb-16-2016" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1rc4 (Feb 16, 2016)</h2>
<ul>
<li>Python 2: Using the blocking API at import time when multiple
greenlets are also importing should not lead to <code>LoopExit</code>.
Reported in <a href="#id21">:issue:`728`</a> by Garrett Heel.</li>
<li>Python 2: Don't raise <a href="#id23">:exc:`OverflowError`</a> when using the <code>readline</code>
method of the WSGI input stream without a size hint or with a large
size hint when the client is uploading a large amount of data. (This
only impacted CPython 2; PyPy and Python 3 already handled this.)
Reported in <a href="#id25">:issue:`289`</a> by ggjjlldd, with contributions by Nathan
Hoad.</li>
<li><a href="#id27">:class:`~gevent.baseserver.BaseServer`</a> and its subclasses like
<a href="#id29">:class:`~gevent.pywsgi.WSGIServer`</a> avoid allocating a new closure for
each request, reducing overhead.</li>
<li>Python 2: Under 2.7.9 and above (or when the PEP 466 SSL interfaces
are available), perform the same hostname validation that the
standard library does; previously this was skipped. Also,
reading, writing, or handshaking a closed
<a href="#id31">:class:`~ssl.SSLSocket`</a> now raises the same <a href="#id33">:exc:`ValueError`</a>
the standard library does, instead of an <a href="#id35">:exc:`AttributeError`</a>.
Found by updating gevent's copy of the standard library test cases.
Initially reported in <a href="#id37">:issue:`735`</a> by Dmitrij D. Czarkoff.</li>
<li>Python 3: Fix <a href="#id39">:meth:`~ssl.SSLSocket.unwrap`</a> and SNI callbacks.
Also raise the correct exceptions for unconnected SSL sockets and
properly validate SSL hostnames. Found via updated standard library
tests.</li>
<li>Python 3: Add missing support for <a href="#id41">:meth:`socket.socket.sendfile`</a>. Found via updated
standard library tests.</li>
<li>Python 3.4+: Add missing support for
<a href="#id43">:meth:`socket.socket.get_inheritable`</a> and
<a href="#id45">:meth:`~socket.socket.set_inheritable`</a>. Found via updated standard
library tests.</li>
</ul>
<a name="user-content-rc3-jan-04-2016"/>
<h2><a id="user-content-11rc3-jan-04-2016" class="anchor" href="#11rc3-jan-04-2016" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1rc3 (Jan 04, 2016)</h2>
<ul>
<li>Python 2: Support the new PEP 466 <a href="#id47">:mod:`ssl`</a> interfaces on any Python 2
version that supplies them, not just on the versions it officially
shipped with. Some Linux distributions, including RedHat/CentOS and
Amazon have backported the changes to older versions. Reported in
<a href="#id49">:issue:`702`</a>.</li>
<li>PyPy: An interaction between Cython compiled code and the garbage
collector caused PyPy to crash when a previously-allocated Semaphore
was used in a <code>__del__</code> method, something done in the popular
libraries <code>requests</code> and <code>urllib3</code>. Due to this and other Cython
related issues, the Semaphore class is no longer compiled by Cython
on PyPy. This means that it is now traceable and not exactly as
atomic as the Cython version, though the overall semantics should
remain the same. Reported in <a href="#id51">:issue:`704`</a> by Shaun Crampton.</li>
<li>PyPy: Optimize the CFFI backend to use less memory (two pointers per
watcher).</li>
<li>Python 3: The WSGI <code>PATH_INFO</code> entry is decoded from URL escapes
using latin-1, not UTF-8. This improves compliance with PEP 3333 and
compatibility with some frameworks like Django. Fixed in <a href="#id53">:pr:`712`</a>
by Ruben De Visscher.</li>
</ul>
<a name="user-content-rc2-dec-11-2015"/>
<h2><a id="user-content-11rc2-dec-11-2015" class="anchor" href="#11rc2-dec-11-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1rc2 (Dec 11, 2015)</h2>
<ul>
<li>Exceptions raised by gevent's SSL sockets are more consistent with
the standard library (e.g., gevent's Python 3 SSL sockets raise
<a href="#id55">:exc:`socket.timeout`</a> instead of <a href="#id57">:exc:`ssl.SSLError`</a>, a change
introduced in Python 3.2).</li>
<li>Python 2: gevent's socket's <code>sendall</code> method could completely ignore timeouts
in some cases. The timeout now refers to the total time taken by
<code>sendall</code>.</li>
<li>gevent's SSL socket's <code>sendall</code> method should no longer raise <code>SSL3_WRITE_PENDING</code>
in rare cases when sending large buffers. Reported in <a href="#id59">:issue:`317`</a>.</li>
<li><a href="#id61">:func:`gevent.signal.signal`</a> now allows resetting (SIG_DFL) and ignoring (SIG_IGN) the
SIGCHLD signal at the process level (although this may allow race
conditions with libev child watchers). Reported in <a href="#id63">:issue:`696`</a> by
Adam Ning.</li>
<li><a href="#id65">:func:`gevent.spawn_raw`</a> now accepts keyword arguments, as
previously (incorrectly) documented. Reported in <a href="#id67">:issue:`680`</a> by Ron
Rothman.</li>
<li>PyPy: PyPy 2.6.1 or later is now required (4.0.1 or later is
recommended).</li>
<li>The CFFI backend is now built and usable on CPython implementations
(except on Windows) if <code>cffi</code> is installed before gevent is
installed. To use the CFFI backend, set the environment variable
<code>GEVENT_CORE_CFFI_ONLY</code> before starting Python. This can aid
debugging in some cases and helps ensure parity across all
combinations of supported platforms.</li>
<li>The CFFI backend now calls the callback of a watcher whose <code>args</code> attribute is
set to <code>None</code>, just like the Cython backend does. It also only
allows <code>args</code> to be a tuple or <code>None</code>, again matching the Cython backend.</li>
<li>PyPy/CFFI: Fix a potential crash when using stat watchers.</li>
<li>PyPy/CFFI: Encode unicode paths for stat watchers using
<a href="#id69">:meth:`sys.getfilesystemencoding`</a> like the Cython backend.</li>
<li>The internal implementation modules <code>gevent._fileobject2</code>,
<code>gevent._fileobject3</code>, and <code>gevent._util</code> were removed. These
haven't been used or tested since 1.1b1.</li>
</ul>
<a name="user-content-rc1-nov-14-2015"/>
<h2><a id="user-content-11rc1-nov-14-2015" class="anchor" href="#11rc1-nov-14-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1rc1 (Nov 14, 2015)</h2>
<ul>
<li><p>Windows/Python 3: Finish porting the <a href="#id71">:mod:`gevent.subprocess`</a> module, fixing a
large number of failing tests. Examples of failures are in
<a href="#id73">:issue:`668`</a> and <a href="#id75">:issue:`669`</a> reported by srossross.</p>
</li>
<li><p>Python 3: The SSLSocket class should return an empty <code>bytes</code>
object on an EOF instead of a <code>str</code>. Fixed in <a href="#id77">:pr:`674`</a> by Dahoon
Kim.</p>
</li>
<li><p>Python 2: Workaround a buffering bug in the stdlib <code>io</code> module
that caused <code>FileObjectPosix</code> to be slower than necessary in some
cases. Reported in <a href="#id79">:issue:`675`</a> by WGH-.</p>
</li>
<li><p>PyPy: Fix a crash. Reported in <a href="#id81">:issue:`676`</a> by Jay Oster.</p>
<div>
<p>Caution!</p>
<p>There are some remaining, relatively rare, PyPy
crashes, but their ultimate cause is unknown (gevent,
CFFI, greenlet, the PyPy GC?). PyPy users can
contribute to <a href="#id83">:issue:`677`</a> to help track them down.</p>
</div>
</li>
<li><p>PyPy: Exceptions raised while handling an error raised by a loop
callback function behave like the CPython implementation: the
exception is printed, and the rest of the callbacks continue
processing.</p>
</li>
<li><p>If a Hub object with active watchers was destroyed and then another
one created for the same thread, which itself was then destroyed with
<code>destroy_loop=True</code>, the process could crash. Documented in
<a href="#id85">:issue:`237`</a> and fix based on <a href="#id87">:pr:`238`</a>, both by Jan-Philip Gehrcke.</p>
</li>
<li><p>Python 3: Initializing gevent's hub for the first time
simultaneously in multiple native background threads could fail with
<code>AttributeError</code> and <code>ImportError</code>. Reported in <a href="#id89">:issue:`687`</a> by
Gregory Petukhov.</p>
</li>
</ul>
<a name="user-content-b6-oct-17-2015"/>
<h2><a id="user-content-11b6-oct-17-2015" class="anchor" href="#11b6-oct-17-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1b6 (Oct 17, 2015)</h2>

<a name="user-content-b5-sep-18-2015"/>
<h2><a id="user-content-11b5-sep-18-2015" class="anchor" href="#11b5-sep-18-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1b5 (Sep 18, 2015)</h2>
<ul>
<li><a href="#id121">:mod:`gevent.subprocess`</a> works under Python 3.5. In general, Python 3.5
has preliminary support. Reported in <a href="#id123">:issue:`653`</a> by Squeaky.</li>
<li><a href="#id125">:func:`Popen.communicate &lt;gevent.subprocess.Popen.communicate&gt;`</a> honors a <code>timeout</code>
argument even if there is no way to communicate with the child
process (none of stdin, stdout and stderr were set to <code>PIPE</code>).
Noticed as part of the Python 3.5 test suite for the new function
<code>subprocess.run</code> but impacts all versions (<code>timeout</code> is an
official argument under Python 3 and a gevent extension with
slightly different semantics under Python 2).</li>
<li>Fix a possible <code>ValueError</code> from <a href="#id127">:meth:`Queue.peek &lt;gevent.queue.Queue.peek&gt;`</a>.
Reported in <a href="#id129">:issue:`647`</a> by Kevin Chen.</li>
<li>Restore backwards compatibility for using <code>gevent.signal</code> as a
callable, which, depending on the order of imports, could be broken
after the addition of the <code>gevent.signal</code> module. Reported in
<a href="#id131">:issue:`648`</a> by Sylvain Zimmer.</li>
<li>gevent blocking operations performed at the top-level of a module
after the system was monkey-patched under Python 2 could result in
raising a <a href="#id133">:exc:`~gevent.hub.LoopExit`</a> instead of completing the expected blocking
operation. Note that performing gevent blocking operations in the
top-level of a module is typically not recommended, but this
situation can arise when monkey-patching existing scripts. Reported
in <a href="#id135">:issue:`651`</a> and <a href="#id137">:issue:`652`</a> by Mike Kaplinskiy.</li>
<li><code>SIGCHLD</code> and <code>waitpid</code> now work for the pids returned by the
(monkey-patched) <code>os.forkpty</code> and <code>pty.fork</code> functions in the
same way they do for the <code>os.fork</code> function. Reported in
<a href="#id139">:issue:`650`</a> by Erich Heine.</li>
<li><a href="#id141">:class:`~gevent.pywsgi.WSGIServer`</a> and
<a href="#id143">:class:`~gevent.pywsgi.WSGIHandler`</a> do a better job detecting and
reporting potential encoding errors for headers and the status line
during <a href="#id145">:meth:`~gevent.pywsgi.WSGIHandler.start_response`</a> as recommended by the <a href="https://www.python.org/dev/peps/pep-3333/#the-start-response-callable">WSGI
specification</a>. In addition, under Python 2, unnecessary encodings
and decodings (often a trip through the ASCII encoding) are avoided
for conforming applications. This is an enhancement of an already
documented and partially enforced constraint: beginning in 1.1a1,
under Python 2, <code>u'abc'</code> would typically previously have been
allowed, but <code>u'\u1f4a3'</code> would not; now, neither will be allowed,
more closely matching the specification, improving debugability and
performance and allowing for better error handling both by the
application and by gevent (previously, certain encoding errors could
result in gevent writing invalid/malformed HTTP responses). Reported
by Greg Higgins and Carlos Sanchez.</li>
<li>Code coverage by tests is now reported on <a href="https://coveralls.io/github/gevent/gevent">coveralls.io</a>.</li>
</ul>
<a name="user-content-b4-sep-4-2015"/>
<h2><a id="user-content-11b4-sep-4-2015" class="anchor" href="#11b4-sep-4-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1b4 (Sep 4, 2015)</h2>
<ul>
<li>Detect and raise an error for several important types of
programming errors even if Python interpreter optimizations are
enabled with <code>-O</code> or <code>PYTHONOPTIMIZE</code>. Previously these would go
undetected if optimizations were enabled, potentially leading to
erratic, difficult to debug behaviour.</li>
<li>Fix an <code>AttributeError</code> from <code>gevent.queue.Queue</code> when <code>peek</code>
was called on an empty <code>Queue</code>. Reported in <a href="#id147">:issue:`643`</a> by michaelvol.</li>
<li>Make <code>SIGCHLD</code> handlers specified to <a href="#id149">:func:`gevent.signal.signal`</a> work with
the child watchers that are used by default. Also make
<a href="#id151">:func:`gevent.os.waitpid`</a> work with a first argument of -1. (Also
applies to the corresponding monkey-patched stdlib functions.)
Noted by users of gunicorn.</li>
<li>Under Python 2, any timeout set on a socket would be ignored when
using the results of <code>socket.makefile</code>. Reported in <a href="#id153">:issue:`644`</a>
by Karan Lyons.</li>
</ul>
<a name="user-content-b3-aug-16-2015"/>
<h2><a id="user-content-11b3-aug-16-2015" class="anchor" href="#11b3-aug-16-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1b3 (Aug 16, 2015)</h2>
<ul>
<li>Fix an <code>AttributeError</code> from <code>gevent.monkey.patch_builtins</code> on
Python 2 when the <a href="http://python-future.org">future</a> library is also installed. Reported by
Carlos Sanchez.</li>
<li>PyPy: Fix a <code>DistutilsModuleError</code> or <code>ImportError</code> if the CFFI
module backing <code>gevent.core</code> needs to be compiled when the hub is
initialized (due to a missing or invalid <code>__pycache__</code> directory).
Now, the module will be automtically compiled when gevent is
imported (this may produce compiler output on stdout). Reported in
<a href="#id155">:issue:`619`</a> by Thinh Nguyen and <a href="#id157">:issue:`631`</a> by Andy Freeland, with
contributions by Jay Oster and Matt Dupre.</li>
<li>PyPy: Improve the performance of <code>gevent.socket.socket:sendall</code>
with large inputs. <a href="https://raw.githubusercontent.com/gevent/gevent/master/greentest/bench_sendall.py">bench_sendall.py</a> now performs about as well on
PyPy as it does on CPython, an improvement of 10x (from ~60MB/s to
~630MB/s). See this <a href="https://bitbucket.org/pypy/pypy/issues/2091/non-blocking-socketsend-slow-gevent">pypy bug</a> for details.</li>
<li>Fix a possible <code>TypeError</code> when calling <code>gevent.socket.wait</code>.
Reported in #635 by lanstin.</li>
<li><code>gevent.socket.socket:sendto</code> properly respects the socket's
blocking status (meaning it can raise EWOULDBLOCK now in cases it
wouldn't have before). Reported in <a href="#id159">:pr:`634`</a> by Mike Kaplinskiy.</li>
<li>Common lookup errors using the <a href="#id161">:mod:`threaded resolver
&lt;gevent.resolver_thread&gt;`</a> are no longer always printed to stderr
since they are usually out of the programmer's control and caught
explicitly. (Programming errors like <code>TypeError</code> are still
printed.) Reported in <a href="#id163">:issue:`617`</a> by Jay Oster and Carlos Sanchez.</li>
<li>PyPy: Fix a <code>TypeError</code> from <code>gevent.idle()</code>. Reported in
<a href="#id165">:issue:`639`</a> by chilun2008.</li>
<li>The <a href="#id167">:func:`~gevent.pool.Pool.imap_unordered`</a> methods of a pool-like
object support a <code>maxsize</code> parameter to limit the number of
results buffered waiting for the consumer. Reported in <a href="#id169">:issue:`638`</a>
by Sylvain Zimmer.</li>
<li>The class <a href="#id171">:class:`gevent.queue.Queue`</a> now consistently orders multiple
blocked waiting <code>put</code> and <code>get</code> callers in the order they
arrived. Previously, due to an implementation quirk this was often
roughly the case under CPython, but not under PyPy. Now they both
behave the same.</li>
<li>The class <a href="#id173">:class:`gevent.queue.Queue`</a> now supports the <a href="#id175">:func:`len`</a> function.</li>
</ul>
<a name="user-content-b2-aug-5-2015"/>
<h2><a id="user-content-11b2-aug-5-2015" class="anchor" href="#11b2-aug-5-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1b2 (Aug 5, 2015)</h2>

<a name="user-content-b1-jul-17-2015"/>
<h2><a id="user-content-11b1-jul-17-2015" class="anchor" href="#11b1-jul-17-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1b1 (Jul 17, 2015)</h2>
<ul>
<li><code>setup.py</code> can be run from a directory containing spaces. Reported
in <a href="#id199">:issue:`319`</a> by Ivan Smirnov.</li>
<li><code>setup.py</code> can build with newer versions of clang on OS X. They
enforce the distinction between CFLAGS and CPPFLAGS.</li>
<li><code>gevent.lock.Semaphore</code> is atomic on PyPy, just like it is on
CPython. This comes at a small performance cost on PyPy.</li>
<li>Fixed regression that failed to set the <code>successful</code> value to
False when killing a greenlet before it ran with a non-default
exception. Fixed in <a href="#id201">:pr:`608`</a> by Heungsub Lee.</li>
<li>libev's child watchers caused <a href="#id203">:func:`os.waitpid`</a> to become unreliable
due to the use of signals on POSIX platforms. This was especially
noticeable when using <a href="#id205">:mod:`gevent.subprocess`</a> in combination with
<code>multiprocessing</code>. Now, the monkey-patched <code>os</code> module provides
a <a href="#id207">:func:`~gevent.os.waitpid`</a> function that seeks to ameliorate this. Reported in
<a href="#id209">:issue:`600`</a> by champax and <a href="#id211">:issue:`452`</a> by Łukasz Kawczyński.</li>
<li>On platforms that implement <a href="#id213">:class:`select.poll`</a>, provide a
gevent-friendly <a href="#id215">:class:`gevent.select.poll`</a> and corresponding
monkey-patch. Implemented in <a href="#id217">:pr:`604`</a> by Eddi Linder.</li>
<li>Allow passing of events to the io callback under PyPy. Reported in
<a href="#id219">:issue:`531`</a> by M. Nunberg and implemented in <a href="#id221">:pr:`604`</a>.</li>
<li><a href="#id223">:func:`gevent.thread.allocate_lock`</a> (and so a monkey-patched standard
library <a href="#id225">:func:`~thread.allocate_lock`</a>) more closely matches the behaviour of the
builtin: an unlocked lock cannot be released, and attempting to do
so throws the correct exception (<code>thread.error</code> on Python 2,
<code>RuntimeError</code> on Python 3). Previously, over-releasing a lock was
silently ignored. Reported in <a href="#id227">:issue:`308`</a> by Jędrzej Nowak.</li>
<li><a href="#id229">:class:`gevent.fileobject.FileObjectThread`</a> uses the threadpool to close
the underling file-like object. Reported in <a href="#id231">:issue:`201`</a> by
vitaly-krugl.</li>
<li>Malicious or malformed HTTP chunked transfer encoding data sent to
the <a href="#id233">:class:`pywsgi handler &lt;gevent.pywsgi.WSGIHandler&gt;`</a> is handled more robustly, resulting in
"HTTP 400 bad request" responses instead of a 500 error or, in the
worst case, a server-side hang. Reported in <a href="#id235">:issue:`229`</a> by Björn
Lindqvist.</li>
<li>Importing the standard library <code>threading</code> module <em>before</em> using
<code>gevent.monkey.patch_all()</code> no longer causes Python 3.4 to fail to
get the <code>repr</code> of the main thread, and other CPython platforms to
return an unjoinable DummyThread. (Note that this is not
recommended.) Reported in <a href="#id237">:issue:`153`</a>.</li>
<li>Under Python 2, use the <code>io</code> package to implement
<a href="#id239">:class:`~gevent.fileobject.FileObjectPosix`</a>. This unifies the code with the Python 3
implementation, and fixes problems with using <code>seek()</code>. See
<a href="#id241">:issue:`151`</a>.</li>
<li>Under Python 2, importing a module that uses gevent blocking
functions at its top level from multiple greenlets no longer
produces import errors (Python 3 handles this case natively).
Reported in <a href="#id243">:issue:`108`</a> by shaun and initial fix based on code by
Sylvain Zimmer.</li>
<li><a href="#id245">:func:`gevent.spawn`</a>, <a href="#id247">:func:`spawn_raw`</a> and <a href="#id249">:func:`spawn_later`</a>, as well as the
<a href="#id251">:class:`~gevent.Greenlet`</a> constructor, immediately produce useful <code>TypeErrors</code>
if asked to run something that cannot be run. Previously, the
spawned greenlet would die with an uncaught <code>TypeError</code> the first
time it was switched to. Reported in <a href="#id253">:issue:`119`</a> by stephan.</li>
<li>Recursive use of <a href="#id255">:meth:`ThreadPool.apply
&lt;gevent.threadpool.ThreadPool.apply&gt;`</a> no longer raises a
<code>LoopExit</code> error (using <code>ThreadPool.spawn</code> and then <code>get</code> on
the result still could; you must be careful to use the correct hub).
Reported in <a href="#id257">:issue:`131`</a> by 8mayday.</li>
<li>When the <a href="#id259">:mod:`threading`</a> module is <a href="#id261">:func:`monkey-patched
&lt;gevent.monkey.patch_thread&gt;`</a>, the module-level lock in the
<a href="#id263">:mod:`logging`</a> module is made greenlet-aware, as are the instance
locks of any configured handlers. This makes it safer to import
modules that use the standard pattern of creating a module-level
<a href="#id265">:class:`~logging.Logger`</a> instance before monkey-patching.
Configuring <code>logging</code> with a basic configuration and then
monkey-patching is also safer (but not configurations that involve
such things as the <code>SocketHandler</code>).</li>
<li>Fix monkey-patching of <a href="#id267">:class:`threading.RLock`</a> under Python 3.</li>
<li>Under Python 3, monkey-patching at the top-level of a module that
was imported by another module could result in a <a href="#id269">:exc:`RuntimeError`</a>
from <a href="#id271">:mod:`importlib`</a>. Reported in <a href="#id273">:issue:`615`</a> by Daniel Mizyrycki.
(The same thing could happen under Python 2 if a <code>threading.RLock</code>
was held around the monkey-patching call; this is less likely but
not impossible with import hooks.)</li>
<li>Fix configuring c-ares for a 32-bit Python when running on a 64-bit
platform. Reported in <a href="#id275">:issue:`381`</a> and fixed in <a href="#id277">:pr:`616`</a> by Chris
Lane. Additional fix in <a href="#id279">:pr:`626`</a> by Kevin Chen.</li>
<li>(Experimental) Let the <a href="#id281">:class:`pywsgi.WSGIServer`</a> accept a
<a href="#id283">:class:`logging.Logger`</a> instance for its <code>log</code> and (new) <code>error_log</code>
parameters. Take care that the system is fully monkey-patched very
early in the process's lifetime if attempting this, and note that
non-file handlers have not been tested. Fixes <a href="#id285">:issue:`106`</a>.</li>
</ul>
<a name="user-content-a2-jul-8-2015"/>
<h2><a id="user-content-11a2-jul-8-2015" class="anchor" href="#11a2-jul-8-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1a2 (Jul 8, 2015)</h2>
<ul>
<li><code>gevent.threadpool.ThreadPool.imap</code> and <code>imap_unordered</code> now
accept multiple iterables.</li>
<li>(Experimental) Exceptions raised from iterating using the
<code>ThreadPool</code> or <code>Group</code> mapping/application functions should now
have the original traceback.</li>
<li><a href="#id287">:meth:`gevent.threadpool.ThreadPool.apply`</a> now raises any exception
raised by the called function, the same as
<a href="#id289">:class:`~gevent.pool.Group`</a>/<a href="#id291">:class:`~gevent.pool.Pool`</a> and the
builtin <a href="#id293">:func:`apply`</a> function. This obsoletes the undocumented
<code>apply_e</code> function. Original PR <a href="#id295">:issue:`556`</a> by Robert Estelle.</li>
<li>Monkey-patch the <code>selectors</code> module from <code>patch_all</code> and
<code>patch_select</code> on Python 3.4. See <a href="#id297">:issue:`591`</a>.</li>
<li>Additional query functions for the <a href="#id299">:mod:`gevent.monkey`</a> module
allow knowing what was patched. Discussed in <a href="#id301">:issue:`135`</a> and
implemented in <a href="#id303">:pr:`325`</a> by Nathan Hoad.</li>
<li>In non-monkey-patched environments under Python 2.7.9 or above or
Python 3, using a gevent SSL socket could cause the greenlet to
block. See <a href="#id305">:issue:`597`</a> by David Ford.</li>
<li><a href="#id307">:meth:`gevent.socket.socket.sendall`</a> supports arbitrary objects that
implement the buffer protocol (such as ctypes structures), just like
native sockets. Reported in <a href="#id309">:issue:`466`</a> by tzickel.</li>
<li>Added support for the <code>onerror</code> attribute present in CFFI 1.2.0
for better signal handling under PyPy. Thanks to Armin Rigo and Omer
Katz. (See <a href="https://bitbucket.org/cffi/cffi/issue/152/handling-errors-from-signal-handlers-in">https://bitbucket.org/cffi/cffi/issue/152/handling-errors-from-signal-handlers-in</a>)</li>
<li>The <a href="#id311">:mod:`gevent.subprocess`</a> module is closer in behaviour to the
standard library under Python 3, at least on POSIX. The
<code>pass_fds</code>, <code>restore_signals</code>, and <code>start_new_session</code>
arguments are now implemented, as are the <code>timeout</code> parameters
to various functions. Under Python 2, the previously undocumented
<code>timeout</code> parameter to <a href="#id313">:meth:`Popen.communicate
&lt;gevent.subprocess.Popen.communicate&gt;`</a> raises an exception like its
Python 3 counterpart.</li>
<li>An exception starting a child process with the <a href="#id315">:mod:`gevent.subprocess`</a>
module no longer leaks file descriptors. Reported in <a href="#id317">:pr:`374`</a> by 陈小玉.</li>
<li>The example <code>echoserver.py</code> no longer binds to the standard X11
TCP port. Reported in <a href="#id319">:issue:`485`</a> by minusf.</li>
<li><a href="#id321">:func:`gevent.iwait`</a> no longer throws <a href="#id323">:exc:`~gevent.hub.LoopExit`</a> if the caller
switches greenlets between return values. Reported and initial patch
in <a href="#id325">:issue:`467`</a> by Alexey Borzenkov.</li>
<li>The default threadpool and default threaded resolver work in a
forked child process, such as with <a href="#id327">:class:`multiprocessing.Process`</a>.
Previously the child process would hang indefinitely. Reported in
<a href="#id329">:issue:`230`</a> by Lx Yu.</li>
<li>Fork watchers are more likely to (eventually) get called in a
multi-threaded program (except on Windows). See <a href="#id331">:issue:`154`</a>.</li>
<li><a href="#id333">:func:`gevent.killall`</a> accepts an arbitrary iterable for the greenlets
to kill. Reported in <a href="#id335">:issue:`404`</a> by Martin Bachwerk; seen in
combination with older versions of simple-requests.</li>
<li><a href="#id337">:class:`gevent.local.local`</a> objects are now eligible for garbage
collection as soon as the greenlet finishes running, matching the
behaviour of the built-in <a href="#id339">:class:`threading.local`</a> (when implemented
natively). Reported in <a href="#id341">:issue:`387`</a> by AusIV.</li>
<li>Killing a greenlet (with <a href="#id343">:func:`gevent.kill`</a> or
<a href="#id345">:meth:`gevent.Greenlet.kill`</a>) before it is actually started and
switched to now prevents the greenlet from ever running, instead of
raising an exception when it is later switched to. See <a href="#id347">:issue:`330`</a>
reported by Jonathan Kamens.</li>
</ul>
<a name="user-content-a1-jun-29-2015"/>
<h2><a id="user-content-11a1-jun-29-2015" class="anchor" href="#11a1-jun-29-2015" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>1.1a1 (Jun 29, 2015)</h2>
<ul>
<li><p>Add support for Python 3.3 and 3.4. Many people have contributed to
this effort, including but not limited to Fantix King, hashstat,
Elizabeth Myers, jander, Luke Woydziak, and others. See <a href="#id349">:issue:`38`</a>.</p>
</li>
<li><p>Add support for PyPy. See <a href="#id351">:issue:`248`</a>. Note that for best results,
you'll need a very recent PyPy build including CFFI 1.2.0.</p>
</li>
<li><p>Drop support for Python 2.5. Python 2.5 users can continue to use
gevent 1.0.x.</p>
</li>
<li><p>Fix <a href="#id353">:func:`gevent.joinall`</a> to not ignore <code>count</code> when
<code>raise_error</code> is False. See <a href="#id355">:pr:`512`</a> by Ivan Diao.</p>
</li>
<li><p>Fix <a href="#id357">:class:`gevent.subprocess.Popen`</a> to not ignore the <code>bufsize</code> argument. Note
that this changes the (platform dependent) default, typically from
buffered to unbuffered. See <a href="#id359">:pr:`542`</a> by Romuald Brunet.</p>
</li>
<li><p>Upgraded c-ares to 1.10.0. See <a href="#id361">:pr:`579`</a> by Omer Katz.</p>
<div>
<p>Caution!</p>
<p>The c-ares <code>configure</code> script is now more strict about the
contents of environment variables such as <code>CFLAGS</code> and <code>LDFLAGS</code>
and they may have to be modified (for example, <code>CFLAGS</code> is no
longer allowed to include <code>-I</code> directives, which must instead be
placed in <code>CPPFLAGS</code>).</p>
</div>
</li>
<li><p>Add a <code>count</code> argument to <a href="#id363">:func:`gevent.iwait`</a>. See <a href="#id365">:pr:`482`</a> by
wiggin15.</p>
</li>
<li><p>Add a <code>timeout</code> argument to <a href="#id367">:meth:`gevent.queue.JoinableQueue.join`</a>
which now returns whether all items were waited for or not.</p>
</li>
<li><p><code>gevent.queue.JoinableQueue</code> treats <code>items</code> passed to
<code>__init__</code> as unfinished tasks, the same as if they were <code>put</code>.
Initial <a href="#id369">:pr:`554`</a> by DuLLSoN.</p>
</li>
<li><p><code>gevent.pywsgi</code> no longer prints debugging information for the
normal conditions of a premature client disconnect. See <a href="#id371">:issue:`136`</a>,
fixed in <a href="#id373">:pr:`377`</a> by Paul Collier.</p>
</li>
<li><p>(Experimental.) Waiting on or getting results from greenlets that
raised exceptions now usually raises the original traceback. This
should assist things like Sentry to track the original problem. See
<a href="#id375">:issue:`450`</a> and <a href="#id377">:issue:`528`</a> by Rodolfo and Eddi Linder and
<a href="#id379">:issue:`240`</a> by Erik Allik.</p>
</li>
<li><p>Upgrade to libev 4.20. See <a href="#id381">:pr:`590`</a> by Peter Renström.</p>
</li>
<li><p>Fix <code>gevent.baseserver.BaseServer</code> to be printable when its
<code>handle</code> function is an instancemethod of itself. See <a href="#id383">:pr:`501`</a> by Joe
Jevnik.</p>
</li>
<li><p>Make the <code>acquire</code> method of <code>gevent.lock.DummySemaphore</code> always
return True, supporting its use-case as an "infinite" or unbounded
semaphore providing no exclusion, and allowing the idiom <code>if
sem.acquire(): ...</code>. See <a href="#id385">:pr:`544`</a> by Mouad Benchchaoui.</p>
</li>
<li><p>Patch <code>subprocess</code> by default in <code>gevent.monkey.patch_all</code>. See
<a href="#id387">:issue:`446`</a>.</p>
</li>
<li><p><code>gevent.pool.Group.imap</code> and <code>imap_unordered</code> now accept
multiple iterables like <code>itertools.imap</code>. <a href="#id389">:issue:`565`</a> reported by
Thomas Steinacher.</p>
</li>
<li><p><em>Compatibility note</em>: <code>gevent.baseserver.BaseServer</code> and
its subclass <code>gevent.server.StreamServer</code> now deterministically
close the client socket when the request handler returns.
Previously, the socket was left at the mercies of the garbage
collector; under CPython 2.x this meant when the last reference went
away, which was usually, but not necessarily, when the request
handler returned, but under PyPy it was some arbitrary point in the
future and under CPython 3.x a ResourceWarning could be generated.
This was undocumented behaviour, and the client socket could be kept
open after the request handler returned either accidentally or intentionally.</p>
</li>
<li><p><em>Compatibility note</em>: <code>pywsgi</code> now ensures that headers can be
encoded in latin-1 (ISO-8859-1). This improves adherence to the HTTP
standard (and is necessary under Python 3). Under certain
conditions, previous versions could have allowed non-ISO-8859-1
headers to be sent, but their interpretation by a conforming
recipient is unknown; now, a UnicodeError will be raised. See <a href="#id391">:issue:`614`</a>.</p>
</li>
</ul>
<a name="user-content-release-1-0-2"/>
<h2><a id="user-content-release-102" class="anchor" href="#release-102" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0.2</h2>
<ul>
<li>Fix LifoQueue.peek() to return correct element. <a href="#id393">:pr:`456`</a>. Patch by Christine Spang.</li>
<li>Upgrade to libev 4.19</li>
<li>Remove SSL3 entirely as default TLS protocol</li>
<li>Import socket on Windows (closes <a href="#id395">:issue:`459`</a>)</li>
<li>Fix C90 syntax error (<a href="#id397">:pr:`449`</a>)</li>
<li>Add compatibility with Python 2.7.9's SSL changes. <a href="#id399">:issue:`477`</a>.</li>
</ul>
<a name="user-content-release-1-0-1"/>
<h2><a id="user-content-release-101" class="anchor" href="#release-101" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0.1</h2>
<ul>
<li>Fix <a href="#id401">:issue:`423`</a>: Pool's imap/imap_unordered could hang forever. Based on patch and test by Jianfei Wang.</li>
</ul>
<a name="user-content-release-1-0-nov-26-2013"/>
<h2><a id="user-content-release-10-nov-26-2013" class="anchor" href="#release-10-nov-26-2013" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0 (Nov 26, 2013)</h2>
<ul>
<li>pywsgi: Pass copy of error list instead of direct reference. Thanks to Jonathan Kamens, Matt Iversen.</li>
<li>Ignore the autogenerated doc/gevent.*.rst files. Patch by Matthias Urlichs.</li>
<li>Fix cythonpp.py on Windows. Patch by Jeryn Mathew.</li>
<li>Remove gevent.run (use gevent.wait).</li>
</ul>
<a name="user-content-release-1-0rc3-sep-14-2013"/>
<h2><a id="user-content-release-10rc3-sep-14-2013" class="anchor" href="#release-10rc3-sep-14-2013" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0rc3 (Sep 14, 2013)</h2>
<ul>
<li>Fix <a href="#id403">:issue:`251`</a>: crash in gevent.core when accessing destroyed loop.</li>
<li>Fix <a href="#id405">:issue:`235`</a>: Replace self._threadpool.close() with self._threadpool.kill() in hub.py. Patch by Jan-Philip Gehrcke.</li>
<li>Remove unused timeout from select.py (<a href="#id407">:issue:`254`</a>). Patch by Saúl Ibarra Corretgé.</li>
<li>Rename Greenlet.link()'s argument to 'callback' (closes <a href="#id409">:issue:`244`</a>).</li>
<li>Fix parallel build (<a href="#id411">:issue:`193`</a>). Patch by Yichao Yu.</li>
<li>Fix <a href="#id413">:issue:`263`</a>: potential UnboundLocalError: 'length' in gevent.pywsgi.</li>
<li>Simplify psycopg2_pool.py (<a href="#id415">:issue:`239`</a>). Patch by Alex Gaynor.</li>
<li>pywsgi: allow Content-Length in GET requests (<a href="#id417">:issue:`264`</a>). Patch by 陈小玉.</li>
<li>documentation fixes (<a href="#id419">:issue:`281`</a>) [philipaconrad].</li>
<li>Fix old documentation about default blocking behavior of kill, killall (<a href="#id421">:issue:`306`</a>). Patch by Daniel Farina.</li>
<li>Fix <a href="#id423">:issue:`6`</a>: patch sys after thread. Patch by Anton Patrushev.</li>
<li>subprocess: fix check_output on Py2.6 and older (<a href="#id425">:issue:`265`</a>). Thanks to Marc Sibson for test.</li>
<li>Fix <a href="#id427">:issue:`302`</a>: "python -m gevent.monkey" now sets __file__ properly.</li>
<li>pywsgi: fix logging when bound on unix socket (<a href="#id429">:issue:`295`</a>). Thanks to Chris Meyers, Eugene Pankov.</li>
<li>pywsgi: readout request data to prevent ECONNRESET</li>
<li>Fix <a href="#id431">:issue:`303`</a>: 'requestline' AttributeError in pywsgi. Thanks to Neil Chintomby.</li>
<li>Fix <a href="#id433">:issue:`79`</a>: Properly handle HTTP versions. Patch by Luca Wehrstedt.</li>
<li>Fix <a href="#id435">:issue:`216`</a>: propagate errors raised by Pool.map/imap</li>
</ul>
<a name="user-content-release-1-0rc2-dec-10-2012"/>
<h2><a id="user-content-release-10rc2-dec-10-2012" class="anchor" href="#release-10rc2-dec-10-2012" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0rc2 (Dec 10, 2012)</h2>
<ul>
<li>Fixed <a href="#id437">:issue:`210`</a>: callbacks were not run for non-default loop (bug introduced in 1.0rc1).</li>
<li>patch_all() no longer patches subprocess unless subprocess=True is passed.</li>
<li>Fixed AttributeError in hub.Waiter.</li>
<li>Fixed <a href="#id439">:issue:`181`</a>: make hidden imports visible to freezing tools like py2exe. Patch by Ralf Schmitt.</li>
<li>Fixed <a href="#id441">:issue:`202`</a>: periodically yield when running callbacks (sleep(0) cannot block the event loop now).</li>
<li>Fixed <a href="#id443">:issue:`204`</a>: os.tp_read/tp_write did not propogate errors to the caller.</li>
<li>Fixed <a href="#id445">:issue:`217`</a>: do not set SO_REUSEADDR on Windows.</li>
<li>Fixed bug in --module argument for gevent.monkey. Patch by Örjan Persson.</li>
<li>Remove warning from threadpool.py about mixing fork() and threads.</li>
<li>Cleaned up hub.py from code that was needed to support older greenlets. Patch by Saúl Ibarra Corretgé.</li>
<li>Allow for explicit default loop creation via get_hub(default=True). Patch by Jan-Philip Gehrcke.</li>
</ul>
<a name="user-content-release-1-0rc1-oct-30-2012"/>
<h2><a id="user-content-release-10rc1-oct-30-2012" class="anchor" href="#release-10rc1-oct-30-2012" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0rc1 (Oct 30, 2012)</h2>
<ul>
<li>Fixed hub.switch() not to touch stacktrace when switching. greenlet restores the exception information correctly since version 0.3.2. gevent now requires greenlet &gt;= 0.3.2</li>
<li>Added gevent.wait() and gevent.iwait(). This is like gevent.joinall() but supports more objects, including Greenlet, Event, Semaphore, Popen. Without arguments it waits for the event loop to finish (previously gevent.run() did that). gevent.run will be removed before final release and gevent.joinall() might be deprecated.</li>
<li>Reimplemented loop.run_callback with a list and a single prepare watcher; this fixes the order of spawns and improves performance a little.</li>
<li>Fixes Semaphore/Lock not to init hub in __init__, so that it's possible to have module-global locks without initializing the hub. This fixes monkey.patch_all() not to init the hub.</li>
<li>New implementation of callbacks that executes them in the order they were added. core.loop.callback is removed.</li>
<li>Fixed 2.5 compatibility.</li>
<li>Fixed crash on Windows when request 'prev' and 'attr' attributes of 'stat' watcher. The attribute access still fails, but now with an exception.</li>
<li>Added known_failures.txt that lists all the tests that fail. It can be used by testrunner.py via expected option. It's used when running the test suite in travis.</li>
<li>Fixed socket, ssl and fileobject to not mask EBADF error - it is now propogated to the caller. Previously EBADF was converted to empty read/write. Thanks to Vitaly Kruglikov</li>
<li>Removed gevent.event.waitall()</li>
<li>Renamed FileObjectThreadPool -&gt; FileObjectThread</li>
<li>Greenlet: Fixed <a href="#id447">:issue:`143`</a>: greenlet links are now executed in the order they were added</li>
<li>Synchronize access to FileObjectThread with Semaphore</li>
<li>EINVAL is no longer handled in fileobject.</li>
</ul>
<p>monkey:</p>
<ul>
<li>Fixed <a href="#id449">:issue:`178`</a>: disable monkey patch os.read/os.write</li>
<li>Fixed monkey.patch_thread() to patch threading._DummyThread to avoid leak in threading._active. Original patch by Wil Tan.</li>
<li>added Event=False argument to patch_all() and patch_thread</li>
<li>added patch_sys() which patches stdin, stdout, stderr with FileObjectThread wrappers. Experimental / buggy.</li>
<li>monkey patching everything no longer initializes the hub/event loop.</li>
</ul>
<p>socket:</p>
<ul>
<li>create_connection: do not lookup IPv6 address if IPv6 is unsupported. Patch by Ralf Schmitt.</li>
</ul>
<p>pywsgi:</p>
<ul>
<li>Fixed <a href="#id451">:issue:`86`</a>: bytearray is now supported. Original patch by Aaron Westendorf.</li>
<li>Fixed <a href="#id453">:issue:`116`</a>: Multiline HTTP headers are now handled properly. Patch by Ralf Schmitt.</li>
</ul>
<p>subprocess:</p>
<ul>
<li>Fixed Windows compatibility. The wait() method now also supports 'timeout' argument on Windows.</li>
<li>Popen: Added rawlink() method, which makes Popen objects supported by gevent.wait(). Updated examples/processes.py</li>
<li>Fixed <a href="#id455">:issue:`148`</a>: read from errpipe_read in small chunks, to avoid trigger EINVAL issue on Mac OS X. Patch by Vitaly Kruglikov</li>
<li>Do os._exit() in "finally" section to avoid executing unrelated code. Patch by Vitaly Kruglikov.</li>
</ul>
<p>resolver_ares:</p>
<ul>
<li>improve getaddrinfo: For string ports (e.g. "http") resolver_ares/getaddrinfo previously only checked either getservbyname(port, "tcp") or getservbyname(port, "udp"), but never both. It now checks both of them.</li>
<li>gevent.ares.channel now accepts strings as arguments</li>
<li>upgraded c-ares to cares-1_9_1-12-g805c736</li>
<li>it is now possible to configure resolver_ares directly with environ, like GEVENTARES_SERVERS</li>
</ul>
<p>os:</p>
<ul>
<li>Renamed threadpool_read/write to tp_read/write.</li>
<li>Removed posix_read, posix_write.</li>
<li>Added nb_read, nb_write, make_nonblocking.</li>
</ul>
<p>hub:</p>
<ul>
<li>The system error is now raised immediatelly in main greenlet in all cases.</li>
<li>Dropped support for old greenlet versions (need &gt;= 0.3.2 now)</li>
</ul>
<p>core:</p>
<ul>
<li>allow 'callback' property of watcher to be set to None. "del w.callback" no longer works.</li>
<li>added missing 'noinotify' flag</li>
</ul>
<p>Misc:</p>
<ul>
<li>gevent.thread: allocate_lock is now an alias for LockType/Semaphore. That way it does not fail when being used as class member.</li>
<li>Updated greentest.py to start timeouts with ref=False.</li>
<li>pool: remove unused get_values() function</li>
<li>setup.py now recognizes GEVENTSETUP_EV_VERIFY env var which sets EV_VERIFY macro when compiling</li>
<li>Added a few micro benchmarks</li>
<li>stdlib tests that we care about are now included in greentest/2.x directories, so we don't depend on them being installed system-wide</li>
<li>updated util/makedist.py</li>
<li>the testrunner was completely rewritten.</li>
</ul>
<a name="user-content-release-1-0b4-sep-6-2012"/>
<h2><a id="user-content-release-10b4-sep-6-2012" class="anchor" href="#release-10b4-sep-6-2012" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0b4 (Sep 6, 2012)</h2>
<ul>
<li>Added gevent.os module with 'read' and 'write' functions. Patch by Geert Jansen.</li>
<li>Moved gevent.hub.fork to gevent.os module (it is still available as gevent.fork).</li>
<li>Fixed <a href="#id457">:issue:`148`</a>: Made fileobject handle EINVAL, which is randomly raised by os.read/os.write on Mac OS X. Thanks to Mark Hingston.</li>
<li>Fixed <a href="#id459">:issue:`150`</a>: gevent.fileobject.SocketAdapter.sendall() could needlessly wait for write event on the descriptor. Original patch by Mark Hingston.</li>
<li>Fixed AttributeError in baseserver. In case of error, start() would call kill() which was renamed to close(). Thanks to Vitaly Kruglikov.</li>
</ul>
<a name="user-content-release-1-0b3-jul-27-2012"/>
<h2><a id="user-content-release-10b3-jul-27-2012" class="anchor" href="#release-10b3-jul-27-2012" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0b3 (Jul 27, 2012)</h2>
<ul>
<li>New gevent.subprocess module</li>
<li>New gevent.fileobject module</li>
<li>Fixed ThreadPool to discard references of the objects passed to it (function, arguments) asap. Previously they could be stored for unlimited time until the thread gets a new job.</li>
<li>Fixed <a href="#id461">:issue:`138`</a>: gevent.pool.Pool().imap_unordered hangs with an empty iterator. Thanks to exproxus.</li>
<li>Fixed <a href="#id463">:issue:`127`</a>: ssl.py could raise TypeError in certain cases. Thanks to Johan Mjones.</li>
<li>Fixed socket.makefile() to keep the timeout setting of the socket instance. Thanks to Colin Marc.</li>
<li>Added 'copy()' method to queues.</li>
<li>The 'nochild' event loop config option is removed. The install_sigchld offer more flexible way of enabling child watchers.</li>
<li>core: all watchers except for 'child' now accept new 'priority' keyword argument</li>
<li>gevent.Timeout accepts new arguments: 'ref' and 'priority'. The default priority for Timeout is -1.</li>
<li>Hub.wait() uses Waiter now instead of raw switching</li>
<li>Updated libev to the latest CVS version</li>
<li>Made pywsgi to raise an AssertionError if non-zero content-length is passed to start_response(204/304) or if non-empty body is attempted to be written for 304/204 response</li>
<li>Removed pywsgi feature to capitalize the passed headers.</li>
<li>Fixed util/cythonpp.py to work on python3.2 (<a href="#id465">:issue:`123`</a>). Patch by Alexandre Kandalintsev.</li>
<li>Added 'closed' readonly property to socket.</li>
<li>Added 'ref' read/write property to socket.</li>
<li>setup.py now parses CARES_EMBED and LIBEV_EMBED parameters, in addition to EMBED.</li>
<li>gevent.reinit() and gevent.fork() only reinit hub if it was created and do not create it themselves</li>
<li>Fixed setup.py not to add libev and c-ares to include dirs in non-embed mode. Patch by Ralf Schmitt.</li>
<li>Renamed util/make_dist.py to util/makedist.py</li>
<li>testrunner.py now saves more information about the system; the stat printing functionality is moved to a separate util/stat.py script.</li>
</ul>
<a name="user-content-release-1-0b2-apr-11-2012"/>
<h2><a id="user-content-release-10b2-apr-11-2012" class="anchor" href="#release-10b2-apr-11-2012" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0b2 (Apr 11, 2012)</h2>
<p>Major and backward-incompatible changes:</p>
<ul>
<li>Made the threadpool-based resolver the default. To enable the ares-based resolver, set GEVENT_RESOLVER=ares env var.</li>
<li>Added support for child watchers (not available on Windows).
- Libev loop now reaps all children by default.
- If NOCHILD flag is passed to the loop, child watchers and child reaping are disabled.</li>
<li>Renamed gevent.coros to gevent.lock. The gevent.coros is still available but deprecated.</li>
<li>Added 'stat' watchers to loop.</li>
<li>The setup.py now recognizes gevent_embed env var. When set to "no", bundled c-ares and libev are ignored.</li>
<li>Added optional 'ref' argument to sleep(). When ref=false, the watchers created by sleep() do not hold gevent.run() from exiting.</li>
<li>ThreadPool now calls Hub.handle_error for exceptions in worker threads.</li>
<li>ThreadPool got new method: apply_e.</li>
<li>Added new extension module gevent._util and moved gevent.core.set_exc_info function there.</li>
<li>Added new extension module gevent._semaphore. It contains Semaphore class which is imported by gevent.lock as gevent.lock.Semaphore. Providing Semaphore in extension module ensures that trace function set with settrace will not be called during __exit__. Thanks to Ralf Schmitt.</li>
<li>It is now possible to kill or pre-spawn threads in ThreadPool by setting its 'size' property.</li>
</ul>
<p>core:</p>
<ul>
<li>Make sure the default loop cannot be destroyed more than once, thus crashing the process.</li>
<li>Make Hub.destroy() method not to destroy the default loop, unless <em>destroy_loop</em> is <em>True</em>. Non-default loops are still destroyed by default.</li>
<li>loop: Removed properties from loop: fdchangecnt, timercnt, asynccnt.</li>
<li>loop: Added properties: sigfd, origflags, origflags_int</li>
<li>loop: The EVFLAG_NOENV is now always passed to libev. Thus LIBEV_FLAGS env variable is no longer checked. Use GEVENT_BACKEND.</li>
</ul>
<p>Misc:</p>
<ul>
<li>Check that the argument of link() is callable. Raise TypeError when it's not.</li>
<li>Fixed TypeError in baseserver when parsing an address.</li>
<li>Pool: made add() and discard() usable by external users. Thanks to Danil Eremeev.</li>
<li>When specifying a class to import, it is now possible to use format path/package.module.name</li>
<li>pywsgi: Made sure format_request() does not fail if 'status' attribute is not set yet</li>
<li>pywsgi: Added REMOTE_PORT variable to the environment.</li>
</ul>
<p>Examples:</p>
<ul>
<li>portforwarder.py now shows how to use gevent.run() to implement graceful shutdown of a server.</li>
<li>psycopg2_pool.py: Changed execute() to return rowcount.</li>
<li>psycopg2_pool.py: Added fetchall() and fetchiter() methods.</li>
</ul>
<p>Developer utilities:</p>
<ul>
<li>When building, CYTHON env variable can be used to specify Cython executable to use.</li>
<li>util/make_dist.py now recongizes --fast and --revert options. Previous --rsync option is removed.</li>
<li>Added util/winvbox.py which automates building/testing/making binaries on Windows VM.</li>
<li>Fixed typos in exception handling code in testrunner.py</li>
<li>Fixed patching unittest.runner on Python2.7. This caused the details of test cases run lost.</li>
<li>Made testrunner.py kill the whole process group after test is done.</li>
</ul>
<a name="user-content-release-1-0b1-jan-10-2012"/>
<h2><a id="user-content-release-10b1-jan-10-2012" class="anchor" href="#release-10b1-jan-10-2012" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0b1 (Jan 10, 2012)</h2>
<p>Backward-incompatible changes:</p>
<ul>
<li>Removed "link to greenlet" feature of Greenlet.</li>
<li>If greenlet module older than 0.3.2 is used, then greenlet.GreenletExit.__bases__ is monkey patched to derive from BaseException and not Exception. That way gevent.GreenletExit is always derived from BaseException, regardless of installed greenlet version.</li>
<li>Some code supporting Python 2.4 has been removed.</li>
</ul>
<p>Release highlights:</p>
<ul>
<li>Added thread pool: gevent.threadpool.ThreadPool.</li>
<li>Added thread pool-based resolver. Enable with GEVENT_RESOLVER=thread.</li>
<li>Added UDP server: gevent.server.DatagramServer</li>
<li>A "configure" is now run on libev. This fixes a problem of 'kqueue' not being available on Mac OS X.</li>
<li>Gevent recognizes some environment variables now:
- GEVENT_BACKEND allows passing argument to loop, e.g. "GEVENT_BACKEND=select" for force select backend
- GEVENT_RESOLVER allows choosing resolver class.
- GEVENT_THREADPOOL allows choosing thread pool class.</li>
<li>Added new examples: portforwarder, psycopg2_pool.py, threadpool.py, udp_server.py</li>
<li>Fixed non-embedding build. To build against system libev, remove or rename 'libev' directory. To build against system c-ares, remove or rename 'c-ares'. Thanks to Örjan Persson.</li>
</ul>
<p>misc:
- gevent.joinall() method now accepts optional 'count' keyword.
- gevent.fork() only calls reinit() in the child process now.
- gevent.run() now returns False when exiting because of timeout or event (previous None).
- Hub got a new method: destroy().
- Hub got a new property: threadpool.</p>
<p>ares.pyx:
- Fixed <a href="#id467">:issue:`104`</a>: made ares_host_result pickable. Thanks to Shaun Cutts.</p>
<p>pywsgi:
- Removed unused deprecated 'wfile' property from WSGIHandler
- Fixed <a href="#id469">:issue:`92`</a>: raise IOError on truncated POST requests.
- Fixed <a href="#id471">:issue:`93`</a>: do not sent multiple "100 continue" responses</p>
<p>core:
- Fixed <a href="#id473">:issue:`97`</a>: the timer watcher now calls ev_now_update() in start() and again() unless 'update' keyword is passed and set to False.
- add set_syserr_cb() function; it's used by gevent internally.
- gevent now installs syserr callback using libev's set_syserr_cb. This callback is called when libev encounters an error it cannot recover from. The default action is to print a message and abort. With the callback installed, a SystemError() is now raised in the main greenlet.
- renamed 'backend_fd' property to 'fileno()' method. (not available if you build gevent against system libev)
- added 'asynccnt' property (not available if you build gevent against system libev)
- made loop.__repr__ output a bit more compact
- the watchers check the arguments for validness now (previously invalid argument would crash libev).
- The 'async' watcher now has send() method;
- fixed time() function
- libev has been upgraded to latest CVS version.
- libev has been patched to use send()/recv() for evpipe on windows when libev_vfd.h is in effect</p>
<p>resolver_ares:
- Slightly improved compatibility with stdlib's socket in some error cases.</p>
<p>socket:
- Fixed close() method not to reference any globals
- Fixed <a href="#id475">:issue:`115`</a>: _dummy gets unexpected Timeout arg
- Removed _fileobject used for python 2.4 compatibility in socket.py
- Fixed <a href="#id477">:issue:`94`</a>: fallback to buffer if memoryview fails in _get_memory on python 2.7</p>
<p>monkey:
- Removed patch_httplib()
- Fixed <a href="#id479">:issue:`112`</a>: threading._sleep is not patched. Thanks to David LaBissoniere.
- Added get_unpatched() function. However, it is slightly broken at the moment.</p>
<p>backdoor:
- make 'locals()' not spew out __builtin__.__dict__ in backdoor
- add optional banner argument to BackdoorServer</p>
<p>servers:
- add server.DatagramServer;
- StreamServer: 'ssl_enabled' is now a read-only property
- servers no longer have 'kill' method; it has been renamed to 'close'.
- listeners can now be configured as strings, e.g. ':80' or 80
- modify baseserver.BaseServer in such a way that makes it a good base class for both StreamServer and DatagramServer
- BaseServer no longer accepts 'backlog' parameter. It is now done by StreamServer.
- BaseServer implements start_accepting() and stop_accepting() methods
- BaseServer now implements "temporarily stop accepting" strategy
- BaseServer now has _do_read method which does everything except for actually calling accept()/recvfrom()
- pre_start() method is renamed to init_socket()
- renamed _stopped_event to _stop_event
- 'started' is now a read-only property (which actually reports state of _stop_event)
- post_stop() method is removed
- close() now sets _stop_event(), thus setting 'started' to False, thus causing serve_forever() to exit
- _tcp_listener() function is moved from baseserver.py to server.py
- added 'fatal_errors' class attribute which is a tuple of all errnos that should kill the server</p>
<p>coros:
- Semaphore: add _start_notify() method
- Semaphore: avoid copying list of links; rawlink() no longer schedules notification</p>
<a name="user-content-release-1-0a3-sep-15-2011"/>
<h2><a id="user-content-release-10a3-sep-15-2011" class="anchor" href="#release-10a3-sep-15-2011" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0a3 (Sep 15, 2011)</h2>
<p>Added 'ref' property to all watchers. Settings it to False make watcher call ev_unref/ev_ref appropriately so that this watcher does not prevent loop.run()/hub.join()/run() from exiting.
Made resolver_ares.Resolver use 'ref' property for internal watcher.</p>
<p>In all servers, method "kill" was renamed to "close". The old name is available as deprecated alias.</p>
<p>Added a few properties to the loop: backend_fd, fdchangecnt, timercnt.</p>
<p>Upgraded c-ares to 1.7.5+patch.</p>
<p>Fixed getaddrinfo to return results in the order (::1, IPv4, IPv6).</p>
<p>Fixed getaddrinfo() to handle integer of string type. Thanks to kconor.</p>
<p>Fixed gethostbyname() to handle '' (empty string).</p>
<p>Fixed getaddrinfo() to convert UnicodeEncodeError into error('Int or String expected').</p>
<p>Fixed getaddrinfo() to uses the lowest 16 bits of passed port integer similar to built-in _socket.</p>
<p>Fixed getnameinfo() to call getaddrinfo() to process arguments similar to built-in _socket.</p>
<p>Fixed gethostbyaddr() to use getaddrinfo() to process arguments.</p>
<p>version_info is now a 5-tuple.</p>
<p>Added handle_system_error() method to Hub (used internally).</p>
<p>Fixed Hub's run() method to never exit. This prevent inappropriate switches into parent greenlet.</p>
<p>Fixed Hub.join() to return True if Hub was already dead.</p>
<p>Added 'event' argument to Hub.join().</p>
<p>Added run() function to gevent top level package.</p>
<p>Fixed Greenlet.start() to exit silently if greenlet was already started rather than raising <a href="#id481">:exc:`AssertionError`</a>.</p>
<p>Fixed Greenlet.start() not to schedule another switch if greenlet is already dead.</p>
<p>Fixed gevent.signal() to spawn Greenlet instead of raw greenlet. Also it'll switch into the new greenlet immediately instead of scheduling additional callback.</p>
<p>Do monkey patch create_connection() as gevent's version works better with gevent.socket.socket than the standard create_connection.</p>
<p>pywsgi: make sure we don't try to read more requests if socket operation failed with EPIPE</p>
<p>pywsgi: if we failed to send the reply, change 'status' to socket error so that the logs mention the error.</p>
<a name="user-content-release-1-0a2-aug-2-2011"/>
<h2><a id="user-content-release-10a2-aug-2-2011" class="anchor" href="#release-10a2-aug-2-2011" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0a2 (Aug 2, 2011)</h2>
<p>Fixed a bug in gevent.queue.Channel class. (Thanks to Alexey Borzenkov)</p>
<a name="user-content-release-1-0a1-aug-2-2011"/>
<h2><a id="user-content-release-10a1-aug-2-2011" class="anchor" href="#release-10a1-aug-2-2011" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 1.0a1 (Aug 2, 2011)</h2>
<p>Backward-incompatible changes:</p>

<p>Release highlights:</p>
<ul>
<li>The <a href="#id505">:mod:`gevent.core`</a> module now wraps libev's API and is not compatible with gevent 0.x.</li>
<li>Added a concept of pluggable event loops. By default gevent.core.loop is used, which is a wrapper around libev.</li>
<li>Added a concept of pluggable name resolvers. By default a resolver based on c-ares library is used.</li>
<li>Added support for multiple OS threads, each new thread will get its own Hub instance with its own event loop.</li>
<li>The release now includes and embeds the dependencies: libev and c-ares.</li>
<li>The standard <a href="#id507">:mod:`signal`</a> works now as expected.</li>
<li>The unhandled errors are now handled uniformely by Hub.handle_error function.</li>
<li>Added <a href="#id509">:class:`Channel`</a> class to <a href="#id511">:mod:`gevent.queue`</a> module. It is equivalent to Queue(0) in gevent 0.x, which is deprecated now.</li>
<li>Added method <a href="#id513">:meth:`peek`</a> to <a href="#id515">:class:`Queue`</a> class.</li>
<li>Added <a href="#id517">:func:`idle`</a> function which blocks until the event loop is idle.</li>
<li>Added a way to gracefully shutdown the application by waiting for all outstanding greenlets/servers/watchers: <a href="#id519">:meth:`Hub.join`</a>.</li>
<li>Added new <a href="#id521">:mod:`gevent.ares`</a> C extension which wraps c-ares and provides asynchronous DNS resolver.</li>
<li>Added new <a href="#id523">:mod:`gevent.resolver_ares`</a> module provides synchronous API on top of <a href="#id525">:mod:`gevent.ares`</a>.</li>
</ul>
<p>The <a href="#id527">:mod:`gevent.socket`</a> module:</p>
<ul>
<li><p>DNS functions now use c-ares library rather than libevent-dns. This
fixes a number of problems with name resolving:</p>

</li>
<li><p>The following functions were added to socket module
- gethostbyname_ex
- getnameinfo
- gethostbyaddr
- getfqdn</p>
</li>
<li><p>Removed undocumented bind_and_listen and tcp_listener</p>
</li>
</ul>
<p>The <a href="#id533">:class:`Hub`</a> object:</p>
<ul>
<li>Added <a href="#id535">:meth:`join`</a> method which waits until the event loop exits or optional timeout expires.</li>
<li>Added <a href="#id537">:meth:`wait`</a> method which waits until a watcher has got an event.</li>
<li>Added <a href="#id539">:meth:`handle_error`</a> method which is called by all of gevent in case of unhandled exception.</li>
<li>Added <a href="#id541">:meth:`print_exception`</a> method which is called by handle_error to print the exception traceback.</li>
</ul>
<p>The <a href="#id543">:class:`Greenlet`</a> objects:</p>
<ul>
<li>Added __nonzero__ implementation that returns True after greenlet was started until it's dead.
Previously greenlet was False after start() until it was first switched to.</li>
</ul>
<p>The mod:gevent.pool module:</p>
<ul>
<li>It is now possible to add raw greenlets to the pool.</li>
<li>The <a href="#id545">:meth:`map`</a> and <a href="#id547">:meth:`imap`</a> methods now start yielding the results as soon as possible.</li>
<li>The <a href="#id549">:meth:`imap_unordered`</a> no longer swallows an exception raised while iterating its argument.</li>
</ul>
<p>Miscellaneous:</p>
<ul>
<li>gevent.sleep(&lt;negative value&gt;) no longer raises an exception, instead it does sleep(0).</li>
<li>Added method clear to internal Waiter class.</li>
<li>Removed wait method from internal Waiter class.</li>
<li>The <a href="#id551">:class:`WSGIServer`</a> now sets max_accept to 1 if wsgi.multiprocessing is set to True.</li>
<li>Added <a href="#id553">:func:`monkey.patch_module`</a> function that monkey patches module using __implements__ list provided by gevent module.
All of gevent modules that replace stdlib module now have __implements__ attribute.</li>
</ul>
<a name="user-content-release-0-13-8-september-6-2012"/>
<h2><a id="user-content-release-0138-september-6-2012" class="anchor" href="#release-0138-september-6-2012" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.8 (September 6, 2012)</h2>
<ul>
<li>Fixed <a href="#id555">:issue:`80`</a>: gevent.httplib failed with RequestFailed errors because timeout was reset to 1s. Patch by Tomasz Prus.</li>
<li>core: fix compilation with the latest Cython: remove emit_ifdef/emit_else/emit_endif.</li>
<li>Fixed <a href="#id557">:issue:`132`</a>: gevent.socket.gethostbyname(&lt;unicode&gt;) now does ascii encoding and uses gevent's resolver rather than calling built-in resolver. Patch by Alexey Borzenkov.</li>
</ul>
<a name="user-content-release-0-13-7-april-12-2012"/>
<h2><a id="user-content-release-0137-april-12-2012" class="anchor" href="#release-0137-april-12-2012" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.7 (April 12, 2012)</h2>
<ul>
<li>Fixed <a href="#id559">:issue:`94`</a>: fallback to buffer if memoryview fails in _get_memory on python 2.7.</li>
<li>Fixed <a href="#id561">:issue:`103`</a>: <code>Queue(None).full()</code> returns <code>False</code> now (previously it returned <code>True</code>).</li>
<li>Fixed <a href="#id563">:issue:`112`</a>: threading._sleep is not patched. Thanks to David LaBissoniere.</li>
<li>Fixed <a href="#id565">:issue:`115`</a>: _dummy gets unexpected Timeout arg.</li>
</ul>
<a name="user-content-release-0-13-6-may-2-2011"/>
<h2><a id="user-content-release-0136-may-2-2011" class="anchor" href="#release-0136-may-2-2011" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.6 (May 2, 2011)</h2>
<ul>
<li>Added <code>__copy__</code> method to <a href="#id567">:class:`gevent.local.local`</a> class that implements copy semantics compatible with built-in <code>threading.local</code>. Patch by <strong>Galfy Pundee</strong>.</li>
<li>Fixed <a href="#id569">:class:`StreamServer`</a> class to catch <code>EWOULDBLOCK</code> rather than <code>EAGAIN</code>. This fixes lots of spurious tracebacks on Windows where these two constants are not the same. Patch by <strong>Alexey Borzenkov</strong>.</li>
<li>Fixed <a href="#id571">:issue:`65`</a>: <a href="#id573">:func:`fork`</a> now calls <code>event_reinit</code> only in the child process; otherwise the process could hang when using libevent2. Patch by <strong>Alexander Boudkar</strong>.</li>
</ul>
<a name="user-content-release-0-13-5-apr-21-2011"/>
<h2><a id="user-content-release-0135-apr-21-2011" class="anchor" href="#release-0135-apr-21-2011" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.5 (Apr 21, 2011)</h2>
<ul>
<li>Fixed build problem on Python 2.5</li>
</ul>
<a name="user-content-release-0-13-4-apr-11-2011"/>
<h2><a id="user-content-release-0134-apr-11-2011" class="anchor" href="#release-0134-apr-11-2011" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.4 (Apr 11, 2011)</h2>

<a name="user-content-release-0-13-3-feb-7-2011"/>
<h2><a id="user-content-release-0133-feb-7-2011" class="anchor" href="#release-0133-feb-7-2011" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.3 (Feb 7, 2011)</h2>

<a name="user-content-release-0-13-2-jan-28-2011"/>
<h2><a id="user-content-release-0132-jan-28-2011" class="anchor" href="#release-0132-jan-28-2011" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.2 (Jan 28, 2011)</h2>

<a name="user-content-release-0-13-1-sep-23-2010"/>
<h2><a id="user-content-release-0131-sep-23-2010" class="anchor" href="#release-0131-sep-23-2010" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.1 (Sep 23, 2010)</h2>
<p>Release highlights:</p>

<p><a href="#id733">:mod:`gevent.socket`</a> module:</p>

<p><a href="#id747">:mod:`gevent.ssl`</a> module:</p>
<ul>
<li>Imported a number of patches from stdlib by <strong>Antoine Pitrou</strong>:<ul>
<li>Calling <a href="#id749">:meth:`makefile`</a> method on an SSL object would prevent the underlying socket from being closed until all objects get truely destroyed (Python issue #5238).</li>
<li>SSL handshake would ignore the socket timeout and block indefinitely if the other end didn't respond (Python issue #5103).</li>
<li>When calling <a href="#id751">:meth:`getpeername`</a> in <code>SSLSocket.__init__</code>, only silence exceptions caused by the "socket not connected" condition.</li>
</ul>
</li>
<li>Added support for <em>ciphers</em> argument.</li>
<li>Updated <code>SSLSocket.send</code> and <code>SSLSocket.recv</code> methods to match the behavior of stdlib <a href="#id753">:mod:`ssl`</a> better.</li>
<li>Fixed <a href="#id755">:class:`ssl.SSLObject`</a> to delete events used by other greenlets when closing the instance (<a href="#id757">:issue:`34`</a>).</li>
</ul>
<p>Miscellaneous:</p>
<ul>
<li>Made <a href="#id759">:class:`BaseServer`</a> accept <code>long</code> values as <em>pool</em> argument in addition to <code>int</code>.</li>
<li>Made <a href="#id761">:attr:`http._requests`</a> attribute public.</li>
<li>Updated webchat example to use file on disk rather than in-memory sqlite database to avoid <a href="#id763">:exc:`OperationalError`</a>.</li>
<li>Fixed <code>webproxy.py</code> example to be runnable under external WSGI server.</li>
<li>Fixed bogus failure in <code>test__exc_info.py</code>.</li>
<li>Added new test to check PEP8 conformance: <code>xtest_pep8.py</code>.</li>
<li>Fixed <a href="#id765">:class:`BackdoorServer`</a> close the connection on <a href="#id767">:exc:`SystemExit`</a> and simplified the code.</li>
<li>Made <a href="#id769">:class:`Pool`</a> raise <a href="#id771">:exc:`ValueError`</a> when initialized with <code>size=0</code>.</li>
<li>Updated <code>setup.py --libevent</code> to configure and make libevent if it's not built already.</li>
<li>Updated <code>setup.py</code> to use <code>setuptools</code> if present and add dependency on <code>greenlet</code>.</li>
<li>Fixed doc/mysphinxext.py to work with Sphinx 1. Thanks by <strong>Örjan Persson</strong>.</li>
</ul>
<a name="user-content-release-0-13-0-jul-14-2010"/>
<h2><a id="user-content-release-0130-jul-14-2010" class="anchor" href="#release-0130-jul-14-2010" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.13.0 (Jul 14, 2010)</h2>
<p>Release highlights:</p>

<p>Backward-incompatible changes:</p>

<p><a href="#id857">:mod:`gevent.socket`</a> module:</p>

<p><a href="#id873">:mod:`gevent.coros`</a> module:</p>

<p><a href="#id883">:mod:`gevent.event`</a> module:</p>

<p><a href="#id893">:mod:`gevent.wsgi`</a> module:</p>

<p><a href="#id897">:mod:`gevent.pywsgi`</a> module:</p>

<p><a href="#id917">:mod:`gevent.core`</a> module:</p>

<p><a href="#id957">:mod:`gevent.http`</a> and <a href="#id959">:mod:`gevent.wsgi`</a> modules:</p>

<p>Miscellaneous:</p>

<p>Examples:</p>

<p>Thanks to <strong>Ralf Schmitt</strong> for <a href="#id1005">:mod:`pywsgi`</a>, a number of fixes for <a href="#id1007">:mod:`wsgi`</a>, help with
<a href="#id1009">:mod:`baseserver`</a> and <a href="#id1011">:mod:`server`</a> modules, improving setup.py and various other patches and suggestions.</p>
<p>Thanks to <strong>Uriel Katz</strong> for <a href="#id1013">:mod:`pywsgi`</a> patches.</p>
<a name="user-content-release-0-12-2-mar-2-2010"/>
<h2><a id="user-content-release-0122-mar-2-2010" class="anchor" href="#release-0122-mar-2-2010" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.12.2 (Mar 2, 2010)</h2>
<ul>
<li>Fixed http server to put the listening socket into a non-blocking mode. Contributed by <strong>Ralf Schmitt</strong>.</li>
</ul>
<a name="user-content-release-0-12-1-feb-26-2010"/>
<h2><a id="user-content-release-0121-feb-26-2010" class="anchor" href="#release-0121-feb-26-2010" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.12.1 (Feb 26, 2010)</h2>
<ul>
<li>Removed a symlink from the distribution (that causes pip to fail). Thanks to <strong>Brad Clements</strong> for reporting it.</li>
<li>setup.py: automatically create symlink from <code>build/lib.../gevent/core.so</code> to <code>gevent/core.so</code>.</li>
<li><a href="#id1015">:mod:`gevent.socket`</a>: Improved compatibility with stdlib's socket:
</li>
</ul>
<a name="user-content-release-0-12-0-feb-5-2010"/>
<h2><a id="user-content-release-0120-feb-5-2010" class="anchor" href="#release-0120-feb-5-2010" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.12.0 (Feb 5, 2010)</h2>
<p>Release highlights:</p>

<p><a href="#id1037">:mod:`gevent.wsgi`</a> module:</p>
<ul>
<li>Made <code>env["REMOTE_PORT"]</code> into a string.</li>
<li>Fixed the server to close the iterator returned by the application.</li>
<li>Made <code>wsgi.input</code> object iterable.</li>
</ul>
<p><a href="#id1039">:mod:`gevent.core`</a> module:</p>
<ul>
<li>Made DNS functions no longer accept/return IP addresses in dots-and-numbers format. They work
with packed IPs now.</li>
<li>Made DNS functions no longer accept additional arguments to pass to the callback.</li>
<li>Fixed DNS functions to check the return value of the libevent functions and raise
<a href="#id1041">:exc:`IOError`</a> if they failed.</li>
<li>Added <a href="#id1043">:func:`core.dns_err_to_string`</a>.</li>
<li>Made core.event.cancel not to raise if event_del reports an error. instead, the return code is
passed to the caller.</li>
<li>Fixed minor issue in string representation of the events.</li>
</ul>
<p><a href="#id1045">:mod:`gevent.socket`</a> module:</p>

<p>Miscellaneous:</p>

<a name="user-content-release-0-11-2-dec-10-2009"/>
<h2><a id="user-content-release-0112-dec-10-2009" class="anchor" href="#release-0112-dec-10-2009" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.11.2 (Dec 10, 2009)</h2>

<a name="user-content-release-0-11-1-nov-15-2009"/>
<h2><a id="user-content-release-0111-nov-15-2009" class="anchor" href="#release-0111-nov-15-2009" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.11.1 (Nov 15, 2009)</h2>
<ul>
<li>Fixed bug in <a href="#id1161">:func:`select.select`</a> function. Passing non-empty list of write descriptors used to cause this function to fail.</li>
<li>Changed setup.py to go ahead with the compilation even if the actual version of libevent cannot be determined (version 1.x.x is assumed in that case).</li>
</ul>
<p>Contributed by <strong>Ludvig Ericson</strong>:</p>
<ul>
<li>Fixed <a href="#id1163">:mod:`wsgi`</a>'s <code>start_response</code> to recognize <em>exc_info</em> argument.</li>
<li>Fixed setup.py to look for libevent.dylib rather than .so on Darwin platforms.</li>
</ul>
<a name="user-content-release-0-11-0-oct-9-2009"/>
<h2><a id="user-content-release-0110-oct-9-2009" class="anchor" href="#release-0110-oct-9-2009" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.11.0 (Oct 9, 2009)</h2>

<a name="user-content-release-0-10-0-aug-26-2009"/>
<h2><a id="user-content-release-0100-aug-26-2009" class="anchor" href="#release-0100-aug-26-2009" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.10.0 (Aug 26, 2009)</h2>

<p>The following items were added to the gevent top level package:</p>

<p>The following items were marked as deprecated:</p>

<p>Internally, <code>gevent.greenlet</code> was split into a number of modules:</p>

<p>Thanks to <strong>Jason Toffaletti</strong> for reporting the installation issue and providing a
test case for WSGI double content-length header bug.</p>
<a name="user-content-release-0-9-3-aug-3-2009"/>
<h2><a id="user-content-release-093-aug-3-2009" class="anchor" href="#release-093-aug-3-2009" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.9.3 (Aug 3, 2009)</h2>
<ul>
<li>Fixed all known bugs in the <a href="#id1369">:mod:`gevent.queue`</a> module and made it 2.4-compatible.
<a href="#id1371">:class:`LifoQueue`</a> and <a href="#id1373">:class:`PriorityQueue`</a> are implemented as well.
<a href="#id1375">:mod:`gevent.queue`</a> will deprecate both <code>coros.Queue</code> and <code>coros.Channel</code>.</li>
<li>Fixed <a href="#id1377">:class:`Timeout`</a> to raise itself by default. <code>TimeoutError</code> is gone.
Silent timeout is now created by passing <code>False</code> instead of <code>None</code>.</li>
<li>Fixed bug in <a href="#id1379">:func:`gevent.select.select`</a> where it could silent the wrong timeout.</li>
<li><a href="#id1381">:func:`spawn`</a> and <a href="#id1383">:func:`spawn_later`</a> now avoid creating a closure and this decreases spawning
time by 50%.</li>
<li><code>kill</code>'s and <code>killall</code>'s <em>wait</em> argument was renamed to <em>block</em>. The polling is now
implemented by <code>greenlet.join</code> and <code>greenlet.joinall</code> functions and it become more
responsive, with gradual increase of sleep time.</li>
<li>Renamed <code>proc.RunningProcSet</code> to <code>proc.ProcSet</code>.</li>
<li>Added <a href="#id1385">:func:`shutdown`</a> function, which blocks until libevent has finished dispatching the events.</li>
<li>The return value of <code>event_add</code> and <code>event_del</code> in core.pyx are now checked properly
and <a href="#id1387">:exc:`IOError`</a> is raised if they have failed.</li>
<li>Fixed backdoor.py, accidentally broken in the previous release.</li>
</ul>
<a name="user-content-release-0-9-2-jul-20-2009"/>
<h2><a id="user-content-release-092-jul-20-2009" class="anchor" href="#release-092-jul-20-2009" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.9.2 (Jul 20, 2009)</h2>
<ul>
<li>Simplified <a href="#id1389">:mod:`gevent.socket`</a>'s implementation and fixed SSL bug reported on eventletdev
by <strong>Cesar Alaniz</strong> as well as failures in <code>test_socket_ssl.py</code>.</li>
<li>Removed <code>GreenSocket.makeGreenFile</code>; Use <a href="#id1391">:meth:`socket.socket.makefile`</a> that returns <a href="#id1393">:class:`_fileobject`</a>
and is available on both <a href="#id1395">:class:`GreenSocket &lt;gevent.socket.socket&gt;`</a> and <a href="#id1397">:class:`GreenSSL &lt;gevent.socket.GreenSSL&gt;`</a>.
The <a href="#id1399">:mod:`gevent.socket`</a> is still a work in progress.</li>
<li>Added new <a href="#id1401">:class:`core.active_event`</a> class that takes advantage of libevent's <code>event_active</code> function.
<code>core.active_event(func)</code> schedules func to be run in this event loop iteration as opposed
to <code>core.timer(0, ...)</code> which schedules an event to be run in the next iteration.
<a href="#id1403">:class:`active_event`</a> is now used throughout the library wherever <code>core.timer(0, ....)</code> was previously used.
This results in <a href="#id1405">:func:`spawn`</a> being at least 20% faster compared to release 0.9.1 and twice as fast compared to
eventlet. (The results are obtained with bench_spawn.py script in <code>greentest/</code> directory)</li>
<li>Added boolean parameter <em>wait</em> to <a href="#id1407">:func:`kill`</a> and <a href="#id1409">:func:`killall`</a> functions. If set to <code>True</code>, it makes the
function block until the greenlet(s) is actually dead. By default, <a href="#id1411">:func:`kill`</a> and <a href="#id1413">:func:`killall`</a> are asynchronous,
i.e. they don't unschedule the current greenlet.</li>
<li>Added a few new properties to <a href="#id1415">:class:`gevent.core.event`</a>: <a href="#id1417">:attr:`fd &lt;event.fd&gt;`</a>, <a href="#id1419">:attr:`events &lt;event.events&gt;`</a>,
<a href="#id1421">:attr:`events_str &lt;event.events_str&gt;`</a> and <a href="#id1423">:attr:`flags &lt;event.flags&gt;`</a>. It also has <a href="#id1425">:meth:`__enter__ &lt;event.__enter__&gt;`</a>
and <a href="#id1427">:meth:`__exit__ &lt;event.__exit__&gt;`</a> now, so it can be used as a context
manager. <a href="#id1429">:class:`event`</a>'s <a href="#id1431">:attr:`callback &lt;event.callback&gt;`</a> signature has changed from <code>(event, fd, evtype)</code> to <code>(event, evtype)</code>.</li>
<li>Fixed <a href="#id1433">:class:`Hub`</a>'s mainloop to never return successfully as this will screw up main greenlet's <code>switch()</code> call.
Instead of returning it raises <code>DispatchExit</code>.</li>
<li>Added <a href="#id1435">:func:`reinit`</a> function - wrapper for libevent's <code>event_reinit</code>.
This function is a must have at least for daemons, as it fixes <code>epoll</code> and some others eventloops to work after <code>fork</code>.</li>
<li>Trying to use gevent in another thread will now raise an exception immediately, since it's not implemented.</li>
<li>Added a few more convenience methods <code>spawn_link[exception/value]</code> to <code>proc.RunningProcSet</code>.</li>
<li>Fixed <code>setup.py</code> not to depend on <code>setuptools</code>.</li>
<li>Removed <code>gevent.timeout</code>. Use <a href="#id1437">:class:`gevent.Timeout`</a>.</li>
</ul>
<a name="user-content-release-0-9-1-jul-9-2009"/>
<h2><a id="user-content-release-091-jul-9-2009" class="anchor" href="#release-091-jul-9-2009" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.9.1 (Jul 9, 2009)</h2>
<ul>
<li>Fixed compilation with libevent-1.3. Thanks to <strong>Litao Wei</strong> for reporting the problem.</li>
<li>Fixed <a href="#id1439">:class:`Hub`</a> to recover silently after <code>event_dispatch()</code> failures (I've seen this
happen after <code>fork</code> even though <code>event_reinit()</code> is called as necessary). The end result is that <a href="#id1441">:func:`fork`</a>
now works more reliably, as detected by <code>test_socketserver.py</code> - it used to fail occasionally, now it does not.</li>
<li>Reorganized the package, most of the stuff from <code>gevent/__init__.py</code> was moved to <code>gevent/greenlet.py</code>.
<code>gevent/__init__.py</code> imports some of it back but not everything.</li>
<li>Renamed <code>gevent.timeout</code> to <a href="#id1443">:class:`gevent.Timeout`</a>. The old name is available as an alias.</li>
<li>Fixed a few bugs in <a href="#id1445">:class:`queue.Queue`</a>.
Added test_queue.py from standard tests to check how good is <a href="#id1447">:class:`queue.Queue`</a> a replacement
for a standard <a href="#id1449">:mod:`Queue`</a> (not good at all, timeouts in <a href="#id1451">:meth:`queue.Queue.put`</a> don't work yet)</li>
<li><a href="#id1453">:mod:`monkey`</a> now patches ssl module when on 2.6 (very limited support).</li>
<li>Improved compatibility with Python 2.6 and Python 2.4.</li>
<li>Greenlet installed from PyPI (without py.magic prefix) is properly recognized now.</li>
<li>core.pyx was accidentally left out of the source package, it's included now.</li>
<li><a href="#id1455">:class:`GreenSocket &lt;socket.socket&gt;`</a> now wraps a <code>socket</code> object from <code>_socket</code> module rather
than from <a href="#id1457">:mod:`socket`</a>.</li>
</ul>
<a name="user-content-release-0-9-0-jul-8-2009"/>
<h2><a id="user-content-release-090-jul-8-2009" class="anchor" href="#release-090-jul-8-2009" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Release 0.9.0 (Jul 8, 2009)</h2>
<p>Started as <a href="http://bitbucket.org/denis/eventlet">eventlet</a> 0.8.11 fork, with the intention to support only libevent as a backend.
Compared to eventlet, this version has a much simpler API and implementation and a few
severe bugs fixed, namely</p>

<p>There's a test in my repo of eventlet that reproduces both of them:
<a href="http://bitbucket.org/denis/eventlet/src/tip/greentest/test__socket.py">http://bitbucket.org/denis/eventlet/src/tip/greentest/test__socket.py</a></p>
<p>Besides having less bugs and less code to care about the goals of the fork are:</p>
<ul>
<li>Piggy-back on libevent as much as possible (use its http and dns code).</li>
<li>Use the interfaces and conventions from the standard Python library where possible.</li>
</ul>

</article>
  </div></body></html>