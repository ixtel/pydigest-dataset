<html><body><div><div class="section">
              <h1>tao1 0.2.4</h1>

              


<p>framework, CMS and CRM for aiohttp</p>








<p>[![License](https://img.shields.io/badge/license-MIT-brightgreen.svg?style=plastic)](http://opensource.org/licenses/MIT)</p><p>[![PyPI version](https://badge.fury.io/py/tao1.svg)](https://badge.fury.io/py/tao1)</p><p># Introduction.</p><p>This asynchronous framework with a modular structure like Django. But with mongodb, jinja2, websocket out of the box, </p><p>and more than a simple barrier to entry. </p><p>Built on the basis of asyncio and aiohttp.</p><p>#Requirements</p><p>Python &gt;= 3.5.1</p><p>aiohttp</p><p>#Installation Python 3.5 for ubuntu </p><p>```bash</p><p>sudo add-apt-repository ppa:fkrull/deadsnakes</p><p>sudo apt-get update</p><p>sudo apt-get install python3.5 python3.5-dev </p><p>```</p><p>#Framework Installation</p><p>```bash</p><p>$ pip install tao1</p><p>```</p><p>#Getting Started</p><p>Create a project anywhere:</p><p>```bash</p><p>   utils.py -p name</p><p>```</p><p>Create an application in the folder of the project apps:</p><p>```bash</p><p>   utils.py -a name</p><p>```   </p><p>Run server:</p><p>```bash</p><p>   python3 index.py</p><p>```   </p><p>#License</p><p>It's *MIT* licensed and freely available.</p><p>#Deploy</p><p>When you develop enough to run the file `python3 index.py`.</p><p>For production to run `index.py`, is better to use the `supervisor` and `nginx`.</p><p>Settings supervisor in `/etc`:</p><p>```python</p><p>   [program:name]</p><p>   command=python3 index.py</p><p>   directory=/path/to/your/project</p><p>   user=nobody</p><p>   autorestart=true</p><p>   redirect_stderr=true</p><p>```</p><p>Settings nginx in `/etc` together with proxy websocket::</p><p>```nginx</p><p>server {</p><p>        server_name        aio.dev;</p><p>         location / {</p><p>                 proxy_pass http://127.0.0.1:8080;</p><p>         }</p><p>        location /ws {</p><p>              proxy_pass http://127.0.0.1:8080;</p><p>              proxy_http_version 1.1;</p><p>              proxy_set_header Upgrade $http_upgrade;</p><p>              proxy_set_header Connection "upgrade";</p><p>       }</p><p>}</p><p>```</p><p>#Routes</p><p>Example route in file `routes.py`::</p><p>```python</p><p>   from libs.game.game import  *</p><p>   from core.union import route   </p><p>   route('GET', '/ws',  ws,	'ws' )</p><p>```   </p><p>#Templates</p><p>In framework integrated `jinja2`. Templates are always in the `templ` folder.</p><p>To call the template function `templ` and pass it the template name. If the template is in some sort of module,</p><p>the call looks like this `libs.modul_name.templ_name`.</p><p>If the template is in the root of the project in the templ folder, then simply write his name.</p><p>Example:</p><p>```python</p><p>   def page(request):</p><p>       return templ('index', request, {'key':'val'} )</p><p>```</p><p>#Websockets</p><p>The websocket to create games and chat very easy to use.</p><p>The first is the need to call route with the template to draw the route and chat with the handler for chat:</p><p>```python</p><p>   route('GET', '/ws',   ws,    'ws' )</p><p>   route('GET', '/wsh',  ws_handler, 'ws_handler' )</p><p>```</p><p>These routes work you can see an example.</p><p>The second is the functions themselves.</p><p>Function for render chat page:</p><p>```python</p><p>   async def ws(request):</p><p>       return templ('libs.app:chat', request, {} )</p><p>```</p><p>Function handler chat:</p><p>```python  </p><p>   async def ws_handler(request):</p><p>      ws = web.WebSocketResponse()</p><p>      await ws.prepare(request)</p><p>      async for msg in ws:</p><p>          if msg.tp == aiohttp.MsgType.text:</p><p>              if msg.data == 'close':</p><p>                  await ws.close()</p><p>              else:</p><p>                  ws.send_str(msg.data + '/answer')</p><p>          elif msg.tp == aiohttp.MsgType.error:</p><p>              print('ws connection closed with exception %s' % ws.exception())</p><p>      print('websocket connection closed')</p><p>      return ws</p><p>```</p><p>#Database</p><p>To write the database query you need to `request.db`</p><p>and then as usual.</p><p>```python</p><p>    async def test_db(request):</p><p>	    # save doc</p><p>	    request.db.doc.save({"_id":"test", "status":"success"})</p><p>	    # find doc</p><p>	    val = request.db.doc.find_one({"_id":"test"})</p><p>	    return templ('apps.app:db_test', request, {'key':val})</p><p>```</p><p>#Static files</p><p> Static files it is better to entrust `nginx` but `tao1` able return files.</p><p> All files must be located in the folder static.</p><p> If they are the root of the project then the path will be like this `/static/file_name.pg`.</p><p> If the files are in a certain module, then the path like this `/static/module_name/file_name.jpg`.</p><p>#Caching</p><p>Create cache for function 5 second, the first parameter - name::</p><p>```python</p><p>   @cache("main_page", expire=5)</p><p>   async def page(request):</p><p>       return templ('index', request, {'key':'val'} )</p><p>```</p><p>#Game start</p><p>Game start is located on the route `/pregame`.</p><p>The game is a 3D multiplayer shooting.</p><p>#More detailed documentation </p><p>&lt;http: tao1.readthedocs.org="" en="" latest=""/&gt;

</p><a name="downloads">Â </a>


<ul class="nodot">
  <li><strong>Downloads (All Versions):</strong></li>
  <li>
    <span>0</span> downloads in the last day
  </li>
  <li>
    <span>305</span> downloads in the last week
  </li>
  <li>
    <span>3087</span> downloads in the last month
  </li>
</ul>









            </div>


          </div></body></html>