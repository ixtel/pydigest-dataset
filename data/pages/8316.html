<html><body><div><div class="post-text" itemprop="text">

<p>I'm trying to get Flask to work with Celery with Sqllite as backend. With the following code, however:</p>

<pre><code>CELERY_BROKER_URL = 'sqla+sqlite:///' + os.path.join(basedir, 'celery.db')

def make_celery(app):
    celery = Celery(app.import_name, broker=app.config['CELERY_BROKER_URL'])
    celery.conf.update(app.config)
    TaskBase = celery.Task
    class ContextTask(TaskBase):
        abstract = True
        def __call__(self, *args, **kwargs):
            with app.app_context():
                return TaskBase.__call__(self, *args, **kwargs)
    celery.Task = ContextTask
    return celery
</code></pre>

<p>After starting a worker, <a href="http://pastebin.com/iHXxEFFd">I get this error when trying to call a dummy task</a>:</p>

<pre><code>error: [Errno 10061] No connection could be made because the target machine actively refused it
</code></pre>

<p>Code:</p>

<pre><code>@app.route('/test')
def test():
    t = add_together.delay(100,200)
    return str(t.wait())
</code></pre>

<p>What's wrong? I've tried googling any combination of Sqllite/SQLAlchemy/Flask/Celery, but have been unable to find a solution.</p>
    </div>
    </div></body></html>