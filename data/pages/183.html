<html><body><div><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>This is to inform you about the new stable release of <a class="reference external" href="http://nuitka.net">Nuitka</a>. It is the extremely compatible Python compiler. Please see the page <a class="reference external" href="../pages/overview.html">"What is Nuitka?"</a> for an overview.</p>
<p>This release includes important new features, lots of polishing cleanups, and
some important performance improvements as well.</p>
<div class="section" id="bug-fixes">
<h2>Bug Fixes</h2>
<ul class="simple">
<li>The RPM packages didn't build due to missing in-line copy of Scons. Fixed in
0.4.6.1 already.</li>
<li>The recursion into modules and unfreezing them was not working for packages
and modules anymore. Fixed in 0.4.6.2 already.</li>
<li>The Windows installer was not including Scons. Fixed in 0.4.6.3 already.</li>
<li>Windows: The immediate execution as performed by <tt class="docutils literal">nuitka <span class="pre">--execute</span></tt> was not
preserving the exit code. <a class="reference external" href="http://bugs.nuitka.net/issue26">Issue#26</a>.</li>
<li>Python3.3: Packages without <tt class="docutils literal">__init.py__</tt> were not properly embedding the
name-space package as well.</li>
<li>Python3: Fix, modules and packages didn't add themselves to <tt class="docutils literal">sys.modules</tt>
which they should, happened only for programs.</li>
<li>Python3.3: Packages should set <tt class="docutils literal">__package</tt> to their own name, not the one of
their parents.</li>
<li>Python3.3: The <tt class="docutils literal">__qualname__</tt> of nested classes was corrected.</li>
<li>For modules that recursed to other modules, an infinite loop could be
triggered when comparing types with rich comparisons. <a class="reference external" href="http://bugs.nuitka.net/issue115">Issue#115</a>.</li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New Features</h2>
<ul>
<li>
<p class="first">The "standalone" mode allows to compile standalone binaries for programs and
run them without Python installation. The DLLs loaded by extension modules on
Windows need to be added manually, on Linux these are determined
automatically already.</p>
<p>To achieve running without Python installation, Nuitka learned to freeze
bytecode as an alternative to compiling modules, as some modules need to be
present when the CPython library is initialized.</p>
</li>
<li>
<p class="first">New option <tt class="docutils literal"><span class="pre">--python-flag</span></tt> allows to specify flags to the compiler that the
"python" binary normally would. So far <tt class="docutils literal"><span class="pre">-S</span></tt> and <tt class="docutils literal"><span class="pre">-v</span></tt> are supported, with
sane aliases <tt class="docutils literal">no_site</tt> and <tt class="docutils literal">trace_imports</tt>.</p>
<p>The recommended use of <tt class="docutils literal"><span class="pre">--python-flag=-S</span></tt> is to avoid dependency creep in
standalone mode compilations, because the <tt class="docutils literal">site</tt> module often imports many
useless things that often don't apply to target systems.</p>
</li>
</ul>
</div>
<div class="section" id="new-optimization">
<h2>New Optimization</h2>
<ul class="simple">
<li>Faster frame stack handling for functions without <tt class="docutils literal">try</tt>/<tt class="docutils literal">except</tt> (or
<tt class="docutils literal">try</tt>/<tt class="docutils literal">finally</tt> in Python3). This gives a speed boost to "PyStone" of
ca. 2.5% overall.</li>
<li>Python2: Faster attribute getting and setting, handling special cases at
compile time. This gives a minor speed boost to "PyStone" of ca. 0.5% overall.</li>
<li>Python2: Much quicker calls of <tt class="docutils literal">__getattr__</tt> and <tt class="docutils literal">__setattr__</tt> as this is
now using the quicker call method avoiding temporary tuples.</li>
<li>Don't treat variables usages used in functions called directly by their owner
as shared. This leads to more efficient code generation for contractions and
class bodies.</li>
<li>Create <tt class="docutils literal">unicode</tt> constants directly from their UTF-8 string representation
for Python2 as well instead of un-streaming. So far this was only done for
Python3. Affects only program start-up.</li>
<li>Directly create <tt class="docutils literal">int</tt> and <tt class="docutils literal">long</tt> constants outside of <tt class="docutils literal"><span class="pre">2**31</span></tt> and
<tt class="docutils literal"><span class="pre">2**32-1</span></tt>, but only limited according to actual platform values. Affects
only program start-up.</li>
<li>When creating <tt class="docutils literal">set</tt> values, no longer use a temporary <tt class="docutils literal">tuple</tt> value, but
use a properly generated helper functions instead. This makes creating sets
much faster.</li>
<li>Directly create <tt class="docutils literal">set</tt> constants instead of un-streaming them. Affects only
program start-up.</li>
<li>For correct line numbers in traceback, the current frame line number must be
updated during execution. This was done more often than necessary, e.g. loops
set the line number before loop entry, and at first statement.</li>
<li>Module variables are now accessed even faster, the gain for "PyStone" is only
0.1% and mostly the result of leaner code.</li>
</ul>
</div>
<div class="section" id="organizational">
<h2>Organizational</h2>
<ul class="simple">
<li>The "standalone mode" code (formerly known as "portable mode" has been redone
and activated. This is a feature that a lot of people expect from a compiler
naturally. And although the overall goal for Nuitka is of course acceleration,
this kind of packaging is one of the areas where CPython needs improvement.</li>
<li>Added package for Ubuntu 13.10 for download, removed packages for Ubuntu 11.04
and 11.10, no more supported.</li>
<li>Added package for openSUSE 13.1 for download.</li>
<li>Nuitka is now part of Arch and can be installed with <tt class="docutils literal">pacman <span class="pre">-S</span> nuitka</tt>.</li>
<li>Using dedicated <a class="reference external" href="http://buildbot.net">Buildbot</a> for continuous integration
testing. Not yet public.</li>
<li>Windows: In order to speed up repeated compilation on a platform without
<tt class="docutils literal">ccache</tt>, added Scons level caching in the build directory.</li>
<li>Disabled hash randomization for inside Nuitka (but not in ultimately created
binaries) for a more stable output, because dictionary constants will not
change around. This makes the build results possible to cache for <tt class="docutils literal">ccache</tt>
and Scons as well.</li>
</ul>
</div>
<div class="section" id="tests">
<h2>Tests</h2>
<ul class="simple">
<li>The <tt class="docutils literal">programs</tt> tests cases now fail if module or directory recursion is not
working, being executed in another directory.</li>
<li>Added test runner for packages, with initial test case for package with
recursion and sub-packages.</li>
<li>Made some test cases more strict by reducing <tt class="docutils literal">PYTHONPATH</tt> provision.</li>
<li>Detect use of extra flags in tests that don't get consumed avoiding
ineffective flags.</li>
<li>Use <tt class="docutils literal"><span class="pre">--execute</span></tt> on Windows as well, the issue that prevented it has been
solved after all.</li>
</ul>
</div>
<div class="section" id="cleanups">
<h2>Cleanups</h2>
<ul class="simple">
<li>The generated code uses <tt class="docutils literal">const_</tt>, <tt class="docutils literal">var_</tt>, <tt class="docutils literal">par_</tt> prefixes in the
generated code and centralized the decision about these into single place.</li>
<li>Module variables no longer use C++ classes for their access, but instead
accessor functions, leading to much less code generated per module variable
and removing the need to trace their usage during code generation.</li>
<li>The test runners now share common code in a dedicated module, previously they
replicated it all, but that turned out to be too tedious.</li>
<li>Massive general cleanups, many of which came from new contributor Juan Carlos
Paco.</li>
<li>Moved standalone and freezer related codes to dedicated package
<tt class="docutils literal">nuitka.freezer</tt> to not pollute the <tt class="docutils literal">nuitka</tt> package name space.</li>
<li>The code generation use variable identifiers and their accesses was cleaned
up.</li>
<li>Removed several not-so-special case identifier classes because they now behave
more identical and all work the same way, so a parameters can be used to
distinguish them.</li>
<li>Moved main program, function object, set related code generation to dedicated
modules.</li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary</h2>
<p>This release marks major technological progress with the introduction of the
much sought standalone mode and performance improvements from improved code
generation.</p>
<p>The major break through for SSA optimization was not yet achieved, but this is
again making progress in the direction of it. Harmonizing variables of different
kinds was an important step ahead.</p>
<p>Also very nice is the packaging progress, Nuitka was accepted into Arch after
being in Debian Testing for a while already. Hope is to see more of this kind of
integration in the future.</p>
</div>
</div>
</div>
</div></body></html>