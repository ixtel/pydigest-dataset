<html><body><div><div class="content html_format"><p>
      Продолжение перевода неофициальной документации Selenium для Python.</p><p>
Оригинал можно найти </p><a href="http://selenium-python.readthedocs.org/waits.html">здесь</a><p>.

</p><h2>Содержание:</h2><p>
1. </p><a href="http://habrahabr.ru/post/248559/">Установка</a><p>
2. </p><a href="http://habrahabr.ru/post/250921/">Первые шаги</a><p>
3. </p><a href="http://habrahabr.ru/post/250947/">Навигация</a><p>
4. </p><a href="http://habrahabr.ru/post/250975/">Поиск элементов</a><p>
5. Ожидания</p><p>
6. </p><a href="http://habrahabr.ru/post/273115/">Объекты Страницы</a><p>
7. WebDriver API</p><p>
8. Приложение: Часто Задаваемые Вопросы

</p><h2>5. Ожидания</h2><p>
В наши дни большинство веб-приложений используют </p><a href="https://ru.wikipedia.org/wiki/AJAX">AJAX</a><p> технологии. Когда страница загружена в браузере, элементы на этой странице могут подгружаться с различными временными интервалами. Это затрудняет поиск элементов, если элемент не присутствует в </p><a href="https://ru.wikipedia.org/wiki/Document_Object_Model">DOM</a><p>, возникает исключение ElementNotVisibleException. Используя ожидания, мы можем решить эту проблему. Ожидание дает некий временной интервал между произведенными действиями — поиске элемента или любой другой операции с элементом.
</p><a name="habracut"/><p>
Selenium WebDriver предоставляет два типа ожиданий — неявное (implicit) и явное (explicit). Явное ожидание заставляет WebDriver ожидать возникновение определенного условия до произведения действий. Неявное ожидание заставляет WebDriver опрашивать DOM определенное количество времени, когда пытается найти элемент.

</p><h2>5.1 Явные ожидания</h2><p>
Явное ожидание — это код, которым вы определяете какое необходимое условие должно произойти для того, чтобы дальнейший код исполнился. Худший пример такого кода — это использование команды time.sleep(), которая устанавливает точное время ожидания. Существуют более удобные методы, которые помогут написать вам код, ожидающий ровно столько, сколько необходимо. WebDriverWait в комбинации с ExpectedCondition является одним из таких способов.

</p><pre><code class="python">from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

driver = webdriver.Firefox()
driver.get("http://somedomain/url_that_delays_loading")
try:
    element = WebDriverWait(driver, 10).until(
        EC.presence_of_element_located((By.ID, "myDynamicElement"))
    )
finally:
    driver.quit()
</code></pre><p>
Этот код будет ждать 10 секунд до того, как отдаст исключение TimeoutException или если найдет элемент за эти 10 секунд, то вернет его. WebDriverWait по умолчанию вызывает ExpectedCondition каждые 500 миллисекунд до тех пор, пока не получит успешный return. Успешный return для ExpectedCondition имеет тип Boolean и возвращает значение true, либо возвращает not null для всех других ExpectedCondition типов.

</p><b>Ожидаемые условия</b> <p>
Существуют некие условия, которые часто встречаются при автоматизации веб-сайтов. Ниже перечислены реализации каждого. Связки в Selenium Python предоставляют некоторые удобные методы, так что вам не придется писать класс expected_condition самостоятельно или же создавать собственный пакет утилит.

</p><ul>
<li>title_is</li>
<li>title_contains</li>
<li>presence_of_element_located</li>
<li>visibility_of_element_located</li>
<li>visibility_of</li>
<li>presence_of_all_elements_located</li>
<li>text_to_be_present_in_element</li>
<li>text_to_be_present_in_element_value</li>
<li>frame_to_be_available_and_switch_to_it</li>
<li>invisibility_of_element_located</li>
<li>element_to_be_clickable — it is Displayed and Enabled.</li>
<li>staleness_of</li>
<li>element_to_be_selected</li>
<li>element_located_to_be_selected</li>
<li>element_selection_state_to_be</li>
<li>element_located_selection_state_to_be</li>
<li>alert_is_present</li>
</ul>
<pre><code class="python">from selenium.webdriver.support import expected_conditions as EC

wait = WebDriverWait(driver, 10)
element = wait.until(EC.element_to_be_clickable((By.ID,'someid')))
</code></pre><p>
Модуль expected_conditions уже содержит набор предопределенных условий для работы с WebDriverWait.

</p><h2>5.2 Неявные ожидания</h2><p>
Неявное ожидание указывает WebDriver'у опрашивать DOM определенное количество времени, когда пытается найти элемент или элементы, которые недоступны в тот момент. Значение по умолчанию равно 0. После установки, неявное ожидание устанавливается для жизни экземпляра WebDriver объекта.

</p><pre><code class="python">from selenium import webdriver

driver = webdriver.Firefox()
driver.implicitly_wait(10) # seconds
driver.get("http://somedomain/url_that_delays_loading")
myDynamicElement = driver.find_element_by_id("myDynamicElement")
</code></pre><p>
Перейти к следующей главе: </p><a href="http://habrahabr.ru/post/273115/">Объекты Страницы</a>
<p>
P.S.: Пользователь  </p><a href="http://habrahabr.ru/users/penguino/" class="user_link">penguino</a><p> по какой-то причине перестал делать дальнейшие переводы документации, поэтому я решил взять на себя смелость сделать перевод следующей главы.
      </p><p class="clear"/>
    </div>

    
  </div></body></html>