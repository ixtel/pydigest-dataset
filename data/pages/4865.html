<html><body><div><article class="markdown-body entry-content" itemprop="text"><h1><a id="user-content-vigilant" class="anchor" href="#vigilant" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Vigilant</h1>

<p><a href="http://jenkins.vigilantlabs.co.uk/job/Vigilant/"><img src="https://camo.githubusercontent.com/397638ce487d7e362429b5aaf63e013adde84785/687474703a2f2f6a656e6b696e732e766967696c616e746c6162732e636f2e756b2f6275696c645374617475732f69636f6e3f6a6f623d566967696c616e74" alt="Build Status" data-canonical-src="http://jenkins.vigilantlabs.co.uk/buildStatus/icon?job=Vigilant"/></a>
<a href="/redbrain/vigilant/blob/master/LICENSE"><img src="https://camo.githubusercontent.com/9e700fcd5dd47fa817872997918e8f741b9c4403/687474703a2f2f622e7265706c2e63612f76312f4c6963656e73652d4d49542d7265642e706e67" alt="MIT License" data-canonical-src="http://b.repl.ca/v1/License-MIT-red.png"/></a></p>

<p>Vigilant provides application driven stats monitoring. When you integrate your application
with the Daemon bindings/library every time your application starts a daemon is created and
all other processes will attach to this daemon sending watch/log/alert messages which in turn
are delivered to a datastore. Because your own applications know their pid (os.getpid()) you no
longer need to manage your monitoring with runner scripts.</p>

<h2><a id="user-content-screenshots" class="anchor" href="#screenshots" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Screenshots</h2>

<p>Dynamic cluster model visualized using vis.js.
<a href="/redbrain/vigilant/blob/master/screenshots/overview.png" target="_blank"><img src="/redbrain/vigilant/raw/master/screenshots/overview.png" alt="Overview" title="Overview"/></a></p>

<p>Real-time graphs using the web-socket api using vis.js.
<a href="/redbrain/vigilant/blob/master/screenshots/real-time.png" target="_blank"><img src="/redbrain/vigilant/raw/master/screenshots/real-time.png" alt="Real-Time" title="Real-Time"/></a></p>

<h2><a id="user-content-tutorial" class="anchor" href="#tutorial" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Tutorial</h2>

<p>Detailed Setup tutorial can be found here <a href="https://github.com/redbrain/vigilant/wiki/QuickSetup">https://github.com/redbrain/vigilant/wiki/QuickSetup</a></p>

<h2><a id="user-content-deps" class="anchor" href="#deps" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Deps</h2>

<p>You will require Open/Oracle JDK &gt;= 1.7, Python &gt;= 3.4, Bower.</p>

<p>Mac OSX</p>

<div class="highlight highlight-source-shell"><pre><span class="pl-c"># download orcale jdk.</span>
$ brew install python3 npm
$ npm install -g bower</pre></div>

<p>Ubuntu</p>

<div class="highlight highlight-source-shell"><pre>$ sudo apt-get install default-jdk python3.4 nodejs
$ npm install -g bower</pre></div>

<h3><a id="user-content-setup-daemon-agent" class="anchor" href="#setup-daemon-agent" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setup Daemon Agent</h3>

<p>Currently daemon2 is a WIP and not ready but Daemon is proof of concept. It requires python &gt;= 3.4</p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">cd</span> daemon
$ sudo pip3 install -r requirements.txt
$ ./daemon.py -c etc/vigilant/vigilant.json --start</pre></div>

<p>Editing the vigilant.json declares where data is sent and the protocol. Currently only udp is supported by the datastore.
And i aim to keep using UDP as the main protocol. And use ack's for alerts/triggers from code to ensure they are sent.</p>

<p>Using --stop or --status will stop the daemon or show status of what the agent is watching and sending the data to respectively.</p>

<p>Watch another process:</p>

<div class="highlight highlight-source-shell"><pre>$ ps aux <span class="pl-k">|</span> grep -i spotify <span class="pl-k">|</span> grep -v grep
redbrain        54243   0.0  0.7  3465888  59412   <span class="pl-k">??</span>  S     4:32pm   4:06.33 /Applications/Spotify.app/Contents/MacOS/Spotify

$ ./daemon.py -c etc/vigilant/vigilant.json --watch spotify:54243</pre></div>

<p>If the process dies vigilant will stop watching the process automatically.</p>

<h3><a id="user-content-setup-datastore" class="anchor" href="#setup-datastore" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Setup Datastore</h3>

<p>Once an agent is running the data needs to be recieved. The datastore will accept all the data and provide functionality over it.
Written in Scala requires jdk &gt;= 1.7.</p>

<div class="highlight highlight-source-shell"><pre>$ <span class="pl-c1">cd</span> datastore
$ bower install
$ <span class="pl-c1">cd</span> etc/vigilant
$ <span class="pl-k">export</span> VIGILANT_HOME=<span class="pl-s"><span class="pl-pds">`</span><span class="pl-c1">pwd</span><span class="pl-pds">`</span></span>
$ <span class="pl-c1">cd</span> -
$ ./sbt
<span class="pl-k">&gt;</span> compile
<span class="pl-k">&gt;</span> <span class="pl-c1">test</span>
<span class="pl-k">&gt;</span> container:start</pre></div>

<p>Currently deploying the .war onto jetty or tomcat runner the websocket api doesnt work. Editing the vigilant configuration:</p>

<div class="highlight highlight-source-js"><pre>{
    <span class="pl-s"><span class="pl-pds">"</span>transport<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>udp<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>port<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">8080</span>
    },

    <span class="pl-s"><span class="pl-pds">"</span>triggers<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
      <span class="pl-s"><span class="pl-pds">"</span>notification_threshold<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-c1">120</span> <span class="pl-c">// How often should notifications be send if data continues to activate triggers. To stop notification spam.</span>
    },

    <span class="pl-s"><span class="pl-pds">"</span>database<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
      <span class="pl-s"><span class="pl-pds">"</span>jdbc<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>jdbc:h2:./vigilant<span class="pl-pds">"</span></span> <span class="pl-c">// FIXME</span>
    },

    <span class="pl-s"><span class="pl-pds">"</span>twillo<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
        <span class="pl-s"><span class="pl-pds">"</span>account_sid<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>, # twillo details to enable twillo notifications
        <span class="pl-s"><span class="pl-pds">"</span>auth_token<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>from<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-pds">"</span></span>
    },

    <span class="pl-s"><span class="pl-pds">"</span>email<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
      <span class="pl-s"><span class="pl-pds">"</span>smtp_server<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, # email details doesnt handle tls<span class="pl-k">/</span>ssl like <span class="pl-smi">gmail</span>.<span class="pl-smi">com</span>
      <span class="pl-s"><span class="pl-pds">"</span>from<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>someone@email.com<span class="pl-pds">"</span></span>
    }
}</pre></div>

<p>View swagger api documentation: http://localhost:8080/api and use /api-doc as the location to the documenation.</p>

<p><a href="/redbrain/vigilant/blob/master/screenshots/swagger.png" target="_blank"><img src="/redbrain/vigilant/raw/master/screenshots/swagger.png" alt="Swagger" title="Swagger"/></a></p>

<h3><a id="user-content-front-end" class="anchor" href="#front-end" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Front-end</h3>

<p>The front-end webapp is a seperate project abstracting datastores.</p>

<div class="highlight highlight-source-shell"><pre>$ sudo pip3 install -r requirements.txt
$ bower install
$ ./dashboard.py</pre></div>

<p>Go to http://localhost:5000/#/dashboard?store=http://localhost:8080</p>

<h2><a id="user-content-daemon" class="anchor" href="#daemon" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Daemon</h2>

<p>The proof-of-concept daemon, this is being re-written in C/C++ to increase portability and
simplicity of language bindings. Currently because this is written in Python3 Node bindings require
python3 to be installed which isn't very elegant.</p>

<h2><a id="user-content-daemon-2" class="anchor" href="#daemon-2" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Daemon 2</h2>

<p>This is a WIP new Daemon written in C/C++ to increase the protability and simplicity of adding simple dependancies.</p>

<h2><a id="user-content-datastore" class="anchor" href="#datastore" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Datastore</h2>

<p>The scala data-store listens for the real-time data and in turn provides a rest-api for working with
this. The api is fully documented at http://localhost:8080/api using swagger. The web-socket api isn't
supported by swagger but it is there.</p>

<h2><a id="user-content-front-end-1" class="anchor" href="#front-end-1" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" role="img" version="1.1" viewbox="0 0 16 16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"/></svg></a>Front-end</h2>

<p>This is the current front-end it needs more work but its working quite well for now. It simply uses the
data-store rest-api to access the monitoring data.</p>
</article>
  </div></body></html>