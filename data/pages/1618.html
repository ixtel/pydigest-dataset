<html><body><div><div class="col-md-12">
				<p dir="ltr">Anyone who knows me will know that Django is my favourite web framework. On the second of September 2014, Django 1.7 was finally released to the public after a much anticipated wait. Some of the <a href="https://docs.djangoproject.com/en/dev/releases/1.7/">new features coming out in 1.7</a> include App Loading refactoring, custom Queryset methods and a bunch of minor updates to make Django development smoother than it has ever been before.</p>
<p dir="ltr">However, the most exciting feature present in the new version is <em>database schema migration management</em>. This feature update was driven primarily by <a href="http://www.aeracode.org/">Andrew Godwin</a>, after a <a href="https://www.kickstarter.com/projects/andrewgodwin/schema-migrations-for-django">successful Kickstarter campaign</a> to work on the integration. Andrew is the author of the original schema migration package <a href="http://south.aeracode.org/">South</a> and the entire community is forever grateful for the contributions he has given to the platform.</p>
<p dir="ltr">When I first used Twilio, I stumbled upon <a href="https://github.com/rdegges">Randall Degges</a>’ helper library for Django, <a href="https://github.com/rdegges/django-twilio">django-twilio</a>. I offered my technical support to Randall after emailing him about the fantastic library he created. After some great Python banter he let me have access to the repository to help continue the work he started.</p>
<p dir="ltr">With the advent of Django 1.7, Django Reusable Apps (the term used to refer to plugins) will need to be updated to support both Django 1.7 migrations and pre-Django 1.7 database migrations.</p>
<p dir="ltr">I recently had to update the django-twilio reusable app to do just this and I decided to document the procedure in order to provide other maintainers with a quick how-to on easily updating their own projects.</p>
<p dir="ltr">This guide only covers database migrations management support for Django 1.7, no other new 1.7 features.</p>
<h1 dir="ltr">What We’ll Cover</h1>
<p dir="ltr">
</p><p dir="ltr">This guide assumes you are familiar with Python, virtualenv, PyPI and Django open source project development. Even so, to keep up with <a href="http://legacy.python.org/dev/peps/pep-0020/">The Zen of Python</a>, I’m going to be explicit about the steps required to reliably update your Django reusable app.</p>
<p dir="ltr">In this guide I’ll cover:</p>
<ul>
<li>Setting up two separate virtual environments for Django 1.7 and Django 1.6 respectively.</li>
<li>Updating the migrations files to support Django 1.7 and Django 1.6</li>
<li>Running the migrations for your Django reusable app in both versions</li>
<li>Updating the documentation to cover both versions of Django</li>
</ul>
<h1 dir="ltr">Configuring Virtual Environments</h1>
<p dir="ltr">
</p><p dir="ltr">The quickest, most reliable way to test compatibility with both Django 1.7 and Django 1.6 is to install both versions on separate <a href="https://pypi.python.org/pypi/virtualenv/1.7.1.2">virtual environments</a>. If you are unfamiliar with virtualenv, it is a tool that allows you to “sandbox” Python development environments so you do not encounter dependency issues from multiple projects with multiple versions.</p>
<p dir="ltr">The new virtual environments will be directories within the root of your project. You will need to <em>cd</em> into the root of your project directory.</p>
<p dir="ltr">I am going to be using the word “django-package” to refer to the Django reusable app we are updating, be sure to substitute it with the name of your own reusable app. I’ve also taken screenshots of the procedure with django-twilio, to give you visual support.</p>
<p dir="ltr">With <a href="https://virtualenv.pypa.io/en/latest/virtualenv.html#installation">virtualenv installed</a> we can create new virtual environments with the following commands:</p>
<p/>

		<div id="crayon-56d598fd75bf1881376420" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75bf1881376420-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">virtualenv </span><span class="crayon-v">venv1</span><span class="crayon-sy">.</span><span class="crayon-cn">7</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75bf1881376420-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">virtualenv </span><span class="crayon-v">venv1</span><span class="crayon-sy">.</span><span class="crayon-cn">6</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr">This will add a bunch of folders into a new <em>venv1.7/</em> and <em>venv1.6/</em> directory which will be filled with Python packages later.</p>
<p dir="ltr">Your django reusable app root directory should now have two extra child directories like so:</p>
<p/>

		<div id="crayon-56d598fd75c04492381541" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c04492381541-1"><span class="crayon-v">django</span><span class="crayon-o">-</span><span class="crayon-v">package</span><span class="crayon-o">/</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c04492381541-2"><span class="crayon-h">    </span><span class="crayon-v">venv1</span><span class="crayon-sy">.</span><span class="crayon-cn">6</span><span class="crayon-o">/</span></p><p class="crayon-line" id="crayon-56d598fd75c04492381541-3"><span class="crayon-h">    </span><span class="crayon-v">venv1</span><span class="crayon-sy">.</span><span class="crayon-cn">7</span><span class="crayon-o">/</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c04492381541-4"><span class="crayon-h">    </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-sy">.</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h1 dir="ltr">Installing Django 1.7 And Django 1.6</h1>
<p dir="ltr">To install Django 1.7 into our <em>venv1.7/</em> directory we first need to activate the virtual environment using this terminal command:</p>
<p/>

		

<p/>
<p dir="ltr">This will prepend your terminal command line with the name of the virtual environment you’re currently in:</p>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh6.googleusercontent.com/XYAaRibIyq2_NRHkEL8PhUnbr_NNQJyK1JZmXc6WY2CNNo22n_SWIm85Tm_uBpg6Ej2H_O8qoJHQjUNGbqT5g9aYmKgZ6CJrFU0JP-7H_U2p-gA15vg2bRjO99zv1MYzAw"/></p>
<p dir="ltr">We can then install Django1.7 (and any other requirements your project needs) with the following terminal commands:</p>
<p/>

		<div id="crayon-56d598fd75c18934011384" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c18934011384-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">pip </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">requirements</span><span class="crayon-sy">.</span><span class="crayon-i">txt</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c18934011384-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">pip </span><span class="crayon-e">install </span><span class="crayon-v">django</span><span class="crayon-o">==</span><span class="crayon-cn">1.7</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh6.googleusercontent.com/drRApOHMVvLtTSnnsuwXXjDKOMZsw34MRxRbhToOfxqTLubFGHbV7IVTJTtcIRXv7zuTidYaDMkaGEMuCf83kqTPIJQNO9jkby775Wuk0mdZ8oH3u3nWuIpnNYx6OgSX-w"/></p>
<p dir="ltr">You can exit the <em>venv1.7/</em> virtual environment with the terminal command:</p>
<p/>

		

<p/>
<p dir="ltr">At this point, you will need to activate the <em>venv1.6/</em> directory using the same commands as above (but substituting “venv1.7” with “venv1.6”) and then install the latest version of Django 1.6 and other requirements with the following terminal command:</p>
<p/>

		<div id="crayon-56d598fd75c2c624745056" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c2c624745056-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">venv1</span><span class="crayon-sy">.</span><span class="crayon-cn">6</span><span class="crayon-o">/</span><span class="crayon-k ">bin</span><span class="crayon-o">/</span><span class="crayon-i">activate</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c2c624745056-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">pip </span><span class="crayon-v">install</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">requirements</span><span class="crayon-sy">.</span><span class="crayon-i">txt</span></p><p class="crayon-line" id="crayon-56d598fd75c2c624745056-3"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">pip </span><span class="crayon-e">install </span><span class="crayon-v">django</span><span class="crayon-o">==</span><span class="crayon-cn">1.6.7</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>We’ll also need to install South in this virtual environment too, if it isn’t already installed:</p>

		

<p/>
<p dir="ltr">Now we have:</p>
<ul>
<li>A virtual environment called <em>venv1.7/</em> with Django 1.7 installed</li>
<li>A virtual environment called <em>venv1.6/</em> with Django 1.6.7  and South 1.0 installed</li>
</ul>
<p dir="ltr">With both versions of Django ready we can now start updating our reusable app to support them!</p>
<h1 dir="ltr">Support All The Djangos!</h1>
<p dir="ltr">The nitty gritty of updating a Django reusable app to support both versions of Django migrations boils down to two things:</p>
<ul>
<li>Renaming the old migrations directory to south_migrations</li>
<li>Using Django 1.7 to build new migrations for your project</li>
</ul>
<p dir="ltr">The first step is dead simple: just rename the old migrations folder in your project (usually in the same directory as models.py) to <em>south_migrations</em>. This directory will now be used by South to run migrations for projects that are not on Django 1.7. You will also want to remove all the old .pyc files in this directory using the following terminal command:</p>
<p/>

		<div id="crayon-56d598fd75c40678659235" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c40678659235-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">rm</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">rf </span><span class="crayon-v">django_package</span><span class="crayon-o">/</span><span class="crayon-v">south_migrations</span><span class="crayon-o">/</span><span class="crayon-o">*</span><span class="crayon-sy">.</span><span class="crayon-v">pyc</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr">The second step is a bit more complex: you will need an existing Django project in order to run the <a href="https://docs.djangoproject.com/en/dev/ref/django-admin/#django-admin-makemigrations">makemigrations</a> command used by Django 1.7 to make the new migrations files.</p>
<p dir="ltr">In the Django-twilio project, we use a Django project called <a href="https://github.com/rdegges/django-twilio/tree/master/test_project">test_project</a> that has all the settings needed by Django to build new migrations. This project is a default project with nothing additional added and is used purely for creating or updating migrations files. I’ve found this is a pretty reliable way of updating migrations, but if you know a better way, please tell me!</p>
<p dir="ltr">From within django-package directory, we need to activate the venv1.7 virtual environment:</p>
<p/>

		<div id="crayon-56d598fd75c4a025526517" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c4a025526517-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-sy">.</span><span class="crayon-o">/</span><span class="crayon-v">django1</span><span class="crayon-sy">.</span><span class="crayon-cn">7</span><span class="crayon-o">/</span><span class="crayon-k ">bin</span><span class="crayon-o">/</span><span class="crayon-v">activate</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>We can then build a new Django1.7 project, called <em>test_project</em>, with the following terminal command:</p>

		<div id="crayon-56d598fd75c54592047690" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c54592047690-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">venv1</span><span class="crayon-sy">.</span><span class="crayon-cn">7</span><span class="crayon-o">/</span><span class="crayon-k ">bin</span><span class="crayon-o">/</span><span class="crayon-v">django</span><span class="crayon-o">-</span><span class="crayon-v">admin</span><span class="crayon-sy">.</span><span class="crayon-e">py </span><span class="crayon-e">startproject </span><span class="crayon-v">test_project</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr">In the test project, we need to add our Django reusable app to the list of installed apps, in <em>test_project/test_project/settings.py</em>:</p>
<p/>

		<div id="crayon-56d598fd75c5e134069657" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c5e134069657-1"><span class="crayon-v">INSTALLED_APPS</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c5e134069657-2"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.admin'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d598fd75c5e134069657-3"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.auth'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c5e134069657-4"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.contenttypes'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d598fd75c5e134069657-5"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.sessions'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c5e134069657-6"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.messages'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d598fd75c5e134069657-7"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.staticfiles'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c5e134069657-8"><span class="crayon-h">    </span><span class="crayon-c"># Our Django reusable app goes here</span></p><p class="crayon-line" id="crayon-56d598fd75c5e134069657-9"><span class="crayon-h">    </span><span class="crayon-s">'django_package'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c5e134069657-10"><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr">You may need to copy/paste the <em>django_package</em> directory (your reusable app) into the <em>test_project</em> too, this can be done simply:</p>
<p/>

		<div id="crayon-56d598fd75c68578782960" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c68578782960-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">cp</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-e">django_package </span><span class="crayon-v">test_project</span><span class="crayon-o">/</span><span class="crayon-v">django_package</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>Finally, we can run the <em>makemigrations</em> command:</p>

		<div id="crayon-56d598fd75c72637811767" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c72637811767-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">test_project</span><span class="crayon-o">/</span><span class="crayon-v">manage</span><span class="crayon-sy">.</span><span class="crayon-e">py </span><span class="crayon-e">makemigrations </span><span class="crayon-v">django_package</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<h1 dir="ltr">What Happens?</h1>
<p dir="ltr">
</p><p dir="ltr">Based on the project structure we’ve laid out, the following will happen:</p>
<ul>
<li>Python will execute the makemigrations command through the <a href="https://github.com/rdegges/django-twilio/blob/master/manage.py">manage.py</a> file in the <em>test_project</em> project.</li>
<li>Based on the <a href="https://github.com/rdegges/django-twilio/blob/master/test_project/settings.py">settings.py</a> in the <em>test_project</em> folder, Django 1.7 will check the <em>django_package</em> reusable app for any changes. Because this is the first time – there will be no migrations, so a new migration file must be created!</li>
<li>Django 1.7 will generate the new migrations files:</li>
</ul>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh4.googleusercontent.com/v780JnzbWO-mLXA8bJS-NsOPbVbdlog7xmYMaw3G2SnN8BKiA0o0y2BF1r2EwOaCO4lgVmzqLasCNanv9CouYHxzVjx7nVz4_S7gN6qINA54ImpTG5p5jM4kehJ_HMqbaw"/></p>
<p dir="ltr"><em>Here we see the django_twilio example that I did earlier</em></p>
<p dir="ltr">If Django gives the warning “No changes detected in app” try to remove all the old *.pyc files.</p>
<p dir="ltr">Et voilà: Django 1.7 migration support in your reusable app! Wasn’t that easy?</p>
<h1 dir="ltr">Testing Everything Out</h1>
<p dir="ltr">
</p><p dir="ltr">We’re not done yet however. A good Django reusable app will be fully tested with the latest version. With the Django1.7 virtualenv still active and your django_package in the project settings.py file, we can try to build the new migrations into the database with the terminal command:</p>
<p/>

		<div id="crayon-56d598fd75c7d403259401" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c7d403259401-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">manage</span><span class="crayon-sy">.</span><span class="crayon-e">py </span><span class="crayon-v">migrate</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>The output will be something similar to this:</p>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh4.googleusercontent.com/yNowmR_hFG57xOGz6OO6Kd_aeCZwNa8oDeh_3sSXVa5EkjnA65XJJNf8dAUftR2FCapiKdQMy0QYQuS7gslOaX7YD5mGrLKjP74afqldMcDesLH6oPniAIrkym8qxW-YQQ"/></p>
<p dir="ltr">In this example Django 1.7 has detected my <em>django_twilio</em> library and applied the migrations for the models. Perfect.</p>
<p dir="ltr">You should now be able to deactivate the current virtual environment with the terminal command:</p>
<p/>

		

<p/>
<p dir="ltr">and activate the django1.6 virtual environment with:</p>
<p/>

		<div id="crayon-56d598fd75c90746755090" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c90746755090-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">source </span><span class="crayon-v">venv1</span><span class="crayon-sy">.</span><span class="crayon-cn">6</span><span class="crayon-o">/</span><span class="crayon-k ">bin</span><span class="crayon-o">/</span><span class="crayon-v">activate</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p>We will need to add South to the list of installed apps quickly:</p>

		<div id="crayon-56d598fd75c9a872480837" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75c9a872480837-1"><span class="crayon-v">INSTALLED_APPS</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c9a872480837-2"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.admin'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d598fd75c9a872480837-3"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.auth'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c9a872480837-4"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.contenttypes'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d598fd75c9a872480837-5"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.sessions'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c9a872480837-6"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.messages'</span><span class="crayon-sy">,</span></p><p class="crayon-line" id="crayon-56d598fd75c9a872480837-7"><span class="crayon-h">    </span><span class="crayon-s">'django.contrib.staticfiles'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c9a872480837-8"><span class="crayon-h">    </span><span class="crayon-c"># Our Django reusable app goes here</span></p><p class="crayon-line" id="crayon-56d598fd75c9a872480837-9"><span class="crayon-h">    </span><span class="crayon-s">'django_package'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c9a872480837-10"><span class="crayon-h">    </span><span class="crayon-c"># South goes here:</span></p><p class="crayon-line" id="crayon-56d598fd75c9a872480837-11"><span class="crayon-h">    </span><span class="crayon-s">'south'</span><span class="crayon-sy">,</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75c9a872480837-12"><span class="crayon-sy">)</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr">The Django 1.6 style of handling migrations, using South, should still work with the two terminal command. You’re likely to be asked to add an Admin user to Django, you can type “no” in this case, we won’t need to:</p>
<p/>

		<div id="crayon-56d598fd75ca4211517234" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75ca4211517234-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">test_project</span><span class="crayon-o">/</span><span class="crayon-v">manage</span><span class="crayon-sy">.</span><span class="crayon-e">py </span><span class="crayon-i">syncdb</span></p><p class="crayon-line crayon-striped-line" id="crayon-56d598fd75ca4211517234-2"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-e">python </span><span class="crayon-v">test_project</span><span class="crayon-o">/</span><span class="crayon-v">manage</span><span class="crayon-sy">.</span><span class="crayon-e">py </span><span class="crayon-e">migrate </span><span class="crayon-v">django_package</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh6.googleusercontent.com/k5XdeLXT815R6tkNqKv1G3xvchevnAJUNSpb3Zbsl75NWf53jNfebLVdysg0aYH5DST7XVniLQrJ4QwaN8Re5QenAV6yrQ3556bPpLRdQdgnXkbqsqsqMBgWn96vZcC3ow"/></p>
<p dir="ltr">The first command will sync the standard Django models and South. The second command then uses South to migrate your Django reusable app migrations separately. If the old migrations directory has been renamed to <em>south_migrations</em> correctly, you should see a similar successful output like in the image above.</p>
<p dir="ltr">If you have issues, try updating South to South 1.0 and removing old *.pyc files.</p>
<p dir="ltr">Finally, copy the reusable app directory back out of the <em>test_project</em> and over the old root project folder:</p>
<p/>

		<div id="crayon-56d598fd75cae588897865" class="crayon-syntax crayon-theme-github crayon-font-consolas crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover expand">
		
			
			<p class="crayon-info"/>
			<p class="crayon-plain-wrap"/>
			<div class="crayon-main">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					
				</td>
						<td class="crayon-code"><div class="crayon-pre"><p class="crayon-line" id="crayon-56d598fd75cae588897865-1"><span class="crayon-sy">$</span><span class="crayon-h"> </span><span class="crayon-v">cp</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">r</span><span class="crayon-h"> </span><span class="crayon-v">test_project</span><span class="crayon-o">/</span><span class="crayon-e">django_package </span><span class="crayon-v">django_package</span><span class="crayon-o">/</span></p></div></td>
					</tr>
				</table>
			</div>
		</div>

<p/>
<p dir="ltr">You’re now free to commit the changes to git and release a new version.</p>
<h1 dir="ltr">But We’re Still Not Finished</h1>
<p dir="ltr">
</p><p dir="ltr">Documentation is a key part of any good software, and Django reusable apps are no exception. With the advent of Django 1.7, it is crucial that you provide documentation on setting up your reusable app with the new Django 1.7 and older versions. Don’t forget to be verbose about which commands are required for which versions. The documentation for Django-twilio provides details on Django 1.6 and lower:</p>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh4.googleusercontent.com/JoFIwT6UartC8pQn3A4zZhGjFxdYxrch5O3OoWokjt4cEqw95xrDCCTFqpWe-PHq2afdJWwvmCEao4rVR0cHF0LBzWUyEW-TZfy3JNoQWkJRn3LNGMA3nFx8ubezq20JcA"/></p>
<p dir="ltr">as well as steps for Django 1.7:</p>
<p dir="ltr"><img class="aligncenter" alt="" src="https://lh6.googleusercontent.com/9Wrmeh6yelPE-3R8THc1X44muPwO5rDPxjSXbOZfL_P_Qx1O9WEwpXF_aAuHqbeL1gTiTNmNhuP1Jj0Z0f21FI9uTSLnXF8IqCLMTYR6x4H-A4nIIirCdfRw1Ujsnoc0jg"/></p>
<p dir="ltr">For inspiration, I recommend reading the <a href="http://django-twilio.readthedocs.org/en/latest/install.html#databases-for-django-1-6-or-lower">documentation page for django-twilio</a>.</p>
<h1 dir="ltr">Uploading to PyPI</h1>
<p dir="ltr">
</p><p dir="ltr">This guide assumes you’re well versed in uploading new versions of your Django reusable app to <a href="http://pypi.python.org">PyPI</a>, the online repository of Python and Django reusable apps. You will now need to upload your updated Django reusable for other developers to take advantage of the new Django 1.7 updates. If you’re a bit rusty or unsure how to properly package and upload a new version to PyPI, there is a fantastic guide on Twilio by my <a href="https://www.twilio.com/blog/2014/08/website-sms-alerts-with-the-plushcap-python-package-part-1.html">fellow Pythonista Matt Makai</a>. There is no strict rule on what type of version bump you’ll require, but I suggest a 0.N update as this change is significant. If you’re not sure check out the <a href="http://semver.org/">semantic versioning rules</a>.</p>
<h1 dir="ltr">Final Steps</h1>
<p dir="ltr">
</p><p dir="ltr">Today we just worked through what is needed to update your Django reusable app to support the new migrations framework included in Django 1.7. The additional features of Django 1.7 are game changing and are sure to make web application development with Django a smoother and easier experience. If this guide has been useful, or you wish to ask a question, get in touch with me at <a href="mailto:paul@twilio.com">paul@twilio.com</a>, on <a href="https://twitter.com/phalt_">twitter</a>, or leave a comment below.</p>
			</div>
					</div></body></html>