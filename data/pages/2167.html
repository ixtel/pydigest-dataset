<html><body><div><div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr">

<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>Bandit is a security linter for Python source code, utilizing the <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/ast.html">ast</a> module from the Python standard library.
</p><p>The ast module is used to convert source code into a parsed tree of Python syntax nodes. Bandit allows users to define custom tests that are performed against those nodes. At the completion of testing, a report is generated that lists security issues identified within the target source code.
</p><p>Bandit is currently a stand-alone tool which can be downloaded by end-users and run against arbitrary source code.  As it matures and is proven to be useful, we see it being a possible addition to OpenStack CI gate tests with non-voting and eventually voting capabilities.
</p><p>Bandit can be obtained by cloning the repository at https://git.openstack.org/openstack/bandit.git.  The <a rel="nofollow" class="external text" href="http://git.openstack.org/cgit/openstack/bandit/tree/README.rst">README.rst</a> file contains documentation regarding installation, usage, and configuration.
</p>
<h2><span class="mw-headline" id="Contributing">Contributing</span></h2>
<p>Bandit makes use of the OpenStack CI infrastructure provided through OpenStack:
</p>

<p><br/>
An easy way to contribute is to write a plugin/test that will allow Bandit to identify more security issues.  Extensions and improvements to the underlying framework are also welcomed, although we'll be attempting to maintain stability in the interface that is presented to plugins.
</p><p>See <a rel="nofollow" class="external text" href="http://docs.openstack.org/infra/manual/developers.html#development-workflow">Development Workflow</a> for information on the general contribution/review workflow.
</p>
<h2><span class="mw-headline" id="Gate_Testing_with_Bandit">Gate Testing with Bandit</span></h2>
<p>Bandit can help maintain the security of OpenStack projects when it's used as a gate test.  Projects such as <a rel="nofollow" class="external text" href="http://docs.openstack.org/developer/keystone/">Keystone</a> have created a gate test which runs Bandit to ensure that common security code mistakes are not introduced when code is modified.  New: you now have two ways to set up a Bandit gate and we'll cover the steps for both below.
</p>
<h3><span class="mw-headline" id="Full_run_Bandit_gate:">Full run Bandit gate:</span></h3>
<p>This option works well for projects that already have clean Bandit runs.  To set up a full run Bandit gate for an OpenStack project, follow these steps:
</p>
<ol><li> (optional) Add a Bandit config for your project. This determines what bandit checks will run on the project. Some checks might not make sense for the project, or the test doesn't pass when you first enable it. Here's the Keystone <a rel="nofollow" class="external text" href="https://github.com/openstack/keystone/blob/master/bandit.yaml">bandit.yaml</a>.</li>
<li> Add "bandit" (the package name on pypi) to the test-requirements.txt file. While running Bandit only actually requires the bandit package, it's easiest for now to just leave it in with the rest of the test requirements.  This file lists the requirements for creating the virtual environment Bandit runs in and gets updated automatically in most projects by the OpenStack proposal bot.</li>
<li> Add a tox environment to run Bandit.  Keystone's is here: <a rel="nofollow" class="external text" href="https://review.openstack.org/#/c/171772/2/tox.ini">tox.ini</a> in the [testenv:bandit] section</li>
<li> Add the Bandit job to the list of jobs for your project in OpenStack Infra.  Keystone implemented this change here: <a rel="nofollow" class="external text" href="https://review.openstack.org/#/c/157595/5/jenkins/jobs/projects.yaml">jenkins/jobs/projects.yaml</a></li>
<li> Add the Bandit gate to your project section in OpenStack Infra.  For an example, here is Keystone's job: <a rel="nofollow" class="external text" href="https://review.openstack.org/#/c/157595/5/zuul/layout.yaml">zuul/layout.yaml</a>.  Note: for Keystone Bandit is currently set up as non-voting.  This means that failures in Bandit won't cause Jenkins to reject the change.  This has the advantage that it will never cause your change to fail, but it also doesn't allow Bandit to prevent anything.  To make the Bandit check voting set "voting: true".</li>
<li> Modify the "check" section of your project in OpenStack infra to run Bandit as a check.  For an example see this change: <a rel="nofollow" class="external text" href="https://review.openstack.org/#/c/170569/2/zuul/layout.yaml">Keystone add Bandit check</a>.</li>
<li> Run this way for a while and then make it voting!</li></ol>
<p><br/>
Steps 1-3 should be done in one commit for your project, and steps 4-6 will be a separate commit for OpenStack Infra.  If you have any questions or comments please contact tmcpeak in #openstack-security on Freenode IRC.
</p>
<h3><span class="mw-headline" id="Bandit_Baseline_Gate">Bandit Baseline Gate</span></h3>
<p>This is the best option for projects which may have some legacy Bandit findings.  Just because a project has some pre-existing security issues doesn't mean Bandit can't help prevent new ones!  To set up a Bandit Baseline gate for an OpenStack project, follow these steps:
</p>
<ol><li> (optional) Add a Bandit config for your project. This determines what bandit checks will run on the project. Some checks might not make sense for the project, or the test doesn't pass when you first enable it. Here's the Keystone <a rel="nofollow" class="external text" href="https://github.com/openstack/keystone/blob/master/bandit.yaml">bandit.yaml</a>.</li>
<li> Add "bandit" (the package name on pypi) to the test-requirements.txt file. While running Bandit only actually requires the bandit package, it's easiest for now to just leave it in with the rest of the test requirements.  This file lists the requirements for creating the virtual environment Bandit runs in and gets updated automatically in most projects by the OpenStack proposal bot.</li>
<li> Add a tox environment to run the Bandit basline.  To do this we'll add two targets:
<ol><li>a standalone target "codesec" <a rel="nofollow" class="external text" href="https://github.com/openstack/bandit/blob/master/tox.ini#L31-L35">codesec tox target</a> which is useful for developers to check their changes</li>
<li>a "linters" target: <a rel="nofollow" class="external text" href="https://github.com/openstack/bandit/blob/master/tox.ini#L18-L23">linters tox target</a>.  By adding a linters target, we're extending our linters to run Bandit in addition to the normal flake8 tests.</li>
<li> In both cases the arguments for 'bandit-baseline' should be identical to what you want to pass into Bandit.  For example, if you created a config file above, you'll want to specify it with '-c myconfig.yaml'.  In the example above we're running: 'bandit-baseline -r bandit -ll -ii' which tells Bandit (and bandit-baseline) to run scan the 'bandit' directory recursively and filter medium+ severity and confidence issues.</li></ol></li>
<li> Change the the OpenStack infra zuul/layout.yaml for your project to use 'python-jobs-linters' instead of 'python-jobs' like we did for the Bandit project itself here: <a rel="nofollow" class="external text" href="https://review.openstack.org/#/c/260135/5/zuul/layout.yaml">zuul layout change example</a>.  This enables your project to use the 'linters' target in your python-jobs gate instead of just flake8.  Note: if you do this you'll have a voting Bandit gate.  You should make sure you're comfortable with Bandit and how it works before changing this.</li></ol>
<h2><span class="mw-headline" id="Profiles">Profiles</span></h2>
<p>By default Bandit runs all plugins that it finds in the plugins directory.  While this may be useful for doing a thorough manual review, for use cases such as automation and gate testing, this is probably overkill.  Luckily, Bandit allows a user to create profiles which run or exclude specific tests.  For example, here is the profile that the Keystone gate uses: <a rel="nofollow" class="external text" href="https://github.com/openstack/keystone/blob/master/bandit.yaml#L31">Keystone's Bandit Gate Profile</a> .
</p><p>Once a profile has been created, you can run it by using the "-c" command line option to point to the config file which contains your profile and "-p" to point to the specific profile you'd like to use.
</p>
<h2><span class="mw-headline" id="TODO">TODO</span></h2>
<p>TODO is now tracked using blueprints in Launchpad: <a rel="nofollow" class="external free" href="https://blueprints.launchpad.net/bandit">https://blueprints.launchpad.net/bandit</a>
</p>
<h2><span class="mw-headline" id="Projects_using_bandit">Projects using bandit</span></h2>

<p><br/>
</p>
<h2><span class="mw-headline" id="Team">Team</span></h2>
<p>Bandit is a tool from the <a rel="nofollow" class="external text" href="https://security.openstack.org">OpenStack Security</a> project.
</p><p>Core project team:
</p>
<ul><li> Jamie Finnigan (chair6)</li>
<li> Travis McPeak (tmcpeak)</li>
<li> Tim Kelsey (tkelsey)</li>
<li> Eric Brown (browne)</li>
<li> Ian Cordasco (sigmavirus24)</li>
<li> Stan Pitucha (viraptor)</li></ul>




</div>          </div></body></html>