<html><body><div><div class="post-text" itemprop="text">

<p>I'm interested in <a href="http://c2.com/cgi/wiki?ContinuationImplementation" rel="nofollow">continuations</a>, specifically in Python's C-API. From what i understand, the nature of continuations requires un-abstracting low-level calling conventions in order to manipulate the call stack as needed. I was fortunate enough to come across a few examples of these scattered <a href="https://github.com/python-greenlet/greenlet/blob/master/greenlet.c" rel="nofollow">here</a> and <a href="http://www.nightmare.com/~rushing/copython/coroutinemodule.c" rel="nofollow">there</a>. In the few examples i've come across, this un-abstraction is done using either clever C (with assumptions about the environment), or custom assembly.</p>

<p>However, what's cool about Python is that it has its own interpreter stack made up of <code>PyFrameObject</code>s. Assuming single-threaded applications for now, <strong>shouldn't it be enough to just switch in-and-out <code>PyFrameObjects</code>s to implement continuations in Python's C-API</strong>? Why do these authors even bother with the low-level stuff?</p>
    </div>
    </div></body></html>