<html><body><div><body class="page" id="readabilityBody">
   
     <p class="notifications-container"/>
   
      
      
      

     
      <div class="content">
        
  

  


  <dl class="package-metadata">
    
    
      <dt>Description:</dt>
      <dd>Messaging library for Python.</dd>
    
    
    <dt>Last update was:</dt>
    <dd>23 hours, 28 minutes ago</dd>
    <dt>Time to next update:</dt>
    <dd>33 minutes</dd>

    
    
      <dt>Versions:</dt>
      <dd>




      </dd>
  </dl>

  <div class="package-changes">
    <ul class="package-changes__version">
      


<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 7, 2015  <a class="tweet-button-small" href="https://twitter.com/intent/retweet?tweet_id=673795794307182593"><img src="https://allmychanges.com/static/allmychanges/img/tweet-btn-s.png" alt="Tweet"/></a></h5>
  <h6 class="package-version__source">Source: docs/changelog.rst</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 2.0.0.</p>
</li>
<li><p>No longer depends on <code><span>anyjson</span></code>.</p>
</li>
<li><p>New SQS transport</p>
<blockquote>
<div><p>Donated by NextDoor, with additional contributions from mdk.</p>
</div></blockquote>
</li>
<li><p>Redis: Priority 0 is now lowest, 9 is highest.
(<strong><span class="changelog-highlight-inc">backward incompatible</span></strong>)</p>
<blockquote>
<div><p>This to match how priorities in AMQP works.</p>
<p><span class="changelog-highlight-fix">Fix</span> contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p>Beanstalk: Priority 0 is now lowest, 9 is highest.
(<strong><span class="changelog-highlight-inc">backward incompatible</span></strong>)</p>
<blockquote>
<div><p>This to match how priorities in AMQP works.</p>
<p><span class="changelog-highlight-fix">Fix</span> contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p>Redis: now supports SSL using the <code><span>ssl</span></code> argument to
<code><span>Connection</span></code>.</p>
</li>
<li><p>Redis: Fanout exchanges are no longer visible between vhosts,
and fanout messages can be filtered by patterns.
(<strong><span class="changelog-highlight-inc">backward incompatible</span></strong>)</p>
<blockquote>
<div><p>It was possible to enable this mode previously using the
<code><span>fanout_prefix</span></code>, and <code><span>fanout_patterns</span></code>
transport options, but now these are enabled by default.</p>
<p>If you want to mix and match producers/consumers running different
versions you need to configure your kombu 3.x clients to also enable
these options:</p>
<div><div><pre><span/><span>&gt;&gt;&gt; </span><span>Connection</span><span>(</span><span>transport_options</span><span>=</span><span>{</span>
<span>    'fanout_prefix': True,</span>
<span>    'fanout_patterns': True,</span>
<span>})</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Exchange.delivery_mode now defaults to <code><span>None</span></code>, and the default
is instead set by <code><span>Producer.publish</span></code>.</p>
</li>
<li><p><code><span>Consumer</span></code> now supports a new <code><span>prefetch_count</span></code> argument,
which if provided will force the consumer to set an initial prefetch count
just before starting.</p>
</li>
<li><p>Virtual transports now stores <code><span>priority</span></code> as a property, not in
<code><span>delivery_info</span></code>, to be compatible with AMQP.</p>
</li>
<li><p><code><span>reply_to</span></code> argument to <code><span>Producer.publish</span></code> can now be
<code><span>Queue</span></code> instance.</p>
</li>
<li><p>Connection: There’s now a new method
<code><span>Connection.supports_exchange_type(type)</span></code> that can be used to check if the</p>
<blockquote>
<div><p>current transport supports a specific exchange type.</p>
</div></blockquote>
</li>
<li><p>SQS: Will now log the access key used when authentication fails.</p>
<blockquote>
<div><p>Contributed by Hank John.</p>
</div></blockquote>
</li>
<li><p>Added new <code><span>kombu.mixins.ConsumerProducerMixin</span></code> for consumers that
will also publish messages on a separate connection.</p>
</li>
<li><p>Messages: Now have a more descriptive <code><span>repr</span></code>.</p>
<blockquote>
<div><p>Contributed by Joshua Harlow.</p>
</div></blockquote>
</li>
<li><p>Async: HTTP client based on curl.</p>
</li>
<li><p>Async: Now uses <cite>poll</cite> instead of <cite>select</cite> where available.</p>
</li>
<li><p>MongoDB: Now supports priorities</p>
<blockquote>
<div><p>Contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p>Zookeeper: Transport now uses the built-in suport in kazoo to handle
failover when using a list of server names.</p>
<blockquote>
<div><p>Contributed by Joshua Harlow.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Jan. 27, 2015  <a class="tweet-button-small" href="https://twitter.com/intent/retweet?tweet_id=647514362316353536"><img src="https://allmychanges.com/static/allmychanges/img/tweet-btn-s.png" alt="Tweet"/></a></h5>
  <h6 class="package-version__source">Source: docs/changelog.rst</h6>

  

  

  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Feb. 28, 2016 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Now depends on <code><span>amqp</span></code> 1.4.9.</li>
<li>Redis: <span class="changelog-highlight-fix">Fixed</span> problem with auxilliary connections causing the main
consumer connection to be closed (Issue #550).</li>
<li>Qpid: No longer uses threads to operate, to ensure compatibility with
all environments (Issue #531).</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Feb. 28, 2016 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Redis: <span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> introduced in 3.0.31 where the redis transport always
connects to localhost, regardless of host setting.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Feb. 28, 2016 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Redis: <span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> introduced in 3.0.30 where socket was prematurely
disconnected.</li>
<li>Hub: <span class="changelog-highlight-inc">Removed</span> debug logging message: “Deregistered fd...” (Issue #549).</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Feb. 28, 2016 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p><span class="changelog-highlight-fix">Fixes</span> compatiblity with uuid in Python 2.7.11 and 3.5.1.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Kai Groner.</p>
</div></blockquote>
</li>
<li><p>Redis transport: Attempt at <span class="changelog-highlight-fix">fixing</span> problem with hanging consumer
after disconnected from server.</p>
</li>
<li><dl>
<dt>Event loop:</dt>
<dd><p>Attempt at <span class="changelog-highlight-fix">fixing</span> issue with 100% CPU when using the Redis transport,</p>
</dd>
</dl>
</li>
<li><p>Database transport: <span class="changelog-highlight-fix">Fixed</span> oracle compatiblity.</p>
<blockquote>
<div><p>An “ORA-00907: missing right parenthesis” error could manifest when using
an Oracle database with the database transport.</p>
<p><span class="changelog-highlight-fix">Fix</span> contributed by Deepak N.</p>
</div></blockquote>
</li>
<li><p>Documentation <span class="changelog-highlight-fix">fixes</span></p>
<blockquote>
<div><p>Contributed by Tommaso Barbugli.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Feb. 28, 2016 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p><span class="changelog-highlight-fix">Fixed</span> serialization issue for <code><span>bindings.as_dict()</span></code> (Issue #453).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Sergey Tikhonov.</p>
</div></blockquote>
</li>
<li><p>Json serializer wrongly treated bytes as <code><span>ascii</span></code>, not <code><span>utf-8</span></code>
(Issue #532).</p>
</li>
<li><p>MongoDB: Now supports pymongo 3.x.</p>
<blockquote>
<div><p>Contributed by Len Buckens.</p>
</div></blockquote>
</li>
<li><p>SQS: Tests passing on Python 3.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Felix Yan</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 7, 2015 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<p>:.. admonition:: Django transport migrations.</p>
<blockquote>
<div><p>If you’re using Django 1.8 and have already created the
kombu_transport_django tables, you have to run a fake initial migration:</p>
<div><div><pre><span>python manage.py migrate kombu_transport_django --fake-initial</span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>No longer compatible with South by default.</p>
<blockquote>
<div><p>To keep using kombu.transport.django with South migrations
you now need to configure a new location for the kombu migrations:</p>
<div><div><pre><span>SOUTH_MIGRATION_MODULES</span> <span>=</span> <span>{</span>
    <span>'kombu_transport_django'</span><span>:</span>
        <span>'kombu.transport.django.south_migrations'</span><span>,</span>
<span>}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Keep old South migrations in <code><span>kombu.south.migrations</span></code>.</p>
</li>
<li><p>Now works with Redis &lt; 2.10 again.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 7, 2015 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.4.7.</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> libSystem import error on some OS X 10.11 (El Capitan) installations.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Eric Wang.</p>
</div></blockquote>
</li>
<li><p>Now compatible with Django 1.9.</p>
</li>
<li><p>Django: Adds migrations for the database transport.</p>
</li>
<li><p>Redis: Now depends on py-redis 2.10.0 or later (Issue #468).</p>
</li>
<li><p>QPid: Can now connect as localhost (Issue #519).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Brian Bouterse.</p>
</div></blockquote>
</li>
<li><p>QPid: Adds support for <code><span>login_method</span></code> (Issue #502, Issue #499).</p>
<blockquote>
<div><p>Contributed by Brian Bouterse.</p>
</div></blockquote>
</li>
<li><p>QPid: Now reads SASL mechanism from broker string (Issue #498).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Brian Bouterse.</p>
</div></blockquote>
</li>
<li><p>QPid: Monitor thread now properly terminated on session close (Issue #485).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Brian Bouterse.</p>
</div></blockquote>
</li>
<li><p>QPid: <span class="changelog-highlight-fix">Fixed</span> file descriptor leak (Issue #476).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Jeff Ortel</p>
</div></blockquote>
</li>
<li><p>Docs: <span class="changelog-highlight-fix">Fixed</span> wrong order for entrypoint arguments (Issue #473).</p>
</li>
<li><p>ConsumerMixin: Connection error logs now include traceback (Issue #480).</p>
</li>
<li><p>BaseTransport now raises RecoverableConnectionError when disconnected
(Issue #507).</p>
</li>
<li><p>Consumer: Adds <code><span>tag_prefix</span></code> option to modify how consumer tags are
generated (Issue #509).</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Sept. 25, 2015 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixed</span> compatibility with py-redis versions before 2.10.3 (Issue #470).</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Sept. 25, 2015 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>pyamqp/librabbitmq now uses 5671 as default port when SSL is enabled
(Issue #459).</p>
</li>
<li><p>Redis: Now supports passwords in <code><span>redis+socket://:pass@host:port</span></code> URLs
(Issue #460).</p>
</li>
<li><p><code><span>Producer.publish</span></code> now defines the <code><span>expiration</span></code> property in support
of the <a href="https://www.rabbitmq.com/ttl.html">RabbitMQ per-message TTL extension</a>.</p>
<blockquote>
<div><p>Contributed by Anastasis Andronidis.</p>
</div></blockquote>
</li>
<li><p>Connection transport attribute now set correctly for all transports.</p>
<blockquote>
<div><p>Contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p>qpid: <span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> where the connectionw as not being closed properly.</p>
<blockquote>
<div><p>Contributed by Brian Bouterse.</p>
</div></blockquote>
</li>
<li><p><code><span>bindings</span></code> is now JSON serializable (Issue #453).</p>
<blockquote>
<div><p>Contributed by Sergey Tikhonov.</p>
</div></blockquote>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> typo in error when yaml is not installed (said <code><span>msgpack</span></code>).</p>
<blockquote>
<div><p>Contributed by Joshua Harlow.</p>
</div></blockquote>
</li>
<li><p>Redis: Now properly handles <a href="http://kombu.readthedocs.org/en/latest/changelog.html#id10"><span>``</span></a>TimeoutError raised by py-redis.</p>
<blockquote>
</blockquote>
</li>
<li><p>qpid: Adds additional string to check for when connecting to qpid.</p>
<blockquote>
<div><p>When we connect to qpid, we need to ensure that we skip to the next SASL
mechanism if the current mechanism fails. Otherwise, we will keep retrying the
connection with a non-working mech.</p>
<p>Contributed by Chris Duryee.</p>
</div></blockquote>
</li>
<li><p>qpid: Handle <code><span>NotFound</span></code> exceptions.</p>
<blockquote>
<div><p>Contributed by Brian Bouterse.</p>
</div></blockquote>
</li>
<li><p><code><span>Queue.__repr__</span></code> now makes sure return value is not unicode
(Issue #440).</p>
</li>
<li><p>qpid: <code><span>Queue.purge</span></code> incorrectly raised <code><span>AttributeErrror</span></code> if the
does not exist (Issue #439).</p>
<blockquote>
<div><p>Contributed by Brian Bouterse.</p>
</div></blockquote>
</li>
<li><p>Linux: Now ignores permission errors on epoll unregister.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Sept. 25, 2015 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>The <a href="http://qpid.apache.org/">Qpid</a> broker is supported for Python 2.x
environments. The Qpid transport includes full SSL support within Kombu. See
the <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.transport.qpid.html#module-kombu.transport.qpid" title="kombu.transport.qpid"><code><span>kombu.transport.qpid</span></code></a> docs for more info.</p>
<blockquote>
<div><p>Contributed by Brian Bouterse and Chris Duryee through support from Red Hat.</p>
</div></blockquote>
</li>
<li><p>Dependencies: extra[librabbitmq] now requires librabbitmq 1.6.0</p>
</li>
<li><p>Docstrings for <code><span>TokenBucket</span></code> did not match
implementation.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Jesse Dhillon.</p>
</div></blockquote>
</li>
<li><p><code><span>oid_from()</span></code> accidentally called <code><span>uuid.getnode()</span></code> but
did not use the return value.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Alexander Todorov.</p>
</div></blockquote>
</li>
<li><p>Redis: Now ignores errors when cosing the underlying connection.</p>
</li>
<li><p>Redis: Restoring messages will now use a single connection.</p>
</li>
<li><p><code><span>kombu.five.monotonic</span></code>: Can now be imported even if ctypes is not
available for some reason (e.g. App Engine)</p>
</li>
<li><p>Documentation: Improved example to use the <code><span>declare</span></code> argument to
<code><span>Producer</span></code> (Issue #423).</p>
</li>
<li><p>Django: <span class="changelog-highlight-fix">Fixed</span> <code><span>app_label</span></code> for older Django versions (<code><span>&lt;</span> <span>1.7</span></code>).
(Issue #414).</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Sept. 25, 2015 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Sept. 25, 2015 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>kombu.async: Min. delay between waiting for timer was always increased to
one second.</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> in itermessages where message is received after the with
statement exits the block.</p>
<blockquote>
</blockquote>
</li>
<li><dl>
<dt>Connection.autoretry: Now works with functions missing wrapped attributes</dt>
<dd><p>(<code><span>__module__</span></code>, <code><span>__name__</span></code>, <code><span>__doc__</span></code>).  <span class="changelog-highlight-fix">Fixes</span> #392.</p>
<p>Contributed by johtso.</p>
</dd>
</dl>
</li>
<li><p>Django: Now sets custom app label for <code><span>kombu.transport.django</span></code> to work
with recent changes in Django 1.7.</p>
</li>
<li><p>SimpleQueue <span class="changelog-highlight-inc">removed</span> messages from the wrong end of buffer (Issue #380).</p>
</li>
<li><p>Tests: Now using <code><span>unittest.mock</span></code> if available (Issue #381).</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>The wheel distribution did not support Python 2.6 by failing to list
the extra dependencies required.</li>
<li>Durable and auto_delete queues/exchanges can be be cached using
<code><span>maybe_declare</span></code>.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>A typo introduced in 3.0.17 caused kombu.async.hub to crash (Issue #360).</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p><code><span>kombu[librabbitmq]</span></code> now depends on librabbitmq 1.5.2.</p>
</li>
<li><p>Async: Event loop now selectively removes file descriptors for the mode
it failed in, and keeps others (e.g read vs write).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Roger Hu.</p>
</div></blockquote>
</li>
<li><p>CouchDB: Now works without userid set.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Latitia M. Haskins.</p>
</div></blockquote>
</li>
<li><p>SQLAlchemy: Now supports recovery from connection errors.</p>
<blockquote>
<div><p>Contributed by Felix Schwarz.</p>
</div></blockquote>
</li>
<li><p>Redis: Restore at shutdown now works when ack emulation is disabled.</p>
</li>
<li><p><a href="http://kombu.readthedocs.org/en/latest/reference/kombu.common.html#kombu.common.eventloop" title="kombu.common.eventloop"><code><span>kombu.common.eventloop()</span></code></a> accidentally swallowed socket errors.</p>
</li>
<li><p>Adds <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.utils.url.html#kombu.utils.url.sanitize_url" title="kombu.utils.url.sanitize_url"><code><span>kombu.utils.url.sanitize_url()</span></code></a></p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p><code><span>kombu[librabbitmq]</span></code> now depends on librabbitmq 1.5.1.</p>
</li>
<li><p>Redis: <span class="changelog-highlight-fix">Fixes</span> <code><span>TypeError</span></code> problem in <code><span>unregister</span></code> (Issue #342).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Tobias Schottdorf.</p>
</div></blockquote>
</li>
<li><p>Tests: Some unit tests accidentally required the <cite>redis-py</cite> library.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Randy Barlow.</p>
</div></blockquote>
</li>
<li><p>librabbitmq: Would crash when using an older version of <code><span>librabbitmq</span></code>,
now emits warning instead.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.4.5.</p>
</li>
<li><p>RabbitMQ 3.3 changes QoS semantics (Issue #339).</p>
<blockquote>
<div><p>See the RabbitMQ release notes here:
<a href="http://www.rabbitmq.com/blog/2014/04/02/breaking-things-with-rabbitmq-3-3/">http://www.rabbitmq.com/blog/2014/04/02/breaking-things-with-rabbitmq-3-3/</a></p>
<p>A new connection property has been added that can be used to detect
whether the remote server is using this new QoS behavior:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>Connection</span><span>(</span><span>'amqp://'</span><span>)</span><span>.</span><span>qos_behavior_matches_spec</span>
<span>False</span>
</pre></div>
</div>
<p>so if your application depends on the old semantics you can
use this to set the <code><span>apply_global</span></code> flag appropriately:</p>
<div><div><pre><span>def</span> <span>update_prefetch_count</span><span>(</span><span>channel</span><span>,</span> <span>new_value</span><span>):</span>
    <span>channel</span><span>.</span><span>basic_qos</span><span>(</span>
        <span>0</span><span>,</span> <span>new_value</span><span>,</span>
        <span>not</span> <span>channel</span><span>.</span><span>connection</span><span>.</span><span>client</span><span>.</span><span>qos_behavior_matches_spec</span><span>,</span>
    <span>)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Users of <code><span>librabbitmq</span></code> is encouraged to upgrade to librabbitmq 1.5.0.</p>
<blockquote>
<div><p>The <code><span>kombu[librabbitmq]</span></code> extra has been updated to depend on this
version.</p>
</div></blockquote>
</li>
<li><p>Pools: Now takes transport options into account when comparing connections
(Issue #333).</p>
</li>
<li><p>MongoDB: <span class="changelog-highlight-fix">Fixes</span> Python 3 compatibility.</p>
</li>
<li><p>Async: select: Ignore socket errors when attempting to unregister handles
from the loop.</p>
</li>
<li><p>Pidbox: Can now be configured to use a serializer other than json,
but specifying a serializer argument to <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.pidbox.html#kombu.pidbox.Mailbox" title="kombu.pidbox.Mailbox"><code><span>Mailbox</span></code></a>.</p>
<blockquote>
<div><p>Contributed by Dmitry Malinovsky.</p>
</div></blockquote>
</li>
<li><p>Message decompression now works with Python 3.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Adam Gaca.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p><strong>MongoDB</strong>: Now endures a connection failover (Issue #123).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p><strong>MongoDB</strong>: <span class="changelog-highlight-fix">Fixed</span> <code><span>KeyError</span></code> when a replica set member is <span class="changelog-highlight-inc">removed</span>.</p>
<blockquote>
<div><p>Also <span class="changelog-highlight-fix">fixes</span> celery#971 and celery/#898.</p>
<p><span class="changelog-highlight-fix">Fix</span> contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p><strong>MongoDB</strong>: <span class="changelog-highlight-fix">Fixed</span> MongoDB broadcast cursor re-initialization <span class="changelog-highlight-fix">bug</span>.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p><strong>Async</strong>: <span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> in lax semaphore implementation where in
some usage patterns the limit was not honored correctly.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Ionel Cristian Mărieș.</p>
</div></blockquote>
</li>
<li><p><strong>Redis</strong>: <span class="changelog-highlight-fix">Fixed</span> problem with fanout when using Python 3 (Issue #324).</p>
</li>
<li><p><strong>Redis</strong>: <span class="changelog-highlight-fix">Fixed</span> <code><span>AttributeError</span></code> from attempting to close a non-existing
connection (Issue #320).</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Redis: <span class="changelog-highlight-fix">Fixed</span> serious race condition that could lead to data loss.</p>
<blockquote>
<div><p>The delivery tags were accidentally set to be an incremental number
local to the channel, but the delivery tags need to be globally
unique so that a message can not overwrite an older message
in the backup store.</p>
<p>This change is not backwards incompatible and you are encouraged
to update all your system using a previous version as soon as possible.</p>
</div></blockquote>
</li>
<li><p>Now depends on <code><span>amqp</span></code> 1.4.4.</p>
</li>
<li><p>Pidbox: Now makes sure message encoding errors are handled by default,
so that a custom error handler does not need to be specified.</p>
</li>
<li><p>Redis: The fanout exchange can now use AMQP patterns to route and filter
messages.</p>
<blockquote>
<div><p>This change is backwards incompatible and must be enabled with
the <code><span>fanout_patterns</span></code> transport option:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>conn</span> <span>=</span> <span>kombu</span><span>.</span><span>Connection</span><span>(</span><span>'redis://'</span><span>,</span> <span>transport_options</span><span>=</span><span>{</span>
<span>... </span>    <span>'fanout_patterns'</span><span>:</span> <span>True</span><span>,</span>
<span>... </span><span>})</span>
</pre></div>
</div>
<p>When enabled the exchange will work like an amqp topic exchange
if the binding key is a pattern.</p>
<p>This is planned to be default behavior in the future.</p>
</div></blockquote>
</li>
<li><p>Redis: <span class="changelog-highlight-fix">Fixed</span> <code><span>cycle</span></code> no such attribute error.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.4.3.</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixes</span> Python 3.4 logging incompatibility (Issue #311).</p>
</li>
<li><p>Redis: Now properly handles unknown pub/sub messages.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Sam Stavinoha.</p>
</div></blockquote>
</li>
<li><p>amqplib: <span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> where more bytes were requested from the socket
than necessary.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Ionel Cristian Mărieș.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.4.2.</p>
</li>
<li><p>Now always trusts messages of type <cite>application/data</cite> and <cite>application/text</cite>
or which have an unspecified content type (Issue #306).</p>
</li>
<li><p>Compression errors are now handled as decode errors and will trigger
the <code><span>Consumer.on_decode_error</span></code> callback if specified.</p>
</li>
<li><p>New <code><span>kombu.Connection.get_heartbeat_interval()</span></code> method that can be
used to access the negotiated heartbeat value.</p>
</li>
<li><dl>
<dt><cite>kombu.common.oid_for</cite> no longer uses the MAC address of the host, but</dt>
<dd><p>instead uses a process-wide UUID4 as a node id.</p>
<blockquote>
<div><p>This avoids a call to <cite>uuid.getnode()</cite> at module scope.</p>
</div></blockquote>
</dd>
</dl>
</li>
<li><p>Hub.add: Now normalizes registered fileno.</p>
<blockquote>
<div><p>Contributed by Ionel Cristian Mărieș.</p>
</div></blockquote>
</li>
<li><p>SQS: <span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> where the prefetch count limit was not respected.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.4.1.</p>
</li>
<li><p><code><span>maybe_declare</span></code> now raises a “recoverable connection error” if
the channel is disconnected instead of a <code><span>ChannelError</span></code> so that
the operation can be retried.</p>
</li>
<li><p>Redis: <code><span>Consumer.cancel()</span></code> is now thread safe.</p>
<blockquote>
<div><p>This <span class="changelog-highlight-fix">fixes</span> an issue when using gevent/eventlet and a
message is handled after the consumer is cancelled resulting
in a “message for queue without consumers” error.</p>
</div></blockquote>
</li>
<li><p>Retry operations would not always respect the interval_start
value when calculating the time to sleep for (Issue #303).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Antoine Legrand.</p>
</div></blockquote>
</li>
<li><p>Timer: <span class="changelog-highlight-fix">Fixed</span> “unhashable type” error on Python 3.</p>
</li>
<li><p>Hub: Do not attempt to unregister operations on an already closed
poller instance.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.4.0.</p>
</li>
<li><p>Redis: Basic cancel for fanout based queues now sends a corresponding
<code><span>UNSUBSCRIBE</span></code> command to the server.</p>
<blockquote>
<div><p>This <span class="changelog-highlight-fix">fixes</span> an issue with pidbox where reply messages could be received
after the consumer was cancelled, giving the <code><span>"message</span> <span>to</span> <span>queue</span> <span>without</span>
<span>consumers"</span></code> error.</p>
</div></blockquote>
</li>
<li><p>MongoDB: Improved connection string and options handling
(Issue #266 + Issue #120).</p>
<blockquote>
<div><p>Contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p>SQS: Limit the number of messages when receiving in batch to 10.</p>
<blockquote>
<div><p>This is a hard limit enforced by Amazon so the sqs transport
must not exceeed this value.</p>
<p><span class="changelog-highlight-fix">Fix</span> contributed by Eric Reynolds.</p>
</div></blockquote>
</li>
<li><p>ConsumerMixin: <code><span>consume</span></code> now checks heartbeat every time the
socket times out.</p>
<blockquote>
<div><p>Contributed by Dustin J. Mitchell.</p>
</div></blockquote>
</li>
<li><p>Retry Policy: A max retries of 0 did not retry forever.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Antoine Legrand.</p>
</div></blockquote>
</li>
<li><p>Simple: If passing a Queue object the simple utils will now take
default routing key from that queue.</p>
<blockquote>
<div><p>Contributed by Fernando Jorge Mota.</p>
</div></blockquote>
</li>
<li><p><code><span>repr(producer)</span></code> no longer evaluates the underlying channnel.</p>
</li>
<li><p>Redis: The map of Redis error classes are now exposed at the module level
using the <code><span>kombu.transport.redis.get_redis_error_classes()</span></code> function.</p>
</li>
<li><p>Async: <code><span>Hub.close</span></code> now sets <code><span>.poller</span></code> to None.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Serializer: loads and dumps now wraps exceptions raised into
<code><span>DecodeError</span></code> and
<code><span>kombu.exceptions.EncodeError</span></code> respectively.</p>
<blockquote>
<div><p>Contributed by Ionel Cristian Maries</p>
</div></blockquote>
</li>
<li><p>Redis: Would attempt to read from the wrong connection if a select/epoll/kqueue
exception event happened.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Michael Nelson.</p>
</div></blockquote>
</li>
<li><p>Redis: Disabling ack emulation now works properly.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Michael Nelson.</p>
</div></blockquote>
</li>
<li><p>Redis: <code><span>IOError</span></code> and <code><span>OSError</span></code> are now treated as recoverable
connection errors.</p>
</li>
<li><p>SQS: Improved performance by reading messages in bulk.</p>
<blockquote>
<div><p>Contributed by Matt Wise.</p>
</div></blockquote>
</li>
<li><p>Connection Pool: Attempting to acquire from a closed pool will now
raise <code><span>RuntimeError</span></code>.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixes</span> Python 2.6 compatibility.</li>
<li>Redis: <span class="changelog-highlight-fix">Fixes</span> ‘bad file descriptor’ issue.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Timer: No longer attempts to hash keyword arguments (Issue #275).</p>
</li>
<li><p>Async: Did not account for the long type for file descriptors.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Fabrice Rabaute.</p>
</div></blockquote>
</li>
<li><p>PyPy: kqueue support was broken.</p>
</li>
<li><p>Redis: Bad pub/sub payloads no longer crashes the consumer.</p>
</li>
<li><p>Redis: Unix socket URLs can now specify a virtual host by including
it as a query parameter.</p>
<blockquote>
<div><p>Example URL specifying a virtual host using database number 3:</p>
<div><div><pre>redis+socket:///tmp/redis.sock?virtual_host=3
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code><span>kombu.VERSION</span></code> is now a named tuple.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.3.3.</p>
</li>
<li><p>Redis: <span class="changelog-highlight-fix">Fixed</span> Python 3 compatibility problem (Issue #270).</p>
</li>
<li><p>MongoDB: <span class="changelog-highlight-fix">Fixed</span> problem with URL parsing when authentication used.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by dongweiming.</p>
</div></blockquote>
</li>
<li><p>pyamqp: <span class="changelog-highlight-fix">Fixed</span> small issue when publishing the message and
the property dictionary was set to None.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Victor Garcia.</p>
</div></blockquote>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> problem in <code><span>repr(LaxBoundedSemaphore)</span></code>.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Antoine Legrand.</p>
</div></blockquote>
</li>
<li><p>Tests now passing on Python 3.3.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>common.QoS: <code><span>decrement_eventually</span></code> now makes sure the value
does not go below 1 if a prefetch count is enabled.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>SQS: Properly reverted patch that caused delays between messages.</p>
<blockquote>
<div><p>Contributed by James Saryerwinnie</p>
</div></blockquote>
</li>
<li><p>select: Clear all registerd fds on poller.cloe</p>
</li>
<li><p>Eventloop: unregister if EBADF raised.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Now depends on <code><span>amqp</span></code> version 1.3.2.</li>
<li>select: <span class="changelog-highlight-fix">Fixed</span> problem where unregister did not properly <span class="changelog-highlight-inc">remove</span>
the fd.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> version 1.3.1.</p>
</li>
<li><p>Redis: New option <code><span>fanout_keyprefix</span></code></p>
<blockquote>
<div><p>This transport option is recommended for all users as it ensures
that broadcast (fanout) messages sent is only seen by the current
virtual host:</p>
<div><div><pre><span>Connection</span><span>(</span><span>'redis://'</span><span>,</span> <span>transport_options</span><span>=</span><span>{</span><span>'fanout_keyprefix'</span><span>:</span> <span>True</span><span>})</span>
</pre></div>
</div>
<p>However, enabling this means that you cannot send or receive messages
from older Kombu versions so make sure all of your participants
are upgraded and have the transport option enabled.</p>
<p>This will be the default behavior in Kombu 4.0.</p>
</div></blockquote>
</li>
<li><p>Distribution: <span class="changelog-highlight-inc">Removed</span> file <code><span>requirements/py25.txt</span></code>.</p>
</li>
<li><p>MongoDB: Now disables <code><span>auto_start_request</span></code>.</p>
</li>
<li><p>MongoDB: Enables <code><span>use_greenlets</span></code> if eventlet/gevent used.</p>
</li>
<li><p>Pidbox: <span class="changelog-highlight-fix">Fixes</span> problem where expires header was None,
which is a value not supported by the amq protocol.</p>
</li>
<li><p>ConsumerMixin: New <code><span>consumer_context</span></code> method for starting
the consumer without draining events.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> version 1.3.</p>
</li>
<li><p>No longer supports Python 2.5</p>
<blockquote>
<div><p>The minimum Python version supported is now Python 2.6.0 for Python2,
and Python 3.3 for Python3.</p>
</div></blockquote>
</li>
<li><p>Dual codebase supporting both Python 2 and 3.</p>
<blockquote>
<div><p>No longer using <code><span>2to3</span></code>, making it easier to maintain support for
both versions.</p>
</div></blockquote>
</li>
<li><p>pickle, yaml and msgpack deserialization is now disabled by default.</p>
<blockquote>
<div><p>This means that Kombu will by default refuse to handle any content type other
than json.</p>
<p>Pickle is known to be a <span class="changelog-highlight-sec">security</span> concern as it will happily
load any object that is embedded in a pickle payload, and payloads
can be crafted to do almost anything you want.  The default
serializer in Kombu is json but it also supports a number
of other serialization formats that it will evaluate if received:
including pickle.</p>
<p>It was always assumed that users were educated about the <span class="changelog-highlight-sec">security</span>
implications of pickle, but in hindsight we don’t think users
should be expected to secure their services if we have the ability to
be secure by default.</p>
<p>By disabling any content type that the user did not explicitly
want enabled we ensure that the user must be conscious when they
add pickle as a serialization format to support.</p>
<p>The other built-in serializers (yaml and msgpack) are also disabled
even though they aren’t considered insecure <a href="http://kombu.readthedocs.org/en/latest/changelog.html#f1">[1]</a> at this point.
Instead they’re disabled so that if a <span class="changelog-highlight-sec">security</span> flaw is found in one of these
libraries in the future, you will only be affected if you have
explicitly enabled them.</p>
<p>To have your consumer accept formats other than json you have to
explicitly add the wanted formats to a white-list of accepted
content types:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>c</span> <span>=</span> <span>Consumer</span><span>(</span><span>conn</span><span>,</span> <span>accept</span><span>=</span><span>[</span><span>'json'</span><span>,</span> <span>'pickle'</span><span>,</span> <span>'msgpack'</span><span>])</span>
</pre></div>
</div>
<p>or when using synchronous access:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>msg</span> <span>=</span> <span>queue</span><span>.</span><span>get</span><span>(</span><span>accept</span><span>=</span><span>[</span><span>'json'</span><span>,</span> <span>'pickle'</span><span>,</span> <span>'msgpack'</span><span>])</span>
</pre></div>
</div>
<p>The <code><span>accept</span></code> argument was first supported for consumers in version
2.5.10, and first supported by <code><span>Queue.get</span></code> in version 2.5.15
so to stay compatible with previous versions you can enable
the previous behavior:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>from</span> <span>kombu</span> <span>import</span> <span>enable_insecure_serializers</span>
<span>&gt;&gt;&gt; </span><span>enable_insecure_serializers</span><span>()</span>
</pre></div>
</div>
<p>But note that this has global effect, so be very careful should you use it.</p>
<p>Footnotes</p>
<table>
<colgroup><col/><col/></colgroup>
<tbody>
<tr><td><a href="http://kombu.readthedocs.org/en/latest/changelog.html#id37">[1]</a></td><td><p>The PyYAML library has a <code><span>yaml.load()</span></code> function with some of the
same <span class="changelog-highlight-sec">security</span> implications as pickle, but Kombu uses the
<code><span>yaml.safe_load()</span></code> function which is not known to be affected.</p>
</td></tr>
</tbody>
</table>
</div></blockquote>
</li>
<li><p>kombu.async: Experimental event loop implementation.</p>
<blockquote>
<div><p>This code was previously in Celery but was moved here
to make it easier for async transport implementations.</p>
<p>The API is meant to match the Tulip API which will be included
in Python 3.4 as the <code><span>asyncio</span></code> module.  It’s not a complete
implementation obviously, but the goal is that it will be easy
to change to it once that is possible.</p>
</div></blockquote>
</li>
<li><p>Utility function <code><span>kombu.common.ipublish</span></code> has been <span class="changelog-highlight-inc">removed</span>.</p>
<blockquote>
<div><p>Use <code><span>Producer(...,</span> <span>retry=True)</span></code> instead.</p>
</div></blockquote>
</li>
<li><p>Utility function <code><span>kombu.common.isend_reply</span></code> has been <span class="changelog-highlight-inc">removed</span></p>
<blockquote>
<div><p>Use <code><span>send_reply(...,</span> <span>retry=True)</span></code> instead.</p>
</div></blockquote>
</li>
<li><p><code><span>kombu.common.entry_to_queue</span></code> and <code><span>kombu.messaging.entry_to_queue</span></code>
has been <span class="changelog-highlight-inc">removed</span>.</p>
<blockquote>
<div><p>Use <code><span>Queue.from_dict(name,</span> <span>**options)</span></code> instead.</p>
</div></blockquote>
</li>
<li><p>Redis: Messages are now restored at the end of the list.</p>
<blockquote>
<div><p>Contributed by Mark Lavin.</p>
</div></blockquote>
</li>
<li><dl>
<dt><code><span>StdConnectionError</span></code> and <code><span>StdChannelError</span></code> is <span class="changelog-highlight-inc">removed</span></dt>
<dd><p>and <code><span>amqp.ConnectionError</span></code> and <code><span>amqp.ChannelError</span></code> is used
instead.</p>
</dd>
</dl>
</li>
<li><p>Message object implementation has moved to <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.message.html#kombu.message.Message" title="kombu.message.Message"><code><span>kombu.message.Message</span></code></a>.</p>
</li>
<li><p>Serailization: Renamed functions encode/decode to
<a href="http://kombu.readthedocs.org/en/latest/reference/kombu.serialization.html#kombu.serialization.dumps" title="kombu.serialization.dumps"><code><span>dumps()</span></code></a> and <code><span>loads()</span></code>.</p>
<blockquote>
<div><p>For backward compatibility the old names are still available as aliases.</p>
</div></blockquote>
</li>
<li><p>The <code><span>kombu.log.anon_logger</span></code> function has been <span class="changelog-highlight-inc">removed</span>.</p>
<blockquote>
<div><p>Use <code><span>get_logger()</span></code> instead.</p>
</div></blockquote>
</li>
<li><p><code><span>queue_declare</span></code> now returns namedtuple with <code><span>queue</span></code>, <code><span>message_count</span></code>,
and <code><span>consumer_count</span></code> fields.</p>
</li>
<li><p>LamportClock: Can now set lock class</p>
</li>
<li><p><code><span>kombu.utils.clock</span></code>: Utilities for ordering events added.</p>
</li>
<li><p><a href="http://kombu.readthedocs.org/en/latest/reference/kombu.simple.html#kombu.simple.SimpleQueue" title="kombu.simple.SimpleQueue"><code><span>SimpleQueue</span></code></a> now allows you to override
the exchange type used.</p>
<blockquote>
<div><p>Contributed by Vince Gonzales.</p>
</div></blockquote>
</li>
<li><p>Zookeeper transport updated to support new changes in the <code><span>kazoo</span></code>
library.</p>
<blockquote>
<div><p>Contributed by Mahendra M.</p>
</div></blockquote>
</li>
<li><dl>
<dt>pyamqp/librabbitmq: Transport options are now forwarded as keyword arguments</dt>
<dd><p>to the underlying connection (Issue #214).</p>
</dd>
</dl>
</li>
<li><p>Transports may now distinguish between recoverable and irrecoverable
connection and channel errors.</p>
</li>
<li><p><code><span>kombu.utils.Finalize</span></code> has been <span class="changelog-highlight-inc">removed</span>: Use
<code><span>multiprocessing.util.Finalize</span></code> instead.</p>
</li>
<li><p>Memory transport now supports the fanout exchange type.</p>
<blockquote>
<div><p>Contributed by Davanum Srinivas.</p>
</div></blockquote>
</li>
<li><p>Experimental new <a href="http://pythonhosted.org/Pyro">Pyro</a> transport (<a href="http://kombu.readthedocs.org/en/latest/reference/kombu.transport.pyro.html#module-kombu.transport.pyro" title="kombu.transport.pyro"><code><span>kombu.transport.pyro</span></code></a>).</p>
<blockquote>
<div><p>Contributed by Tommie McAfee.</p>
</div></blockquote>
</li>
</ul>


<dl>
<dt>Redis transport: Now supports using local UNIX sockets to communicate with the</dt>
<dd><p>Redis server (Issue #1283)</p>
<blockquote>
<div><p>To connect using a UNIX socket you have to use the <code><span>redis+socket</span></code>
URL-prefix: <code><span>redis+socket:///tmp/redis.sock</span></code>.</p>
<p>This functionality was merged from the <a href="https://github.com/piquadrat/celery-redis-unixsocket">celery-redis-unixsocket</a> project.
Contributed by Maxime Rouyrre.</p>
</div></blockquote>
</dd>
</dl>
<p>ZeroMQ transport: drain_events now supports timeout.</p>
<blockquote>
<p>Contributed by Jesper Thomschütz.</p></blockquote>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Python3: <span class="changelog-highlight-fix">Fixed</span> problem with dependencies not being installed.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Declaration cache: Now only keeps hash of declaration
so that it does not keep a reference to the channel.</li>
<li>Declaration cache: Now respects <code><span>entity.can_cache_declaration</span></code>
attribute.</li>
<li><span class="changelog-highlight-fix">Fixes</span> Python 2.5 compatibility.</li>
<li><span class="changelog-highlight-fix">Fixes</span> tests after python-msgpack changes.</li>
<li><code><span>Queue.get</span></code>: Now supports <code><span>accept</span></code> argument.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>safe_str did not work properly resulting in
<code><span>UnicodeDecodeError</span></code> (Issue #248).</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.0.13</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> typo in Django functional tests.</p>
</li>
<li><p>safe_str now returns Unicode in Python 2.x</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Germán M. Bravo.</p>
</div></blockquote>
</li>
<li><p>amqp: Transport options are now merged with arguments
supplied to the connection.</p>
</li>
<li><p>Tests no longer depends on distribute, which was <span class="changelog-highlight-dep">deprecated</span>
and merged back into setuptools.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Sascha Peilicke.</p>
</div></blockquote>
</li>
<li><p>ConsumerMixin now also restarts on channel related errors.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Corentin Ardeois.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Redis: Ignore errors about keys missing in the round-robin cycle.</li>
<li><span class="changelog-highlight-fix">Fixed</span> test suite errors on Python 3.</li>
<li><span class="changelog-highlight-fix">Fixed</span> msgpack test failures.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on amqp 1.0.12 (Py3 compatibility issues).</p>
</li>
<li><p>MongoDB:  <span class="changelog-highlight-inc">Removed</span> cause of a “database name in URI is being ignored”
warning.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> by Flavio Percoco Premoli</p>
</div></blockquote>
</li>
<li><p>Adds <code><span>passive</span></code> option to <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Exchange" title="kombu.Exchange"><code><span>Exchange</span></code></a>.</p>
<blockquote>
<div><p>Setting this flag means that the exchange will not be declared by kombu,
but that it must exist already (or an exception will be raised).</p>
<p>Contributed by Rafal Malinowski</p>
</div></blockquote>
</li>
<li><p>Connection.info() now gives the current hostname and not the list of
available hostnames.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by John Shuping.</p>
</div></blockquote>
</li>
<li><p>pyamqp: Transport options are now forwarded as kwargs to <code><span>amqp.Connection</span></code>.</p>
</li>
<li><p>librabbitmq: Transport options are now forwarded as kwargs to
<code><span>librabbitmq.Connection</span></code>.</p>
</li>
<li><p>librabbitmq:  Now raises <code><span>NotImplementedError</span></code> if SSL is enabled.</p>
<blockquote>
<div><p>The librabbitmq library does not support ssl,
but you can use stunnel or change to the <code><span>pyamqp://</span></code> transport
instead.</p>
<p><span class="changelog-highlight-fix">Fix</span> contributed by Dan LaMotte.</p>
</div></blockquote>
</li>
<li><p>librabbitmq: <span class="changelog-highlight-fix">Fixed</span> a cyclic reference at connection close.</p>
</li>
<li><p>eventio: select implementation now removes bad file descriptors.</p>
</li>
<li><p>eventio: <span class="changelog-highlight-fix">Fixed</span> Py3 compatibility problems.</p>
</li>
<li><p>Functional tests added for py-amqp and librabbitmq transports.</p>
</li>
<li><p>Resource.force_close_all no longer uses a mutex.</p>
</li>
<li><p>Pidbox: Now ignores <cite>IconsistencyError</cite> when sending replies,
as this error simply means that the client may no longer be alive.</p>
</li>
<li><p>Adds new <code><span>Connection.collect</span></code> method,
that can be used to clean up after connections without I/O.</p>
</li>
<li><p><code><span>queue_bind</span></code> is no longer called for queues bound to
the “default exchange” (Issue #209).</p>
<blockquote>
<div><p>Contributed by Jonathan Halcrow.</p>
</div></blockquote>
</li>
<li><p>The max_retries setting for retries was not respected correctly (off by one).</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<div>
<h3>Note about upcoming changes for Kombu 3.0<a href="http://kombu.readthedocs.org/en/latest/changelog.html#note-about-upcoming-changes-for-kombu-3-0" title="Permalink to this headline">¶</a></h3>
<p>Kombu 3 consumers will no longer accept pickle/yaml or msgpack
by default, and you will have to explicitly enable untrusted deserializers
either globally using <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.enable_insecure_serializers" title="kombu.enable_insecure_serializers"><code><span>kombu.enable_insecure_serializers()</span></code></a>, or
using the <code><span>accept</span></code> argument to <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Consumer" title="kombu.Consumer"><code><span>Consumer</span></code></a>.</p>
</div>
<div>
<h3>Changes<a href="http://kombu.readthedocs.org/en/latest/changelog.html#changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>New utility function to disable/enable untrusted serializers.</p>
<blockquote>
</blockquote>
</li>
<li><p>Consumer: <code><span>accept</span></code> can now be used to specify a whitelist
of content types to accept.</p>
<blockquote>
<div><p>If the accept whitelist is set and a message is received
with a content type that is not in the whitelist then a
<code><span>ContentDisallowed</span></code> exception
is raised.  Note that this error can be handled by the already
existing <cite>on_decode_error</cite> callback</p>
<p>Examples:</p>
<div><div><pre><span>Consumer</span><span>(</span><span>accept</span><span>=</span><span>[</span><span>'application/json'</span><span>])</span>
<span>Consumer</span><span>(</span><span>accept</span><span>=</span><span>[</span><span>'pickle'</span><span>,</span> <span>'json'</span><span>])</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Now depends on amqp 1.0.11</p>
</li>
<li><p>pidbox: Mailbox now supports the <code><span>accept</span></code> argument.</p>
</li>
<li><p>Redis: More friendly error for when keys are missing.</p>
</li>
<li><p>Connection URLs: The parser did not work well when there were
multiple ‘+’ tokens.</p>
</li>
</ul>
</div>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Pidbox: Now warns if there are multiple nodes consuming from
the same pidbox.</p>
</li>
<li><p>Adds <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Queue.on_declared" title="kombu.Queue.on_declared"><code><span>Queue.on_declared</span></code></a></p>
<blockquote>
<div><p>A callback to be called when the queue is declared,
with signature <code><span>(name,</span> <span>messages,</span> <span>consumers)</span></code>.</p>
</div></blockquote>
</li>
<li><p>Now uses fuzzy matching to suggest alternatives to typos in transport
names.</p>
</li>
<li><p>SQS: Adds new transport option <code><span>queue_prefix</span></code>.</p>
<blockquote>
<div><p>Contributed by j0hnsmith.</p>
</div></blockquote>
</li>
<li><p>pyamqp: No longer overrides verify_connection.</p>
</li>
<li><p>SQS: Now specifies the <code><span>driver_type</span></code> and <code><span>driver_name</span></code>
attributes.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Mher Movsisyan.</p>
</div></blockquote>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> with <code><span>kombu.utils.retry_over_time</span></code> when no errback
specified.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>amqp</span></code> 1.0.10 which <span class="changelog-highlight-fix">fixes</span> a Python 3 compatibility error.</p>
</li>
<li><p>Redis: <span class="changelog-highlight-fix">Fixed</span> a possible race condition (Issue #171).</p>
</li>
<li><p>Redis: Ack emulation/visibility_timeout can now be disabled
using a transport option.</p>
<blockquote>
<div><p>Ack emulation adds quite a lot of overhead to ensure data is safe
even in the event of an unclean shutdown.  If data loss do not worry
you there is now an <cite>ack_emulation</cite> transport option you can use
to disable it:</p>
<div><div><pre><span>Connection</span><span>(</span><span>'redis://'</span><span>,</span> <span>transport_options</span><span>=</span><span>{</span><span>'ack_emulation'</span><span>:</span> <span>False</span><span>})</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>SQS: <span class="changelog-highlight-fix">Fixed</span> <code><span>boto</span></code> v2.7 compatibility (Issue #207).</p>
</li>
<li><p>Exchange: Should not try to re-declare default exchange (<code><span>""</span></code>)
(Issue #209).</p>
</li>
<li><p>SQS: Long polling is now disabled by default as it was not
implemented correctly, resulting in long delays between receiving
messages (Issue #202).</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> Python 2.6 incompatibility depending on <code><span>exc.errno</span></code>
being available.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Ephemera.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on amqp 1.0.9</p>
</li>
<li><p>Redis: A regression in 2.5.6 caused the redis transport to
ignore options set in <code><span>transport_options</span></code>.</p>
</li>
<li><p>Redis: New <code><span>socket_timeout</span></code> transport option.</p>
</li>
<li><p>Redis: <code><span>InconsistencyError</span></code> is now regarded as a recoverable error.</p>
</li>
<li><p>Resource pools: Will no longer attempt to release resource
that was never acquired.</p>
</li>
<li><p>MongoDB: Now supports the <code><span>ssl</span></code> option.</p>
<blockquote>
<div><p>Contributed by Sebastian Pawlus.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Now depends on amqp 1.0.8 which works around a <span class="changelog-highlight-fix">bug</span> found on some
Python 2.5 installations where 2**32 overflows to 0.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<p>SQS: Now supports long polling (Issue #176).</p>
<blockquote>
<div><p>The polling interval default has been changed to 0 and a new
transport option (<code><span>wait_time_seconds</span></code>) has been added.
This parameter specifies how long to wait for a message from
SQS, and defaults to 20 seconds, which is the maximum
value currently allowed by Amazon SQS.</p>
<p>Contributed by James Saryerwinnie.</p>
</div></blockquote>
<ul>
<li><p>SQS: Now removes unpickleable fields before restoring messages.</p>
</li>
<li><p>Consumer.__exit__ now ignores exceptions occurring while
cancelling the consumer.</p>
</li>
<li><p>Virtual:  Routing keys can now consist of characters also used
in regular expressions (e.g. parens) (Issue #194).</p>
</li>
<li><p>Virtual: <span class="changelog-highlight-fix">Fixed</span> compression header when restoring messages.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Alex Koshelev.</p>
</div></blockquote>
</li>
<li><p>Virtual: ack/reject/requeue now works while using <code><span>basic_get</span></code>.</p>
</li>
<li><p>Virtual: Message.reject is now supported by virtual transports
(requeue depends on individual transport support).</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> typo in hack used for static analyzers.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Basil Mironenko.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p><span class="changelog-highlight-fix">Fixed</span> problem with connection clone and multiple URLs (Issue #182).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Dane Guempel.</p>
</div></blockquote>
</li>
<li><p>zeromq: Now compatible with libzmq 3.2.x.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Andrey Antukh.</p>
</div></blockquote>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> Python 3 installation problem (Issue #187).</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Pidbox: <span class="changelog-highlight-fix">Fixed</span> compatibility with Python 2.6</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>[Redis] <span class="changelog-highlight-fix">Fixed</span> connection leak and added a new ‘max_connections’ transport
option.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> where return value of Queue.as_dict could not be serialized with
JSON (Issue #177).</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p><a href="http://amqp.readthedocs.org/">py-amqp</a> is now the new default transport, replacing <code><span>amqplib</span></code>.</p>
<blockquote>
<div><p>The new <a href="http://amqp.readthedocs.org/">py-amqp</a> library is a fork of amqplib started with the
following goals:</p>
<blockquote>
<div><ul>
<li><p>Uses AMQP 0.9.1 instead of 0.8</p>
</li>
<li><p>Support for heartbeats (Issue #79 + Issue #131)</p>
</li>
<li><p>Automatically revives channels on channel errors.</p>
</li>
<li><dl>
<dt>Support for all RabbitMQ extensions</dt>
<dd><ul>
<li>Consumer Cancel Notifications (Issue #131)</li>
<li>Publisher Confirms (Issue #131).</li>
<li>Exchange-to-exchange bindings: <code><span>exchange_bind</span></code> / <code><span>exchange_unbind</span></code>.</li>
</ul>
</dd>
</dl>
</li>
<li><p>API compatible with <code><span>librabbitmq</span></code> so that it can be used
as a pure-python replacement in environments where rabbitmq-c cannot
be compiled.  librabbitmq will be updated to support all the same
features as py-amqp.</p>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p>Support for using multiple connection URL’s for failover.</p>
<blockquote>
<div><p>The first argument to <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Connection" title="kombu.Connection"><code><span>Connection</span></code></a> can now be a list of
connection URLs:</p>
<div><div><pre><span>Connection</span><span>([</span><span>'amqp://foo'</span><span>,</span> <span>'amqp://bar'</span><span>])</span>
</pre></div>
</div>
<p>or it can be a single string argument with several URLs separated by
semicolon:</p>
<div><div><pre><span>Connection</span><span>(</span><span>'amqp://foo;amqp://bar'</span><span>)</span>
</pre></div>
</div>
<p>There is also a new keyword argument <code><span>failover_strategy</span></code> that defines
how <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Connection.ensure_connection" title="kombu.Connection.ensure_connection"><code><span>ensure_connection()</span></code></a>/
<a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Connection.ensure" title="kombu.Connection.ensure"><code><span>ensure()</span></code></a>/<a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Connection.autoretry" title="kombu.Connection.autoretry"><code><span>kombu.Connection.autoretry()</span></code></a> will
reconnect in the event of connection failures.</p>
<p>The default reconnection strategy is <code><span>round-robin</span></code>, which will simply
cycle through the list forever, and there’s also a <code><span>shuffle</span></code> strategy
that will select random hosts from the list.  Custom strategies can also
be used, in that case the argument must be a generator yielding the URL
to connect to.</p>
<p>Example:</p>
<div><div><pre><span>Connection</span><span>(</span><span>'amqp://foo;amqp://bar'</span><span>)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Now supports PyDev, PyCharm, pylint and other static code analysis tools.</p>
</li>
<li><p><a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Queue" title="kombu.Queue"><code><span>Queue</span></code></a> now supports multiple bindings.</p>
<blockquote>
<div><p>You can now have multiple bindings in the same queue by having
the second argument be a list:</p>
<div><div><pre><span>from</span> <span>kombu</span> <span>import</span> <span>binding</span><span>,</span> <span>Queue</span>

<span>Queue</span><span>(</span><span>'name'</span><span>,</span> <span>[</span>
    <span>binding</span><span>(</span><span>Exchange</span><span>(</span><span>'E1'</span><span>),</span> <span>routing_key</span><span>=</span><span>'foo'</span><span>),</span>
    <span>binding</span><span>(</span><span>Exchange</span><span>(</span><span>'E1'</span><span>),</span> <span>routing_key</span><span>=</span><span>'bar'</span><span>),</span>
    <span>binding</span><span>(</span><span>Exchange</span><span>(</span><span>'E2'</span><span>),</span> <span>routing_key</span><span>=</span><span>'baz'</span><span>),</span>
<span>])</span>
</pre></div>
</div>
<p>To enable this, helper methods have been added:</p>
<blockquote>
</blockquote>
<p>Contributed by Rumyana Neykova.</p>
</div></blockquote>
</li>
<li><p>Custom serializers can now be registered using Setuptools entry-points.</p>
<blockquote>
</blockquote>
</li>
<li><p>New <code><span>kombu.common.QoS</span></code> class used as a thread-safe way to manage
changes to a consumer or channels prefetch_count.</p>
<blockquote>
<div><p>This was previously an internal class used in Celery now moved to
the <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.common.html#module-kombu.common" title="kombu.common"><code><span>kombu.common</span></code></a> module.</p>
</div></blockquote>
</li>
<li><p>Consumer now supports a <code><span>on_message</span></code> callback that can be used to process
raw messages (not decoded).</p>
<blockquote>
<div><p>Other callbacks specified using the <code><span>callbacks</span></code> argument, and
the <code><span>receive</span></code> method will be not be called when a on message callback
is present.</p>
</div></blockquote>
</li>
<li><p>New utility <code><span>kombu.common.ignore_errors()</span></code> ignores connection and
channel errors.</p>
<blockquote>
<div><p>Must only be used for cleanup actions at shutdown or on connection loss.</p>
</div></blockquote>
</li>
<li><p>Support for exchange-to-exchange bindings.</p>
<blockquote>
<div><p>The <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Exchange" title="kombu.Exchange"><code><span>Exchange</span></code></a> entity gained <code><span>bind_to</span></code>
and <code><span>unbind_from</span></code> methods:</p>
<div><div><pre><span>e1</span> <span>=</span> <span>Exchange</span><span>(</span><span>'A'</span><span>)(</span><span>connection</span><span>)</span>
<span>e2</span> <span>=</span> <span>Exchange</span><span>(</span><span>'B'</span><span>)(</span><span>connection</span><span>)</span>

<span>e2</span><span>.</span><span>bind_to</span><span>(</span><span>e1</span><span>,</span> <span>routing_key</span><span>=</span><span>'rkey'</span><span>,</span> <span>arguments</span><span>=</span><span>None</span><span>)</span>
<span>e2</span><span>.</span><span>unbind_from</span><span>(</span><span>e1</span><span>,</span> <span>routing_key</span><span>=</span><span>'rkey'</span><span>,</span> <span>arguments</span><span>=</span><span>None</span><span>)</span>
</pre></div>
</div>
<p>This is currently only supported by the <code><span>pyamqp</span></code> transport.</p>
<p>Contributed by Rumyana Neykova.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>The previous versions connection pool changes broke Redis support so that
it would always connect to localhost (default setting) no matter what
connection parameters were provided (Issue #176).</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Redis: <span class="changelog-highlight-fix">Fixed</span> race condition that could occur while trying to restore
messages (Issue #171).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Ollie Walsh.</p>
</div></blockquote>
</li>
<li><p>Redis: Each channel is now using a specific connection pool instance,
which is disconnected on connection failure.</p>
</li>
<li><p>ProducerPool: <span class="changelog-highlight-fix">Fixed</span> possible dead-lock in the acquire method.</p>
</li>
<li><p>ProducerPool: <code><span>force_close_all</span></code> no longer tries to call the non-existent
<code><span>Producer._close</span></code>.</p>
</li>
<li><p>librabbitmq: Now implements <code><span>transport.verify_connection</span></code> so that
connection pools will not give back connections that are no longer working.</p>
</li>
<li><p>New and better <code><span>repr()</span></code> for Queue and Exchange objects.</p>
</li>
<li><p>Python3:  <span class="changelog-highlight-fix">Fixed</span> problem with running the unit test suite.</p>
</li>
<li><p>Python3: <span class="changelog-highlight-fix">Fixed</span> problem with JSON codec.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Redis:  Improved fair queue cycle implementation (Issue #166).</p>
<blockquote>
<div><p>Contributed by Kevin McCarthy.</p>
</div></blockquote>
</li>
<li><p>Redis: Unacked message restore limit is now unlimited by default.</p>
<blockquote>
<div><p>Also, the limit can now be configured using the <code><span>unacked_restore_limit</span></code>
transport option:</p>
<div><div><pre><span>Connection</span><span>(</span><span>'redis://'</span><span>,</span> <span>transport_options</span><span>=</span><span>{</span>
    <span>'unacked_restore_limit'</span><span>:</span> <span>100</span><span>,</span>
<span>})</span>

<span>A</span> <span>limit</span> <span>of</span> <span>100</span> <span>means</span> <span>that</span> <span>the</span> <span>consumer</span> <span>will</span> <span>restore</span> <span>at</span> <span>most</span> <span>100</span>
<span>messages</span> <span>at</span> <span>each</span> <span>pass</span><span>.</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Redis: Now uses a mutex to ensure only one consumer restores messages at a
time.</p>
<blockquote>
<div><p>The mutex expires after 5 minutes by default, but can be configured
using the <code><span>unacked_mutex_expire</span></code> transport option.</p>
</div></blockquote>
</li>
<li><p>LamportClock.adjust now returns the new clock value.</p>
</li>
<li><p>Heartbeats can now be specified in URLs.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Mher Movsisyan.</p>
</div></blockquote>
</li>
<li><p>Kombu can now be used with PyDev, PyCharm and other static analysis tools.</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixes</span> problem with msgpack on Python 3 (Issue #162).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Jasper Bryant-Greene</p>
</div></blockquote>
</li>
<li><p>amqplib: <span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> with timeouts when SSL is used in non-blocking mode.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Mher Movsisyan</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Virtual: Unknown exchanges now default to ‘direct’ when sending a message.</p>
</li>
<li><p>MongoDB: <span class="changelog-highlight-fix">Fixed</span> memory leak when merging keys stored in the db (Issue #159)</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Michael Korbakov.</p>
</div></blockquote>
</li>
<li><p>MongoDB: Better index for MongoDB transport (Issue #158).</p>
<blockquote>
<div><p>This improvement will create a new compund index for queue and _id in order
to be able to use both indexed fields for getting a new message (using
queue field) and sorting by _id.  It’ll be necessary to manually delete
the old index from the collection.</p>
<p>Improvement contributed by rmihael</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Last version broke installtion on PyPy and Jython due
to test requirements clean-up.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>amqplib: <span class="changelog-highlight-fix">Fixed a bug</span> with asynchronously reading large messages.</li>
<li>pyamqp: Now requires amqp 0.9.3</li>
<li>Cleaned up test requirements.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixed</span> problem with amqp transport alias (Issue #154).</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Having an empty transport name broke in 2.4.1.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Redis: <span class="changelog-highlight-fix">Fixed</span> race condition that could cause the consumer to crash (Issue #151)</p>
<blockquote>
<div><p>Often leading to the error message <code><span>"could</span> <span>not</span> <span>convert</span> <span>string</span> <span>to</span> <span>float"</span></code></p>
</div></blockquote>
</li>
<li><p>Connection retry could cause an inifite loop (Issue #145).</p>
</li>
<li><p>The <code><span>amqp</span></code> alias is now resolved at runtime, so that eventlet detection
works even if patching was done later.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>New experimental <code><span>ZeroMQ</span> <span>&lt;kombu.transport.zmq</span></code> transport.</p>
<blockquote>
<div><p>Contributed by John Watson.</p>
</div></blockquote>
</li>
<li><p>Redis: Ack timed-out messages were not restored when using the eventloop.</p>
</li>
<li><p>Now uses pickle protocol 2 by default to be cross-compatible with Python 3.</p>
<blockquote>
<div><p>The protocol can also now be changed using the <span/><code><span>PICKLE_PROTOCOL</span></code>
environment variable.</p>
</div></blockquote>
</li>
<li><p>Adds <code><span>Transport.supports_ev</span></code> attribute.</p>
</li>
<li><p>Pika: Queue purge was not working properly.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Steeve Morin.</p>
</div></blockquote>
</li>
<li><p>Pika backend was no longer working since Kombu 2.3</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Steeve Morin.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixes</span> problem with deserialization in Python 3.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>New <code><span>pyamqp://</span></code> transport!</p>
<blockquote>
<div><p>The new <a href="http://amqp.readthedocs.org/">py-amqp</a> library is a fork of amqplib started with the
following goals:</p>
<blockquote>
<div><ul>
<li>Uses AMQP 0.9.1 instead of 0.8</li>
<li>Should support all RabbitMQ extensions</li>
<li>API compatible with <code><span>librabbitmq</span></code> so that it can be used
as a pure-python replacement in environments where rabbitmq-c cannot
be compiled.</li>
</ul>
</div></blockquote>
<p>If you start using use py-amqp instead of amqplib you can enjoy many
advantages including:</p>
<blockquote>
<div><ul>
<li>Heartbeat support (Issue #79 + Issue #131)</li>
<li>Consumer Cancel Notifications (Issue #131)</li>
<li>Publisher Confirms</li>
</ul>
</div></blockquote>
<p>amqplib has not been updated in a long while, so maintaining our own fork
ensures that we can quickly roll out new features and <span class="changelog-highlight-fix">fixes</span> without
resorting to monkey patching.</p>
<p>To use the py-amqp transport you must install the <code><span>amqp</span></code> library:</p>

<p>and change the connection URL to use the correct transport:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>conn</span> <span>=</span> <span>Connection</span><span>(</span><span>'pyamqp://guest:guest@localhost//'</span><span>)</span>
</pre></div>
</div>
<p>The <code><span>pyamqp://</span></code> transport will be the default fallback transport
in Kombu version 3.0, when <code><span>librabbitmq</span></code> is not installed,
and librabbitmq will also be updated to support the same features.</p>
</div></blockquote>
</li>
<li><p>Connection now supports heartbeat argument.</p>
<blockquote>
<div><p>If enabled you must make sure to manually maintain heartbeats
by calling the <code><span>Connection.heartbeat_check</span></code> at twice the rate
of the specified heartbeat interval.</p>
<p>E.g. if you have <code><span>Connection(heartbeat=10)</span></code>,
then you must call <code><span>Connection.heartbeat_check()</span></code> every 5 seconds.</p>
<p>if the server has not sent heartbeats at a suitable rate then
the heartbeat check method must raise an error that is listed
in <code><span>Connection.connection_errors</span></code>.</p>
<p>The attribute <code><span>Connection.supports_heartbeats</span></code> has been added
for the ability to inspect if a transport supports heartbeats
or not.</p>
<p>Calling <code><span>heartbeat_check</span></code> on a transport that does
not support heartbeats results in a noop operation.</p>
</div></blockquote>
</li>
<li><p>SQS: <span class="changelog-highlight-fix">Fixed</span> <span class="changelog-highlight-fix">bug</span> with invalid characters in queue names.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Zach Smith.</p>
</div></blockquote>
</li>
<li><p>utils.reprcall: <span class="changelog-highlight-fix">Fixed</span> typo where kwargs argument was an empty tuple by
default, and not an empty dict.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Adds <code><span>kombu.messaging.entry_to_queue</span></code> for compat with previous versions.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Pidbox: Now sets queue expire at 10 seconds for reply queues.</p>
</li>
<li><p>EventIO: Now ignores <code><span>ValueError</span></code> raised by epoll unregister.</p>
</li>
<li><p>MongoDB: <span class="changelog-highlight-fix">Fixes</span> Issue #142</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> by Flavio Percoco Premoli</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Support for msgpack-python 0.2.0 (Issue #143)</p>
<blockquote>
<div><p>The latest msgpack version no longer supports Python 2.5, so if you’re
still using that you need to depend on an earlier msgpack-python version.</p>
<p><span class="changelog-highlight-fix">Fix</span> contributed by Sebastian Insua</p>
</div></blockquote>
</li>
<li><p><a href="http://kombu.readthedocs.org/en/latest/reference/kombu.common.html#kombu.common.maybe_declare" title="kombu.common.maybe_declare"><code><span>maybe_declare()</span></code></a> no longer caches entities with the
<code><span>auto_delete</span></code> flag set.</p>
</li>
<li><p>New experimental filesystem transport.</p>
<blockquote>
<div><p>Contributed by Bobby Beever.</p>
</div></blockquote>
</li>
<li><p>Virtual Transports: Now support anonymous queues and exchanges.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p><code><span>BrokerConnection</span></code> now renamed to <code><span>Connection</span></code>.</p>
<blockquote>
<div><p>The name <code><span>Connection</span></code> has been an alias for a very long time,
but now the rename is official in the documentation as well.</p>
<p>The Connection alias has been available since version 1.1.3,
and <code><span>BrokerConnection</span></code> will still work and is not <span class="changelog-highlight-dep">deprecated</span>.</p>
</div></blockquote>
</li>
<li><p><code><span>Connection.clone()</span></code> now works for the sqlalchemy transport.</p>
</li>
<li><p><a href="http://kombu.readthedocs.org/en/latest/reference/kombu.common.html#kombu.common.eventloop" title="kombu.common.eventloop"><code><span>kombu.common.eventloop()</span></code></a>, <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.utils.html#kombu.utils.uuid" title="kombu.utils.uuid"><code><span>kombu.utils.uuid()</span></code></a>,
and <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.utils.url.html#kombu.utils.url.parse_url" title="kombu.utils.url.parse_url"><code><span>kombu.utils.url.parse_url()</span></code></a> can now be
imported from the <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#module-kombu" title="kombu"><code><span>kombu</span></code></a> module directly.</p>
</li>
<li><p>Pidbox transport callback <code><span>after_reply_message_received</span></code> now happens
in a finally block.</p>
</li>
<li><p>Trying to use the <code><span>librabbitmq://</span></code> transport will now show the right
name in the <code><span>ImportError</span></code> if <code><span>librabbitmq</span></code> is not installed.</p>
<blockquote>
<div><p>The librabbitmq falls back to the older <code><span>pylibrabbitmq</span></code> name for
compatibility reasons and would therefore show <code><span>No</span> <span>module</span> <span>named</span>
<span>pylibrabbitmq</span></code> instead of librabbitmq.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on <code><span>anyjson</span></code> 0.3.3</p>
</li>
<li><p>Json serializer: Now passes <code><span>buffer</span></code> objects directly,
since this is supported in the latest <code><span>anyjson</span></code> version.</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixes</span> blocking epoll call if timeout was set to 0.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by John Watson.</p>
</div></blockquote>
</li>
<li><p>setup.py now takes requirements from the <code><span>requirements/</span></code> directory.</p>
</li>
<li><p>The distribution directory <code><span>contrib/</span></code> is now renamed to <code><span>extra/</span></code></p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>SQS: Default visibility timeout is now 30 minutes.</p>
<blockquote>
<div><p>Since we have ack emulation the visibility timeout is
only in effect if the consumer is abrubtly terminated.</p>
</div></blockquote>
</li>
<li><p>retry argument to <code><span>Producer.publish</span></code> now works properly,
when the declare argument is specified.</p>
</li>
<li><p>Json serializer: didn’t handle buffer objects (Issue #135).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Jens Hoffrichter.</p>
</div></blockquote>
</li>
<li><p>Virtual: Now supports passive argument to <code><span>exchange_declare</span></code>.</p>
</li>
<li><p>Exchange &amp; Queue can now be bound to connections (which will use the default
channel):</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>exchange</span> <span>=</span> <span>Exchange</span><span>(</span><span>'name'</span><span>)</span>
<span>&gt;&gt;&gt; </span><span>bound_exchange</span> <span>=</span> <span>exchange</span><span>(</span><span>connection</span><span>)</span>
<span>&gt;&gt;&gt; </span><span>bound_exchange</span><span>.</span><span>declare</span><span>()</span>
</pre></div>
</div>
</li>
<li><p><code><span>SimpleQueue</span></code> &amp; <code><span>SimpleBuffer</span></code> can now be bound to connections (which
will use the default channel).</p>
</li>
<li><p><code><span>Connection.manager.get_bindings</span></code> now works for librabbitmq and pika.</p>
</li>
<li><p>Adds new transport info attributes:</p>
<div><div><pre>- ``Transport.driver_type``

    Type of underlying driver, e.g. "amqp", "redis", "sql".

- ``Transport.driver_name``

    Name of library used e.g. "amqplib", "redis", "pymongo".

- ``Transport.driver_version()``

    Version of underlying library.
</pre></div>
</div>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<div>
<span/><h3>Important Notes<a href="http://kombu.readthedocs.org/en/latest/changelog.html#important-notes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The canonical source code repository has been moved to</p>
<blockquote>
</blockquote>
</li>
<li><p>Pidbox: Exchanges used by pidbox are no longer auto_delete.</p>
<blockquote>
<div><p>Auto delete has been described as a misfeature,
and therefore we have disabled it.</p>
<p>For RabbitMQ users old exchanges used by pidbox must be <span class="changelog-highlight-inc">removed</span>,
these are named <code><span>mailbox_name.pidbox</span></code>,
and <code><span>reply.mailbox_name.pidbox</span></code>.</p>
<p>The following command can be used to clean up these exchanges:</p>
<div><div><pre>VHOST=/ URL=amqp:// python -c'import sys,kombu;[kombu.Connection(
    sys.argv[-1]).channel().exchange_delete(x)
        for x in sys.argv[1:-1]]' \
    $(sudo rabbitmqctl -q list_exchanges -p "$VHOST" \
    | grep \.pidbox | awk '{print $1}') "$URL"
</pre></div>
</div>
<p>The <span/><code><span>VHOST</span></code> variable must be set to the target RabbitMQ virtual host,
and the <span/><code><span>URL</span></code> must be the AMQP URL to the server.</p>
</div></blockquote>
</li>
<li><p>The <code><span>amqp</span></code> transport alias will now use <code><span>librabbitmq</span></code>
if installed.</p>
<blockquote>
<div><p><a href="https://github.com/celery/librabbitmq">py-librabbitmq</a> is a fast AMQP client for Python
using the librabbitmq C library.</p>
<p>It can be installed by:</p>
<div><div><pre>$ pip install librabbitmq
</pre></div>
</div>
<p>It will not be used if the process is monkey patched by eventlet/gevent.</p>
</div></blockquote>
</li>
</ul>
</div>
<div>
<span/><h3>News<a href="http://kombu.readthedocs.org/en/latest/changelog.html#news" title="Permalink to this headline">¶</a></h3>

<ul>
<li><p>Redis: Priority support.</p>
<blockquote>
<div><p>The message’s <code><span>priority</span></code> field is now respected by the Redis
transport by having multiple lists for each named queue.
The queues are then consumed by in order of priority.</p>
<p>The priority field is a number in the range of 0 - 9, where
0 is the default and highest priority.</p>
<p>The priority range is collapsed into four steps by default, since it is
unlikely that nine steps will yield more benefit than using four steps.
The number of steps can be configured by setting the <code><span>priority_steps</span></code>
transport option, which must be a list of numbers in <strong>sorted order</strong>:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>x</span> <span>=</span> <span>Connection</span><span>(</span><span>'redis://'</span><span>,</span> <span>transport_options</span><span>=</span><span>{</span>
<span>... </span>    <span>'priority_steps'</span><span>:</span> <span>[</span><span>0</span><span>,</span> <span>2</span><span>,</span> <span>4</span><span>,</span> <span>6</span><span>,</span> <span>8</span><span>,</span> <span>9</span><span>],</span>
<span>... </span><span>})</span>
</pre></div>
</div>
<p>Priorities implemented in this way is not as reliable as
priorities on the server side, which is why
nickname the feature “quasi-priorities”;
<strong>Using routing is still the suggested way of ensuring
quality of service</strong>, as client implemented priorities
fall short in a number of ways, e.g. if the worker
is busy with long running tasks, has prefetched many messages,
or the queues are congested.</p>
<p>Still, it is possible that using priorities in combination
with routing can be more beneficial than using routing
or priorities alone.  Experimentation and monitoring
should be used to prove this.</p>
<p>Contributed by Germán M. Bravo.</p>
</div></blockquote>
</li>
<li><p>Redis: Now cycles queues so that consuming is fair.</p>
<blockquote>
<div><p>This ensures that a very busy queue won’t block messages
from other queues, and ensures that all queues have
an equal chance of being consumed from.</p>
<p>This used to be the case before, but the behavior was
accidentally changed while switching to using blocking pop.</p>
</div></blockquote>
</li>
<li><p>Redis: Auto delete queues that are bound to fanout exchanges
is now deleted at channel.close.</p>
</li>
<li><p>amqplib: Refactored the drain_events implementation.</p>
</li>
<li><p>Pidbox: Now uses <code><span>connection.default_channel</span></code>.</p>
</li>
<li><p>Pickle serialization: Can now decode buffer objects.</p>
</li>
<li><p>Exchange/Queue declarations can now be cached even if
the entity is non-durable.</p>
<blockquote>
<div><p>This is possible because the list of cached declarations
are now kept with the connection, so that the entities
will be redeclared if the connection is lost.</p>
</div></blockquote>
</li>
<li><p>Kombu source code now only uses one-level of explicit relative imports.</p>
</li>
</ul>
</div>
<div>
<span/><h3><span class="changelog-highlight-fix">Fixes</span><a href="http://kombu.readthedocs.org/en/latest/changelog.html#fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>eventio: Now ignores ENOENT raised by <code><span>epoll.register</span></code>, and
EEXIST from <code><span>epoll.unregister</span></code>.</p>
</li>
<li><p>eventio: kqueue now ignores <code><span>KeyError</span></code> on unregister.</p>
</li>
<li><p>Redis: <code><span>Message.reject</span></code> now supports the <code><span>requeue</span></code> argument.</p>
</li>
<li><p>Redis: <span class="changelog-highlight-inc">Remove</span> superfluous pipeline call.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Thomas Johansson.</p>
</div></blockquote>
</li>
<li><p>Redis: Now sets redelivered header for redelivered messages.</p>
</li>
<li><p>Now always makes sure references to <code><span>sys.exc_info()</span></code> is <span class="changelog-highlight-inc">removed</span>.</p>
</li>
<li><p>Virtual: The compression header is now <span class="changelog-highlight-inc">removed</span> before restoring messages.</p>
</li>
<li><p>More tests for the SQLAlchemy backend.</p>
<blockquote>
<div><p>Contributed by Franck Cuny.</p>
</div></blockquote>
</li>
<li><p>Url parsing did not handle MongoDB URLs properly.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Flavio Percoco Premoli.</p>
</div></blockquote>
</li>
<li><p>Beanstalk: Ignore default tube when reserving.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Zhao Xiaohong.</p>
</div></blockquote>
</li>
</ul>
</div>
<div>
<h3>Nonblocking consume support<a href="http://kombu.readthedocs.org/en/latest/changelog.html#nonblocking-consume-support" title="Permalink to this headline">¶</a></h3>
<p>librabbitmq, amqplib and redis transports can now be used
non-blocking.</p>
<p>The interface is very manual, and only consuming messages
is non-blocking so far.</p>
<p>The API should not be regarded as stable or final
in any way. It is used by Celery which has very limited
needs at this point. Hopefully we can introduce a proper
callback-based API later.</p>
<ul>
<li><p><code><span>Transport.eventmap</span></code></p>
<blockquote>
<div><p>Is a map of <code><span>fd</span> <span>-&gt;</span> <span>callback(fileno,</span> <span>event)</span></code>
to register in an eventloop.</p>
</div></blockquote>
</li>
<li><p><code><span>Transport.on_poll_start()</span></code></p>
<blockquote>
<div><p>Is called before every call to poll.
The poller must support <code><span>register(fd,</span> <span>callback)</span></code>
and <code><span>unregister(fd)</span></code> methods.</p>
</div></blockquote>
</li>
<li><p><code><span>Transport.on_poll_start(poller)</span></code></p>
<blockquote>
</blockquote>
</li>
<li><p><code><span>Connection.ensure_connection</span></code> now takes a callback
argument which is called for every loop while
the connection is down.</p>
</li>
<li><p>Adds <code><span>connection.drain_nowait</span></code></p>
<blockquote>
<div><p>This is a non-blocking alternative to drain_events,
but only supported by amqplib/librabbitmq.</p>
</div></blockquote>
</li>
<li><p>drain_events now sets <code><span>connection.more_to_read</span></code> if
there is more data to read.</p>
<blockquote>
<div><p>This is to support eventloops where other things
must be handled between draining events.</p>
</div></blockquote>
</li>
</ul>
</div>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Bound Exchange/Queue’s are now pickleable.</p>
</li>
<li><p>Consumer/Producer can now be instantiated without a channel,
and only later bound using <code><span>.revive(channel)</span></code>.</p>
</li>
<li><p>ProducerPool now takes <code><span>Producer</span></code> argument.</p>
</li>
<li><p><a href="http://kombu.readthedocs.org/en/latest/reference/kombu.utils.html#kombu.utils.fxrange" title="kombu.utils.fxrange"><code><span>fxrange()</span></code></a> now counts forever if the
stop argument is set to None.
(fxrange is like xrange but for decimals).</p>
</li>
<li><p>Auto delete support for virtual transports were incomplete
and could lead to problems so it was <span class="changelog-highlight-inc">removed</span>.</p>
</li>
<li><p>Cached declarations (<a href="http://kombu.readthedocs.org/en/latest/reference/kombu.common.html#kombu.common.maybe_declare" title="kombu.common.maybe_declare"><code><span>maybe_declare()</span></code></a>)
are now bound to the underlying connection, so that
entities are redeclared if the connection is lost.</p>
<blockquote>
<div><p>This also means that previously uncacheable entities
(e.g. non-durable) can now be cached.</p>
</div></blockquote>
</li>
<li><p>compat ConsumerSet: can now specify channel.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>compat consumerset now accepts optional channel argument.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>SQLAlchemy transport was not working correctly after URL parser change.</p>
</li>
<li><p>maybe_declare now stores cached declarations per underlying connection
instead of globally, in the rare case that data disappears from the
broker after connection loss.</p>
</li>
<li><p>Django: Added South migrations.</p>
<blockquote>
<div><p>Contributed by Joseph Crosland.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>The url parser <span class="changelog-highlight-inc">removed</span> more than the first leading slash (Issue #121).</p>
</li>
<li><p>SQLAlchemy: Can now specify url using + separator</p>
<blockquote>
<div><p>Example:</p>
<div><div><pre><span>Connection</span><span>(</span><span>'sqla+mysql://localhost/db'</span><span>)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Better support for anonymous queues (Issue #116).</p>
<blockquote>
<div><p>Contributed by Michael Barrett.</p>
</div></blockquote>
</li>
<li><p><code><span>Connection.as_uri</span></code> now quotes url parts (Issue #117).</p>
</li>
<li><p>Beanstalk: Can now set message TTR as a message property.</p>
<blockquote>
<div><p>Contributed by Andrii Kostenko</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>MongoDB:  URL parsing are now delegated to the pymongo library
(Fixes Issue #103 and Issue #87).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Flavio Percoco Premoli and James Sullivan</p>
</div></blockquote>
</li>
<li><p>SQS:  A <span class="changelog-highlight-fix">bug</span> caused SimpleDB to be used even if sdb persistence
was not enabled (Issue #108).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Anand Kumria.</p>
</div></blockquote>
</li>
<li><p>Django:  Transaction was committed in the wrong place, causing
data cleanup to fail (Issue #115).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Daisuke Fujiwara.</p>
</div></blockquote>
</li>
<li><p>MongoDB: Now supports replica set URLs.</p>
<blockquote>
<div><p>Contributed by Flavio Percoco Premoli.</p>
</div></blockquote>
</li>
<li><p>Redis: Now raises a channel error if a queue key that is currently
being consumed from disappears.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Stephan Jaekel.</p>
</div></blockquote>
</li>
<li><p>All transport ‘channel_errors’ lists now includes
<code><span>kombu.exception.StdChannelError</span></code>.</p>
</li>
<li><p>All kombu exceptions now inherit from a common
<code><span>KombuError</span></code>.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixes</span> Jython compatibility issues.</li>
<li><span class="changelog-highlight-fix">Fixes</span> Python 2.5 compatibility issues.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>amqplib: Last version broke SSL support.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Connection URLs now supports encoded characters.</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> a case where connection pool could not recover from connection loss.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Florian Munz.</p>
</div></blockquote>
</li>
<li><p>We now patch amqplib’s <code><span>__del__</span></code> method to skip trying to close the socket
if it is not connected, as this resulted in an annoying warning.</p>
</li>
<li><p>Compression can now be used with binary message payloads.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Steeve Morin.</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>MongoDB: Now supports fanout (broadcast) (Issue #98).</p>
<blockquote>
<div><p>Contributed by Scott Lyons.</p>
</div></blockquote>
</li>
<li><p>amqplib: Now detects broken connections by using <code><span>MSG_PEEK</span></code>.</p>
</li>
<li><p>pylibrabbitmq: Now supports <code><span>basic_get</span></code> (Issue #97).</p>
</li>
<li><p>gevent: Now always uses the <code><span>select</span></code> polling backend.</p>
</li>
<li><p>pika transport: Now works with pika 0.9.5 and 0.9.6dev.</p>
<blockquote>
<div><p>The old pika transport (supporting 0.5.x) is now available
as alias <code><span>oldpika</span></code>.</p>
<p>(Note terribly latency has been experienced with the new pika
versions, so this is still an experimental transport).</p>
</div></blockquote>
</li>
<li><p>Virtual transports: can now set polling interval via the
transport options (Issue #96).</p>
<blockquote>
<div><p>Example:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>Connection</span><span>(</span><span>'sqs://'</span><span>,</span> <span>transport_options</span><span>=</span><span>{</span>
<span>... </span>    <span>'polling_interval'</span><span>:</span> <span>5.0</span><span>})</span>
</pre></div>
</div>
<p>The default interval is transport specific, but usually
1.0s (or 5.0s for the Django database transport, which
can also be set using the <code><span>KOMBU_POLLING_INTERVAL</span></code> setting).</p>
</div></blockquote>
</li>
<li><p>Adds convenience function: <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.common.html#kombu.common.eventloop" title="kombu.common.eventloop"><code><span>kombu.common.eventloop()</span></code></a>.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      

<div>
<span/><h3>News<a href="http://kombu.readthedocs.org/en/latest/changelog.html#v200-news" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><a href="http://kombu.readthedocs.org/en/latest/reference/kombu.mixins.html#kombu.mixins.ConsumerMixin" title="kombu.mixins.ConsumerMixin"><code><span>kombu.mixins.ConsumerMixin</span></code></a> is a mixin class that lets you
easily write consumer programs and threads.</p>
<p>See <a href="http://kombu.readthedocs.org/en/latest/userguide/examples.html#examples"><span>Examples</span></a> and <a href="http://kombu.readthedocs.org/en/latest/userguide/consumers.html#guide-consumers"><span>Consumers</span></a>.</p>
</li>
<li><p>SQS Transport: Added support for SQS queue prefixes (Issue #84).</p>
<blockquote>
<div><p>The queue prefix can be set using the transport option
<code><span>queue_name_prefix</span></code>:</p>
<div><div><pre><span>BrokerTransport</span><span>(</span><span>'SQS://'</span><span>,</span> <span>transport_options</span><span>=</span><span>{</span>
    <span>'queue_name_prefix'</span><span>:</span> <span>'myapp'</span><span>})</span>
</pre></div>
</div>
<p>Contributed by Nitzan Miron.</p>
</div></blockquote>
</li>
<li><p><code><span>Producer.publish</span></code> now supports automatic retry.</p>
<blockquote>
<div><p>Retry is enabled by the <code><span>reply</span></code> argument, and retry options
set by the <code><span>retry_policy</span></code> argument:</p>
<div><div><pre><span>exchange</span> <span>=</span> <span>Exchange</span><span>(</span><span>'foo'</span><span>)</span>
<span>producer</span><span>.</span><span>publish</span><span>(</span><span>message</span><span>,</span> <span>exchange</span><span>=</span><span>exchange</span><span>,</span> <span>retry</span><span>=</span><span>True</span><span>,</span>
                 <span>declare</span><span>=</span><span>[</span><span>exchange</span><span>],</span> <span>retry_policy</span><span>=</span><span>{</span>
                    <span>'interval_start'</span><span>:</span> <span>1.0</span><span>})</span>
</pre></div>
</div>
<p>See <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Connection.ensure" title="kombu.Connection.ensure"><code><span>ensure()</span></code></a>
for a list of supported retry policy options.</p>
</div></blockquote>
</li>
<li><p><code><span>Producer.publish</span></code> now supports a <code><span>declare</span></code> keyword argument.</p>
<blockquote>
<div><p>This is a list of entities (<code><span>Exchange</span></code>, or <code><span>Queue</span></code>)
that should be declared before the message is published.</p>
</div></blockquote>
</li>
</ul>
</div>
<div>
<span/><h3><span class="changelog-highlight-fix">Fixes</span><a href="http://kombu.readthedocs.org/en/latest/changelog.html#v200-fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li>Redis transport: Timeout was multiplied by 1000 seconds when using
<code><span>select</span></code> for event I/O (Issue #86).</li>
</ul>
</div>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>kombu.pools: <span class="changelog-highlight-fix">Fixed a bug</span> resulting in resources not being properly released.</p>
<p>This was caused by the use of <code><span>__hash__</span></code> to distinguish them.</p>
</li>
<li><p>Virtual transports: Dead-letter queue is now disabled by default.</p>
<blockquote>
<div><p>The dead-letter queue was enabled by default to help application
authors, but now that Kombu is stable it should be <span class="changelog-highlight-inc">removed</span>.
There are after all many cases where messages should just be dropped
when there are no queues to buffer them, and keeping them without
supporting automatic cleanup is rather considered a resource leak
than a feature.</p>
<p>If wanted the dead-letter queue can still be enabled, by using
the <code><span>deadletter_queue</span></code> transport option:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>x</span> <span>=</span> <span>Connection</span><span>(</span><span>'redis://'</span><span>,</span>
<span>... </span>      <span>transport_options</span><span>=</span><span>{</span><span>'deadletter_queue'</span><span>:</span> <span>'ae.undeliver'</span><span>})</span>
</pre></div>
</div>
<p>In addition, an <code><span>UndeliverableWarning</span></code> is now emitted when
the dead-letter queue is enabled and a message ends up there.</p>
<p>Contributed by Ionel Maries Cristian.</p>
</div></blockquote>
</li>
<li><p>MongoDB transport now supports Replicasets (Issue #81).</p>
<blockquote>
<div><p>Contributed by Ivan Metzlar.</p>
</div></blockquote>
</li>
<li><p>The <code><span>Connection.ensure</span></code> methods now accepts a <code><span>max_retries</span></code> value
of 0.</p>
<blockquote>
<div><p>A value of 0 now means <em>do not retry</em>, which is distinct from <code><span>None</span></code>
which means <em>retry indefinitely</em>.</p>
<p>Contributed by Dan McGee.</p>
</div></blockquote>
</li>
<li><p>SQS Transport: Now has a lowercase <code><span>sqs</span></code> alias, so that it can be
used with broker URLs (Issue #82).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Hong Minhee</p>
</div></blockquote>
</li>
<li><p>SQS Transport: <span class="changelog-highlight-fix">Fixes</span> KeyError on message acknowledgements (Issue #73).</p>
<blockquote>
<div><p>The SQS transport now uses UUID’s for delivery tags, rather than
a counter.</p>
<p><span class="changelog-highlight-fix">Fix</span> contributed by Brian Bernstein.</p>
</div></blockquote>
</li>
<li><p>SQS Transport: Unicode related <span class="changelog-highlight-fix">fixes</span> (Issue #82).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Hong Minhee.</p>
</div></blockquote>
</li>
<li><p>Redis version check could crash because of improper handling of types
(Issue #63).</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixed</span> error with <cite>Resource.force_close_all</cite> when resources
were not yet properly initialized (Issue #78).</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixes</span> <span class="changelog-highlight-fix">bug</span> in ProducerPool where too many resources would be acquired.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Eventio: Polling should ignore <cite>errno.EINTR</cite></p>
</li>
<li><p>SQS: str.encode did only start accepting kwargs after Py2.7.</p>
</li>
<li><p>simple_task_queue example didn’t run correctly (Issue #72).</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Stefan Eletzhofer.</p>
</div></blockquote>
</li>
<li><p>Empty messages would not raise an exception not able to be handled
by <cite>on_decode_error</cite> (Issue #72)</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Christophe Chauvet.</p>
</div></blockquote>
</li>
<li><p>CouchDB: Properly authenticate if user/password set (Issue #70)</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Rafael Duran Castaneda</p>
</div></blockquote>
</li>
<li><p>Connection.Consumer had the wrong signature.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by Pavel Skvazh</p>
</div></blockquote>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>1.4.0 broke the producer pool, resulting in new connections being
established for every acquire.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Adds module <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.mixins.html#module-kombu.mixins" title="kombu.mixins"><code><span>kombu.mixins</span></code></a>.</p>
<blockquote>
<div><p>This module contains a <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.mixins.html#kombu.mixins.ConsumerMixin" title="kombu.mixins.ConsumerMixin"><code><span>ConsumerMixin</span></code></a> class
that can be used to easily implement a message consumer
thread that consumes messages from one or more
<a href="http://kombu.readthedocs.org/en/latest/reference/kombu.html#kombu.Consumer" title="kombu.Consumer"><code><span>kombu.Consumer</span></code></a> instances.</p>
</div></blockquote>
</li>
<li><p>New example: <a href="http://kombu.readthedocs.org/en/latest/userguide/examples.html#task-queue-example"><span>Task Queue Example</span></a></p>
<blockquote>
<div><p>Using the <code><span>ConsumerMixin</span></code>, default channels and
the global connection pool to demonstrate new Kombu features.</p>
</div></blockquote>
</li>
<li><p>MongoDB transport did not work with MongoDB &gt;= 2.0 (Issue #66)</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by James Turk.</p>
</div></blockquote>
</li>
<li><p>Redis-py version check did not account for beta identifiers
in version string.</p>
<blockquote>
<div><p><span class="changelog-highlight-fix">Fix</span> contributed by David Ziegler.</p>
</div></blockquote>
</li>
<li><p>Producer and Consumer now accepts a connection instance as the
first argument.</p>
<blockquote>
<div><p>The connections default channel will then be used.</p>
<p>In addition shortcut methods has been added to Connection:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>connection</span><span>.</span><span>Producer</span><span>(</span><span>exchange</span><span>)</span>
<span>&gt;&gt;&gt; </span><span>connection</span><span>.</span><span>Consumer</span><span>(</span><span>queues</span><span>=...</span><span>,</span> <span>callbacks</span><span>=...</span><span>)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Connection has aquired a <code><span>connected</span></code> attribute that
can be used to check if the connection instance has established
a connection.</p>
</li>
<li><p><code><span>ConnectionPool.acquire_channel</span></code> now returns the connections
default channel rather than establising a new channel that
must be manually handled.</p>
</li>
<li><p>Added <code><span>kombu.common.maybe_declare</span></code></p>
<blockquote>
<div><p><code><span>maybe_declare(entity)</span></code> declares an entity if it has
not previously been declared in the same process.</p>
</div></blockquote>
</li>
<li><p><code><span>kombu.compat.entry_to_queue()</span></code> has been moved to <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.common.html#module-kombu.common" title="kombu.common"><code><span>kombu.common</span></code></a></p>
</li>
<li><p>New module <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.clocks.html#module-kombu.clocks" title="kombu.clocks"><code><span>kombu.clocks</span></code></a> now contains an implementation
of Lamports logical clock.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Python 3: AMQP_PROTOCOL_HEADER must be bytes, not str.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixes</span> syntax error in pools.reset</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>pools.reset did not support after forker arguments.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Broke Python 2.5 compatibility by importing <code><span>parse_qsl</span></code> from <code><span>urlparse</span></code></li>
<li>Connection.default_channel is now closed when connection is revived
after connection failures.</li>
<li>Pika: Channel now supports the <code><span>connection.client</span></code> attribute
as required by the simple interface.</li>
<li>pools.set_limit now raises an exception if the limit is lower
than the previous limit.</li>
<li>pools.set_limit no longer resets the pools.</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Last release broke after fork for pool reinitialization.</p>
</li>
<li><p>Producer/Consumer now has a <code><span>connection</span></code> attribute,
giving access to the <code><span>Connection</span></code> of the
instance.</p>
</li>
<li><p>Pika: Channels now have access to the underlying
<code><span>Connection</span></code> instance using <code><span>channel.connection.client</span></code>.</p>
<blockquote>
<div><p>This was previously required by the <code><span>Simple</span></code> classes and is now
also required by <code><span>Consumer</span></code> and <code><span>Producer</span></code>.</p>
</div></blockquote>
</li>
<li><p>Connection.default_channel is now closed at object revival.</p>
</li>
<li><p>Adds kombu.clocks.LamportClock.</p>
</li>
<li><p>compat.entry_to_queue has been moved to new module <a href="http://kombu.readthedocs.org/en/latest/reference/kombu.common.html#module-kombu.common" title="kombu.common"><code><span>kombu.common</span></code></a>.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Broker connection info can be now be specified using URLs</p>
<blockquote>
<div><p>The broker hostname can now be given as an URL instead, of the format:</p>
<div><div><pre>transport://user:password@hostname:port/virtual_host
</pre></div>
</div>
<p>for example the default broker is expressed as:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>Connection</span><span>(</span><span>'amqp://guest:guest@localhost:5672//'</span><span>)</span>
</pre></div>
</div>
<p>Transport defaults to amqp, and is not required.
user, password, port and virtual_host is also not mandatory and
will default to the corresponding transports default.</p>
<div>
<p>Note</p>
<p>Note that the path component (virtual_host) always starts with a
forward-slash.  This is necessary to distinguish between the virtual
host ‘’ (empty) and ‘/’, which are both acceptable virtual host names.</p>
<p>A virtual host of ‘/’ becomes:</p>
<blockquote>
<div><p>amqp://guest:guest@localhost:5672//</p>
</div></blockquote>
<p>and a virtual host of ‘’ (empty) becomes:</p>
<div><div><pre>amqp://guest:guest@localhost:5672/
</pre></div>
</div>
<p>So the leading slash in the path component is <strong>always required</strong>.</p>
</div>
</div></blockquote>
</li>
<li><p>Now comes with default global connection and producer pools.</p>
<blockquote>
<div><p>The acquire a connection using the connection parameters
from a <code><span>Connection</span></code>:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>from</span> <span>kombu</span> <span>import</span> <span>Connection</span><span>,</span> <span>connections</span>
<span>&gt;&gt;&gt; </span><span>connection</span> <span>=</span> <span>Connection</span><span>(</span><span>'amqp://guest:guest@localhost//'</span><span>)</span>
<span>&gt;&gt;&gt; </span><span>with</span> <span>connections</span><span>[</span><span>connection</span><span>]</span><span>.</span><span>acquire</span><span>(</span><span>block</span><span>=</span><span>True</span><span>):</span>
<span>... </span>    <span># do something with connection</span>
</pre></div>
</div>
<p>To acquire a producer using the connection parameters
from a <code><span>Connection</span></code>:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>from</span> <span>kombu</span> <span>import</span> <span>Connection</span><span>,</span> <span>producers</span>
<span>&gt;&gt;&gt; </span><span>connection</span> <span>=</span> <span>Connection</span><span>(</span><span>'amqp://guest:guest@localhost//'</span><span>)</span>
<span>&gt;&gt;&gt; </span><span>with</span> <span>producers</span><span>[</span><span>connection</span><span>]</span><span>.</span><span>acquire</span><span>(</span><span>block</span><span>=</span><span>True</span><span>):</span>
<span>... </span>    <span>producer</span><span>.</span><span>publish</span><span>({</span><span>'hello'</span><span>:</span> <span>'world'</span><span>},</span> <span>exchange</span><span>=</span><span>'hello'</span><span>)</span>
</pre></div>
</div>
<p>Acquiring a producer will in turn also acquire a connection
from the associated pool in <code><span>connections</span></code>, so you the number
of producers is bound the same limit as number of connections.</p>
<p>The default limit of 100 connections per connection instance
can be changed by doing:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>from</span> <span>kombu</span> <span>import</span> <span>pools</span>
<span>&gt;&gt;&gt; </span><span>pools</span><span>.</span><span>set_limit</span><span>(</span><span>10</span><span>)</span>
</pre></div>
</div>
<p>The pool can also be forcefully closed by doing:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>from</span> <span>kombu</span> <span>import</span> <span>pools</span>
<span>&gt;&gt;&gt; </span><span>pool</span><span>.</span><span>reset</span><span>()</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>SQS Transport: Persistence using SimpleDB is now disabled by default,
after reports of unstable SimpleDB connections leading to errors.</p>
</li>
<li><p><code><span>Producer</span></code> can now be used as a context manager.</p>
</li>
<li><p><code><span>Producer.__exit__</span></code> now properly calls <code><span>release</span></code> instead of close.</p>
<blockquote>
</blockquote>
</li>
<li><p>Now silences all exceptions from <cite>import ctypes</cite> to match behaviour
of the standard Python uuid module, and avoid passing on MemoryError
exceptions on SELinux-enabled systems (Issue #52 + Issue #53)</p>
</li>
<li><p><code><span>amqp</span></code> is now an alias to the <code><span>amqplib</span></code> transport.</p>
</li>
<li><p><code><span>kombu.syn.detect_environment</span></code> now returns ‘default’, ‘eventlet’, or
‘gevent’ depending on what monkey patches have been installed.</p>
</li>
<li><p>Serialization registry has new attribute <code><span>type_to_name</span></code> so it is
possible to lookup serializater name by content type.</p>
</li>
<li><p>Exchange argument to <code><span>Producer.publish</span></code> can now be an <code><span>Exchange</span></code>
instance.</p>
</li>
<li><p><code><span>compat.Publisher</span></code> now supports the <code><span>channel</span></code> keyword argument.</p>
</li>
<li><p>Acking a message on some transports could lead to <code><span>KeyError</span></code> being
raised (Issue #57).</p>
</li>
<li><p>Connection pool:  Connections are no long instantiated when the pool is
created, but instantiated as needed instead.</p>
</li>
<li><p>Tests now pass on PyPy.</p>
</li>
<li><p><code><span>Connection.as_uri</span></code> now includes the password if the keyword argument
<code><span>include_password</span></code> is set.</p>
</li>
<li><p>Virtual transports now comes with a default <code><span>default_connection_params</span></code>
attribute.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Now depends on amqplib &gt;= 1.0.0.</p>
</li>
<li><p>Redis: Now automatically deletes auto_delete queues at <code><span>basic_cancel</span></code>.</p>
</li>
<li><p><code><span>serialization.unregister</span></code> added so it is possible to <span class="changelog-highlight-inc">remove</span> unwanted
seralizers.</p>
</li>
<li><p><span class="changelog-highlight-fix">Fixes</span> MemoryError while importing ctypes on SELinux (Issue #52).</p>
</li>
<li><p><code><span>Connection.autoretry</span></code> is a version of <code><span>ensure</span></code> that works
with arbitrary functions (i.e. it does not need an associated object
that implements the <code><span>revive</span></code> method.</p>
<p>Example usage:</p>
<div><div><pre><span>channel</span> <span>=</span> <span>connection</span><span>.</span><span>channel</span><span>()</span>
<span>try</span><span>:</span>
    <span>ret</span><span>,</span> <span>channel</span> <span>=</span> <span>connection</span><span>.</span><span>autoretry</span><span>(</span><span>send_messages</span><span>,</span> <span>channel</span><span>=</span><span>channel</span><span>)</span>
<span>finally</span><span>:</span>
    <span>channel</span><span>.</span><span>close</span><span>()</span>
</pre></div>
</div>
</li>
<li><p><code><span>ConnectionPool.acquire</span></code> no longer force establishes the connection.</p>
<blockquote>
<div><p>The connection will be established as needed.</p>
</div></blockquote>
</li>
<li><p><code><span>Connection.ensure</span></code> now supports an <code><span>on_revive</span></code> callback
that is applied whenever the connection is re-established.</p>
</li>
<li><p><code><span>Consumer.consuming_from(queue)</span></code> returns True if the Consumer is
consuming from <code><span>queue</span></code>.</p>
</li>
<li><p><code><span>Consumer.cancel_by_queue</span></code> did not <span class="changelog-highlight-inc">remove</span> the queue from <code><span>queues</span></code>.</p>
</li>
<li><p><code><span>compat.ConsumerSet.add_queue_from_dict</span></code> now automatically declared
the queue if <code><span>auto_declare</span></code> set.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li>Virtual: <span class="changelog-highlight-fix">Fixes</span> cyclic reference in Channel.close (Issue #49).</li>
<li>Producer.publish: Can now set additional properties using keyword
arguments (Issue #48).</li>
<li>Adds Queue.no_ack option to control the no_ack option for individual queues.</li>
<li>Recent versions broke pylibrabbitmq support.</li>
<li>SimpleQueue and SimpleBuffer can now be used as contexts.</li>
<li>Test requirements specifies PyYAML==3.09 as 3.10 dropped Python 2.4 support</li>
<li>Now properly reports default values in Connection.info/.as_uri</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><p>Redis: <span class="changelog-highlight-fix">Fixes</span> issue introduced in 1.1.4, where a redis connection
failure could leave consumer hanging forever.</p>
</li>
<li><p>SQS: Now supports fanout messaging by using SimpleDB to store routing
tables.</p>
<blockquote>
<div><p>This can be disabled by setting the <cite>supports_fanout</cite> transport option:</p>
<div><div><pre><span>&gt;&gt;&gt; </span><span>Connection</span><span>(</span><span>transport</span><span>=</span><span>'SQS'</span><span>,</span>
<span>... </span>           <span>transport_options</span><span>=</span><span>{</span><span>'supports_fanout'</span><span>:</span> <span>False</span><span>})</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>SQS: Now properly deletes a message when a message is acked.</p>
</li>
<li><p>SQS: Can now set the Amazon AWS region, by using the <code><span>region</span></code>
transport option.</p>
</li>
<li><p>amqplib: Now uses <cite>localhost</cite> as default hostname instead of raising an
error.</p>
</li>
</ul>
    </div>
  
</li>

<li class="package-version">
  
  <h5 class="package-version__date">Discovered at Dec. 28, 2014 </h5>
  <h6 class="package-version__source">Source: en/latest/changelog.html</h6>

  
    <div class="package-version__description">
      
<ul>
<li><span class="changelog-highlight-fix">Fixes</span> compatibility with redis-py 2.4.4.</li>
</ul>
    </div>
  
</li>


    </ul>
  </div>

      </div>
     

      
      
      

      



    






<noscript/>













      

      
      
      
</body>
</div></body></html>