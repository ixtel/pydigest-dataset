<html><body><div><p>A data validation and REST auto-documenter for APIs.</p>








<div>
<p>Restifier is a python library for creating and documenting RESTful
APIs.</p>
<p>It includes a middleware component, a set of decorators, and a “forms”
library for validating/documenting requests. The middle generates a
Swagger compatible JSON specification for the APIs automatically.</p>
</div>
<div id="usage">
<h2>Usage</h2>
<p>See tests.py for information on usage. In general, so create a payload
validator construct a class like this:</p>
<pre><span class="k">class</span> <span class="nc">HelloMessage</span><span class="p">(</span><span class="n">Message</span><span class="p">):</span>
    <span class="n">greeting</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">"The greating."</span><span class="p">,</span>
        <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">regex</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">'^[A-Za-z]+$'</span><span class="p">)),</span> <span class="n">required</span><span class="p">()])</span>

<span class="k">class</span> <span class="nc">HelloResponseMessage</span><span class="p">(</span><span class="n">Message</span><span class="p">):</span>
    <span class="n">salutation</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">"The response."</span><span class="p">)</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">StringProperty</span><span class="p">(</span><span class="n">repeated</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">StructuredProperty</span><span class="p">(</span><span class="n">HelloMessage</span><span class="p">)</span>
</pre>
<p>Then decorate your handlers like this:</p>
<pre><span class="k">class</span> <span class="nc">HelloHandler</span><span class="p">(</span><span class="n">RequestHandler</span><span class="p">):</span>

    <span class="nd">@api</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">HelloMessage</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">HelloResponseMessage</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">'salutation'</span><span class="p">:</span><span class="s1">'You are the best.'</span><span class="p">}</span>
</pre>
<p>Also, to auto-document, use the middleware:</p>
<pre><span class="n">routes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s1">'/api/v1/hello'</span><span class="p">,</span> <span class="n">HelloHandler</span><span class="p">)</span>
<span class="p">]</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">DocumentedMiddleware</span><span class="p">(</span>
    <span class="n">WSGIApplication</span><span class="p">(</span><span class="n">routes</span><span class="p">),</span>
    <span class="n">api_base</span><span class="o">=</span><span class="s2">"/api/v1"</span><span class="p">,</span>
    <span class="n">api_overview</span><span class="o">=</span><span class="s2">"This is a super important API that does a lot of stuff."</span>
<span class="p">)</span>
</pre>
</div>


</div></body></html>