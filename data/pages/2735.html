<html><body><div><div class="article-content"><p>Pelican allows you to create a static blog. Most blog sites on the web are <em>dynamic</em> in the sense that the content of the site live in a database. In order to view a post on a blog, the server has to <em>query</em> the database, get the right content and then <em>convert</em> it into presentable HTML. However, in a static site, every page is pre-rendered by the static blog generator. This means that your <em>entire</em> blog can be uploaded to a server.</p><p>Here's a non-exhaustive list of why a static blog generator is good:</p><ul class="simple"><li><em>Cheap Scaling</em>: Pre-rendered static files can stand the onslaught of traffic if your post makes it to the top of hackernews or reddit very cheaply. No queries are being made.</li><li><em>Any format</em>: You can use reStructuredText, Markdown etc. to write your posts.</li><li><em>Host Anywhere</em>: Static sites can be hosted easily on github pages, Amazon S3 and even dropbox.</li><li><em>Own Everything</em>: You have access to all your posts and all your themes. No company in the middle, just you and your content.</li><li><em>Control</em>: Static site generators give you a lot of control over pretty much every aspect of your site through templates and plugins, allowing you to quickly add complex functionality not found in popular web blogging platforms.</li><li><em>Update Issues</em>: If you are using wordpress, you <em>have</em> to update your software when a new version comes out; otherwise, you have a security risk. However, one can use the same version of a static blog generator indefinitely.</li></ul><p>Here's why pelican is a good choice in contrast with other generators: <a class="footnote-reference" href="#assumingpy" id="id1">[1]</a></p><ul class="simple"><li><em>Plugins</em>: Pelican has a lot of plugins, that allow you to quickly add functionality.</li><li><em>Hackable</em>: Extending pelican as well as altering its behaviour is simple.</li><li><em>Themes</em>: Pelican has <em>a lot</em> of themes, and you can make your own.</li><li><em>Multi-platform</em>: Works well on Windows, OSX and Linux. <a class="footnote-reference" href="#windows" id="id2">[2]</a></li></ul><p>I've been using Pelican as my static blog generator for the past year. Over this time, I have come to recognize its strengths and weaknesses. Pelican allows you to quickly get a themed site up and running in a matter of minutes. You can also choose to invest more time and create your own theme. In short, if you want a low hassle setup, its there and if you want a more custom site you can have that too.</p><p>However, Pelican's initial setup barely scratches the surface of what's possible with this small yet powerful blog generator. It has many plugins too for quickly adding extra functionality, like the support of other document formats; <code>ipynb</code> and <code>asciidoc</code> for example. Plugins also allow you to support things like MathJax in your pages and embed disqus comments. <a class="footnote-reference" href="#id13" id="id3">[3]</a></p><div class="section" id="getting-started"><p>Before diving in, I expect you to know a few basic things:</p><ul class="simple"><li>How to use git</li><li>How to use bash or your shell of choice</li><li>How to use Python</li></ul><div class="section" id="installing-pelican"><p>Installation is very simple:</p><p>Feel free to use virtualenv if you want to but its not required.</p><p>Pelican works with both Python 2 and Python 3. However, I chose to use Python 2 because I use an automation tool called Fabric, which only supports python 2 (for the time being).</p></div><div class="section" id="basic-setup"><p>When first beginning with pelican, one can choose to use the pelican skeleton generator to create a basic structure using <code>pelican-quickstart</code>. <a class="footnote-reference" href="#problemsquickstart" id="id4">[4]</a></p><div class="highlight"><pre><span class="nv">$ </span>pelican-quickstart
Welcome to pelican-quickstart v3.5.0.

This script will <span class="nb">help </span>you create a new Pelican-based website.

Please answer the following questions so this script can generate the files
needed by Pelican.


&gt; Where <span class="k">do</span> you want to create your new web site? <span class="o">[</span>.<span class="o">]</span>
&gt; What will be the title of this web site? Test Site
&gt; Who will be the author of this web site? Kevin Kevinson
&gt; What will be the default language of this web site? <span class="o">[</span>en<span class="o">]</span>
&gt; Do you want to specify a URL prefix? e.g., http://example.com   <span class="o">(</span>Y/n<span class="o">)</span> n
&gt; Do you want to <span class="nb">enable </span>article pagination? <span class="o">(</span>Y/n<span class="o">)</span>
&gt; How many articles per page <span class="k">do</span> you want? <span class="o">[</span>10<span class="o">]</span> 8
&gt; Do you want to generate a Fabfile/Makefile to automate generation and publishing? <span class="o">(</span>Y/n<span class="o">)</span>
&gt; Do you want an auto-reload <span class="p">&amp;</span> simpleHTTP script to assist with theme and site development? <span class="o">(</span>Y/n<span class="o">)</span>
&gt; Do you want to upload your website using FTP? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using SSH? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using Dropbox? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using S3? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using Rackspace Cloud Files? <span class="o">(</span>y/N<span class="o">)</span>
&gt; Do you want to upload your website using GitHub Pages? <span class="o">(</span>y/N<span class="o">)</span>
Done. Your new project is available at /Users/quazinafiulislam/Desktop/testingzone
</pre></div><p>There's no need to change much in the default quickstart wizard. Default values are indicated by <code>[default]</code> and <code>(y/N)</code>, where the capitalized letter is the default value. Just one thing to note here is URL prefix; don't set it right now, set it when you actually want to take your site online, and we will go over how to do that later in this tutorial.</p></div><div class="section" id="your-first-post"><p>After <code>pelican-quickstart</code> is done, this is what the directory should look like:</p><div class="highlight"><pre>.
├── Makefile
├── content/
├── develop_server.sh
├── fabfile.py
├── output/
├── pelicanconf.py
└── publishconf.py
</pre></div><p>Pelican supports reStructuredText out of the box. If you want to use another format like markdown then just install it:</p><p>More uncommon formats will be discussed later. With this out of the way, we can create our first post inside the content folder. All our writing has to be inside the <code>content</code> folder, so we change our directory to the <code>content</code> folder:</p><p>My file is called <code>first_post.rst</code> and it looks like this:</p><div class="highlight"><pre><span class="gh">first_post</span>
<span class="gh">##########</span>

<span class="nc">:date:</span> <span class="nf">2014-12-13 18:32</span>
<span class="nc">:category:</span> <span class="nf">Test</span>

Hello World from Pelican!
</pre></div><p>Basically, all one needs is a category and a date. A markdown version of the same post would be:</p><div class="highlight"><pre>Title: first_post
Date: 2014-12-13 18:32
Category: Test

Hello world from Pelican!
</pre></div><p>This is what my project directory looks like now:</p><div class="highlight"><pre>.
├── Makefile
├── content
│   └── first_post.rst
├── develop_server.sh
├── fabfile.py
├── pelicanconf.py
├── pelicanconf.pyc
└── publishconf.py
</pre></div><p>Now changing back to our project directory, we can start the development server, and see the generated blog post:</p><p>Once this is done, we should be able to see our post on <code>localhost:8000</code>:</p><img alt="Our First post with pelican" class="align-center" src="/images/pelican_05.png"/><p>We can stop the server through:</p></div></div><div class="section" id="automation"><p>Although only a title, date and category are required for a post, pelican allows you to add a lot more information like tags, authors and much more. However, creating a new file with the right date and time can be time consuming, so we can use certain tools to automate the task for us.</p><div class="section" id="vanilla-python"><p>We can create simple scripts to automatically create our entries with the right date and time. Here is an example script that I use called <code>make_entry.py</code>:</p><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">TEMPLATE</span> <span class="o">=</span> <span class="s">"""</span>
<span class="s">{title}</span>
<span class="s">{hashes}</span>

<span class="s">:date: {year}-{month}-{day} {hour}:{minute:02d}</span>
<span class="s">:tags:</span>
<span class="s">:category:</span>
<span class="s">:slug: {slug}</span>
<span class="s">:summary:</span>
<span class="s">:status: draft</span>


<span class="s">"""</span>


<span class="k">def</span> <span class="nf">make_entry</span><span class="p">(</span><span class="n">title</span><span class="p">):</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">' '</span><span class="p">,</span> <span class="s">'-'</span><span class="p">)</span>
    <span class="n">f_create</span> <span class="o">=</span> <span class="s">"content/{}_{:0&gt;2}_{:0&gt;2}_{}.rst"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">slug</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">TEMPLATE</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                                <span class="n">hashes</span><span class="o">=</span><span class="s">'#'</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">),</span>
                                <span class="n">year</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
                                <span class="n">month</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span>
                                <span class="n">day</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
                                <span class="n">hour</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span>
                                <span class="n">minute</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span>
                                <span class="n">slug</span><span class="o">=</span><span class="n">slug</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">f_create</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
        <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"File created -&gt; "</span> <span class="o">+</span> <span class="n">f_create</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">make_entry</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">"No title given"</span>
</pre></div><p>With this, making a new file can be created like so:</p><div class="highlight"><pre> <span class="nv">$ </span>python make_entry.py <span class="s2">"New Post"</span>
File created -&gt; content/2014_12_13_new-post.rst
</pre></div></div><div class="section" id="fabric"><p><em>Jump to the next section if you're not using Python 2</em><a class="footnote-reference" href="#fabpy3support" id="id5">[5]</a></p><p>Using Vanilla Python is great, but imagine trying to make a script for <em>every single</em> task you need done. This would be a nightmare. Of course, one can keep using if-else statements to add more argument parameters but that is tiring and not very flexible (not to mention error prone). This is why one option to making scripts that can take in different parameters is to use a handy library called <a class="reference external" href="http://www.fabfile.org/">Fabric</a>.</p><p>I use fabric for most of my tooling, since pelican already generates a <code>fabfile.py</code>. Getting a new command line function in fabric is very easy:</p><ul class="simple"><li>If you don't have a <code>fabfile.py</code>, create one.</li><li>Create a new function inside <code>fabfile.py</code></li><li>Run the function like so: <code>fab do_something</code></li><li>If the function has positional arguments, <code>fab do_something:True, False</code></li><li>If the function has optional keyword arguments <code>fab do_something:kill_p=True, be_happy=False</code></li></ul><p>Installing Fabric is easy:</p><p>The body of the function to make an entry is the same as before:</p><div class="highlight"><pre><span class="c"># TEMPLATE is declared before hand, and all the necessary imports made</span>
<span class="k">def</span> <span class="nf">make_entry</span><span class="p">(</span><span class="n">title</span><span class="p">):</span>
    <span class="n">today</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">slug</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">' '</span><span class="p">,</span> <span class="s">'-'</span><span class="p">)</span>
    <span class="n">f_create</span> <span class="o">=</span> <span class="s">"content/{}_{:0&gt;2}_{:0&gt;2}_{}.rst"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span> <span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">,</span> <span class="n">slug</span><span class="p">)</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">TEMPLATE</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                                <span class="n">hashes</span><span class="o">=</span><span class="s">'#'</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">title</span><span class="p">),</span>
                                <span class="n">year</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">year</span><span class="p">,</span>
                                <span class="n">month</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">month</span><span class="p">,</span>
                                <span class="n">day</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">day</span><span class="p">,</span>
                                <span class="n">hour</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">hour</span><span class="p">,</span>
                                <span class="n">minute</span><span class="o">=</span><span class="n">today</span><span class="o">.</span><span class="n">minute</span><span class="p">,</span>
                                <span class="n">slug</span><span class="o">=</span><span class="n">slug</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">f_create</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">w</span><span class="p">:</span>
        <span class="n">w</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"File created -&gt; "</span> <span class="o">+</span> <span class="n">f_create</span><span class="p">)</span>
</pre></div><p>However, this time we can call it like so:</p><div class="highlight"><pre><span class="nv">$ </span>fab make_entry:<span class="s2">"New Post"</span>
</pre></div></div><div class="section" id="fabric-alternatives"><p>There are tonnes of alternatives that allow you to make a simple command line interface quickly:</p><ul class="simple"><li><a class="reference external" href="http://click.pocoo.org/3/">Click</a> : A simple to use CLI by Armin Ronacher.</li><li><a class="reference external" href="https://github.com/willyg302/clip.py">Clip</a> : Like click, but newer, and has more features</li><li><a class="reference external" href="https://docs.python.org/3/library/argparse.html">Argparse</a> : This package comes with python by default. Its not the easiest to use package out there, but if you don't want to install a new package, then this should work fine.</li></ul><p>All three work with python 3.</p></div></div><div class="section" id="themes"><div class="section" id="using-a-theme"><p>Pelican has many themes to choose from its <a class="reference external" href="https://github.com/getpelican/pelican-themes">themes repository</a>. These are the steps:</p><ul class="simple"><li>Clone a theme repo, or if you want clone the entire <a class="reference external" href="https://github.com/getpelican/pelican-themes">themes repository</a>.</li><li>Inside <code>pelicancon.py</code> file, change the <code>THEME</code> variable, to the directory of your theme.</li></ul><p>On a side note, if you're looking for a place where you can view a screenshot of all the different themes, <a class="reference external" href="http://ptd.pronoiac.org/">this</a> site has nice screen-shots of each.</p><p>For example, if you wanted to use the <a class="reference external" href="https://github.com/kplaube/maggner-pelican">maggner-pelican</a> theme:</p><ul class="simple"><li>Clone it into your project directory, <code>git clone https://github.com/kplaube/maggner-pelican.git</code></li><li>Change the <code>THEME</code> variable to <code>'maggner-pelican'</code> and you're done :)</li></ul></div><div class="section" id="creating-themes"><p>Creating themes in Pelican is well documented in their documentation about <a class="reference external" href="http://docs.getpelican.com/en/3.5.0/themes.html">theme creation</a>. Although creating themes is beyond the scope of this post (because there's a lot that could be said), here are a few pointers:</p><ul class="simple"><li>Target one format, if you try to create a theme for multiple formats like both rst and md, you're doing to run into a lot of issues.</li><li>Using preprocessors can be more effective than using raw css since they allow you create a single css file and provides you with a lot more flexibility.</li><li>If you wish to embed disqus or google comments or other third party dynamic content, then I suggest that you use separate include files instead of plugins.</li></ul></div></div><div class="section" id="settings"><div class="section" id="the-two-settings-files"><p>By default, pelican comes with both a <code>pelicanconf.py</code> and <code>publishconf.py</code>. When you are writing content and wish to see a preview, the settings in <code>pelicanconf.py</code> are used. When you choose to publish, for example to github or some other place, the settings in <code>pelicanconf.py</code> and <code>publishconf.py</code> are used as <code>pelicanconf.py</code> is imported in <code class="coderef">1</code> below:</p><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*- #</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="c"># This file is only used if you use `make publish` or</span>
<span class="c"># explicitly specify it as your config file.</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">curdir</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">pelicanconf</span> <span class="kn">import</span> <span class="o">*</span>  <span class="c"># 1</span>

<span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div></div><div class="section" id="how-settings-work"><p>By convention all settings are capitalized:</p><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*- #</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span>

<span class="n">AUTHOR</span> <span class="o">=</span> <span class="s">u'Nafiul Islam'</span>
<span class="n">SITENAME</span> <span class="o">=</span> <span class="s">u'fUNNY bLOG'</span>
<span class="n">SITEURL</span> <span class="o">=</span> <span class="s">''</span>
</pre></div><p>If we take a look in the default theme, they are used like so:</p><div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">DISQUS_SITENAME</span> <span class="k">and</span> <span class="nv">SITEURL</span> <span class="k">and</span> <span class="nv">article.status</span> <span class="p">!</span><span class="o">=</span> <span class="s2">"draft"</span> <span class="cp">%}</span><span class="x"/>
<span class="x">&lt;div class="comments"&gt;</span>
<span class="x">&lt;h2&gt;Comments !&lt;/h2&gt;</span>
<span class="x">&lt;div id="disqus_thread"&gt;&lt;/div&gt;</span>
<span class="x">&lt;script type="text/javascript"&gt;</span>
<span class="x">var disqus_shortname = '</span><span class="cp">{{</span> <span class="nv">DISQUS_SITENAME</span> <span class="cp">}}</span><span class="x">';</span>
<span class="x">var disqus_identifier = '</span><span class="cp">{{</span> <span class="nv">article.url</span> <span class="cp">}}</span><span class="x">';</span>
<span class="x">var disqus_url = '</span><span class="cp">{{</span> <span class="nv">SITEURL</span> <span class="cp">}}</span><span class="x">/</span><span class="cp">{{</span> <span class="nv">article.url</span> <span class="cp">}}</span><span class="x">';</span>
<span class="x">(function() {</span>
<span class="x">var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;</span>
<span class="x">(...)</span>
</pre></div><p>Here, <code>SITEURL</code> AND <code>DISQUS_SITENAME</code> are both settings that are described in either <code>pelicanconf.py</code> or <code>publishconf.py</code>. They appear as variables inside the jinja template. <a class="footnote-reference" href="#notmyideaarticlehtml" id="id6">[6]</a></p><p>Most settings that we put into our settings files are used in the theme, however, some settings like <code>DEFAULT_PAGINATION</code> are used to determine other things.</p></div></div><div class="section" id="writing-content"><p>Pelican supports reStructuredText as its default document format. However, there is also support for markdown, ipython notebook, asciidoc and probably much more. To write in any of these formats, one needs to install the plugin associated with the file extension, such as <a class="reference external" href="https://github.com/getpelican/pelican-plugins/tree/master/asciidoc_reader">asciidoc_reader</a> for the asciidoc format and <a class="reference external" href="https://github.com/danielfrg/pelican-ipynb">pelican-ipynb</a> for the ipython notebook format. <a class="footnote-reference" href="#notallpluginsarefound" id="id7">[7]</a></p><p>I would suggest reStructuredText, since it has the most features and can offer many ways to extend the syntax with features such as directives and interpreted roles. For example, reStructuredText supports footnotes out of the box, whereas if one were to use markdown, one would need to install a separate plugin and attach it to pelican. <a class="footnote-reference" href="#footnotesrst" id="id8">[8]</a></p><p>However, pelican has many third party plugins for markdown documents as well so if you prefer using markdown, then please do so, I only recommend reStructuredText because its easy to extend.</p></div><div class="section" id="previewing-content"><div class="section" id="devserver"><p>The default way to see a preview of the generated blog is to use <code>make devserver</code>, this regenerates your blog every time that you change your <code>content</code> folder. This option is a horrible way to preview your blog for a couple of reasons:</p><ul class="simple"><li>You need to hit the refresh button in your browser to see the changes after a save. This can often get tiring.</li><li><code>make devserver</code> runs two processes in background for no good reason, the processes log data into the console anyways, so why not just have a tool that generates your content and terminates when you hit <kbd class="light">ctrl</kbd> + <kbd class="light">C</kbd> ?</li><li>Furthermore, in the transformation from your chosen format to html, if you hit an error, the daemon that keeps transforming your files to html also stops, and the error is often buried deep inside the logs</li></ul></div><div class="section" id="livereload"><p>We need a solution that does two things for us:</p><ul class="simple"><li>Allows us to see live previews on each save without having to refresh the browser.</li><li>Does not stop unexpectedly from an error.</li><li>Has an easy to use CLI</li></ul><p>The solution is to use a neat little package called <code>livereload</code> and can be installed through:</p><p>Once this has been installed, we need to install the livereload plugin for our respective browser. For example in chrome:</p><img alt="Searching for the livereload extension" class="align-center" src="/images/pelican_01.png"/><img alt="Installing the right plugin" class="align-center" src="/images/pelican_02.png"/><p>In firefox, we head over to addons.mozilla.org and search for <code>livereload</code>:</p><img alt="Installing on Firefox" class="align-center" src="/images/pelican_03.png"/><p>Once this has been installed, we need to run the livereload server. I do this by adding an extra function to my <code>fabfile.py</code> file:</p><div class="highlight"><pre><span class="kn">import</span> <span class="nn">livereload</span>

<span class="k">def</span> <span class="nf">live_build</span><span class="p">(</span><span class="n">port</span><span class="o">=</span><span class="mi">8080</span><span class="p">):</span>

    <span class="n">local</span><span class="p">(</span><span class="s">'make clean'</span><span class="p">)</span>  <span class="c"># 1</span>
    <span class="n">local</span><span class="p">(</span><span class="s">'make html'</span><span class="p">)</span>  <span class="c"># 2</span>
    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">'output'</span><span class="p">)</span>  <span class="c"># 3</span>
    <span class="n">server</span> <span class="o">=</span> <span class="n">livereload</span><span class="o">.</span><span class="n">Server</span><span class="p">()</span>  <span class="c"># 4</span>
    <span class="n">server</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="s">'../content/*.rst'</span><span class="p">,</span>  <span class="c"># 5</span>
        <span class="n">livereload</span><span class="o">.</span><span class="n">shell</span><span class="p">(</span><span class="s">'pelican -s ../pelicanconf.py -o ../output'</span><span class="p">))</span>  <span class="c"># 6</span>
    <span class="n">server</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="s">'../naffy/'</span><span class="p">,</span>  <span class="c"># 7</span>
        <span class="n">livereload</span><span class="o">.</span><span class="n">shell</span><span class="p">(</span><span class="s">'pelican -s ../pelicanconf.py -o ../output'</span><span class="p">))</span>  <span class="c"># 8</span>
    <span class="n">server</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="s">'*.html'</span><span class="p">)</span>  <span class="c"># 9</span>
    <span class="n">server</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="s">'*.css'</span><span class="p">)</span>  <span class="c"># 10</span>
    <span class="n">server</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="n">liveport</span><span class="o">=</span><span class="mi">35729</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="n">port</span><span class="p">)</span>  <span class="c"># 11</span>
</pre></div><p>We have a lot to explain here so lets begin with <code class="coderef">1</code> and <code class="coderef">2</code>. In both <code class="coderef">1</code> and <code class="coderef">2</code>, we use the <code>local</code> function from fabric. <code>local</code> allows us to run shell commands like <code>cd</code>. In this case, we are using the <code>make</code> command because pelican comes with a Makefile. If we involve <code>make help</code> from the command line in our project directory, we get the following:</p><div class="highlight"><pre><span class="nv">$ </span>make <span class="nb">help</span>
Makefile <span class="k">for</span> a pelican Web site

Usage:
   make html                        <span class="o">(</span>re<span class="o">)</span>generate the web site
   make clean                       remove the generated files
</pre></div><p>So, in <code class="coderef">1</code> we clean out output folder, and in <code class="coderef">2</code> we generate our html files from our content.</p><p>In <code class="coderef">3</code>, we change the directory to our newly created output folder and in <code class="coderef">4</code> we create an instance of the <code>livereload</code> server. In <code class="coderef">5</code>, we use the <code>server.watch</code> function to watch all the <code>rst</code> files since my content is written in reStructuredText. We can change this to <code>../content/*.md</code> for markdown files for example.</p><p><code>server.watch</code> had one required argument and two optional arguments. The first argument is <code>filepath</code>, the second is <code>func</code>, a function that you run every time watched files are changed. The last argument is <code>delay</code>, which delays function execution. <a class="footnote-reference" href="#id14" id="id9">[9]</a></p><p>In <code class="coderef">6</code>, we specify the function to be run as <code>livereload.shell('pelican -s ../pelicanconf.py -o ../output')</code>. The <code>shell</code> function from <code>livereload</code> allows us to run shell functions every time a watched file is changed. In this case, we ask pelican to remake our html files. Why was <code>make html</code> not used here? This is because the <code>make</code> command looks for a Makefile and we are right now in our output directory.</p><p>In <code class="coderef">7</code>, the server is directed to watch the "naffy" directory. The "naffy" directory is the directory that houses my theme; if any change is made to my theme, livereload refreshes the server. Replace "naffy" with whatever folder you are housing your theme in. If you're using the default theme, then do not add <code class="coderef">7</code> and <code class="coderef">8</code>. <code class="coderef">8</code> is the same as <code class="coderef">6</code>, we just rebuild the html.</p><p>In <code class="coderef">9</code> and <code class="coderef">10</code>, the server is further instructed to watch html and css files that change within the output directory.</p><p>Finally in <code class="coderef">11</code>, we tell livereload to serve on port <code>35729</code>. This is the default port for the livereload plugin <a class="footnote-reference" href="#chromedoesntwork" id="id10">[10]</a>. The <code>port</code> variable is the port of the server serving the files, the <code>liveport</code> variable is a port that livereload uses to make changes directly to the HTML file.</p><img alt="Livereload plugin preferences on FireFox" class="align-center" src="/images/pelican_04.png"/></div></div><div class="section" id="plugins"><div class="section" id="using-plugins"><p>Most plugins in pelican tell you how to install them. For example, the <a class="reference external" href="https://github.com/getpelican/pelican-plugins/tree/master/render_math">render_math</a> plugin allows you to embed math inside your posts. Here's the basic gist of what you need to do in order to install them:</p><ul class="simple"><li>Download the plugin package into your plugins folder, which is set inside your <code>pelicanconf.py</code> file in the <code>PLUGIN_PATHS</code> variable.</li><li>Then append the name of your plugin package inside your <code>pelicanconf.py</code> file. <a class="footnote-reference" href="#settingspy" id="id11">[11]</a></li><li>Follow any other additional instructions that your plugin might have.</li></ul><p>If just adding the name does not work, then one might consider adding <code>&lt;plugin_name&gt;.&lt;plugin_file&gt;</code>. <a class="footnote-reference" href="#pluginsimport" id="id12">[12]</a></p></div><div class="section" id="creating-plugins"><p>Creating plugins in pelican basically means that you create a function to do your processing. You then register that function as a plugin. Creating plugins is <a class="reference external" href="http://docs.getpelican.com/en/latest/plugins.html#how-to-create-plugins">well documented</a> and an example of creating a reader is given.</p><p>In my use of pelican, more often than not, I've needed to create plugins that are process text in a given document, not add support for new document formats. So, I'll show you how I created a plugin for adding keyboard keys like <kbd class="light">alt</kbd> and <kbd class="light">⌘</kbd> .</p><p>I like to create my plugins as packages, but you can create them as simple files as well. So, inside our plugins folder, create a new package, and inside the package, we create a new file for the plugin:</p><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>plugins  <span class="c"># Or whatever your plugins folder is called</span>
<span class="nv">$ </span>mkdir keyboard
<span class="nv">$ </span><span class="nb">cd </span>keyboard
<span class="nv">$ </span>touch __init__.py kb.py
<span class="nv">$ </span>ls
__init__.py kb.py
</pre></div><p>Inside <code>kb.py</code>, we can need a function that modifies existing code, and a function that registers the function:</p><div class="highlight"><pre><span class="kn">from</span> <span class="nn">pelican</span> <span class="kn">import</span> <span class="n">signals</span>

<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="n">logging</span><span class="o">.</span><span class="n">Logger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">content_object_init</span><span class="p">(</span><span class="n">instance</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Provides the key plugin, make sure that you have Keys.css, http://michaelhue.com/keyscss/</span>
<span class="sd">    imported inside your HTML. How to use:</span>

<span class="sd">        So you hit [kb:CTRL] + [kb:ALT] + [kb:DEL] when in doubt</span>

<span class="sd">    Note, that light keyboard keys are enabled by default.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">instance</span><span class="o">.</span><span class="n">_content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>  <span class="c"># 1</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">_content</span>
        <span class="n">new_content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">r"\[kb:(.+?)\]"</span><span class="p">,</span> <span class="s">r'&lt;kbd class="light"&gt;\1&lt;/kbd&gt;'</span><span class="p">,</span> <span class="n">content</span><span class="p">)</span>  <span class="c"># 2</span>
        <span class="n">instance</span><span class="o">.</span><span class="n">_content</span> <span class="o">=</span> <span class="n">new_content</span>
        <span class="k">return</span> <span class="n">instance</span>


<span class="k">def</span> <span class="nf">register</span><span class="p">():</span>
    <span class="n">signals</span><span class="o">.</span><span class="n">content_object_init</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">content_object_init</span><span class="p">)</span>  <span class="c"># 3</span>
</pre></div><p>In <code class="coderef">1</code>, we check if the article, page or blog post in question has content; essentially does it have a body. If we don't have a body, then we skip this object. In <code class="coderef">2</code>, replace with the corresponding stylized version, so that typing <code>[kb:alt]</code> will give you <kbd class="light">alt</kbd> .</p><p>In <code class="coderef">3</code>, we register the function with pelican. Registering this plugin is simple, inside <code>pelicanconf.py</code>, we merely append to the list of <code>PLUGINS</code>:</p><div class="highlight"><pre><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">PLUGINS</span> <span class="o">+=</span> <span class="p">[</span><span class="s">'keyboard.kb'</span><span class="p">]</span>
<span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div><p>I used <a class="reference external" href="http://michaelhue.com/keyscss/">key.css</a> to style my keys, and I simply added the css file to my theme's <code>article.html</code>.</p><p>Once can create far more interesting plugins than the one I've shown, by looking at the plugin repository for more interesting plugins or even reading the documentation (although its not exhaustive in its explanations).</p></div></div><div class="section" id="hosting-on-github-pages"><p>Github is the best way to host your static blog. Some notable sites which get a substantial amount of traffic are hosted on github like <a class="reference external" href="http://getbootstrap.com/">Bootstrap</a>, <a class="reference external" href="http://yeoman.io/">Yeoman</a>, <a class="reference external" href="https://jakevdp.github.io/">Pythonic Perambulations</a> are hosted on github pages. If you don't have a github account, creating one is simple and quick.</p><div class="section" id="creating-the-repo"><p>In order to get a site name like <code>username.github.io</code>, one needs to create a repo with that name on github, set the visibility to public and do not initialize with anything, you want an empty repo that you can push to.</p></div><div class="section" id="ghp-import"><p><code>ghp-import</code> is a simple plugin that allows you to easily push your content to a github repo. You can install it using pip:</p><p>There are two steps to doing this:</p><div class="highlight"><pre><span class="nv">$ </span>ghp-import output
<span class="nv">$ </span>git push git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git gh-pages:master
</pre></div><p>This will push the files in your <code>output</code> folder directly to the master branch of the <code>&lt;username&gt;.github.io</code> repository. It may take some time initially, but you will be able to see your fully generated blog on this domain.</p></div><div class="section" id="custom-domains"><p>In order to get your own top level domain like I have with <code>nafiulis.me</code>, you simply need to add a <code>CNAME</code> file with your domain. The <code>CNAME</code> file must me located <em>inside</em> your output directory and must only have the domain name. My <code>CNAME</code> file looks like this:</p><p>The <code>CNAME</code> file must be included when you are pushing to your github repo.</p><p>Once this is done, you need to link your domain up with github, and this is wonderfully explained in this <a class="reference external" href="http://davidensinger.com/2013/03/setting-the-dns-for-github-pages-on-namecheap/">article</a></p></div></div><div class="section" id="automating-publication"><p>I use fabric to automate my publication, I just have two functions to do this:</p><div class="highlight"><pre><span class="k">def</span> <span class="nf">enter_dns_file</span><span class="p">():</span>  <span class="c"># 1</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'output/CNAME'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">'nafiulis.me'</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">github</span><span class="p">(</span><span class="n">publish_drafts</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span> <span class="c"># 2</span>

    <span class="k">try</span><span class="p">:</span>  <span class="c"># 3</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">'output/drafts'</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">publish_drafts</span><span class="p">:</span>
                <span class="n">local</span><span class="p">(</span><span class="s">'rm -rf output/drafts'</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="n">local</span><span class="p">(</span><span class="s">'ghp-import output'</span><span class="p">)</span>  <span class="c"># 4</span>
    <span class="n">local</span><span class="p">(</span><span class="s">'git push'</span>
          <span class="s">'git@github.com:&lt;username&gt;/&lt;username&gt;.github.io.git</span>
          <span class="s">'gh-pages:master'</span><span class="p">)</span> <span class="c"># 5</span>
    <span class="n">local</span><span class="p">(</span><span class="s">'rm -rf output'</span><span class="p">)</span>  <span class="c"># 6</span>
</pre></div><p>In <code class="coderef">1</code>, the function <code>enter_dns_file</code> is used to insert the <code>CNAME</code> file into the output folder before pushing to github because in <code class="coderef">6</code>, we delete the entire output folder.</p><p>In <code class="coderef">2</code>, the <code>github</code> function is used to publish the content of the output folder to our github repo, with the option of publishing drafts which is <code>False</code> by default. The <code>try-catch</code> block in <code class="coderef">3</code> is there to check if we have any drafts in the first place, and if the <code>publish_drafts</code> variable is <code>True</code>, then we publish them.</p><p>From <code class="coderef">4</code> to <code class="coderef">5</code>, we push the content to the repository. Replace <code>&lt;username&gt;</code> with your username.</p></div><div class="section" id="acknowledgements"><p>I would like to thank <strong>Ashwini Chaudhury</strong>, <strong>Karan Sikka</strong>, <strong>Mahmud Ridwan</strong>, <strong>Sahib bin Mahboob</strong> and <strong>Keiron Pizzey</strong> for proofreading this article before publication.</p><hr class="docutils"/></div></div></div></body></html>